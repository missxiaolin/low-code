const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/vcc-ArBdJIXz.js","static/js/index-BmU_Jf5b.js","static/css/index-ZapVBUj5.css","static/js/vueCodeEditorDialog-hYE03L0D.js","static/js/index-CLbMWSNp.js","static/css/vcc-D-d22rQz.css"])))=>i.map(i=>d[i]);
var l=(m,v,p)=>new Promise((y,S)=>{var e=o=>{try{s(p.next(o))}catch(n){S(n)}},t=o=>{try{s(p.throw(o))}catch(n){S(n)}},s=o=>o.done?y(o.value):Promise.resolve(o.value).then(e,t);s((p=p.apply(m,v)).next())});import{_ as C,j as g,r as i,o as b,f as j,b as a,w as r,W as F,d as O,a as P,a8 as _,G as J,__tla as k}from"./index-BmU_Jf5b.js";import{d as q}from"./component-BY-YlorO.js";import{a as U,b as V}from"./page-BvKYcoh6.js";let w,L=Promise.all([(()=>{try{return k}catch(m){}})()]).then(()=>l(void 0,null,function*(){function m(e,t){return t===""||/^\//.test(t)?Promise.resolve():Promise.reject("\u8DEF\u7531\u8DEF\u5F84\u5FC5\u987B/\u5F00\u5934")}const v=C({props:["pageForm"],emits:["success"],setup(e,{emit:t}){let s=g(!1);const o=g(!1),n=g([{label:"\u7981\u7528",value:1,disabled:!0},{label:"\u542F\u7528",value:2}]);let c=g({form:{route_name:e.pageForm.route_name||"",path:e.pageForm.path||"",status:e.pageForm.status||2},rules:{route_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u540D\u79F0"}],path:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u8DEF\u5F84"},{validator:m,trigger:"change"}],status:[{required:!0,message:"Please select status"}]}});return{props:e,open:s,showPagePop:()=>{s.value=!0},formRef:o,statusOptions:n,pageData:c,onSubmit:()=>{o.value.validate().then(()=>{t("success",c.value.form),s.value=!1}).catch(h=>{})},resetForm:()=>{o.value.resetFields()}}}},[["render",function(e,t,s,o,n,c){const h=i("BookOutlined"),u=i("a-button"),I=i("a-input"),f=i("a-form-item"),D=i("a-radio-group"),E=i("a-form"),N=i("a-modal");return b(),j("li",null,[a(u,{type:"link",onClick:o.showPagePop},{default:r(()=>[a(h),t[4]||(t[4]=F("\u9875\u9762\u8BBE\u7F6E "))]),_:1},8,["onClick"]),a(N,{open:o.open,"onUpdate:open":t[3]||(t[3]=d=>o.open=d),title:"\u9875\u9762\u8BBE\u7F6E",footer:null},{default:r(()=>[a(E,{ref:"formRef","label-col":{span:3},model:o.pageData.form,rules:o.pageData.rules},{default:r(()=>[a(f,{ref:"route_name",label:"\u8DEF\u7531\u540D\u79F0",name:"route_name"},{default:r(()=>[a(I,{value:o.pageData.form.route_name,"onUpdate:value":t[0]||(t[0]=d=>o.pageData.form.route_name=d)},null,8,["value"])]),_:1},512),a(f,{ref:"path",label:"\u8DEF\u7531\u8DEF\u5F84",name:"path"},{default:r(()=>[a(I,{value:o.pageData.form.path,"onUpdate:value":t[1]||(t[1]=d=>o.pageData.form.path=d),disabled:o.props.pageForm.id>0},null,8,["value","disabled"])]),_:1},512),a(f,{ref:"status",label:"\u8DEF\u7531\u8DEF\u5F84",name:"status"},{default:r(()=>[a(D,{value:o.pageData.form.status,"onUpdate:value":t[2]||(t[2]=d=>o.pageData.form.status=d),options:o.statusOptions},null,8,["value","options"])]),_:1},512),a(f,{class:"form-bottom-btns"},{default:r(()=>[a(u,{type:"primary",onClick:o.onSubmit},{default:r(()=>t[5]||(t[5]=[F("\u4FDD\u5B58")])),_:1},8,["onClick"]),a(u,{style:{"margin-left":"10px"},onClick:o.resetForm},{default:r(()=>t[6]||(t[6]=[F("\u91CD\u7F6E")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open"])])}],["__scopeId","data-v-f1485c6c"]]),p={components:{vcc:O(()=>P(()=>import("./vcc-ArBdJIXz.js").then(e=>l(void 0,null,function*(){return yield e.__tla,e})).then(e=>e.v),__vite__mapDeps([0,1,2,3,4,5]))),toolePage:v},data:()=>({asyncComponents:[],projectId:0,pageForm:{id:0,route_name:"",path:"",status:2},isShowVcc:!1,codeInfoEntity:{codeStructure:"",JSCode:"",mode:1,css:"",eventNode:{},customData:[]}}),mounted(){this.projectId=Number(this.$route.query.projectId)||0,this.pageForm.id=Number(this.$route.query.pageId)||0,this.init()},methods:{getComponentAll(){return l(this,null,function*(){let e=yield q({projectId:this.projectId});e.success&&e.model&&e.model.length>0&&(this.asyncComponents=e.model,window.vccAsyncComponents=e.model)})},init(){return l(this,null,function*(){if(yield this.getComponentAll(),!this.pageForm.id||this.pageForm.id===0)return this.codeInfoEntity.JSCode=`export default {
  setup() {

    return {};
  },
};
`,this.codeInfoEntity.css="",this.codeInfoEntity.codeStructure=JSON.parse('{"template":{"lc_id":"root","__children":[{"div":{"class":"container","id": "vcc-container","style": "min-height: 100%;","lc_id":"container","__children":[]}}]}}'),void(this.isShowVcc=!0);let e=yield U({id:this.pageForm.id,projectId:this.projectId});if(!e.success)return void _.error(e.errorMessage);const t=e.model;this.pageForm={id:t.id,route_name:t.route_name,path:t.path,status:t.status},this.codeInfoEntity.JSCode=t.script_json,this.codeInfoEntity.css=t.css,this.codeInfoEntity.codeStructure=JSON.parse(t.tem_json),this.codeInfoEntity.eventNode=JSON.parse(t.eventNode),this.codeInfoEntity.customData=JSON.parse(t.customData),this.isShowVcc=!0})},onCodeUpdate({codeRawVueInfo:e,JSCode:t,css:s,eventNode:o,customData:n}){},onLoadFinish(){},save(e){return l(this,null,function*(){if(!this.pageForm.route_name||!this.pageForm.path)return _.error("\u8BF7\u5148\u8BBE\u7F6E\u9875\u9762\u4FE1\u606F\uFF01\uFF01\uFF01");const t={id:this.pageForm.id,project_id:this.$route.query.projectId,route_name:this.pageForm.route_name,path:this.pageForm.path,status:this.pageForm.status,tem_json:JSON.stringify(e.codeRawVueInfo),script_json:e.JSCode,page_html:e.code,css:e.css,eventNode:JSON.stringify(e.eventNode),customData:JSON.stringify(e.customData)};let s=yield V(t);s.success?(_.success("\u4FDD\u5B58\u6210\u529F"),setTimeout(()=>{this.$router.push({path:"/project/page",query:{projectId:this.$route.query.projectId}})},2e3)):_.error(s.errorMessage)})},toolePageSuccess(e){this.pageForm={route_name:e.route_name,path:e.path,status:e.status}}}},y={key:0,class:"vcc-detaiil-box"};w=C(p,[["render",function(e,t,s,o,n,c){const h=i("toolePage"),u=i("vcc");return n.isShowVcc?(b(),j("div",y,[a(u,{asyncComponents:n.asyncComponents,initCodeEntity:n.codeInfoEntity,onUpdateCodeEntity:c.onCodeUpdate,onOnLoadFinish:c.onLoadFinish,onSave:c.save},{toole:r(()=>[a(h,{pageForm:n.pageForm,onSuccess:c.toolePageSuccess},null,8,["pageForm","onSuccess"])]),_:1},8,["asyncComponents","initCodeEntity","onUpdateCodeEntity","onOnLoadFinish","onSave"])])):J("",!0)}],["__scopeId","data-v-812bcd07"]])}));export{L as __tla,w as default};
