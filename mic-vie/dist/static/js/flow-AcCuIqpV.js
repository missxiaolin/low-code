import{_export_sfc as e,flowNode as t,formulaModal as n,ref as o,onMounted as a,nextTick as l,resolveComponent as s,openBlock as c,createElementBlock as d,createBaseVNode as i,createVNode as r,withCtx as y,getCurrentInstance as p,createTextVNode as u}from"./index-CR_1l9OE.js";import{vueCodeEditor as m}from"./vueCodeEditorDialog-D_PB8yMz.js";const v={id:"root",label:"开始",type:"start",menus:[{key:"action",label:"动作",nodeType:"action",nodeName:"动作"}],x:-148,y:-88,depth:0,style:{hover:{},selected:{}},children:[{type:"action",id:"n-0.47867639966454933",label:"请求接口",key:"action",menus:[{label:"成功",key:"success",nodeType:"event",nodeName:"成功",eventKey:"success"},{label:"失败",key:"error",nodeType:"event",nodeName:"失败",eventKey:"error"},{label:"成功或失败",key:"finally",nodeType:"event",nodeName:"成功或失败",eventKey:"finally"}],x:-148,y:8,depth:1,style:{hover:{},selected:{}},config:{type:"request",config:{requestUrl:"/adm/project/menu/route/all",requestMethod:"post",activeKey:"requestParams",requestParams:[{key:"projectId",value:"1"}],requestParamsScript:"(function (ctx) {\n  // TODO\n                    \n})(ctx)"}},children:[{type:"event",id:"n-0.5576941675489195",label:"成功",key:"success",menus:[{key:"action",label:"动作",nodeType:"action",nodeName:"动作",eventKey:"success"},{key:"condition",label:"条件",nodeType:"condition",nodeName:"条件",eventKey:"success"}],eventKey:"success",x:-148,y:104,depth:2,style:{hover:{},selected:{}},children:[{type:"condition",id:"n-0.31174882380509583",label:"条件",key:"condition",menus:[{key:"action",label:"动作",nodeType:"action",nodeName:"动作"},{key:"condition",label:"条件",nodeType:"condition",nodeName:"条件"}],eventKey:"success",x:-226,y:200,depth:3,style:{hover:{},selected:{}},config:{name:"",editorValue:"AND(IF(eventData.success, true, false), IF(COUNT(eventData.model), true, false))"},children:[{type:"action",id:"n-0.29706420380230414",label:"消息提示",key:"action",menus:[{label:"成功",key:"success",nodeType:"event",nodeName:"成功",eventKey:"success"},{label:"失败",key:"error",nodeType:"event",nodeName:"失败",eventKey:"error"},{label:"成功或失败",key:"finally",nodeType:"event",nodeName:"成功或失败",eventKey:"finally"}],x:-226,y:296,depth:4,style:{hover:{},selected:{}},config:{type:"message",config:{type:"success",content:"请求成功"}}}]},{type:"condition",id:"n-0.3769275350007346",label:"条件",key:"condition",menus:[{key:"action",label:"动作",nodeType:"action",nodeName:"动作"},{key:"condition",label:"条件",nodeType:"condition",nodeName:"条件"}],eventKey:"success",x:-70,y:200,depth:3,style:{hover:{},selected:{}},config:{name:"",editorValue:"IF(eventData.success, false, true)"}}]}]}]},f={class:"ceshi",id:"ceshi"},h={class:"node-viewer"};const k=e({components:{flowNode:t,vueCode:m,formulaModal:n},setup(){const e=o(null),t=o(!1),n=o(!1);let s=o("ceshi");const c=o([]),d=o(!1),i=o(null),r=o(v),y=p();a((()=>{l((()=>{var e;(e=y.proxy).$el&&e.$el.setAttribute("vueautoreport-uid",e._uid),e.$root.$el,e.$root.$el._isBindDelegate}))}));return{ceshiRef:e,getContainer:e=>document.getElementById("ceshi"),ceshiOpen:t,open:d,save:()=>{i.value.flowSave()},flowNodeRef:i,flowData:r,ceshi:s,customData:c,modelOpen:n}}},[["render",function(e,t,n,o,a,l){const p=s("a-modal"),m=s("a-button"),v=s("formulaModal"),k=s("flowNode"),b=s("a-drawer");return c(),d("div",null,[i("div",f,[r(p,{open:o.ceshiOpen,"onUpdate:open":t[0]||(t[0]=e=>o.ceshiOpen=e),getContainer:o.getContainer,ref:"ceshiRef"},{default:y((()=>t[4]||(t[4]=[i("div",null,"ceshi",-1)]))),_:1},8,["open","getContainer"])]),r(m,{type:"primary",onClick:t[1]||(t[1]=e=>o.modelOpen=!0)},{default:y((()=>t[5]||(t[5]=[u("打开")]))),_:1}),r(v,{open:o.modelOpen,"onUpdate:open":t[2]||(t[2]=e=>o.modelOpen=e),customData:o.customData,title:"公式编辑",footer:null,width:"50%"},null,8,["open","customData"]),r(b,{open:o.open,"onUpdate:open":t[3]||(t[3]=e=>o.open=e),contentWrapperStyle:{transform:"translateX(0)"},mask:!1,title:"事件流配置",placement:"right",width:"100%"},{extra:y((()=>[r(m,{type:"primary",onClick:o.save},{default:y((()=>t[6]||(t[6]=[u("保存")]))),_:1},8,["onClick"])])),default:y((()=>[i("div",h,[r(k,{customData:o.customData,nodeData:o.flowData,ref:"flowNodeRef"},null,8,["customData","nodeData"])])])),_:1},8,["open"])])}],["__scopeId","data-v-e78c9f3d"]]);export{k as default};
