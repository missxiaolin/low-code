var E=Object.defineProperty;var h=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var f=(n,s,e)=>s in n?E(n,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[s]=e,u=(n,s)=>{for(var e in s||(s={}))x.call(s,e)&&f(n,e,s[e]);if(h)for(var e of h(s))k.call(s,e)&&f(n,e,s[e]);return n};var g=(n,s,e)=>new Promise((i,t)=>{var o=c=>{try{r(e.next(c))}catch(d){t(d)}},a=c=>{try{r(e.throw(c))}catch(d){t(d)}},r=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,a);r((e=e.apply(n,s)).next())});import{_ as w,U as _,j as y,k as v,o as l,f as p,c as b,Y as $,Z as z,V as I,J as S,a7 as J,af as O,n as N,r as j,H as B,I as M,X as W,D as H,ah as F}from"./index-s7KGLxIK.js";import{b as q}from"./dpPage-MPfQa7xL.js";import{o as A,s as m}from"./dom-BtjtYaQL.js";const C=["lc_id"],P=w({components:{previewShape:w({name:"micShape",props:{defaultStyle:{type:Object,default:()=>({})},vccComponentName:{type:String,default:""}},emits:["change"],setup(n,{emit:s}){const e=_(),i=y(null);return v(()=>{}),{shapeRef:i,attrs:e}}},[["render",function(n,s,e,i,t,o){return l(),p("div",{class:"shape",ref:"shapeRef",style:S({top:`${e.defaultStyle.top}px`,left:`${e.defaultStyle.left}px`,width:`${e.defaultStyle.width}px`,height:`${e.defaultStyle.height}px`})},[(l(),b(I(e.vccComponentName),$(z(i.attrs)),null,16))],4)}],["__scopeId","data-v-b99ec3b2"]])},setup(){const n=y({});J();const s=O(),e=(t={})=>{switch(t.zoomMode){case"auto":((o,a)=>{const r=document.documentElement.clientWidth/o,c=document.documentElement.clientHeight/a;m(document.getElementById("preview-container"),{transform:`scale(${r}, ${c})`,transformOrigin:"left top",backgroundSize:"100% 100%"})})(t.width,t.height);break;case"width":(o=>{const a=document.documentElement.clientWidth/o;m(document.getElementById("preview-container"),{transform:`scale(${a})`,transformOrigin:"left top",backgroundSize:"100%"})})(t.width);break;case"height":(o=>{const a=document.documentElement.clientWidth,r=document.documentElement.clientHeight/o,c=(a-width*r)/2;m(document.getElementById("preview-container"),{transform:`scale(${r})`,transformOrigin:"left top",backgroundSize:width/a*r*100+"% 100%",backgroundPosition:`${c.toFixed(3)}px top`,marginLeft:`${c.toFixed(3)}px`})})(t.width,t.height);break;case"full":((o,a)=>{const r=document.documentElement.clientWidth,c=document.documentElement.clientHeight/a,d=(r-o*c)/2;m(document.getElementById("preview-container"),{transform:`scale(${c})`,transformOrigin:"left top",backgroundSize:o/r*c*100+"% 100%",backgroundPosition:`${d.toFixed(3)}px top`}),document.documentElement.style.overflowX="scroll"})(t.width,t.height);break;default:m(document.getElementById("preview-container"),{overflow:"hidden",position:"relative"})}},i=t=>{const o=t.match(/width: (\d+)px;/)[1],a=t.match(/height: (\d+)px;/)[1];return{width:Number(o),height:Number(a)}};return v(()=>{N(()=>{g(this,null,function*(){const t=yield q({id:s.query.id,projectId:s.query.projectId});if(!t.success)return;const o=JSON.parse(t.model.tem_json).template.__children[0].div;n.value=o,setTimeout(()=>{e(u({zoomMode:n.value.zoomMode},i(n.value.style)))},0)})}),A(window,"resize",()=>{e(u({zoomMode:n.value.zoomMode},i(n.value.style)))})}),{comJson:n,getAttr:t=>{const o=JSON.parse(JSON.stringify(t["mic-shape"]));return Object.keys(o).forEach(a=>{a.startsWith(":")&&(o[a.substring(1)]=F(o[a]))}),o}}}},[["render",function(n,s,e,i,t,o){const a=j("previewShape");return l(),p("div",{class:H(i.comJson.class),id:"preview-container",lc_id:i.comJson.lc_id,style:S(i.comJson.style)},[(l(!0),p(B,null,M(i.comJson.__children,r=>(l(),b(a,W({ref_for:!0},i.getAttr(r),{scale:n.scale}),null,16,["scale"]))),256))],14,C)}]]);export{P as default};
