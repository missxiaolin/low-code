const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/index-CWjdGE5L.js","static/js/index-CaN1-knc.js","static/css/index-t8MkTDgm.css","static/js/code-generator-factory-DTxROKyR.js","static/css/code-generator-factory-BWu0zQ8U.css","static/js/dom-DZyOpeSR.js","static/js/index.browser-CnptF3mM.js","static/js/xml-fold-DnPKLEiT.js","static/css/xml-fold-D05cK1KH.css","static/css/index-YQ1rOcM3.css","static/js/index-l1nWInrO.js","static/css/index-ClxFxNlR.css","static/js/index-oGkMCEai.js","static/css/index-DLFaAgzu.css"])))=>i.map(i=>d[i]);
var ke=Object.defineProperty;var oe=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var ne=(S,y,m)=>y in S?ke(S,y,{enumerable:!0,configurable:!0,writable:!0,value:m}):S[y]=m,se=(S,y)=>{for(var m in y||(y={}))De.call(y,m)&&ne(S,m,y[m]);if(oe)for(var m of oe(y))Le.call(y,m)&&ne(S,m,y[m]);return S};var A=(S,y,m)=>new Promise(($,T)=>{var x=O=>{try{G(m.next(O))}catch(I){T(I)}},B=O=>{try{G(m.throw(O))}catch(I){T(I)}},G=O=>O.done?$(O.value):Promise.resolve(O.value).then(x,B);G((m=m.apply(S,y)).next())});import{_ as V,o as k,f as M,ag as Re,j as f,ah as Oe,k as re,n as xe,q as Ne,r as w,e as L,J as K,c as W,w as U,b as R,ai as ae,a0 as Pe,d as z,y as Ve,G as le,aj as Me,a as H,ak as Te,p as Ge,s as Ie,D as Je,H as Ae,I as We,X as je,al as $e,am as Be,__tla as Fe}from"./index-CaN1-knc.js";import{p as Ue,E as ze,c as He,d as Xe,g as qe,v as Ke}from"./code-generator-factory-DTxROKyR.js";import{a as j,o as N,b as P}from"./dom-DZyOpeSR.js";import{c as Ye,p as Qe}from"./index.browser-CnptF3mM.js";import{G as Ze}from"./xml-fold-DnPKLEiT.js";let ce,de,ue,et=Promise.all([(()=>{try{return Fe}catch(S){}})()]).then(()=>A(void 0,null,function*(){const S={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},y=V({},[["render",function(s,e){return k(),M("svg",S,e[0]||(e[0]=[Re('<defs><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse"><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1"></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse"><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)"></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1"></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"></rect>',2)]))}]]),m=s=>`${s}px`,$=(s,e,i,t)=>{const o=s!=null?s:document.createElement("canvas");o.width=e*t,o.height=i*t,o.style.width=m(e),o.style.height=m(i);const n=o.getContext("2d");return n&&n.setTransform(t,0,0,t,0,0),o},T=(s,e,i,t)=>{var d,c;if(!s||!s.style)return;const o=parseFloat(s.style.transform.match(new RegExp("(?<=X\\()(.+)","gi"))[0]),{height:n,scale:r,offset:l}=e;let a=0;return a=e&&e.direction=="TB"?i-(((d=s.parentElement)==null?void 0:d.offsetLeft)||0)-o:t-(((c=s.parentElement)==null?void 0:c.offsetTop)||0)-o,a=a-n+e.indicatorLineWidth,{coor:Math.floor((a-l)/r),dist:a}};class x{constructor(e,i,t,o=0){this.options=i,this.el=e,this.isMoveing=!1,this.guideLine="",this.coor=-1,this.constructGuide(t,o)}constructGuide(e,i=""){const{el:t}=this,o=document.createElement("div");o.title="\u53CC\u51FB\u5220\u9664\u53C2\u8003\u7EBF",j(o,"ruler-line"),this.guideLine=o;const{coor:n}=this;this.setLine(e,i),e&&this.coorChange("add",this.coor,n);let r=t.querySelector(".lines-wrapper");r||(r=document.createElement("div"),j(r,"lines-wrapper"),t.appendChild(r)),r.appendChild(o),N(o,"mousedown",this.moving.bind(this)),N(o,"dblclick",this.dblclick.bind(this))}moving(e){x.isMoveing=!0;const{options:i}=this;e.preventDefault(),e.stopPropagation();const{coor:t}=this,o=r=>{i.direction==="TB"?document.body.style.cursor="ew-resize":document.body.style.cursor="ns-resize",this.setLine(r)},n=()=>{x.isMoveing=!1,document.body.style.cursor="",P(document,"mousemove",o),P(document,"mouseup",n);const{coor:r}=this;r<0?this.coorChange("delete",t,t):this.coorChange("update",r,t)};N(document,"mousemove",o),N(document,"mouseup",n)}setLine(e,i=0){const{el:t,options:o,guideLine:n}=this,r=e?T(t,o,e.clientX,e.clientY):((l,a)=>{const{scale:d,offset:c}=a;return{coor:l,dist:parseFloat((l*d+c).toFixed(3))}})(i,o);o.direction==="TB"?n.style.left=m(r.dist):n.style.top=m(r.dist),n.innerHTML=`
        <div class="line-action">
          <span class="line-value">${r.coor}</span>
        </div>`,this.coor=r.coor}dblclick(e){e.preventDefault(),e.stopPropagation(),this.destroy()}coorChange(e,i,t){const{options:o}=this;o.coorChange&&o.coorChange(e,i,t)}show(){this.guideLine.style.display="block"}hide(){this.guideLine.style.display="none"}destroy(){const{guideLine:e,coor:i}=this;this.coorChange("delete",i,i),P(e,"mousedown",this.moving.bind(this)),P(e,"dblclick",this.dblclick.bind(this)),e.remove()}}class B{constructor(e,i){this.el=e,this.guideLines=[],this.indicatorValue="",this.indicator="",this.ruler={width:0,height:0},this.ctx="",this.canvas="",this.readonly="",this.options=se({direction:"TB",width:1e3,height:20,bgColor:"#0e1013",fontFamily:"sans-serif",fontSize:"10px",fontColor:"#90a0ae",strokeStyle:"rgba(161, 174, 179, 0.8)",lineWidth:.5,indicatorLineWidth:1,scale:1,offset:40,ratio:2},i),this.constructRuler()}constructRuler(){const{el:e,options:i}=this,{direction:t,width:o,height:n,ratio:r}=i,l=Math.max(t==="TB"?e.offsetWidth:e.offsetHeight,o),a=n;this.ruler.width=l,this.ruler.height=a;const d=$(null,l,a,r);j(d,"canvas-ruler"),e.appendChild(d),this.canvas=d,this.ctx=d.getContext("2d"),this.drawRuler(),N(d,"mouseenter",this.constructIndicator.bind(this)),N(d,"mousedown",this.createGuideLine.bind(this))}drawRuler(){const{ctx:e,options:i,ruler:t}=this,{width:o,height:n}=t;e.beginPath(),e.fillStyle=i.bgColor,e.fillRect(0,0,o,n),e.closePath(),e.beginPath(),e.font=`${i.fontSize} ${i.fontFamily}`,e.textAlign="left",e.fillStyle=i.fontColor,e.strokeStyle=i.strokeStyle,e.lineWidth=i.lineWidth,this.drawPoints(),e.stroke()}drawPoints(){const{ctx:e,options:i,ruler:t}=this,{width:o,height:n}=t,{offset:r,scale:l}=i,a=n/1.5,d=n/1.2;for(let c=0;c<=o;c+=1){const p=c-r;if(p<0)continue;let b=-1,C=-1;p%50==0?(b=Math.floor(p/l),C=0):p%25==0?C=a:p%5==0&&(C=d),C>=0&&(e.moveTo(c+.5,n+.5),e.lineTo(c+.5,C),b>-1&&e.fillText(`${b}`,c+2.5,n/1.5))}}constructIndicator(e){if(x.isMoveing)return;const{el:i,options:t,canvas:o}=this,n=document.createElement("div"),r=document.createElement("span");j(n,"ruler-indicator"),j(r,"indicator-value"),n.appendChild(r),this.indicator=n,this.indicatorValue=r,i.appendChild(n);const l=c=>{const p=T(i,t,c.clientX,c.clientY);n.style.left=m(p.dist),r.textContent=`${p.coor}`};l(e);const a=c=>{l(c)},d=()=>{P(o,"mousemove",a),P(o,"mouseout",d),n.remove()};N(o,"mousemove",a),N(o,"mouseout",d)}createGuideLine(e){e.preventDefault(),e.stopPropagation();const{el:i,options:t}=this;this.guideLines.push(new x(i,t,e))}setGuideLines(e){const{el:i,options:t}=this;e.forEach(o=>{this.guideLines.push(new x(i,t,null,o))})}setSize(e,i,t){const{el:o,options:n}=this;n.width=e,n.height=i,n.scale=t;const{direction:r,width:l,height:a,ratio:d}=n,c=Math.max(r==="TB"?o.offsetWidth:o.offsetHeight,l),p=a;this.ruler.width=c,this.ruler.height=p,$(this.canvas,c,p,d),this.drawRuler(),this.guideLines.forEach(b=>b.setLine(null,b.coor))}setScale(e){this.options.scale=e,this.drawRuler(),this.guideLines.forEach(i=>i.setLine(null,i.coor))}toggleGuide(e){const i=e?"show":"hide";this.guideLines.forEach(t=>t[i]())}clearGuides(){this.guideLines.forEach(e=>e.destroy()),this.guideLines=[]}destroy(){const{el:e,canvas:i}=this;this.clearGuides(),P(i,"mouseenter",this.constructIndicator.bind(this)),P(i,"mousedown",this.createGuideLine.bind(this)),e.remove()}}const G={class:"canvas-ruler-wp"},O=V({setup(s,{expose:e}){const i=f(null),t=f(null),o=f(null),n=f(null),r=f(!0),l=f(0),a=f(0),d=document.documentElement.clientWidth;let c={h:[],v:[]};const p=(h,E)=>{o.value?o.value.setSize(h,20,E.scale):(o.value=new B(i.value,{direction:"TB",width:h,scale:E.scale,coorChange:(D,v,u)=>{D==="add"?c.h.push(v):D==="update"&&v!==u?(c.h=c.h.filter(_=>_!==u),c.h.push(v)):D==="delete"&&(c.h=c.h.filter(_=>_!==v))}}),o.value.setGuideLines(c.h))},b=h=>{n.value?n.value.setSize(h.height,20,h.scale):(n.value=new B(t.value,{direction:"LR",width:h.height,scale:h.scale,coorChange:(E,D,v)=>{E==="add"?c.v.push(D):E==="update"&&D!==v?(c.v=c.v.filter(u=>u!==v),c.v.push(D)):E==="delete"&&(c.v=c.v.filter(u=>u!==D))}}),n.value.setGuideLines(c.v))};Oe(()=>{if(!i.value||!t.value)return;const h={width:1920,height:1080,scale:1},E=Math.max(h.width,d);p(E,h),b(h)});const C=h=>{const E=h.target;l.value=E.scrollLeft,a.value=E.scrollTop};return re(()=>{xe(()=>{const h=document.getElementById("editor");h==null||h.addEventListener("scroll",C)})}),Ne(()=>{const h=document.getElementById("editor");h==null||h.removeEventListener("scroll",C)}),e({setHRule:p,setVRule:b}),{toggleGuides:()=>{o.value&&n.value&&(r.value=!r.value,o.value.toggleGuide(r.value),n.value.toggleGuide(r.value))},hRulerWpRef:i,vRulerWpRef:t,hRuler:o,vRuler:n,visible:r,hScroll:l,vScroll:a}}},[["render",function(s,e,i,t,o,n){const r=w("EyeOutlined"),l=w("n-icon"),a=w("EyeInvisibleOutlined");return k(),M("div",G,[L("div",{ref:"hRulerWpRef",class:"ruler-wrapper h-container",style:K(`transform: translateX(-${t.hScroll}px);`)},null,4),L("div",{ref:"vRulerWpRef",class:"ruler-wrapper v-container",style:K(`transform: rotate(90deg) translateX(-${t.vScroll}px);`)},null,4),L("div",{title:"\u5207\u6362\u53C2\u8003\u7EBF",class:"ruler-corner",onClick:e[0]||(e[0]=(...d)=>t.toggleGuides&&t.toggleGuides(...d))},[t.visible?(k(),W(l,{key:0},{default:U(()=>[R(r)]),_:1})):(k(),W(l,{key:1},{default:U(()=>[R(a)]),_:1}))])])}]]),I={class:"slider-box"},he=V({name:"editScale",props:{scale:{type:Number,default:1}},emits:["change"],setup:(s,{emit:e})=>({sliderValue:f(s.scale),formatter:i=>100*i+"%",change:i=>{e("change",i)}})},[["render",function(s,e,i,t,o,n){const r=w("a-slider");return k(),M("div",I,[R(r,{value:t.sliderValue,"onUpdate:value":e[0]||(e[0]=l=>t.sliderValue=l),max:1,step:.1,min:.1,"tip-formatter":t.formatter,onChange:t.change},null,8,["value","tip-formatter","onChange"])])}],["__scopeId","data-v-774614f8"]]);function Y(s){if(s){const e=s.attributes.lc_id.nodeValue;let i=window.templateSourceMap[e];return!i&&window.tree&&(i=window.tree[e]),i}return null}function J(s){return Object.prototype.toString.apply(s)==="[object Object]"}function X(s){return Object.keys(s)[0]}function F(s){return s[X(s)]}function me(s){const e=function(i){return F(i).lc_id}(s);return!!window.templateSourceMap[e]}function Q(s){return s.attributes&&s.attributes.lc_id?s:s.parentNode?Q(s.parentNode):null}de=function(s){return s.querySelector(".title")&&(s=s.querySelector(".title")),s.attributes.lc_id?Y(s):{[s.localName]:{__text__:s.innerText,class:s.className}}},ce=function(){return"@#$!"};function Z(s){window.tree||(window.tree={}),function(e){(function i(t){for(const o in t)if(t.hasOwnProperty(o)){const n=t[o];if(t.hasOwnProperty("__key__")&&t.__key__==="__children"&&J(n)&&delete t.__key__,o==="lc_id"&&t.hasOwnProperty("__key__")){const r=t.__key__,l={[r]:t};l.__proto__=t.__proto__,delete t.__key__,window.tree[n]=l}else o==="__children"?t.__children.forEach(r=>{r.__key__=o,i(r)}):J(n)&&(n.__key__=o,i(n))}})(e)}(s)}function ee(s){return Y(Q(s))}class pe{constructor(e){this.isOnload=!1,this.editMode=!0,this.eventEmitter=new ze,this.currentPointPositionAfterIndex=-1,this.renderStack=[],this.redoStack=[],this.externalJS={},this.customCss="",this.eventNode={},this.customData={},this.componentOptions={},this.dropIninFunction=e&&e.dropIninFunction?e.dropIninFunction:""}subscribeEventListener(e,i){this.eventEmitter.on(e,i)}getComponentOptions(){return this.componentOptions}onSelectElement(e){return this.subscribeEventListener("selected",e),this}onRootElementMounted(e){return this.subscribeEventListener("mounted",e),this}onCodeCreated(e){return this.subscribeEventListener("codeCreated",e),this}onCodeStructureUpdated(e){return this.subscribeEventListener("codeStructureUpdated",e),this}onMerged(e){return this.subscribeEventListener("onMerged",e),this}onNodeDeleted(e){return this.subscribeEventListener("onNodeDeleted",e),this}setDropInfo(e){this.currentPointDropInfo=e}saveCssCodeOnly(e){return this.customCss=e||"",this}saveJSCodeOnly(e){return this.externalJS=e||"",this}saveEventNode(e){return this.eventNode=e,this}saveJsData(e){return this.customData=e,this}setEditMode(e,i){this.editMode=e,this.mountedEle=i,this.reRender()}reRender(){return this._render(this._rawDataStructure),this}asyncReRender(){return A(this,null,function*(){return yield this._render(this._rawDataStructure),this})}render(e){return this._render(e),this}_render(e){return A(this,null,function*(){this._rawDataStructure=e;const i=ae(e);this.eventEmitter.emit("codeStructureUpdated",i),this.initCodeGenerator();let t=yield this.codeGenerator.outputVueCodeWithJsonObj(e);t=t.replace(/:\s*\(([\w\s,]*)\)\s*=>/g,"($1)");let o=t.replace(/\s{1}lc_id=".+?"/g,"");return o=o.replace(/\s{1}vccName=".+?"/g,""),o=o.replace(/\s{1}component_name=".+?"/g,""),o=o.replace(/\s{1}lc-mark/g,""),o=o.replace(/\s{1}div-lc-mark/g,""),this.eventEmitter.emit("codeCreated",o),this.enableEditMode(),this.flatDataStructure(e),this})}enableEditMode(){const e=this.getControlPanelRoot();this.enableDelayTask&&clearTimeout(this.enableDelayTask),this.enableDelayTask=setTimeout(()=>{this.eventEmitter.emit("mounted",e),this.initComonentsEvent()},500)}initComonentsEvent(){this.getControlPanelRoot(),this.isOnload||(this.initDropEvent(),this.isOnload=!0)}markElement(e){if(this.currentEditElement&&this.currentEditElement.classList.remove("mark-element"),this.getControlPanelRoot().querySelectorAll("[lc_id]").forEach(i=>{i.classList.remove("mark-element")}),e){this.currentEditElement=e;const i=this.markElementInner(e),t=ae(i);this.eventEmitter.emit("selected",t)}else this.eventEmitter.emit("selected",null)}markElementInner(e){e.classList.add("mark-element");const i=ee(e);let t=X(i);return i[Object.keys(i)[0]].vccName&&(t=i[Object.keys(i)[0]].vccName),e.setAttribute("lc-component-name",t),i}clearElementSelect(){this.markElement(null)}initDropEvent(){const e=this.getControlPanelRoot();e.addEventListener("dragenter",i=>{i.preventDefault()}),e.addEventListener("dragleave",i=>{i.preventDefault()}),e.addEventListener("dragover",i=>{i.preventDefault()}),e.addEventListener("drop",i=>{let t=i.dataTransfer.getData("text/plain").split("@#$!");const o=t[2],n={"mic-shape":{vccComponentName:t[3],vccName:o,":defaultStyle":`{'top':20,'left':20,'width':${Number(t[4])},'height':${Number(t[5])}}`,lc_id:"micShape",__children:[]}};me(n)&&this.initDropCode(n),this.updateCodeStructure(n)})}initDropCode(e){(function(i){const t=X(i),o=i[t],n=Ue[t];if(n){for(const r in n)if(n.hasOwnProperty(r)){const l=n[r];o[r]=l}}})(e),function(i,t){let o=t;(function n(r){if(J(r)){for(const a in r)if(r.hasOwnProperty(a)){const d=r[a];if(a=="lc_id"){const c=r[a],p=Ye("1234567890abcdefghijklmnopqrstuvwxyz",10)();o=o.replace(c,p),r[a]=p}else J(d)?n(d):(l=d,Object.prototype.toString.apply(l)==="[object Array]"&&d.forEach(c=>n(c)))}}var l})(i)}(e,""),Z(e)}updateCodeStructure(e){const i=this.getControlPanelRoot().childNodes[0];i&&(function(t,o,n=-1,r=()=>{}){t&&o&&(t.__children||(t.__children=[]),n>-1?t.__children.splice(n,0,o):t.__children.push(o),r(),o.__proto__={parentCodeNode:t})}(F(ee(i)),e,-1,()=>{this.eventEmitter.emit("onMerged")}),this.render(this._rawDataStructure))}flatDataStructure(e){Z(e)}initCodeGenerator(){this.codeGenerator=He(),this.codeGenerator.setExternalJS(this.externalJS),this.codeGenerator.setExternalCss(this.customCss),this.codeGenerator.setEventNode(this.eventNode),this.codeGenerator.setCustomData(this.customData)}createMountedElement(){const e=this.getControlPanelRoot();return this.styleNodeName&&e.setAttribute("class",this.styleNodeName),e}getControlPanelRoot(){return document.getElementById("render-control-panel")}appLoad(e,i){const t={"/main.vue":Xe(e,this._rawDataStructure),"/events.json":`${JSON.stringify(this.eventNode)}`},o=qe(t),n=Pe(z(()=>window["vue3-sfc-loader"].loadModule("/main.vue",o)));window.loadApp(n),n.mount(i)}setKeyValue(e,i,t){if(!e||!i)return;const o=F(window.tree[t]);return o[e]=i,this.render(this._rawDataStructure),o.lc_id&&setTimeout(()=>{this.selectElement(o.lc_id)},10),this}saveAttribute(e,i,t=!0){const o=e,n=F(window.tree[i]);for(const r in n)n.hasOwnProperty(r)&&r!="__children"&&r!="lc-mark"&&r!="lc_id"&&r!="div-lc-mark"&&!J(n[r])&&delete n[r];return o.forEach(r=>{n[r.key]=r.value}),this.render(this._rawDataStructure),n.lc_id&&t&&setTimeout(()=>{this.selectElement(n.lc_id,n.vccName)},10),this}selectElement(e){const i=this.getControlPanelRoot().querySelector(`[lc_id="${e}"]`);i&&setTimeout(()=>{i.click()})}getRawDataStructure(){return this._rawDataStructure}}const ve={class:"codemirror"},fe=V({components:{codeEditor:V({props:["initCode","mode"],name:"code-editor",title:"Mode: text/x-vue & Theme: monokai",components:{Codemirror:Ze},computed:{code:{get(){return this.codeStore},set(s){this.codeStore=s}}},watch:{initCode(){this.codeStore=this.initCode}},data(){return{codeStore:this.initCode,cmOption:{tabSize:4,foldGutter:!0,styleActiveLine:!0,lineNumbers:!0,line:!0,keyMap:"sublime",mode:this.mode,theme:"monokai",extraKeys:{F11(s){s.setOption("fullScreen",!s.getOption("fullScreen"))},Esc(s){s.getOption("fullScreen")&&s.setOption("fullScreen",!1)}}}}},methods:{onCmCursorActivity(s){},onCmReady(s){},onCmFocus(s){},onCmBlur(s){},onChange(){return this.$emit("update:value",this.codeStore),this.codeStore},getEditorCode(){return this.codeStore}}},[["render",function(s,e,i,t,o,n){const r=w("codemirror");return k(),M("div",ve,[R(r,{value:n.code,"onUpdate:value":e[0]||(e[0]=l=>n.code=l),options:o.cmOption,onChange:n.onChange,onCursorActivity:n.onCmCursorActivity,onReady:n.onCmReady,onFocus:n.onCmFocus,onBlur:n.onCmBlur},null,8,["value","options","onChange","onCursorActivity","onReady","onFocus","onBlur"])])}],["__scopeId","data-v-ff10cac2"]])},props:["rawCode","codeDialogVisible"],emits:["update:codeDialogVisible"],setup(s,{emit:e}){return{dialogVisible:Ve({get:()=>s.codeDialogVisible,set(){e("update:codeDialogVisible",!1)}}),handleClose:()=>{e("update:codeDialogVisible",!1)},outputCode:()=>(()=>{try{return Me.format(s.rawCode,{parser:"html",plugins:[Qe],vueIndentScriptAndStyle:!0})}catch(t){return s.rawCode}})()}}},[["render",function(s,e,i,t,o,n){const r=w("codeEditor"),l=w("a-modal");return k(),W(l,{title:"\u4EE3\u7801\u9884\u89C8",open:t.dialogVisible,"onUpdate:open":e[0]||(e[0]=a=>t.dialogVisible=a),width:"70%",top:"10vh","before-close":t.handleClose,center:!0,onOk:t.handleClose},{default:U(()=>[t.dialogVisible?(k(),W(r,{key:0,style:{"max-height":"55vh"},ref:"codeEditor",initCode:t.outputCode(),mode:"text/html"},null,8,["initCode"])):le("",!0)]),_:1},8,["open","before-close","onOk"])}],["__scopeId","data-v-04b61a6e"]]),q={components:{Grid:y,vueRuleTool:Ke,ruler:O,editScale:he,rawComponents:z(()=>H(()=>import("./index-CWjdGE5L.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),attributeInput:z(()=>H(()=>import("./index-l1nWInrO.js").then(s=>A(void 0,null,function*(){return yield s.__tla,s})),__vite__mapDeps([10,1,2,11]))),toolsBar:z(()=>H(()=>import("./index-oGkMCEai.js"),__vite__mapDeps([12,1,2,13]))),micShape:Te,lcCode:fe},props:{initCodeEntity:{type:Object,default:()=>({})},asyncComponents:{type:Array,default:()=>[]}},setup(s,{emit:e}){let i=f(!1);f({});let t=f({});const o=f(""),n=f(null),r=f(null),l=f(.5);window.vccScale=l.value;const a=f({width:0,height:0,hWidth:0}),d=new pe,c=f(""),p=f(""),b=f([]),C=f(null),h=f(null),E=(v,u=!1)=>{let _={};return b.value=v||[],v.forEach(g=>{["string","array","object"].includes(g.key)||g.key==="string"?_[g.key]=g.value:g.key==="number"?_[g.key]=Number(g.value):g.key==="boolean"?_[g.key]=g.value==="true"||g.value===!0:_[g.key]=g.value}),u&&(d.saveJsData(_),this.renderCode()),_},D=()=>{var v;d.onRootElementMounted(u=>{document.getElementsByTagName("body")[0].addEventListener("click",tt=>{d.clearElementSelect()});const _=document.documentElement.clientWidth,g=Math.max(u.offsetWidth,_);r.value&&(a.value.scale=l.value,a.hWidth=g,a.value.height=u.offsetHeight+150,a.value.width=g,r.value.setHRule(g+250,a.value),r.value.setVRule(a.value))}).onMerged(()=>{}).onCodeCreated(u=>{o.value=u}).onCodeStructureUpdated(u=>{t.value=u.template.__children[0].div,u.value=u}).onNodeDeleted(()=>{n.value=null}).onSelectElement(u=>{n.value=u}).saveCssCodeOnly((v=s.initCodeEntity.css?s.initCodeEntity.css:"",c.value=v,v)).saveJSCodeOnly((u=>{try{let _=u;return p.value=u,_}catch(_){}})(s.initCodeEntity.JSCode?s.initCodeEntity.JSCode:"")).saveEventNode(s.initCodeEntity.eventNode).saveJsData(E(s.initCodeEntity.customData||[])).render(s.initCodeEntity.codeStructure?s.initCodeEntity.codeStructure:{template:{lc_id:"root",__children:[{div:{class:"container",lc_id:"container",style:"min-height: 100%;"}}]}}),window.vccMainPanelProvider=d};return re(()=>{Promise.all([H(()=>import("./load-DwytJNh1.js"),[])]).then(v=>{D(),C.value=s.initCodeEntity.eventNode})}),Ge("mainPanelProvider",d),{showCodeDialogVisible:()=>{i.value=!0},codeDialogVisible:i,editorRef:h,ruleRef:r,canvas:a,scale:l,handleScaleChange:v=>{window.vccScale=v,a.value.scale=v,l.value=v,r.value.setHRule(a.hWidth,a.value),r.value.setVRule(a.value);const u=n.value;d.asyncReRender(),u&&Object.keys(u).length>0&&setTimeout(()=>{d.selectElement(u[Object.keys(u)[0]].lc_id)},10)},dCode:o,comJson:t,getAttr:v=>{const u=v["mic-shape"];return u.defaultStyle=$e(u[":defaultStyle"]),u}}}},te=()=>{Be(s=>({"74949cc1":s.scale}))},ie=q.setup;q.setup=ie?(s,e)=>(te(),ie(s,e)):te;const ge={class:"editor-box vcc-main"},_e={class:"vcc-main-content"},ye={class:"base-component-container"},Ce={class:"vcc-main-container"},we={id:"editor",class:"editor",ref:"editorRef"},be={class:"preview-container"},Ee={id:"render-control-panel"},Se=["id","lc_id"];ue=V(q,[["render",function(s,e,i,t,o,n){const r=w("tools-bar"),l=w("raw-components"),a=w("ruler"),d=w("mic-shape"),c=w("edit-scale"),p=w("attribute-input"),b=w("lcCode");return k(),M("div",ge,[R(r,{class:"vcc-tools-bar",onShowCodeDialogVisible:t.showCodeDialogVisible},{default:U(()=>[Ie(s.$slots,"toole",{},void 0,!0)]),_:3},8,["onShowCodeDialogVisible"]),L("div",_e,[L("nav",ye,[R(l)]),L("div",Ce,[L("div",we,[R(a,{ref:"ruleRef"},null,512),L("div",be,[L("div",Ee,[L("div",{class:Je(t.comJson.class),id:t.comJson.id,lc_id:t.comJson.lc_id,style:K(t.comJson.style)},[t.comJson.__children&&t.comJson.__children.length>0?(k(!0),M(Ae,{key:0},We(t.comJson.__children,C=>(k(),W(d,je({ref_for:!0},t.getAttr(C),{scale:t.scale}),null,16,["scale"]))),256)):le("",!0)],14,Se)])])],512),R(c,{scale:t.scale,onChange:t.handleScaleChange},null,8,["scale","onChange"])]),R(p)]),R(b,{codeDialogVisible:t.codeDialogVisible,"onUpdate:codeDialogVisible":e[0]||(e[0]=C=>t.codeDialogVisible=C),rawCode:t.dCode},null,8,["codeDialogVisible","rawCode"])])}],["__scopeId","data-v-8e0a8be0"]])}));export{et as __tla,ce as a,de as g,ue as v};
