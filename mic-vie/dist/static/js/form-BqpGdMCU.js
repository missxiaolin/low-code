const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/vcc-BeJs7T06.js","static/js/index-Cbtojdfa.js","static/js/__federation_shared_vue-Bk6MGjmQ.js","static/css/index-BGq20Z0P.css","static/js/vueCodeEditorDialog-BWExc4-y.js","static/css/vueCodeEditorDialog-B9yejwua.css","static/css/vcc-BWOb8Ack.css"])))=>i.map(i=>d[i]);
var g=(u,I,p)=>new Promise((r,a)=>{var m=n=>{try{h(p.next(n))}catch(_){a(_)}},s=n=>{try{h(p.throw(n))}catch(_){a(_)}},h=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,s);h((p=p.apply(u,I)).next())});import{i as F,_ as E,a as B,f as S,__tla as L}from"./index-Cbtojdfa.js";import{a as R,b as $,__tla as T}from"./page-CJ5stDlA.js";let w,A=Promise.all([(()=>{try{return L}catch(u){}})(),(()=>{try{return T}catch(u){}})()]).then(()=>g(void 0,null,function*(){const{ref:u}=yield F("vue");function I(t,e){return e===""||/^\//.test(e)?Promise.resolve():Promise.reject("\u8DEF\u7531\u8DEF\u5F84\u5FC5\u987B/\u5F00\u5934")}const p={props:["pageForm"],emits:["success"],setup(t,{emit:e}){let i=u(!1);const o=u(!1),d=u([{label:"\u7981\u7528",value:1,disabled:!0},{label:"\u542F\u7528",value:2}]);let c=u({form:{route_name:t.pageForm.route_name||"",path:t.pageForm.path||"",status:t.pageForm.status||2},rules:{route_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u540D\u79F0"}],path:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u8DEF\u5F84"},{validator:I,trigger:"change"}],status:[{required:!0,message:"Please select status"}]}});return{props:t,open:i,showPagePop:()=>{i.value=!0},formRef:o,statusOptions:d,pageData:c,onSubmit:()=>{o.value.validate().then(()=>{e("success",c.value.form),i.value=!1}).catch(v=>{})},resetForm:()=>{o.value.resetFields()}}}},{resolveComponent:r,createVNode:a,createTextVNode:m,withCtx:s,openBlock:h,createElementBlock:n}=yield F("vue"),_=E(p,[["render",function(t,e,i,o,d,c){const v=r("BookOutlined"),f=r("a-button"),b=r("a-input"),y=r("a-form-item"),q=r("a-radio-group"),U=r("a-form"),x=r("a-modal");return h(),n("li",null,[a(f,{type:"link",onClick:o.showPagePop},{default:s(()=>[a(v),e[4]||(e[4]=m("\u9875\u9762\u8BBE\u7F6E "))]),_:1},8,["onClick"]),a(x,{open:o.open,"onUpdate:open":e[3]||(e[3]=l=>o.open=l),title:"\u9875\u9762\u8BBE\u7F6E",footer:null},{default:s(()=>[a(U,{ref:"formRef","label-col":{span:3},model:o.pageData.form,rules:o.pageData.rules},{default:s(()=>[a(y,{ref:"route_name",label:"\u8DEF\u7531\u540D\u79F0",name:"route_name"},{default:s(()=>[a(b,{value:o.pageData.form.route_name,"onUpdate:value":e[0]||(e[0]=l=>o.pageData.form.route_name=l)},null,8,["value"])]),_:1},512),a(y,{ref:"path",label:"\u8DEF\u7531\u8DEF\u5F84",name:"path"},{default:s(()=>[a(b,{value:o.pageData.form.path,"onUpdate:value":e[1]||(e[1]=l=>o.pageData.form.path=l),disabled:o.props.pageForm.id>0},null,8,["value","disabled"])]),_:1},512),a(y,{ref:"status",label:"\u8DEF\u7531\u8DEF\u5F84",name:"status"},{default:s(()=>[a(q,{value:o.pageData.form.status,"onUpdate:value":e[2]||(e[2]=l=>o.pageData.form.status=l),options:o.statusOptions},null,8,["value","options"])]),_:1},512),a(y,{class:"form-bottom-btns"},{default:s(()=>[a(f,{type:"primary",onClick:o.onSubmit},{default:s(()=>e[5]||(e[5]=[m("\u4FDD\u5B58")])),_:1},8,["onClick"]),a(f,{style:{"margin-left":"10px"},onClick:o.resetForm},{default:s(()=>e[6]||(e[6]=[m("\u91CD\u7F6E")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open"])])}],["__scopeId","data-v-f1485c6c"]]),{defineAsyncComponent:D}=yield F("vue"),j={components:{vcc:D(()=>B(()=>import("./vcc-BeJs7T06.js").then(t=>g(void 0,null,function*(){return yield t.__tla,t})).then(t=>t.v),__vite__mapDeps([0,1,2,3,4,5,6]))),toolePage:_},data:()=>({projectId:0,pageForm:{id:0,route_name:"",path:"",status:2},isShowVcc:!1,codeInfoEntity:{codeStructure:"",JSCode:"",mode:1,css:"",eventNode:{},customData:[]}}),mounted(){this.projectId=Number(this.$route.query.projectId)||0,this.pageForm.id=Number(this.$route.query.pageId)||0,this.init()},methods:{init(){return g(this,null,function*(){if(!this.pageForm.id||this.pageForm.id===0)return this.codeInfoEntity.JSCode=`export default {
  setup() {

    return {};
  },
};
`,this.codeInfoEntity.css="",this.codeInfoEntity.codeStructure=JSON.parse('{"template":{"lc_id":"root","lc_uuid":"root","__children":[{"div":{"class":"container","lc_id":"container","lc_uuid":"container","__children":[]}}]}}'),void(this.isShowVcc=!0);let t=yield R({id:this.pageForm.id,projectId:this.projectId});if(!t.success)return void S.error(t.errorMessage);const e=t.model;this.pageForm={id:e.id,route_name:e.route_name,path:e.path,status:e.status},this.codeInfoEntity.JSCode=e.script_json,this.codeInfoEntity.css=e.css,this.codeInfoEntity.codeStructure=JSON.parse(e.tem_json),this.codeInfoEntity.eventNode=JSON.parse(e.eventNode),this.codeInfoEntity.customData=JSON.parse(e.customData),this.isShowVcc=!0})},onCodeUpdate({codeRawVueInfo:t,JSCode:e,css:i,eventNode:o,customData:d}){},onLoadFinish(){},save(t){return g(this,null,function*(){if(!this.pageForm.route_name||!this.pageForm.path)return S.error("\u8BF7\u5148\u8BBE\u7F6E\u9875\u9762\u4FE1\u606F\uFF01\uFF01\uFF01");const e={id:this.pageForm.id,project_id:this.$route.query.projectId,route_name:this.pageForm.route_name,path:this.pageForm.path,status:this.pageForm.status,tem_json:JSON.stringify(t.codeRawVueInfo),script_json:t.JSCode,page_html:t.code,css:t.css,eventNode:JSON.stringify(t.eventNode),customData:JSON.stringify(t.customData)};let i=yield $(e);i.success?(S.success("\u4FDD\u5B58\u6210\u529F"),setTimeout(()=>{this.$router.push({path:"/project/page",query:{projectId:this.$route.query.projectId}})},2e3)):S.error(i.errorMessage)})},toolePageSuccess(t){this.pageForm={route_name:t.route_name,path:t.path,status:t.status}}}},{resolveComponent:C,createVNode:N,withCtx:k,openBlock:O,createElementBlock:P,createCommentVNode:J}=yield F("vue"),V={key:0,class:"vcc-detaiil-box"};w=E(j,[["render",function(t,e,i,o,d,c){const v=C("toolePage"),f=C("vcc");return d.isShowVcc?(O(),P("div",V,[N(f,{initCodeEntity:d.codeInfoEntity,onUpdateCodeEntity:c.onCodeUpdate,onOnLoadFinish:c.onLoadFinish,onSave:c.save},{toole:k(()=>[N(v,{pageForm:d.pageForm,onSuccess:c.toolePageSuccess},null,8,["pageForm","onSuccess"])]),_:1},8,["initCodeEntity","onUpdateCodeEntity","onOnLoadFinish","onSave"])])):J("",!0)}],["__scopeId","data-v-086f6c21"]])}));export{A as __tla,w as default};
