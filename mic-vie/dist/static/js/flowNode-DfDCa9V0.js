const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/request-Rv_u-Bjf.js","static/js/index-DlDmUBvc.js","static/css/index-BGq20Z0P.css","static/css/request-C642rGmb.css","static/js/function-BAxonBtr.js","static/js/router-CnjsCIWP.js","static/css/router-CwWmQLud.css","static/js/setupValue-DR__VEV3.js","static/js/message-hbIb86k3.js"])))=>i.map(i=>d[i]);
var tK=Object.defineProperty,nK=Object.defineProperties;var rK=Object.getOwnPropertyDescriptors;var D3=Object.getOwnPropertySymbols;var iK=Object.prototype.hasOwnProperty,oK=Object.prototype.propertyIsEnumerable;var L3=(Cr,rr,Zn)=>rr in Cr?tK(Cr,rr,{enumerable:!0,configurable:!0,writable:!0,value:Zn}):Cr[rr]=Zn,Vs=(Cr,rr)=>{for(var Zn in rr||(rr={}))iK.call(rr,Zn)&&L3(Cr,Zn,rr[Zn]);if(D3)for(var Zn of D3(rr))oK.call(rr,Zn)&&L3(Cr,Zn,rr[Zn]);return Cr},Hs=(Cr,rr)=>nK(Cr,rK(rr));var B3=(Cr,rr,Zn)=>new Promise(($g,$s)=>{var At=Xi=>{try{yn(Zn.next(Xi))}catch(Qs){$s(Qs)}},P=Xi=>{try{yn(Zn.throw(Xi))}catch(Qs){$s(Qs)}},yn=Xi=>Xi.done?$g(Xi.value):Promise.resolve(Xi.value).then(At,P);yn((Zn=Zn.apply(Cr,rr)).next())});import{ah as Ao,ae as qs,ai as Vg,Z as Ee,aj as aK,ak as sK,al as uK,am as Hg,an as cK,ao as ot,ap as lK,aq as hK,_ as Dh,d as Lh,a as Bh,h as xi,r as qn,o as Sn,f as ii,e as Or,b as Zs,c as oi,D as Gi,w as Yi,F as qg,L as Zg,C as Ks,K as R3,ad as dK,U as fK,k as j3,X as pK,Y as gK,B as vK,i as mK,v as yK,ar as _x,as as bK,__tla as xK}from"./index-DlDmUBvc.js";import{C as wK,E as EK,K as SK,a as MK,M as _K,b as kK,P as CK,R as z3,S as AK,c as IK,T as TK,U as OK,e as F3,l as Kg,__tla as NK}from"./vueCodeEditorDialog-BPEd5HPw.js";let kx,G3,PK=Promise.all([(()=>{try{return xK}catch(Cr){}})(),(()=>{try{return NK}catch(Cr){}})()]).then(()=>B3(void 0,null,function*(){function Cr(e,n){for(var t=0;t<n.length;t++){const r=n[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const rr=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return Ci},get Circle(){return G4},get Ellipse(){return Y4},get Image(){return X4},get Line(){return U4},get Marker(){return V4},get Path(){return tm},get Polygon(){return Z4},get Polyline(){return K4},get Rect(){return $4},get Text(){return Q4}},Symbol.toStringTag,{value:"Module"})),Zn=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ci},get Circle(){return J4},get Dom(){return e6},get Ellipse(){return t6},get Image(){return n6},get Line(){return r6},get Marker(){return i6},get Path(){return o6},get Polygon(){return a6},get Polyline(){return s6},get Rect(){return u6},get Text(){return d6}},Symbol.toStringTag,{value:"Module"})),$g=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:wK,Emitter:EK,KeyCode:SK,KeyMod:MK,MarkerSeverity:_K,MarkerTag:kK,Position:CK,Range:z3,Selection:AK,SelectionDirection:IK,Token:TK,Uri:OK,editor:F3,languages:Kg},Symbol.toStringTag,{value:"Module"}));var $s=function(e,n){return $s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},$s(e,n)};function At(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}$s(e,n),e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var P=function(){return P=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},P.apply(this,arguments)};function yn(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}function Xi(e,n,t,r){var i,o=arguments.length,a=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,n,t,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(n,t,a):i(n,t))||a);return o>3&&a&&Object.defineProperty(n,t,a),a}function Qs(e,n){return function(t,r){n(t,r,e)}}function Cx(e,n,t,r,i,o){function a(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var s,u=r.kind,c=u==="getter"?"get":u==="setter"?"set":"value",l=!n&&e?r.static?e:e.prototype:null,h=n||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d=!1,f=t.length-1;f>=0;f--){var p={};for(var g in r)p[g]=g==="access"?{}:r[g];for(var g in r.access)p.access[g]=r.access[g];p.addInitializer=function(m){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(m||null))};var v=(0,t[f])(u==="accessor"?{get:h.get,set:h.set}:h[c],p);if(u==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(s=a(v.get))&&(h.get=s),(s=a(v.set))&&(h.set=s),(s=a(v.init))&&i.unshift(s)}else(s=a(v))&&(u==="field"?i.unshift(s):h[c]=s)}l&&Object.defineProperty(l,r.name,h),d=!0}function Ax(e,n,t){for(var r=arguments.length>2,i=0;i<n.length;i++)t=r?n[i].call(e,t):n[i].call(e);return r?t:void 0}function Ix(e){return typeof e=="symbol"?e:"".concat(e)}function Tx(e,n,t){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:t?"".concat(t," ",n):n})}function Ox(e,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,n)}function Nr(e,n,t,r){return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(l){o(l)}}function s(c){try{u(r.throw(c))}catch(l){o(l)}}function u(c){var l;c.done?i(c.value):(l=c.value,l instanceof t?l:new t(function(h){h(l)})).then(a,s)}u((r=r.apply(e,n||[])).next())})}function Pr(e,n){var t,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||l[0]!==6&&l[0]!==2)){o=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(l[0]===6&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=n.call(e,o)}catch(h){l=[6,h],r=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,c])}}}var Rh=Object.create?function(e,n,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(n,t);i&&!("get"in i?!n.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,i)}:function(e,n,t,r){r===void 0&&(r=t),e[r]=n[t]};function Nx(e,n){for(var t in e)t==="default"||Object.prototype.hasOwnProperty.call(n,t)||Rh(n,e,t)}function Qg(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jg(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r,i,o=t.call(e),a=[];try{for(;(n===void 0||n-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(i)throw i.error}}return a}function Px(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Jg(arguments[n]));return e}function jh(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var r=Array(e),i=0;for(n=0;n<t;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function ir(e,n,t){if(t||arguments.length===2)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))}function Js(e){return this instanceof Js?(this.v=e,this):new Js(e)}function Dx(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(e,n||[]),o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(h){return function(d){return Promise.resolve(d).then(h,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(h,d){i[h]&&(r[h]=function(f){return new Promise(function(p,g){o.push([h,f,p,g])>1||s(h,f)})},d&&(r[h]=d(r[h])))}function s(h,d){try{(function(f){f.value instanceof Js?Promise.resolve(f.value.v).then(u,c):l(o[0][2],f)})(i[h](d))}catch(f){l(o[0][3],f)}}function u(h){s("next",h)}function c(h){s("throw",h)}function l(h,d){h(d),o.shift(),o.length&&s(o[0][0],o[0][1])}}function Lx(e){var n,t;return n={},r("next"),r("throw",function(i){throw i}),r("return"),n[Symbol.iterator]=function(){return this},n;function r(i,o){n[i]=e[i]?function(a){return(t=!t)?{value:Js(e[i](a)),done:!1}:o?o(a):a}:o}}function Bx(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=Qg(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(o){return new Promise(function(a,s){(function(u,c,l,h){Promise.resolve(h).then(function(d){u({value:d,done:l})},c)})(a,s,(o=e[i](o)).done,o.value)})}}}function Rx(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}var Y3=Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n},e0=function(e){return e0=Object.getOwnPropertyNames||function(n){var t=[];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[t.length]=r);return t},e0(e)};function jx(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var t=e0(e),r=0;r<t.length;r++)t[r]!=="default"&&Rh(n,e,t[r]);return Y3(n,e),n}function zx(e){return e&&e.__esModule?e:{default:e}}function Fx(e,n,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!r:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(e):r?r.value:n.get(e)}function Gx(e,n,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,t):i?i.value=t:n.set(e,t),t}function Yx(e,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?n===e:e.has(n)}function Xx(e,n,t){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=n[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=n[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:n,dispose:r,async:t})}else t&&e.stack.push({async:!0});return n}var X3=typeof SuppressedError=="function"?SuppressedError:function(e,n,t){var r=new Error(t);return r.name="SuppressedError",r.error=e,r.suppressed=n,r};function Ux(e){function n(i){e.error=e.hasError?new X3(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var t,r=0;return function i(){for(;t=e.stack.pop();)try{if(!t.async&&r===1)return r=0,e.stack.push(t),Promise.resolve().then(i);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(o).then(i,function(a){return n(a),i()})}else r|=1}catch(a){n(a)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function Wx(e,n){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,o,a){return r?n?".jsx":".js":!i||o&&a?i+o+"."+a.toLowerCase()+"js":t}):e}const U3={__extends:At,__assign:P,__rest:yn,__decorate:Xi,__param:Qs,__esDecorate:Cx,__runInitializers:Ax,__propKey:Ix,__setFunctionName:Tx,__metadata:Ox,__awaiter:Nr,__generator:Pr,__createBinding:Rh,__exportStar:Nx,__values:Qg,__read:Jg,__spread:Px,__spreadArrays:jh,__spreadArray:ir,__await:Js,__asyncGenerator:Dx,__asyncDelegator:Lx,__asyncValues:Bx,__makeTemplateObject:Rx,__importStar:jx,__importDefault:zx,__classPrivateFieldGet:Fx,__classPrivateFieldSet:Gx,__classPrivateFieldIn:Yx,__addDisposableResource:Xx,__disposeResources:Ux,__rewriteRelativeImportExtension:Wx},W3=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Xx,get __assign(){return P},__asyncDelegator:Lx,__asyncGenerator:Dx,__asyncValues:Bx,__await:Js,__awaiter:Nr,__classPrivateFieldGet:Fx,__classPrivateFieldIn:Yx,__classPrivateFieldSet:Gx,__createBinding:Rh,__decorate:Xi,__disposeResources:Ux,__esDecorate:Cx,__exportStar:Nx,__extends:At,__generator:Pr,__importDefault:zx,__importStar:jx,__makeTemplateObject:Rx,__metadata:Ox,__param:Qs,__propKey:Ix,__read:Jg,__rest:yn,__rewriteRelativeImportExtension:Wx,__runInitializers:Ax,__setFunctionName:Tx,__spread:Px,__spreadArray:ir,__spreadArrays:jh,__values:Qg,default:U3},Symbol.toStringTag,{value:"Module"}));var Dr=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},zh=function(e,n){return!!Dr(e)&&e.indexOf(n)>-1},Fh=function(e,n){if(!Dr(e))return e;for(var t=[],r=0;r<e.length;r++){var i=e[r];n(i,r)&&t.push(i)}return t},V3={}.toString,wi=function(e,n){return V3.call(e)==="[object "+n+"]"};const gn=function(e){return wi(e,"Function")};var ht=function(e){return e==null};const at=function(e){return Array.isArray?Array.isArray(e):wi(e,"Array")},Tn=function(e){var n=typeof e;return e!==null&&n==="object"||n==="function"};function re(e,n){if(e){if(at(e))for(var t=0,r=e.length;t<r&&n(e[t],t)!==!1;t++);else if(Tn(e)){for(var i in e)if(e.hasOwnProperty(i)&&n(e[i],i)===!1)break}}}var Vx=Object.keys?function(e){return Object.keys(e)}:function(e){var n=[];return re(e,function(t,r){gn(e)&&r==="prototype"||n.push(r)}),n};function Hx(e,n){var t=Vx(n),r=t.length;if(ht(e))return!r;for(var i=0;i<r;i+=1){var o=t[i];if(n[o]!==e[o]||!(o in e))return!1}return!0}var Gh=function(e){return typeof e=="object"&&e!==null},dn=function(e){if(!Gh(e)||!wi(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n},qx=function(e,n){if(n===void 0&&(n=[]),at(e))for(var t=0;t<e.length;t+=1)qx(e[t],n);else n.push(e);return n};const Ui=function(e){if(at(e))return e.reduce(function(n,t){return Math.max(n,t)},e[0])},Wi=function(e){if(at(e))return e.reduce(function(n,t){return Math.min(n,t)},e[0])};var Zx=function(e){var n=e.filter(function(o){return!isNaN(o)});if(!n.length)return{min:0,max:0};if(at(e[0])){for(var t=[],r=0;r<e.length;r++)t=t.concat(e[r]);n=t}var i=Ui(n);return{min:Wi(n),max:i}},Kx=Array.prototype,H3=Kx.splice,q3=Kx.indexOf,Z3=Array.prototype.splice,$x=function(e,n){if(!Dr(e))return[];for(var t=e?n.length:0,r=t-1;t--;){var i=void 0,o=n[t];t!==r&&o===i||(i=o,Z3.call(e,o,1))}return e},Qx=function(e,n,t){if(!at(e)&&!dn(e))return e;var r=t;return re(e,function(i,o){r=n(r,i,o)}),r};const he=function(e){return wi(e,"String")};function _c(e,n){n===void 0&&(n=new Map);var t=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.has(o)||(t.push(o),n.set(o,!0))}return t}function Vi(e){if(Dr(e))return e[0]}function ai(e){if(Dr(e))return e[e.length-1]}var K3=Object.prototype.hasOwnProperty;function eu(e,n){if(!n||!at(e))return{};for(var t,r={},i=gn(n)?n:function(s){return s[n]},o=0;o<e.length;o++){var a=e[o];t=i(a),K3.call(r,t)?r[t].push(a):r[t]=[a]}return r}function Jx(e,n){if(!n)return{0:e};if(!gn(n)){var t=at(n)?n:n.replace(/\s+/g,"").split("*");n=function(r){for(var i="_",o=0,a=t.length;o<a;o++)i+=r[t[o]]&&r[t[o]].toString();return i}}return eu(e,n)}function ia(e,n){if(e["_wrap_"+n])return e["_wrap_"+n];var t=function(r){e[n](r)};return e["_wrap_"+n]=t,t}var ew={},Yh=function(e,n){var t=n.toString(),r=t.indexOf(".");if(r===-1)return Math.round(e);var i=t.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))},Ue=function(e){return wi(e,"Number")},$3=Number.isInteger?Number.isInteger:function(e){return Ue(e)&&e%1==0};function tw(e,n,t){return t===void 0&&(t=1e-5),Math.abs(e-n)<t}var Xh=function(e,n){return(e%n+n)%n},Q3=180/Math.PI;const J3=parseInt;var e5=Math.PI/180,Uh=function(e){return e5*e};const nw=function(e,n){return e.hasOwnProperty(n)};var t0=Object.values?function(e){return Object.values(e)}:function(e){var n=[];return re(e,function(t,r){gn(e)&&r==="prototype"||n.push(t)}),n};const tu=function(e){return ht(e)?"":e.toString()};var Io=function(e){var n=tu(e);return n.charAt(0).toUpperCase()+n.substring(1)},t5={}.toString,rw=function(e){return t5.call(e).replace(/^\[object /,"").replace(/]$/,"")},qa=function(e){return wi(e,"Boolean")},n0=function(e){return wi(e,"Date")},n5=Object.prototype,iw=function(e){var n=e&&e.constructor;return e===(typeof n=="function"&&n.prototype||n5)};function ow(e){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return n(e)}function aw(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}function r0(e,n){for(var t in n)n.hasOwnProperty(t)&&t!=="constructor"&&n[t]!==void 0&&(e[t]=n[t])}function ut(e,n,t,r){return n&&r0(e,n),t&&r0(e,t),r&&r0(e,r),e}var _t=function(e){if(typeof e!="object"||e===null)return e;var n;if(at(e)){n=[];for(var t=0,r=e.length;t<r;t++)typeof e[t]=="object"&&e[t]!=null?n[t]=_t(e[t]):n[t]=e[t]}else for(var i in n={},e)typeof e[i]=="object"&&e[i]!=null?n[i]=_t(e[i]):n[i]=e[i];return n};function nu(e,n,t){var r;return function(){var i=this,o=arguments,a=t&&!r;clearTimeout(r),r=setTimeout(function(){r=null,t||e.apply(i,o)},n),a&&e.apply(i,o)}}const sw=function(e,n){if(!gn(e))throw new TypeError("Expected a function");var t=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=n?n.apply(this,r):r[0],a=t.cache;if(a.has(o))return a.get(o);var s=e.apply(this,r);return a.set(o,s),s};return t.cache=new Map,t};function uw(e,n,t,r){for(var i in t=t||0,r=r||5,n)if(n.hasOwnProperty(i)){var o=n[i];o!==null&&dn(o)?(dn(e[i])||(e[i]={}),t<r?uw(e[i],o,t+1,r):e[i]=n[i]):at(o)?(e[i]=[],e[i]=e[i].concat(o)):o!==void 0&&(e[i]=o)}}var Zt=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var r=0;r<n.length;r+=1)uw(e,n[r]);return e},i0=function(e,n){if(!Dr(e))return-1;var t=Array.prototype.indexOf;if(t)return t.call(e,n);for(var r=-1,i=0;i<e.length;i++)if(e[i]===n){r=i;break}return r},r5=Object.prototype.hasOwnProperty;function cw(e){if(ht(e))return!0;if(Dr(e))return!e.length;var n=rw(e);if(n==="Map"||n==="Set")return!e.size;if(iw(e))return!Object.keys(e).length;for(var t in e)if(r5.call(e,t))return!1;return!0}var oa=function(e,n){if(e===n)return!0;if(!e||!n||he(e)||he(n))return!1;if(Dr(e)||Dr(n)){if(e.length!==n.length)return!1;for(var t=!0,r=0;r<e.length&&(t=oa(e[r],n[r]));r++);return t}if(Gh(e)||Gh(n)){var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(t=!0,r=0;r<i.length&&(t=oa(e[i[r]],n[i[r]]));r++);return t}return!1},Za=function(e,n){if(!Dr(e))return e;for(var t=[],r=0;r<e.length;r++){var i=e[r];t.push(n(i,r))}return t},i5=function(e){return e};const Hi=function(e,n,t){for(var r=0,i=he(n)?n.split("."):n;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?t:e};var o5=Object.prototype.hasOwnProperty;const ru=function(e,n,t){var r,i,o,a,s=0;t||(t={});var u=function(){s=t.leading===!1?0:Date.now(),r=null,a=e.apply(i,o),r||(i=o=null)},c=function(){var l=Date.now();s||t.leading!==!1||(s=l);var h=n-(l-s);return i=this,o=arguments,h<=0||h>n?(r&&(clearTimeout(r),r=null),s=l,a=e.apply(i,o),r||(i=o=null)):r||t.trailing===!1||(r=setTimeout(u,h)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c},lw=function(e){return Dr(e)?Array.prototype.slice.call(e):[]};var Wh={};const qi=function(e){return Wh[e=e||"g"]?Wh[e]+=1:Wh[e]=1,e+Wh[e]},kc=function(){};function Vh(e){return ht(e)?0:Dr(e)?e.length:Object.keys(e).length}var Hh;const Cc=sw(function(e,n){n===void 0&&(n={});var t=n.fontSize,r=n.fontFamily,i=n.fontWeight,o=n.fontStyle,a=n.fontVariant;return Hh||(Hh=document.createElement("canvas").getContext("2d")),Hh.font=[o,a,i,t+"px",r].join(" "),Hh.measureText(he(e)?e:"").width},function(e,n){return n===void 0&&(n={}),jh([e],t0(n)).join("")});var a5=function(){function e(){this.map={}}return e.prototype.has=function(n){return this.map[n]!==void 0},e.prototype.get=function(n,t){var r=this.map[n];return r===void 0?t:r},e.prototype.set=function(n,t){this.map[n]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(n){delete this.map[n]},e.prototype.size=function(){return Object.keys(this.map).length},e}();const s5=Object.freeze(Object.defineProperty({__proto__:null,Cache:a5,assign:ut,augment:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=e[0],r=1;r<e.length;r++){var i=e[r];gn(i)&&(i=i.prototype),ut(t.prototype,i)}},clamp:function(e,n,t){return e<n?n:e>t?t:e},clearAnimationFrame:aw,clone:_t,contains:zh,debounce:nu,deepMix:Zt,difference:function(e,n){return n===void 0&&(n=[]),Fh(e,function(t){return!zh(n,t)})},each:re,endsWith:function(e,n){return!(!at(e)&&!he(e))&&e[e.length-1]===n},every:function(e,n){for(var t=0;t<e.length;t++)if(!n(e[t],t))return!1;return!0},extend:function(e,n,t,r){gn(n)||(t=n,n=e,e=function(){});var i=Object.create?function(a,s){return Object.create(a,{constructor:{value:s}})}:function(a,s){function u(){}u.prototype=a;var c=new u;return c.constructor=s,c},o=i(n.prototype,e);return e.prototype=ut(o,e.prototype),e.superclass=i(n.prototype,n),ut(o,t),ut(e,r),e},filter:Fh,find:function(e,n){if(!at(e))return null;var t;if(gn(n)&&(t=n),dn(n)&&(t=function(i){return Hx(i,n)}),t){for(var r=0;r<e.length;r+=1)if(t(e[r]))return e[r]}return null},findIndex:function(e,n,t){t===void 0&&(t=0);for(var r=t;r<e.length;r++)if(n(e[r],r))return r;return-1},firstValue:function(e,n){for(var t=null,r=0;r<e.length;r++){var i=e[r][n];if(!ht(i)){t=at(i)?i[0]:i;break}}return t},fixedBase:Yh,flatten:function(e){if(!at(e))return[];for(var n=[],t=0;t<e.length;t++)n=n.concat(e[t]);return n},flattenDeep:qx,forIn:re,get:Hi,getEllipsisText:function(e,n,t,r){r===void 0&&(r="...");var i,o,a=Cc(r,t),s=he(e)?e:tu(e),u=n,c=[];if(Cc(e,t)<=n)return e;for(;i=s.substr(0,16),!((o=Cc(i,t))+a>u&&o>u);)if(c.push(i),u-=o,!(s=s.substr(16)))return c.join("");for(;i=s.substr(0,1),!((o=Cc(i,t))+a>u);)if(c.push(i),u-=o,!(s=s.substr(1)))return c.join("");return""+c.join("")+r},getRange:Zx,getType:rw,getWrapBehavior:function(e,n){return e["_wrap_"+n]},group:function(e,n){if(!n)return[e];var t=Jx(e,n),r=[];for(var i in t)r.push(t[i]);return r},groupBy:eu,groupToMap:Jx,has:nw,hasKey:nw,hasValue:function(e,n){return zh(t0(e),n)},head:Vi,identity:function(e){return e},includes:zh,indexOf:i0,isArguments:function(e){return wi(e,"Arguments")},isArray:at,isArrayLike:Dr,isBoolean:qa,isDate:n0,isDecimal:function(e){return Ue(e)&&e%1!=0},isElement:function(e){return e instanceof Element||e instanceof HTMLDocument},isEmpty:cw,isEqual:oa,isEqualWith:function(e,n,t){return gn(t)?!!t(e,n):oa(e,n)},isError:function(e){return wi(e,"Error")},isEven:function(e){return Ue(e)&&e%2==0},isFinite:function(e){return Ue(e)&&isFinite(e)},isFunction:gn,isInteger:$3,isMatch:Hx,isNegative:function(e){return Ue(e)&&e<0},isNil:ht,isNull:function(e){return e===null},isNumber:Ue,isNumberEqual:tw,isObject:Tn,isObjectLike:Gh,isOdd:function(e){return Ue(e)&&e%2!=0},isPlainObject:dn,isPositive:function(e){return Ue(e)&&e>0},isPrototype:iw,isRegExp:function(e){return wi(e,"RegExp")},isString:he,isType:wi,isUndefined:function(e){return e===void 0},keys:Vx,last:ai,lowerCase:function(e){return tu(e).toLowerCase()},lowerFirst:function(e){var n=tu(e);return n.charAt(0).toLowerCase()+n.substring(1)},map:Za,mapValues:function(e,n){n===void 0&&(n=i5);var t={};return Tn(e)&&!ht(e)&&Object.keys(e).forEach(function(r){t[r]=n(e[r],r)}),t},max:Ui,maxBy:function(e,n){if(at(e)){for(var t,r=-1/0,i=0;i<e.length;i++){var o=e[i],a=gn(n)?n(o):o[n];a>r&&(t=o,r=a)}return t}},measureTextWidth:Cc,memoize:sw,min:Wi,minBy:function(e,n){if(at(e)){for(var t,r=1/0,i=0;i<e.length;i++){var o=e[i],a=gn(n)?n(o):o[n];a<r&&(t=o,r=a)}return t}},mix:ut,mod:Xh,noop:kc,number2color:function(e){var n=ew[e];if(!n){for(var t=e.toString(16),r=t.length;r<6;r++)t="0"+t;n="#"+t,ew[e]=n}return n},omit:function(e,n){return Qx(e,function(t,r,i){return n.includes(i)||(t[i]=r),t},{})},parseRadius:function(e){var n=0,t=0,r=0,i=0;return at(e)?e.length===1?n=t=r=i=e[0]:e.length===2?(n=r=e[0],t=i=e[1]):e.length===3?(n=e[0],t=i=e[1],r=e[2]):(n=e[0],t=e[1],r=e[2],i=e[3]):n=t=r=i=e,{r1:n,r2:t,r3:r,r4:i}},pick:function(e,n){if(e===null||!dn(e))return{};var t={};return re(n,function(r){o5.call(e,r)&&(t[r]=e[r])}),t},pull:function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var r=0;r<n.length;r++)for(var i=n[r],o=-1;(o=q3.call(e,i))>-1;)H3.call(e,o,1);return e},pullAt:$x,reduce:Qx,remove:function(e,n){var t=[];if(!Dr(e))return t;for(var r=-1,i=[],o=e.length;++r<o;){var a=e[r];n(a,r,e)&&(t.push(a),i.push(r))}return $x(e,i),t},requestAnimationFrame:ow,set:function(e,n,t){var r=e,i=he(n)?n.split("."):n;return i.forEach(function(o,a){a<i.length-1?(Tn(r[o])||(r[o]=Ue(i[a+1])?[]:{}),r=r[o]):r[o]=t}),e},size:Vh,some:function(e,n){for(var t=0;t<e.length;t++)if(n(e[t],t))return!0;return!1},sortBy:function(e,n){var t;if(gn(n))t=function(i,o){return n(i)-n(o)};else{var r=[];he(n)?r.push(n):at(n)&&(r=n),t=function(i,o){for(var a=0;a<r.length;a+=1){var s=r[a];if(i[s]>o[s])return 1;if(i[s]<o[s])return-1}return 0}}return e.sort(t),e},startsWith:function(e,n){return!(!at(e)&&!he(e))&&e[0]===n},substitute:function(e,n){return e&&n?e.replace(/\\?\{([^{}]+)\}/g,function(t,r){return t.charAt(0)==="\\"?t.slice(1):n[r]===void 0?"":n[r]}):e},throttle:ru,toArray:lw,toDegree:function(e){return Q3*e},toInteger:J3,toRadian:Uh,toString:tu,union:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return _c([].concat.apply([],e))},uniq:_c,uniqueId:qi,upperCase:function(e){return tu(e).toUpperCase()},upperFirst:Io,values:t0,valuesOfKey:function(e,n){for(var t=[],r={},i=0;i<e.length;i++){var o=e[i][n];if(!ht(o)){at(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];r[s]||(t.push(s),r[s]=!0)}}}return t},wrapBehavior:ia},Symbol.toStringTag,{value:"Module"})),u5={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var n=this,t=this.events;this.graph=e,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||e.get("canvas").set("draggable",!0),re(t,function(r,i){e.on(i,r)}),document.addEventListener("visibilitychange",function(){n.keydown=!1})},unbind:function(e){var n=this.events,t=e.get("canvas").get("draggable");this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||e.get("canvas").set("draggable",!1),re(n,function(r,i){e.off(i,r)}),e.get("canvas").set("draggable",t)},get:function(e){return this[e]},set:function(e,n){return this[e]=n,this}};var o0=function(){function e(){}return e.registerBehavior=function(n,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(n));var r=_t(u5);Object.assign(r,t);var i=function(o){var a=this;Object.assign(this,this.getDefaultCfg(),o);var s=this.getEvents();this.events=null;var u={};s&&(re(s,function(c,l){u[l]=ia(a,c)}),this.events=u)};i.prototype=r,e.types[n]=i},e.hasBehavior=function(n){return!!e.types[n]},e.getBehavior=function(n){return e.types[n]},e.types={},e}(),a0=function(){function e(){this._events={}}return e.prototype.on=function(n,t,r){return this._events[n]||(this._events[n]=[]),this._events[n].push({callback:t,once:!!r}),this},e.prototype.once=function(n,t){return this.on(n,t,!0)},e.prototype.emit=function(n){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=this._events[n]||[],a=this._events["*"]||[],s=function(u){for(var c=u.length,l=0;l<c;l++)if(u[l]){var h=u[l],d=h.callback;h.once&&(u.splice(l,1),u.length===0&&delete t._events[n],c--,l--),d.apply(t,r)}};s(o),s(a)},e.prototype.off=function(n,t){if(n)if(t){for(var r=this._events[n]||[],i=r.length,o=0;o<i;o++)r[o].callback===t&&(r.splice(o,1),i--,o--);r.length===0&&delete this._events[n]}else delete this._events[n];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}(),Ct=1e-6,Jt=typeof Float32Array!="undefined"?Float32Array:Array,Ei=Math.random,c5=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,n=arguments.length;n--;)e+=arguments[n]*arguments[n];return Math.sqrt(e)});const l5=Object.freeze(Object.defineProperty({__proto__:null,get ARRAY_TYPE(){return Jt},EPSILON:Ct,RANDOM:Ei,equals:function(e,n){return Math.abs(e-n)<=Ct*Math.max(1,Math.abs(e),Math.abs(n))},setMatrixArrayType:function(e){Jt=e},toRadian:function(e){return e*c5}},Symbol.toStringTag,{value:"Module"}));function hw(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],u=t[1],c=t[2],l=t[3];return e[0]=r*s+o*u,e[1]=i*s+a*u,e[2]=r*c+o*l,e[3]=i*c+a*l,e}function dw(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e}var h5=hw,d5=dw;const f5=Object.freeze(Object.defineProperty({__proto__:null,LDU:function(e,n,t,r){return e[2]=r[2]/r[0],t[0]=r[0],t[1]=r[1],t[3]=r[3]-e[2]*t[1],[e,n,t]},add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e},adjoint:function(e,n){var t=n[0];return e[0]=n[3],e[1]=-n[1],e[2]=-n[2],e[3]=t,e},clone:function(e){var n=new Jt(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},create:function(){var e=new Jt(4);return Jt!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},equals:function(e,n){var t=e[0],r=e[1],i=e[2],o=e[3],a=n[0],s=n[1],u=n[2],c=n[3];return Math.abs(t-a)<=Ct*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(r-s)<=Ct*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=Ct*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=Ct*Math.max(1,Math.abs(o),Math.abs(c))},exactEquals:function(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3])},fromRotation:function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=t,e[2]=-t,e[3]=r,e},fromScaling:function(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=n[1],e},fromValues:function(e,n,t,r){var i=new Jt(4);return i[0]=e,i[1]=n,i[2]=t,i[3]=r,i},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=t*o-i*r;return a?(a=1/a,e[0]=o*a,e[1]=-r*a,e[2]=-i*a,e[3]=t*a,e):null},mul:h5,multiply:hw,multiplyScalar:function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e},multiplyScalarAndAdd:function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e},rotate:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(t),u=Math.cos(t);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e},scale:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],u=t[1];return e[0]=r*s,e[1]=i*s,e[2]=o*u,e[3]=a*u,e},set:function(e,n,t,r,i){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e},str:function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:d5,subtract:dw,transpose:function(e,n){if(e===n){var t=n[1];e[1]=n[2],e[2]=t}else e[0]=n[0],e[1]=n[2],e[2]=n[1],e[3]=n[3];return e}},Symbol.toStringTag,{value:"Module"}));function fw(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=t[0],l=t[1],h=t[2],d=t[3],f=t[4],p=t[5];return e[0]=r*c+o*l,e[1]=i*c+a*l,e[2]=r*h+o*d,e[3]=i*h+a*d,e[4]=r*f+o*p+s,e[5]=i*f+a*p+u,e}function pw(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e[4]=n[4]-t[4],e[5]=n[5]-t[5],e}var p5=fw,g5=pw;const v5=Object.freeze(Object.defineProperty({__proto__:null,add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e[4]=n[4]+t[4],e[5]=n[5]+t[5],e},clone:function(e){var n=new Jt(6);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e},create:function(){var e=new Jt(6);return Jt!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},equals:function(e,n){var t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n[0],c=n[1],l=n[2],h=n[3],d=n[4],f=n[5];return Math.abs(t-u)<=Ct*Math.max(1,Math.abs(t),Math.abs(u))&&Math.abs(r-c)<=Ct*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-l)<=Ct*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-h)<=Ct*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-d)<=Ct*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-f)<=Ct*Math.max(1,Math.abs(s),Math.abs(f))},exactEquals:function(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)},fromRotation:function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=t,e[2]=-t,e[3]=r,e[4]=0,e[5]=0,e},fromScaling:function(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=n[1],e[4]=0,e[5]=0,e},fromTranslation:function(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=n[0],e[5]=n[1],e},fromValues:function(e,n,t,r,i,o){var a=new Jt(6);return a[0]=e,a[1]=n,a[2]=t,a[3]=r,a[4]=i,a[5]=o,a},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=t*o-r*i;return u?(u=1/u,e[0]=o*u,e[1]=-r*u,e[2]=-i*u,e[3]=t*u,e[4]=(i*s-o*a)*u,e[5]=(r*a-t*s)*u,e):null},mul:p5,multiply:fw,multiplyScalar:function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e[4]=n[4]*t,e[5]=n[5]*t,e},multiplyScalarAndAdd:function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e[4]=n[4]+t[4]*r,e[5]=n[5]+t[5]*r,e},rotate:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=Math.sin(t),l=Math.cos(t);return e[0]=r*l+o*c,e[1]=i*l+a*c,e[2]=r*-c+o*l,e[3]=i*-c+a*l,e[4]=s,e[5]=u,e},scale:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=t[0],l=t[1];return e[0]=r*c,e[1]=i*c,e[2]=o*l,e[3]=a*l,e[4]=s,e[5]=u,e},set:function(e,n,t,r,i,o,a){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e},str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},sub:g5,subtract:pw,translate:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=t[0],l=t[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=r*c+o*l+s,e[5]=i*c+a*l+u,e}},Symbol.toStringTag,{value:"Module"}));function gw(){var e=new Jt(9);return Jt!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function qh(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],h=l*a-s*c,d=-l*o+s*u,f=c*o-a*u,p=t*h+r*d+i*f;return p?(p=1/p,e[0]=h*p,e[1]=(-l*r+i*c)*p,e[2]=(s*r-i*a)*p,e[3]=d*p,e[4]=(l*t-i*u)*p,e[5]=(-s*t+i*o)*p,e[6]=f*p,e[7]=(-c*t+r*u)*p,e[8]=(a*t-r*o)*p,e):null}function Zi(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],d=t[0],f=t[1],p=t[2],g=t[3],v=t[4],m=t[5],y=t[6],b=t[7],x=t[8];return e[0]=d*r+f*a+p*c,e[1]=d*i+f*s+p*l,e[2]=d*o+f*u+p*h,e[3]=g*r+v*a+m*c,e[4]=g*i+v*s+m*l,e[5]=g*o+v*u+m*h,e[6]=y*r+b*a+x*c,e[7]=y*i+b*s+x*l,e[8]=y*o+b*u+x*h,e}function s0(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=n[0],e[7]=n[1],e[8]=1,e}function u0(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=t,e[2]=0,e[3]=-t,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function c0(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=0,e[4]=n[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function vw(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e[4]=n[4]-t[4],e[5]=n[5]-t[5],e[6]=n[6]-t[6],e[7]=n[7]-t[7],e[8]=n[8]-t[8],e}var m5=Zi,y5=vw;const l0=Object.freeze(Object.defineProperty({__proto__:null,add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e[4]=n[4]+t[4],e[5]=n[5]+t[5],e[6]=n[6]+t[6],e[7]=n[7]+t[7],e[8]=n[8]+t[8],e},adjoint:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8];return e[0]=a*l-s*c,e[1]=i*c-r*l,e[2]=r*s-i*a,e[3]=s*u-o*l,e[4]=t*l-i*u,e[5]=i*o-t*s,e[6]=o*c-a*u,e[7]=r*u-t*c,e[8]=t*a-r*o,e},clone:function(e){var n=new Jt(9);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},create:gw,determinant:function(e){var n=e[0],t=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return n*(c*o-a*u)+t*(-c*i+a*s)+r*(u*i-o*s)},equals:function(e,n){var t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=n[0],d=n[1],f=n[2],p=n[3],g=n[4],v=n[5],m=n[6],y=n[7],b=n[8];return Math.abs(t-h)<=Ct*Math.max(1,Math.abs(t),Math.abs(h))&&Math.abs(r-d)<=Ct*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-f)<=Ct*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-p)<=Ct*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-g)<=Ct*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-v)<=Ct*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-m)<=Ct*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-y)<=Ct*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-b)<=Ct*Math.max(1,Math.abs(l),Math.abs(b))},exactEquals:function(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]&&e[8]===n[8]},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},fromMat2d:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=0,e[3]=n[2],e[4]=n[3],e[5]=0,e[6]=n[4],e[7]=n[5],e[8]=1,e},fromMat4:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[4],e[4]=n[5],e[5]=n[6],e[6]=n[8],e[7]=n[9],e[8]=n[10],e},fromQuat:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=t+t,s=r+r,u=i+i,c=t*a,l=r*a,h=r*s,d=i*a,f=i*s,p=i*u,g=o*a,v=o*s,m=o*u;return e[0]=1-h-p,e[3]=l-m,e[6]=d+v,e[1]=l+m,e[4]=1-c-p,e[7]=f-g,e[2]=d-v,e[5]=f+g,e[8]=1-c-h,e},fromRotation:u0,fromScaling:c0,fromTranslation:s0,fromValues:function(e,n,t,r,i,o,a,s,u){var c=new Jt(9);return c[0]=e,c[1]=n,c[2]=t,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=s,c[8]=u,c},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},invert:qh,mul:m5,multiply:Zi,multiplyScalar:function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e[4]=n[4]*t,e[5]=n[5]*t,e[6]=n[6]*t,e[7]=n[7]*t,e[8]=n[8]*t,e},multiplyScalarAndAdd:function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e[4]=n[4]+t[4]*r,e[5]=n[5]+t[5]*r,e[6]=n[6]+t[6]*r,e[7]=n[7]+t[7]*r,e[8]=n[8]+t[8]*r,e},normalFromMat4:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],h=n[9],d=n[10],f=n[11],p=n[12],g=n[13],v=n[14],m=n[15],y=t*s-r*a,b=t*u-i*a,x=t*c-o*a,w=r*u-i*s,E=r*c-o*s,S=i*c-o*u,M=l*g-h*p,k=l*v-d*p,_=l*m-f*p,C=h*v-d*g,T=h*m-f*g,A=d*m-f*v,D=y*A-b*T+x*C+w*_-E*k+S*M;return D?(D=1/D,e[0]=(s*A-u*T+c*C)*D,e[1]=(u*_-a*A-c*k)*D,e[2]=(a*T-s*_+c*M)*D,e[3]=(i*T-r*A-o*C)*D,e[4]=(t*A-i*_+o*k)*D,e[5]=(r*_-t*T-o*M)*D,e[6]=(g*S-v*E+m*w)*D,e[7]=(v*x-p*S-m*b)*D,e[8]=(p*E-g*x+m*y)*D,e):null},projection:function(e,n,t){return e[0]=2/n,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/t,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},rotate:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],d=Math.sin(t),f=Math.cos(t);return e[0]=f*r+d*a,e[1]=f*i+d*s,e[2]=f*o+d*u,e[3]=f*a-d*r,e[4]=f*s-d*i,e[5]=f*u-d*o,e[6]=c,e[7]=l,e[8]=h,e},scale:function(e,n,t){var r=t[0],i=t[1];return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=i*n[3],e[4]=i*n[4],e[5]=i*n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},set:function(e,n,t,r,i,o,a,s,u,c){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=c,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},sub:y5,subtract:vw,translate:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],d=t[0],f=t[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=d*r+f*a+c,e[7]=d*i+f*s+l,e[8]=d*o+f*u+h,e},transpose:function(e,n){if(e===n){var t=n[1],r=n[2],i=n[5];e[1]=n[3],e[2]=n[6],e[3]=t,e[5]=n[7],e[6]=r,e[7]=i}else e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8];return e}},Symbol.toStringTag,{value:"Module"}));function mw(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yw(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],d=n[9],f=n[10],p=n[11],g=n[12],v=n[13],m=n[14],y=n[15],b=t[0],x=t[1],w=t[2],E=t[3];return e[0]=b*r+x*s+w*h+E*g,e[1]=b*i+x*u+w*d+E*v,e[2]=b*o+x*c+w*f+E*m,e[3]=b*a+x*l+w*p+E*y,b=t[4],x=t[5],w=t[6],E=t[7],e[4]=b*r+x*s+w*h+E*g,e[5]=b*i+x*u+w*d+E*v,e[6]=b*o+x*c+w*f+E*m,e[7]=b*a+x*l+w*p+E*y,b=t[8],x=t[9],w=t[10],E=t[11],e[8]=b*r+x*s+w*h+E*g,e[9]=b*i+x*u+w*d+E*v,e[10]=b*o+x*c+w*f+E*m,e[11]=b*a+x*l+w*p+E*y,b=t[12],x=t[13],w=t[14],E=t[15],e[12]=b*r+x*s+w*h+E*g,e[13]=b*i+x*u+w*d+E*v,e[14]=b*o+x*c+w*f+E*m,e[15]=b*a+x*l+w*p+E*y,e}function bw(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=r+r,u=i+i,c=o+o,l=r*s,h=r*u,d=r*c,f=i*u,p=i*c,g=o*c,v=a*s,m=a*u,y=a*c;return e[0]=1-(f+g),e[1]=h+y,e[2]=d-m,e[3]=0,e[4]=h-y,e[5]=1-(l+g),e[6]=p+v,e[7]=0,e[8]=d+m,e[9]=p-v,e[10]=1-(l+f),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function xw(e,n){return e[0]=n[12],e[1]=n[13],e[2]=n[14],e}function ww(e,n){var t=n[0],r=n[1],i=n[2],o=n[4],a=n[5],s=n[6],u=n[8],c=n[9],l=n[10];return e[0]=Math.hypot(t,r,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(u,c,l),e}function Ew(e,n){var t=new Jt(3);ww(t,n);var r=1/t[0],i=1/t[1],o=1/t[2],a=n[0]*r,s=n[1]*i,u=n[2]*o,c=n[4]*r,l=n[5]*i,h=n[6]*o,d=n[8]*r,f=n[9]*i,p=n[10]*o,g=a+l+p,v=0;return g>0?(v=2*Math.sqrt(g+1),e[3]=.25*v,e[0]=(h-f)/v,e[1]=(d-u)/v,e[2]=(s-c)/v):a>l&&a>p?(v=2*Math.sqrt(1+a-l-p),e[3]=(h-f)/v,e[0]=.25*v,e[1]=(s+c)/v,e[2]=(d+u)/v):l>p?(v=2*Math.sqrt(1+l-a-p),e[3]=(d-u)/v,e[0]=(s+c)/v,e[1]=.25*v,e[2]=(h+f)/v):(v=2*Math.sqrt(1+p-a-l),e[3]=(s-c)/v,e[0]=(d+u)/v,e[1]=(h+f)/v,e[2]=.25*v),e}function Sw(e,n,t,r,i){var o,a=1/Math.tan(n/2);return e[0]=a/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}var b5=Sw;function Mw(e,n,t,r,i,o,a){var s=1/(n-t),u=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(n+t)*s,e[13]=(i+r)*u,e[14]=(a+o)*c,e[15]=1,e}var x5=Mw;function _w(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e[4]=n[4]-t[4],e[5]=n[5]-t[5],e[6]=n[6]-t[6],e[7]=n[7]-t[7],e[8]=n[8]-t[8],e[9]=n[9]-t[9],e[10]=n[10]-t[10],e[11]=n[11]-t[11],e[12]=n[12]-t[12],e[13]=n[13]-t[13],e[14]=n[14]-t[14],e[15]=n[15]-t[15],e}var w5=yw,E5=_w;const S5=Object.freeze(Object.defineProperty({__proto__:null,add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e[4]=n[4]+t[4],e[5]=n[5]+t[5],e[6]=n[6]+t[6],e[7]=n[7]+t[7],e[8]=n[8]+t[8],e[9]=n[9]+t[9],e[10]=n[10]+t[10],e[11]=n[11]+t[11],e[12]=n[12]+t[12],e[13]=n[13]+t[13],e[14]=n[14]+t[14],e[15]=n[15]+t[15],e},adjoint:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],h=n[9],d=n[10],f=n[11],p=n[12],g=n[13],v=n[14],m=n[15];return e[0]=s*(d*m-f*v)-h*(u*m-c*v)+g*(u*f-c*d),e[1]=-(r*(d*m-f*v)-h*(i*m-o*v)+g*(i*f-o*d)),e[2]=r*(u*m-c*v)-s*(i*m-o*v)+g*(i*c-o*u),e[3]=-(r*(u*f-c*d)-s*(i*f-o*d)+h*(i*c-o*u)),e[4]=-(a*(d*m-f*v)-l*(u*m-c*v)+p*(u*f-c*d)),e[5]=t*(d*m-f*v)-l*(i*m-o*v)+p*(i*f-o*d),e[6]=-(t*(u*m-c*v)-a*(i*m-o*v)+p*(i*c-o*u)),e[7]=t*(u*f-c*d)-a*(i*f-o*d)+l*(i*c-o*u),e[8]=a*(h*m-f*g)-l*(s*m-c*g)+p*(s*f-c*h),e[9]=-(t*(h*m-f*g)-l*(r*m-o*g)+p*(r*f-o*h)),e[10]=t*(s*m-c*g)-a*(r*m-o*g)+p*(r*c-o*s),e[11]=-(t*(s*f-c*h)-a*(r*f-o*h)+l*(r*c-o*s)),e[12]=-(a*(h*v-d*g)-l*(s*v-u*g)+p*(s*d-u*h)),e[13]=t*(h*v-d*g)-l*(r*v-i*g)+p*(r*d-i*h),e[14]=-(t*(s*v-u*g)-a*(r*v-i*g)+p*(r*u-i*s)),e[15]=t*(s*d-u*h)-a*(r*d-i*h)+l*(r*u-i*s),e},clone:function(e){var n=new Jt(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},create:function(){var e=new Jt(16);return Jt!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},determinant:function(e){var n=e[0],t=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],d=e[11],f=e[12],p=e[13],g=e[14],v=e[15];return(n*a-t*o)*(h*v-d*g)-(n*s-r*o)*(l*v-d*p)+(n*u-i*o)*(l*g-h*p)+(t*s-r*a)*(c*v-d*f)-(t*u-i*a)*(c*g-h*f)+(r*u-i*s)*(c*p-l*f)},equals:function(e,n){var t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=n[0],b=n[1],x=n[2],w=n[3],E=n[4],S=n[5],M=n[6],k=n[7],_=n[8],C=n[9],T=n[10],A=n[11],D=n[12],R=n[13],B=n[14],F=n[15];return Math.abs(t-y)<=Ct*Math.max(1,Math.abs(t),Math.abs(y))&&Math.abs(r-b)<=Ct*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-x)<=Ct*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-w)<=Ct*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-E)<=Ct*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-S)<=Ct*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-M)<=Ct*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-k)<=Ct*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(l-_)<=Ct*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(h-C)<=Ct*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(d-T)<=Ct*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(f-A)<=Ct*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(p-D)<=Ct*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(g-R)<=Ct*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(v-B)<=Ct*Math.max(1,Math.abs(v),Math.abs(B))&&Math.abs(m-F)<=Ct*Math.max(1,Math.abs(m),Math.abs(F))},exactEquals:function(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]&&e[8]===n[8]&&e[9]===n[9]&&e[10]===n[10]&&e[11]===n[11]&&e[12]===n[12]&&e[13]===n[13]&&e[14]===n[14]&&e[15]===n[15]},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromQuat:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=t+t,s=r+r,u=i+i,c=t*a,l=r*a,h=r*s,d=i*a,f=i*s,p=i*u,g=o*a,v=o*s,m=o*u;return e[0]=1-h-p,e[1]=l+m,e[2]=d-v,e[3]=0,e[4]=l-m,e[5]=1-c-p,e[6]=f+g,e[7]=0,e[8]=d+v,e[9]=f-g,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromQuat2:function(e,n){var t=new Jt(3),r=-n[0],i=-n[1],o=-n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=r*r+i*i+o*o+a*a;return h>0?(t[0]=2*(s*a+l*r+u*o-c*i)/h,t[1]=2*(u*a+l*i+c*r-s*o)/h,t[2]=2*(c*a+l*o+s*i-u*r)/h):(t[0]=2*(s*a+l*r+u*o-c*i),t[1]=2*(u*a+l*i+c*r-s*o),t[2]=2*(c*a+l*o+s*i-u*r)),bw(e,n,t),e},fromRotation:function(e,n,t){var r,i,o,a=t[0],s=t[1],u=t[2],c=Math.hypot(a,s,u);return c<Ct?null:(a*=c=1/c,s*=c,u*=c,r=Math.sin(n),o=1-(i=Math.cos(n)),e[0]=a*a*o+i,e[1]=s*a*o+u*r,e[2]=u*a*o-s*r,e[3]=0,e[4]=a*s*o-u*r,e[5]=s*s*o+i,e[6]=u*s*o+a*r,e[7]=0,e[8]=a*u*o+s*r,e[9]=s*u*o-a*r,e[10]=u*u*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromRotationTranslation:bw,fromRotationTranslationScale:function(e,n,t,r){var i=n[0],o=n[1],a=n[2],s=n[3],u=i+i,c=o+o,l=a+a,h=i*u,d=i*c,f=i*l,p=o*c,g=o*l,v=a*l,m=s*u,y=s*c,b=s*l,x=r[0],w=r[1],E=r[2];return e[0]=(1-(p+v))*x,e[1]=(d+b)*x,e[2]=(f-y)*x,e[3]=0,e[4]=(d-b)*w,e[5]=(1-(h+v))*w,e[6]=(g+m)*w,e[7]=0,e[8]=(f+y)*E,e[9]=(g-m)*E,e[10]=(1-(h+p))*E,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,n,t,r,i){var o=n[0],a=n[1],s=n[2],u=n[3],c=o+o,l=a+a,h=s+s,d=o*c,f=o*l,p=o*h,g=a*l,v=a*h,m=s*h,y=u*c,b=u*l,x=u*h,w=r[0],E=r[1],S=r[2],M=i[0],k=i[1],_=i[2],C=(1-(g+m))*w,T=(f+x)*w,A=(p-b)*w,D=(f-x)*E,R=(1-(d+m))*E,B=(v+y)*E,F=(p+b)*S,N=(v-y)*S,L=(1-(d+g))*S;return e[0]=C,e[1]=T,e[2]=A,e[3]=0,e[4]=D,e[5]=R,e[6]=B,e[7]=0,e[8]=F,e[9]=N,e[10]=L,e[11]=0,e[12]=t[0]+M-(C*M+D*k+F*_),e[13]=t[1]+k-(T*M+R*k+N*_),e[14]=t[2]+_-(A*M+B*k+L*_),e[15]=1,e},fromScaling:function(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=n[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromTranslation:function(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},fromValues:function(e,n,t,r,i,o,a,s,u,c,l,h,d,f,p,g){var v=new Jt(16);return v[0]=e,v[1]=n,v[2]=t,v[3]=r,v[4]=i,v[5]=o,v[6]=a,v[7]=s,v[8]=u,v[9]=c,v[10]=l,v[11]=h,v[12]=d,v[13]=f,v[14]=p,v[15]=g,v},fromXRotation:function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=t,e[7]=0,e[8]=0,e[9]=-t,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromYRotation:function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=0,e[2]=-t,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=t,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:function(e,n){var t=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=t,e[2]=0,e[3]=0,e[4]=-t,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},frustum:function(e,n,t,r,i,o,a){var s=1/(t-n),u=1/(i-r),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(t+n)*s,e[9]=(i+r)*u,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e},getRotation:Ew,getScaling:ww,getTranslation:xw,identity:mw,invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],h=n[9],d=n[10],f=n[11],p=n[12],g=n[13],v=n[14],m=n[15],y=t*s-r*a,b=t*u-i*a,x=t*c-o*a,w=r*u-i*s,E=r*c-o*s,S=i*c-o*u,M=l*g-h*p,k=l*v-d*p,_=l*m-f*p,C=h*v-d*g,T=h*m-f*g,A=d*m-f*v,D=y*A-b*T+x*C+w*_-E*k+S*M;return D?(D=1/D,e[0]=(s*A-u*T+c*C)*D,e[1]=(i*T-r*A-o*C)*D,e[2]=(g*S-v*E+m*w)*D,e[3]=(d*E-h*S-f*w)*D,e[4]=(u*_-a*A-c*k)*D,e[5]=(t*A-i*_+o*k)*D,e[6]=(v*x-p*S-m*b)*D,e[7]=(l*S-d*x+f*b)*D,e[8]=(a*T-s*_+c*M)*D,e[9]=(r*_-t*T-o*M)*D,e[10]=(p*E-g*x+m*y)*D,e[11]=(h*x-l*E-f*y)*D,e[12]=(s*k-a*C-u*M)*D,e[13]=(t*C-r*k+i*M)*D,e[14]=(g*b-p*w-v*y)*D,e[15]=(l*w-h*b+d*y)*D,e):null},lookAt:function(e,n,t,r){var i,o,a,s,u,c,l,h,d,f,p=n[0],g=n[1],v=n[2],m=r[0],y=r[1],b=r[2],x=t[0],w=t[1],E=t[2];return Math.abs(p-x)<Ct&&Math.abs(g-w)<Ct&&Math.abs(v-E)<Ct?mw(e):(l=p-x,h=g-w,d=v-E,i=y*(d*=f=1/Math.hypot(l,h,d))-b*(h*=f),o=b*(l*=f)-m*d,a=m*h-y*l,(f=Math.hypot(i,o,a))?(i*=f=1/f,o*=f,a*=f):(i=0,o=0,a=0),s=h*a-d*o,u=d*i-l*a,c=l*o-h*i,(f=Math.hypot(s,u,c))?(s*=f=1/f,u*=f,c*=f):(s=0,u=0,c=0),e[0]=i,e[1]=s,e[2]=l,e[3]=0,e[4]=o,e[5]=u,e[6]=h,e[7]=0,e[8]=a,e[9]=c,e[10]=d,e[11]=0,e[12]=-(i*p+o*g+a*v),e[13]=-(s*p+u*g+c*v),e[14]=-(l*p+h*g+d*v),e[15]=1,e)},mul:w5,multiply:yw,multiplyScalar:function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e[4]=n[4]*t,e[5]=n[5]*t,e[6]=n[6]*t,e[7]=n[7]*t,e[8]=n[8]*t,e[9]=n[9]*t,e[10]=n[10]*t,e[11]=n[11]*t,e[12]=n[12]*t,e[13]=n[13]*t,e[14]=n[14]*t,e[15]=n[15]*t,e},multiplyScalarAndAdd:function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e[4]=n[4]+t[4]*r,e[5]=n[5]+t[5]*r,e[6]=n[6]+t[6]*r,e[7]=n[7]+t[7]*r,e[8]=n[8]+t[8]*r,e[9]=n[9]+t[9]*r,e[10]=n[10]+t[10]*r,e[11]=n[11]+t[11]*r,e[12]=n[12]+t[12]*r,e[13]=n[13]+t[13]*r,e[14]=n[14]+t[14]*r,e[15]=n[15]+t[15]*r,e},ortho:x5,orthoNO:Mw,orthoZO:function(e,n,t,r,i,o,a){var s=1/(n-t),u=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(n+t)*s,e[13]=(i+r)*u,e[14]=o*c,e[15]=1,e},perspective:b5,perspectiveFromFieldOfView:function(e,n,t,r){var i=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),a=Math.tan(n.leftDegrees*Math.PI/180),s=Math.tan(n.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(i-o)*c*.5,e[10]=r/(t-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*t/(t-r),e[15]=0,e},perspectiveNO:Sw,perspectiveZO:function(e,n,t,r,i){var o,a=1/Math.tan(n/2);return e[0]=a/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(o=1/(r-i),e[10]=i*o,e[14]=i*r*o):(e[10]=-1,e[14]=-r),e},rotate:function(e,n,t,r){var i,o,a,s,u,c,l,h,d,f,p,g,v,m,y,b,x,w,E,S,M,k,_,C,T=r[0],A=r[1],D=r[2],R=Math.hypot(T,A,D);return R<Ct?null:(T*=R=1/R,A*=R,D*=R,i=Math.sin(t),a=1-(o=Math.cos(t)),s=n[0],u=n[1],c=n[2],l=n[3],h=n[4],d=n[5],f=n[6],p=n[7],g=n[8],v=n[9],m=n[10],y=n[11],b=T*T*a+o,x=A*T*a+D*i,w=D*T*a-A*i,E=T*A*a-D*i,S=A*A*a+o,M=D*A*a+T*i,k=T*D*a+A*i,_=A*D*a-T*i,C=D*D*a+o,e[0]=s*b+h*x+g*w,e[1]=u*b+d*x+v*w,e[2]=c*b+f*x+m*w,e[3]=l*b+p*x+y*w,e[4]=s*E+h*S+g*M,e[5]=u*E+d*S+v*M,e[6]=c*E+f*S+m*M,e[7]=l*E+p*S+y*M,e[8]=s*k+h*_+g*C,e[9]=u*k+d*_+v*C,e[10]=c*k+f*_+m*C,e[11]=l*k+p*_+y*C,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},rotateX:function(e,n,t){var r=Math.sin(t),i=Math.cos(t),o=n[4],a=n[5],s=n[6],u=n[7],c=n[8],l=n[9],h=n[10],d=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=o*i+c*r,e[5]=a*i+l*r,e[6]=s*i+h*r,e[7]=u*i+d*r,e[8]=c*i-o*r,e[9]=l*i-a*r,e[10]=h*i-s*r,e[11]=d*i-u*r,e},rotateY:function(e,n,t){var r=Math.sin(t),i=Math.cos(t),o=n[0],a=n[1],s=n[2],u=n[3],c=n[8],l=n[9],h=n[10],d=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*i-c*r,e[1]=a*i-l*r,e[2]=s*i-h*r,e[3]=u*i-d*r,e[8]=o*r+c*i,e[9]=a*r+l*i,e[10]=s*r+h*i,e[11]=u*r+d*i,e},rotateZ:function(e,n,t){var r=Math.sin(t),i=Math.cos(t),o=n[0],a=n[1],s=n[2],u=n[3],c=n[4],l=n[5],h=n[6],d=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*i+c*r,e[1]=a*i+l*r,e[2]=s*i+h*r,e[3]=u*i+d*r,e[4]=c*i-o*r,e[5]=l*i-a*r,e[6]=h*i-s*r,e[7]=d*i-u*r,e},scale:function(e,n,t){var r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=n[7]*i,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=n[11]*o,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},set:function(e,n,t,r,i,o,a,s,u,c,l,h,d,f,p,g,v){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=c,e[9]=l,e[10]=h,e[11]=d,e[12]=f,e[13]=p,e[14]=g,e[15]=v,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},sub:E5,subtract:_w,targetTo:function(e,n,t,r){var i=n[0],o=n[1],a=n[2],s=r[0],u=r[1],c=r[2],l=i-t[0],h=o-t[1],d=a-t[2],f=l*l+h*h+d*d;f>0&&(l*=f=1/Math.sqrt(f),h*=f,d*=f);var p=u*d-c*h,g=c*l-s*d,v=s*h-u*l;return(f=p*p+g*g+v*v)>0&&(p*=f=1/Math.sqrt(f),g*=f,v*=f),e[0]=p,e[1]=g,e[2]=v,e[3]=0,e[4]=h*v-d*g,e[5]=d*p-l*v,e[6]=l*g-h*p,e[7]=0,e[8]=l,e[9]=h,e[10]=d,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e},translate:function(e,n,t){var r,i,o,a,s,u,c,l,h,d,f,p,g=t[0],v=t[1],m=t[2];return n===e?(e[12]=n[0]*g+n[4]*v+n[8]*m+n[12],e[13]=n[1]*g+n[5]*v+n[9]*m+n[13],e[14]=n[2]*g+n[6]*v+n[10]*m+n[14],e[15]=n[3]*g+n[7]*v+n[11]*m+n[15]):(r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],d=n[9],f=n[10],p=n[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=r*g+s*v+h*m+n[12],e[13]=i*g+u*v+d*m+n[13],e[14]=o*g+c*v+f*m+n[14],e[15]=a*g+l*v+p*m+n[15]),e},transpose:function(e,n){if(e===n){var t=n[1],r=n[2],i=n[3],o=n[6],a=n[7],s=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=t,e[6]=n[9],e[7]=n[13],e[8]=r,e[9]=o,e[11]=n[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e}},Symbol.toStringTag,{value:"Module"}));function h0(){var e=new Jt(3);return Jt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function kw(e){var n=e[0],t=e[1],r=e[2];return Math.hypot(n,t,r)}function d0(e,n,t){var r=new Jt(3);return r[0]=e,r[1]=n,r[2]=t,r}function Cw(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e}function Aw(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e}function Iw(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e}function Tw(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2];return Math.hypot(t,r,i)}function Ow(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2];return t*t+r*r+i*i}function Nw(e){var n=e[0],t=e[1],r=e[2];return n*n+t*t+r*r}function Pw(e,n){var t=n[0],r=n[1],i=n[2],o=t*t+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e}function f0(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}function Zh(e,n,t){var r=n[0],i=n[1],o=n[2],a=t[0],s=t[1],u=t[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e}function iu(e,n,t){var r=n[0],i=n[1],o=n[2];return e[0]=r*t[0]+i*t[3]+o*t[6],e[1]=r*t[1]+i*t[4]+o*t[7],e[2]=r*t[2]+i*t[5]+o*t[8],e}var To,M5=Cw,_5=Aw,k5=Iw,C5=Tw,A5=Ow,Dw=kw,I5=Nw,T5=(To=h0(),function(e,n,t,r,i,o){var a,s;for(n||(n=3),t||(t=0),s=r?Math.min(r*n+t,e.length):e.length,a=t;a<s;a+=n)To[0]=e[a],To[1]=e[a+1],To[2]=e[a+2],i(To,To,o),e[a]=To[0],e[a+1]=To[1],e[a+2]=To[2];return e});const O5=Object.freeze(Object.defineProperty({__proto__:null,add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e},angle:function(e,n){var t=e[0],r=e[1],i=e[2],o=n[0],a=n[1],s=n[2],u=Math.sqrt(t*t+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),c=u&&f0(e,n)/u;return Math.acos(Math.min(Math.max(c,-1),1))},bezier:function(e,n,t,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,h=3*u*a,d=u*o;return e[0]=n[0]*c+t[0]*l+r[0]*h+i[0]*d,e[1]=n[1]*c+t[1]*l+r[1]*h+i[1]*d,e[2]=n[2]*c+t[2]*l+r[2]*h+i[2]*d,e},ceil:function(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e},clone:function(e){var n=new Jt(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e},create:h0,cross:Zh,dist:C5,distance:Tw,div:k5,divide:Iw,dot:f0,equals:function(e,n){var t=e[0],r=e[1],i=e[2],o=n[0],a=n[1],s=n[2];return Math.abs(t-o)<=Ct*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(r-a)<=Ct*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=Ct*Math.max(1,Math.abs(i),Math.abs(s))},exactEquals:function(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]},floor:function(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e},forEach:T5,fromValues:d0,hermite:function(e,n,t,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return e[0]=n[0]*s+t[0]*u+r[0]*c+i[0]*l,e[1]=n[1]*s+t[1]*u+r[1]*c+i[1]*l,e[2]=n[2]*s+t[2]*u+r[2]*c+i[2]*l,e},inverse:function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e},len:Dw,length:kw,lerp:function(e,n,t,r){var i=n[0],o=n[1],a=n[2];return e[0]=i+r*(t[0]-i),e[1]=o+r*(t[1]-o),e[2]=a+r*(t[2]-a),e},max:function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e},min:function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e},mul:_5,multiply:Aw,negate:function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e},normalize:Pw,random:function(e,n){n=n||1;var t=2*Ei()*Math.PI,r=2*Ei()-1,i=Math.sqrt(1-r*r)*n;return e[0]=Math.cos(t)*i,e[1]=Math.sin(t)*i,e[2]=r*n,e},rotateX:function(e,n,t,r){var i=[],o=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},rotateY:function(e,n,t,r){var i=[],o=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},rotateZ:function(e,n,t,r){var i=[],o=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},round:function(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e[2]=Math.round(n[2]),e},scale:function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e},scaleAndAdd:function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e},set:function(e,n,t,r){return e[0]=n,e[1]=t,e[2]=r,e},sqrDist:A5,sqrLen:I5,squaredDistance:Ow,squaredLength:Nw,str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},sub:M5,subtract:Cw,transformMat3:iu,transformMat4:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=t[3]*r+t[7]*i+t[11]*o+t[15];return a=a||1,e[0]=(t[0]*r+t[4]*i+t[8]*o+t[12])/a,e[1]=(t[1]*r+t[5]*i+t[9]*o+t[13])/a,e[2]=(t[2]*r+t[6]*i+t[10]*o+t[14])/a,e},transformQuat:function(e,n,t){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],c=n[2],l=i*c-o*u,h=o*s-r*c,d=r*u-i*s,f=i*d-o*h,p=o*l-r*d,g=r*h-i*l,v=2*a;return l*=v,h*=v,d*=v,f*=2,p*=2,g*=2,e[0]=s+l+f,e[1]=u+h+p,e[2]=c+d+g,e},zero:function(e){return e[0]=0,e[1]=0,e[2]=0,e}},Symbol.toStringTag,{value:"Module"}));function Lw(){var e=new Jt(4);return Jt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Bw(e){var n=new Jt(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function Rw(e,n,t,r){var i=new Jt(4);return i[0]=e,i[1]=n,i[2]=t,i[3]=r,i}function jw(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}function zw(e,n,t,r,i){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e}function Fw(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e}function Gw(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e}function Yw(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e[3]=n[3]*t[3],e}function Xw(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e[3]=n[3]/t[3],e}function Uw(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e}function Ww(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2],o=n[3]-e[3];return Math.hypot(t,r,i,o)}function Vw(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2],o=n[3]-e[3];return t*t+r*r+i*i+o*o}function p0(e){var n=e[0],t=e[1],r=e[2],i=e[3];return Math.hypot(n,t,r,i)}function g0(e){var n=e[0],t=e[1],r=e[2],i=e[3];return n*n+t*t+r*r+i*i}function Hw(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=t*t+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=t*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e}function qw(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]}function Zw(e,n,t,r){var i=n[0],o=n[1],a=n[2],s=n[3];return e[0]=i+r*(t[0]-i),e[1]=o+r*(t[1]-o),e[2]=a+r*(t[2]-a),e[3]=s+r*(t[3]-s),e}function Kw(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]}function $w(e,n){var t=e[0],r=e[1],i=e[2],o=e[3],a=n[0],s=n[1],u=n[2],c=n[3];return Math.abs(t-a)<=Ct*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(r-s)<=Ct*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=Ct*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=Ct*Math.max(1,Math.abs(o),Math.abs(c))}var N5=Gw,P5=Yw,D5=Xw,L5=Ww,B5=Vw,R5=p0,j5=g0,z5=function(){var e=Lw();return function(n,t,r,i,o,a){var s,u;for(t||(t=4),r||(r=0),u=i?Math.min(i*t+r,n.length):n.length,s=r;s<u;s+=t)e[0]=n[s],e[1]=n[s+1],e[2]=n[s+2],e[3]=n[s+3],o(e,e,a),n[s]=e[0],n[s+1]=e[1],n[s+2]=e[2],n[s+3]=e[3];return n}}();const F5=Object.freeze(Object.defineProperty({__proto__:null,add:Fw,ceil:function(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e[3]=Math.ceil(n[3]),e},clone:Bw,copy:jw,create:Lw,cross:function(e,n,t,r){var i=t[0]*r[1]-t[1]*r[0],o=t[0]*r[2]-t[2]*r[0],a=t[0]*r[3]-t[3]*r[0],s=t[1]*r[2]-t[2]*r[1],u=t[1]*r[3]-t[3]*r[1],c=t[2]*r[3]-t[3]*r[2],l=n[0],h=n[1],d=n[2],f=n[3];return e[0]=h*c-d*u+f*s,e[1]=-l*c+d*a-f*o,e[2]=l*u-h*a+f*i,e[3]=-l*s+h*o-d*i,e},dist:L5,distance:Ww,div:D5,divide:Xw,dot:qw,equals:$w,exactEquals:Kw,floor:function(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e[3]=Math.floor(n[3]),e},forEach:z5,fromValues:Rw,inverse:function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e},len:R5,length:p0,lerp:Zw,max:function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e[3]=Math.max(n[3],t[3]),e},min:function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e[3]=Math.min(n[3],t[3]),e},mul:P5,multiply:Yw,negate:function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e},normalize:Hw,random:function(e,n){var t,r,i,o,a,s;n=n||1;do a=(t=2*Ei()-1)*t+(r=2*Ei()-1)*r;while(a>=1);do s=(i=2*Ei()-1)*i+(o=2*Ei()-1)*o;while(s>=1);var u=Math.sqrt((1-a)/s);return e[0]=n*t,e[1]=n*r,e[2]=n*i*u,e[3]=n*o*u,e},round:function(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e[2]=Math.round(n[2]),e[3]=Math.round(n[3]),e},scale:Uw,scaleAndAdd:function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e},set:zw,sqrDist:B5,sqrLen:j5,squaredDistance:Vw,squaredLength:g0,str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:N5,subtract:Gw,transformMat4:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3];return e[0]=t[0]*r+t[4]*i+t[8]*o+t[12]*a,e[1]=t[1]*r+t[5]*i+t[9]*o+t[13]*a,e[2]=t[2]*r+t[6]*i+t[10]*o+t[14]*a,e[3]=t[3]*r+t[7]*i+t[11]*o+t[15]*a,e},transformQuat:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=t[0],s=t[1],u=t[2],c=t[3],l=c*r+s*o-u*i,h=c*i+u*r-a*o,d=c*o+a*i-s*r,f=-a*r-s*i-u*o;return e[0]=l*c+f*-a+h*-u-d*-s,e[1]=h*c+f*-s+d*-a-l*-u,e[2]=d*c+f*-u+l*-s-h*-a,e[3]=n[3],e},zero:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},Symbol.toStringTag,{value:"Module"}));function Kh(){var e=new Jt(4);return Jt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Qw(e,n,t){t*=.5;var r=Math.sin(t);return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=Math.cos(t),e}function Jw(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],u=t[1],c=t[2],l=t[3];return e[0]=r*l+a*s+i*c-o*u,e[1]=i*l+a*u+o*s-r*c,e[2]=o*l+a*c+r*u-i*s,e[3]=a*l-r*s-i*u-o*c,e}function e2(e,n,t){t*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(t),u=Math.cos(t);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=o*u-i*s,e[3]=a*u-r*s,e}function t2(e,n,t){t*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(t),u=Math.cos(t);return e[0]=r*u-o*s,e[1]=i*u+a*s,e[2]=o*u+r*s,e[3]=a*u-i*s,e}function n2(e,n,t){t*=.5;var r=n[0],i=n[1],o=n[2],a=n[3],s=Math.sin(t),u=Math.cos(t);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=o*u+a*s,e[3]=a*u-o*s,e}function r2(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=Math.sqrt(t*t+r*r+i*i),s=Math.exp(o),u=a>0?s*Math.sin(a)/a:0;return e[0]=t*u,e[1]=r*u,e[2]=i*u,e[3]=s*Math.cos(a),e}function i2(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=Math.sqrt(t*t+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return e[0]=t*s,e[1]=r*s,e[2]=i*s,e[3]=.5*Math.log(t*t+r*r+i*i+o*o),e}function $h(e,n,t,r){var i,o,a,s,u,c=n[0],l=n[1],h=n[2],d=n[3],f=t[0],p=t[1],g=t[2],v=t[3];return(o=c*f+l*p+h*g+d*v)<0&&(o=-o,f=-f,p=-p,g=-g,v=-v),1-o>Ct?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),e[0]=s*c+u*f,e[1]=s*l+u*p,e[2]=s*h+u*g,e[3]=s*d+u*v,e}function o2(e,n){var t,r=n[0]+n[4]+n[8];if(r>0)t=Math.sqrt(r+1),e[3]=.5*t,t=.5/t,e[0]=(n[5]-n[7])*t,e[1]=(n[6]-n[2])*t,e[2]=(n[1]-n[3])*t;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;t=Math.sqrt(n[3*i+i]-n[3*o+o]-n[3*a+a]+1),e[i]=.5*t,t=.5/t,e[3]=(n[3*o+a]-n[3*a+o])*t,e[o]=(n[3*o+i]+n[3*i+o])*t,e[a]=(n[3*a+i]+n[3*i+a])*t}return e}var Si,a2,s2,v0,m0,Mi,G5=Bw,Y5=Rw,y0=jw,X5=zw,U5=Fw,W5=Jw,u2=Uw,b0=qw,V5=Zw,x0=p0,H5=x0,w0=g0,q5=w0,E0=Hw,Z5=Kw,K5=$w,$5=(Si=h0(),a2=d0(1,0,0),s2=d0(0,1,0),function(e,n,t){var r=f0(n,t);return r<-.999999?(Zh(Si,a2,n),Dw(Si)<1e-6&&Zh(Si,s2,n),Pw(Si,Si),Qw(e,Si,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Zh(Si,n,t),e[0]=Si[0],e[1]=Si[1],e[2]=Si[2],e[3]=1+r,E0(e,e))}),Q5=(v0=Kh(),m0=Kh(),function(e,n,t,r,i,o){return $h(v0,n,i,o),$h(m0,t,r,o),$h(e,v0,m0,2*o*(1-o)),e}),J5=(Mi=gw(),function(e,n,t,r){return Mi[0]=t[0],Mi[3]=t[1],Mi[6]=t[2],Mi[1]=r[0],Mi[4]=r[1],Mi[7]=r[2],Mi[2]=-n[0],Mi[5]=-n[1],Mi[8]=-n[2],E0(e,o2(e,Mi))});const eL=Object.freeze(Object.defineProperty({__proto__:null,add:U5,calculateW:function(e,n){var t=n[0],r=n[1],i=n[2];return e[0]=t,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-t*t-r*r-i*i)),e},clone:G5,conjugate:function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e},copy:y0,create:Kh,dot:b0,equals:K5,exactEquals:Z5,exp:r2,fromEuler:function(e,n,t,r){var i=.5*Math.PI/180;n*=i,t*=i,r*=i;var o=Math.sin(n),a=Math.cos(n),s=Math.sin(t),u=Math.cos(t),c=Math.sin(r),l=Math.cos(r);return e[0]=o*u*l-a*s*c,e[1]=a*s*l+o*u*c,e[2]=a*u*c-o*s*l,e[3]=a*u*l+o*s*c,e},fromMat3:o2,fromValues:Y5,getAngle:function(e,n){var t=b0(e,n);return Math.acos(2*t*t-1)},getAxisAngle:function(e,n){var t=2*Math.acos(n[3]),r=Math.sin(t/2);return r>Ct?(e[0]=n[0]/r,e[1]=n[1]/r,e[2]=n[2]/r):(e[0]=1,e[1]=0,e[2]=0),t},identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],a=t*t+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-t*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e},len:H5,length:x0,lerp:V5,ln:i2,mul:W5,multiply:Jw,normalize:E0,pow:function(e,n,t){return i2(e,n),u2(e,e,t),r2(e,e),e},random:function(e){var n=Ei(),t=Ei(),r=Ei(),i=Math.sqrt(1-n),o=Math.sqrt(n);return e[0]=i*Math.sin(2*Math.PI*t),e[1]=i*Math.cos(2*Math.PI*t),e[2]=o*Math.sin(2*Math.PI*r),e[3]=o*Math.cos(2*Math.PI*r),e},rotateX:e2,rotateY:t2,rotateZ:n2,rotationTo:$5,scale:u2,set:X5,setAxes:J5,setAxisAngle:Qw,slerp:$h,sqlerp:Q5,sqrLen:q5,squaredLength:w0,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}));function c2(e,n,t){var r=.5*t[0],i=.5*t[1],o=.5*t[2],a=n[0],s=n[1],u=n[2],c=n[3];return e[0]=a,e[1]=s,e[2]=u,e[3]=c,e[4]=r*c+i*u-o*s,e[5]=i*c+o*a-r*u,e[6]=o*c+r*s-i*a,e[7]=-r*a-i*s-o*u,e}function l2(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e}var tL=y0,nL=y0;function h2(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[4],u=t[5],c=t[6],l=t[7],h=n[4],d=n[5],f=n[6],p=n[7],g=t[0],v=t[1],m=t[2],y=t[3];return e[0]=r*y+a*g+i*m-o*v,e[1]=i*y+a*v+o*g-r*m,e[2]=o*y+a*m+r*v-i*g,e[3]=a*y-r*g-i*v-o*m,e[4]=r*l+a*s+i*c-o*u+h*y+p*g+d*m-f*v,e[5]=i*l+a*u+o*s-r*c+d*y+p*v+f*g-h*m,e[6]=o*l+a*c+r*u-i*s+f*y+p*m+h*v-d*g,e[7]=a*l-r*s-i*u-o*c+p*y-h*g-d*v-f*m,e}var rL=h2,d2=b0,f2=x0,iL=f2,Qh=w0,oL=Qh;const aL=Object.freeze(Object.defineProperty({__proto__:null,add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e[4]=n[4]+t[4],e[5]=n[5]+t[5],e[6]=n[6]+t[6],e[7]=n[7]+t[7],e},clone:function(e){var n=new Jt(8);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n},conjugate:function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e[4]=-n[4],e[5]=-n[5],e[6]=-n[6],e[7]=n[7],e},copy:l2,create:function(){var e=new Jt(8);return Jt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e},dot:d2,equals:function(e,n){var t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=n[0],h=n[1],d=n[2],f=n[3],p=n[4],g=n[5],v=n[6],m=n[7];return Math.abs(t-l)<=Ct*Math.max(1,Math.abs(t),Math.abs(l))&&Math.abs(r-h)<=Ct*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-d)<=Ct*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-f)<=Ct*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-p)<=Ct*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-g)<=Ct*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-v)<=Ct*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-m)<=Ct*Math.max(1,Math.abs(c),Math.abs(m))},exactEquals:function(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]},fromMat4:function(e,n){var t=Kh();Ew(t,n);var r=new Jt(3);return xw(r,n),c2(e,t,r),e},fromRotation:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},fromRotationTranslation:c2,fromRotationTranslationValues:function(e,n,t,r,i,o,a){var s=new Jt(8);s[0]=e,s[1]=n,s[2]=t,s[3]=r;var u=.5*i,c=.5*o,l=.5*a;return s[4]=u*r+c*t-l*n,s[5]=c*r+l*e-u*t,s[6]=l*r+u*n-c*e,s[7]=-u*e-c*n-l*t,s},fromTranslation:function(e,n){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*n[0],e[5]=.5*n[1],e[6]=.5*n[2],e[7]=0,e},fromValues:function(e,n,t,r,i,o,a,s){var u=new Jt(8);return u[0]=e,u[1]=n,u[2]=t,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u},getDual:function(e,n){return e[0]=n[4],e[1]=n[5],e[2]=n[6],e[3]=n[7],e},getReal:tL,getTranslation:function(e,n){var t=n[4],r=n[5],i=n[6],o=n[7],a=-n[0],s=-n[1],u=-n[2],c=n[3];return e[0]=2*(t*c+o*a+r*u-i*s),e[1]=2*(r*c+o*s+i*a-t*u),e[2]=2*(i*c+o*u+t*s-r*a),e},identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},invert:function(e,n){var t=Qh(n);return e[0]=-n[0]/t,e[1]=-n[1]/t,e[2]=-n[2]/t,e[3]=n[3]/t,e[4]=-n[4]/t,e[5]=-n[5]/t,e[6]=-n[6]/t,e[7]=n[7]/t,e},len:iL,length:f2,lerp:function(e,n,t,r){var i=1-r;return d2(n,t)<0&&(r=-r),e[0]=n[0]*i+t[0]*r,e[1]=n[1]*i+t[1]*r,e[2]=n[2]*i+t[2]*r,e[3]=n[3]*i+t[3]*r,e[4]=n[4]*i+t[4]*r,e[5]=n[5]*i+t[5]*r,e[6]=n[6]*i+t[6]*r,e[7]=n[7]*i+t[7]*r,e},mul:rL,multiply:h2,normalize:function(e,n){var t=Qh(n);if(t>0){t=Math.sqrt(t);var r=n[0]/t,i=n[1]/t,o=n[2]/t,a=n[3]/t,s=n[4],u=n[5],c=n[6],l=n[7],h=r*s+i*u+o*c+a*l;e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=(s-r*h)/t,e[5]=(u-i*h)/t,e[6]=(c-o*h)/t,e[7]=(l-a*h)/t}return e},rotateAroundAxis:function(e,n,t,r){if(Math.abs(r)<Ct)return l2(e,n);var i=Math.hypot(t[0],t[1],t[2]);r*=.5;var o=Math.sin(r),a=o*t[0]/i,s=o*t[1]/i,u=o*t[2]/i,c=Math.cos(r),l=n[0],h=n[1],d=n[2],f=n[3];e[0]=l*c+f*a+h*u-d*s,e[1]=h*c+f*s+d*a-l*u,e[2]=d*c+f*u+l*s-h*a,e[3]=f*c-l*a-h*s-d*u;var p=n[4],g=n[5],v=n[6],m=n[7];return e[4]=p*c+m*a+g*u-v*s,e[5]=g*c+m*s+v*a-p*u,e[6]=v*c+m*u+p*s-g*a,e[7]=m*c-p*a-g*s-v*u,e},rotateByQuatAppend:function(e,n,t){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return e[0]=s*a+l*r+u*o-c*i,e[1]=u*a+l*i+c*r-s*o,e[2]=c*a+l*o+s*i-u*r,e[3]=l*a-s*r-u*i-c*o,s=n[4],u=n[5],c=n[6],l=n[7],e[4]=s*a+l*r+u*o-c*i,e[5]=u*a+l*i+c*r-s*o,e[6]=c*a+l*o+s*i-u*r,e[7]=l*a-s*r-u*i-c*o,e},rotateByQuatPrepend:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],u=t[1],c=t[2],l=t[3];return e[0]=r*l+a*s+i*c-o*u,e[1]=i*l+a*u+o*s-r*c,e[2]=o*l+a*c+r*u-i*s,e[3]=a*l-r*s-i*u-o*c,s=t[4],u=t[5],c=t[6],l=t[7],e[4]=r*l+a*s+i*c-o*u,e[5]=i*l+a*u+o*s-r*c,e[6]=o*l+a*c+r*u-i*s,e[7]=a*l-r*s-i*u-o*c,e},rotateX:function(e,n,t){var r=-n[0],i=-n[1],o=-n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=s*a+l*r+u*o-c*i,d=u*a+l*i+c*r-s*o,f=c*a+l*o+s*i-u*r,p=l*a-s*r-u*i-c*o;return e2(e,n,t),r=e[0],i=e[1],o=e[2],a=e[3],e[4]=h*a+p*r+d*o-f*i,e[5]=d*a+p*i+f*r-h*o,e[6]=f*a+p*o+h*i-d*r,e[7]=p*a-h*r-d*i-f*o,e},rotateY:function(e,n,t){var r=-n[0],i=-n[1],o=-n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=s*a+l*r+u*o-c*i,d=u*a+l*i+c*r-s*o,f=c*a+l*o+s*i-u*r,p=l*a-s*r-u*i-c*o;return t2(e,n,t),r=e[0],i=e[1],o=e[2],a=e[3],e[4]=h*a+p*r+d*o-f*i,e[5]=d*a+p*i+f*r-h*o,e[6]=f*a+p*o+h*i-d*r,e[7]=p*a-h*r-d*i-f*o,e},rotateZ:function(e,n,t){var r=-n[0],i=-n[1],o=-n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=s*a+l*r+u*o-c*i,d=u*a+l*i+c*r-s*o,f=c*a+l*o+s*i-u*r,p=l*a-s*r-u*i-c*o;return n2(e,n,t),r=e[0],i=e[1],o=e[2],a=e[3],e[4]=h*a+p*r+d*o-f*i,e[5]=d*a+p*i+f*r-h*o,e[6]=f*a+p*o+h*i-d*r,e[7]=p*a-h*r-d*i-f*o,e},scale:function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e[4]=n[4]*t,e[5]=n[5]*t,e[6]=n[6]*t,e[7]=n[7]*t,e},set:function(e,n,t,r,i,o,a,s,u){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e},setDual:function(e,n){return e[4]=n[0],e[5]=n[1],e[6]=n[2],e[7]=n[3],e},setReal:nL,sqrLen:oL,squaredLength:Qh,str:function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},translate:function(e,n,t){var r=n[0],i=n[1],o=n[2],a=n[3],s=.5*t[0],u=.5*t[1],c=.5*t[2],l=n[4],h=n[5],d=n[6],f=n[7];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=a*s+i*c-o*u+l,e[5]=a*u+o*s-r*c+h,e[6]=a*c+r*u-i*s+d,e[7]=-r*s-i*u-o*c+f,e}},Symbol.toStringTag,{value:"Module"}));function p2(){var e=new Jt(2);return Jt!=Float32Array&&(e[0]=0,e[1]=0),e}function hn(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e}function g2(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e}function v2(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e}function m2(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e}function aa(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e}function sa(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e}function bn(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e}function Jh(e,n){var t=n[0]-e[0],r=n[1]-e[1];return Math.hypot(t,r)}function y2(e,n){var t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r}function b2(e){var n=e[0],t=e[1];return Math.hypot(n,t)}function x2(e){var n=e[0],t=e[1];return n*n+t*t}function Lr(e,n){var t=n[0],r=n[1],i=t*t+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=n[0]*i,e[1]=n[1]*i,e}function ed(e,n){return e[0]*n[0]+e[1]*n[1]}function w2(e,n){var t=e[0],r=e[1],i=n[0],o=n[1],a=Math.sqrt(t*t+r*r)*Math.sqrt(i*i+o*o),s=a&&(t*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function td(e,n){return e[0]===n[0]&&e[1]===n[1]}var sL=b2,nd=g2,uL=v2,cL=m2,lL=Jh,hL=y2,dL=x2,fL=function(){var e=p2();return function(n,t,r,i,o,a){var s,u;for(t||(t=2),r||(r=0),u=i?Math.min(i*t+r,n.length):n.length,s=r;s<u;s+=t)e[0]=n[s],e[1]=n[s+1],o(e,e,a),n[s]=e[0],n[s+1]=e[1];return n}}();const pL=Object.freeze(Object.defineProperty({__proto__:null,add:hn,angle:w2,ceil:function(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e},clone:function(e){var n=new Jt(2);return n[0]=e[0],n[1]=e[1],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e},create:p2,cross:function(e,n,t){var r=n[0]*t[1]-n[1]*t[0];return e[0]=e[1]=0,e[2]=r,e},dist:lL,distance:Jh,div:cL,divide:m2,dot:ed,equals:function(e,n){var t=e[0],r=e[1],i=n[0],o=n[1];return Math.abs(t-i)<=Ct*Math.max(1,Math.abs(t),Math.abs(i))&&Math.abs(r-o)<=Ct*Math.max(1,Math.abs(r),Math.abs(o))},exactEquals:td,floor:function(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e},forEach:fL,fromValues:function(e,n){var t=new Jt(2);return t[0]=e,t[1]=n,t},inverse:function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e},len:sL,length:b2,lerp:function(e,n,t,r){var i=n[0],o=n[1];return e[0]=i+r*(t[0]-i),e[1]=o+r*(t[1]-o),e},max:sa,min:aa,mul:uL,multiply:v2,negate:function(e,n){return e[0]=-n[0],e[1]=-n[1],e},normalize:Lr,random:function(e,n){n=n||1;var t=2*Ei()*Math.PI;return e[0]=Math.cos(t)*n,e[1]=Math.sin(t)*n,e},rotate:function(e,n,t,r){var i=n[0]-t[0],o=n[1]-t[1],a=Math.sin(r),s=Math.cos(r);return e[0]=i*s-o*a+t[0],e[1]=i*a+o*s+t[1],e},round:function(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e},scale:bn,scaleAndAdd:function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e},set:function(e,n,t){return e[0]=n,e[1]=t,e},sqrDist:hL,sqrLen:dL,squaredDistance:y2,squaredLength:x2,str:function(e){return"vec2("+e[0]+", "+e[1]+")"},sub:nd,subtract:g2,transformMat2:function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[2]*i,e[1]=t[1]*r+t[3]*i,e},transformMat2d:function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[2]*i+t[4],e[1]=t[1]*r+t[3]*i+t[5],e},transformMat3:function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[3]*i+t[6],e[1]=t[1]*r+t[4]*i+t[7],e},transformMat4:function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[4]*i+t[12],e[1]=t[1]*r+t[5]*i+t[13],e},zero:function(e){return e[0]=0,e[1]=0,e}},Symbol.toStringTag,{value:"Module"})),gL=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:l5,mat2:f5,mat2d:v5,mat3:l0,mat4:S5,quat:eL,quat2:aL,vec2:pL,vec3:O5,vec4:F5},Symbol.toStringTag,{value:"Module"}));function vL(e,n,t){var r=[0,0,0,0,0,0,0,0,0];return s0(r,t),Zi(e,r,n)}function mL(e,n,t){var r=[0,0,0,0,0,0,0,0,0];return u0(r,t),Zi(e,r,n)}function yL(e,n,t){var r=[0,0,0,0,0,0,0,0,0];return c0(r,t),Zi(e,r,n)}function bL(e,n,t){return Zi(e,t,n)}function br(e,n){for(var t=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=n.length;r<i;r++){var o=n[r];switch(o[0]){case"t":vL(t,t,[o[1],o[2]]);break;case"s":yL(t,t,[o[1],o[2]]);break;case"r":mL(t,t,o[1]);break;case"m":bL(t,t,o[1])}}return t}var Oo=function(e,n){var t=e.nodes,r=e.edges,i=[],o={};if(!t)throw new Error("invalid nodes data!");return t&&t.forEach(function(a,s){o[a.id]=s,i.push([])}),r&&r.forEach(function(a){var s=a.source,u=a.target,c=o[s],l=o[u];!c&&c!==0||!l&&l!==0||(i[c][l]=1,n||(i[l][c]=1))}),i},xL=function(e,n){return e===n},E2=function(){function e(n,t){t===void 0&&(t=null),this.value=n,this.next=t}return e.prototype.toString=function(n){return n?n(this.value):"".concat(this.value)},e}(),S2=function(){function e(n){n===void 0&&(n=xL),this.head=null,this.tail=null,this.compare=n}return e.prototype.prepend=function(n){var t=new E2(n,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(n){var t=new E2(n);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(n){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,n);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,n)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,n)&&(this.tail=r),t},e.prototype.find=function(n){var t=n.value,r=t===void 0?void 0:t,i=n.callback,o=i===void 0?void 0:i;if(!this.head)return null;for(var a=this.head;a;){if(o&&o(a.value)||r!==void 0&&this.compare(a.value,r))return a;a=a.next}return null},e.prototype.deleteTail=function(){var n=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,n;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,n},e.prototype.deleteHead=function(){if(!this.head)return null;var n=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),n},e.prototype.fromArray=function(n){var t=this;return n.forEach(function(r){return t.append(r)}),this},e.prototype.toArray=function(){for(var n=[],t=this.head;t;)n.push(t),t=t.next;return n},e.prototype.reverse=function(){for(var n=this.head,t=null,r=null;n;)r=n.next,n.next=t,t=n,n=r;this.tail=this.head,this.head=t},e.prototype.toString=function(n){return n===void 0&&(n=void 0),this.toArray().map(function(t){return t.toString(n)}).toString()},e}(),wL=function(){function e(){this.linkedList=new S2}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(n){this.linkedList.append(n)},e.prototype.dequeue=function(){var n=this.linkedList.deleteHead();return n?n.value:null},e.prototype.toString=function(n){return this.linkedList.toString(n)},e}(),qr=function(e,n,t){n===void 0&&(n=[]);var r=n.filter(function(i){return i.source===e||i.target===e});return t==="target"?r.filter(function(i){return i.source===e}).map(function(i){return i.target}):t==="source"?r.filter(function(i){return i.target===e}).map(function(i){return i.source}):r.map(function(i){return i.source===e?i.target:i.source})},rd=function(e,n){return n.filter(function(t){return t.source===e||t.target===e})},M2=function(e){e===void 0&&(e=0);var n="".concat(Math.random()).split(".")[1].substr(0,5),t="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(n).concat(t)},_2=function(e,n,t,r){r===void 0&&(r=!0);var i=function(l){l===void 0&&(l={});var h,d=l,f=function(){},p=(h={},function(g){var v=g.next;return!h[v]&&(h[v]=!0,!0)});return d.allowTraversal=l.allowTraversal||p,d.enter=l.enter||f,d.leave=l.leave||f,d}(t),o=new wL,a=e.edges,s=a===void 0?[]:a;o.enqueue(n);for(var u="",c=function(){var l=o.dequeue();i.enter({current:l,previous:u}),qr(l,s,r?"target":void 0).forEach(function(h){i.allowTraversal({previous:u,current:l,next:h})&&o.enqueue(h)}),i.leave({current:l,previous:u}),u=l};!o.isEmpty();)c()},k2=function(e){for(var n=e.nodes,t=n===void 0?[]:n,r=e.edges,i=r===void 0?[]:r,o=[],a={},s={},u={},c=[],l=0,h=function g(v){s[v.id]=l,u[v.id]=l,l+=1,o.push(v),a[v.id]=!0;for(var m=qr(v.id,i,"target").filter(function(E){return t.map(function(S){return S.id}).indexOf(E)>-1}),y=function(E){var S=m[E];if(s[S]||s[S]===0)a[S]&&(u[v.id]=Math.min(u[v.id],s[S]));else{var M=t.filter(function(k){return k.id===S});M.length>0&&g(M[0]),u[v.id]=Math.min(u[v.id],u[S])}},b=0;b<m.length;b++)y(b);if(u[v.id]===s[v.id]){for(var x=[];o.length>0;){var w=o.pop();if(a[w.id]=!1,x.push(w),w===v)break}x.length>0&&c.push(x)}},d=0,f=t;d<f.length;d++){var p=f[d];s[p.id]||s[p.id]===0||h(p)}return c};function S0(e,n){return n?k2(e):function(t){for(var r=t.nodes,i=r===void 0?[]:r,o=t.edges,a=o===void 0?[]:o,s=[],u={},c=[],l=function p(g){c.push(g),u[g.id]=!0;for(var v=qr(g.id,a),m=function(b){var x=v[b];if(!u[x]){var w=i.filter(function(E){return E.id===x});w.length>0&&p(w[0])}},y=0;y<v.length;++y)m(y)},h=0;h<i.length;h++){var d=i[h];if(!u[d.id]){l(d);for(var f=[];c.length>0;)f.push(c.pop());s.push(f)}}return s}(e)}var Ki=function(e){var n={},t=e.nodes,r=t===void 0?[]:t,i=e.edges,o=i===void 0?[]:i;return r.forEach(function(a){n[a.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(a){n[a.source].degree++,n[a.source].outDegree++,n[a.target].degree++,n[a.target].inDegree++}),n},C2=function(e,n){return Ki(e)[n]?Ki(e)[n].inDegree:0},A2=function(e,n){return Ki(e)[n]?Ki(e)[n].outDegree:0};function I2(e,n,t,r,i){i===void 0&&(i=!0),r.enter({current:n,previous:t});var o=e.edges;qr(n,o===void 0?[]:o,i?"target":void 0).forEach(function(a){r.allowTraversal({previous:t,current:n,next:a})&&I2(e,a,n,r,i)}),r.leave({current:n,previous:t})}function M0(e,n,t,r){r===void 0&&(r=!0),I2(e,n,"",function(i){i===void 0&&(i={});var o,a=i,s=function(){},u=(o={},function(c){var l=c.next;return!o[l]&&(o[l]=!0,!0)});return a.allowTraversal=i.allowTraversal||u,a.enter=i.enter||s,a.leave=i.leave||s,a}(t),r)}var _0=function(e){var n=null,t=e.nodes,r={},i={},o={},a={};(t===void 0?[]:t).forEach(function(u){i[u.id]=u});for(var s={enter:function(u){var c=u.current,l=u.previous;if(o[c]){n={};for(var h=c,d=l;d!==c;)n[h]=d,h=d,d=r[d];n[h]=d}else o[c]=c,delete i[c],r[c]=l},leave:function(u){var c=u.current;a[c]=c,delete o[c]},allowTraversal:function(u){var c=u.next;return!n&&!a[c]}};Object.keys(i).length;)M0(e,Object.keys(i)[0],s);return n},k0=function(e,n,t){var r,i;t===void 0&&(t=!0);for(var o=[],a=0,s=S0(e,!1);a<s.length;a++){var u=s[a];if(u.length)for(var c=u[0],l=c.id,h=[c],d=((r={})[l]=c,r),f=((i={})[l]=new Set,i);h.length>0;)for(var p=h.pop(),g=p.id,v=qr(g,e.edges),m=function(b){var x,w=v[b],E=e.nodes.find(function(T){return T.id===w});if(w===g)o.push(((x={})[w]=p,x));else if(w in f){if(!f[g].has(E)){for(var S=!0,M=[E,p],k=d[g];f[w].size&&!f[w].has(k)&&(M.push(k),k!==d[k.id]);)k=d[k.id];if(M.push(k),n&&t?(S=!1,M.findIndex(function(T){return n.indexOf(T.id)>-1})>-1&&(S=!0)):n&&!t&&M.findIndex(function(T){return n.indexOf(T.id)>-1})>-1&&(S=!1),S){for(var _={},C=1;C<M.length;C+=1)_[M[C-1].id]=M[C];M.length&&(_[M[M.length-1].id]=M[0]),o.push(_)}f[w].add(p)}}else d[w]=p,h.push(E),f[w]=new Set([p])},y=0;y<v.length;y+=1)m(y)}return o},C0=function(e,n,t){t===void 0&&(t=!0);for(var r=[],i=new Set,o=[],a=[],s={},u={},c=function k(_,C,T){var A=!1;if(n&&t===!1&&n.indexOf(_.id)>-1)return A;r.push(_),i.add(_);for(var D=T[_.id],R=0;R<D.length;R+=1)if((N=s[D[R]])===C){for(var B={},F=1;F<r.length;F+=1)B[r[F-1].id]=r[F];r.length&&(B[r[r.length-1].id]=r[0]),a.push(B),A=!0}else i.has(N)||k(N,C,T)&&(A=!0);if(A)(function(L){for(var z=[L];z.length>0;){var Z=z.pop();i.has(Z)&&(i.delete(Z),o[Z.id].forEach(function(ne){z.push(ne)}),o[Z.id].clear())}})(_);else for(R=0;R<D.length;R+=1){var N=s[D[R]];o[N.id].has(_)||o[N.id].add(_)}return r.pop(),A},l=e.nodes,h=l===void 0?[]:l,d=0;d<h.length;d+=1){var f=h[d],p=f.id;u[p]=d,s[d]=f}if(n&&t){var g=function(k){var _=n[k];u[h[k].id]=u[_],u[_]=0,s[0]=h.find(function(C){return C.id===_}),s[u[h[k].id]]=h[k]};for(d=0;d<n.length;d++)g(d)}for(var v=function(k){for(var _,C,T=1/0,A=0;A<k.length;A+=1)for(var D=k[A],R=0;R<D.length;R++){var B=u[D[R].id];B<T&&(T=B,C=A)}var F=k[C],N=[];for(A=0;A<F.length;A+=1){var L=F[A];N[L.id]=[];for(var z=0,Z=qr(L.id,e.edges,"target").filter(function(J){return F.map(function(q){return q.id}).indexOf(J)>-1});z<Z.length;z++){var ne=Z[z];ne!==L.id||t===!1&&n.indexOf(L.id)>-1?N[L.id].push(u[ne]):a.push(((_={})[L.id]=L,_))}}return{component:F,adjList:N,minIdx:T}},m=0;m<h.length;){var y=h.filter(function(k){return u[k.id]>=m}),b=k2({nodes:y,edges:e.edges}).filter(function(k){return k.length>1});if(b.length===0)break;var x=v(b),w=x.minIdx,E=x.adjList,S=x.component;if(!(S.length>1))break;S.forEach(function(k){o[k.id]=new Set});var M=s[w];if(n&&t&&n.indexOf(M.id)===-1)return a;c(M,M,E),m=w+1}return a},T2=function(e,n,t,r){return r===void 0&&(r=!0),n?C0(e,t,r):k0(e,t,r)},Ac=function(e,n,t,r){var i=e.nodes,o=i===void 0?[]:i,a=e.edges,s=a===void 0?[]:a,u={},c={},l={};o.forEach(function(m,y){var b=m.id;c[b]=1/0,b===n&&(c[b]=0)});for(var h=o.length,d=function(m){var y=function(w,E,S){for(var M,k=1/0,_=0;_<E.length;_++){var C=E[_].id;!S[C]&&w[C]<=k&&(k=w[C],M=E[_])}return M}(c,o,u),b=y.id;if(u[b]=!0,c[b]===1/0)return"continue";var x=[];x=t?function(w,E){return E.filter(function(S){return S.source===w})}(b,s):rd(b,s),x.forEach(function(w){var E=w.target,S=w.source,M=E===b?S:E,k=r&&w[r]?w[r]:1;c[M]>c[y.id]+k?(c[M]=c[y.id]+k,l[M]=[y.id]):c[M]===c[y.id]+k&&l[M].push(y.id)})},f=0;f<h;f++)d();l[n]=[n];var p={};for(var g in c)c[g]!==1/0&&O2(n,g,l,p);var v={};for(var g in p)v[g]=p[g][0];return{length:c,path:v,allPath:p}};function O2(e,n,t,r){if(e===n)return[e];if(r[n])return r[n];for(var i=[],o=0,a=t[n];o<a.length;o++){var s=O2(e,a[o],t,r);if(!s)return;for(var u=0,c=s;u<c.length;u++){var l=c[u];at(l)?i.push(ir(ir([],l,!0),[n],!1)):i.push([l,n])}}return r[n]=i,r[n]}var _i,N2=function(e,n,t,r,i){var o=Ac(e,n,r,i),a=o.length,s=o.path,u=o.allPath;return{length:a[t],path:s[t],allPath:u[t]}},P2=function(e,n,t,r){var i;if(n===t)return[[n]];var o=e.edges,a=o===void 0?[]:o,s=[n],u=((i={})[n]=!0,i),c=[],l=[],h=r?qr(n,a,"target"):qr(n,a);for(c.push(h);s.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var f=d.shift();if(f&&(s.push(f),u[f]=!0,h=r?qr(f,a,"target"):qr(f,a),c.push(h.filter(function(v){return!u[v]}))),s[s.length-1]===t){var p=s.map(function(v){return v});l.push(p),g=s.pop(),u[g]=!1,c.pop()}}else{var g=s.pop();u[g]=!1,c.pop()}}return l},ou=function(e,n){for(var t=Oo(e,n),r=[],i=t.length,o=0;o<i;o+=1){r[o]=[];for(var a=0;a<i;a+=1)o===a?r[o][a]=0:t[o][a]!==0&&t[o][a]?r[o][a]=t[o][a]:r[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)r[o][a]>r[o][s]+r[s][a]&&(r[o][a]=r[o][s]+r[s][a]);return r},D2=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t="weight"),r===void 0&&(r=1e3);var i=e.nodes,o=i===void 0?[]:i,a=e.edges,s=a===void 0?[]:a,u={},c={};o.forEach(function(m,y){var b=M2();m.clusterId=b,u[b]={id:b,nodes:[m]},c[m.id]={node:m,idx:y}});var l=Oo(e,n),h={};l.forEach(function(m,y){var b=o[y].id;h[b]={},m.forEach(function(x,w){if(x){var E=o[w].id;h[b][E]=x}})});for(var d=0,f=function(){var m=!1;if(o.forEach(function(y){var b={};Object.keys(h[y.id]).forEach(function(C){var T=h[y.id][C],A=c[C].node.clusterId;b[A]||(b[A]=0),b[A]+=T});var x=-1/0,w=[];if(Object.keys(b).forEach(function(C){x<b[C]?(x=b[C],w=[C]):x===b[C]&&w.push(C)}),w.length!==1||w[0]!==y.clusterId){var E=w.indexOf(y.clusterId);if(E>=0&&w.splice(E,1),w&&w.length){m=!0;var S=u[y.clusterId],M=S.nodes.indexOf(y);S.nodes.splice(M,1);var k=Math.floor(Math.random()*w.length),_=u[w[k]];_.nodes.push(y),y.clusterId=_.id}}}),!m)return"break";d++};d<r&&f()!=="break";);Object.keys(u).forEach(function(m){var y=u[m];y.nodes&&y.nodes.length||delete u[m]});var p=[],g={};s.forEach(function(m){var y=m.source,b=m.target,x=m[t]||1,w=c[y].node.clusterId,E=c[b].node.clusterId,S="".concat(w,"---").concat(E);if(g[S])g[S].weight+=x,g[S].count++;else{var M={source:w,target:E,weight:x,count:1};g[S]=M,p.push(M)}});var v=[];return Object.keys(u).forEach(function(m){v.push(u[m])}),{clusters:v,clusterEdges:p}},si=function(){function e(n){this.arr=n}return e.prototype.getArr=function(){return this.arr||[]},e.prototype.add=function(n){var t,r=n.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new e(r);if(!(r!=null&&r.length))return new e(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new e(i)}},e.prototype.subtract=function(n){var t,r=n.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new e(r);if(!(r!=null&&r.length))return new e(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new e(i)}},e.prototype.avg=function(n){var t=[];if(n!==0)for(var r in this.arr)t[r]=this.arr[r]/n;return new e(t)},e.prototype.negate=function(){var n=[];for(var t in this.arr)n[t]=-this.arr[t];return new e(n)},e.prototype.squareEuclideanDistance=function(n){var t,r=n.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var i=0;for(var o in this.arr)i+=Math.pow(this.arr[o]-n.arr[o],2);return i}},e.prototype.euclideanDistance=function(n){var t,r=n.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var i=0;for(var o in this.arr)i+=Math.pow(this.arr[o]-n.arr[o],2);return Math.sqrt(i)}},e.prototype.normalize=function(){var n=[],t=_t(this.arr);t.sort(function(a,s){return a-s});var r=t[t.length-1],i=t[0];for(var o in this.arr)n[o]=(this.arr[o]-i)/(r-i);return new e(n)},e.prototype.norm2=function(){var n;if(!(!((n=this.arr)===null||n===void 0)&&n.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},e.prototype.dot=function(n){var t,r=n.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var i=0;for(var o in this.arr)i+=this.arr[o]*n.arr[o];return i}},e.prototype.equal=function(n){var t,r=n.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var i in this.arr)if(this.arr[i]!==r[i])return!1;return!0},e}(),A0=function(e,n){n===void 0&&(n=void 0);var t=[];return e.forEach(function(r){n===void 0&&t.push(r),r[n]!==void 0&&t.push(r[n])}),t};(_i||(_i={})).EuclideanDistance="euclideanDistance";var I0=function(e,n,t){var r=function(a,s,u){var c=[];s!=null&&s.length?c=s:(a.forEach(function(h){c=c.concat(Object.keys(h))}),c=_c(c));var l={};return c.forEach(function(h){var d=[];a.forEach(function(f){f[h]!==void 0&&f[h]!==""&&d.push(f[h])}),d.length&&!(u!=null&&u.includes(h))&&(l[h]=_c(d))}),l}(e,n,t),i=[];if(!Object.keys(r).length)return i;var o=Object.values(r).every(function(a){return a.every(function(s){return typeof s=="number"})});return e.forEach(function(a,s){var u=[];Object.keys(r).forEach(function(c){var l=a[c],h=r[c],d=h.findIndex(function(g){return l===g}),f=[];if(o)f.push(l);else for(var p=0;p<h.length;p++)p===d?f.push(1):f.push(0);u=u.concat(f)}),i[s]=u}),i},L2=function(e,n,t,r){t===void 0&&(t=_i.EuclideanDistance);var i=0;return t===_i.EuclideanDistance&&(i=new si(e).euclideanDistance(new si(n))),i},B2=function(e,n,t,r){for(var i=n.length,o=2*r,a=0,s=0;s<i;s++)for(var u=e[s].clusterId,c=0;c<i;c++)u===e[c].clusterId&&(a+=(n[s][c]||0)-(t[s]||0)*(t[c]||0)/o);return a*=1/o},T0=function(e,n){e===void 0&&(e=[]);for(var t=e.length,r=new si([]),i=0;i<t;i++)r=r.add(new si(n[i]));var o=r.avg(t);o.normalize();var a=0;for(i=0;i<t;i++)a+=(u=new si(n[i])).squareEuclideanDistance(o);var s=[];for(e.forEach(function(){s.push([])}),i=0;i<t;i++){var u=new si(n[i]);e[i].clusterInertial=0;for(var c=0;c<t;c++)if(i!==c){var l=new si(n[c]);s[i][c]=u.squareEuclideanDistance(l),e[i].clusterInertial+=s[i][c]}else s[i][c]=0}var h=0,d=2*t*a;for(i=0;i<t;i++){var f=e[i].clusterId;for(c=0;c<t;c++){var p=e[c].clusterId;i!==c&&f===p&&(h+=e[i].clusterInertial*e[c].clusterInertial/Math.pow(d,2)-s[i][c]/d)}}return Number(h.toFixed(4))},O0=function(e,n,t,r,i,o,a,s,u){n===void 0&&(n=!1),t===void 0&&(t="weight"),r===void 0&&(r=1e-4),i===void 0&&(i=!1),o===void 0&&(o=void 0),a===void 0&&(a=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1);var c=e.nodes,l=c===void 0?[]:c,h=e.edges,d=h===void 0?[]:h,f=[];if(i){l.forEach(function(N,L){N.properties=N.properties||{},N.originIndex=L});var p=[];l.every(function(N){return N.hasOwnProperty("nodeType")})&&(p=Array.from(new Set(l.map(function(N){return N.nodeType}))),l.forEach(function(N){N.properties.nodeType=p.findIndex(function(L){return L===N.nodeType})}));var g=A0(l,o);f=I0(g,a,s)}var v=1,m={},y={};l.forEach(function(N,L){var z=String(v++);N.clusterId=z,m[z]={id:z,nodes:[N]},y[N.id]={node:N,idx:L}});var b=Oo(e,n),x=[],w={},E=0;b.forEach(function(N,L){var z=0,Z=l[L].id;w[Z]={},N.forEach(function(ne,J){if(ne){z+=ne;var q=l[J].id;w[Z][q]=ne,E+=ne}}),x.push(z)}),E/=2;for(var S=1/0,M=1/0,k=0,_=[],C={};;){S=i&&l.every(function(N){return N.hasOwnProperty("properties")})?B2(l,b,x,E)+T0(l,f)*u:B2(l,b,x,E),k===0&&(M=S,_=l,C=m);var T=S>0&&S>M&&S-M<r;if(S>M&&(_=l.map(function(N){return{node:N,clusterId:N.clusterId}}),C=_t(m),M=S),T||k>100)break;k++,Object.keys(m).forEach(function(N){var L=0;d.forEach(function(z){var Z=z.source,ne=z.target,J=y[Z].node.clusterId,q=y[ne].node.clusterId;(J===N&&q!==N||q===N&&J!==N)&&(L+=z[t]||1)}),m[N].sumTot=L}),l.forEach(function(N,L){var z,Z=m[N.clusterId],ne=0,J=x[L]/(2*E),q=0,ie=Z.nodes;ie.forEach(function(Oe){var Ye=y[Oe.id].idx;q+=b[L][Ye]||0});var Me=q-Z.sumTot*J,me=ie.filter(function(Oe){return Oe.id!==N.id});me.forEach(function(Oe,Ye){f[Oe.originIndex]});var ke=T0(me,f)*u,yt=w[N.id];if(Object.keys(yt).forEach(function(Oe){var Ye=y[Oe].node.clusterId;if(Ye!==N.clusterId){var Pe=m[Ye],Se=Pe.nodes;if(Se&&Se.length){var We=0;Se.forEach(function(Ze){var Je=y[Ze.id].idx;We+=b[L][Je]||0});var Ve=We-Pe.sumTot*J,O=Se.concat([N]);O.forEach(function(Ze,Je){f[Ze.originIndex]});var fe=T0(O,f)*u,_e=Ve-Me;i&&(_e=Ve+fe-(Me+ke)),_e>ne&&(ne=_e,z=Pe)}}}),ne>0){z.nodes.push(N);var Tt=N.clusterId;N.clusterId=z.id;var cn=Z.nodes.indexOf(N);Z.nodes.splice(cn,1);var ct=0,Ge=0;d.forEach(function(Oe){var Ye=Oe.source,Pe=Oe.target,Se=y[Ye].node.clusterId,We=y[Pe].node.clusterId;(Se===z.id&&We!==z.id||We===z.id&&Se!==z.id)&&(ct+=Oe[t]||1),(Se===Tt&&We!==Tt||We===Tt&&Se!==Tt)&&(Ge+=Oe[t]||1)}),z.sumTot=ct,Z.sumTot=Ge}})}var A={},D=0;Object.keys(C).forEach(function(N){var L=C[N];if(L.nodes&&L.nodes.length){var z=String(D+1);z!==N&&(L.id=z,L.nodes=L.nodes.map(function(Z){return{id:Z.id,clusterId:z}}),C[z]=L,A[N]=z,delete C[N],D++)}else delete C[N]}),_.forEach(function(N){var L=N.node,z=N.clusterId;L&&(L.clusterId=z,L.clusterId&&A[L.clusterId]&&(L.clusterId=A[L.clusterId]))});var R=[],B={};d.forEach(function(N){var L=N.source,z=N.target,Z=N[t]||1,ne=y[L].node.clusterId,J=y[z].node.clusterId;if(ne&&J){var q="".concat(ne,"---").concat(J);if(B[q])B[q].weight+=Z,B[q].count++;else{var ie={source:ne,target:J,weight:Z,count:1};B[q]=ie,R.push(ie)}}});var F=[];return Object.keys(C).forEach(function(N){F.push(C[N])}),{clusters:F,clusterEdges:R}},R2=function(e,n,t,r,i,o,a,s){return n===void 0&&(n=!1),t===void 0&&(t="weight"),r===void 0&&(r=1e-4),i===void 0&&(i=void 0),o===void 0&&(o=[]),a===void 0&&(a=["id"]),s===void 0&&(s=1),O0(e,n,t,r,!0,i,o,a,s)},j2=function(e,n){var t;n===void 0&&(n=1);for(var r=_t(e),i=r.nodes,o=i===void 0?[]:i,a=r.edges,s=a===void 0?[]:a,u=function(){var c=Ki({nodes:o,edges:s}),l=Object.keys(c);l.sort(function(f,p){var g,v;return((g=c[f])===null||g===void 0?void 0:g.degree)-((v=c[p])===null||v===void 0?void 0:v.degree)});var h=l[0];if(!o.length||((t=c[h])===null||t===void 0?void 0:t.degree)>=n)return"break";var d=o.findIndex(function(f){return f.id===h});o.splice(d,1),s=s.filter(function(f){return!(f.source===h||f.target===h)})};u()!=="break";);return{nodes:o,edges:s}},z2=function(e,n,t){var r=[];return e===_i.EuclideanDistance?r=n[t]:r=[],r},F2=function(e,n,t,r,i,o){n===void 0&&(n=3),t===void 0&&(t=void 0),r===void 0&&(r=[]),i===void 0&&(i=["id"]),o===void 0&&(o=_i.EuclideanDistance);var a=e.nodes,s=a===void 0?[]:a,u=e.edges,c=u===void 0?[]:u,l={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(o===_i.EuclideanDistance&&!s.every(function(z){return z.hasOwnProperty(t)}))return l;var h=[],d=[];if(o===_i.EuclideanDistance&&(h=A0(s,t),d=I0(h,r,i)),!d.length)return l;for(var f=_c(d.map(function(z){return z.join("")})),p=Math.min(n,s.length,f.length),g=0;g<s.length;g++)s[g].originIndex=g;var v=[],m=[],y=[];for(g=0;g<p;g++)if(g===0){var b=Math.floor(Math.random()*s.length);o===_i.EuclideanDistance?v[g]=d[b]:v[g]=[],m.push(b),y[g]=[s[b]],s[b].clusterId=String(g)}else{for(var x=-1/0,w=0,E=function(z){if(!m.includes(z)){for(var Z=0,ne=0;ne<v.length;ne++){var J=0;o===_i.EuclideanDistance&&(J=L2(d[s[z].originIndex],v[ne],o)),Z+=J}var q=Z/v.length;q>x&&!v.find(function(ie){return oa(ie,z2(o,d,s[z].originIndex))})&&(x=q,w=z)}},S=0;S<s.length;S++)E(S);v[g]=z2(o,d,w),m.push(w),y[g]=[s[w]],s[w].clusterId=String(g)}for(var M=0;;){for(g=0;g<s.length;g++){var k=0,_=1/0;if(M!==0||!m.includes(g)){for(var C=0;C<v.length;C++){var T=0;o===_i.EuclideanDistance&&(T=L2(d[g],v[C],o)),T<_&&(_=T,k=C)}if(s[g].clusterId!==void 0)for(var A=y[Number(s[g].clusterId)].length-1;A>=0;A--)y[Number(s[g].clusterId)][A].id===s[g].id&&y[Number(s[g].clusterId)].splice(A,1);s[g].clusterId=String(k),y[k].push(s[g])}}var D=!1;for(g=0;g<y.length;g++){var R=y[g],B=new si([]);for(C=0;C<R.length;C++)B=B.add(new si(d[R[C].originIndex]));var F=B.avg(R.length);F.equal(new si(v[g]))||(D=!0,v[g]=F.getArr())}if(M++,s.every(function(z){return z.clusterId!==void 0})&&D||M>=1e3)break}var N=[],L={};return c.forEach(function(z){var Z,ne,J=z.source,q=z.target,ie=(Z=s.find(function(yt){return yt.id===J}))===null||Z===void 0?void 0:Z.clusterId,Me=(ne=s.find(function(yt){return yt.id===q}))===null||ne===void 0?void 0:ne.clusterId,me="".concat(ie,"---").concat(Me);if(L[me])L[me].count++;else{var ke={source:ie,target:Me,count:1};L[me]=ke,N.push(ke)}}),{clusters:y,clusterEdges:N}},N0=function(e,n){var t=new si(n),r=t.norm2(),i=new si(e),o=i.norm2(),a=t.dot(i),s=r*o,u=s?a/s:0;return u},G2=function(e,n,t,r,i){e===void 0&&(e=[]),t===void 0&&(t=void 0),r===void 0&&(r=[]),i===void 0&&(i=[]);var o=_t(e.filter(function(h){return h.id!==n.id})),a=e.findIndex(function(h){return h.id===n.id}),s=A0(e,t),u=I0(s,r,i),c=u[a],l=[];return o.forEach(function(h,d){if(h.id!==n.id){var f=u[d],p=N0(f,c);l.push(p),h.cosineSimilarity=p}}),o.sort(function(h,d){return d.cosineSimilarity-h.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},EL=function(){function e(n){this.count=n.length,this.parent={};for(var t=0,r=n;t<r.length;t++){var i=r[t];this.parent[i]=i}}return e.prototype.find=function(n){for(;this.parent[n]!==n;)n=this.parent[n];return n},e.prototype.union=function(n,t){var r=this.find(n),i=this.find(t);r!==i&&(r<i?(this.parent[t]!==t&&this.union(this.parent[t],n),this.parent[t]=this.parent[n]):(this.parent[n]!==n&&this.union(this.parent[n],t),this.parent[n]=this.parent[t]))},e.prototype.connected=function(n,t){return this.find(n)===this.find(t)},e}(),SL=function(e,n){return e-n},ML=function(){function e(n){n===void 0&&(n=SL),this.compareFn=n,this.list=[]}return e.prototype.getLeft=function(n){return 2*n+1},e.prototype.getRight=function(n){return 2*n+2},e.prototype.getParent=function(n){return n===0?null:Math.floor((n-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var n=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),n},e.prototype.insert=function(n){if(n!==null){this.list.push(n);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(n){for(var t=this.getParent(n);n&&n>0&&this.compareFn(this.list[t],this.list[n])>0;){var r=this.list[t];this.list[t]=this.list[n],this.list[n]=r,n=t,t=this.getParent(n)}},e.prototype.moveDown=function(n){var t,r=n,i=this.getLeft(n),o=this.getRight(n),a=this.list.length;i!==null&&i<a&&this.compareFn(this.list[r],this.list[i])>0?r=i:o!==null&&o<a&&this.compareFn(this.list[r],this.list[o])>0&&(r=o),n!==r&&(t=[this.list[r],this.list[n]],this.list[n]=t[0],this.list[r]=t[1],this.moveDown(r))},e}(),_L=function(e,n){var t=[],r=e.nodes,i=r===void 0?[]:r,o=e.edges,a=o===void 0?[]:o;if(i.length===0)return t;var s=i[0],u=new Set;u.add(s);var c=new ML(function(f,p){return n?f.weight-p.weight:0});for(rd(s.id,a).forEach(function(f){c.insert(f)});!c.isEmpty();){var l=c.delMin(),h=l.source,d=l.target;u.has(h)&&u.has(d)||(t.push(l),u.has(h)||(u.add(h),rd(h,a).forEach(function(f){c.insert(f)})),u.has(d)||(u.add(d),rd(d,a).forEach(function(f){c.insert(f)})))}return t},Y2=function(e,n){var t=[],r=e.nodes,i=r===void 0?[]:r,o=e.edges,a=o===void 0?[]:o;if(i.length===0)return t;var s=a.map(function(d){return d});n&&s.sort(function(d,f){return d.weight-f.weight});for(var u=new EL(i.map(function(d){return d.id}));s.length>0;){var c=s.shift(),l=c.source,h=c.target;u.connected(l,h)||(t.push(c),u.union(l,h))}return t},X2=function(e,n,t){return t?{prim:_L,kruskal:Y2}[t](e,n):Y2(e,n)},U2=function(e,n,t){typeof n!="number"&&(n=1e-6),typeof t!="number"&&(t=.85);for(var r,i=1,o=0,a=1e3,s=e.nodes,u=s===void 0?[]:s,c=e.edges,l=c===void 0?[]:c,h=u.length,d={},f={},p=0;p<h;++p)d[v=(w=u[p]).id]=1/h,f[v]=1/h;for(var g=Ki(e);a>0&&i>n;){for(o=0,p=0;p<h;++p){var v=(w=u[p]).id;if(r=0,g[w.id].inDegree===0)d[v]=0;else{for(var m=qr(v,l,"source"),y=0;y<m.length;++y){var b=m[y],x=g[b].outDegree;x>0&&(r+=f[b]/x)}d[v]=t*r,o+=d[v]}}for(o=(1-o)/h,i=0,p=0;p<h;++p){var w;r=d[v=(w=u[p]).id]+o,i+=Math.abs(r-f[v]),f[v]=r}a-=1}return f},$i="-1",W2=function(e,n,t,r){e===void 0&&(e=-1),n===void 0&&(n=-1),t===void 0&&(t=-1),r===void 0&&(r="-1"),this.id=e,this.from=n,this.to=t,this.label=r},kL=function(){function e(n,t){n===void 0&&(n=-1),t===void 0&&(t=$i),this.id=n,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(n){this.edges.push(n),this.edgeMap[n.id]=n},e}(),V2=function(){function e(n,t,r){n===void 0&&(n=-1),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=n,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(n,t){if(!this.nodeMap[n]){var r=new kL(n,t);this.nodes.push(r),this.nodeMap[n]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(n)}},e.prototype.addEdge=function(n,t,r,i){if((this.edgeIdAutoIncrease||n===void 0)&&(n=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[n])){var o=new W2(n,t,r,i);if(this.edges.push(o),this.edgeMap[n]=o,this.nodeMap[t].addEdge(o),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(o),!this.directed){var a=new W2(n,r,t,i);this.nodeMap[r].addEdge(a),this.edgeLabelMap[i].push(a)}}},e}(),Ka=function(){function e(n,t,r,i,o){this.fromNode=n,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||$i,edgeLabel:i||"-1",nodeLabel2:o||$i}}return e.prototype.equalTo=function(n){return this.fromNode===n.formNode&&this.toNode===n.toNode&&this.nodeEdgeNodeLabel===n.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(n){return!this.equalTo(n)},e}(),H2=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(n){var t=this.dfsEdgeList.length;if(t!==n.length)return!1;for(var r=0;r<t;r++)if(this.dfsEdgeList[r]!==n[r])return!1;return!0},e.prototype.notEqualTo=function(n){return!this.equalTo(n)},e.prototype.pushBack=function(n,t,r,i,o){return this.dfsEdgeList.push(new Ka(n,t,r,i,o)),this.dfsEdgeList},e.prototype.toGraph=function(n,t){n===void 0&&(n=-1),t===void 0&&(t=!1);var r=new V2(n,!0,t);return this.dfsEdgeList.forEach(function(i){var o=i.fromNode,a=i.toNode,s=i.nodeEdgeNodeLabel,u=s.nodeLabel1,c=s.edgeLabel,l=s.nodeLabel2;u!==$i&&r.addNode(o,u),l!==$i&&r.addNode(a,l),u!==$i&&l!==u&&r.addEdge(void 0,o,a,c)}),r},e.prototype.buildRmpath=function(){this.rmpath=[];for(var n=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var r=this.dfsEdgeList[t],i=r.fromNode,o=r.toNode;i<o&&(n===void 0||o===n)&&(this.rmpath.push(t),n=i)}return this.rmpath},e.prototype.getNodeNum=function(){var n={};return this.dfsEdgeList.forEach(function(t){n[t.fromNode]||(n[t.fromNode]=!0),n[t.toNode]||(n[t.toNode]=!0)}),Object.keys(n).length},e}(),id=function(){function e(n){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],n){for(;n;){var t=n.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,n=n.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(n){return this.nodesUsed[n.id]===1},e.prototype.hasEdge=function(n){return this.edgesUsed[n.id]===1},e}(),CL=function(){function e(n){var t=n.graphs,r=n.minSupport,i=r===void 0?2:r,o=n.minNodeNum,a=o===void 0?1:o,s=n.maxNodeNum,u=s===void 0?4:s,c=n.top,l=c===void 0?10:c,h=n.directed,d=h!==void 0&&h,f=n.verbose,p=f!==void 0&&f;this.graphs=t,this.dfsCode=new H2,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=l,this.directed=d,this.counter=0,this.maxNodeNum=u,this.minNodeNum=a,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(n,t){var r=this,i=[],o=n.nodeMap;return t.edges.forEach(function(a){(r.directed||t.label<=o[a.to].label)&&i.push(a)}),i},e.prototype.findBackwardEdge=function(n,t,r,i){if(!this.directed&&t===r)return null;for(var o=n.nodeMap,a=o[r.to].edges,s=a.length,u=0;u<s;u++){var c=a[u];if(!i.hasEdge(c)&&c.to===t.from){if(this.directed){if(o[t.from].label<o[r.to].label||o[t.from].label===o[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&o[t.to].label<=o[r.to].label)return c}}return null},e.prototype.findForwardPureEdges=function(n,t,r,i){for(var o=[],a=t.to,s=n.nodeMap[a].edges,u=s.length,c=0;c<u;c++){var l=s[c],h=n.nodeMap[l.to];r<=h.label&&!i.hasNode(h)&&o.push(l)}return o},e.prototype.findForwardRmpathEdges=function(n,t,r,i){for(var o=[],a=n.nodeMap,s=a[t.to].label,u=a[t.from].edges,c=u.length,l=0;l<c;l++){var h=u[l],d=a[h.to].label;t.to===h.to||r>d||i.hasNode(a[h.to])||(t.label<h.label||t.label===h.label&&s<=d)&&o.push(h)}return o},e.prototype.getSupport=function(n){var t={};return n.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},e.prototype.findMinLabel=function(n){var t=void 0;return Object.keys(n).forEach(function(r){var i=n[r],o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;t?(o<t.nodeLabel1||o===t.nodeLabel1&&a<t.edgeLabel||o===t.nodeLabel1&&a===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:o,edgeLabel:a,nodeLabel2:s}):t={nodeLabel1:o,edgeLabel:a,nodeLabel2:s}}),t},e.prototype.isMin=function(){var n=this,t=this.dfsCode;if(this.verbose,t.dfsEdgeList.length===1)return!0;var r=this.directed,i=t.toGraph(-1,r),o=i.nodeMap,a=new H2,s={};i.nodes.forEach(function(l){n.findForwardRootEdges(i,l).forEach(function(h){var d=o[h.to],f="".concat(l.label,"-").concat(h.label,"-").concat(d.label);s[f]||(s[f]={projected:[],nodeLabel1:l.label,edgeLabel:h.label,nodeLabel2:d.label});var p={graphId:i.id,edge:h,preNode:null};s[f].projected.push(p)})});var u=this.findMinLabel(s);if(u){a.dfsEdgeList.push(new Ka(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return function l(h){for(var d=a.buildRmpath(),f=a.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=a.dfsEdgeList[d[0]].toNode,g={},v=!1,m=0,y=r?-1:0,b=function(A){if(v)return"break";h.forEach(function(D){var R=new id(D),B=n.findBackwardEdge(i,R.edges[d[A]],R.edges[d[0]],R);B&&(g[B.label]||(g[B.label]={projected:[],edgeLabel:B.label}),g[B.label].projected.push({graphId:i.id,edge:g,preNode:D}),m=a.dfsEdgeList[d[A]].fromNode,v=!0)})},x=d.length-1;x>y&&b(x)!=="break";x--);if(v){var w=n.findMinLabel(g);a.dfsEdgeList.push(new Ka(p,m,$i,w.edgeLabel,$i));var E=a.dfsEdgeList.length-1;return n.dfsCode.dfsEdgeList[E]===a.dfsEdgeList[E]&&l(g[w.edgeLabel].projected)}var S={};v=!1;var M=0;h.forEach(function(A){var D=new id(A),R=n.findForwardPureEdges(i,D.edges[d[0]],f,D);R.length>0&&(v=!0,M=p,R.forEach(function(B){var F="".concat(B.label,"-").concat(o[B.to].label);S[F]||(S[F]={projected:[],edgeLabel:B.label,nodeLabel2:o[B.to].label}),S[F].projected.push({graphId:i.id,edge:B,preNode:A})}))});var k=d.length,_=function(A){if(v)return"break";var D=d[A];h.forEach(function(R){var B=new id(R),F=n.findForwardRmpathEdges(i,B.edges[D],f,B);F.length>0&&(v=!0,M=a.dfsEdgeList[D].fromNode,F.forEach(function(N){var L="".concat(N.label,"-").concat(o[N.to].label);S[L]||(S[L]={projected:[],edgeLabel:N.label,nodeLabel2:o[N.to].label}),S[L].projected.push({graphId:i.id,edge:N,preNode:R})}))})};for(x=0;x<k&&_(x)!=="break";x++);if(!v)return!0;var C=n.findMinLabel(S);a.dfsEdgeList.push(new Ka(M,p+1,$i,C.edgeLabel,C.nodeLabel2));var T=a.dfsEdgeList.length-1;return t.dfsEdgeList[T]===a.dfsEdgeList[T]&&l(S["".concat(C.edgeLabel,"-").concat(C.nodeLabel2)].projected)}(s[c].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var n=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(_t(n))}},e.prototype.subGraphMining=function(n){var t=this;if(!(this.getSupport(n)<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[i[0]].toNode,a=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,s={},u={};n.forEach(function(c){for(var l=t.graphs[c.graphId],h=l.nodeMap,d=new id(c),f=i.length-1;f>=0;f--){var p=t.findBackwardEdge(l,d.edges[i[f]],d.edges[i[0]],d);if(p){var g="".concat(t.dfsCode.dfsEdgeList[i[f]].fromNode,"-").concat(p.label);u[g]||(u[g]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[i[f]].fromNode,edgeLabel:p.label}),u[g].projected.push({graphId:c.graphId,edge:p,preNode:c})}}if(!(r>=t.maxNodeNum)){t.findForwardPureEdges(l,d.edges[i[0]],a,d).forEach(function(m){var y="".concat(o,"-").concat(m.label,"-").concat(h[m.to].label);s[y]||(s[y]={projected:[],fromNodeId:o,edgeLabel:m.label,nodeLabel2:h[m.to].label}),s[y].projected.push({graphId:c.graphId,edge:m,preNode:c})});var v=function(m){t.findForwardRmpathEdges(l,d.edges[i[m]],a,d).forEach(function(y){var b="".concat(t.dfsCode.dfsEdgeList[i[m]].fromNode,"-").concat(y.label,"-").concat(h[y.to].label);s[b]||(s[b]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[i[m]].fromNode,edgeLabel:y.label,nodeLabel2:h[y.to].label}),s[b].projected.push({graphId:c.graphId,edge:y,preNode:c})})};for(f=0;f<i.length;f++)v(f)}}),Object.keys(u).forEach(function(c){var l=u[c],h=l.toNodeId,d=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new Ka(o,h,"-1",d,"-1")),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(s).forEach(function(c){var l=s[c],h=l.fromNodeId,d=l.edgeLabel,f=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Ka(h,o+1,$i,d,f)),t.subGraphMining(s[c].projected),t.dfsCode.dfsEdgeList.pop()})}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var n=this.graphs,t=this.directed,r=this.minSupport,i=this.frequentSize1Subgraphs,o={},a={},s={};return Object.keys(n).forEach(function(u){var c=n[u],l=c.nodeMap;c.nodes.forEach(function(h,d){var f=h.label,p="".concat(u,"-").concat(f);if(!s[p]){var g=o[f]||0;g++,o[f]=g}s[p]={graphKey:u,label:f},h.edges.forEach(function(v){var m=f,y=l[v.to].label;if(!t&&m>y){var b=y;y=m,m=b}var x=v.label,w="".concat(m,"-").concat(x,"-").concat(y);if(!a[w]){var E=a[w]||0;E++,a[w]=E}})})}),Object.keys(o).forEach(function(u){if(!(o[u]<r)){var c={nodes:[],edges:[]};c.nodes.push({id:"0",label:u}),i.push(c)}}),i},e.prototype.run=function(){var n=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var r={};Object.keys(t).forEach(function(i){var o=t[i],a=o.nodeMap;o.nodes.forEach(function(s){n.findForwardRootEdges(o,s).forEach(function(u){var c=a[u.to],l="".concat(s.label,"-").concat(u.label,"-").concat(c.label);r[l]||(r[l]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:c.label});var h={graphId:i,edge:u,preNode:null};r[l].projected.push(h)})})}),Object.keys(r).forEach(function(i){var o=r[i],a=o.projected,s=o.nodeLabel1,u=o.edgeLabel,c=o.nodeLabel2;n.dfsCode.dfsEdgeList.push(new Ka(0,1,s,u,c)),n.subGraphMining(a),n.dfsCode.dfsEdgeList.pop()})}},e}(),q2="cluster",AL=function(e){var n=e.graphs,t=e.directed,r=t!==void 0&&t,i=e.nodeLabelProp,o=i===void 0?q2:i,a=e.edgeLabelProp,s=a===void 0?q2:a,u=function(v,m,y,b){var x={};return Object.keys(v).forEach(function(w,E){var S=v[w],M=new V2(E,!0,m),k={};S.nodes.forEach(function(_,C){M.addNode(C,_[y]),k[_.id]=C}),S.edges.forEach(function(_,C){var T=k[_.source],A=k[_.target];M.addEdge(-1,T,A,_[b])}),M&&M.getNodeNum()&&(x[M.id]=M)}),x}(n,r,o,s),c=e.minSupport,l=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,f=e.top,p=new CL({graphs:u,minSupport:c,maxNodeNum:l,minNodeNum:h,top:f,verbose:d,directed:r});p.run();var g=function(v,m,y){var b=[];return v.forEach(function(x){var w={nodes:[],edges:[]};x.nodes.forEach(function(E){var S;w.nodes.push(((S={id:"".concat(E.id)})[m]=E.label,S))}),x.edges.forEach(function(E){var S;w.edges.push(((S={source:"".concat(E.from),target:"".concat(E.to)})[y]=E.label,S))}),b.push(w)}),b}(p.frequentSubgraphs,o,s);return g},Z2=function(e,n,t,r){t===void 0&&(t="cluster"),r===void 0&&(r=2);var i=[],o=e.nodes;return n.forEach(function(a,s){i.push(K2(o,a,s,t,r))}),i},K2=function(e,n,t,r,i){var o=[t],a=[],s={};return n.forEach(function(u,c){if(u<=i&&t!==c){o.push(c),a.push(e[c]);var l=e[c][r];s[l]?(s[l].count++,s[l].dists.push(u)):s[l]={count:1,dists:[u]}}}),Object.keys(s).forEach(function(u){s[u].dists=s[u].dists.sort(function(c,l){return c-l})}),{nodeIdx:t,nodeId:e[t].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},od=function(e,n,t,r){var i=t.nodes;return r||(r={}),Object.keys(e).forEach(function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var u=e[o],c=(a=n[u.start])===null||a===void 0?void 0:a.nodeIdxs,l=(s=n[u.end])===null||s===void 0?void 0:s.nodeIdxs;if(c&&l){var h=new Set(l),d=c.filter(function(m){return h.has(m)});if(d&&d.length){for(var f={},p=d.length,g=0;g<p;g++){var v=i[d[g]];r[o].nodes.push(v),f[v.id]=!0}t.edges.forEach(function(m){f[m.source]&&f[m.target]&&r[o].edges.push(m)})}}}}),r},ad=function(e,n,t,r){var i,o,a={};e.nodes.forEach(function(u){a[u.id]=u});var s=0;return!(!((i=n==null?void 0:n.edges)===null||i===void 0)&&i.length)||((o=n==null?void 0:n.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var c=a[u.source][t],l=a[u.target][t],h=n==null?void 0:n.nodes[0][t],d=n==null?void 0:n.nodes[1][t],f=n==null?void 0:n.edges[0][r];u[r]===f&&(c===h&&l===d||c===d&&l===h)&&s++}),s)},$2=function(e,n){var t={},r={};return e.forEach(function(i,o){t[i.id]={idx:o,node:i,degree:0,inDegree:0,outDegree:0};var a=i[n];r[a]||(r[a]=[]),r[a].push(i)}),{nodeMap:t,nodeLabelMap:r}},Q2=function(e,n,t){var r={},i={};return e.forEach(function(o,a){r["".concat(M2)]={idx:a,edge:o};var s=o[n];i[s]||(i[s]=[]),i[s].push(o);var u=t[o.source];u&&(u.degree++,u.outDegree++);var c=t[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:r,edgeLabelMap:i}},J2=function(e,n,t){var r=n.length,i={};return n.forEach(function(o,a){for(var s=t?0:a+1,u=e[a].id,c=s;c<r;c++)if(a!==c){var l=e[c].id,h=o[c];i["".concat(u,"-").concat(l)]=h,t||(i["".concat(l,"-").concat(u)]=h)}}),i},IL=function(e,n,t,r,i,o,a,s,u,c,l){var h,d="".concat(n.id,"-").concat(t.id);if(c&&c[d])return c[d];var f=l?l[d]:void 0;if(!f){var p=((h={})[d]={start:r[n.id].idx,end:r[t.id].idx,distance:i},h);f=(l=od(p,o,e,l))[d]}return ad(f,a,s,u)},eE=function(e,n,t,r){var i,o,a,s=(i=e[n])===null||i===void 0?void 0:i.degree,u=(o=e[n])===null||o===void 0?void 0:o.inDegree,c=(a=e[n])===null||a===void 0?void 0:a.outDegree;return e[n]===void 0&&(s=1/0,u=1/0,c=1/0,r[n].forEach(function(l){var h=t[l.id].degree;s>h&&(s=h);var d=t[l.id].inDegree;u>d&&(u=d);var f=t[l.id].outDegree;c>f&&(c=f)}),e[n]={degree:s,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},tE=function(e,n,t,r,i,o,a){var s;if(t===void 0&&(t=!1),o===void 0&&(o="cluster"),a===void 0&&(a="cluster"),e&&e.nodes){var u=e.nodes.length;if(u){var c=ou(e,t),l=ou(n,t),h=J2(e.nodes,c,t),d=J2(n.nodes,l,t),f=$2(e.nodes,o),p=f.nodeMap,g=f.nodeLabelMap,v=$2(n.nodes,o),m=v.nodeMap,y=v.nodeLabelMap;Q2(e.edges,a,p);var b=Q2(n.edges,a,m).edgeLabelMap,x=[];l==null||l.forEach(function(ct){x=x.concat(ct)}),i||(i=Math.max.apply(Math,ir(ir([],x,!1),[2],!1))),r||(r=i);var w=Z2(e,c,o,r),E=Z2(n,l,o,r),S=function(ct,Ge,Oe,Ye,Pe){var Se=Math.ceil(Oe/Ge),We={},Ve=0;return Ye.forEach(function(O,fe){for(var _e=0,Ze=0,Je=O.nodeIdxs,qe=O.neighborNum-1;_e<Se;){for(var bt=Je[1+Math.floor(Math.random()*qe)],vt=0;(We["".concat(fe,"-").concat(bt)]||We["".concat(bt,"-").concat(fe)])&&(bt=Math.floor(Math.random()*Ge),!(++vt>2*Ge)););if(vt<2*Ge&&(We["".concat(fe,"-").concat(bt)]={start:fe,end:bt,distance:Pe[fe][bt]},_e++,++Ve>=Oe))return We;if(++Ze>2*Ge)break}_e<Se&&(Se=(Se+(Se-_e))/(Ge-fe-1))}),We}(0,u,Math.min(100,u*(u-1)/2),w,c),M=od(S,w,e),k=AL({graphs:M,nodeLabelProp:o,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:t}).slice(0,10),_=k.length,C=[];k.forEach(function(ct,Ge){C[Ge]={},Object.keys(M).forEach(function(Oe){var Ye=M[Oe],Pe=ad(Ye,ct,o,a);C[Ge][Oe]=Pe})});var T=function(ct,Ge,Oe){for(var Ye=1/0,Pe=0,Se=function(Ve){var O=ct[Ve],fe=Object.keys(O).sort(function(vt,Mt){return O[vt]-O[Mt]}),_e=[];fe.forEach(function(vt,Mt){_e[Mt%10]||(_e[Mt%10]={graphs:[],totalCount:0,aveCount:0}),_e[Mt%10].graphs.push(vt),_e[Mt%10].totalCount+=O[vt]});var Ze=0,Je=[];_e.forEach(function(vt){var Mt=vt.totalCount/vt.graphs.length;vt.aveCount=Mt,Je.push(Mt);var Ot=0,Bt=vt.length;vt.graphs.forEach(function(fn,kn){var gr=O[fn];vt.graphs.forEach(function(Vr,kr){kn!==kr&&(Ot+=Math.abs(gr-O[Vr]))})}),Ze+=Ot/=Bt*(Bt-1)/2}),Ze/=_e.length;var qe=0;Je.forEach(function(vt,Mt){Je.forEach(function(Ot,Bt){Mt!==Bt&&(qe+=Math.abs(vt-Ot))}),qe/=Je.length*(Je.length-1)/2});var bt=qe-Ze;Ye<bt&&(Ye=bt,Pe=Ve)},We=0;We<Ge;We++)Se(We);return{structure:Oe[Pe],structureCountMap:ct[Pe]}}(C,_,k),A=T.structure,D=T.structureCountMap,R=n.nodes[0],B=[],F=(s=n.nodes[0])===null||s===void 0?void 0:s[o],N=-1/0;n.nodes.forEach(function(ct){var Ge=ct[o],Oe=g[Ge];(Oe==null?void 0:Oe.length)>N&&(N=Oe.length,B=Oe,F=Ge,R=ct)});var L={},z={},Z={},ne={},J={},q={};Object.keys(y).forEach(function(ct,Ge){J[ct]=[],t&&(q[ct]=[]);var Oe=y[ct],Ye={};Oe.forEach(function(Ve){var O=d["".concat(R.id,"-").concat(Ve.id)];if(O&&J[ct].push(O),Ye["".concat(R.id,"-").concat(Ve.id)]={start:0,end:m[Ve.id].idx,distance:O},t){var fe=d["".concat(Ve.id,"-").concat(R.id)];fe&&q[ct].push(fe)}}),J[ct]=J[ct].sort(function(Ve,O){return Ve-O}),t&&(q[ct]=q[ct].sort(function(Ve,O){return Ve-O})),z=od(Ye,E,n,z);var Pe=[];if(Object.keys(Ye).forEach(function(Ve){if(Z[Ve])Pe.push(Z[Ve]);else{var O=z[Ve];Z[Ve]=ad(O,A,o,a),Pe.push(Z[Ve])}}),Pe=Pe.sort(function(Ve,O){return O-Ve}),ne["".concat(R.id,"-").concat(ct)]=Pe,ct!==F)for(var Se=function(Ve){var O=B[Ve],fe=w[p[O.id].idx],_e=fe.nodeLabelCountMap[ct],Ze=y[ct].length;if(!_e||_e.count<Ze)return B.splice(Ve,1),"continue";for(var Je=!1,qe=0;qe<Ze;qe++)if(_e.dists[qe]>J[ct][qe]){Je=!0;break}if(Je)return B.splice(Ve,1),"continue";var bt={};fe.neighbors.forEach(function(Ot){var Bt=h["".concat(O.id,"-").concat(Ot.id)];bt["".concat(O.id,"-").concat(Ot.id)]={start:p[O.id].idx,end:p[Ot.id].idx,distance:Bt}}),M=od(bt,w,e,M);var vt=[];Object.keys(bt).forEach(function(Ot){if(D[Ot])vt.push(D[Ot]);else{var Bt=M[Ot];D[Ot]=ad(Bt,A,o,a),vt.push(D[Ot])}}),vt=vt.sort(function(Ot,Bt){return Bt-Ot});var Mt=!1;for(qe=0;qe<Ze;qe++)if(vt[qe]<Pe[qe]){Mt=!0;break}return Mt?(B.splice(Ve,1),"continue"):void 0},We=((B==null?void 0:B.length)||0)-1;We>=0;We--)Se(We)});var ie=[];B==null||B.forEach(function(ct){for(var Ge=p[ct.id].idx,Oe=K2(e.nodes,c[Ge],Ge,o,i).neighbors,Ye=!1,Pe=Oe.length-1;Pe>=0;Pe--){if(Oe.length+1<n.nodes.length)return void(Ye=!0);var Se=Oe[Pe],We=Se[o];if(y[We]&&y[We].length)if(J[We]&&J[We].length){var Ve="".concat(ct.id,"-").concat(Se.id),O=h[Ve],fe=J[We].length-1;if(O>J[We][fe])Oe.splice(Pe,1);else{if(t){var _e="".concat(Se.id,"-").concat(ct.id),Ze=h[_e];if(fe=q[We].length-1,Ze>q[We][fe]){Oe.splice(Pe,1);continue}}var Je=D[Ve]?D[Ve]:IL(e,ct,Se,p,O,w,A,o,a,D,M),qe="".concat(R.id,"-").concat(We);if(Je<ne[qe][ne[qe].length-1])Oe.splice(Pe,1);else{var bt=eE(L,We,m,y),vt=bt.minPatternNodeLabelDegree;bt.minPatternNodeLabelInDegree,bt.minPatternNodeLabelOutDegree,p[Se.id].degree<vt&&Oe.splice(Pe,1)}}}else Oe.splice(Pe,1);else Oe.splice(Pe,1)}Ye||ie.push({nodes:[ct].concat(Oe)})});var Me=Ac(n,R.id,!1).length,me={};t?(Object.keys(Me).forEach(function(ct){var Ge=m[ct].node[o];me[Ge]?me[Ge].push(Me[ct]):me[Ge]=[Me[ct]]}),Object.keys(me).forEach(function(ct){me[ct].sort(function(Ge,Oe){return Ge-Oe})})):me=J;for(var ke=function(ct){var Ge=ie[ct],Oe=Ge.nodes[0],Ye={},Pe={};Ge.nodes.forEach(function(sn,Pt){Pe[sn.id]={idx:Pt,node:sn,degree:0,inDegree:0,outDegree:0};var zt=sn[o];Ye[zt]?Ye[zt]++:Ye[zt]=1});var Se=[],We={};e.edges.forEach(function(sn){Pe[sn.source]&&Pe[sn.target]&&(Se.push(sn),We[sn[a]]?We[sn[a]]++:We[sn[a]]=1,Pe[sn.source].degree++,Pe[sn.target].degree++,Pe[sn.source].outDegree++,Pe[sn.target].inDegree++)});for(var Ve=Object.keys(b).length,O=!1,fe=0;fe<Ve;fe++){var _e=Object.keys(b)[fe];if(!We[_e]||We[_e]<b[_e].length){O=!0;break}}if(O)return ie.splice(ct,1),"continue";var Ze=Se.length;if(Ze<n.edges.length)return ie.splice(ct,1),"break";var Je=!1,qe=function(sn){var Pt=Se[sn],zt=Pt[a],pn=b[zt];if(!pn||!pn.length)return We[zt]--,pn&&We[zt]<pn.length?(Je=!0,"break"):(Se.splice(sn,1),Pe[Pt.source].degree--,Pe[Pt.target].degree--,Pe[Pt.source].outDegree--,Pe[Pt.target].inDegree--,"continue");var yr=Pe[Pt.source].node[o],Ns=Pe[Pt.target].node[o],Ga=!1;return pn.forEach(function(Ya){var Ps=m[Ya.source].node,Ds=m[Ya.target].node;Ps[o]===yr&&Ds[o]===Ns&&(Ga=!0),t||Ps[o]!==Ns||Ds[o]!==yr||(Ga=!0)}),Ga?void 0:(We[zt]--,pn&&We[zt]<pn.length?(Je=!0,"break"):(Se.splice(sn,1),Pe[Pt.source].degree--,Pe[Pt.target].degree--,Pe[Pt.source].outDegree--,Pe[Pt.target].inDegree--,"continue"))};for(fe=Ze-1;fe>=0&&qe(fe)!=="break";fe--);if(Je)return ie.splice(ct,1),"continue";Ge.edges=Se;var bt=Ac(Ge,Ge.nodes[0].id,!1).length;if(Object.keys(bt).reverse().forEach(function(sn){if(sn!==Ge.nodes[0].id&&!Je){if(bt[sn]===1/0){var Pt=Pe[sn].node[o];if(Ye[Pt]--,Ye[Pt]<y[Pt].length)return void(Je=!0);var zt=Ge.nodes.indexOf(Pe[sn].node);return Ge.nodes.splice(zt,1),void(Pe[sn]=void 0)}var pn=p[sn].node[o];if(!me[pn]||!me[pn].length||bt[sn]>me[pn][me[pn].length-1]){if(Pt=Pe[sn].node[o],Ye[Pt]--,Ye[Pt]<y[Pt].length)return void(Je=!0);zt=Ge.nodes.indexOf(Pe[sn].node),Ge.nodes.splice(zt,1),Pe[sn]=void 0}}}),Je)return ie.splice(ct,1),"continue";for(var vt=!0,Mt=0;vt&&!Je;){if(vt=!1,t?Pe[Oe.id].degree<m[R.id].degree||Pe[Oe.id].inDegree<m[R.id].inDegree||Pe[Oe.id].outDegree<m[R.id].outDegree:Pe[Oe.id].degree<m[R.id].degree){Je=!0;break}if(Ye[Oe[o]]<y[Oe[o]].length){Je=!0;break}for(var Ot=Ge.nodes.length-1;Ot>=0;Ot--){var Bt=Ge.nodes[Ot],fn=Pe[Bt.id].degree,kn=Pe[Bt.id].inDegree,gr=Pe[Bt.id].outDegree,Vr=Bt[o],kr=eE(L,Vr,m,y),Mo=kr.minPatternNodeLabelDegree,sc=kr.minPatternNodeLabelInDegree,vh=kr.minPatternNodeLabelOutDegree;if(t?fn<Mo||kn<sc||gr<vh:fn<Mo){if(Ye[Bt[o]]--,Ye[Bt[o]]<y[Bt[o]].length){Je=!0;break}Ge.nodes.splice(Ot,1),Pe[Bt.id]=void 0,vt=!0}}if(Je||!vt&&Mt!==0)break;for(var Fa=(Ze=Se.length)-1;Fa>=0;Fa--){var vr=Se[Fa];if(!Pe[vr.source]||!Pe[vr.target]){Se.splice(Fa,1);var mr=vr[a];if(We[mr]--,Pe[vr.source]&&(Pe[vr.source].degree--,Pe[vr.source].outDegree--),Pe[vr.target]&&(Pe[vr.target].degree--,Pe[vr.target].inDegree--),b[mr]&&We[mr]<b[mr].length){Je=!0;break}vt=!0}}Mt++}return Je||Je||Ge.nodes.length<n.nodes.length||Se.length<n.edges.length?(ie.splice(ct,1),"continue"):void 0},yt=ie.length-1;yt>=0&&ke(yt)!=="break";yt--);var Tt=ie.length,cn=function(ct){var Ge=ie[ct],Oe={};Ge.edges.forEach(function(Se){var We="".concat(Se.source,"-").concat(Se.target,"-").concat(Se.label);Oe[We]?Oe[We]++:Oe[We]=1});for(var Ye=function(Se){var We=ie[Se],Ve={};We.edges.forEach(function(fe){var _e="".concat(fe.source,"-").concat(fe.target,"-").concat(fe.label);Ve[_e]?Ve[_e]++:Ve[_e]=1});var O=!0;Object.keys(Ve).length!==Object.keys(Oe).length?O=!1:Object.keys(Oe).forEach(function(fe){Ve[fe]!==Oe[fe]&&(O=!1)}),O&&ie.splice(Se,1)},Pe=Tt-1;Pe>ct;Pe--)Ye(Pe);Tt=ie.length};for(yt=0;yt<=Tt-1;yt++)cn(yt);return ie}}},Qi=function(){function e(n){n===void 0&&(n=10),this.linkedList=new S2,this.maxStep=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},e.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},e.prototype.push=function(n){this.linkedList.prepend(n),this.length>this.maxStep&&this.linkedList.deleteTail()},e.prototype.pop=function(){var n=this.linkedList.deleteHead();return n?n.value:null},e.prototype.toArray=function(){return this.linkedList.toArray().map(function(n){return n.value})},e.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},e}(),nE=_0;const TL={getAdjMatrix:Oo,breadthFirstSearch:_2,connectedComponent:S0,getDegree:Ki,getInDegree:C2,getOutDegree:A2,detectCycle:_0,detectDirectedCycle:nE,detectAllCycles:T2,detectAllDirectedCycle:C0,detectAllUndirectedCycle:k0,depthFirstSearch:M0,dijkstra:Ac,findAllPath:P2,findShortestPath:N2,floydWarshall:ou,labelPropagation:D2,louvain:O0,iLouvain:R2,kCore:j2,kMeans:F2,cosineSimilarity:N0,nodesCosineSimilarity:G2,minimumSpanningTree:X2,pageRank:U2,getNeighbors:qr,Stack:Qi,GADDI:tE},OL=Object.freeze(Object.defineProperty({__proto__:null,GADDI:tE,Stack:Qi,breadthFirstSearch:_2,connectedComponent:S0,cosineSimilarity:N0,default:TL,depthFirstSearch:M0,detectAllCycles:T2,detectAllDirectedCycle:C0,detectAllUndirectedCycle:k0,detectCycle:_0,detectDirectedCycle:nE,dijkstra:Ac,findAllPath:P2,findShortestPath:N2,floydWarshall:ou,getAdjMatrix:Oo,getDegree:Ki,getInDegree:C2,getNeighbors:qr,getOutDegree:A2,iLouvain:R2,kCore:j2,kMeans:F2,labelPropagation:D2,louvain:O0,minimumSpanningTree:X2,nodesCosineSimilarity:G2,pageRank:U2},Symbol.toStringTag,{value:"Module"}));var sd=br,rE=function(e,n,t){return e>=n&&e<=t},ud=function(e,n,t,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,u=r.x-t.x,c=r.y-t.y,l=a*c-s*u,h=1/l;if(l*l>1e-4*(a*a+s*s)*(u*u+c*c)){var d=(i*c-o*u)*h,f=(i*s-o*a)*h;return rE(d,0,1)&&rE(f,0,1)?{x:e.x+d*a,y:e.y+d*s}:null}return null},iE=function(e,n){var t=e.x,r=e.y,i=e.width,o=e.height,a=[],s={x:t+i/2,y:r+o/2};a.push({x:t,y:r}),a.push({x:t+i,y:r}),a.push({x:t+i,y:r+o}),a.push({x:t,y:r+o}),a.push({x:t,y:r});for(var u=null,c=1;c<a.length&&!(u=ud(a[c-1],a[c],s,n));c++);return u},oE=function(e,n){var t=e.x,r=e.y,i=e.r,o=n.x-t,a=n.y-r;if(o*o+a*a<i*i)return null;var s=Math.atan(a/o);return{x:t+Math.abs(i*Math.cos(s))*Math.sign(o),y:r+Math.abs(i*Math.sin(s))*Math.sign(a)}},aE=function(e,n){var t=e.rx,r=e.ry,i=e.x,o=e.y,a=n.x-i,s=n.y-o,u=Math.atan2(s/r,a/t);return u<0&&(u+=2*Math.PI),{x:i+t*Math.cos(u),y:o+r*Math.sin(u)}},au=function(e,n,t){t===void 0&&(t=1);var r=[e.x,e.y,t];return n&&!isNaN(n[0])||(n=[1,0,0,0,1,0,0,0,1]),iu(r,r,n),{x:r[0],y:r[1]}},sE=function(e,n,t){t===void 0&&(t=1),n&&!isNaN(n[0])||(n=[1,0,0,0,1,0,0,0,1]);var r=qh([1,0,0,0,1,0,0,0,1],n);r||(r=[1,0,0,0,1,0,0,0,1]);var i=[e.x,e.y,t];return iu(i,i,r),{x:i[0],y:i[1]}},P0=function(e,n,t){var r=e.x-n.x,i=e.y-n.y,o=e.x-t.x,a=e.y-t.y,s=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,c=i*o-r*a;return{x:-(a*s-i*u)/c,y:-(r*u-o*s)/c}},cd=function(e,n){var t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)},uE=function(e,n){e.translate(n.x,n.y)},D0=function(e,n,t,r){r===void 0&&(r={duration:500});var i=e.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),a=n.x-o.minX,s=n.y-o.minY;if(t){var u=a*i[0],c=s*i[4],l=0,h=0,d=0,f=0;e.animate(function(g){return i=sd(i,[["t",(d=u*g)-l,(f=c*g)-h]]),l=d,h=f,{matrix:i}},r)}else{var p=sd(i,[["t",a,s]]);e.setMatrix(p)}};function NL(e,n,t){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])&&Math.min(e[0],n[0])<=t[0]&&t[0]<=Math.max(e[0],n[0])&&Math.min(e[1],n[1])<=t[1]&&t[1]<=Math.max(e[1],n[1])}var Ic=function(e,n,t){var r=!1,i=e.length;function o(c){return Math.abs(c)<1e-6?0:c<0?-1:1}if(i<=2)return!1;for(var a=0;a<i;a++){var s=e[a],u=e[(a+1)%i];if(NL(s,u,[n,t]))return!0;o(s[1]-t)>0!=o(u[1]-t)>0&&o(n-(t-s[1])*(s[0]-u[0])/(s[1]-u[1])-s[0])<0&&(r=!r)}return r},cE=function(e,n){return!(n.minX>e.maxX||n.maxX<e.minX||n.minY>e.maxY||n.maxY<e.minY)},lE=function(e,n){var t=function(l){var h=l.map(function(f){return f[0]}),d=l.map(function(f){return f[1]});return{minX:Math.min.apply(null,h),maxX:Math.max.apply(null,h),minY:Math.min.apply(null,d),maxY:Math.max.apply(null,d)}},r=function(l){for(var h=[],d=l.length,f=0;f<d-1;f++){var p=l[f],g=l[f+1];h.push({from:{x:p[0],y:p[1]},to:{x:g[0],y:g[1]}})}if(h.length>1){var v=l[0],m=l[d-1];h.push({from:{x:m[0],y:m[1]},to:{x:v[0],y:v[1]}})}return h};if(e.length<2||n.length<2)return!1;var i=t(e),o=t(n);if(!cE(i,o))return!1;var a=!1;if(re(n,function(l){if(Ic(e,l[0],l[1]))return a=!0,!1}),a||(re(e,function(l){if(Ic(n,l[0],l[1]))return a=!0,!1}),a))return!0;var s=r(e),u=r(n),c=!1;return re(u,function(l){if(function(h,d){var f=!1;return re(h,function(p){if(ud(p.from,p.to,d.from,d.to))return f=!0,!1}),f}(s,l))return c=!0,!1}),c},$a=function(){function e(n,t,r,i){this.x1=n,this.y1=t,this.x2=r,this.y2=i}return e.prototype.getBBox=function(){var n=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2);return{x:n,y:t,minX:n,minY:t,maxX:r,maxY:i,width:r-n,height:i-t}},e}(),L0=function(e,n){return{top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]}[n]},PL=function(e,n){var t=(n.x2-n.x1)*(e.y1-n.y1)-(n.y2-n.y1)*(e.x1-n.x1),r=(e.x2-e.x1)*(e.y1-n.y1)-(e.y2-e.y1)*(e.x1-n.x1),i=(n.y2-n.y1)*(e.x2-e.x1)-(n.x2-n.x1)*(e.y2-e.y1);if(i){var o=t/i,a=r/i;if(o>=0&&o<=1&&a>=0&&a<=1)return o}return Number.POSITIVE_INFINITY},hE=function(e,n){for(var t=["top","left","bottom","right"],r=e.getBBox(),i=0,o=[],a=0;a<4;a++){var s=L0(r,t[a]),u=s[0],c=s[1],l=s[2],h=s[3];o[a]=ud({x:n.x1,y:n.y1},{x:n.x2,y:n.y2},{x:u,y:c},{x:l,y:h}),o[a]&&(i+=1)}return[o,i]},B0=function(e,n){for(var t=["top","left","bottom","right"],r=e.getBBox(),i=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=L0(r,t[a]),u=s[0],c=s[1],l=s[2],h=s[3],d=PL(n,new $a(u,c,l,h));(d=Math.abs(d-.5))>=0&&d<=1&&(o+=1,i=d<i?d:i)}return o===0?-1:i},dE=function(e){var n=0,t=0;if(e.length>0){for(var r=0,i=e;r<i.length;r++){var o=i[r];n+=o.x,t+=o.y}n/=e.length,t/=e.length}return{x:n,y:t}},ld=function(e,n){return Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)},fE=function(e,n){var t,r=n.x1,i=n.y1,o=n.x2-r,a=n.y2-i,s=e.x-r,u=e.y-i,c=s*o+u*a;t=c<=0||(c=(s=o-s)*o+(u=a-u)*a)<=0?0:c*c/(o*o+a*a);var l=s*s+u*u-t;return l<0&&(l=0),l},R0=function(e,n,t){return t===void 0&&(t=.001),Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)<Math.pow(t,2)},pE=function(e,n){var t=e.x<n.x,r=e.x>n.x+n.width,i=e.y>n.y+n.height,o=e.y<n.y;if(!(t||r||i||o))return 0;if(i&&!t&&!r)return Math.pow(n.y+n.height-e.y,2);if(o&&!t&&!r)return Math.pow(e.y-n.y,2);if(t&&!i&&!o)return Math.pow(n.x-e.x,2);if(r&&!i&&!o)return Math.pow(n.x+n.width-e.x,2);var a=Math.min(Math.abs(n.x-e.x),Math.abs(n.x+n.width-e.x)),s=Math.min(Math.abs(n.y-e.y),Math.abs(n.y+n.height-e.y));return a*a+s*s},j0=function(e,n,t){return e+(n-e)*t},z0=function(e,n,t){for(var r=Math.min(e.length,n.length),i=new Array(r),o=0;o<r;o++)i[o]=j0(e[o],n[o],t);return i};const DL=Object.freeze(Object.defineProperty({__proto__:null,Line:$a,applyMatrix:au,compare:function(e){return function(n,t){return n[e]-t[e]}},distance:cd,floydWarshall:function(e){for(var n=[],t=e.length,r=0;r<t;r+=1){n[r]=[];for(var i=0;i<t;i+=1)r===i?n[r][i]=0:e[r][i]!==0&&e[r][i]?n[r][i]=e[r][i]:n[r][i]=1/0}for(var o=0;o<t;o+=1)for(r=0;r<t;r+=1)for(i=0;i<t;i+=1)n[r][i]>n[r][o]+n[o][i]&&(n[r][i]=n[r][o]+n[o][i]);return n},fractionToLine:B0,getAdjMatrix:function(e,n){var t=e.nodes,r=e.edges,i=[],o={};if(!t)throw new Error("invalid nodes data!");return t&&t.forEach(function(a,s){o[a.id]=s,i.push([])}),r&&r.forEach(function(a){var s=a.source,u=a.target,c=o[s],l=o[u];i[c][l]=1,n||(i[l][c]=1)}),i},getBBoxBoundLine:L0,getCircleCenterByPoints:P0,getCircleIntersectByPoint:oE,getDegree:function(e,n,t){for(var r=[],i=0;i<e;i++)r[i]=0;return t.forEach(function(o){o.source&&(r[n[o.source]]+=1),o.target&&(r[n[o.target]]+=1)}),r},getEllipseIntersectByPoint:aE,getLineIntersect:ud,getPointsCenter:dE,getRectIntersectByPoint:iE,intersectBBox:cE,invertMatrix:sE,isPointInPolygon:Ic,isPointsOverlap:R0,isPolygonsIntersect:lE,itemIntersectByLine:hE,lerp:j0,lerpArray:z0,move:D0,pointLineDistance:function(e,n){var t=e[0],r=e[1],i=e[2],o=e[3],a=n.x,s=n.y,u=[i-t,o-r];if(td(u,[0,0]))return NaN;var c=[-u[1],u[0]];Lr(c,c);var l=[a-t,s-r];return Math.abs(ed(l,c))},pointLineSquareDist:fE,pointRectSquareDist:pE,rotate:function(e,n){var t=e.getMatrix();t||(t=[1,0,0,0,1,0,0,0,1]),t=sd(t,[["r",n]]),e.setMatrix(t)},scale:function(e,n){var t=e.getMatrix();t||(t=[1,0,0,0,1,0,0,0,1]);var r=n;at(n)||(r=[n,n]),at(n)&&n.length===1&&(r=[n[0],n[0]]),t=sd(t,[["s",r[0],r[1]]]),e.setMatrix(t)},scaleMatrix:function(e,n){var t=[];return e.forEach(function(r){var i=[];r.forEach(function(o){i.push(o*n)}),t.push(i)}),t},squareDist:ld,translate:uE},Symbol.toStringTag,{value:"Module"}));var Br="rgb(95, 149, 255)",gE="rgb(0, 0, 0)",hd="rgb(247, 250, 255)",LL="rgb(239, 244, 255)",dd="rgb(253, 253, 253)",vE="rgb(250, 250, 250)",su="rgb(224, 224, 224)",mE="rgb(234, 234, 234)",yE="#4572d9";const Et={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Br,fill:LL},size:20,color:Br,linkPoints:{size:8,lineWidth:1,fill:hd,stroke:Br}},nodeStateStyles:{active:{fill:hd,stroke:Br,lineWidth:2,shadowColor:Br,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:Br,lineWidth:4,shadowColor:Br,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:yE,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:hd,stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:vE,stroke:su,lineWidth:1}},edgeLabel:{style:{fill:gE,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:su,lineAppendWidth:2},color:su},edgeStateStyles:{active:{stroke:Br,lineWidth:1},selected:{stroke:Br,lineWidth:2,shadowColor:Br,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Br,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:mE,lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:gE,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:dd,lineWidth:1,stroke:su,r:5,width:20,height:10},size:[20,5],color:su,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Br,lineWidth:1,fill:hd},selected:{stroke:Br,lineWidth:2,fill:dd,shadowColor:Br,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:yE,lineWidth:2,fill:dd,"text-shape":{fontWeight:500}},inactive:{stroke:su,fill:dd,lineWidth:1},disable:{stroke:mE,fill:vE,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},BL={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.3729995727539062,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var Ji=Math.PI,F0=Math.sin,G0=Math.cos,or=F0(Ji/8),ar=G0(Ji/8),fd=function(e,n){var t=e.getBBox(),r={x:t.minX,y:t.minY},i={x:t.maxX,y:t.maxY};if(n){var o=n.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),r=au(r,o),i=au(i,o)}var a=r.x,s=r.y,u=i.x,c=i.y;return{x:a,y:s,minX:a,minY:s,maxX:u,maxY:c,width:u-a,height:c-s}},bE=function(e){var n=e.sourceNode||e.targetNode,t=n.get("group").getMatrix();t||(t=[1,0,0,0,1,0,0,0,1]);var r=n.getKeyShape(),i=r.getBBox(),o=e.loopCfg||{},a=o.dist||2*Math.max(i.width,i.height),s=o.position||Et.defaultLoopPosition,u=[(i.minX+i.maxX)/2+t[6],(i.minY+i.maxY)/2+t[7]],c=[e.startPoint.x,e.startPoint.y],l=[e.endPoint.x,e.endPoint.y],h=i.height/2,d=i.width/2,f=h,p=h,g=f*or,v=f*ar,m=p*or,y=p*ar,b=r.get("type"),x=Math.min(h/2,d/2),w=Math.min(h,d),E=o!=null&&o.pointPadding?Math.min(w,o==null?void 0:o.pointPadding):x;if(c[0]===l[0]&&c[1]===l[1]){switch(s){case"top":b==="circle"?(c=[u[0]-g,u[1]-v],l=[u[0]+m,u[1]-y]):(c=[u[0]-E,u[1]-h],l=[u[0]+E,u[1]-h]);break;case"top-right":f=h,p=d,b==="circle"?(c=[u[0]+(g=f*or),u[1]-(v=f*ar)],l=[u[0]+(y=p*ar),u[1]-(m=p*or)]):(c=[u[0]+d-E,u[1]-h],l=[u[0]+d,u[1]-h+E]);break;case"right":f=d,p=d,b==="circle"?(c=[u[0]+(v=f*ar),u[1]-(g=f*or)],l=[u[0]+(y=p*ar),u[1]+(m=p*or)]):(c=[u[0]+d,u[1]-E],l=[u[0]+d,u[1]+E]);break;case"bottom-right":f=d,p=h,b==="circle"?(c=[u[0]+(v=f*ar),u[1]+(g=f*or)],l=[u[0]+(m=p*or),u[1]+(y=p*ar)]):(c=[u[0]+d,u[1]+h-E],l=[u[0]+d-E,u[1]+h]);break;case"bottom":f=h,p=h,b==="circle"?(c=[u[0]+(g=f*or),u[1]+(v=f*ar)],l=[u[0]-(m=p*or),u[1]+(y=p*ar)]):(c=[u[0]-E,u[1]+h],l=[u[0]+E,u[1]+h]);break;case"bottom-left":f=h,p=d,b==="circle"?(c=[u[0]-(g=f*or),u[1]+(v=f*ar)],l=[u[0]-(y=p*ar),u[1]+(m=p*or)]):(c=[u[0]-d,u[1]+h-E],l=[u[0]-d+E,u[1]+h]);break;case"left":f=d,p=d,b==="circle"?(c=[u[0]-(v=f*ar),u[1]+(g=f*or)],l=[u[0]-(y=p*ar),u[1]-(m=p*or)]):(c=[u[0]-d,u[1]-E],l=[u[0]-d,u[1]+E]);break;case"top-left":f=d,p=h,b==="circle"?(c=[u[0]-(v=f*ar),u[1]-(g=f*or)],l=[u[0]-(m=p*or),u[1]-(y=p*ar)]):(c=[u[0]-d+E,u[1]-h],l=[u[0]-d,u[1]-h+E]);break;default:c=[u[0]-(g=(f=d)*or),u[1]-(v=f*ar)],l=[u[0]+(m=(p=d)*or),u[1]-(y=p*ar)]}if(o.clockwise===!1){var S=[c[0],c[1]];c=[l[0],l[1]],l=[S[0],S[1]]}}var M=[c[0]-u[0],c[1]-u[1]],k=(f+a)/f,_=(p+a)/p;o.clockwise===!1&&(k=(p+a)/p,_=(f+a)/f);var C=bn([0,0],M,k),T=[u[0]+C[0],u[1]+C[1]],A=bn([0,0],[l[0]-u[0],l[1]-u[1]],_),D=[u[0]+A[0],u[1]+A[1]];return e.startPoint={x:c[0],y:c[1]},e.endPoint={x:l[0],y:l[1]},e.controlPoints=[{x:T[0],y:T[1]},{x:D[0],y:D[1]}],e},xE=function(e,n,t,r,i){var o=1e-4,a=[],s=e==null?void 0:e.getPoint(n);if(!s)return{x:0,y:0,angle:0};if(n<o)a=e.getStartTangent().reverse();else if(n>.9999)a=e.getEndTangent();else{var u=e==null?void 0:e.getPoint(n+o);a.push([s.x,s.y]),a.push([u.x,u.y])}var c=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(c<0&&(c+=2*Ji),t&&(s.x+=G0(c)*t,s.y+=F0(c)*t),r){var l=c-Ji/2;c>.5*Ji&&c<1.5*Ji&&(l-=Ji),s.x+=G0(l)*r,s.y+=F0(l)*r}var h={x:s.x,y:s.y,angle:c};return i?(c>.5*Ji&&c<1.5*Ji&&(c-=Ji),P({rotate:c},h)):h},RL=function e(n,t,r,i){if(i(n,t,r)===!1)return!1;if(n&&n.children){for(var o=n.children.length-1;o>=0;o--)if(!e(n.children[o],n,o,i))return!1}return!0},jL=function e(n,t,r,i){if(n&&n.children){for(var o=n.children.length-1;o>=0;o--)if(!e(n.children[o],n,o,i))return}return i(n,t,r)!==!1},xr=function(e,n){typeof n=="function"&&RL(e,null,-1,n)},eo=function(e,n){typeof n=="function"&&jL(e,null,-1,n)},wE=function(e,n){return n*(BL[e]||1)},EE=function(e,n){var t=0,r=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(i){r.test(i)?t+=n:t+=wE(i,n)}),[t,n]},SE=function(e,n){return typeof n!="number"||n<=0||n>=e.length?e:e.substring(0,n)+"..."},Y0=function(e,n){var t=[],r={},i={};e.forEach(function(s){i[s.id]=s}),e.forEach(function(s,u){var c=_t(s);c.itemType="combo",c.children=void 0,(c.parentId===c.id||c.parentId&&!i[c.parentId])&&delete c.parentId;var l=r[c.id];if(l){if(c.children=l.children,r[c.id]=c,!(l=c).parentId)return void t.push(l);var h=r[l.parentId];if(h)h.children?h.children.push(c):h.children=[c];else{var d={id:l.parentId,children:[l]};r[l.parentId]=d,r[c.id]=c}}else if(he(s.parentId)){var f=r[s.parentId];if(f)f.children?f.children.push(c):f.children=[c],r[c.id]=c;else{var p={id:s.parentId,children:[c]};r[p.id]=p,r[c.id]=c}}else t.push(c),r[c.id]=c});var o={};(n||[]).forEach(function(s){o[s.id]=s;var u=r[s.comboId];if(u){var c={id:s.id,comboId:s.comboId};u.children?u.children.push(c):u.children=[c],c.itemType="node",r[s.id]=c}});var a=0;return t.forEach(function(s){s.depth=a+10,xr(s,function(u){var c,l=r[u.id].itemType;c=l==="node"?r[u.comboId]:r[u.parentId],u.depth=c&&l==="node"?a+1:a+10,a<u.depth&&(a=u.depth);var h=o[u.id];return h&&(h.depth=u.depth),!0})}),t},X0=function(e,n,t){var r,i,o=e,a={root:{children:e}},s=!1,u="root";(e||[]).forEach(function(f){if(!s)return f.id===n?(i=f,f.itemType==="combo"?i.parentId=t:i.comboId=t,void(s=!0)):void xr(f,function(p){var g;return a[p.id]={children:(p==null?void 0:p.children)||[]},o=(g=a[p.parentId||p.comboId||"root"])===null||g===void 0?void 0:g.children,!p||!p.removed&&n!==p.id||!o||(u=p.parentId||p.comboId||"root",i=p,p.itemType==="combo"?i.parentId=t:i.comboId=t,s=!0,!1)})});var c=(o=(r=a[u])===null||r===void 0?void 0:r.children)?o.indexOf(i):-1;if(c>-1&&o.splice(c,1),s||(i={id:n,itemType:"node",comboId:t},a[n]={children:void 0}),n){var l=!1;if(t){var h=0;(e||[]).forEach(function(f){l||xr(f,function(p){return t!==p.id||(l=!0,p.children?p.children.push(i):p.children=[i],h=p.depth,i.itemType==="node"?i.depth=h+2:i.depth=h+1,!1)})})}else t&&l||i.itemType==="node"||e.push(i);var d=i.depth;xr(i,function(f){return f.itemType==="node"?d+=2:d+=1,f.depth=d,!0})}return e},pd=function(e,n,t){var r={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var i=(t==null?void 0:t.getModel())||{},o=i.x,a=i.y,s=i.fixSize,u=i.collapsed,c=i.fixCollapseSize,l=u?c:s,h=at(l)?l:[l,l],d=h[0],f=h[1],p=[d/2,f/2];return{minX:o-p[0],minY:a-p[1],maxX:o+p[0],maxY:a+p[1],x:o,y:a,width:d,height:f}}return e.forEach(function(g){var v=n.findById(g.id);if(v&&v.isVisible()){v.set("bboxCanvasCache",void 0);var m=v.getCanvasBBox();m.x&&r.minX>m.minX&&(r.minX=m.minX),m.y&&r.minY>m.minY&&(r.minY=m.minY),m.x&&r.maxX<m.maxX&&(r.maxX=m.maxX),m.y&&r.maxY<m.maxY&&(r.maxY=m.maxY)}}),r.x=(r.minX+r.maxX)/2,r.y=(r.minY+r.maxY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,(t==null?void 0:t.getKeyShape().get("type"))==="circle"&&(r.width=Math.hypot(r.height,r.width),r.height=r.width),Object.keys(r).forEach(function(g){r[g]!==1/0&&r[g]!==-1/0||(r[g]=void 0)}),r},gd=function(e){var n={};return Object.keys(e).forEach(function(t){var r=e[t];if(t!=="img"||he(r))if(Tn(r)&&!at(r)){var i={};Object.keys(r).forEach(function(o){var a=r[o];(o!=="img"||he(a))&&(i[o]=_t(a))}),n[t]=i}else n[t]=_t(r)}),n},Tc=function(e){var n,t=e.animateCfg,r=e.callback;if(t)if(n=_t(t),t.callback){var i=t.callback;n.callback=function(){r(),i()}}else n.callback=r;else n={duration:500,callback:r};return n};const zL=Object.freeze(Object.defineProperty({__proto__:null,cloneBesidesImg:gd,getAnimateCfgWithCallback:Tc,getBBox:fd,getComboBBox:pd,getLabelPosition:xE,getLetterWidth:wE,getLoopCfgs:bE,getTextSize:EE,plainCombosToTrees:Y0,reconstructTree:X0,shouldRefreshEdge:function(e){var n=Ue(e.x)||Ue(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(n=n||Ue(e.style.r)||Ue(e.style.width)||Ue(e.style.height)||Ue(e.style.rx)||Ue(e.style.ry)),n},traverseTree:xr,traverseTreeUp:eo,truncateLabelByLength:SE},Symbol.toStringTag,{value:"Module"}));var ME=function(e){if(!e)return!1;var n=e.nodes,t=e.edges,r=e.combos,i=r===void 0?[]:r;if(!n&&!t){var o=!0;return xr(e,function(c){return!!he(c.id)||(o=!1,!1)}),o}if((n||[]).find(function(c){return!he(c.id)}))return!1;var a=(n||[]).map(function(c){return c.id}),s=i==null?void 0:i.map(function(c){return c.id}),u=ir(ir([],a,!0),s,!0);return!(t||[]).find(function(c){return!u.includes(c.source)||!u.includes(c.target)})},FL=function(){function e(n){this.graph=n,this.destroyed=!1,this.modes=n.get("modes")||{default:[]},this.formatModes(),this.mode=n.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return e.prototype.formatModes=function(){re(this.modes,function(n){re(n,function(t,r){he(t)&&(n[r]={type:t})})})},e.prototype.setBehaviors=function(n){var t,r=this.graph,i=this.modes[n],o=[];re(i||[],function(a){var s=o0.getBehavior(a.type||a);s&&(t=new s(a))&&(t.bind(r),o.push(t))}),this.currentBehaves=o},e.mergeBehaviors=function(n,t){return re(t,function(r){n.indexOf(r)<0&&(he(r)&&(r={type:r}),n.push(r))}),n},e.filterBehaviors=function(n,t){var r=[];return n.forEach(function(i){var o="";o=he(i)?i:i.type,t.indexOf(o)<0&&r.push(i)}),r},e.prototype.setMode=function(n){var t=this.modes,r=this.graph,i=n;t[i]&&(r.emit("beforemodechange",{mode:n}),re(this.currentBehaves,function(o){o.delegate&&o.delegate.remove(),o.unbind(r)}),this.setBehaviors(i),r.emit("aftermodechange",{mode:n}),this.mode=n)},e.prototype.getMode=function(){return this.mode},e.prototype.manipulateBehaviors=function(n,t,r){var i,o=this;if(i=at(n)?n:[n],at(t))return re(t,function(s){o.modes[s]?o.modes[s]=r?e.mergeBehaviors(o.modes[s]||[],i):e.filterBehaviors(o.modes[s]||[],i):r&&(o.modes[s]=i)}),this;var a=t;return t||(a=this.mode),this.modes[a]||r&&(this.modes[a]=i),this.modes[a]=r?e.mergeBehaviors(this.modes[a]||[],i):e.filterBehaviors(this.modes[a]||[],i),this.formatModes(),this.setMode(this.mode),this},e.prototype.updateBehavior=function(n,t,r){he(n)&&(n={type:n});var i=[];if(r&&r!==this.mode&&r!=="default"){if(!(i=this.modes[r])||!i.length)return this;var o=i.length;for(s=0;s<o;s++)if((u=i[s]).type===n.type||u===n.type)return u===n.type&&(u={type:u}),Object.assign(u,t),i[s]=u,this}else{if(!(i=this.currentBehaves)||!i.length)return this;for(var a=i.length,s=0;s<a;s++){var u;if((u=i[s]).type===n.type)return u.updateCfg(t),this}}return this},e.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},e}(),Oc=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,GL=new RegExp("([a-z])["+Oc+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Oc+"]*,?["+Oc+"]*)+)","ig"),YL=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Oc+"]*,?["+Oc+"]*","ig"),uu=function(e){if(!e)return null;if(at(e))return e;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(e).replace(GL,function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(YL,function(u,c){c&&a.push(+c)}),s==="m"&&a.length>2&&(t.push([i].concat(a.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&a.length===1&&t.push([i,a[0]]),s==="r")t.push([i].concat(a));else for(;a.length>=n[s]&&(t.push([i].concat(a.splice(0,n[s]))),n[s]););return e}),t},U0=function(e,n){for(var t=[],r=0,i=e.length;i-2*!n>r;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];n?r?i-4===r?o[3]={x:+e[0],y:+e[1]}:i-2===r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),t.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return t},vd=function(e,n,t,r,i){var o=[];if(i===null&&r===null&&(r=t),e=+e,n=+n,t=+t,r=+r,i!==null){var a=Math.PI/180,s=e+t*Math.cos(-r*a),u=e+t*Math.cos(-i*a);o=[["M",s,n+t*Math.sin(-r*a)],["A",t,t,0,+(i-r>180),0,u,n+t*Math.sin(-i*a)]]}else o=[["M",e,n],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return o},W0=function(e){if(!(e=uu(e))||!e.length)return[["M",0,0]];var n,t,r=[],i=0,o=0,a=0,s=0,u=0;e[0][0]==="M"&&(a=i=+e[0][1],s=o=+e[0][2],u++,r[0]=["M",i,o]);for(var c=e.length===3&&e[0][0]==="M"&&e[1][0].toUpperCase()==="R"&&e[2][0].toUpperCase()==="Z",l=void 0,h=void 0,d=u,f=e.length;d<f;d++){if(r.push(l=[]),(n=(h=e[d])[0])!==n.toUpperCase())switch(l[0]=n.toUpperCase(),l[0]){case"A":l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=+h[6]+i,l[7]=+h[7]+o;break;case"V":l[1]=+h[1]+o;break;case"H":l[1]=+h[1]+i;break;case"R":for(var p=2,g=(t=[i,o].concat(h.slice(1))).length;p<g;p++)t[p]=+t[p]+i,t[++p]=+t[p]+o;r.pop(),r=r.concat(U0(t,c));break;case"O":r.pop(),(t=vd(i,o,h[1],h[2])).push(t[0]),r=r.concat(t);break;case"U":r.pop(),r=r.concat(vd(i,o,h[1],h[2],h[3])),l=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+h[1]+i,s=+h[2]+o;break;default:for(p=1,g=h.length;p<g;p++)l[p]=+h[p]+(p%2?i:o)}else if(n==="R")t=[i,o].concat(h.slice(1)),r.pop(),r=r.concat(U0(t,c)),l=["R"].concat(h.slice(-2));else if(n==="O")r.pop(),(t=vd(i,o,h[1],h[2])).push(t[0]),r=r.concat(t);else if(n==="U")r.pop(),r=r.concat(vd(i,o,h[1],h[2],h[3])),l=["U"].concat(r[r.length-1].slice(-2));else for(var v=0,m=h.length;v<m;v++)l[v]=h[v];if((n=n.toUpperCase())!=="O")switch(l[0]){case"Z":i=+a,o=+s;break;case"H":i=l[1];break;case"V":o=l[1];break;case"M":a=l[l.length-2],s=l[l.length-1];break;default:i=l[l.length-2],o=l[l.length-1]}}return r},md=function(e,n,t,r){return[e,n,t,r,t,r]},_E=function(e,n,t,r,i,o){var a=.3333333333333333,s=2/3;return[a*e+s*t,a*n+s*r,a*i+s*t,a*o+s*r,i,o]},kE=function(e,n,t,r,i,o,a,s,u,c){t===r&&(t+=1);var l,h,d,f,p,g=120*Math.PI/180,v=Math.PI/180*(+i||0),m=[],y=function(me,ke,yt){return{x:me*Math.cos(yt)-ke*Math.sin(yt),y:me*Math.sin(yt)+ke*Math.cos(yt)}};if(c)h=c[0],d=c[1],f=c[2],p=c[3];else{e=(l=y(e,n,-v)).x,n=l.y,s=(l=y(s,u,-v)).x,u=l.y,e===s&&n===u&&(s+=1,u+=1);var b=(e-s)/2,x=(n-u)/2,w=b*b/(t*t)+x*x/(r*r);w>1&&(t*=w=Math.sqrt(w),r*=w);var E=t*t,S=r*r,M=(o===a?-1:1)*Math.sqrt(Math.abs((E*S-E*x*x-S*b*b)/(E*x*x+S*b*b)));f=M*t*x/r+(e+s)/2,p=M*-r*b/t+(n+u)/2,h=Math.asin(((n-p)/r).toFixed(9)),d=Math.asin(((u-p)/r).toFixed(9)),h=e<f?Math.PI-h:h,d=s<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),a&&h>d&&(h-=2*Math.PI),!a&&d>h&&(d-=2*Math.PI)}var k=d-h;if(Math.abs(k)>g){var _=d,C=s,T=u;d=h+g*(a&&d>h?1:-1),s=f+t*Math.cos(d),u=p+r*Math.sin(d),m=kE(s,u,t,r,i,0,a,C,T,[d,_,f,p])}k=d-h;var A=Math.cos(h),D=Math.sin(h),R=Math.cos(d),B=Math.sin(d),F=Math.tan(k/4),N=4/3*t*F,L=4/3*r*F,z=[e,n],Z=[e+N*D,n-L*A],ne=[s+N*B,u-L*R],J=[s,u];if(Z[0]=2*z[0]-Z[0],Z[1]=2*z[1]-Z[1],c)return[Z,ne,J].concat(m);for(var q=[],ie=0,Me=(m=[Z,ne,J].concat(m).join().split(",")).length;ie<Me;ie++)q[ie]=ie%2?y(m[ie-1],m[ie],v).y:y(m[ie],m[ie+1],v).x;return q},V0=function(e,n){var t,r=W0(e),i=n&&W0(n),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],u=[],c="",l="",h=function(b,x,w){var E,S;if(!b)return["C",x.x,x.y,x.x,x.y,x.x,x.y];switch(!(b[0]in{T:1,Q:1})&&(x.qx=x.qy=null),b[0]){case"M":x.X=b[1],x.Y=b[2];break;case"A":b=["C"].concat(kE.apply(0,[x.x,x.y].concat(b.slice(1))));break;case"S":w==="C"||w==="S"?(E=2*x.x-x.bx,S=2*x.y-x.by):(E=x.x,S=x.y),b=["C",E,S].concat(b.slice(1));break;case"T":w==="Q"||w==="T"?(x.qx=2*x.x-x.qx,x.qy=2*x.y-x.qy):(x.qx=x.x,x.qy=x.y),b=["C"].concat(_E(x.x,x.y,x.qx,x.qy,b[1],b[2]));break;case"Q":x.qx=b[1],x.qy=b[2],b=["C"].concat(_E(x.x,x.y,b[1],b[2],b[3],b[4]));break;case"L":b=["C"].concat(md(x.x,x.y,b[1],b[2]));break;case"H":b=["C"].concat(md(x.x,x.y,b[1],x.y));break;case"V":b=["C"].concat(md(x.x,x.y,x.x,b[1]));break;case"Z":b=["C"].concat(md(x.x,x.y,x.X,x.Y))}return b},d=function(b,x){if(b[x].length>7){b[x].shift();for(var w=b[x];w.length;)s[x]="A",i&&(u[x]="A"),b.splice(x++,0,["C"].concat(w.splice(0,6)));b.splice(x,1),t=Math.max(r.length,i&&i.length||0)}},f=function(b,x,w,E,S){b&&x&&b[S][0]==="M"&&x[S][0]!=="M"&&(x.splice(S,0,["M",E.x,E.y]),w.bx=0,w.by=0,w.x=b[S][1],w.y=b[S][2],t=Math.max(r.length,i&&i.length||0))};t=Math.max(r.length,i&&i.length||0);for(var p=0;p<t;p++){r[p]&&(c=r[p][0]),c!=="C"&&(s[p]=c,p&&(l=s[p-1])),r[p]=h(r[p],o,l),s[p]!=="A"&&c==="C"&&(s[p]="C"),d(r,p),i&&(i[p]&&(c=i[p][0]),c!=="C"&&(u[p]=c,p&&(l=u[p-1])),i[p]=h(i[p],a,l),u[p]!=="A"&&c==="C"&&(u[p]="C"),d(i,p)),f(r,i,o,a,p),f(i,r,a,o,p);var g=r[p],v=i&&i[p],m=g.length,y=i&&v.length;o.x=g[m-2],o.y=g[m-1],o.bx=parseFloat(g[m-4])||o.x,o.by=parseFloat(g[m-3])||o.y,a.bx=i&&(parseFloat(v[y-4])||a.x),a.by=i&&(parseFloat(v[y-3])||a.y),a.x=i&&v[y-2],a.y=i&&v[y-1]}return i?[r,i]:r},XL=/,?([a-z]),?/gi,CE=function(e){return e.join(",").replace(XL,"$1")},AE=function(e,n,t,r,i){return e*(e*(-3*n+9*t-9*r+3*i)+6*n-12*t+6*r)-3*n+3*t},IE=function(e,n,t,r,i,o,a,s,u){u===null&&(u=1);for(var c=(u=u>1?1:u<0?0:u)/2,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<12;f++){var p=c*l[f]+c,g=AE(p,e,t,i,a),v=AE(p,n,r,o,s),m=g*g+v*v;d+=h[f]*Math.sqrt(m)}return c*d},UL=function(e,n,t,r,i,o,a,s){for(var u,c,l,h,d=[],f=[[],[]],p=0;p<2;++p)if(p===0?(c=6*e-12*t+6*i,u=-3*e+9*t-9*i+3*a,l=3*t-3*e):(c=6*n-12*r+6*o,u=-3*n+9*r-9*o+3*s,l=3*r-3*n),Math.abs(u)<1e-12){if(Math.abs(c)<1e-12)continue;(h=-l/c)>0&&h<1&&d.push(h)}else{var g=c*c-4*l*u,v=Math.sqrt(g);if(!(g<0)){var m=(-c+v)/(2*u);m>0&&m<1&&d.push(m);var y=(-c-v)/(2*u);y>0&&y<1&&d.push(y)}}for(var b,x=d.length,w=x;x--;)b=1-(h=d[x]),f[0][x]=b*b*b*e+3*b*b*h*t+3*b*h*h*i+h*h*h*a,f[1][x]=b*b*b*n+3*b*b*h*r+3*b*h*h*o+h*h*h*s;return f[0][w]=e,f[1][w]=n,f[0][w+1]=a,f[1][w+1]=s,f[0].length=f[1].length=w+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},WL=function(e,n,t,r,i,o,a,s){if(!(Math.max(e,t)<Math.min(i,a)||Math.min(e,t)>Math.max(i,a)||Math.max(n,r)<Math.min(o,s)||Math.min(n,r)>Math.max(o,s))){var u=(e-t)*(o-s)-(n-r)*(i-a);if(u){var c=((e*r-n*t)*(i-a)-(e-t)*(i*s-o*a))/u,l=((e*r-n*t)*(o-s)-(n-r)*(i*s-o*a))/u,h=+c.toFixed(2),d=+l.toFixed(2);if(!(h<+Math.min(e,t).toFixed(2)||h>+Math.max(e,t).toFixed(2)||h<+Math.min(i,a).toFixed(2)||h>+Math.max(i,a).toFixed(2)||d<+Math.min(n,r).toFixed(2)||d>+Math.max(n,r).toFixed(2)||d<+Math.min(o,s).toFixed(2)||d>+Math.max(o,s).toFixed(2)))return{x:c,y:l}}}},ua=function(e,n,t){return n>=e.x&&n<=e.x+e.width&&t>=e.y&&t<=e.y+e.height},TE=function(e,n,t,r,i){if(i)return[["M",+e+ +i,n],["l",t-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-t,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",e,n],["l",t,0],["l",0,r],["l",-t,0],["z"]];return o.parsePathArray=CE,o},H0=function(e,n,t,r){return e===null&&(e=n=t=r=0),n===null&&(n=e.y,t=e.width,r=e.height,e=e.x),{x:e,y:n,width:t,w:t,height:r,h:r,x2:e+t,y2:n+r,cx:e+t/2,cy:n+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:TE(e,n,t,r),vb:[e,n,t,r].join(" ")}},OE=function(e,n,t,r,i,o,a,s){at(e)||(e=[e,n,t,r,i,o,a,s]);var u=UL.apply(null,e);return H0(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},NE=function(e,n,t,r,i,o,a,s,u){var c=1-u,l=Math.pow(c,3),h=Math.pow(c,2),d=u*u,f=d*u,p=e+2*u*(t-e)+d*(i-2*t+e),g=n+2*u*(r-n)+d*(o-2*r+n),v=t+2*u*(i-t)+d*(a-2*i+t),m=r+2*u*(o-r)+d*(s-2*o+r);return{x:l*e+3*h*u*t+3*c*u*u*i+f*a,y:l*n+3*h*u*r+3*c*u*u*o+f*s,m:{x:p,y:g},n:{x:v,y:m},start:{x:c*e+u*t,y:c*n+u*r},end:{x:c*i+u*a,y:c*o+u*s},alpha:90-180*Math.atan2(p-v,g-m)/Math.PI}},VL=function(e,n,t){if(!function(w,E){return w=H0(w),E=H0(E),ua(E,w.x,w.y)||ua(E,w.x2,w.y)||ua(E,w.x,w.y2)||ua(E,w.x2,w.y2)||ua(w,E.x,E.y)||ua(w,E.x2,E.y)||ua(w,E.x,E.y2)||ua(w,E.x2,E.y2)||(w.x<E.x2&&w.x>E.x||E.x<w.x2&&E.x>w.x)&&(w.y<E.y2&&w.y>E.y||E.y<w.y2&&E.y>w.y)}(OE(e),OE(n)))return t?0:[];for(var r=~~(IE.apply(0,e)/8),i=~~(IE.apply(0,n)/8),o=[],a=[],s={},u=t?0:[],c=0;c<r+1;c++){var l=NE.apply(0,e.concat(c/r));o.push({x:l.x,y:l.y,t:c/r})}for(c=0;c<i+1;c++)l=NE.apply(0,n.concat(c/i)),a.push({x:l.x,y:l.y,t:c/i});for(c=0;c<r;c++)for(var h=0;h<i;h++){var d=o[c],f=o[c+1],p=a[h],g=a[h+1],v=Math.abs(f.x-d.x)<.001?"y":"x",m=Math.abs(g.x-p.x)<.001?"y":"x",y=WL(d.x,d.y,f.x,f.y,p.x,p.y,g.x,g.y);if(y){if(s[y.x.toFixed(4)]===y.y.toFixed(4))continue;s[y.x.toFixed(4)]=y.y.toFixed(4);var b=d.t+Math.abs((y[v]-d[v])/(f[v]-d[v]))*(f.t-d.t),x=p.t+Math.abs((y[m]-p[m])/(g[m]-p[m]))*(g.t-p.t);b>=0&&b<=1&&x>=0&&x<=1&&(t?u+=1:u.push({x:y.x,y:y.y,t1:b,t2:x}))}}return u};function HL(e,n){var t=[],r=[];return e.length&&function i(o,a){if(o.length===1)t.push(o[0]),r.push(o[0]);else{for(var s=[],u=0;u<o.length-1;u++)u===0&&t.push(o[0]),u===o.length-2&&r.push(o[u+1]),s[u]=[(1-a)*o[u][0]+a*o[u+1][0],(1-a)*o[u][1]+a*o[u+1][1]];i(s,a)}}(e,n),{left:t,right:r.reverse()}}var qL=function(e,n,t){if(t===1)return[[].concat(e)];var r=[];if(n[0]==="L"||n[0]==="C"||n[0]==="Q")r=r.concat(function(a,s,u){var c=[[a[1],a[2]]];u=u||2;var l=[];s[0]==="A"?(c.push(s[6]),c.push(s[7])):s[0]==="C"?(c.push([s[1],s[2]]),c.push([s[3],s[4]]),c.push([s[5],s[6]])):s[0]==="S"||s[0]==="Q"?(c.push([s[1],s[2]]),c.push([s[3],s[4]])):c.push([s[1],s[2]]);for(var h=c,d=1/u,f=0;f<u-1;f++){var p=HL(h,d/(1-d*f));l.push(p.left),h=p.right}return l.push(h),l.map(function(g){var v=[];return g.length===4&&(v.push("C"),v=v.concat(g[2])),g.length>=3&&(g.length===3&&v.push("Q"),v=v.concat(g[1])),g.length===2&&v.push("L"),v.concat(g[g.length-1])})}(e,n,t));else{var i=[].concat(e);i[0]==="M"&&(i[0]="L");for(var o=0;o<=t-1;o++)r.push(i)}return r},ZL=function(e,n){if(e.length!==n.length)return!1;var t=!0;return re(e,function(r,i){if(r!==n[i])return t=!1,!1}),t};function KL(e,n,t){var r=null,i=t;return n<i&&(i=n,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var PE=function(e,n){var t=function(d,f){var p,g,v=d.length,m=f.length,y=0;if(v===0||m===0)return null;for(var b=[],x=0;x<=v;x++)b[x]=[],b[x][0]={min:x};for(var w=0;w<=m;w++)b[0][w]={min:w};for(x=1;x<=v;x++)for(p=d[x-1],w=1;w<=m;w++){g=f[w-1],y=ZL(p,g)?0:1;var E=b[x-1][w].min+1,S=b[x][w-1].min+1,M=b[x-1][w-1].min+y;b[x][w]=KL(E,S,M)}return b}(e,n),r=e.length,i=n.length,o=[],a=1,s=1;if(t[r][i].min!==r){for(var u=1;u<=r;u++){var c=t[u][u].min;s=u;for(var l=a;l<=i;l++)t[u][l].min<c&&(c=t[u][l].min,s=l);a=s,t[u][a].type&&o.push({index:u-1,type:t[u][a].type})}for(u=o.length-1;u>=0;u--)a=o[u].index,o[u].type==="add"?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}var h=i-(r=e.length);if(r<i)for(u=0;u<h;u++)e[r-1][0]==="z"||e[r-1][0]==="Z"?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function q0(e,n,t){for(var r,i=[].concat(e),o=1/(t+1),a=DE(n)[0],s=1;s<=t;s++)o*=s,(r=Math.floor(e.length*o))===0?i.unshift([a[0]*o+e[r][0]*(1-o),a[1]*o+e[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+e[r][0]*(1-o),a[1]*o+e[r][1]*(1-o)]);return i}function DE(e){var n=[];switch(e[0]){case"M":case"L":case"T":n.push([e[1],e[2]]);break;case"A":n.push([e[6],e[7]]);break;case"Q":case"S":n.push([e[3],e[4]]),n.push([e[1],e[2]]);break;case"C":n.push([e[5],e[6]]),n.push([e[1],e[2]]),n.push([e[3],e[4]]);break;case"H":case"V":n.push([e[1],e[1]])}return n}var Z0=function(e,n){if(e.length<=1)return e;for(var t,r=0;r<n.length;r++)if(e[r][0]!==n[r][0])switch(t=DE(e[r]),n[r][0]){case"M":e[r]=["M"].concat(t[0]);break;case"L":e[r]=["L"].concat(t[0]);break;case"A":e[r]=[].concat(n[r]),e[r][6]=t[0][0],e[r][7]=t[0][1];break;case"Q":if(t.length<2){if(!(r>0)){e[r]=n[r];break}t=q0(t,e[r-1],1)}e[r]=["Q"].concat(t.reduce(function(i,o){return i.concat(o)},[]));break;case"T":e[r]=["T"].concat(t[0]);break;case"C":if(t.length<3){if(!(r>0)){e[r]=n[r];break}t=q0(t,e[r-1],2)}e[r]=["C"].concat(t.reduce(function(i,o){return i.concat(o)},[]));break;case"S":if(t.length<2){if(!(r>0)){e[r]=n[r];break}t=q0(t,e[r-1],1)}e[r]=["S"].concat(t.reduce(function(i,o){return i.concat(o)},[]));break;default:e[r]=n[r]}return e};const $L=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier:U0,fillPath:function(e,n){if(e.length===1)return e;var t=e.length-1,r=n.length-1,i=t/r,o=[];if(e.length===1&&e[0][0]==="M"){for(var a=0;a<r-t;a++)e.push(e[0]);return e}for(a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var u=o.reduce(function(c,l,h){return h===t?c.concat(e[t]):c.concat(qL(e[h],e[h+1],l))},[]);return u.unshift(e[0]),n[r]!=="Z"&&n[r]!=="z"||u.push("Z"),u},fillPathByDiff:PE,formatPath:Z0,intersection:function(e,n){return function(t,r,i){var o,a,s,u,c,l,h,d,f,p;t=V0(t),r=V0(r);for(var g=i?0:[],v=0,m=t.length;v<m;v++){var y=t[v];if(y[0]==="M")o=c=y[1],a=l=y[2];else{y[0]==="C"?(f=[o,a].concat(y.slice(1)),o=f[6],a=f[7]):(f=[o,a,o,a,c,l,c,l],o=c,a=l);for(var b=0,x=r.length;b<x;b++){var w=r[b];if(w[0]==="M")s=h=w[1],u=d=w[2];else{w[0]==="C"?(p=[s,u].concat(w.slice(1)),s=p[6],u=p[7]):(p=[s,u,s,u,h,d,h,d],s=h,u=d);var E=VL(f,p,i);if(i)g+=E;else{for(var S=0,M=E.length;S<M;S++)E[S].segment1=v,E[S].segment2=b,E[S].bez1=f,E[S].bez2=p;g=g.concat(E)}}}}}return g}(e,n)},parsePathArray:CE,parsePathString:uu,pathToAbsolute:W0,pathToCurve:V0,rectPath:TE},Symbol.toStringTag,{value:"Module"}));var K0=function(){function e(n,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=n,this.name=n,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function LE(e,n){var t=e.indexOf(n);t!==-1&&e.splice(t,1)}var BE=typeof window!="undefined"&&window.document!==void 0;function RE(e,n){if(e.isCanvas())return!0;for(var t=n.getParent(),r=!1;t;){if(t===e){r=!0;break}t=t.getParent()}return r}function $0(e){return e.cfg.visible&&e.cfg.capture}var QL=function(e){function n(t){var r=e.call(this)||this;r.destroyed=!1;var i=r.getDefaultCfg();return r.cfg=ut(i,t),r}return At(n,e),n.prototype.getDefaultCfg=function(){return{}},n.prototype.get=function(t){return this.cfg[t]},n.prototype.set=function(t,r){this.cfg[t]=r},n.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},n}(a0),jE=function(e,n,t){if(t||arguments.length===2)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},JL=function(e,n,t){this.name=e,this.version=n,this.os=t,this.type="browser"},eB=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},tB=function(e,n,t,r){this.name=e,this.version=n,this.os=t,this.bot=r,this.type="bot-device"},nB=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},rB=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},iB=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,oB=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],zE=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function FE(e){return typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new rB:typeof navigator!="undefined"?function(n){var t=function(c){return c!==""&&oB.reduce(function(l,h){var d=h[0],f=h[1];if(l)return l;var p=f.exec(c);return!!p&&[d,p]},!1)}(n);if(!t)return null;var r=t[0],i=t[1];if(r==="searchbot")return new nB;var o=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);o?o.length<3&&(o=jE(jE([],o,!0),function(c){for(var l=[],h=0;h<c;h++)l.push("0");return l}(3-o.length),!0)):o=[];var a=o.join("."),s=function(c){for(var l=0,h=zE.length;l<h;l++){var d=zE[l],f=d[0];if(d[1].exec(c))return f}return null}(n),u=iB.exec(n);return u&&u[1]?new tB(r,a,s,u[1]):new JL(r,a,s)}(navigator.userAgent):typeof process!="undefined"&&process.version?new eB(process.version.slice(1)):null}function GE(e,n){var t=[],r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=n[0],f=n[1],p=n[2],g=n[3],v=n[4],m=n[5],y=n[6],b=n[7],x=n[8];return t[0]=d*r+f*a+p*c,t[1]=d*i+f*s+p*l,t[2]=d*o+f*u+p*h,t[3]=g*r+v*a+m*c,t[4]=g*i+v*s+m*l,t[5]=g*o+v*u+m*h,t[6]=y*r+b*a+x*c,t[7]=y*i+b*s+x*l,t[8]=y*o+b*u+x*h,t}function Qa(e,n){var t=[],r=n[0],i=n[1];return t[0]=e[0]*r+e[3]*i+e[6],t[1]=e[1]*r+e[4]*i+e[7],t}function YE(e){var n=[],t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=l*a-s*c,d=-l*o+s*u,f=c*o-a*u,p=t*h+r*d+i*f;return p?(p=1/p,n[0]=h*p,n[1]=(-l*r+i*c)*p,n[2]=(s*r-i*a)*p,n[3]=d*p,n[4]=(l*t-i*u)*p,n[5]=(-s*t+i*o)*p,n[6]=f*p,n[7]=(-c*t+r*u)*p,n[8]=(a*t-r*o)*p,n):null}var Nc=br,Q0="matrix",aB=["zIndex","capture","visible","type"],sB=["repeat"];function uB(e,n){var t={},r=n.attrs;for(var i in e)t[i]=r[i];return t}var XE=function(e){function n(t){var r=e.call(this,t)||this;r.attrs={};var i=r.getDefaultAttrs();return ut(i,t.attrs),r.attrs=i,r.initAttrs(i),r.initAnimate(),r}return At(n,e),n.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},n.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},n.prototype.onCanvasChange=function(t){},n.prototype.initAttrs=function(t){},n.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},n.prototype.isGroup=function(){return!1},n.prototype.getParent=function(){return this.get("parent")},n.prototype.getCanvas=function(){return this.get("canvas")},n.prototype.attr=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=r[0],a=r[1];if(!o)return this.attrs;if(Tn(o)){for(var s in o)this.setAttr(s,o[s]);return this.afterAttrsChange(o),this}return r.length===2?(this.setAttr(o,a),this.afterAttrsChange(((t={})[o]=a,t)),this):this.attrs[o]},n.prototype.isClipped=function(t,r){var i=this.getClip();return i&&!i.isHit(t,r)},n.prototype.setAttr=function(t,r){var i=this.attrs[t];i!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,i))},n.prototype.onAttrChange=function(t,r,i){t==="matrix"&&this.set("totalMatrix",null)},n.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},n.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},n.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},n.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},n.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren();this.get("el");var i=r.indexOf(this);r.splice(i,1),r.push(this),this.onCanvasChange("zIndex")}},n.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren();this.get("el");var i=r.indexOf(this);r.splice(i,1),r.unshift(this),this.onCanvasChange("zIndex")}},n.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(LE(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},n.prototype.resetMatrix=function(){this.attr(Q0,this.getDefaultMatrix()),this.onCanvasChange("matrix")},n.prototype.getMatrix=function(){return this.attr(Q0)},n.prototype.setMatrix=function(t){this.attr(Q0,t),this.onCanvasChange("matrix")},n.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),i=this.cfg.parentMatrix;t=i&&r?GE(i,r):r||i,this.set("totalMatrix",t)}return t},n.prototype.applyMatrix=function(t){var r=this.attr("matrix"),i=null;i=t&&r?GE(t,r):r||t,this.set("totalMatrix",i),this.set("parentMatrix",t)},n.prototype.getDefaultMatrix=function(){return null},n.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?Qa(r,t):t},n.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var i=YE(r);if(i)return Qa(i,t)}return t},n.prototype.setClip=function(t){var r=this.getCanvas(),i=null;if(t){var o=this.getShapeBase()[Io(t.type)];o&&(i=new o({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},n.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},n.prototype.clone=function(){var t=this,r=this.attrs,i={};re(r,function(a,s){at(r[s])?i[s]=function(u){for(var c=[],l=0;l<u.length;l++)at(u[l])?c.push([].concat(u[l])):c.push(u[l]);return c}(r[s]):i[s]=r[s]});var o=new this.constructor({attrs:i});return re(aB,function(a){o.set(a,t.get(a))}),o},n.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},n.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},n.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var o=this.get("animations")||[];i.timer||i.initTimer();var a,s,u,c,l,h=t[0],d=t[1],f=t[2],p=f===void 0?"easeLinear":f,g=t[3],v=g===void 0?kc:g,m=t[4],y=m===void 0?0:m;gn(h)?(a=h,h={}):Tn(h)&&h.onFrame&&(a=h.onFrame,s=h.repeat),Tn(d)?(d=(l=d).duration,p=l.easing||"easeLinear",y=l.delay||0,s=l.repeat||s||!1,v=l.callback||kc,u=l.pauseCallback||kc,c=l.resumeCallback||kc):(Ue(v)&&(y=v,v=null),gn(p)?(v=p,p="easeLinear"):p=p||"easeLinear");var b=function(w,E){var S={},M=E.attr();return re(w,function(k,_){sB.indexOf(_)!==-1||oa(M[_],k)||(S[_]=k)}),S}(h,this),x={fromAttrs:uB(b,this),toAttrs:b,duration:d,easing:p,repeat:s,callback:v,pauseCallback:u,resumeCallback:c,delay:y,startTime:i.getTime(),id:qi(),onFrame:a,pathFormatted:!1};o.length>0?o=function(w,E){if(E.onFrame)return w;var S=E.startTime,M=E.delay,k=E.duration,_=Object.prototype.hasOwnProperty;return re(w,function(C){S+M<C.startTime+C.delay+C.duration&&k>C.delay&&re(E.toAttrs,function(T,A){_.call(C.toAttrs,A)&&(delete C.toAttrs[A],delete C.fromAttrs[A])})}),w}(o,x):i.addAnimator(this),o.push(x),this.set("animations",o),this.set("_pause",{isPaused:!1})}},n.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0),re(this.get("animations"),function(i){t&&(i.onFrame?r.attr(i.onFrame(1)):r.attr(i.toAttrs)),i.callback&&i.callback()}),this.set("animating",!1),this.set("animations",[])},n.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),i=t.getTime();return re(r,function(o){o._paused=!0,o._pauseTime=i,o.pauseCallback&&o.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},n.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),r=this.get("animations"),i=this.get("_pause").pauseTime;return re(r,function(o){o.startTime=o.startTime+(t-i),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",r),this},n.prototype.emitDelegation=function(t,r){var i,o=this,a=r.propagationPath;this.getEvents(),t==="mouseenter"?i=r.fromShape:t==="mouseleave"&&(i=r.toShape);for(var s=function(l){var h=a[l],d=h.get("name");if(d){if((h.isGroup()||h.isCanvas&&h.isCanvas())&&i&&RE(h,i))return"break";at(d)?re(d,function(f){o.emitDelegateEvent(h,f,r)}):u.emitDelegateEvent(h,d,r)}},u=this,c=0;c<a.length&&s(c)!=="break";c++);},n.prototype.emitDelegateEvent=function(t,r,i){var o=this.getEvents(),a=r+":"+i.type;(o[a]||o["*"])&&(i.name=a,i.currentTarget=t,i.delegateTarget=this,i.delegateObject=t.get("delegateObject"),this.emit(a,i))},n.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var i=this.getMatrix(),o=Nc(i,[["t",t,r]]);return this.setMatrix(o),this},n.prototype.move=function(t,r){var i=this.attr("x")||0,o=this.attr("y")||0;return this.translate(t-i,r-o),this},n.prototype.moveTo=function(t,r){return this.move(t,r)},n.prototype.scale=function(t,r){var i=this.getMatrix(),o=Nc(i,[["s",t,r||t]]);return this.setMatrix(o),this},n.prototype.rotate=function(t){var r=this.getMatrix(),i=Nc(r,[["r",t]]);return this.setMatrix(i),this},n.prototype.rotateAtStart=function(t){var r=this.attr(),i=r.x,o=r.y,a=this.getMatrix(),s=Nc(a,[["t",-i,-o],["r",t],["t",i,o]]);return this.setMatrix(s),this},n.prototype.rotateAtPoint=function(t,r,i){var o=this.getMatrix(),a=Nc(o,[["t",-t,-r],["r",i],["t",t,r]]);return this.setMatrix(a),this},n}(QL),UE={},J0="_INDEX";function WE(e,n){if(e.set("canvas",n),e.isGroup()){var t=e.get("children");t.length&&t.forEach(function(r){WE(r,n)})}}function VE(e,n){if(e.set("timeline",n),e.isGroup()){var t=e.get("children");t.length&&t.forEach(function(r){VE(r,n)})}}var yd,Pc,HE=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.isCanvas=function(){return!1},n.prototype.getBBox=function(){var t=1/0,r=-1/0,i=1/0,o=-1/0,a=this.getChildren().filter(function(s){return s.get("visible")&&(!s.isGroup()||s.isGroup()&&s.getChildren().length>0)});return a.length>0?re(a,function(s){var u=s.getBBox(),c=u.minX,l=u.maxX,h=u.minY,d=u.maxY;c<t&&(t=c),l>r&&(r=l),h<i&&(i=h),d>o&&(o=d)}):(t=0,r=0,i=0,o=0),{x:t,y:i,minX:t,minY:i,maxX:r,maxY:o,width:r-t,height:o-i}},n.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,i=1/0,o=-1/0,a=this.getChildren().filter(function(s){return s.get("visible")&&(!s.isGroup()||s.isGroup()&&s.getChildren().length>0)});return a.length>0?re(a,function(s){var u=s.getCanvasBBox(),c=u.minX,l=u.maxX,h=u.minY,d=u.maxY;c<t&&(t=c),l>r&&(r=l),h<i&&(i=h),d>o&&(o=d)}):(t=0,r=0,i=0,o=0),{x:t,y:i,minX:t,minY:i,maxX:r,maxY:o,width:r-t,height:o-i}},n.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},n.prototype.onAttrChange=function(t,r,i){if(e.prototype.onAttrChange.call(this,t,r,i),t==="matrix"){var o=this.getTotalMatrix();this._applyChildrenMarix(o)}},n.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var i=this.getTotalMatrix();i!==r&&this._applyChildrenMarix(i)},n.prototype._applyChildrenMarix=function(t){re(this.getChildren(),function(r){r.applyMatrix(t)})},n.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t[0],o=t[1];Tn(i)?o=i:o.type=i;var a=UE[o.type];a||(a=Io(o.type),UE[o.type]=a);var s=new(this.getShapeBase())[a](o);return this.add(s),s},n.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=t[0],a=t[1];if(gn(o))i=new o(a||{parent:this});else{var s=o||{};i=new(this.getGroupBase())(s)}return this.add(i),i},n.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},n.prototype.getShape=function(t,r,i){if(!$0(this))return null;var o,a=this.getChildren();if(this.isCanvas())o=this._findShape(a,t,r,i);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},n.prototype._findShape=function(t,r,i,o){for(var a=null,s=t.length-1;s>=0;s--){var u=t[s];if($0(u)&&(u.isGroup()?a=u.getShape(r,i,o):u.isHit(r,i)&&(a=u)),a)break}return a},n.prototype.add=function(t){var r=this.getCanvas(),i=this.getChildren(),o=this.get("timeline"),a=t.getParent();a&&function(s,u){u.set("parent",null),u.set("canvas",null),LE(s.getChildren(),u)}(a,t),t.set("parent",this),r&&WE(t,r),o&&VE(t,o),i.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},n.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},n.prototype.getChildren=function(){return this.get("children")||[]},n.prototype.sort=function(){var t=this.getChildren();re(t,function(r,i){return r[J0]=i,r}),t.sort(function(r){return function(i,o){var a=r(i,o);return a===0?i[J0]-o[J0]:a}}(function(r,i){return r.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},n.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},n.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},n.prototype.getFirst=function(){return this.getChildByIndex(0)},n.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},n.prototype.getChildByIndex=function(t){return this.getChildren()[t]},n.prototype.getCount=function(){return this.getChildren().length},n.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},n.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},n.prototype.findAll=function(t){var r=[];return re(this.getChildren(),function(i){t(i)&&r.push(i),i.isGroup()&&(r=r.concat(i.findAll(t)))}),r},n.prototype.find=function(t){var r=null;return re(this.getChildren(),function(i){if(t(i)?r=i:i.isGroup()&&(r=i.find(t)),r)return!1}),r},n.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},n.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},n.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},n}(XE),cu=0,Dc=0,Lc=0,bd=0,Ja=0,xd=0,Bc=typeof performance=="object"&&performance.now?performance:Date,qE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ZE(){return Ja||(qE(cB),Ja=Bc.now()+xd)}function cB(){Ja=0}function ev(){this._call=this._time=this._next=null}function KE(e,n,t){var r=new ev;return r.restart(e,n,t),r}function $E(){Ja=(bd=Bc.now())+xd,cu=Dc=0;try{(function(){ZE(),++cu;for(var e,n=yd;n;)(e=Ja-n._time)>=0&&n._call.call(null,e),n=n._next;--cu})()}finally{cu=0,function(){for(var e,n,t=yd,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yd=n);Pc=e,tv(r)}(),Ja=0}}function lB(){var e=Bc.now(),n=e-bd;n>1e3&&(xd-=n,bd=e)}function tv(e){cu||(Dc&&(Dc=clearTimeout(Dc)),e-Ja>24?(e<1/0&&(Dc=setTimeout($E,e-Bc.now()-xd)),Lc&&(Lc=clearInterval(Lc))):(Lc||(bd=Bc.now(),Lc=setInterval(lB,1e3)),cu=1,qE($E)))}function nv(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function QE(e,n){var t=Object.create(e.prototype);for(var r in n)t[r]=n[r];return t}function Rc(){}ev.prototype=KE.prototype={constructor:ev,restart:function(e,n,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?ZE():+t)+(n==null?0:+n),this._next||Pc===this||(Pc?Pc._next=this:yd=this,Pc=this),this._call=e,this._time=t,tv()},stop:function(){this._call&&(this._call=null,this._time=1/0,tv())}};var jc=.7,wd=1/jc,lu="\\s*([+-]?\\d+)\\s*",zc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",to="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hB=/^#([0-9a-f]{3,8})$/,dB=new RegExp(`^rgb\\(${lu},${lu},${lu}\\)$`),fB=new RegExp(`^rgb\\(${to},${to},${to}\\)$`),pB=new RegExp(`^rgba\\(${lu},${lu},${lu},${zc}\\)$`),gB=new RegExp(`^rgba\\(${to},${to},${to},${zc}\\)$`),vB=new RegExp(`^hsl\\(${zc},${to},${to}\\)$`),mB=new RegExp(`^hsla\\(${zc},${to},${to},${zc}\\)$`),JE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function eS(){return this.rgb().formatHex()}function tS(){return this.rgb().formatRgb()}function Fc(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=hB.exec(e))?(t=n[1].length,n=parseInt(n[1],16),t===6?nS(n):t===3?new Rr(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):t===8?Ed(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):t===4?Ed(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=dB.exec(e))?new Rr(n[1],n[2],n[3],1):(n=fB.exec(e))?new Rr(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=pB.exec(e))?Ed(n[1],n[2],n[3],n[4]):(n=gB.exec(e))?Ed(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=vB.exec(e))?oS(n[1],n[2]/100,n[3]/100,1):(n=mB.exec(e))?oS(n[1],n[2]/100,n[3]/100,n[4]):JE.hasOwnProperty(e)?nS(JE[e]):e==="transparent"?new Rr(NaN,NaN,NaN,0):null}function nS(e){return new Rr(e>>16&255,e>>8&255,255&e,1)}function Ed(e,n,t,r){return r<=0&&(e=n=t=NaN),new Rr(e,n,t,r)}function rv(e,n,t,r){return arguments.length===1?function(i){return i instanceof Rc||(i=Fc(i)),i?new Rr((i=i.rgb()).r,i.g,i.b,i.opacity):new Rr}(e):new Rr(e,n,t,r==null?1:r)}function Rr(e,n,t,r){this.r=+e,this.g=+n,this.b=+t,this.opacity=+r}function rS(){return`#${ts(this.r)}${ts(this.g)}${ts(this.b)}`}function iS(){const e=Sd(this.opacity);return`${e===1?"rgb(":"rgba("}${es(this.r)}, ${es(this.g)}, ${es(this.b)}${e===1?")":`, ${e})`}`}function Sd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function es(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ts(e){return((e=es(e))<16?"0":"")+e.toString(16)}function oS(e,n,t,r){return r<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new ki(e,n,t,r)}function aS(e){if(e instanceof ki)return new ki(e.h,e.s,e.l,e.opacity);if(e instanceof Rc||(e=Fc(e)),!e)return new ki;if(e instanceof ki)return e;var n=(e=e.rgb()).r/255,t=e.g/255,r=e.b/255,i=Math.min(n,t,r),o=Math.max(n,t,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=n===o?(t-r)/s+6*(t<r):t===o?(r-n)/s+2:(n-t)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new ki(a,s,u,e.opacity)}function ki(e,n,t,r){this.h=+e,this.s=+n,this.l=+t,this.opacity=+r}function sS(e){return(e=(e||0)%360)<0?e+360:e}function Md(e){return Math.max(0,Math.min(1,e||0))}function iv(e,n,t){return 255*(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)}nv(Rc,Fc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:eS,formatHex:eS,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return aS(this).formatHsl()},formatRgb:tS,toString:tS}),nv(Rr,rv,QE(Rc,{brighter(e){return e=e==null?wd:Math.pow(wd,e),new Rr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?jc:Math.pow(jc,e),new Rr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rr(es(this.r),es(this.g),es(this.b),Sd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rS,formatHex:rS,formatHex8:function(){return`#${ts(this.r)}${ts(this.g)}${ts(this.b)}${ts(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:iS,toString:iS})),nv(ki,function(e,n,t,r){return arguments.length===1?aS(e):new ki(e,n,t,r==null?1:r)},QE(Rc,{brighter(e){return e=e==null?wd:Math.pow(wd,e),new ki(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?jc:Math.pow(jc,e),new ki(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*n,i=2*t-r;return new Rr(iv(e>=240?e-240:e+120,i,r),iv(e,i,r),iv(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ki(sS(this.h),Md(this.s),Md(this.l),Sd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sd(this.opacity);return`${e===1?"hsl(":"hsla("}${sS(this.h)}, ${100*Md(this.s)}%, ${100*Md(this.l)}%${e===1?")":`, ${e})`}`}}));const ov=e=>()=>e;function yB(e){return(e=+e)==1?uS:function(n,t){return t-n?function(r,i,o){return r=Math.pow(r,o),i=Math.pow(i,o)-r,o=1/o,function(a){return Math.pow(r+a*i,o)}}(n,t,e):ov(isNaN(n)?t:n)}}function uS(e,n){var t=n-e;return t?function(r,i){return function(o){return r+o*i}}(e,t):ov(isNaN(e)?n:e)}const cS=function e(n){var t=yB(n);function r(i,o){var a=t((i=rv(i)).r,(o=rv(o)).r),s=t(i.g,o.g),u=t(i.b,o.b),c=uS(i.opacity,o.opacity);return function(l){return i.r=a(l),i.g=s(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=e,r}(1);function lS(e,n){n||(n=[]);var t,r=e?Math.min(n.length,e.length):0,i=n.slice();return function(o){for(t=0;t<r;++t)i[t]=e[t]*(1-o)+n[t]*o;return i}}function hS(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bB(e,n){return(hS(n)?lS:dS)(e,n)}function dS(e,n){var t,r=n?n.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(t=0;t<i;++t)o[t]=_d(e[t],n[t]);for(;t<r;++t)a[t]=n[t];return function(s){for(t=0;t<i;++t)a[t]=o[t](s);return a}}function xB(e,n){var t=new Date;return e=+e,n=+n,function(r){return t.setTime(e*(1-r)+n*r),t}}function av(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function wB(e,n){var t,r={},i={};for(t in e!==null&&typeof e=="object"||(e={}),n!==null&&typeof n=="object"||(n={}),n)t in e?r[t]=_d(e[t],n[t]):i[t]=n[t];return function(o){for(t in r)i[t]=r[t](o);return i}}var sv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uv=new RegExp(sv.source,"g");function EB(e,n){var t,r,i,o=sv.lastIndex=uv.lastIndex=0,a=-1,s=[],u=[];for(e+="",n+="";(t=sv.exec(e))&&(r=uv.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(t=t[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:av(t,r)})),o=uv.lastIndex;return o<n.length&&(i=n.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(c){return function(l){return c(l)+""}}(u[0].x):function(c){return function(){return c}}(n):(n=u.length,function(c){for(var l,h=0;h<n;++h)s[(l=u[h]).i]=l.x(c);return s.join("")})}function _d(e,n){var t,r=typeof n;return n==null||r==="boolean"?ov(n):(r==="number"?av:r==="string"?(t=Fc(n))?(n=t,cS):EB:n instanceof Fc?cS:n instanceof Date?xB:hS(n)?lS:Array.isArray(n)?dS:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?wB:av)(e,n)}function fS(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function pS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var SB=function e(n){function t(r){return Math.pow(r,n)}return n=+n,t.exponent=e,t}(3),MB=function e(n){function t(r){return 1-Math.pow(1-r,n)}return n=+n,t.exponent=e,t}(3),gS=function e(n){function t(r){return((r*=2)<=1?Math.pow(r,n):2-Math.pow(2-r,n))/2}return n=+n,t.exponent=e,t}(3),vS=Math.PI,mS=vS/2;function yS(e){return(1-Math.cos(vS*e))/2}function ca(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function bS(e){return((e*=2)<=1?ca(1-e):2-ca(e-1))/2}function xS(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var _B=4/11,kB=6/11,CB=8/11,AB=9/11,IB=10/11,TB=21/22,kd=7.5625;function Gc(e){return(e=+e)<_B?kd*e*e:e<CB?kd*(e-=kB)*e+.75:e<IB?kd*(e-=AB)*e+.9375:kd*(e-=TB)*e+.984375}var cv=1.70158,OB=function e(n){function t(r){return(r=+r)*r*(n*(r-1)+r)}return n=+n,t.overshoot=e,t}(cv),NB=function e(n){function t(r){return--r*r*((r+1)*n+r)+1}return n=+n,t.overshoot=e,t}(cv),wS=function e(n){function t(r){return((r*=2)<1?r*r*((n+1)*r-n):(r-=2)*r*((n+1)*r+n)+2)/2}return n=+n,t.overshoot=e,t}(cv),hu=2*Math.PI,PB=function e(n,t){var r=Math.asin(1/(n=Math.max(1,n)))*(t/=hu);function i(o){return n*ca(- --o)*Math.sin((r-o)/t)}return i.amplitude=function(o){return e(o,t*hu)},i.period=function(o){return e(n,o)},i}(1,.3),ES=function e(n,t){var r=Math.asin(1/(n=Math.max(1,n)))*(t/=hu);function i(o){return 1-n*ca(o=+o)*Math.sin((o+r)/t)}return i.amplitude=function(o){return e(o,t*hu)},i.period=function(o){return e(n,o)},i}(1,.3),DB=function e(n,t){var r=Math.asin(1/(n=Math.max(1,n)))*(t/=hu);function i(o){return((o=2*o-1)<0?n*ca(-o)*Math.sin((r-o)/t):2-n*ca(o)*Math.sin((r+o)/t))/2}return i.amplitude=function(o){return e(o,t*hu)},i.period=function(o){return e(n,o)},i}(1,.3);const LB=Object.freeze(Object.defineProperty({__proto__:null,easeBack:wS,easeBackIn:OB,easeBackInOut:wS,easeBackOut:NB,easeBounce:Gc,easeBounceIn:function(e){return 1-Gc(1-e)},easeBounceInOut:function(e){return((e*=2)<=1?1-Gc(1-e):Gc(e-1)+1)/2},easeBounceOut:Gc,easeCircle:xS,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleInOut:xS,easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCubic:pS,easeCubicIn:function(e){return e*e*e},easeCubicInOut:pS,easeCubicOut:function(e){return--e*e*e+1},easeElastic:ES,easeElasticIn:PB,easeElasticInOut:DB,easeElasticOut:ES,easeExp:bS,easeExpIn:function(e){return ca(1-+e)},easeExpInOut:bS,easeExpOut:function(e){return 1-ca(e)},easeLinear:function(e){return+e},easePoly:gS,easePolyIn:SB,easePolyInOut:gS,easePolyOut:MB,easeQuad:fS,easeQuadIn:function(e){return e*e},easeQuadInOut:fS,easeQuadOut:function(e){return e*(2-e)},easeSin:yS,easeSinIn:function(e){return+e==1?1:1-Math.cos(e*mS)},easeSinInOut:yS,easeSinOut:function(e){return Math.sin(e*mS)}},Symbol.toStringTag,{value:"Module"}));var BB={},SS=[1,0,0,0,1,0,0,0,1];function RB(e,n,t){var r,i=n.startTime;if(t<i+n.delay||n._paused)return!1;var o,a=n.duration,s=n.easing,u=BB[(o=s).toLowerCase()]||LB[o];if(t=t-i-n.delay,n.repeat)r=u(r=t%a/a);else{if(!((r=t/a)<1))return n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs),!0;r=u(r)}if(n.onFrame){var c=n.onFrame(r);e.attr(c)}else(function(l,h,d){var f={},p=h.fromAttrs,g=h.toAttrs;if(!l.destroyed){var v,m;for(var y in g)if(!oa(p[y],g[y]))if(y==="path"){var b=g[y],x=p[y];b.length>x.length?(b=uu(g[y]),x=uu(p[y]),x=PE(x,b),x=Z0(x,b),h.fromAttrs.path=x,h.toAttrs.path=b):h.pathFormatted||(b=uu(g[y]),x=uu(p[y]),x=Z0(x,b),h.fromAttrs.path=x,h.toAttrs.path=b,h.pathFormatted=!0),f[y]=[];for(var w=0;w<b.length;w++){for(var E=b[w],S=x[w],M=[],k=0;k<E.length;k++)Ue(E[k])&&S&&Ue(S[k])?(v=_d(S[k],E[k]),M.push(v(d))):M.push(E[k]);f[y].push(M)}}else if(y==="matrix"){var _=bB(p[y]||SS,g[y]||SS)(d);f[y]=_}else["fill","stroke","fillStyle","strokeStyle"].includes(y)&&(m=g[y],/^[r,R,L,l]{1}[\s]*\(/.test(m))?f[y]=g[y]:gn(g[y])||(v=_d(p[y],g[y]),f[y]=v(d));l.attr(f)}})(e,n,r);return!1}var jB=function(){function e(n){this.animators=[],this.current=0,this.timer=null,this.canvas=n}return e.prototype.initTimer=function(){var n,t,r,i=this;this.timer=KE(function(o){if(i.current=o,i.animators.length>0){for(var a=i.animators.length-1;a>=0;a--)if((n=i.animators[a]).destroyed)i.removeAnimator(a);else{if(!n.isAnimatePaused())for(var s=(t=n.get("animations")).length-1;s>=0;s--)r=t[s],RB(n,r,o)&&(t.splice(s,1),r.callback&&r.callback());t.length===0&&i.removeAnimator(a)}i.canvas.get("autoDraw")||i.canvas.draw()}})},e.prototype.addAnimator=function(n){this.animators.push(n)},e.prototype.removeAnimator=function(n){this.animators.splice(n,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(n){n===void 0&&(n=!0),this.animators.forEach(function(t){t.stopAnimate(n)}),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),MS=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function _S(e,n,t){t.name=n,t.target=e,t.currentTarget=e,t.delegateTarget=e,e.emit(n,t)}function zB(e,n,t){if(t.bubbles){var r=void 0,i=!1;if(n==="mouseenter"?(r=t.fromShape,i=!0):n==="mouseleave"&&(i=!0,r=t.toShape),e.isCanvas()&&i)return;if(r&&RE(e,r))return void(t.bubbles=!1);t.name=n,t.currentTarget=e,t.delegateTarget=e,e.emit(n,t)}}var FB=function(){function e(n){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var i=r.type;t._triggerEvent(i,r)},this._onDocumentMove=function(r){if(t.canvas.get("el")!==r.target&&(t.dragging||t.currentShape)){var i=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,i,t.draggingShape)}},this._onDocumentMouseUp=function(r){if(t.canvas.get("el")!==r.target&&t.dragging){var i=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,i,null),t._emitEvent("dragend",r,i,t.draggingShape),t._afterDrag(t.draggingShape,i,r)}},this.canvas=n.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var n=this,t=this.canvas.get("el");re(MS,function(r){t.addEventListener(r,n._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var n=this,t=this.canvas.get("el");re(MS,function(r){t.removeEventListener(r,n._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(n,t,r,i,o,a){var s=new K0(n,t);return s.fromShape=o,s.toShape=a,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(i),s},e.prototype._getShape=function(n,t){return this.canvas.getShape(n.x,n.y,t)},e.prototype._getPointInfo=function(n){var t=this.canvas,r=t.getClientByEvent(n),i=t.getPointByEvent(n);return{x:i.x,y:i.y,clientX:r.x,clientY:r.y}},e.prototype._triggerEvent=function(n,t){var r=this._getPointInfo(t),i=this._getShape(r,t),o=this["_on"+n],a=!1;if(o)o.call(this,r,i,t);else{var s=this.currentShape;n==="mouseenter"||n==="dragenter"||n==="mouseover"?(this._emitEvent(n,t,r,null,null,i),i&&this._emitEvent(n,t,r,i,null,i),n==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):n==="mouseleave"||n==="dragleave"||n==="mouseout"?(a=!0,s&&this._emitEvent(n,t,r,s,s,null),this._emitEvent(n,t,r,null,s,null),n==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(n,t,r,i,null,null)}if(a||(this.currentShape=i),i&&!i.get("destroyed")){var u=this.canvas;u.get("el").style.cursor=i.attr("cursor")||u.get("cursor")}},e.prototype._onmousedown=function(n,t,r){r.button===0&&(this.mousedownShape=t,this.mousedownPoint=n,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,n,t,null,null)},e.prototype._emitMouseoverEvents=function(n,t,r,i){var o=this.canvas.get("el");r!==i&&(r&&(this._emitEvent("mouseout",n,t,r,r,i),this._emitEvent("mouseleave",n,t,r,r,i),i&&!i.get("destroyed")||(o.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",n,t,i,r,i),this._emitEvent("mouseenter",n,t,i,r,i)))},e.prototype._emitDragoverEvents=function(n,t,r,i,o){i?(i!==r&&(r&&this._emitEvent("dragleave",n,t,r,r,i),this._emitEvent("dragenter",n,t,i,r,i)),o||this._emitEvent("dragover",n,t,i)):r&&this._emitEvent("dragleave",n,t,r,r,i),o&&this._emitEvent("dragover",n,t,i)},e.prototype._afterDrag=function(n,t,r){n&&(n.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(t,r);i!==n&&this._emitMouseoverEvents(r,t,n,i),this.currentShape=i},e.prototype._onmouseup=function(n,t,r){if(r.button===0){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",r,n,t),this._emitEvent("dragend",r,n,i),this._afterDrag(i,n,r)):(this._emitEvent("mouseup",r,n,t),t===this.mousedownShape&&this._emitEvent("click",r,n,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(n,t,r){r.preventDefault();var i=this.currentShape;this._emitDragoverEvents(r,n,i,t,!0)},e.prototype._onmousemove=function(n,t,r){var i=this.canvas,o=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(r,n,o,t,!1),this._emitEvent("drag",r,n,a);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,c=r.timeStamp-this.mousedownTimeStamp,l=s.clientX-n.clientX,h=s.clientY-n.clientY;c>120||l*l+h*h>40?u&&u.get("draggable")?((a=this.mousedownShape).set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",r,n,a),this.mousedownShape=null,this.mousedownPoint=null):!u&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,n,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,n,o,t),this._emitEvent("mousemove",r,n,t)):(this._emitMouseoverEvents(r,n,o,t),this._emitEvent("mousemove",r,n,t))}else this._emitMouseoverEvents(r,n,o,t),this._emitEvent("mousemove",r,n,t)}},e.prototype._emitEvent=function(n,t,r,i,o,a){var s=this._getEventObj(n,t,r,i,o,a);if(i){s.shape=i,_S(i,n,s);for(var u=i.getParent();u;)u.emitDelegation(n,s),s.propagationStopped||zB(u,n,s),s.propagationPath.push(u),u=u.getParent()}else _S(this.canvas,n,s)},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),kS=FE(),GB=kS&&kS.name==="firefox",CS=function(e){function n(t){var r=e.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return At(n,e),n.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},n.prototype.initContainer=function(){var t=this.get("container");he(t)&&(t=document.getElementById(t),this.set("container",t))},n.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},n.prototype.initEvents=function(){var t=new FB({canvas:this});t.init(),this.set("eventController",t)},n.prototype.initTimeline=function(){var t=new jB(this);this.set("timeline",t)},n.prototype.setDOMSize=function(t,r){var i=this.get("el");BE&&(i.style.width=t+"px",i.style.height=r+"px")},n.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},n.prototype.getRenderer=function(){return this.get("renderer")},n.prototype.getCursor=function(){return this.get("cursor")},n.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");BE&&r&&(r.style.cursor=t)},n.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(GB&&!ht(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!ht(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var r=this.getClientByEvent(t),i=r.x,o=r.y;return this.getPointByClient(i,o)},n.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(r=t.type==="touchend"?t.changedTouches[0]:t.touches[0]),{x:r.clientX,y:r.clientY}},n.prototype.getPointByClient=function(t,r){var i=this.get("el").getBoundingClientRect();return{x:t-i.left,y:r-i.top}},n.prototype.getClientByPoint=function(t,r){var i=this.get("el").getBoundingClientRect();return{x:t+i.left,y:r+i.top}},n.prototype.draw=function(){},n.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},n.prototype.clearEvents=function(){this.get("eventController").destroy()},n.prototype.isCanvas=function(){return!0},n.prototype.getParent=function(){return null},n.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},n}(HE),AS=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.isGroup=function(){return!0},n.prototype.isEntityGroup=function(){return!1},n.prototype.clone=function(){for(var t=e.prototype.clone.call(this),r=this.getChildren(),i=0;i<r.length;i++){var o=r[i];t.add(o.clone())}return t},n}(HE),IS=function(e){function n(t){return e.call(this,t)||this}return At(n,e),n.prototype._isInBBox=function(t,r){var i=this.getBBox();return i.minX<=t&&i.maxX>=t&&i.minY<=r&&i.maxY>=r},n.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},n.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},n.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},n.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},n.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),i=t.minX,o=t.minY,a=t.maxX,s=t.maxY;if(r){var u=Qa(r,[t.minX,t.minY]),c=Qa(r,[t.maxX,t.minY]),l=Qa(r,[t.minX,t.maxY]),h=Qa(r,[t.maxX,t.maxY]);i=Math.min(u[0],c[0],l[0],h[0]),a=Math.max(u[0],c[0],l[0],h[0]),o=Math.min(u[1],c[1],l[1],h[1]),s=Math.max(u[1],c[1],l[1],h[1])}var d=this.attrs;if(d.shadowColor){var f=d.shadowBlur,p=f===void 0?0:f,g=d.shadowOffsetX,v=g===void 0?0:g,m=d.shadowOffsetY,y=m===void 0?0:m,b=i-p+v,x=a+p+v,w=o-p+y,E=s+p+y;i=Math.min(i,b),a=Math.max(a,x),o=Math.min(o,w),s=Math.max(s,E)}return{x:i,y:o,minX:i,minY:o,maxX:a,maxY:s,width:a-i,height:s-o}},n.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},n.prototype.isClipShape=function(){return this.get("isClipShape")},n.prototype.isInShape=function(t,r){return!1},n.prototype.isOnlyHitBox=function(){return!1},n.prototype.isHit=function(t,r){var i=this.get("startArrowShape"),o=this.get("endArrowShape"),a=[t,r,1],s=(a=this.invertFromMatrix(a))[0],u=a[1],c=this._isInBBox(s,u);return this.isOnlyHitBox()?c:!!(c&&!this.isClipped(s,u)&&(this.isInShape(s,u)||i&&i.isHit(s,u)||o&&o.isHit(s,u)))},n}(XE),TS=new Map;function no(e,n){TS.set(e,n)}function OS(e){return TS.get(e)}function NS(e){var n=e.attr();return{x:n.x,y:n.y,width:n.width,height:n.height}}function PS(e){var n=e.attr(),t=n.x,r=n.y,i=n.r;return{x:t-i,y:r-i,width:2*i,height:2*i}}function Zr(e,n,t,r){var i=e-t,o=n-r;return Math.sqrt(i*i+o*o)}function Cd(e,n){return Math.abs(e-n)<.001}function Yc(e,n){var t=Wi(e),r=Wi(n);return{x:t,y:r,width:Ui(e)-t,height:Ui(n)-r}}function DS(e){return(e+2*Math.PI)%(2*Math.PI)}const wr={box:function(e,n,t,r){return Yc([e,t],[n,r])},length:function(e,n,t,r){return Zr(e,n,t,r)},pointAt:function(e,n,t,r,i){return{x:(1-i)*e+i*t,y:(1-i)*n+i*r}},pointDistance:function(e,n,t,r,i,o){var a=(t-e)*(i-e)+(r-n)*(o-n);return a<0?Zr(e,n,i,o):a>(t-e)*(t-e)+(r-n)*(r-n)?Zr(t,r,i,o):this.pointToLine(e,n,t,r,i,o)},pointToLine:function(e,n,t,r,i,o){var a=[t-e,r-n];if(td(a,[0,0]))return Math.sqrt((i-e)*(i-e)+(o-n)*(o-n));var s=[-a[1],a[0]];Lr(s,s);var u=[i-e,o-n];return Math.abs(ed(u,s))},tangentAngle:function(e,n,t,r){return Math.atan2(r-n,t-e)}};function LS(e,n,t,r,i,o){var a,s=1/0,u=[t,r],c=20;o&&o>200&&(c=o/10);for(var l=1/c,h=l/10,d=0;d<=c;d++){var f=d*l,p=[i.apply(null,e.concat([f])),i.apply(null,n.concat([f]))];(y=Zr(u[0],u[1],p[0],p[1]))<s&&(a=f,s=y)}if(a===0)return{x:e[0],y:n[0]};if(a===1){var g=e.length;return{x:e[g-1],y:n[g-1]}}for(s=1/0,d=0;d<32&&!(h<1e-4);d++){var v=a-h,m=a+h,y=(p=[i.apply(null,e.concat([v])),i.apply(null,n.concat([v]))],Zr(u[0],u[1],p[0],p[1]));if(v>=0&&y<s)a=v,s=y;else{var b=[i.apply(null,e.concat([m])),i.apply(null,n.concat([m]))],x=Zr(u[0],u[1],b[0],b[1]);m<=1&&x<s?(a=m,s=x):h*=.5}}return{x:i.apply(null,e.concat([a])),y:i.apply(null,n.concat([a]))}}function la(e,n,t,r){var i=1-r;return i*i*e+2*r*i*n+r*r*t}function BS(e,n,t){var r=e+t-2*n;if(Cd(r,0))return[.5];var i=(e-n)/r;return i<=1&&i>=0?[i]:[]}function RS(e,n,t,r){return 2*(1-r)*(n-e)+2*r*(t-n)}function jS(e,n,t,r,i,o,a){var s=la(e,t,i,a),u=la(n,r,o,a),c=wr.pointAt(e,n,t,r,a),l=wr.pointAt(t,r,i,o,a);return[[e,n,c.x,c.y,s,u],[s,u,l.x,l.y,i,o]]}function lv(e,n,t,r,i,o,a){if(a===0)return(Zr(e,n,t,r)+Zr(t,r,i,o)+Zr(e,n,i,o))/2;var s=jS(e,n,t,r,i,o,.5),u=s[0],c=s[1];return u.push(a-1),c.push(a-1),lv.apply(null,u)+lv.apply(null,c)}const zS={box:function(e,n,t,r,i,o){var a=BS(e,t,i)[0],s=BS(n,r,o)[0],u=[e,i],c=[n,o];return a!==void 0&&u.push(la(e,t,i,a)),s!==void 0&&c.push(la(n,r,o,s)),Yc(u,c)},length:function(e,n,t,r,i,o){return lv(e,n,t,r,i,o,3)},nearestPoint:function(e,n,t,r,i,o,a,s){return LS([e,t,i],[n,r,o],a,s,la)},pointDistance:function(e,n,t,r,i,o,a,s){var u=this.nearestPoint(e,n,t,r,i,o,a,s);return Zr(u.x,u.y,a,s)},interpolationAt:la,pointAt:function(e,n,t,r,i,o,a){return{x:la(e,t,i,a),y:la(n,r,o,a)}},divide:function(e,n,t,r,i,o,a){return jS(e,n,t,r,i,o,a)},tangentAngle:function(e,n,t,r,i,o,a){var s=RS(e,t,i,a),u=RS(n,r,o,a);return DS(Math.atan2(u,s))}};function ha(e,n,t,r,i){var o=1-i;return o*o*o*e+3*n*i*o*o+3*t*i*i*o+r*i*i*i}function FS(e,n,t,r,i){var o=1-i;return 3*(o*o*(n-e)+2*o*i*(t-n)+i*i*(r-t))}function hv(e,n,t,r){var i,o,a,s=-3*e+9*n-9*t+3*r,u=6*e-12*n+6*t,c=3*n-3*e,l=[];if(Cd(s,0))Cd(u,0)||(i=-c/u)>=0&&i<=1&&l.push(i);else{var h=u*u-4*s*c;Cd(h,0)?l.push(-u/(2*s)):h>0&&(o=(-u-(a=Math.sqrt(h)))/(2*s),(i=(-u+a)/(2*s))>=0&&i<=1&&l.push(i),o>=0&&o<=1&&l.push(o))}return l}function GS(e,n,t,r,i,o,a,s,u){var c=ha(e,t,i,a,u),l=ha(n,r,o,s,u),h=wr.pointAt(e,n,t,r,u),d=wr.pointAt(t,r,i,o,u),f=wr.pointAt(i,o,a,s,u),p=wr.pointAt(h.x,h.y,d.x,d.y,u),g=wr.pointAt(d.x,d.y,f.x,f.y,u);return[[e,n,h.x,h.y,p.x,p.y,c,l],[c,l,g.x,g.y,f.x,f.y,a,s]]}function dv(e,n,t,r,i,o,a,s,u){if(u===0)return function(d,f){for(var p=0,g=d.length,v=0;v<g;v++)p+=Zr(d[v],f[v],d[(v+1)%g],f[(v+1)%g]);return p/2}([e,t,i,a],[n,r,o,s]);var c=GS(e,n,t,r,i,o,a,s,.5),l=c[0],h=c[1];return l.push(u-1),h.push(u-1),dv.apply(null,l)+dv.apply(null,h)}const Xc={extrema:hv,box:function(e,n,t,r,i,o,a,s){for(var u=[e,a],c=[n,s],l=hv(e,t,i,a),h=hv(n,r,o,s),d=0;d<l.length;d++)u.push(ha(e,t,i,a,l[d]));for(d=0;d<h.length;d++)c.push(ha(n,r,o,s,h[d]));return Yc(u,c)},length:function(e,n,t,r,i,o,a,s){return dv(e,n,t,r,i,o,a,s,3)},nearestPoint:function(e,n,t,r,i,o,a,s,u,c,l){return LS([e,t,i,a],[n,r,o,s],u,c,ha,l)},pointDistance:function(e,n,t,r,i,o,a,s,u,c,l){var h=this.nearestPoint(e,n,t,r,i,o,a,s,u,c,l);return Zr(h.x,h.y,u,c)},interpolationAt:ha,pointAt:function(e,n,t,r,i,o,a,s,u){return{x:ha(e,t,i,a,u),y:ha(n,r,o,s,u)}},divide:function(e,n,t,r,i,o,a,s,u){return GS(e,n,t,r,i,o,a,s,u)},tangentAngle:function(e,n,t,r,i,o,a,s,u){var c=FS(e,t,i,a,u),l=FS(n,r,o,s,u);return DS(Math.atan2(l,c))}};function YB(e,n,t,r,i,o){return t*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+e}function XB(e,n,t,r,i,o){return t*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+n}const UB=function(e,n,t,r,i,o,a){for(var s=function(x,w,E){return Math.atan(-w/x*Math.tan(E))}(t,r,i),u=1/0,c=-1/0,l=[o,a],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var d=s+h;o<a?o<d&&d<a&&l.push(d):a<d&&d<o&&l.push(d)}for(h=0;h<l.length;h++){var f=YB(e,0,t,r,i,l[h]);f<u&&(u=f),f>c&&(c=f)}var p=function(x,w,E){return Math.atan(w/(x*Math.tan(E)))}(t,r,i),g=1/0,v=-1/0,m=[o,a];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var y=p+h;o<a?o<y&&y<a&&m.push(y):a<y&&y<o&&m.push(y)}for(h=0;h<m.length;h++){var b=XB(0,n,t,r,i,m[h]);b<g&&(g=b),b>v&&(v=b)}return{x:u,y:g,width:c-u,height:v-g}},YS=function(e){return function(n){if(n.length<2)return 0;for(var t=0,r=0;r<n.length-1;r++){var i=n[r],o=n[r+1];t+=Zr(i[0],i[1],o[0],o[1])}return t}(e)};function XS(e,n){return e&&n?{minX:Math.min(e.minX,n.minX),minY:Math.min(e.minY,n.minY),maxX:Math.max(e.maxX,n.maxX),maxY:Math.max(e.maxY,n.maxY)}:e||n}function fv(e,n){var t=e.get("startArrowShape"),r=e.get("endArrowShape");return t&&(n=XS(n,t.getCanvasBBox())),r&&(n=XS(n,r.getCanvasBBox())),n}var pv=null;function US(){if(!pv){var e=document.createElement("canvas");e.width=1,e.height=1,pv=e.getContext("2d")}return pv}function WS(e,n,t){var r=1;if(he(e)&&(r=e.split(`
`).length),r>1){var i=function(o,a){return a?a-o:.14*o}(n,t);return n*r+i*(r-1)}return n}function VS(e){var n=e.fontSize,t=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,n+"px",t].join(" ").trim()}var WB=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,VB=/[^\s\,]+/gi;function gv(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!n,i=[],o=0,a=e.length;o<a;o+=2)i.push([e[o],e[o+1]]);var s,u,c,l=function(f,p,g,v){var m,y,b,x,w,E,S,M=[],k=!!v;if(k){b=v[0],x=v[1];for(var _=0,C=f.length;_<C;_+=1)b=aa([0,0],b,A=f[_]),x=sa([0,0],x,A)}_=0;for(var T=f.length;_<T;_+=1){var A=f[_];if(_!==0||g)if(_!==T-1||g){m=f[[_?_-1:T-1,_-1][g?0:1]],y=f[g?(_+1)%T:_+1];var D=[0,0];D=bn(D=nd(D,y,m),D,p);var R=Jh(A,m),B=Jh(A,y),F=R+B;F!==0&&(R/=F,B/=F);var N=bn([0,0],D,-R),L=bn([0,0],D,B);E=hn([0,0],A,N),w=aa([0,0],w=hn([0,0],A,L),sa([0,0],y,A)),w=sa([0,0],w,aa([0,0],y,A)),E=aa([0,0],E=hn([0,0],A,N=bn([0,0],N=nd([0,0],w,A),-R/B)),sa([0,0],m,A)),E=sa([0,0],E,aa([0,0],m,A)),w=hn([0,0],A,L=bn([0,0],L=nd([0,0],A,E),B/R)),k&&(E=aa([0,0],E=sa([0,0],E,b),x),w=aa([0,0],w=sa([0,0],w,b),x)),M.push(S),M.push(E),S=w}else E=A,M.push(S),M.push(E);else S=A}return g&&M.push(M.shift()),M}(i,.4,r,t),h=i.length,d=[];for(o=0;o<h-1;o+=1)s=l[2*o],u=l[2*o+1],c=i[o+1],d.push(["C",s[0],s[1],u[0],u[1],c[0],c[1]]);return r&&(s=l[h],u=l[h+1],c=i[0],d.push(["C",s[0],s[1],u[0],u[1],c[0],c[1]])),d}var Uc=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,HB=new RegExp("([a-z])["+Uc+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Uc+"]*,?["+Uc+"]*)+)","ig"),qB=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Uc+"]*,?["+Uc+"]*","ig");function Wc(e){if(!e)return null;if(at(e))return e;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(e).replace(HB,function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(qB,function(u,c){c&&a.push(+c)}),s==="m"&&a.length>2&&(t.push([i].concat(a.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&a.length===1&&t.push([i,a[0]]),s==="r")t.push([i].concat(a));else for(;a.length>=n[s]&&(t.push([i].concat(a.splice(0,n[s]))),n[s]););return""}),t}var ZB=/[a-z]/;function HS(e,n){return[n[0]+(n[0]-e[0]),n[1]+(n[1]-e[1])]}function qS(e){var n=Wc(e);if(!n||!n.length)return[["M",0,0]];for(var t=!1,r=0;r<n.length;r++){var i=n[r][0];if(ZB.test(i)||["V","H","T","S"].indexOf(i)>=0){t=!0;break}}if(!t)return n;var o=[],a=0,s=0,u=0,c=0,l=0,h=n[0];h[0]!=="M"&&h[0]!=="m"||(u=a=+h[1],c=s=+h[2],l++,o[0]=["M",a,s]),r=l;for(var d=n.length;r<d;r++){var f=n[r],p=o[r-1],g=[],v=(i=f[0]).toUpperCase();if(i!==v)switch(g[0]=v,v){case"A":g[1]=f[1],g[2]=f[2],g[3]=f[3],g[4]=f[4],g[5]=f[5],g[6]=+f[6]+a,g[7]=+f[7]+s;break;case"V":g[1]=+f[1]+s;break;case"H":g[1]=+f[1]+a;break;case"M":u=+f[1]+a,c=+f[2]+s,g[1]=u,g[2]=c;break;default:for(var m=1,y=f.length;m<y;m++)g[m]=+f[m]+(m%2?a:s)}else g=n[r];switch(v){case"Z":a=+u,s=+c;break;case"H":g=["L",a=g[1],s];break;case"V":g=["L",a,s=g[1]];break;case"T":a=g[1],s=g[2];var b=HS([p[1],p[2]],[p[3],p[4]]);g=["Q",b[0],b[1],a,s];break;case"S":a=g[g.length-2],s=g[g.length-1];var x=p.length,w=HS([p[x-4],p[x-3]],[p[x-2],p[x-1]]);g=["C",w[0],w[1],g[1],g[2],a,s];break;case"M":u=g[g.length-2],c=g[g.length-1];break;default:a=g[g.length-2],s=g[g.length-1]}o.push(g)}return o}function Ad(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function vv(e,n){return Ad(e)*Ad(n)?(e[0]*n[0]+e[1]*n[1])/(Ad(e)*Ad(n)):1}function ZS(e,n){return(e[0]*n[1]<e[1]*n[0]?-1:1)*Math.acos(vv(e,n))}function mv(e,n){return e[0]===n[0]&&e[1]===n[1]}function KB(e,n){var t=n[1],r=n[2],i=Xh(Uh(n[3]),2*Math.PI),o=n[4],a=n[5],s=e[0],u=e[1],c=n[6],l=n[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(u-l)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(u-l)/2,f=h*h/(t*t)+d*d/(r*r);f>1&&(t*=Math.sqrt(f),r*=Math.sqrt(f));var p=t*t*(d*d)+r*r*(h*h),g=p?Math.sqrt((t*t*(r*r)-p)/p):1;o===a&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*t*d/r:0,m=t?g*-r*h/t:0,y=(s+c)/2+Math.cos(i)*v-Math.sin(i)*m,b=(u+l)/2+Math.sin(i)*v+Math.cos(i)*m,x=[(h-v)/t,(d-m)/r],w=[(-1*h-v)/t,(-1*d-m)/r],E=ZS([1,0],x),S=ZS(x,w);return vv(x,w)<=-1&&(S=Math.PI),vv(x,w)>=1&&(S=0),a===0&&S>0&&(S-=2*Math.PI),a===1&&S<0&&(S+=2*Math.PI),{cx:y,cy:b,rx:mv(e,[c,l])?0:t,ry:mv(e,[c,l])?0:r,startAngle:E,endAngle:E+S,xRotation:i,arcFlag:o,sweepFlag:a}}function KS(e,n){return[n[0]+(n[0]-e[0]),n[1]+(n[1]-e[1])]}function $S(e){e=function(J){var q=J||[];return at(q)?q:he(q)?(re(q=q.match(WB),function(ie,Me){if((ie=ie.match(VB))[0].length>1){var me=ie[0].charAt(0);ie.splice(1,0,ie[0].substr(1)),ie[0]=me}re(ie,function(ke,yt){isNaN(ke)||(ie[yt]=+ke)}),q[Me]=ie}),q):void 0}(e);for(var n=[],t=null,r=null,i=null,o=0,a=e.length,s=0;s<a;s++){var u=e[s];r=e[s+1];var c=u[0],l={command:c,prePoint:t,params:u,startTangent:null,endTangent:null};switch(c){case"M":i=[u[1],u[2]],o=s;break;case"A":var h=KB(t,u);l.arcParams=h}if(c==="Z")t=i,r=e[o+1];else{var d=u.length;t=[u[d-2],u[d-1]]}r&&r[0]==="Z"&&(r=e[o],n[o]&&(n[o].prePoint=t)),l.currentPoint=t,n[o]&&mv(t,n[o].currentPoint)&&(n[o].prePoint=l.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;l.nextPoint=f;var p=l.prePoint;if(["L","H","V"].includes(c))l.startTangent=[p[0]-t[0],p[1]-t[1]],l.endTangent=[t[0]-p[0],t[1]-p[1]];else if(c==="Q"){var g=[u[1],u[2]];l.startTangent=[p[0]-g[0],p[1]-g[1]],l.endTangent=[t[0]-g[0],t[1]-g[1]]}else if(c==="T")g=KS((y=n[s-1]).currentPoint,p),y.command==="Q"?(l.command="Q",l.startTangent=[p[0]-g[0],p[1]-g[1]],l.endTangent=[t[0]-g[0],t[1]-g[1]]):(l.command="TL",l.startTangent=[p[0]-t[0],p[1]-t[1]],l.endTangent=[t[0]-p[0],t[1]-p[1]]);else if(c==="C"){var v=[u[1],u[2]],m=[u[3],u[4]];l.startTangent=[p[0]-v[0],p[1]-v[1]],l.endTangent=[t[0]-m[0],t[1]-m[1]],l.startTangent[0]===0&&l.startTangent[1]===0&&(l.startTangent=[v[0]-m[0],v[1]-m[1]]),l.endTangent[0]===0&&l.endTangent[1]===0&&(l.endTangent=[m[0]-v[0],m[1]-v[1]])}else if(c==="S"){var y;v=KS((y=n[s-1]).currentPoint,p),m=[u[1],u[2]],y.command==="C"?(l.command="C",l.startTangent=[p[0]-v[0],p[1]-v[1]],l.endTangent=[t[0]-m[0],t[1]-m[1]]):(l.command="SQ",l.startTangent=[p[0]-m[0],p[1]-m[1]],l.endTangent=[t[0]-m[0],t[1]-m[1]])}else if(c==="A"){var b=.001,x=l.arcParams||{},w=x.cx,E=w===void 0?0:w,S=x.cy,M=S===void 0?0:S,k=x.rx,_=k===void 0?0:k,C=x.ry,T=C===void 0?0:C,A=x.sweepFlag,D=A===void 0?0:A,R=x.startAngle,B=R===void 0?0:R,F=x.endAngle,N=F===void 0?0:F;D===0&&(b*=-1);var L=_*Math.cos(B-b)+E,z=T*Math.sin(B-b)+M;l.startTangent=[L-i[0],z-i[1]];var Z=_*Math.cos(B+N+b)+E,ne=T*Math.sin(B+N-b)+M;l.endTangent=[p[0]-Z,p[1]-ne]}n.push(l)}return n}function Id(e,n){var t=e.prePoint,r=e.currentPoint,i=e.nextPoint,o=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),u=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!u||Math.sin(u)===0||tw(u,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),l=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,l=l>Math.PI/2?Math.PI-l:l,{xExtra:Math.cos(u/2-c)*(n/2*(1/Math.sin(u/2)))-n/2||0,yExtra:Math.cos(l-u/2)*(n/2*(1/Math.sin(u/2)))-n/2||0}}no("rect",NS),no("image",NS),no("circle",PS),no("marker",PS),no("polyline",function(e){for(var n=e.attr().points,t=[],r=[],i=0;i<n.length;i++){var o=n[i];t.push(o[0]),r.push(o[1])}var a=Yc(t,r),s=a.x,u=a.y,c={minX:s,minY:u,maxX:s+a.width,maxY:u+a.height};return{x:(c=fv(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}),no("polygon",function(e){for(var n=e.attr().points,t=[],r=[],i=0;i<n.length;i++){var o=n[i];t.push(o[0]),r.push(o[1])}return Yc(t,r)}),no("text",function(e){var n=e.attr(),t=n.x,r=n.y,i=n.text,o=n.fontSize,a=n.lineHeight,s=n.font;s||(s=VS(n));var u,c=function(p,g){var v=US(),m=0;return ht(p)||p===""||(v.save(),v.font=g,he(p)&&p.includes(`
`)?re(p.split(`
`),function(y){var b=v.measureText(y).width;m<b&&(m=b)}):m=v.measureText(p).width,v.restore()),m}(i,s);if(c){var l=n.textAlign,h=n.textBaseline,d=WS(i,o,a),f={x:t,y:r-d};l&&(l==="end"||l==="right"?f.x-=c:l==="center"&&(f.x-=c/2)),h&&(h==="top"?f.y+=d:h==="middle"&&(f.y+=d/2)),u={x:f.x,y:f.y,width:c,height:d}}else u={x:t,y:r,width:0,height:0};return u}),no("path",function(e){var n=e.attr(),t=n.path,r=n.stroke?n.lineWidth:0,i=function(u,c){for(var l=[],h=[],d=[],f=0;f<u.length;f++){var p=(S=u[f]).currentPoint,g=S.params,v=S.prePoint,m=void 0;switch(S.command){case"Q":m=zS.box(v[0],v[1],g[1],g[2],g[3],g[4]);break;case"C":m=Xc.box(v[0],v[1],g[1],g[2],g[3],g[4],g[5],g[6]);break;case"A":var y=S.arcParams;m=UB(y.cx,y.cy,y.rx,y.ry,y.xRotation,y.startAngle,y.endAngle);break;default:l.push(p[0]),h.push(p[1])}m&&(S.box=m,l.push(m.x,m.x+m.width),h.push(m.y,m.y+m.height)),c&&(S.command==="L"||S.command==="M")&&S.prePoint&&S.nextPoint&&d.push(S)}l=l.filter(function(M){return!Number.isNaN(M)&&M!==1/0&&M!==-1/0}),h=h.filter(function(M){return!Number.isNaN(M)&&M!==1/0&&M!==-1/0});var b=Wi(l),x=Wi(h),w=Ui(l),E=Ui(h);if(d.length===0)return{x:b,y:x,width:w-b,height:E-x};for(f=0;f<d.length;f++){var S;(p=(S=d[f]).currentPoint)[0]===b?b-=Id(S,c).xExtra:p[0]===w&&(w+=Id(S,c).xExtra),p[1]===x?x-=Id(S,c).yExtra:p[1]===E&&(E+=Id(S,c).yExtra)}return{x:b,y:x,width:w-b,height:E-x}}(e.get("segments")||$S(t),r),o=i.x,a=i.y,s={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(s=fv(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}}),no("line",function(e){var n=e.attr(),t=n.x1,r=n.y1,i=n.x2,o=n.y2,a={minX:Math.min(t,i),maxX:Math.max(t,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=fv(e,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}}),no("ellipse",function(e){var n=e.attr(),t=n.x,r=n.y,i=n.rx,o=n.ry;return{x:t-i,y:r-o,width:2*i,height:2*o}});var $B=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.item=r.item,i.canvasX=r.canvasX,i.canvasY=r.canvasY,i.wheelDelta=r.wheelDelta,i.detail=r.detail,i}return At(n,e),n}(K0),yv=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},bv=function(e){if(at(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if(Ue(e))return[e,e,e,e];if(he(e)){var n=parseInt(e,10);return[n,n,n,n]}return[0,0,0,0]},ro=function(e){return Number.isNaN(Number(e))},QS=function(e){for(var n=1/0,t=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++){var a=e[o].getBBox(),s=a.minX,u=a.minY,c=a.maxX,l=a.maxY;s<n&&(n=s),u<r&&(r=u),c>t&&(t=c),l>i&&(i=l)}return{x:Math.floor(n),y:Math.floor(r),width:Math.ceil(t)-Math.floor(n),height:Math.ceil(i)-Math.floor(r),minX:n,minY:r,maxX:t,maxY:i}};const QB=Object.freeze(Object.defineProperty({__proto__:null,calculationItemsBBox:QS,cloneEvent:function(e){var n=new $B(e.type,e);return n.clientX=e.clientX,n.clientY=e.clientY,n.x=e.x,n.y=e.y,n.target=e.target,n.currentTarget=e.currentTarget,n.bubbles=!0,n.item=e.item,n},formatPadding:bv,isNaN:ro,isViewportChanged:function(e){if(!e)return!1;for(var n=[1,0,0,0,1,0,0,0,1],t=0;t<9;t++)if(e[t]!==n[t])return!0;return!1},processParallelEdges:function(e,n,t,r,i){n===void 0&&(n=15),t===void 0&&(t="quadratic"),r===void 0&&(r=void 0),i===void 0&&(i=void 0);for(var o=e.length,a=2*n,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},c=[],l={},h=0;h<o;h++){var d=e[h],f=d.source,p=d.target,g="".concat(f,"-").concat(p);if(!c[h]){u[g]||(u[g]=[]),c[h]=!0,u[g].push(d);for(var v=0;v<o;v++)if(h!==v){var m=e[v],y=m.source,b=m.target;c[v]||(f===b&&p===y?(u[g].push(m),c[v]=!0,l["".concat(y,"|").concat(b,"|").concat(u[g].length-1)]=!0):f===y&&p===b&&(u[g].push(m),c[v]=!0))}}}for(var x in u)for(var w=u[x],E=w.length,S=0;S<E;S++){var M=w[S];if(M.source!==M.target)if(E===1&&r&&M.source!==M.target)M.type=r;else{M.type=t;var k=(S%2==0?1:-1)*(l["".concat(M.source,"|").concat(M.target,"|").concat(S)]?-1:1);M.curveOffset=E%2==1?k*Math.ceil(S/2)*a:k*(Math.floor(S/2)*a+n)}else i&&(M.type=i),M.loopCfg={position:s[S%8],dist:20*Math.floor(S/8)+50}}return e},uniqueId:yv},Symbol.toStringTag,{value:"Module"}));var da={};const JB=Ao(gL);Object.defineProperty(da,"__esModule",{value:!0});var fa=JB;function JS(e,n,t){var r=[0,0,0,0,0,0,0,0,0];return fa.mat3.fromTranslation(r,t),fa.mat3.multiply(e,r,n)}function eM(e,n,t){var r=[0,0,0,0,0,0,0,0,0];return fa.mat3.fromRotation(r,t),fa.mat3.multiply(e,r,n)}function tM(e,n,t){var r=[0,0,0,0,0,0,0,0,0];return fa.mat3.fromScaling(r,t),fa.mat3.multiply(e,r,n)}function eR(e,n,t){return fa.mat3.multiply(e,t,n)}da.leftTranslate=JS,da.leftRotate=eM,da.leftScale=tM;var Td=da.transform=function(e,n){for(var t=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=n.length;r<i;r++){var o=n[r];switch(o[0]){case"t":JS(t,t,[o[1],o[2]]);break;case"s":tM(t,t,[o[1],o[2]]);break;case"r":eM(t,t,o[1]);break;case"m":eR(t,t,o[1])}}return t};function nM(e,n){return e[0]*n[1]-n[0]*e[1]}da.direction=nM,da.angleTo=function(e,n,t){var r=fa.vec2.angle(e,n),i=nM(e,n)>=0;return t?i?2*Math.PI-r:r:i?r:2*Math.PI-r},da.vertical=function(e,n,t){return t?(e[0]=n[1],e[1]=-1*n[0]):(e[0]=-1*n[1],e[1]=n[0]),e};var tR=function(){function e(n){this.destroyed=!1,this.graph=n,this.destroyed=!1}return e.prototype.getViewCenter=function(){var n=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),i=t.get("height");return{x:(r-n[1]-n[3])/2+n[3],y:(i-n[0]-n[2])/2+n[0]}},e.prototype.fitCenter=function(n,t){var r,i=this.graph,o=i.get("group"),a=i.getNodes();if(a.length>i.get("optimizeThreshold")){var s=1/0,u=1/0,c=-1/0,l=-1/0;a.forEach(function(w){var E=w.getModel(),S=E.x,M=E.y;s>S&&(s=S),u>M&&(u=M),c<S&&(c=S),l<M&&(l=M)});var h=o.getMatrix()||[1,0,0,0,1,0,0,0,1],d=au({x:s,y:u},h),f=d.x,p=d.y,g=au({x:c,y:l},h),v=g.x,m=g.y;r={minX:f,maxX:v,minY:p,maxY:m,width:v-f,height:m-p,x:f,y:p}}else r=o.getCanvasBBox();if(r.width!==0&&r.height!==0){var y=this.getViewCenter(),b=r.x+r.width/2,x=r.y+r.height/2;i.translate(y.x-b,y.y-x,n,t)}},e.prototype.animatedFitView=function(n,t,r,i,o,a,s,u){var c=this.graph;r=r||{duration:500,easing:"easeCubic"};var l=i.x+o.x-a.x-i.minX,h=i.y+o.y-a.y-i.minY;if(!ro(l)&&!ro(h)){var d=Td([1,0,0,0,1,0,0,0,1],[["t",l,h]]);if(u){var f=c.get("minZoom"),p=c.get("maxZoom"),g=s;f&&s<f?g=f:p&&s>p&&(g=p);var v=Td(d,[["t",-o.x,-o.y],["s",g,g],["t",o.x,o.y]]),m=Tc({animateCfg:r,callback:function(){n.setMatrix(v),c.emit("viewportchange",{action:"translate",matrix:d}),c.emit("viewportchange",{action:"zoom",matrix:v})}});n.stopAnimate(),n.setMatrix(t),n.animate(function(b){return{matrix:z0(t,v,b)}},m)}else{var y=Tc({animateCfg:r,callback:function(){c.emit("viewportchange",{action:"translate",matrix:d})}});n.animate(function(b){return{matrix:z0(t,d,b)}},y)}}},e.prototype.fitView=function(n,t){var r,i=this.graph,o=this.getFormatPadding(),a=i.get("width"),s=i.get("height"),u=i.get("group"),c=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();var l=i.getNodes();if(l.length>i.get("optimizeThreshold")){var h=1/0,d=1/0,f=-1/0,p=-1/0;l.forEach(function(E){var S=E.getModel(),M=S.x,k=S.y;h>M&&(h=M),d>k&&(d=k),f<M&&(f=M),p<k&&(p=k)}),r={minX:h,maxX:f,minY:d,maxY:p,width:f-h,height:p-d,x:h,y:d}}else r=u.getCanvasBBox();if(r.width!==0&&r.height!==0){var g=this.getViewCenter(),v={x:r.x+r.width/2,y:r.y+r.height/2},m=(a-o[1]-o[3])/r.width,y=(s-o[0]-o[2])/r.height,b=m;if(m>y&&(b=y),n)this.animatedFitView(u,c,t,r,g,v,b,!0);else{var x=g.x-v.x,w=g.y-v.y;if(ro(x)||ro(w))return;i.translate(x,w),i.zoom(b,g)}}},e.prototype.fitViewByRules=function(n,t,r){var i,o=n.onlyOutOfViewPort,a=o!==void 0&&o,s=n.direction,u=s===void 0?"both":s,c=n.ratioRule,l=c===void 0?"min":c,h=this.graph,d=this.getFormatPadding(),f=h.get("width"),p=h.get("height"),g=h.get("group"),v=g.getMatrix()||[1,0,0,0,1,0,0,0,1];g.resetMatrix();var m=h.getNodes();if(m.length>h.get("optimizeThreshold")){var y=1/0,b=1/0,x=-1/0,w=-1/0;m.forEach(function(A){var D=A.getModel(),R=D.x,B=D.y;y>R&&(y=R),b>B&&(b=B),x<R&&(x=R),w<B&&(w=B)}),i={minX:y,maxX:x,minY:b,maxY:w,width:x-y,height:w-b,x:y,y:b}}else i=g.getCanvasBBox();if(i.width!==0&&i.height!==0){var E,S=this.getViewCenter(),M={x:i.x+i.width/2,y:i.y+i.height/2},k=(f-d[1]-d[3])/i.width,_=(p-d[0]-d[2])/i.height;if(E=u==="x"?k:u==="y"?_:l==="max"?Math.max(k,_):Math.min(k,_),a&&(E=E<1?E:1),t)this.animatedFitView(g,v,r,i,S,M,E,!0);else{var C=h.getZoom()*E,T=h.get("minZoom");C<T&&(C=T),h.translate(S.x-M.x,S.y-M.y),h.zoomTo(C,S)}}},e.prototype.getFormatPadding=function(){var n=this.graph.get("fitViewPadding");return bv(n)},e.prototype.focusPoint=function(n,t,r){var i=this,o=this.getViewCenter(),a=this.getPointByCanvas(o.x,o.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(a.x-n.x)*s[0],c=(a.y-n.y)*s[4],l=0,h=0,d=0,f=0;this.graph.get("canvas").animate(function(p){d=u*p,f=c*p,i.graph.translate(d-l,f-h),l=d,h=f},P({},r))}else this.graph.translate((a.x-n.x)*s[0],(a.y-n.y)*s[4])},e.prototype.getPointByCanvas=function(n,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),sE({x:n,y:t},r)},e.prototype.getPointByClient=function(n,t){var r=this.graph.get("canvas").getPointByClient(n,t);return this.getPointByCanvas(r.x,r.y)},e.prototype.getClientByPoint=function(n,t){var r=this.graph.get("canvas"),i=this.getCanvasByPoint(n,t),o=r.getClientByPoint(i.x,i.y);return{x:o.x,y:o.y}},e.prototype.getCanvasByPoint=function(n,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),au({x:n,y:t},r)},e.prototype.focus=function(n,t,r){if(he(n)&&(n=this.graph.findById(n)),n){var i=0,o=0;if(n.getType&&n.getType()==="edge"){var a=n.getSource().get("group").getMatrix(),s=n.getTarget().get("group").getMatrix();a&&s?(i=(a[6]+s[6])/2,o=(a[7]+s[7])/2):(a||s)&&(i=a?a[6]:s[6],o=a?a[7]:s[7])}else{var u=n.get("group").getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),i=u[6],o=u[7]}this.focusPoint({x:i,y:o},t,r)}},e.prototype.focusItems=function(n,t,r,i){if(n.length){var o=this.graph,a=this.getFormatPadding(),s=o.get("width"),u=o.get("height"),c=o.get("group"),l=c.getMatrix()||[1,0,0,0,1,0,0,0,1];c.resetMatrix();for(var h={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},d=0,f=n;d<f.length;d++){var p=f[d].getBBox();p.minX<h.minX&&(h.minX=p.minX),p.minY<h.minY&&(h.minY=p.minY),p.maxX>h.maxX&&(h.maxX=p.maxX),p.maxY>h.maxY&&(h.maxY=p.maxY)}if(h.x=h.minX,h.y=h.minY,h.width=h.maxX-h.minX,h.height=h.maxY-h.minY,h.width!==0&&h.height!==0){var g=this.getViewCenter(),v={x:h.x+h.width/2,y:h.y+h.height/2},m=(s-a[1]-a[3])/h.width,y=(u-a[0]-a[2])/h.height,b=m;m>y&&(b=y),r?this.animatedFitView(c,l,i,h,g,v,b,t):(o.translate(g.x-v.x,g.y-v.y),t&&o.zoom(b,g))}}},e.prototype.changeSize=function(n,t){var r=this.graph;if(!Ue(n)||!Ue(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:n,height:t}),r.get("canvas").changeSize(n,t),r.get("plugins").forEach(function(i){i.get("gridContainer")&&i.positionInit()})},e.prototype.destroy=function(){this.graph=null,this.destroyed=!1},e}();function xv(e){return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xv(e)}function rM(e){if(typeof e!="string")return e;var n=function(w){if(typeof w!="string")return w;try{return JSON.parse(w.trim())}catch(E){return w.trim()}},t=n(e);if(typeof t!="string")return t;for(var r=function(w){return w[w.length-1]},i=e.trim(),o=[],a=[],s=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];return w.some(function(S){return r(a)===S})},u=null,c=0,l="";c<i.length;){var h=i[c],d=s('"',"'");if(d||h.trim()){var f=i[c-1]==="\\",p=s("}"),g=s("]"),v=s(","),m=r(o);if(d)if(r(a)!==h||f)l+=h;else{a.pop();var y=n(l);m.push(y),u=y,l=""}else if(g&&h===",")l&&(m.push(n(l)),l="");else if(p&&h===":")a.push(","),l&&(m.push(l),l="");else if(v&&h===",")l&&(m.push(n(l)),l=""),a.pop();else if(h==="}"&&(p||v)){l&&(m.push(n(l)),l=""),v&&a.pop();for(var b={},x=1;x<m.length;x+=2)b[m[x-1]]=m[x];o.pop(),o.length&&r(o).push(b),a.pop(),u=b}else h==="]"&&g?(l&&(m.push(n(l)),l=""),o.pop(),o.length&&r(o).push(m),a.pop(),u=m):h==="{"?(o.push([]),a.push("}")):h==="["?(o.push([]),a.push("]")):h==='"'?a.push('"'):h==="'"?a.push("'"):l+=h;c+=1}else c+=1}return u||l}function iM(e,n){var t={},r=e.getAttributeNames&&e.getAttributeNames()||[],i=e.children&&Array.from(e.children).map(function(s){return iM(s,n)}),o={},a=e.tagName?e.tagName.toLowerCase():"group";return a==="text"&&(t.text=e.innerText),o.type=a,a==="img"&&(o.type="image"),Array.from(r).forEach(function(s){var u=function(h){return h.split("-").reduce(function(d,f){return d+f.charAt(0).toUpperCase()+f.slice(1)})}(s),c=e.getAttribute(s);try{if(u==="style"||u==="attrs"){var l=rM(c);t=P(P({},t),l)}else o[u]=rM(c)}catch(h){if(u==="style")throw h;o[u]=c}}),o.attrs=t,n&&n.style&&o.name&&xv(n.style[o.name])==="object"&&(o.attrs=P(P({},o.attrs),n.style[o.name])),n&&n.style&&o.keyshape&&(o.attrs=P(P({},o.attrs),n.style)),i.length&&(o.children=i),o}function oM(e,n){var t;n===void 0&&(n={x:0,y:0});var r=P({x:0,y:0,width:0,height:0},n);if(!((t=e.children)===null||t===void 0)&&t.length){var i=e.attrs,o=i===void 0?{}:i,a=o.marginTop,s=P({},n);a&&(s.y+=a);for(var u=0;u<e.children.length;u++){e.children[u].attrs.key="".concat(o.key||"root"," -").concat(u," ");var c=oM(e.children[u],s);if(c.bbox){var l=c.bbox;c.attrs.next==="inline"?s.x+=c.bbox.width:s.y+=c.bbox.height,l.width+l.x>r.width&&(r.width=l.width+l.x),l.height+l.y>r.height&&(r.height=l.height+l.y)}}}return e.bbox=function(h,d,f){var p,g,v=h.attrs,m=v===void 0?{}:v,y={x:d.x||0,y:d.y||0,width:f.width||0,height:f.height||0};switch(h.type){case"maker":case"circle":m.r&&(g=2*m.r,p=2*m.r);break;case"text":m.text&&(g=EE(m.text,m.fontSize||12)[0],p=16,y.y+=p,y.height=p,y.width=g,h.attrs=P({fontSize:12,fill:"#000"},m));break;default:m.width&&(g=m.width),m.height&&(p=m.height)}return p>=0&&(y.height=p),g>=0&&(y.width=g),m.marginTop&&(y.y+=m.marginTop),m.marginLeft&&(y.x+=m.marginLeft),y}(e,n,r),e.attrs=P(P({},e.attrs),e.bbox),e}function aM(e,n){var t,r,i,o,a=(e||{}).type,s=((n==null?void 0:n.attrs)||{}).key;if(s&&e&&(e.attrs.key=s),!e&&n)return{action:"delete",val:n,type:a,key:s};if(e&&!n)return{action:"add",val:e,type:a};if(!e&&!n)return{action:"same",type:a};var u=[];if(((t=e.children)===null||t===void 0?void 0:t.length)>0||((r=n.children)===null||r===void 0?void 0:r.length)>0)for(var c=Math.max((i=e.children)===null||i===void 0?void 0:i.length,(o=n.children)===null||o===void 0?void 0:o.length),l=n.children||[],h=e.children||[],d=0;d<c;d+=1)u.push(aM(h[d],l[d]));var f=Object.keys(n.attrs),p=Object.keys(e.attrs);return n.type!==e.type?{action:"restructure",nowTarget:e,formerTarget:n,key:s,children:u}:f.filter(function(g){return g!=="children"}).some(function(g){return e.attrs[g]!==n.attrs[g]||!p.includes(g)})?{action:"change",val:e,children:u,type:a,key:s}:{action:"same",children:u,type:a,key:s}}function sM(e){var n={},t=function(r){var i=function(s){return function(u){for(var c=s.length,l=[],h=0,d="";h<c;)if(s[h]==="{"&&s[h+1]==="{")l.push(d),d="",h+=2;else if(s[h]==="}"&&s[h+1]==="}"){if(l.length){var f=l.pop();d=Hi(u,d,f.endsWith("=")?'"{'.concat(d,'}"'):d),l.push(f+d)}h+=2,d=""}else d+=s[h],h+=1;return l.push(d),l.map(function(p,g){return l[g-1]&&l[g-1].endsWith("=")?'"{'.concat(p,'}"'):p}).join("")}}(typeof e=="function"?e(r):e)(r),o=document.createElement("div");o.innerHTML=i;var a=oM(iM(o.children[0],r));return o.remove(),a};return{draw:function(r,i){var o=t(r),a=i;return function s(u){var c=u.attrs,l=c===void 0?{}:c,h=u.bbox,d=u.type,f=u.children,p=yn(u,["attrs","bbox","type","children"]);if(u.type!=="group"){var g=i.addShape(u.type,P({attrs:l,origin:{bbox:h,type:d,children:f}},p));u.keyshape&&(a=g)}u.children&&u.children.forEach(function(v){return s(v)})}(o),n[r.id]=[o],a},update:function(r,i){n[r.id]||(n[r.id]=[]);var o=i.getContainer(),a=o.get("children"),s=t(r),u=aM(s,n[r.id].pop()),c=function h(d){var f;d.type!=="group"&&o.addShape(d.type,{attrs:d.attrs}),!((f=d.children)===null||f===void 0)&&f.length&&d.children.map(function(p){return h(p)})},l=function h(d){var f,p=a.find(function(g){return g.attrs.key===d.attrs.key});p&&o.removeChild(p),!((f=d.children)===null||f===void 0)&&f.length&&d.children.map(function(g){return h(g)})};(function h(d){var f=d.key;if(d.type!=="group"){var p=a.find(function(v){return v.attrs.key===f});switch(d.action){case"change":if(p){var g=d.val.keyshape?i.getOriginStyle():{};p.attr(P(P({},g),d.val.attrs))}break;case"add":c(d.val);break;case"delete":l(d.val);break;case"restructure":l(d.formerTarget),c(d.nowTarget)}}d.children&&d.children.forEach(function(v){return h(v)})})(u),n[r.id].push(s)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var wv={};function uM(e){return wv[e]||(wv[e]=Io(e)),wv[e]}var nR={defaultShapeType:"defaultType",className:null,getShape:function(e){var n=this;return n[e]||n[n.defaultShapeType]||n["simple-circle"]},draw:function(e,n,t){var r=this.getShape(e);t.shapeMap={};var i=r.draw(n,t);return r.afterDraw&&r.afterDraw(n,t,i),i},baseUpdate:function(e,n,t,r){var i,o,a=this.getShape(e);a.update&&(a.mergeStyle=(i=a.getOptions)===null||i===void 0?void 0:i.call(a,n,r),(o=a.update)===null||o===void 0||o.call(a,n,t,r)),a.afterUpdate&&a.afterUpdate(n,t)},setState:function(e,n,t,r){this.getShape(e).setState(n,t,r)},shouldUpdate:function(e){return!!this.getShape(e).update},getControlPoints:function(e,n){return this.getShape(e).getControlPoints(n)},getAnchorPoints:function(e,n){return this.getShape(e).getAnchorPoints(n)}},Ev={options:{},draw:function(e,n){return this.drawShape(e,n)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var n=this.options.anchorPoints;return e.anchorPoints||n}},vn=function(){function e(){}return e.registerFactory=function(n,t){var r=uM(n),i=P(P({},nR),t);return e[r]=i,i.className=r,i},e.getFactory=function(n){return e[uM(n)]},e.registerNode=function(n,t,r){var i,o=e.Node;if(typeof t=="string"||typeof t=="function"){var a=sM(t);i=P(P({},o.getShape("single-node")),a)}else if(t.jsx)a=sM(t.jsx),i=P(P(P({},o.getShape("single-node")),a),t);else{o.getShape(r);var s=r?o.getShape(r):Ev;i=P(P({},s),t)}return i.type=n,i.itemType="node",o[n]=i,i},e.registerEdge=function(n,t,r){var i=e.Edge,o=r?i.getShape(r):Ev,a=P(P({},o),t);return a.type=n,a.itemType="edge",i[n]=a,a},e.registerCombo=function(n,t,r){var i=e.Combo,o=r?i.getShape(r):Ev,a=P(P({},o),t);return a.type=n,a.itemType="combo",i[n]=a,a},e}();vn.registerFactory("node",{defaultShapeType:"circle"}),vn.registerFactory("edge",{defaultShapeType:"line"}),vn.registerFactory("combo",{defaultShapeType:"circle"});var Sv="bboxCache",Mv="bboxCanvasCache",cM=function(){function e(n){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),n);var r=this.get("model"),i=r.id,o=this.get("type");i===void 0?i=yv(o):typeof i!="string"&&(i=String(i)),this.get("model").id=i,this.set("id",i);var a=n.group;a&&(a.set("item",this),a.set("id",i)),this.init(),this.draw();var s=r.shape||r.type||(o==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var c=u[s].options;if(c&&c.stateStyles){var l=this.get("styles")||r.stateStyles;l=Zt({},c.stateStyles,l),this.set("styles",l)}}}return e.prototype.calculateBBox=function(){var n=this.get("keyShape"),t=this.get("group"),r=fd(n,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},e.prototype.calculateCanvasBBox=function(){var n=this.get("keyShape"),t=this.get("group"),r=fd(n,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},e.prototype.drawInner=function(){var n=this,t=n.get("shapeFactory"),r=n.get("group"),i=n.get("model");r.clear();var o=i.visible;if(o===void 0||o||n.changeVisibility(o),t){n.updatePosition(i);var a=n.getShapeCfg(i),s=a.type,u=t.draw(s,a,r);u&&(n.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},e.prototype.setOriginStyle=function(){var n=this.get("group"),t=n.get("children"),r=this.getKeyShape(),i=this,o=r.get("name");if(this.get("originStyle")){var a=this.get("originStyle");o&&!a[o]&&(a[o]={});var s=this.getCurrentStatesStyle(),u=function(v){var m=t[v],y=m.get("name"),b=m.attr();if(y&&y!==o){var x=s[y];a[y]||(a[y]={}),x?Object.keys(b).forEach(function(S){var M=b[S];M!==x[S]&&(a[y][S]=M)}):a[y]=m.get("type")!=="image"?_t(b):i.getShapeStyleByName(y)}else{var w=m.attr(),E={};Object.keys(s).forEach(function(S){var M=s[S];S!==o&&dn(M)||(E[S]=M)}),Object.keys(w).forEach(function(S){var M=w[S];E[S]!==M&&(o?a[o][S]=M:a[S]=M)})}};for(l=0;l<t.length;l++)u(l);delete a.path,delete a.matrix,delete a.x,delete a.y,a[o]&&(delete a[o].x,delete a[o].y,delete a[o].matrix,delete a[o].path),i.set("originStyle",a)}else{for(var c={},l=0;l<t.length;l++){var h=t[l],d=h.get("type"),f=h.get("name");if(f&&f!==o)c[f]=d!=="image"?_t(h.attr()):i.getShapeStyleByName(f),d==="text"&&c[f]&&(delete c[f].x,delete c[f].y,delete c[f].matrix);else{var p=i.getShapeStyleByName();if(delete p.path,delete p.matrix,o)if(f)c[o]=p;else{var g=yv("shape");h.set("name",g),n.shapeMap[g]=h,c[g]=d!=="image"?_t(h.attr()):i.getShapeStyleByName(f)}else Object.assign(c,p)}}i.set("originStyle",c)}},e.prototype.restoreStates=function(n,t){var r=this;re(r.get("states"),function(i){n.setState(t,i,!0,r)})},e.prototype.init=function(){var n=vn.getFactory(this.get("type"));this.set("shapeFactory",n)},e.prototype.get=function(n){return this._cfg[n]},e.prototype.set=function(n,t){dn(n)?this._cfg=P(P({},this._cfg),n):this._cfg[n]=t},e.prototype.getDefaultCfg=function(){return{}},e.prototype.clearCache=function(){this.set(Sv,null),this.set(Mv,null)},e.prototype.beforeDraw=function(){},e.prototype.afterDraw=function(){},e.prototype.afterUpdate=function(){},e.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},e.prototype.getShapeStyleByName=function(n){var t,r=this.get("group");if(t=n?r.shapeMap[n]||r.find(function(o){return o.get("name")===n}):this.getKeyShape()){var i={};return re(t.attr(),function(o,a){(a!=="img"||he(o))&&(i[a]=o)}),i}return{}},e.prototype.getShapeCfg=function(n,t){var r=this.get("styles");if(r){var i=n;return i.style=P(P({},r),n.style),i}return n},e.prototype.getStateStyle=function(n){var t=this.get("styles");return t&&t[n]},e.prototype.getOriginStyle=function(){return this.get("originStyle")},e.prototype.getCurrentStatesStyle=function(){var n=this,t={},r=n.getStates();return r&&r.length?(re(n.getStates(),function(i){t=Object.assign(t,n.getStateStyle(i))}),t):this.get("originStyle")},e.prototype.setState=function(n,t){var r=this.get("states"),i=this.get("shapeFactory"),o=n,a=n;he(t)&&(o="".concat(n,":").concat(t),a="".concat(n,":"));var s=r;if(qa(t)){var u=r.indexOf(a);if(t){if(u>-1)return;r.push(o)}else u>-1&&r.splice(u,1)}else if(he(t)){var c=r.filter(function(h){return h.includes(a)});c.length>0&&this.clearStates(c),s=s.filter(function(h){return!h.includes(a)}),s.push(o),this.set("states",s)}if(i){var l=this.get("model").type;i.setState(l,n,t,this)}},e.prototype.clearStates=function(n){var t=this,r=t.getStates(),i=t.get("shapeFactory"),o=t.get("model").type;n||(n=r),he(n)&&(n=[n]);var a=r.filter(function(s){return n.indexOf(s)===-1});t.set("states",a),n.forEach(function(s){i.setState(o,s,!1,t)})},e.prototype.setOptimize=function(n){this.optimize=n},e.prototype.getContainer=function(){return this.get("group")},e.prototype.getKeyShape=function(){return this.get("keyShape")},e.prototype.getModel=function(){return this.get("model")},e.prototype.getType=function(){return this.get("type")},e.prototype.getID=function(){return this.get("id")},e.prototype.isItem=function(){return!0},e.prototype.getStates=function(){return this.get("states")},e.prototype.hasState=function(n){return this.getStates().indexOf(n)>=0},e.prototype.refresh=function(n){var t=this.get("model");this.updatePosition(t),this.updateShape(n),this.afterUpdate(),this.clearCache()},e.prototype.getUpdateType=function(n){},e.prototype.update=function(n,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(n);else{var i=r.visible,o=n.visible;i!==o&&o!==void 0&&this.changeVisibility(o);var a={x:r.x,y:r.y};n.x=isNaN(+n.x)?r.x:+n.x,n.y=isNaN(+n.y)?r.y:+n.y;var s=this.get("styles");n.stateStyles&&(ut(s,n.stateStyles),delete n.stateStyles),Object.assign(r,n),a.x===n.x&&a.y===n.y||this.updatePosition(n),this.updateShape(t)}this.afterUpdate(),this.clearCache()},e.prototype.updateShape=function(n){var t=this.get("shapeFactory"),r=this.get("model"),i=r.type;if(t.shouldUpdate(i)&&i===this.get("currentShape")){var o=this.getShapeCfg(r,n);t.baseUpdate(i,o,this,n),n!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,i)},e.prototype.updatePosition=function(n){var t=this.get("model"),r=isNaN(+n.x)?+t.x:+n.x,i=isNaN(+n.y)?+t.y:+n.y,o=this.get("group");if(isNaN(r)||isNaN(i))return!1;t.x=r,t.y=i;var a=o.getMatrix();return(!a||a[6]!==r||a[7]!==i)&&(o.resetMatrix(),uE(o,{x:r,y:i}),this.clearCache(),!0)},e.prototype.getBBox=function(){var n=this.get(Sv);return n||(n=this.calculateBBox(),this.set(Sv,n)),n},e.prototype.getCanvasBBox=function(){var n=this.get(Mv);return n||(n=this.calculateCanvasBBox(),this.set(Mv,n)),n},e.prototype.toFront=function(){this.get("group").toFront()},e.prototype.toBack=function(){this.get("group").toBack()},e.prototype.show=function(){this.changeVisibility(!0)},e.prototype.hide=function(){this.changeVisibility(!1)},e.prototype.changeVisibility=function(n){var t=this.get("group");n?t.show():t.hide(),this.set("visible",n)},e.prototype.isVisible=function(){return this.get("visible")},e.prototype.enableCapture=function(n){var t=this.get("group");t&&t.set("capture",n)},e.prototype.destroy=function(){if(!this.destroyed){var n=this.get("animate"),t=this.get("group");n&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},e}(),Od={source:"start",target:"end"},io="Node",du="Point",rR=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},n.prototype.setEnd=function(t,r){var i=Od[t]+du,o=t+io,a=this.get(o);a&&!a.destroyed&&a.removeEdge(this),dn(r)?(this.set(i,r),this.set(o,null)):r&&(r.addEdge(this),this.set(o,r),this.set(i,null))},n.prototype.getLinkPoint=function(t,r,i){var o=Od[t]+du,a=t+io,s=this.get(o);if(!s){var u=this.get(a),c=t+"Anchor",l=this.getPrePoint(t,i),h=r[c];ht(h)||(s=u.getLinkPointByAnchor(h)),s=s||u.getLinkPoint(l),ht(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},n.prototype.getPrePoint=function(t,r){if(r&&r.length)return r[t==="source"?0:r.length-1];var i=t==="source"?"target":"source";return this.getEndPoint(i)},n.prototype.getEndPoint=function(t){var r=t+io,i=Od[t]+du,o=this.get(r);return o&&!o.destroyed?o.get("model"):this.get(i)},n.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),i=this.getEndPoint("target"),o=this.get("shapeFactory"),a=t.type;return o.getControlPoints(a,{startPoint:r,endPoint:i})},n.prototype.getEndCenter=function(t){var r=t+io,i=Od[t]+du,o=this.get(r);if(o){var a=o.getBBox();return{x:a.centerX,y:a.centerY}}return this.get(i)},n.prototype.init=function(){e.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},n.prototype.getShapeCfg=function(t,r){var i=this,o=i.get("linkCenter"),a=r!=null&&r.includes("move")?t:e.prototype.getShapeCfg.call(this,t);if(o)a.startPoint=i.getEndCenter("source"),a.endPoint=i.getEndCenter("target");else{var s=a.controlPoints||i.getControlPointsByCenter(a);a.startPoint=i.getLinkPoint("source",t,s),a.endPoint=i.getLinkPoint("target",t,s)}return a.sourceNode=i.get("sourceNode"),a.targetNode=i.get("targetNode"),a},n.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(io)),i=this.get("target".concat(io));return r?delete t["source".concat(io)]:t.source=this.get("start".concat(du)),i?delete t["target".concat(io)]:t.target=this.get("end".concat(du)),he(t.source)||dn(t.source)||(t.source=t.source.getID()),he(t.target)||dn(t.target)||(t.target=t.target.getID()),t},n.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},n.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},n.prototype.getSource=function(){return this.get("source")},n.prototype.getTarget=function(){return this.get("target")},n.prototype.updatePosition=function(){return!1},n.prototype.update=function(t,r){r===void 0&&(r=void 0);var i=this.get("model"),o=i.visible,a=t.visible;o!==a&&a!==void 0&&this.changeVisibility(a);var s=this.get("source"),u=this.get("target");if(s&&!s.destroyed&&u&&!u.destroyed){var c=this.get("styles");t.stateStyles&&(ut(c,t.stateStyles),delete t.stateStyles),Object.assign(i,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},n.prototype.destroy=function(){var t=this.get("source".concat(io)),r=this.get("target".concat(io));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),e.prototype.destroy.call(this)},n}(cM),_v="anchorPointsCache",lM=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getNearestPoint=function(t,r){for(var i=0,o=t[0],a=cd(t[0],r),s=0;s<t.length;s++){var u=t[s],c=cd(u,r);c<a&&(o=u,a=c,i=s)}return o.anchorIndex=i,o},n.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},n.prototype.getEdges=function(){return this.get("edges")},n.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},n.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},n.prototype.getNeighbors=function(t){var r=this,i=this.get("edges");return t==="target"?i.filter(function(o){return o.getSource()===r}).map(function(o){return o.getTarget()}):t==="source"?i.filter(function(o){return o.getTarget()===r}).map(function(o){return o.getSource()}):i.map(function(o){return o.getSource()===r?o.getTarget():o.getSource()})},n.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},n.prototype.getLinkPoint=function(t){var r,i,o=this.get("keyShape").get("type"),a=this.get("type"),s=this.getBBox();a==="combo"?(r=s.centerX||(s.maxX+s.minX)/2,i=s.centerY||(s.maxY+s.minY)/2):(r=s.centerX,i=s.centerY);var u,c=this.getAnchorPoints();switch(o){case"circle":u=oE({x:r,y:i,r:s.width/2},t);break;case"ellipse":u=aE({x:r,y:i,rx:s.width/2,ry:s.height/2},t);break;default:u=iE(s,t)}var l=u;return c.length&&(l||(l=t),l=this.getNearestPoint(c,l)),l||(l={x:r,y:i}),l},n.prototype.getAnchorPoints=function(){var t=this.get(_v);if(!t){t=[];var r=this.get("shapeFactory"),i=this.getBBox(),o=this.get("model"),a=this.getShapeCfg(o),s=o.type;re(r.getAnchorPoints(s,a)||[],function(u,c){var l={x:i.minX+u[0]*i.width,y:i.minY+u[1]*i.height,anchorIndex:c};t.push(l)}),this.set(_v,t)}return t},n.prototype.addEdge=function(t){this.get("edges").push(t)},n.prototype.lock=function(){this.set("locked",!0)},n.prototype.unlock=function(){this.set("locked",!1)},n.prototype.hasLocked=function(){return this.get("locked")},n.prototype.removeEdge=function(t){var r=this.getEdges(),i=r.indexOf(t);i>-1&&r.splice(i,1)},n.prototype.clearCache=function(){this.set("bboxCache",null),this.set(_v,null)},n.prototype.getUpdateType=function(t){var r,i,o,a,s;if(t){var u=!ht(t.x),c=!ht(t.y),l=Object.keys(t);return l.length===1&&(u||c)||l.length===2&&u&&c?"move":Ue(t.x)||Ue(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((i=t==null?void 0:t.style)===null||i===void 0)&&i.width||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.height||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry)?"bbox|label":l.includes("label")||l.includes("labelCfg")?"style|label":"style"}},n.prototype.setState=function(t,r){var i=this;this.optimize?e.prototype.setState.call(this,t,r):this.runWithBBoxAffected(function(){return e.prototype.setState.call(i,t,r)})},n.prototype.clearStates=function(t){var r=this;this.optimize?e.prototype.clearStates.call(this,t):this.runWithBBoxAffected(function(){return e.prototype.clearStates.call(r,t)})},n.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],i=this.getKeyShape().attr(),o={};Object.keys(this.getKeyShape().attr()).forEach(function(c){r.includes(c)&&(o[c]=i[c])}),t();for(var a=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(a[u]!==o[u]){this.clearCache(),this.getEdges().forEach(function(c){return c.refresh()});break}}},n}(cM),hM="bboxCache",dM="bboxCanvasCache",Nd="sizeCache",fM="anchorPointsCache",iR=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},n.prototype.getShapeCfg=function(t){var r=this.get("styles"),i=this.get("bbox");if(r&&i){var o=t,a=Ue(t.size)?[t.size,t.size]:t.size,s=Ue(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=a||s||Et.defaultCombo.size,c={r:(Math.max(i.width,i.height)||Math.max(u[0],u[1]))/2,width:i.width||u[0],height:i.height||u[1]};o.style=P(P(P({},r),t.style),c);var l=t.padding||Et.defaultCombo.padding;return Ue(l)?(c.r+=l,c.width+=2*l,c.height+=2*l):(c.r=c.r+Math.max.apply(Math,l),c.width+=l[1]+l[3]||2*l[1],c.height+=l[0]+l[2]||2*l[0]),this.set(Nd,c),o}return t},n.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),i=this.get(hM)||{},o=i.x,a=i.x,s=this.get(Nd),u=fd(t,r);return u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2,s?(s.width=Math.max(s.width,u.width),s.height=Math.max(s.height,u.height),this.set(Nd,s),t.get("type")==="circle"?(u.width=2*s.r,u.height=2*s.r):(u.width=s.width,u.height=s.height),u.minX=u.centerX-u.width/2,u.minY=u.centerY-u.height/2,u.maxX=u.centerX+u.width/2,u.maxY=u.centerY+u.height/2):(u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2),u.x=u.minX,u.y=u.minY,u.x===o&&u.y===a||this.set(fM,null),u}},n.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},n.prototype.getNodes=function(){return this.get("nodes")},n.prototype.getCombos=function(){return this.get("combos")},n.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return!1}return!0},n.prototype.addCombo=function(t){return this.get("combos").push(t),!0},n.prototype.addNode=function(t){return this.get("nodes").push(t),!0},n.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return!1}return!0},n.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),i=r.indexOf(t);return i>-1&&(r.splice(i,1),!0)}},n.prototype.removeNode=function(t){if(t){var r=this.getNodes(),i=r.indexOf(t);return i>-1&&(r.splice(i,1),!0)}},n.prototype.getUpdateType=function(t){},n.prototype.getBBox=function(){return this.set(dM,null),this.calculateCanvasBBox()},n.prototype.clearCache=function(){this.set(hM,null),this.set(dM,null),this.set(fM,null)},n.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Nd,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},n}(lM),Pd="node",Dd="edge",pM="vedge",Vc="combo",gM="Mapper",No="stateStyles",oR=function(){function e(n){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=ru(function(r){var i=t.graph;if(i&&!i.get("destroyed")){var o=t.edgeToBeUpdateMap;if(o){var a=Object.values(o);a.length&&(a.forEach(function(s){var u=s.edge;if(u&&!u.destroyed){var c=u.getSource(),l=u.getTarget();c&&!c.destroyed&&l&&!l.destroyed&&u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=n,this.destroyed=!1}return e.prototype.addItem=function(n,t){var r=this.graph,i=n===pM?Dd:n,o=r.get("".concat(i,"Group"))||r.get("group"),a=Io(i),s=null,u=r.get(i+Io(No))||{},c=r.get("default"+a);t[No]&&(u=t[No]),c&&re(c,function(E,S){Tn(E)&&!at(E)?t[S]=Zt({},E,t[S]):at(E)?t[S]=t[S]||_t(c[S]):t[S]=t[S]||c[S]});var l=r.get(i+gM);if(l){var h=l(t);h[No]&&(u=h[No],delete h[No]),re(h,function(E,S){Tn(E)&&!at(E)?t[S]=Zt({},t[S],E):t[S]=h[S]||t[S]})}if(r.emit("beforeadditem",{type:n,model:t}),n===Dd||n===pM){var d=void 0,f=void 0;if(d=t.source,f=t.target,d&&he(d)&&(d=r.findById(d)),f&&he(f)&&(f=r.findById(f)),!d||!f)return;d.getType&&d.getType()==="combo"&&(t.isComboEdge=!0),f.getType&&f.getType()==="combo"&&(t.isComboEdge=!0),s=new rR({model:t,source:d,target:f,styles:u,linkCenter:r.get("linkCenter"),group:o.addGroup()})}else if(n===Pd)s=new lM({model:t,styles:u,group:o.addGroup()});else if(n===Vc){var p=t.children,g=pd(p,r),v=void 0,m=void 0;if(isNaN(g.x)?isNaN(t.x)&&(v=100*Math.random()):v=g.x,isNaN(g.y)?isNaN(t.y)&&(m=100*Math.random()):m=g.y,isNaN(t.x)||isNaN(t.y))t.x=v,t.y=m;else{var y=t.x-v,b=t.y-m;this.updateComboSucceeds(t.id,y,b,p)}var x=o.addGroup();x.setZIndex(t.depth),s=new iR({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?pd([],r):g,group:x}),t.collapsed||s.getKeyShape().get("type")!=="circle"||(g.width=Math.hypot(g.height,g.width),g.height=g.width,s.set("bbox",g),s.refresh());var w=s.getModel();(p||[]).forEach(function(E){var S=r.findById(E.id);s.addChild(S),E.depth=w.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(n,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},e.prototype.updateItem=function(n,t){var r,i,o=this,a=this.graph;if(he(n)&&(n=a.findById(n)),n&&!n.destroyed){var s="";n.getType&&(s=n.getType());var u=a.get(s+gM),c=n.getModel(),l=c.x,h=c.y,d=n.getUpdateType(t);if(u){var f=u(Zt({},c,t)),p=Zt({},c,f,t);f[No]&&(n.set("styles",p[No]),delete p[No]),re(p,function(S,M){t[M]=S})}else re(t,function(S,M){c[M]&&Tn(S)&&!at(S)&&(t[M]=P(P({},c[M]),t[M]))});if(a.emit("beforeupdateitem",{item:n,cfg:t}),s===Dd){if(t.source){var g=t.source;he(g)&&(g=a.findById(g)),n.setSource(g)}if(t.target){var v=t.target;he(v)&&(v=a.findById(v)),n.setTarget(v)}n.update(t)}else if(s===Pd){n.update(t,d);var m=n.getEdges();d==="move"?re(m,function(S){o.edgeToBeUpdateMap[S.getID()]={edge:S,updateType:d},o.throttleRefresh()}):d!=null&&d.includes("bbox")&&re(m,function(S){S.refresh(d)})}else if(s===Vc){if(n.update(t,d),!isNaN(t.x)||!isNaN(t.y)){var y=t.x-l||0,b=t.y-h||0;this.updateComboSucceeds(c.id,y,b)}var x=n.getEdges();if((d!=null&&d.includes("bbox")||d==="move")&&s===Vc){var w=n.get("shapeFactory"),E=c.type||"circle";(c.animate===void 0||t.animate===void 0?!((i=(r=w[E])===null||r===void 0?void 0:r.options)===null||i===void 0)&&i.animate:c.animate||t.animate)?setTimeout(function(){if(n&&!n.destroyed){var S=n.getKeyShape();S&&!S.destroyed&&re(x,function(M){M&&!M.destroyed&&M.refresh()})}},201):re(x,function(S){S.refresh()})}}n.setOptimize(a.getNodes().length>a.get("optimizeThreshold")),a.emit("afterupdateitem",{item:n,cfg:t})}},e.prototype.updateCombo=function(n,t,r){var i,o,a=this,s=this.graph;if(he(n)&&(n=s.findById(n)),n&&!n.destroyed){var u=n.getModel(),c=pd(t,s,n),l=c.x,h=c.y;n.set("bbox",c);var d=l,f=h;r?(d=isNaN(u.x)?l:u.x,f=isNaN(u.y)?h:u.y):(d=isNaN(l)?u.x:l,f=isNaN(h)?u.y:h),n.update({x:d,y:f});var p=n.get("shapeFactory"),g=u.type||"circle";(u.animate===void 0?!((o=(i=p[g])===null||i===void 0?void 0:i.options)===null||o===void 0)&&o.animate:u.animate)?setTimeout(function(){if(n&&!n.destroyed){var v=n.getKeyShape();v&&!v.destroyed&&(n.getShapeCfg(u),a.updateComboEdges(n))}},201):this.updateComboEdges(n)}},e.prototype.updateComboEdges=function(n){for(var t,r,i=n.getEdges()||[],o=0;o<i.length;o++){var a=i[o];a!=null&&a.destroyed||!((t=a==null?void 0:a.getSource())===null||t===void 0)&&t.destroyed||!((r=a==null?void 0:a.getTarget())===null||r===void 0)&&r.destroyed||a.refresh()}},e.prototype.collapseCombo=function(n,t){t===void 0&&(t=!0);var r=this.graph;he(n)&&(n=r.findById(n));var i=n.getChildren();i.nodes.forEach(function(o){r.hideItem(o,t)}),i.combos.forEach(function(o){r.hideItem(o,t)})},e.prototype.updateComboSucceeds=function(n,t,r,i){var o=this;i===void 0&&(i=[]);var a=this.graph;if(t||r){var s=i;if(!(s!=null&&s.length)){var u=a.get("comboTrees");u==null||u.forEach(function(c){xr(c,function(l){return l.id!==n||(s=l.children,!1)})})}s==null||s.forEach(function(c){var l=a.findById(c.id);if(l){var h=l.getModel();o.updateItem(c.id,{x:(h.x||0)+t,y:(h.y||0)+r})}})}},e.prototype.expandCombo=function(n,t){t===void 0&&(t=!0);var r=this.graph;he(n)&&(n=r.findById(n));var i=n.getChildren(),o=new Set;i.nodes.forEach(function(a){r.showItem(a,t),a.getEdges().forEach(function(s){return o.add(s)})}),i.combos.forEach(function(a){a.getModel().collapsed?a.show():r.showItem(a,t),a.getEdges().forEach(function(s){return o.add(s)})}),o.forEach(function(a){return a.refresh()})},e.prototype.removeItem=function(n){var t=this,r=this.graph;if(he(n)&&(n=r.findById(n)),n&&!n.destroyed){var i=_t(n.getModel()),o="";n.getType&&(o=n.getType()),r.emit("beforeremoveitem",{item:i,type:o});var a=r.get("".concat(o,"s")),s=a.indexOf(n);if(s>-1&&a.splice(s,1),o===Dd){var u=r.get("v".concat(o,"s")),c=u.indexOf(n);c>-1&&u.splice(c,1)}var l=n.get("id");delete r.get("itemMap")[l];var h=r.get("comboTrees"),d=n.get("id");if(o===Pd){var f=n.getModel().comboId;if(h&&f){var p=h,g=!1;h.forEach(function(w){g||xr(w,function(E){if(E.id===d&&p){var S=p.indexOf(E);return p.splice(S,1),g=!0,!1}return p=E.children,!0})})}for(var v=(x=n.getEdges()).length-1;v>=0;v--)r.removeItem(x[v],!1);f&&r.updateCombo(f)}else if(o===Vc){var m,y=n.getModel().parentId,b=!1;(h||[]).forEach(function(w){b||xr(w,function(E){return E.id!==d||(m=E,b=!0,!1)})}),m.removed=!0,m&&m.children&&m.children.forEach(function(w){t.removeItem(w.id)});var x;for(v=(x=n.getEdges()).length;v>=0;v--)r.removeItem(x[v],!1);y&&r.updateCombo(y)}n.destroy(),r.emit("afterremoveitem",{item:i,type:o})}},e.prototype.setItemState=function(n,t,r){var i=this.graph,o=t;he(r)&&(o="".concat(t,":").concat(r)),n.hasState(o)===r&&r||he(r)&&n.hasState(o)||(i.emit("beforeitemstatechange",{item:n,state:o,enabled:r}),n.setState(t,r),i.autoPaint(),i.emit("afteritemstatechange",{item:n,state:o,enabled:r}))},e.prototype.priorityState=function(n,t){var r=this.graph,i=n;he(n)&&(i=r.findById(n)),this.setItemState(i,t,!1),this.setItemState(i,t,!0)},e.prototype.clearItemStates=function(n,t){var r=this.graph;he(n)&&(n=r.findById(n)),r.emit("beforeitemstatesclear",{item:n,states:t}),n.clearStates(t),r.emit("afteritemstatesclear",{item:n,states:t})},e.prototype.refreshItem=function(n){var t=this.graph;he(n)&&(n=t.findById(n)),t.emit("beforeitemrefresh",{item:n}),n.refresh(),t.emit("afteritemrefresh",{item:n})},e.prototype.addCombos=function(n,t){var r=this,i=this.graph;(n||[]).forEach(function(a){eo(a,function(s){var u;return t.forEach(function(c){c.id===s.id&&(c.children=s.children,c.depth=s.depth,u=c)}),u&&r.addItem("combo",u),!0})});var o=i.get("comboGroup");o&&o.sort()},e.prototype.changeItemVisibility=function(n,t){var r=this,i=this.graph;if(he(n)&&(n=i.findById(n)),n){if(i.emit("beforeitemvisibilitychange",{item:n,visible:t}),n.changeVisibility(t),n.getType&&n.getType()===Pd)re(n.getEdges(),function(c){(!t||c.get("source").isVisible()&&c.get("target").isVisible())&&r.changeItemVisibility(c,t)});else if(n.getType&&n.getType()===Vc){var o=i.get("comboTrees"),a=n.get("id"),s=[],u=!1;(o||[]).forEach(function(c){u||c.children&&c.children.length!==0&&xr(c,function(l){return l.id!==a||(s=l.children,u=!0,!1)})}),s&&(!t||t&&!n.getModel().collapsed)&&s.forEach(function(c){var l=i.findById(c.id);r.changeItemVisibility(l,t)}),re(n.getEdges(),function(c){(!t||c.get("source").isVisible()&&c.get("target").isVisible())&&r.changeItemVisibility(c,t)})}return i.emit("afteritemvisibilitychange",{item:n,visible:t}),n}},e.prototype.destroy=function(){this.graph=null,this.destroyed=!0},e}(),aR=function(){function e(n){this.graph=n,this.destroyed=!1}return e.prototype.updateState=function(n,t,r){var i=this.graph.get("states"),o=t;he(r)&&(o="".concat(t,":").concat(r)),i[o]||(i[o]=[]),r?i[o].push(n):i[o]=i[o].filter(function(a){return a!==n}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:i})},e.prototype.updateStates=function(n,t,r){var i=this.graph.get("states");(he(t)?[t]:t).forEach(function(o){var a=o;i[a]||(i[a]=[]),he(r)&&(a="".concat(o,":").concat(r)),r?i[a].push(n):i[a]=i[a].filter(function(s){return s!==n})}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:t})},e.prototype.destroy=function(){this.graph=null,this.destroyed=!0},e}(),sR=function(e,n){return e&&n?e.replace(/\\?\{([^{}]+)\}/g,function(t,r){if(t.charAt(0)==="\\")return t.slice(1);var i=n[r];return i===0&&(i="0"),i||""}):e},vM=function(e){var n=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var t=0,r=e;t<r.length;t++){var i=r[t],o=i.x,a=i.y;n.push(o),n.push(a)}var s=gv(n);return s.unshift(["M",e[0].x,e[0].y]),s},Ld=function(e,n,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var i={x:(1-t)*e.x+t*n.x,y:(1-t)*e.y+t*n.y},o=[0,0];Lr(o,[n.x-e.x,n.y-e.y]),o&&(o[0]||o[1])||(o=[0,0]);var a=[-o[1]*r,o[0]*r];return i.x+=a[0],i.y+=a[1],i},kv=function(e){var n=[];return e.forEach(function(t){if(t[0]!=="A")for(var r=1;r<t.length;r+=2)n.push([t[r],t[r+1]]);else{var i=t.length;n.push([t[i-2],t[i-1]])}}),n},Cv=function(e){if(e.length<2)throw new Error("point length must larger than 2, now it's ".concat(e.length));var n=e[0],t=e[1],r=e[e.length-1],i=e[e.length-2];e.unshift(r),e.unshift(i),e.push(n),e.push(t);for(var o=[],a=1;a<e.length-2;a+=1){var s=e[a-1].x,u=e[a-1].y,c=e[a].x,l=e[a].y,h=e[a+1].x,d=e[a+1].y,f=c+(h-s)/6,p=l+(d-u)/6,g=h-((a!==e.length-2?e[a+2].x:h)-c)/6,v=d-((a!==e.length-2?e[a+2].y:d)-l)/6;o.push(["C",f,p,g,v,h,d])}return o.unshift(["M",r.x,r.y]),o},mM=function(e,n){return bn([0,0],Lr([0,0],e),n)},yM=function(e,n){var t=[e[1]-n[1],n[0]-e[0]],r=Math.sqrt(t[0]*t[0]+t[1]*t[1]);if(r===0)throw new Error("p0 should not be equal to p1");return[t[0]/r,t[1]/r]},bM=function(e,n){return[n[0]-e[0],n[1]-e[1]]};function Av(e,n){if(!e||e.length<1)return"";if(e.length===1)return function(u){var c=[u[0][0],u[0][1]-n],l=[u[0][0],u[0][1]+n];return"M ".concat(c," A ").concat(n,",").concat(n,",0,0,0,").concat(l," A ").concat(n,",").concat(n,",0,0,0,").concat(c)}(e);if(e.length===2)return function(u){var c=bn([0,0],yM(u[0],u[1]),n),l=bn([0,0],c,-1),h=hn([0,0],u[0],c),d=hn([0,0],u[1],c),f=hn([0,0],u[1],l),p=hn([0,0],u[0],l);return"M ".concat(h," L ").concat(d," A ").concat([n,n,"0,0,0",f].join(",")," L ").concat(p," A ").concat([n,n,"0,0,0",h].join(","))}(e);for(var t=new Array(e.length),r=0;r<t.length;++r){var i=r===0?e[e.length-1]:e[r-1],o=e[r],a=bn([0,0],yM(i,o),n);t[r]=[hn([0,0],i,a),hn([0,0],o,a)]}var s="A ".concat([n,n,"0,0,0,"].join(","));return t=t.map(function(u,c){var l="";return c===0&&(l="M ".concat(t[t.length-1][1]," ")),l+="".concat(s+u[0]," L ").concat(u[1])}),t.join(" ")}function xM(e,n){var t,r,i,o=e.length;if(!e||o<1)return"";if(o===1)return r=[(t=e)[0][0],t[0][1]-n],i=[t[0][0],t[0][1]+n],"M ".concat(r," A ").concat([n,n,"0,0,0",i].join(",")," A ").concat([n,n,"0,0,0",r].join(","));if(o===2)return function(c){var l=bM(c[0],c[1]),h=mM(l,n),d=hn([0,0],c[0],bn([0,0],h,-1)),f=hn([0,0],c[1],h),p=1.2*n,g=mM(Lr([0,0],l),p),v=bn([0,0],g,-1),m=hn([0,0],d,v),y=hn([0,0],f,v),b=hn([0,0],d,g);return"M ".concat(d," C ").concat([m,y,f].join(",")," S ").concat([b,d].join(",")," Z")}(e);for(var a=e.map(function(c,l){var h=e[(l+1)%o];return{p:c,v:Lr([0,0],bM(c,h))}}),s=0;s<a.length;++s){var u=Lr([0,0],hn([0,0],a[s>0?s-1:o-1].v,bn([0,0],a[s].v,-1)));a[s].p=hn([0,0],a[s].p,bn([0,0],u,n))}return a.map(function(c){var l=c.p;return{x:l[0],y:l[1]}})}const uR=Object.freeze(Object.defineProperty({__proto__:null,getClosedSpline:Cv,getControlPoint:Ld,getSpline:vM,getStarPath:function(e,n){for(var t=[],r=0;r<5;r++){var i=Math.cos((18+72*r)/180*Math.PI)*e,o=Math.sin((18+72*r)/180*Math.PI)*e,a=Math.cos((54+72*r)/180*Math.PI)*n,s=Math.sin((54+72*r)/180*Math.PI)*n;r===0?t.push(["M",i,-o]):t.push(["L",i,-o]),t.push(["L",a,-s])}return t.push(["Z"]),t},paddedHull:xM,pathToPoints:kv,pointsToPolygon:function(e,n){var t=e.length;if(!t)return"";for(var r="",i=0;i<t;i++){var o=e[i];r+=sR(i===0?"M{x} {y}":"L{x} {y}",o)}return n&&(r+="Z"),r},roundedHull:Av},Symbol.toStringTag,{value:"Module"}));var wM=function(e,n,t){return(e.y-t.y)*(n.x-t.x)-(e.x-t.x)*(n.y-t.y)},EM=function(e){var n=e.map(function(c){return{x:c.getModel().x,y:c.getModel().y}});n.sort(function(c,l){return c.x===l.x?c.y-l.y:c.x-l.x});for(var t={},r=n.length-1;r>=0;r--){var i=n[r],o=i.x,a=i.y;t["".concat(o,"-").concat(a)]&&n.splice(r,1),t["".concat(o,"-").concat(a)]=!0}if(n.length===1)return n;var s=[];for(r=0;r<n.length;r++){for(;s.length>=2&&wM(s[s.length-2],s[s.length-1],n[r])<=0;)s.pop();s.push(n[r])}var u=[];for(r=n.length-1;r>=0;r--){for(;u.length>=2&&wM(u[u.length-2],u[u.length-1],n[r])<=0;)u.pop();u.push(n[r])}return u.pop(),s.pop(),s.concat(u)},cR={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function lR(e,n,t){var r=!1,i=function(s,u){return n.cells[s+u*n.width]},o=function(s,u){var c=0;return i(s-1,u-1)>=t&&(c+=1),i(s,u-1)>t&&(c+=2),i(s-1,u)>t&&(c+=4),i(s,u)>t&&(c+=8),c},a=function(s,u){for(var c,l,h=s,d=u,f=0;f<n.width*n.height;f++){if(c=h,l=d,e.findIndex(function(p){return p.x===h&&p.y===d})>-1){if(e[0].x===h&&e[0].y===d)return!0}else e.push({x:h,y:d});switch(o(h,d)){case-1:return!0;case 0:case 3:case 2:case 7:h++;break;case 12:case 14:case 4:h--;break;case 6:c===0&&(l===-1?h-=1:h+=1);break;case 1:case 13:case 5:d--;break;case 9:c===1&&(l===0?d-=1:d+=1);break;case 10:case 8:case 11:d++;break;default:return!0}}};this.march=function(){for(var s=0;s<n.width&&!r;s+=1)for(var u=0;u<n.height&&!r;u+=1)i(s,u)>t&&o(s,u)!==15&&(r=a(s,u));return r}}var SM=function(e,n){var t=Number.POSITIVE_INFINITY,r=null;return e.forEach(function(i){var o=B0(i,n);o>=0&&o<t&&(r=i,t=o)}),r};function hR(e,n,t,r,i){var o=function(u,c,l){var h=null,d=Number.POSITIVE_INFINITY;return c.forEach(function(f){var p={x:u.getModel().x,y:u.getModel().y},g={x:f.getModel().x,y:f.getModel().y},v=ld(p,g),m=new $a(p.x,p.y,g.x,g.y),y=l.reduce(function(b,x){return B0(x,m)>0?b+1:b},0);v*Math.pow(y+1,2)<d&&(h=f,d=v*Math.pow(y+1,2))}),h}(e,t,n);if(o===null)return[];var a=function(u,c,l,h){var d=[],f=[];f.push(u);for(var p=!0,g=0,v=function(b,x){var w=!1;return x.forEach(function(E){w||(R0(b,{x:E.x1,y:E.y1})||R0(b,{x:E.x2,y:E.y2}))&&(w=!0)}),w},m=function(b,x){for(var w=0,E=x;w<E.length;w++){var S=E[w].getBBox(),M=[[S.x,S.y],[S.x+S.width,S.y],[S.x,S.y+S.height],[S.x+S.width,S.y+S.height]];if(Ic(M,b.x,b.y))return!0}return!1};p&&g<l;){p=!1;for(var y=function(){var b=f.pop(),x=SM(c,b);if(x){var w=hE(x,b),E=w[0];if(w[1]===2){var S=function(M){for(var k=h,_=MM(x,k,E,M),C=v(_,f)||v(_,d),T=m(_,c);!C&&T&&k>=1;)_=MM(x,k/=1.5,E,M),C=v(_,f)||v(_,d),T=m(_,c);!_||C||M&&T||(f.push(new $a(b.x1,b.y1,_.x,_.y)),f.push(new $a(_.x,_.y,b.x2,b.y2)),p=!0)};S(!0),p||S(!1)}}p||d.push(b),g+=1};!p&&f.length;)y()}for(;f.length;)d.push(f.pop());return d}(new $a(e.getModel().x,e.getModel().y,o.getModel().x,o.getModel().y),n,r,i),s=function(u){for(var c=[];u.length>0;){var l=u.pop();if(u.length===0){c.push(l);break}var h=u.pop(),d=new $a(l.x1,l.y1,h.x2,h.y2);SM(n,d)?(c.push(l),u.push(h)):u.push(d)}return c}(a);return s}var dR=function(e,n,t){var r=Object.assign(cR,t),i=dE(e.map(function(w){return{x:w.getModel().x,y:w.getModel().y}}));e=e.sort(function(w,E){return ld({x:w.getModel().x,y:w.getModel().y},i)-ld({x:E.getModel().x,y:E.getModel().y},i)});var o=[],a=[];e.forEach(function(w){hR(w,n,o,r.maxRoutingIterations,r.morphBuffer).forEach(function(E){a.push(E)}),o.push(w)});for(var s,u,c,l,h,d=function(w,E,S){var M={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},k=[];w.forEach(function(A){k.push(A.getBBox())}),E.forEach(function(A){k.push(A.getBBox())});for(var _=0,C=k;_<C.length;_++){var T=C[_];M.minX=(T.minX<M.minX?T.minX:M.minX)-S,M.minY=(T.minY<M.minY?T.minY:M.minY)-S,M.maxX=(T.maxX>M.maxX?T.maxX:M.maxX)+S,M.maxY=(T.maxY>M.maxY?T.maxY:M.maxY)+S}return M.width=M.maxX-M.minX,M.height=M.maxY-M.minY,M.x=M.minX,M.y=M.minY,M}(e,a,r.nodeR0),f=(s=d.width,u=d.height,c=r.pixelGroupSize,l=Math.ceil(s/c),h=Math.ceil(u/c),{cells:new Float32Array(Math.max(0,l*h)).fill(0),width:l,height:h}),p=[],g=[],v=0;v<r.maxMarchingIterations;v++)if(fR(e,n,a,d,f,r),g=[],new lR(p=[],f,r.threshold).march()){var m=p.map(function(w){return{x:Math.round(w.x*r.pixelGroupSize+d.minX),y:Math.round(w.y*r.pixelGroupSize+d.minY)}});if(m){var y=m.length;if(r.skip>1)for(y=Math.floor(m.length/r.skip);y<3&&r.skip>1;)r.skip-=1,y=Math.floor(m.length/r.skip);for(var b=0,x=0;x<y;x+=1,b+=r.skip)g.push({x:m[b].x,y:m[b].y})}if(g&&function(){for(var w=0,E=e;w<E.length;w++){var S=E[w],M=g.map(function(k){return[k.x,k.y]});if(!Ic(M,S.getBBox().centerX,S.getBBox().centerY))return!1}return!0}())return g;if(r.threshold*=.9,v<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(r.nonMemberInfluenceFactor!==0&&n.length>0))break;r.nonMemberInfluenceFactor*=.8}}return g};function fR(e,n,t,r,i,o){function a(d,f){var p=Math.floor((d-f)/o.pixelGroupSize);return p<0?0:p}function s(d,f){return d*o.pixelGroupSize+f}var u=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),c=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),l=function(d,f){return[Math.min(a(d.minX,f+r.minX),i.width),Math.min(a(d.minY,f+r.minY),i.height),Math.min(a(d.maxX,-f+r.minX),i.width),Math.min(a(d.maxY,-f+r.minY),i.height)]},h=function(d,f){for(var p=d.getBBox(),g=l(p,o.nodeR1),v=g[0],m=g[1],y=g[2],b=g[3],x=m;x<b;x+=1)for(var w=v;w<y;w+=1)if(!(f<0&&i[w+x*i.width]<=0)){var E=s(w,r.minX),S=s(x,r.minY),M=pE({x:E,y:S},{x:p.minX,y:p.minY,width:p.width,height:p.height});if(M<Math.pow(o.nodeR1,2)){var k=Math.sqrt(M)-o.nodeR1;i.cells[w+x*i.width]+=f*k*k}}};o.nodeInfluenceFactor&&e.forEach(function(d){h(d,o.nodeInfluenceFactor/u)}),o.edgeInfluenceFactor&&t.forEach(function(d){(function(f,p){for(var g=f.getBBox(),v=l(g,o.edgeR1),m=v[0],y=v[1],b=v[2],x=v[3],w=y;w<x;w+=1)for(var E=m;E<b;E+=1)if(!(p<0&&i.cells[E+w*i.width]<=0)){var S=s(E,r.minX),M=s(w,r.minY),k=fE({x:S,y:M},f);if(k<Math.pow(o.edgeR1,2)){var _=Math.sqrt(k)-o.edgeR1;i.cells[E+w*i.width]+=p*_*_}}})(d,o.edgeInfluenceFactor/c)}),o.negativeNodeInfluenceFactor&&n.forEach(function(d){h(d,o.negativeNodeInfluenceFactor/u)})}function MM(e,n,t,r){var i=e.getBBox(),o=t[0],a=t[1],s=t[2],u=t[3],c={topLeft:{x:i.minX-n,y:i.minY-n},topRight:{x:i.maxX+n,y:i.minY-n},bottomLeft:{x:i.minX-n,y:i.maxY+n},bottomRight:{x:i.maxX+n,y:i.maxY+n}},l=i.height*i.width;function h(d,f){return i.width*(.5*(d.y-i.minY+(f.y-i.minY)))}if(a)return o?r?c.topLeft:c.bottomRight:s?r?c.bottomLeft:c.topRight:h(a,u)<.5*l?a.y>u.y?r?c.topLeft:c.bottomRight:r?c.topRight:c.bottomLeft:a.y<u.y?r?c.bottomLeft:c.topRight:r?c.bottomRight:c.topLeft;if(u){if(o)return r?c.topRight:c.bottomLeft;if(s)return r?c.bottomRight:c.topLeft}return h(o,s)<.5*l?o.x>s.x?r?c.topLeft:c.bottomRight:r?c.bottomLeft:c.topRight:o.x<s.x?r?c.topRight:c.bottomLeft:r?c.bottomRight:c.topLeft}var pR=function(){function e(n,t){this.cfg=Zt(this.getDefaultCfg(),t),this.graph=n,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return he(r)?n.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return he(r)?n.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return e.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},e.prototype.setPadding=function(){var n=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+n:10+n,this.cfg.bubbleCfg={nodeR0:this.padding-n,nodeR1:this.padding-n,morphBuffer:this.padding-n}},e.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(this.type="round-convex")},e.prototype.calcPath=function(n,t){var r,i,o;switch(this.type){case"round-convex":o=Av((r=EM(n)).map(function(a){return[a.x,a.y]}),this.padding),i=Wc(o);break;case"smooth-convex":(r=EM(n)).length===2?(o=Av(r.map(function(a){return[a.x,a.y]}),this.padding),i=Wc(o)):r.length>2&&(o=xM(r.map(function(a){return[a.x,a.y]}),this.padding),i=Cv(o));break;case"bubble":i=(r=dR(n,t,this.cfg.bubbleCfg)).length>=2&&Cv(r)}return i},e.prototype.render=function(){this.group.addShape("path",{attrs:P({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},e.prototype.addMember=function(n){if(n){he(n)&&(n=this.graph.findById(n)),this.members.push(n);var t=this.nonMembers.indexOf(n);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},e.prototype.addNonMember=function(n){if(n){he(n)&&(n=this.graph.findById(n)),this.nonMembers.push(n);var t=this.members.indexOf(n);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},e.prototype.removeMember=function(n){if(n){he(n)&&(n=this.graph.findById(n));var t=this.members.indexOf(n);return t>-1&&(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},e.prototype.removeNonMember=function(n){if(n){he(n)&&(n=this.graph.findById(n));var t=this.nonMembers.indexOf(n);return t>-1&&(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},e.prototype.updateData=function(n,t){var r=this;this.group.findById(this.id).remove(),n&&(this.members=n.map(function(i){return he(i)?r.graph.findById(i):i})),t&&(this.nonMembers=t.map(function(i){return he(i)?r.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},e.prototype.updateStyle=function(n){this.group.findById(this.id).attr(P({},n))},e.prototype.updateCfg=function(n){var t=this;this.cfg=Zt(this.cfg,n),this.id=this.cfg.id,this.group=this.cfg.group,n.members&&(this.members=this.cfg.members.map(function(r){return he(r)?t.graph.findById(r):r})),n.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return he(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},e.prototype.contain=function(n){var t,r,i=this,o=(t=he(n)?this.graph.findById(n):n).getKeyShape();if(t.get("type")==="path")r=kv(o.attr("path"));else{var a=o.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return r=r.map(function(s){var u=i.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),lE(r,kv(this.path))},e.prototype.destroy=function(){this.group.remove(),this.cfg=null},e}(),Iv=br,gR=function(e){function n(t){var r=e.call(this)||this;return r.sortCombos=nu(function(){var i=r.get("comboSorted");if(r&&!r.destroyed&&!i){r.set("comboSorted",!0);var o=[],a={};(r.get("comboTrees")||[]).forEach(function(s){xr(s,function(u){return o[u.depth]?o[u.depth].push(u.id):o[u.depth]=[u.id],a[u.id]=u.depth,!0})}),(r.getEdges().concat(r.get("vedges"))||[]).forEach(function(s){var u=s.getModel(),c=a[u.source]||0,l=a[u.target]||0,h=Math.max(c,l);o[h]?o[h].push(u.id):o[h]=[u.id]}),o.forEach(function(s){if(s&&s.length)for(var u=s.length-1;u>=0;u--){var c=r.findById(s[u]);c&&c.toFront()}})}},500,!1),r.cfg=Zt(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Qi(r.cfg.maxStep),r.redoStack=new Qi(r.cfg.maxStep)),r}return At(n,e),n.prototype.init=function(){this.initCanvas();var t=new tR(this),r=new FL(this),i=new oR(this),o=new aR(this);this.set({viewController:t,modeController:r,itemController:i,stateController:o}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},n.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=(t.get("el")||{}).id,i=r===void 0?"g6":r,o=t.addGroup({id:"".concat(i,"-root"),className:Et.rootContainerClassName});if(this.get("groupByTypes")){var a=o.addGroup({id:"".concat(i,"-edge"),className:Et.edgeContainerClassName}),s=o.addGroup({id:"".concat(i,"-node"),className:Et.nodeContainerClassName}),u=o.addGroup({id:"".concat(i,"-combo"),className:Et.comboContainerClassName});u.toBack(),this.set({nodeGroup:s,edgeGroup:a,comboGroup:u})}var c=o.addGroup({id:"".concat(i,"-delegate"),className:Et.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},n.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},n.prototype.set=function(t,r){return dn(t)?this.cfg=P(P({},this.cfg),t):this.cfg[t]=r,t!=="enabledStack"||!r||this.undoStack||this.redoStack||(this.undoStack=new Qi(this.cfg.maxStep),this.redoStack=new Qi(this.cfg.maxStep)),this},n.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},n.prototype.getGroup=function(){return this.get("group")},n.prototype.getContainer=function(){return this.get("container")},n.prototype.getMinZoom=function(){return this.get("minZoom")},n.prototype.setMinZoom=function(t){return this.set("minZoom",t)},n.prototype.getMaxZoom=function(){return this.get("maxZoom")},n.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},n.prototype.getWidth=function(){return this.get("width")},n.prototype.getHeight=function(){return this.get("height")},n.prototype.clearItemStates=function(t,r){he(t)&&(t=this.findById(t));var i=this.get("itemController");r||(r=t.get("states")),i.clearItemStates(t,r),this.get("stateController").updateStates(t,r,!1)},n.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},n.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},n.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},n.prototype.findById=function(t){return this.get("itemMap")[t]},n.prototype.find=function(t,r){var i;return re(this.get("".concat(t,"s")),function(o,a){if(r(o,a))return i=o}),i},n.prototype.findAll=function(t,r){var i=[];return re(this.get("".concat(t,"s")),function(o,a){r(o,a)&&i.push(o)}),i},n.prototype.findAllByState=function(t,r,i){return i?this.findAll(t,function(o){return o.hasState(r)&&i(o)}):this.findAll(t,function(o){return o.hasState(r)})},n.prototype.translate=function(t,r,i,o){var a=this,s=this.get("group"),u=_t(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),i){var c=Tc({animateCfg:o,callback:function(){return a.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});D0(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},i,c||{duration:500,easing:"easeCubic"})}else u=Iv(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},n.prototype.moveTo=function(t,r,i,o){var a=this.get("group");D0(a,{x:t,y:r},i,o||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:a.getMatrix()})},n.prototype.fitView=function(t,r,i,o){t&&this.set("fitViewPadding",t);var a=this.get("viewController");r?a.fitViewByRules(r,i,o):a.fitView(i,o),this.autoPaint()},n.prototype.fitCenter=function(t,r){this.get("viewController").fitCenter(t,r),this.autoPaint()},n.prototype.addBehaviors=function(t,r){return this.get("modeController").manipulateBehaviors(t,r,!0),this},n.prototype.removeBehaviors=function(t,r){return this.get("modeController").manipulateBehaviors(t,r,!1),this},n.prototype.updateBehavior=function(t,r,i){return this.get("modeController").updateBehavior(t,r,i),this},n.prototype.zoom=function(t,r,i,o){var a=this,s=this.get("group"),u=_t(s.getMatrix())||[1,0,0,0,1,0,0,0,1],c=this.get("minZoom"),l=this.get("maxZoom"),h=this.getZoom()||1,d=h*t,f=t,p=!1;if(c&&d<c?(f=c/h,p=!0):l&&d>l&&(f=l/h,p=!0),u=Iv(u,r?[["t",-r.x,-r.y],["s",f,f],["t",r.x,r.y]]:[["s",f,f]]),i){var g=_t(s.getMatrix());g||(g=[1,0,0,0,1,0,0,0,1]);var v=g[0],m=v*f,y=Tc({animateCfg:o,callback:function(){return a.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(b){if(b===1)g=u;else{var x=j0(v,m,b)/g[0];g=Iv(g,r?[["t",-r.x,-r.y],["s",x,x],["t",r.x,r.y]]:[["s",x,x]])}return{matrix:g}},y)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!p},n.prototype.zoomTo=function(t,r,i,o){var a=t/this.getZoom();return this.zoom(a,r,i,o)},n.prototype.focusItem=function(t,r,i){var o=this.get("viewController"),a=!1;r?a=!0:r===void 0&&(a=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),o.focus(t,a,s),this.autoPaint()},n.prototype.focusItems=function(t,r,i,o){this.get("viewController").focusItems(t,r,i,o)},n.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},n.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},n.prototype.getPointByClient=function(t,r){return this.get("viewController").getPointByClient(t,r)},n.prototype.getClientByPoint=function(t,r){return this.get("viewController").getClientByPoint(t,r)},n.prototype.getPointByCanvas=function(t,r){return this.get("viewController").getPointByCanvas(t,r)},n.prototype.getCanvasByPoint=function(t,r){return this.get("viewController").getCanvasByPoint(t,r)},n.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},n.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},n.prototype.showItem=function(t,r){r===void 0&&(r=!0);var i=this.get("itemController").changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=i.getID(),a={},s={};switch(i.getType()){case"node":a.nodes=[{id:o,visible:!1}],s.nodes=[{id:o,visible:!0}];break;case"edge":a.nodes=[{id:o,visible:!1}],s.edges=[{id:o,visible:!0}];break;case"combo":a.nodes=[{id:o,visible:!1}],s.combos=[{id:o,visible:!0}]}this.pushStack("visible",{before:a,after:s})}},n.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var i=this.get("itemController").changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=i.getID(),a={},s={};switch(i.getType()){case"node":a.nodes=[{id:o,visible:!0}],s.nodes=[{id:o,visible:!1}];break;case"edge":a.nodes=[{id:o,visible:!0}],s.edges=[{id:o,visible:!1}];break;case"combo":a.nodes=[{id:o,visible:!0}],s.combos=[{id:o,visible:!1}]}this.pushStack("visible",{before:a,after:s})}},n.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},n.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},n.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},n.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var i=t;if(he(t)&&(i=this.findById(t)),!(!i&&he(t))){if(i){var o="";if(i.getType&&(o=i.getType()),r&&this.get("enabledStack")){var a=P(P({},i.getModel()),{itemType:o}),s={};switch(o){case"node":s.nodes=[a],s.edges=[];for(var u=i.getEdges(),c=u.length-1;c>=0;c--)s.edges.push(P(P({},u[c].getModel()),{itemType:"edge"}));break;case"edge":s.edges=[a];break;case"combo":s.combos=[a]}this.pushStack("delete",{before:s,after:{}})}if(o==="node"&&i.getModel().comboId&&this.updateComboTree(i,void 0,!1),this.get("itemController").removeItem(i),o==="combo"){var l=X0(this.get("comboTrees"));this.set("comboTrees",l)}}}},n.prototype.innerAddItem=function(t,r,i){if(!function(p,g){if(p==="node"||p==="combo"){if(g.id&&!he(g.id))return!1}else if(!(p!=="edge"||g.source&&g.target))return!1;return!0}(t,r))return!1;if(!r.id||!this.findById(r.id)){var o,a=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(a.forEach(function(p){u||eo(p,function(g){if(r.parentId===g.id){u=!0;var v=P({id:r.id,depth:g.depth+2},r);g.children?g.children.push(v):g.children=[v],r.depth=v.depth,o=i.addItem(t,r)}var m=s[g.id];return u&&m&&m.getType&&m.getType()==="combo"&&i.updateCombo(m,g.children),!0})}),!u){var c=P({id:r.id,depth:0},r);r.depth=c.depth,a.push(c),o=i.addItem(t,r)}this.set("comboTrees",a),r.collapsed&&(this.collapseCombo(o,!1),this.updateCombo(o))}else if(t==="node"&&he(r.comboId)&&a){var l;(l=this.findById(r.comboId))&&l.getType&&l.getType(),o=i.addItem(t,r);var h=this.get("itemMap"),d=!1,f=!1;a.forEach(function(p){f||d||eo(p,function(g){if(g.id===r.id)return f=!0,!1;if(r.comboId===g.id&&!f){d=!0;var v=_t(r);v.itemType="node",g.children?g.children.push(v):g.children=[v],v.depth=g.depth+1}return d&&h[g.id].getType&&h[g.id].getType()==="combo"&&i.updateCombo(h[g.id],g.children),!0})})}else o=i.addItem(t,r);return(t==="node"&&r.comboId||t==="combo"&&r.parentId)&&(l=this.findById(r.comboId||r.parentId))&&l.getType&&l.getType()==="combo"&&l.addChild(o),o}},n.prototype.addItem=function(t,r,i,o){i===void 0&&(i=!0),o===void 0&&(o=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!o);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var c=this.get("combos");if(c&&c.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var l=P(P({},u.getModel()),{itemType:t}),h={};switch(t){case"node":h.nodes=[l];break;case"edge":h.edges=[l];break;case"combo":h.combos=[l]}this.pushStack("add",{before:{},after:h})}return u},n.prototype.addItems=function(t,r,i){t===void 0&&(t=[]),r===void 0&&(r=!0),i===void 0&&(i=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!i);for(var a=this.get("itemController"),s=[],u=0;u<t.length;u++)(c=t[u]).type!=="edge"&&c.type!=="vedge"?s.push(this.innerAddItem(c.type,c.model,a)):s.push(void 0);for(u=0;u<t.length;u++){var c;(c=t[u]).type!=="edge"&&c.type!=="vedge"||(s[u]=this.innerAddItem(c.type,c.model,a))}if(i){var l=this.get("combos");l&&l.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){var h={nodes:[],edges:[],combos:[]};for(u=0;u<t.length;u++){var d=t[u].type,f=s[u];if(f&&f!==!0){var p=P(P({},f.getModel()),{itemType:d});switch(d){case"node":h.nodes.push(p);break;case"edge":h.edges.push(p);break;case"combo":h.combos.push(p)}}}this.pushStack("addItems",{before:{},after:h})}return s},n.prototype.add=function(t,r,i,o){return i===void 0&&(i=!0),o===void 0&&(o=!0),this.addItem(t,r,i,o)},n.prototype.updateItem=function(t,r,i){var o=this;i===void 0&&(i=!0);var a,s=this.get("itemController");a=he(t)?this.findById(t):t;var u,c=i&&this.get("enabledStack");c&&(u=_t(a.getModel()));var l="";a.getType&&(l=a.getType());var h=ir([],a.getStates(),!0);if(l==="combo"&&re(h,function(g){return o.setItemState(a,g,!1)}),s.updateItem(a,r),l==="combo"&&re(h,function(g){return o.setItemState(a,g,!0)}),c){var d={nodes:[],edges:[],combos:[]},f={nodes:[],edges:[],combos:[]},p=P({id:u.id},r);switch(l){case"node":d.nodes.push(u),f.nodes.push(p);break;case"edge":d.edges.push(u),f.edges.push(p);break;case"combo":d.combos.push(u),f.combos.push(p)}this.pushStack("update",{before:d,after:f})}},n.prototype.update=function(t,r,i){i===void 0&&(i=!0),this.updateItem(t,r,i)},n.prototype.setItemState=function(t,r,i){he(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,r,i),this.get("stateController").updateState(t,r,i)},n.prototype.priorityState=function(t,r){this.get("itemController").priorityState(t,r)},n.prototype.data=function(t){ME(t),this.set("data",t)},n.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var i=r.nodes,o=i===void 0?[]:i,a=r.edges,s=a===void 0?[]:a,u=r.combos,c=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(o.map(function(p){return{type:"node",model:p}}),!1,!1),(c==null?void 0:c.length)!==0){var l=Y0(c,o);this.set("comboTrees",l),t.addCombos(c)}t.addItems(s.map(function(p){return{type:"edge",model:p}}),!1,!1);var h=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var d=t.get("layoutController");if(d){if(d.layout(f),this.destroyed)return}else f();function f(){(t.get("comboTrees")||[]).forEach(function(p){eo(p,function(g){var v=t.findById(g.id);return v.getType()==="combo"&&g.collapsed&&(t.collapseCombo(g.id,!1),t.updateCombo(v)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",h),setTimeout(function(){var p;(p=t.getCombos())===null||p===void 0||p.forEach(function(g){g.set("animate",!0)})},0)}this.get("groupByTypes")||(c&&c.length!==0?this.sortCombos():r.nodes&&r.edges&&r.nodes.length<r.edges.length?this.getNodes().forEach(function(p){p.toFront()}):this.getEdges().forEach(function(p){p.toBack()}))},n.prototype.read=function(t){this.data(t),this.render()},n.prototype.diffItems=function(t,r,i){var o,a=this,s=this.get("itemMap");re(i,function(u){if(o=s[u.id]){if(a.get("animate")&&t==="node"){var c=o.getContainer().getMatrix();c||(c=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:c[6],y:c[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},n.prototype.changeData=function(t,r){var i,o=this;r===void 0&&(r=!0);var a=this,s=t||a.get("data");if(!ME(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:a.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(b){return a.clearItemStates(b)}),this.getEdges().map(function(b){return a.clearItemStates(b)});var u=this.get("canvas"),c=u.get("localRefresh");u.set("localRefresh",!1),a.get("data")||(a.data(s),a.render());var l=this.get("itemMap"),h={nodes:[],edges:[]},d=s.combos;if(d){var f=Y0(d,s.nodes);this.set("comboTrees",f)}else this.set("comboTrees",[]);this.diffItems("node",h,s.nodes),re(l,function(b,x){l[x].getModel().depth=0,b.getType&&b.getType()==="edge"||(b.getType&&b.getType()==="combo"?(delete l[x],b.destroy()):h.nodes.indexOf(b)<0&&(delete l[x],a.remove(b,!1)))});for(var p=this.getCombos(),g=p.length-1;g>=0;g--)p[g].destroyed&&p.splice(g,1);d&&(a.addCombos(d),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",h,s.edges),re(l,function(b,x){(!b.getType||b.getType()!=="node"&&b.getType()!=="combo")&&h.edges.indexOf(b)<0&&(delete l[x],a.remove(b,!1))}),(this.get("comboTrees")||[]).forEach(function(b){eo(b,function(x){return o.findById(x.id).getType()==="combo"&&x.collapsed&&o.collapseCombo(x.id,!1),!0})}),this.set({nodes:h.nodes,edges:h.edges});var v=(this.get("layout")||{}).relayoutAtChangeData,m=v===void 0||v,y=this.get("layoutController");return m&&y&&(y.changeData(function(){setTimeout(function(){var b;(b=a.getCombos())===null||b===void 0||b.forEach(function(x){x.set("animate",!0)})},0)}),a.get("animate")&&!y.getLayoutType()?(a.positionsAnimate(),(i=a.getCombos())===null||i===void 0||i.forEach(function(b){return b.set("animate",!0)})):a.autoPaint()),setTimeout(function(){u.set("localRefresh",c)},16),this.set("data",s),this.emit("afterchangedata"),this},n.prototype.addCombos=function(t){var r=this.get("comboTrees");this.get("itemController").addCombos(r,t)},n.prototype.createCombo=function(t,r,i){var o=this;i===void 0&&(i=!0);var a=this.get("itemController");this.set("comboSorted",!1);var s,u="";if(t){if(he(t))u=t,s={id:t};else{if(!(u=t.id))return;s=t}var c=i&&this.get("enabledStack"),l={nodes:[],combos:[]};c&&r.forEach(function(m){var y=o.findById(m),b=y.getType();if(b==="node"||b==="combo"){var x=y.getModel();l["".concat(b,"s")].push({id:m,parentId:b==="node"?x.comboId:x.parentId})}});var h=this.get("comboTrees"),d=new Set(r),f=new Map;h&&(h.forEach(function(m){eo(m,function(y,b,x){if(d.has(y.id)){if(b){var w=o.findById(b.id),E=o.findById(y.id);b.children.splice(x,1),w.removeChild(E),a.updateCombo(w,b.children)}y.itemType==="combo"&&f.set(y.id,y)}return!0})}),h=h.filter(function(m){return!d.has(m.id)}),this.set("comboTrees",h));var p={nodes:[],combos:[]},g=r.map(function(m){var y=o.findById(m),b=y.getModel(),x="";y.getType&&(x=y.getType());var w=f.get(m)||{id:y.getID(),itemType:x};return x==="combo"?(w.parentId=u,b.parentId=u):x==="node"&&(w.comboId=u,b.comboId=u),c&&p["".concat(x,"s")].push({id:b.id,parentId:u}),w});s.children=g,this.addItem("combo",s,!1),this.set("comboSorted",!1),h&&(h.forEach(function(m){xr(m,function(y){return y.id!==u||(y.itemType="combo",y.children=g,!1)})}),this.sortCombos()),c&&(p.combos.push(s),this.pushStack("createCombo",{before:l,after:p}));var v=this.findById(u);!v.getModel().parentId&&v.getChildren().combos.length&&this.updateComboTree(v,void 0,!1),setTimeout(function(){v.set("animate",!0)},0)}},n.prototype.uncombo=function(t,r){var i,o,a=this;r===void 0&&(r=!0);var s=t;if(he(t)&&(s=this.findById(t)),s&&(!s.getType||s.getType()==="combo")){var u=s.getModel(),c=s.getModel().parentId,l=this.get("comboTrees");l||(l=[]);var h,d=this.get("itemMap"),f=s.get("id"),p=[],g=this.get("combos"),v=this.findById(c),m=r&&this.get("enabledStack"),y={};if(m&&((y=_t(u)).children=[]),l.forEach(function(E){h||eo(E,function(S){var M;if(S.id===f){h=S,s.getEdges().map(function(C){return C.getID()}).forEach(function(C){a.removeItem(C,!1)});var k=g.indexOf(s);g.splice(k,1),delete d[f];var _=_t(s.getModel());s.destroy(),a.emit("afterremoveitem",{item:_,type:"combo"})}return!c||!h||S.id!==c||(v.removeCombo(s),(k=(p=S.children).indexOf(h))!==-1&&p.splice(k,1),(M=h.children)===null||M===void 0||M.forEach(function(C){var T=a.findById(C.id),A=T.getModel();T.getType&&T.getType()==="combo"?(C.parentId=c,delete C.comboId,A.parentId=c,delete A.comboId):T.getType&&T.getType()==="node"&&(C.comboId=c,A.comboId=c),v.addChild(T),p.push(C)}),a.updateCombo(v),!1)})}),!c&&h){var b=l.indexOf(h);l.splice(b,1),(i=h.children)===null||i===void 0||i.forEach(function(E){E.parentId=void 0;var S=a.findById(E.id).getModel();delete S.parentId,delete S.comboId,E.itemType!=="node"&&l.push(E)})}if(m){var x={nodes:[],combos:[]},w={nodes:[],combos:[]};(o=h.children)===null||o===void 0||o.forEach(function(E){var S=a.findById(E.id).getType();S!=="node"&&S!=="combo"||(x["".concat(S,"s")].push({id:E.id,parentId:f}),w["".concat(S,"s")].push({id:E.id,parentId:c}))}),x.combos.push(y),this.pushStack("uncombo",{before:x,after:w})}}},n.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var i=this,o=this.get("comboTrees"),a=i.get("itemController"),s=i.get("itemMap");(o||[]).forEach(function(u){eo(u,function(c){var l;if(!c)return!0;var h=s[c.id];if(((l=h==null?void 0:h.getType)===null||l===void 0?void 0:l.call(h))==="combo"){var d=ir([],h.getStates(),!0);re(d,function(f){return r.setItemState(h,f,!1)}),a.updateCombo(h,c.children,t),re(d,function(f){return r.setItemState(h,f,!0)})}return!0})}),i.sortCombos()},n.prototype.updateCombo=function(t){var r,i=this,o=t;if(he(t)&&(o=this.findById(t)),o&&(!o.getType||o.getType()==="combo")){r=o.get("id");var a=this.get("comboTrees"),s=this.get("itemController"),u=this.get("itemMap");(a||[]).forEach(function(c){eo(c,function(l){if(!l)return!0;var h=u[l.id];if(r===l.id&&h&&h.getType&&h.getType()==="combo"){var d=ir([],h.getStates(),!0);re(d,function(f){h.getStateStyle(f)&&i.setItemState(h,f,!1)}),s.updateCombo(h,l.children),re(d,function(f){h.getStateStyle(f)&&i.setItemState(h,f,!0)}),r&&(r=l.parentId)}return!0})})}},n.prototype.updateComboTree=function(t,r,i){i===void 0&&(i=!0);var o;this.set("comboSorted",!1);var a,s=(o=he(t)?this.findById(t):t).getModel(),u=s.comboId||s.parentId,c="";if(o.getType&&(c=o.getType()),r&&c==="combo"){var l,h=this.get("comboTrees"),d=!0;if((h||[]).forEach(function(m){l||xr(m,function(y){if(!l)return y.id===o.getID()&&(l=y),!0})}),xr(l,function(m){return m.id!==r||(d=!1,!1)}),!d)return}if(i&&this.get("enabledStack")){var f={},p={};c==="combo"?(f.combos=[{id:s.id,parentId:s.parentId}],p.combos=[{id:s.id,parentId:r}]):c==="node"&&(f.nodes=[{id:s.id,parentId:s.comboId}],p.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:f,after:p})}if(s.parentId||s.comboId){var g=this.findById(s.parentId||s.comboId);g&&g.removeChild(o)}c==="combo"?s.parentId=r:c==="node"&&(s.comboId=r),r&&(a=this.findById(r))&&a.addChild(o),u&&(a=this.findById(u))&&a.removeChild(o);var v=X0(this.get("comboTrees"),s.id,r);this.set("comboTrees",v),this.updateCombos()},n.prototype.save=function(){var t=[],r=[],i=[];return re(this.get("nodes"),function(o){t.push(o.getModel())}),re(this.get("edges"),function(o){r.push(o.getModel())}),re(this.get("combos"),function(o){i.push(o.getModel())}),{nodes:t,edges:r,combos:i}},n.prototype.changeSize=function(t,r){return this.get("viewController").changeSize(t,r),this},n.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),i=t.get("edges"),o=t.get("edges");re(r,function(a){a.refresh()}),re(i,function(a){a.refresh()}),re(o,function(a){a.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},n.prototype.getNodes=function(){return this.get("nodes")},n.prototype.getEdges=function(){return this.get("edges")},n.prototype.getCombos=function(){return this.get("combos")},n.prototype.getComboChildren=function(t){if(he(t)&&(t=this.findById(t)),t&&(!t.getType||t.getType()==="combo"))return t.getChildren()},n.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var i=r.get("animateCfg"),o=i.onFrame,a=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=a.map(function(c){var l=c.getModel();return{id:l.id,x:l.x,y:l.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(c){re(s,function(l){var h=r.findById(l.id);if(h&&!h.destroyed){var d=h.get("originAttrs"),f=h.get("model"),p=h.getContainer().getMatrix();if(d==null&&(p&&(d={x:p[6],y:p[7]}),h.set("originAttrs",d||0)),o){var g=o(h,c,l,d||{x:0,y:0});h.set("model",Object.assign(f,g))}else d?(f.x=d.x+(l.x-d.x)*c,f.y=d.y+(l.y-d.y)*c):(f.x=l.x,f.y=l.y)}}),r.refreshPositions(t)},{duration:i.duration,easing:i.easing,callback:function(){re(a,function(c){c.set("originAttrs",null)}),i.callback&&i.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},n.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var i,o=r.get("nodes"),a=r.get("edges"),s=r.get("vedges"),u=r.get("combos"),c={},l=function(h){re(h,function(d){i=d.getModel();var f=d.get("originAttrs");if(!f||i.x!==f.x||i.y!==f.y){var p=d.updatePosition({x:i.x,y:i.y});c[i.id]=p,i.comboId&&(c[i.comboId]=c[i.comboId]||p),i.parentId&&(c[i.parentId]=c[i.parentId]||p)}})};l(u),l(o),u&&u.length!==0&&(t&&l(u),r.updateCombos()),re(a,function(h){var d=h.getSource().getModel(),f=h.getTarget();if(!dn(f)){var p=f.getModel();(c[d.id]||c[p.id]||h.getModel().isComboEdge)&&h.refresh()}}),re(s,function(h){h.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},n.prototype.stopAnimate=function(){var t=this.get("canvas").cfg.timeline;t&&t.stopAllAnimations()},n.prototype.isAnimating=function(){return this.animating},n.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},n.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},n.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},n.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},n.prototype.updateLayout=function(t,r,i,o){var a=this;t===void 0&&(t={}),o===void 0&&(o=!0);var s=this.get("layoutController");if(he(t)&&(t={type:t}),r){var u=i;u||(u=r==="begin"?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var c=["force","gForce","fruchterman","force2"];c.includes(t.type)||!t.type&&c.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(d){var f=a.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*f[0]+f[6],u.y=u.y*f[0]+f[7];var p=a.getGroup().getCanvasBBox(),g=p.minX,v=p.maxX,m=p.minY,y={x:(g+v)/2,y:(m+p.maxY)/2};r==="begin"&&(y.x=g,y.y=m),a.translate(u.x-y.x,u.y-y.y)})}var l=P({},this.get("layout")),h={};Object.assign(h,l,t),t.pipes&&!t.type?delete h.type:!t.pipes&&h.type&&delete h.pipes,this.set("layout",h),s&&(s.isLayoutTypeSame(h)&&h.gpuEnabled===l.gpuEnabled?s.updateLayoutCfg(h):s.changeLayout(h),o&&this.get("enabledStack")&&this.pushStack("layout",{before:l,after:h}))},n.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},n.prototype.layout=function(){var t,r=this.get("layoutController"),i=this.get("layout");i&&r&&(i.workerEnabled?r.layout():!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout())},n.prototype.collapseCombo=function(t,r){var i=this;if(r===void 0&&(r=!0),!this.destroyed&&(he(t)&&(t=this.findById(t)),t)){this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var o=t.getModel();this.get("itemController").collapseCombo(t,r),o.collapsed=!0;var a=this.getEdges().concat(this.get("vedges")),s=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||xr(h,function(d){if(c&&d.depth<=o.depth)return!1;if(o.id===d.id&&(c=!0),c){var f=i.findById(d.id);f&&f.getType&&f.getType()==="combo"&&(s=(s=s.concat(f.getNodes())).concat(f.getCombos()))}return!0})});var l={};a.forEach(function(h){var d=h.getModel(),f=d.isVEdge,p=d.size,g=p===void 0?1:p;if(!h.isVisible()||f){var v,m=h.getSource(),y=h.getTarget(),b=null;if(m.getModel().id===o.id||s.includes(m)&&!s.includes(y)?(b=y,v=!1):(y.getModel().id===o.id||!s.includes(m)&&s.includes(y))&&(b=m,v=!0),b){if(f)return void i.removeItem(h,!1);for(var x=b.getModel();!b.isVisible();){var w=x.parentId,E=x.comboId,S=w||E;if(!(b=i.findById(S))||!S)return;x=b.getModel()}var M=x.id,k=v?{source:M,target:o.id,size:g,isVEdge:!0}:{source:o.id,target:M,size:g,isVEdge:!0},_="".concat(k.source,"-").concat(k.target);if(l[_])return void(l[_].size+=g);l[_]=k}}}),this.addItems(Object.values(l).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},n.prototype.expandCombo=function(t,r){var i=this;if(r===void 0&&(r=!0),he(t)&&(t=this.findById(t)),t&&(!t.getType||t.getType()==="combo")){this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var o=t.getModel();this.get("itemController").expandCombo(t,r),o.collapsed=!1;var a=this.getEdges().concat(this.get("vedges")),s=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||xr(h,function(d){if(c&&d.depth<=o.depth)return!1;if(o.id===d.id&&(c=!0),c){var f=i.findById(d.id);f&&f.getType&&f.getType()==="combo"&&(s=(s=s.concat(f.getNodes())).concat(f.getCombos()))}return!0})});var l={};a.forEach(function(h){if(!h.isVisible()||h.getModel().isVEdge){var d,f=h.getSource(),p=h.getTarget(),g=f.get("id"),v=p.get("id"),m=null;if(g===o.id||s.includes(f)&&!s.includes(p)?(m=p,d=!1):v===o.id||!s.includes(f)&&s.includes(p)?(m=f,d=!0):s.includes(f)&&s.includes(p)&&f.isVisible()&&p.isVisible()&&h.show(),m){var y=h.getModel(),b=y.isVEdge,x=y.size,w=x===void 0?1:x;if(b)return void i.removeItem(h,!1);for(var E=m.getModel();!m.isVisible();){var S=E.parentId,M=E.comboId,k=S||M;if(!(m=i.findById(k))||!k)return;E=m.getModel()}for(var _=E.id,C=d?p:f,T=C.getModel();!C.isVisible();){var A=T.parentId,D=T.comboId,R=A||D;if(!(C=i.findById(R))||!R)return;if(T.comboId===o.id||T.parentId===o.id)break;T=C.getModel()}var B=T.id;if(_){var F=d?{source:_,target:B,isVEdge:!0,size:w}:{source:B,target:_,isVEdge:!0,size:w},N="".concat(F.source,"-").concat(F.target);if(l[N])return void(l[N].size+=w);l[N]=F}}}}),this.addItems(Object.values(l).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})}},n.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),he(t)&&(t=this.findById(t)),t&&(!t.getType||t.getType()==="combo")){for(var i=t.getModel(),o=this.findById(i.parentId);o;){var a=o.getModel();if(a.collapsed)return void(o=void 0);o=this.findById(a.parentId)}i.collapsed?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},n.prototype.getNeighbors=function(t,r){var i=t;return he(t)&&(i=this.findById(t)),i.getNeighbors(r)},n.prototype.getNodeDegree=function(t,r,i){r===void 0&&(r=void 0),i===void 0&&(i=!1);var o=t;he(t)&&(o=this.findById(t));var a=this.get("degrees");a&&!i||(a=Ki(this.save()),this.set("degrees",a));var s=a[o.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree}return u},n.prototype.getUndoStack=function(){return this.undoStack},n.prototype.getRedoStack=function(){return this.redoStack},n.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},n.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},n.prototype.pushStack=function(t,r,i){if(t===void 0&&(t="update"),i===void 0&&(i="undo"),this.get("enabledStack")){var o=r?_t(r):{before:{},after:_t(this.save())};i==="redo"?this.redoStack.push({action:t,data:o}):this.undoStack.push({action:t,data:o}),this.emit("stackchange",{action:t,stackType:i,undoStack:this.undoStack,redoStack:this.redoStack})}},n.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var i=this.get("adjMatrix");return i&&t||(i=Oo(this.save(),r),this.set("adjMatrix",i)),i},n.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var i=this.get("adjMatrix"),o=this.get("shortestPathMatrix");return i&&t||(i=Oo(this.save(),r),this.set("adjMatrix",i)),o&&t||(o=ou(this.save(),r),this.set("shortestPathMatrix",o)),o},n.prototype.on=function(t,r,i){return e.prototype.on.call(this,t,r,i)},n.prototype.destroy=function(){var t,r,i,o,a;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(i=this.get("viewController"))===null||i===void 0||i.destroy(),(o=this.get("stateController"))===null||o===void 0||o.destroy(),(a=this.get("canvas"))===null||a===void 0||a.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},n.prototype.createHull=function(t){if(t.members&&!(t.members.length<1)){var r=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),r&&!r.get("destroyed")||((r=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",r)),i[t.id])return i[t.id];var o=r.addGroup({id:"".concat(t.id,"-container")}),a=new pR(this,P(P({},t),{group:o}));return i[a.id]=a,a}},n.prototype.getHulls=function(){return this.get("hullMap")},n.prototype.getHullById=function(t){return this.get("hullMap")[t]},n.prototype.removeHull=function(t){var r,i;i=he(t)?this.getHullById(t):t,(r=this.get("hullMap"))===null||r===void 0||delete r[i.id],i.destroy()},n.prototype.removeHulls=function(){var t=this.getHulls();t&&Object.keys(t).length&&(Object.keys(t).forEach(function(r){t[r].destroy()}),this.set("hullMap",{}))},n}(a0);function Tv(e){return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tv(e)}var Hc=br,_M="-shape",Ov="-label",Bd=["startArrow","endArrow"],kM={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Rd={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:kM,combo:kM},Nv="-label-bg",Pv={options:{labelCfg:{style:{fontFamily:Et.windowFontFamily}},descriptionCfg:{style:{fontFamily:Et.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,n){return n==="move"||n!=null&&n.includes("bbox")?e:Zt({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,n){n.shapeMap={},this.mergeStyle=this.getOptions(e);var t=this.drawShape(e,n);if(t.set("className",this.itemType+_M),n.shapeMap[this.itemType+_M]=t,e.label){var r=this.drawLabel(e,n);r.set("className",this.itemType+Ov),n.shapeMap[this.itemType+Ov]=r}return t},afterDraw:function(e,n,t){},drawShape:function(e,n){return null},drawLabel:function(e,n){var t=(this.mergeStyle||this.getOptions(e)||{}).labelCfg||{},r=this.getLabelStyle(e,t,n),i=r.rotate;delete r.rotate;var o=n.addShape("text",{attrs:r,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(n.shapeMap["text-shape"]=o,!isNaN(i)&&i!==""){var a=o.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(r.rotateCenter)switch(r.rotateCenter){case"center":default:s=Hc(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]]);break;case"lefttop":s=Hc(s,[["t",-r.x,-r.y],["r",i],["t",r.x,r.y]]);break;case"leftcenter":s=Hc(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]])}else s=Hc(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]]);o.setMatrix(s)}if(r.background){var u=this.drawLabelBg(e,n,o),c=this.itemType+Nv;u.set("classname",c),n.shapeMap[c]=u,o.toFront()}return o},drawLabelBg:function(e,n,t){var r=ut({},this.options.labelCfg,e.labelCfg),i=this.getLabelBgStyleByPosition(t,r),o=n.addShape("rect",{name:"text-bg-shape",attrs:i,labelRelated:!0});return n.shapeMap["text-bg-shape"]=o,o},getLabelStyleByPosition:function(e,n,t){return{text:e.label}},getLabelBgStyleByPosition:function(e,n){return{}},getLabelStyle:function(e,n,t){var r=this.getLabelStyleByPosition(e,n,t),i="".concat(this.itemType,"Label"),o=Et[i]?Et[i].style:null;return P(P(P({},o),r),n.style)},getShapeStyle:function(e){return e.style},update:function(e,n,t){this.updateShapeStyle(e,n,t),this.updateLabel(e,n,t)},updateShapeStyle:function(e,n,t){var r,i=n.getContainer(),o=n.getKeyShape(),a=ut({},o.attr(),e.style),s=function(c){var l,h=a[c];if(dn(h)){var d=((r=i.shapeMap)===null||r===void 0?void 0:r[c])||i.find(function(f){return f.get("name")===c});d==null||d.attr(h)}else o.attr(((l={})[c]=h,l))};for(var u in a)s(u)},updateLabel:function(e,n,t){var r,i,o=n.getContainer(),a=(this.mergeStyle||this.getOptions({},t)||{}).labelCfg,s=a===void 0?{}:a,u=this.itemType+Ov,c=o.shapeMap[u]||o.find(function(b){return b.get("className")===u}),l=this.itemType+Nv,h=o.shapeMap[l]||o.find(function(b){return b.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[u],h&&(o.removeChild(h),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!t||t==="bbox|label"||this.itemType==="edge"&&t!=="style")&&(s=Zt(s,e.labelCfg));var d=this.getLabelStyleByPosition(e,s,o),f=(r=e.labelCfg)===null||r===void 0?void 0:r.style,p=P(P({},d),f),g=p.rotate;if(delete p.rotate,isNaN(g)||g==="")((i=c.getMatrix())===null||i===void 0?void 0:i[4])!==1&&c.resetMatrix(),c.attr(p);else{var v=[1,0,0,0,1,0,0,0,1];v=Hc(v,[["t",-p.x,-p.y],["r",g],["t",p.x,p.y]]),p.matrix=v,c.attr(p)}if(h)if(p.background){var m=this.getLabelBgStyleByPosition(c,s);h.attr(m)}else o.removeChild(h);else p.background&&((h=this.drawLabelBg(e,o,c)).set("classname",l),o.shapeMap[l]=h,c.toFront())}else{var y=this.drawLabel(e,o);y.set("className",u),o.shapeMap[u]=y}},afterUpdate:function(e,n){},setState:function(e,n,t){var r,i,o,a=t.get("keyShape");if(a&&!a.destroyed){var s=t.getType(),u=qa(n)?e:"".concat(e,":").concat(n),c=this.getStateStyle(u,t),l=t.getStateStyle(u);if(l||c){var h=ut({},l||c),d=t.getContainer(),f={x:1,y:1,cx:1,cy:1,matrix:1};if(s==="combo"&&(f.r=1,f.width=1,f.height=1),n){var p=function(A){var D,R=h[A];if(dn(R)&&!Bd.includes(A)){var B=((o=d.shapeMap)===null||o===void 0?void 0:o[A])||d.find(function(F){return F.get("name")===A});B==null||B.attr(R)}else a.attr(((D={})[A]=R,D))};for(var g in h)p(g)}else{var v=gd(t.getCurrentStatesStyle()),m=ut({},t.getModel().style,gd(t.getOriginStyle())),y=a.get("name"),b=a.attr(),x={};Object.keys(b).forEach(function(A){if(A!=="img"){var D=b[A];D&&Tv(D)==="object"?x[A]=_t(D):x[A]=D}});var w={},E=function(A){var D=h[A];if(dn(D)&&!Bd.includes(A)){var R=d.shapeMap[A]||d.find(function(N){return N.get("name")===A});if(R){var B=gd(R.attr());re(D,function(N,L){if(A===y&&x[L]&&!f[L]){delete x[L];var z=m[A][L]||Rd[s][L];a.attr(L,z)}else if(B[L]||B[L]===0){delete B[L];var Z=m[A][L]||Rd[s][L];R.attr(L,Z)}}),w[A]=B}}else if(x[A]&&!f[A]){delete x[A];var F=m[A]||(m[y]?m[y][A]:void 0)||Rd[s][A];a.attr(A,F)}};for(var S in h)E(S);for(var g in y?w[y]=x:ut(w,x),v)if(!f[g]){var M=v[g];dn(M)&&!Bd.includes(g)||(y?(ut(m[y],((i={})[g]=M,i)),delete m[g]):ut(m,((r={})[g]=M,r)),delete v[g])}var k={};Zt(k,m,w,v);var _=!1,C=function(A){var D,R,B=k[A];if(dn(B)&&!Bd.includes(A)){var F=d.shapeMap[A]||d.find(function(L){return L.get("name")===A});F&&((F.get("type")==="text"||F.get("labelRelated"))&&(delete B.x,delete B.y,delete B.matrix),A===y&&(s==="combo"&&(delete B.r,delete B.width,delete B.height),_=!0),F.attr(B))}else if(!_){var N=B||Rd[s][A];s==="combo"?y||a.attr(((D={})[A]=N,D)):a.attr(((R={})[A]=N,R))}};for(var T in k)C(T)}}}},getStateStyle:function(e,n){var t=n.getModel(),r=n.getType(),i=this.getOptions(t),o=i.stateStyles,a=i.style,s=a===void 0?{}:a,u=t.stateStyles?t.stateStyles[e]:o&&o[e];return r==="combo"?_t(u):ut({},s,u)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var n,t;return(e==null?void 0:e.anchorPoints)||((n=this.getCustomConfig(e))===null||n===void 0?void 0:n.anchorPoints)||((t=this.options)===null||t===void 0?void 0:t.anchorPoints)}},vR={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Et.nodeLabel.offset,getSize:function(e){var n,t=((n=this.mergeStyle)===null||n===void 0?void 0:n.size)||e.size||this.getOptions({}).size||Et.defaultNode.size;return at(t)&&t.length===1&&(t=[t[0],t[0]]),at(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,n){var t=n.maxLength,r=e.label;t&&(r=SE(r,t));var i=n.position||this.labelPosition;if(i==="center")return{x:0,y:0,text:r,textBaseline:"middle",textAlign:"center"};var o=n.offset;ht(o)&&(o=this.offset);var a,s=this.getSize(e);switch(i){case"top":a={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":a={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":a={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:a={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"}}return a.text=r,a},getLabelBgStyleByPosition:function(e,n){var t;if(!e)return{};var r=(t=n.style)===null||t===void 0?void 0:t.background;if(!r)return{};var i=e.getBBox(),o=bv(r.padding),a=i.width+o[1]+o[3],s=i.height+o[0]+o[2];return P(P({x:i.minX-o[3],y:i.minY-o[0]},r),{width:a,height:s})},drawShape:function(e,n){var t=this.shapeType,r=this.getShapeStyle(e),i=n.addShape(t,{attrs:r,draggable:!0,name:"node-shape"});return n.shapeMap["node-shape"]=i,i},updateLinkPoints:function(e,n){var t,r=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n.shapeMap["link-point-left"]||n.find(function(_){return _.get("className")==="link-point-left"}),o=n.shapeMap["link-point-right"]||n.find(function(_){return _.get("className")==="link-point-right"}),a=n.shapeMap["link-point-top"]||n.find(function(_){return _.get("className")==="link-point-top"}),s=n.shapeMap["link-point-bottom"]||n.find(function(_){return _.get("className")==="link-point-bottom"});i&&(t=i.attr()),o&&!t&&(t=o.attr()),a&&!t&&(t=a.attr()),s&&!t&&(t=s.attr()),t||(t=r);var u=ut({},t,e.linkPoints),c=u.fill,l=u.stroke,h=u.lineWidth,d=u.size/2;d||(d=u.r);var f=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=f.left,g=f.right,v=f.top,m=f.bottom,y=this.getSize(e),b=y[0],x=y[1],w={r:d,fill:c,stroke:l,lineWidth:h};if(i)p||p===void 0?i.attr(P(P({},w),{x:-b/2,y:0})):(i.remove(),delete n.shapeMap["link-point-left"]);else if(p){var E="link-point-left";n.shapeMap[E]=n.addShape("circle",{attrs:P(P({},w),{x:-b/2,y:0}),className:E,name:E,isAnchorPoint:!0})}if(o)g||g===void 0||(o.remove(),delete n.shapeMap["link-point-right"]),o.attr(P(P({},w),{x:b/2,y:0}));else if(g){var S="link-point-right";n.shapeMap[S]=n.addShape("circle",{attrs:P(P({},w),{x:b/2,y:0}),className:S,name:S,isAnchorPoint:!0})}if(a)v||v===void 0||(a.remove(),delete n.shapeMap["link-point-top"]),a.attr(P(P({},w),{x:0,y:-x/2}));else if(v){var M="link-point-top";n.shapeMap[M]=n.addShape("circle",{attrs:P(P({},w),{x:0,y:-x/2}),className:M,name:M,isAnchorPoint:!0})}if(s)m||m===void 0?s.attr(P(P({},w),{x:0,y:x/2})):(s.remove(),delete n.shapeMap["link-point-bottom"]);else if(m){var k="link-point-bottom";n.shapeMap[k]=n.addShape("circle",{attrs:P(P({},w),{x:0,y:x/2}),className:k,name:k,isAnchorPoint:!0})}},updateShape:function(e,n,t,r,i){n.get("keyShape").attr(P({},t)),this.updateLabel(e,n,i),r&&this.updateIcon(e,n)},updateIcon:function(e,n){var t=this,r=n.getContainer(),i=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},a=o.show,s=o.text,u=r.shapeMap["".concat(this.type,"-icon")]||r.find(function(v){return v.get("name")==="".concat(t.type,"-icon")});if(u)if(a||a===void 0){var c=ut({},u.attr(),i),l=c.width,h=l===void 0?20:l,d=c.height,f=d===void 0?20:d;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(h=0,f=0),u.attr(P(P({},c),{x:-h/2,y:-f/2}))}else u.remove(),delete r.shapeMap["".concat(this.type,"-icon")];else if(a){var p="".concat(this.type,"-icon");s?r.shapeMap[p]=r.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:p,name:p}):(h=i.width,f=i.height,r.shapeMap[p]=r.addShape("image",{attrs:P(P({},i),{x:-h/2,y:-f/2}),className:p,name:p}));var g=r.shapeMap["node-label"]||r.find(function(v){return v.get("name")==="node-label"});g&&g.toFront()}}},mR=P(P({},Pv),vR);vn.registerNode("single-node",mR);var jd="edge-shape",yR={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Et.defaultEdge.size,style:{x:0,y:0,stroke:Et.defaultEdge.style.stroke,lineAppendWidth:Et.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Et.edgeLabel.style.fill,fontSize:Et.edgeLabel.style.fontSize,fontFamily:Et.windowFontFamily}},stateStyles:P({},Et.edgeStateStyles)},getPath:function(e){var n=[];return re(e,function(t,r){r===0?n.push(["M",t.x,t.y]):n.push(["L",t.x,t.y])}),n},getShapeStyle:function(e){var n=ut({},this.options.style,{stroke:e.color},e.style),t=e.size||Et.defaultEdge.size,r=(e=this.getPathPoints(e)).startPoint,i=e.endPoint,o=this.getControlPoints(e),a=[r];o&&(a=a.concat(o)),a.push(i);var s=this.getPath(a);return ut({},Et.defaultEdge.style,{stroke:Et.defaultEdge.color,lineWidth:t,path:s},n)},updateShapeStyle:function(e,n,t){var r,i=n.getContainer(),o=((r=n.getKeyShape)===null||r===void 0?void 0:r.call(n))||i.shapeMap["edge-shape"],a=e.size,s=(e=this.getPathPoints(e)).startPoint,u=e.endPoint,c=this.getControlPoints(e),l=[s];c&&(l=l.concat(c)),l.push(u);var h=o.attr(),d=e.style||{};d.stroke===void 0&&(d.stroke=e.color);var f=e.sourceNode,p=e.targetNode,g={radius:d.radius};c||(g={source:f,target:p,offset:d.offset,radius:d.radius});var v=this.getPath(l,g),m={};t==="move"?m={path:v}:(h.endArrow&&d.endArrow===!1&&(e.style.endArrow={path:""}),h.startArrow&&d.startArrow===!1&&(e.style.startArrow={path:""}),(m=P({},e.style)).lineWidth===void 0&&(m.lineWidth=(Ue(a)?a:a==null?void 0:a[0])||h.lineWidth),m.path===void 0&&(m.path=v),m.stroke===void 0&&(m.stroke=h.stroke||e.color)),o&&o.attr(m)},getLabelStyleByPosition:function(e,n,t){var r,i=n.position||this.labelPosition,o={},a=t==null?void 0:t.shapeMap[jd];r=i==="start"?0:i==="end"?1:.5;var s,u=n.refX||this.refX,c=n.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return o.x=e.startPoint.x+u,o.y=e.startPoint.y+c,o.text=e.label,o;s=ht(n.autoRotate)?this.labelAutoRotate:n.autoRotate;var l=xE(a,r,u,c,s);return o.x=l.x,o.y=l.y,o.rotate=l.rotate,o.textAlign=this._getTextAlign(i,l.angle),o.text=e.label,o},getLabelBgStyleByPosition:function(e,n){if(!e)return{};var t=e.getBBox(),r=n.style&&n.style.background;if(!r)return{};var i=r.padding,o=t.width+i[1]+i[3],a=t.height+i[0]+i[2],s=P(P({},r),{width:o,height:a,x:t.minX-i[3],y:t.minY-i[0],matrix:[1,0,0,0,1,0,0,0,1]});return(ht(n.autoRotate)?this.labelAutoRotate:n.autoRotate)&&(s.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),s},_getTextAlign:function(e,n){var t="center";return n?(n%=2*Math.PI,e!=="center"&&(t=n>=0&&n<=Math.PI/2||n>=1.5*Math.PI&&n<2*Math.PI?e:function(r){var i=r;return r==="start"?i="end":r==="end"&&(i="start"),i}(e)),t):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,n){var t=this.getShapeStyle(e),r=n.addShape("path",{className:jd,name:jd,attrs:t});return n.shapeMap[jd]=r,r},drawLabel:function(e,n){var t=this.options.labelCfg,r=Zt({},t,e.labelCfg),i=this.getLabelStyle(e,r,n),o=i.rotate;delete i.rotate;var a=n.addShape("text",{attrs:i,name:"text-shape",labelRelated:!0,draggable:!0});if(n.shapeMap["text-shape"]=a,isNaN(o)||o===""||a.rotateAtStart(o),i.background){var s=this.drawLabelBg(e,n,a,i,o),u=this.itemType+Nv;s.set("classname",u),n.shapeMap[u]=s,a.toFront()}return a},drawLabelBg:function(e,n,t,r,i){var o=this.options.labelCfg,a=Zt({},o,e.labelCfg),s=this.getLabelBgStyleByPosition(t,a),u=n.addShape("rect",{name:"text-bg-shape",attrs:s,labelRelated:!0});return n.shapeMap["text-bg-shape"]=u,u}},bR=P(P({},Pv),yR);vn.registerEdge("single-edge",bR),vn.registerEdge("line",{getControlPoints:function(){}},"single-edge"),vn.registerEdge("spline",{getPath:function(e){return vM(e)}},"single-edge"),vn.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var n,t,r=e.startPoint,i=e.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2;if(e.controlPoints!==void 0){if(t=e.controlPoints[0],n=P0(r,t,i),r.x<=i.x&&r.y>i.y?this.clockwise=n.x>t.x?0:1:r.x<=i.x&&r.y<i.y?this.clockwise=n.x>t.x?1:0:r.x>i.x&&r.y<=i.y?this.clockwise=n.y<t.y?0:1:this.clockwise=n.y<t.y?1:0,(t.x-r.x)/(t.y-r.y)==(i.x-r.x)/(i.y-r.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),at(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:i.x-r.x,y:i.y-r.y},u=Math.atan2(s.y,s.x);t={x:e.curveOffset*Math.cos(-Math.PI/2+u)+o,y:e.curveOffset*Math.sin(-Math.PI/2+u)+a},n=P0(r,t,i)}var c=cd(r,n);return[{x:c,y:c}]},getPath:function(e){var n=[];return n.push(["M",e[0].x,e[0].y]),e.length===2?n.push(["L",e[1].x,e[1].y]):n.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),n}},"single-edge"),vn.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var n=e.controlPoints;if(!n||!n.length){var t=e.startPoint,r=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),at(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),at(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]),n=[Ld(t,r,e.curvePosition,e.curveOffset)]}return n},getPath:function(e){var n=[];return n.push(["M",e[0].x,e[0].y]),n.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),n}},"single-edge"),vn.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(e){var n=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),Ue(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Ue(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!n||!n.length||n.length<2){var t=e.startPoint,r=e.endPoint;n=[Ld(t,r,e.curvePosition[0],e.curveOffset[0]),Ld(t,r,e.curvePosition[1],e.curveOffset[1])]}return n},getPath:function(e){var n=[];return n.push(["M",e[0].x,e[0].y]),n.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),n}},"single-edge"),vn.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var n=e.startPoint,t=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Ue(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Ue(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Ue(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var r=t.y-n.y,i=[0,0];return e.curveOffset?i=e.curveOffset:Math.abs(r)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset),[{x:n.x,y:n.y+r*this.curvePosition[0]+i[0]},{x:t.x,y:t.y-r*this.curvePosition[1]+i[1]}]}},"cubic"),vn.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var n=e.startPoint,t=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Ue(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Ue(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Ue(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var r=t.x-n.x,i=[0,0];return e.curveOffset?i=e.curveOffset:Math.abs(r)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset),[{x:n.x+r*this.curvePosition[0]+i[0],y:n.y},{x:t.x-r*this.curvePosition[1]+i[1],y:t.y}]}},"cubic"),vn.registerEdge("loop",{getPathPoints:function(e){return bE(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var xR={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Et.comboLabel.refX,refY:Et.comboLabel.refY,options:{style:{stroke:Et.defaultCombo.style.stroke,fill:Et.defaultCombo.style.fill,lineWidth:Et.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Et.comboLabel.style.fill,fontSize:Et.comboLabel.style.fontSize,fontFamily:Et.windowFontFamily}},stateStyles:P({},Et.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var n=_t(e.size||this.options.size||Et.defaultCombo.size);return at(n)&&n.length===1&&(n=[n[0],n[0]]),at(n)||(n=[n,n]),n},getLabelStyleByPosition:function(e,n){var t=n.position||this.labelPosition,r=e.style,i=e.padding||this.options.padding;at(i)&&(i=Math.max.apply(Math,i));var o=n.refX,a=n.refY;ht(o)&&(o=this.refX),ht(a)&&(a=this.refY);var s,u=this.getSize(e),c=(Math.max(r.r,u[0]/2)||u[0]/2)+i;switch(t){case"top":s={x:0,y:-c-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:c+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-c+o,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:e.label,textAlign:"center"};break;default:s={x:c+o,y:0,textAlign:"right"}}return s.text=e.label,s},drawShape:function(e,n){var t=this.shapeType,r=this.getShapeStyle(e);return n.addShape(t,{attrs:r,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(e,n,t){var r=e.collapsed,i=e.collapsedSubstituteIcon,o=i===void 0?{}:i,a=Object.assign({},this.options.collapsedSubstituteIcon,o),s=a.show,u=a.img,c=a.width,l=a.height,h=n.getContainer(),d=h.find(function(v){return v.get("name")==="combo-collapsed-substitute-icon"}),f=d&&!d.destroyed,p=n.get("keyShape");if(r&&s){if(f)d.show();else{var g={width:c||2*t.r||t.width,height:l||2*t.r||t.height};d=h.addShape("image",{attrs:P({img:u,x:-g.width/2,y:-g.height/2},g),name:"combo-collapsed-substitute-icon",draggable:!0})}p.hide()}else f&&(d.hide(),p.show())},updateShape:function(e,n,t){var r=this,i=n.get("keyShape");n.get("animate")&&(e.animate===void 0?this.options.animate:e.animate)&&i.animate?(e.collapsed||this.updateCollapsedIcon(e,n,t),i.animate(t,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&r.updateCollapsedIcon(e,n,t)}})):(i.attr(P({},t)),this.updateCollapsedIcon(e,n,t)),this.updateLabel(e,n)}},wR=P(P({},Pv),xR);vn.registerCombo("single-combo",wR),vn.registerCombo("circle",{options:{size:[Et.defaultCombo.size[0],Et.defaultCombo.size[0]],padding:Math.max.apply(Math,Et.defaultCombo.padding),animate:!0,style:{stroke:Et.defaultCombo.style.stroke,fill:Et.defaultCombo.style.fill,lineWidth:Et.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Et.comboLabel.style.fill,fontSize:Et.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:P({},Et.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,n){var t=this.getShapeStyle(e);return delete t.height,delete t.width,n.addShape("circle",{attrs:t,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(e){var n=this.options.style,t=e.padding||this.options.padding;at(t)&&(t=Math.max.apply(Math,t));var r,i=ut({},n,{stroke:e.color},e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;if(o)r=Ue(o)?o/2:o[0]/2;else{var a=this.getSize(e);r=!Ue(i.r)||isNaN(i.r)?a[0]/2||Et.defaultCombo.style.r:Math.max(i.r,a[0]/2)||a[0]/2}i.r=r+t;var s=P({x:0,y:0},i);return e.style?e.style.r=r:e.style={r},s},update:function(e,n){var t=this.getSize(e),r=e.padding||this.options.padding;at(r)&&(r=Math.max.apply(Math,r));var i,o=_t(e.style),a=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;i=a?Ue(a)?a/2:a[0]/2:Math.max(o.r,t[0]/2)||t[0]/2,o.r=i+r;var s=n.get("sizeCache");s&&(s.r=o.r);var u={stroke:e.color},c=ut({},n.get("keyShape").attr(),u,o);e.style?e.style.r=i:e.style={r:i},this.updateShape(e,n,c,!0)}},"single-combo"),vn.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Et.defaultCombo.style.stroke,fill:Et.defaultCombo.style.fill,lineWidth:Et.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Et.comboLabel.style.fill,fontSize:Et.comboLabel.style.fontSize,fontFamily:Et.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:P({},Et.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,n){var t=this.getShapeStyle(e);return n.addShape("rect",{attrs:t,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(e,n){var t=n.position||this.labelPosition,r=e.style,i=e.padding||this.options.padding;Ue(i)&&(i=[i,i,i,i]);var o=n.refX,a=n.refY;ht(o)&&(o=this.refX),ht(a)&&(a=this.refY);var s,u=-r.width/2-i[3],c=r.width/2+i[1],l=-r.height/2-i[0],h=r.height/2+i[2];switch(t){case"top":s={x:u+o,y:l+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:h+a,textBaseline:"top",textAlign:"center"};break;case"left":s={x:u+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":s={x:0,y:l+a,textBaseline:"top",textAlign:"center"};break;default:s={x:c+o,y:0,textAlign:"right"}}return s.text=e.label,s},getShapeStyle:function(e){var n=this.options.style,t=e.padding||this.options.padding;Ue(t)&&(t=[t,t,t,t]);var r,i,o=ut({},n,{stroke:e.color},e.style),a=this.getSize(e),s=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;s?Ue(s)?(r=s,i=s):(r=s[0],i=s[1]):(r=!Ue(o.width)||isNaN(o.width)?a[0]||Et.defaultCombo.style.width:Math.max(o.width,a[0])||a[0],i=!Ue(o.height)||isNaN(o.height)?a[1]||Et.defaultCombo.style.height:Math.max(o.height,a[1])||a[1]);var u=-r/2-t[3],c=-i/2-t[0];o.width=r+t[1]+t[3],o.height=i+t[0]+t[2];var l=P({x:u,y:c},o);return e.style?(e.style.width=r,e.style.height=i):e.style={width:r,height:i},l},update:function(e,n){var t=this.getSize(e),r=e.padding||this.options.padding;Ue(r)&&(r=[r,r,r,r]);var i,o,a=_t(e.style),s=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;s?Ue(s)?(i=s,o=s):(i=s[0],o=s[1]):(i=Math.max(a.width,t[0])||t[0],o=Math.max(a.height,t[1])||t[1]),a.width=i+r[1]+r[3],a.height=o+r[0]+r[2];var u=n.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-i/2-r[3],a.y=-o/2-r[0];var c={stroke:e.color},l=ut({},n.get("keyShape").attr(),c,a);e.style?(e.style.width=i,e.style.height=o):e.style={width:i,height:o},this.updateShape(e,n,l,!1)}},"single-combo"),vn.registerNode("simple-circle",{options:{size:Et.defaultNode.size,style:{x:0,y:0,stroke:Et.defaultNode.style.stroke,fill:Et.defaultNode.style.fill,lineWidth:Et.defaultNode.style.lineWidth},labelCfg:{style:{fill:Et.nodeLabel.style.fill,fontSize:Et.nodeLabel.style.fontSize,fontFamily:Et.windowFontFamily}},stateStyles:P({},Et.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,n){var t=this.getShapeStyle(e),r="".concat(this.type,"-keyShape"),i=n.addShape("circle",{attrs:t,className:"".concat(this.type,"-keyShape"),name:r,draggable:!0});return n.shapeMap[r]=i,i},getShapeStyle:function(e){var n=(this.mergeStyle||this.getOptions(e)).style,t={stroke:e.color},r=Zt({},n,t),i=this.getSize(e)[0]/2;return P({x:0,y:0,r:i},r)},update:function(e,n,t){var r=this.getSize(e),i={stroke:e.color,r:r[0]/2},o=n.get("keyShape"),a=Zt({},o.attr(),i,e.style);this.updateShape(e,n,a,!0,t)}},"single-node"),vn.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Et.defaultNode.style.stroke,fill:Et.defaultNode.style.fill,lineWidth:Et.defaultNode.style.lineWidth},labelCfg:{style:{fill:Et.nodeLabel.style.fill,fontSize:Et.nodeLabel.style.fontSize,fontFamily:Et.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:P({},Et.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,n){var t=this.getShapeStyle(e);return n.addShape("rect",{attrs:t,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(e){var n=ut({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),t=this.getSize(e),r=n.width||t[0],i=n.height||t[1];return P({x:-r/2,y:-i/2,width:r,height:i},n)},update:function(e,n,t){n.getContainer();var r=(this.mergeStyle||this.getOptions(e)).style,i=this.getSize(e),o=n.get("keyShape");e.size||(i[0]=o.attr("width")||r.width,i[1]=o.attr("height")||r.height);var a={stroke:e.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=ut({},r,o.attr(),a);s=ut(s,e.style),this.updateShape(e,n,s,!1,t)}},"single-node"),vn.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Et.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,n){var t=this.shapeType,r=this.getShapeStyle(e);delete r.fill;var i=n.addShape(t,{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,i),i},drawClip:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).clipCfg;if(t.show){var r=t.type,i=t.x,o=t.y,a=t.style;if(r==="circle"){var s=t.r;n.setClip({type:"circle",attrs:P({r:s,x:i,y:o},a)})}else if(r==="rect"){var u=t.width,c=t.height,l=i-u/2,h=o-c/2;n.setClip({type:"rect",attrs:P({x:l,y:h,width:u,height:c},a)})}else if(r==="ellipse"){var d=t.rx,f=t.ry;n.setClip({type:"ellipse",attrs:P({x:i,y:o,rx:d,ry:f},a)})}else if(r==="polygon"){var p=t.points;n.setClip({type:"polygon",attrs:P({points:p},a)})}else if(r==="path"){var g=t.path;n.setClip({type:"path",attrs:P({path:g},a)})}}},getShapeStyle:function(e){var n=this.mergeStyle||this.getOptions(e),t=n.style,r=n.img,i=this.getSize(e),o=i[0],a=i[1];return t&&(o=t.width||i[0],a=t.height||i[1]),P({x:-o/2,y:-a/2,width:o,height:a,img:r},t)},updateShapeStyle:function(e,n){var t=n.getContainer(),r="".concat(this.itemType,"-shape"),i=t.shapeMap[r]||t.find(function(a){return a.get("className")===r})||n.getKeyShape(),o=this.getShapeStyle(e);i&&!i.destroyed&&i.attr(o)}},"single-node");const ER={triangle:function(e,n,t){e===void 0&&(e=10),n===void 0&&(n=15),t===void 0&&(t=0);var r=2*t;return"M ".concat(r,",0 L ").concat(r+n,",-").concat(e/2," L ").concat(r+n,",").concat(e/2," Z")},vee:function(e,n,t){e===void 0&&(e=15),n===void 0&&(n=20),t===void 0&&(t=0);var r=2*t;return"M ".concat(r,",0 L ").concat(r+n,",-").concat(e/2,`
        L `).concat(r+2*n/3,",0 L ").concat(r+n,",").concat(e/2," Z")},circle:function(e,n){return e===void 0&&(e=5),n===void 0&&(n=0),"M ".concat(2*n,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(2*e,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(2*-e,",0")},rect:function(e,n,t){e===void 0&&(e=10),n===void 0&&(n=10),t===void 0&&(t=0);var r=2*t;return"M ".concat(r,",").concat(-e/2,` 
        L `).concat(r+n,",").concat(-e/2,` 
        L `).concat(r+n,",").concat(e/2,` 
        L `).concat(r,",").concat(e/2," Z")},diamond:function(e,n,t){e===void 0&&(e=15),n===void 0&&(n=15),t===void 0&&(t=0);var r=2*t;return"M ".concat(r,`,0 
        L `).concat(r+n/2,",").concat(-e/2,` 
        L `).concat(r+n,`,0 
        L `).concat(r+n/2,",").concat(e/2," Z")},triangleRect:function(e,n,t,r,i,o){e===void 0&&(e=15),n===void 0&&(n=15),t===void 0&&(t=15),r===void 0&&(r=3),i===void 0&&(i=5),o===void 0&&(o=0);var a=2*o,s=a+n+i;return"M ".concat(a,",0 L ").concat(a+n,",-").concat(e/2," L ").concat(a+n,",").concat(e/2,` Z
            M `).concat(s,", -").concat(t/2,`
            L `).concat(s+r," -").concat(t/2,`
            L `).concat(s+r," ").concat(t/2,`
            L `).concat(s," ").concat(t/2,`
            Z`)}},SR={collapse:function(e,n,t){return[["M",e-t,n],["a",t,t,0,1,0,2*t,0],["a",t,t,0,1,0,2*-t,0],["M",e-t+4,n],["L",e+t-4,n]]},expand:function(e,n,t){return[["M",e-t,n],["a",t,t,0,1,0,2*t,0],["a",t,t,0,1,0,2*-t,0],["M",e-t+4,n],["L",e-t+2*t-4,n],["M",e-t+t,n-t+4],["L",e,n+t-4]]},upTriangle:function(e,n,t){var r=t*Math.cos(Math.PI/6),i=t*Math.sin(Math.PI/6);return[["M",e-r,n+i],["L",e+r,n+i],["L",e,n-t],["Z"]]},downTriangle:function(e,n,t){var r=t*Math.cos(Math.PI/6),i=t*Math.sin(Math.PI/6);return[["M",e-r,n-i],["L",e+r,n-i],["L",e,n+t],["Z"]]}},MR=Object.freeze(Object.defineProperty({__proto__:null,defaultSubjectColors:["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"]},Symbol.toStringTag,{value:"Module"}));var CM=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"};const _R=Object.freeze(Object.defineProperty({__proto__:null,isForce:CM},Symbol.toStringTag,{value:"Module"}));var kR=br,fu=P(P(P(P(P(P(P({},QB),zL),uR),DL),MR),_R),{transform:kR,mat3:l0}),CR=function(){function e(n){this.graph=n,this.layoutCfg=n.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return e.prototype.initLayout=function(){},e.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},e.prototype.getLayoutCfgType=function(n){var t=n.type;if(t)return t;var r=n.pipes;return Array.isArray(r)?r.map(function(i){return(i==null?void 0:i.type)||""}):null},e.prototype.isLayoutTypeSame=function(n){var t=this.getLayoutCfgType(n),r=Array.isArray(this.layoutType),i=Array.isArray(t);return r&&i?this.layoutType.every(function(o,a){return o===t[a]}):!Array.isArray(t)&&!Array.isArray(this.layoutType)&&(n==null?void 0:n.type)===this.layoutType},e.prototype.refreshLayout=function(){var n=this,t=n.graph,r=n.layoutType,i=n.layoutCfg;if(t){var o=(i===void 0?{}:i).animate,a=o===void 0&&(r==="force"||r==="force2"),s=CM(r)&&(o||a);t.get("animate")&&!s?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},e.prototype.changeLayout=function(n){var t=n.disableTriggerLayout,r=yn(n,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,t||this.layout()},e.prototype.changeData=function(n){this.layout(n)},e.prototype.destoryLayoutMethods=function(){var n=this.layoutMethods,t=[];return n==null||n.forEach(function(r){var i,o=(i=r.getType)===null||i===void 0?void 0:i.call(r);o&&t.push(o),r.destroy()}),this.layoutMethods=[],t},e.prototype.destroyLayout=function(){this.destoryLayoutMethods();var n=this.graph;n&&!n.get("destroyed")&&n.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},e.prototype.setDataFromGraph=function(){for(var n,t=[],r=[],i=[],o=[],a=[],s=[],u=[],c=this.graph.getNodes(),l=this.graph.getEdges(),h=this.graph.getCombos(),d=c.length,f=0;f<d;f++){var p=c[f];if(p&&!p.destroyed){var g=p.getModel();p.isVisible()?t.push(g):r.push(g)}}var v=l.length;for(f=0;f<v;f++){var m=l[f];m&&!m.destroyed&&(g=m.getModel(),m.isVisible()?g.isComboEdge?a.push(g):i.push(g):o.push(g))}var y=h.length;for(f=0;f<y;f++){var b=h[f];b.destroyed||(g=b.getModel(),b.isVisible()?s.push(g):u.push(g))}return{nodes:t,hiddenNodes:r,edges:i,hiddenEdges:o,combos:s,hiddenCombos:u,comboEdges:a,vedges:(n=this.graph.get("vedges"))===null||n===void 0?void 0:n.map(function(x){return x.getModel()})}},e.prototype.relayout=function(n){var t=this,r=this,i=r.graph,o=r.layoutMethods,a=r.layoutCfg;if(i&&!i.get("destroyed")){var s=Promise.resolve();if(n){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(a.center,u)}i.emit("beforelayout"),o==null||o.forEach(function(c,l){var h=a[l]||a;s=s.then(function(){var d,f=t.execLayoutMethod(h,l);return l===o.length-1&&((d=a.onAllLayoutEnd)===null||d===void 0||d.call(a)),f})})}},e.prototype.filterLayoutData=function(n,t){var r,i,o=n.nodes,a=n.edges,s=yn(n,["nodes","edges"]);if(!o)return n;r=gn(t==null?void 0:t.nodesFilter)?t.nodesFilter:function(){return!0};var u=o.filter(r);if(gn(t==null?void 0:t.edgesFilter))i=t.edgesFilter;else{var c=u.reduce(function(l,h){return l[h.id]=!0,l},{});i=function(l){return c[l.source]&&c[l.target]}}return P({nodes:u,edges:a.filter(i)},s)},e.prototype.getLayoutBBox=function(n){var t=eu(this.graph.getNodes(),function(i){return i.getModel().layoutOrder}),r=Object.values(t).map(function(i){var o=QS(i);return o.size=[o.width,o.height],o});return{groupNodes:Object.values(eu(n,"layoutOrder")),layoutNodes:r}},e.prototype.layoutAnimate=function(){},e.prototype.moveToZero=function(){var n=this.graph.get("data").nodes;if(n[0].x!==void 0&&n[0].x!==null&&!ro(n[0].x)){for(var t=[0,0],r=n.length,i=0;i<r;i++){var o=n[i];t[0]+=o.x,t[1]+=o.y}for(t[0]/=n.length,t[1]/=n.length,i=0;i<r;i++)(o=n[i]).x-=t[0],o.y-=t[1]}},e.prototype.initPositions=function(n,t){var r;return Nr(this,void 0,void 0,function(){var i,o,a;return Pr(this,function(s){return i=this.graph,t!=null&&t.length?(o=t.filter(function(u){return ro(u.x)||ro(u.y)}),(a=o?o.length:0)?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=.85*i.get("width"),c=.85*i.get("height"),l=Math.ceil(Math.sqrt(a)*(u/c)),h=u/(l-1),d=c/(Math.ceil(a/l)-1);isFinite(h)&&h||(h=0),isFinite(d)&&h||(d=0);for(var f=n[0]-u/2,p=n[1]-c/2,g=0;g<a;g++){var v=o[g];ro(+v.x)&&(v.x=g%l*h+f),ro(+v.y)&&(v.y=Math.floor(g/l)*d+p)}})]:[2]):[2,Promise.resolve()]})})},e.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},e}(),AR=function(e){this.graph=e,this.destroyed=!1,this.initEvents()},IR=vn.registerNode,TR=vn.registerEdge,OR=vn.registerCombo,AM=o0.registerBehavior;vn.registerNode,vn.registerEdge,vn.registerCombo,o0.registerBehavior;var Dv={},en={},zd={},pa={};Object.defineProperty(pa,"__esModule",{value:!0}),pa.MESSAGE=pa.ALGORITHM=void 0,pa.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"},pa.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};var Fd={},IM={},ns={};Object.defineProperty(ns,"__esModule",{value:!0}),ns.default=void 0;var NR=function(e,n){var t=e.nodes,r=e.edges,i=[],o={};if(!t)throw new Error("invalid nodes data!");return t&&t.forEach(function(a,s){o[a.id]=s,i.push([])}),r&&r.forEach(function(a){var s=a.source,u=a.target,c=o[s],l=o[u];!c&&c!==0||!l&&l!==0||(i[c][l]=1,n||(i[l][c]=1))}),i};ns.default=NR;var Gd={},Yd={},pu={};Object.defineProperty(pu,"__esModule",{value:!0}),pu.default=pu.LinkedListNode=void 0;var PR=function(e,n){return e===n},Lv=function(){function e(n,t){t===void 0&&(t=null),this.value=n,this.next=t}return e.prototype.toString=function(n){return n?n(this.value):"".concat(this.value)},e}();pu.LinkedListNode=Lv;var DR=function(){function e(n){n===void 0&&(n=PR),this.head=null,this.tail=null,this.compare=n}return e.prototype.prepend=function(n){var t=new Lv(n,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(n){var t=new Lv(n);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(n){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,n);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,n)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,n)&&(this.tail=r),t},e.prototype.find=function(n){var t=n.value,r=t===void 0?void 0:t,i=n.callback,o=i===void 0?void 0:i;if(!this.head)return null;for(var a=this.head;a;){if(o&&o(a.value)||r!==void 0&&this.compare(a.value,r))return a;a=a.next}return null},e.prototype.deleteTail=function(){var n=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,n;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,n},e.prototype.deleteHead=function(){if(!this.head)return null;var n=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),n},e.prototype.fromArray=function(n){var t=this;return n.forEach(function(r){return t.append(r)}),this},e.prototype.toArray=function(){for(var n=[],t=this.head;t;)n.push(t),t=t.next;return n},e.prototype.reverse=function(){for(var n=this.head,t=null,r=null;n;)r=n.next,n.next=t,t=n,n=r;this.tail=this.head,this.head=t},e.prototype.toString=function(n){return n===void 0&&(n=void 0),this.toArray().map(function(t){return t.toString(n)}).toString()},e}(),LR=DR;pu.default=LR,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.default=void 0;var Xd,BR=(Xd=pu)&&Xd.__esModule?Xd:{default:Xd},RR=function(){function e(){this.linkedList=new BR.default}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(n){this.linkedList.append(n)},e.prototype.dequeue=function(){var n=this.linkedList.deleteHead();return n?n.value:null},e.prototype.toString=function(n){return this.linkedList.toString(n)},e}();Yd.default=RR;var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.uniqueId=Xn.getOutEdgesNodeId=Xn.getNeighbors=Xn.getEdgesByNodeId=void 0,Xn.getNeighbors=function(e,n,t){n===void 0&&(n=[]);var r=n.filter(function(i){return i.source===e||i.target===e});return t==="target"?r.filter(function(i){return i.source===e}).map(function(i){return i.target}):t==="source"?r.filter(function(i){return i.target===e}).map(function(i){return i.source}):r.map(function(i){return i.source===e?i.target:i.source})},Xn.getOutEdgesNodeId=function(e,n){return n.filter(function(t){return t.source===e})},Xn.getEdgesByNodeId=function(e,n){return n.filter(function(t){return t.source===e||t.target===e})},Xn.uniqueId=function(e){e===void 0&&(e=0);var n="".concat(Math.random()).split(".")[1].substr(0,5),t="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(n).concat(t)},Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.default=void 0;var jR=function(e){return e&&e.__esModule?e:{default:e}}(Yd),zR=Xn,FR=function(e,n,t,r){r===void 0&&(r=!0);var i=function(l){l===void 0&&(l={});var h,d=l,f=function(){},p=(h={},function(g){var v=g.next;return!h[v]&&(h[v]=!0,!0)});return d.allowTraversal=l.allowTraversal||p,d.enter=l.enter||f,d.leave=l.leave||f,d}(t),o=new jR.default,a=e.edges,s=a===void 0?[]:a;o.enqueue(n);for(var u="",c=function(){var l=o.dequeue();i.enter({current:l,previous:u}),(0,zR.getNeighbors)(l,s,r?"target":void 0).forEach(function(h){i.allowTraversal({previous:u,current:l,next:h})&&o.enqueue(h)}),i.leave({current:l,previous:u}),u=l};!o.isEmpty();)c()};Gd.default=FR;var ga={};Object.defineProperty(ga,"__esModule",{value:!0}),ga.default=function(e,n){return n?NM(e):OM(e)},ga.detectStrongConnectComponents=ga.detectConnectedComponents=void 0;var TM=Xn,OM=function(e){for(var n=e.nodes,t=n===void 0?[]:n,r=e.edges,i=r===void 0?[]:r,o=[],a={},s=[],u=function d(f){s.push(f),a[f.id]=!0;for(var p=(0,TM.getNeighbors)(f.id,i),g=function(m){var y=p[m];if(!a[y]){var b=t.filter(function(x){return x.id===y});b.length>0&&d(b[0])}},v=0;v<p.length;++v)g(v)},c=0;c<t.length;c++){var l=t[c];if(!a[l.id]){u(l);for(var h=[];s.length>0;)h.push(s.pop());o.push(h)}}return o};ga.detectConnectedComponents=OM;var NM=function(e){for(var n=e.nodes,t=n===void 0?[]:n,r=e.edges,i=r===void 0?[]:r,o=[],a={},s={},u={},c=[],l=0,h=function g(v){s[v.id]=l,u[v.id]=l,l+=1,o.push(v),a[v.id]=!0;for(var m=(0,TM.getNeighbors)(v.id,i,"target").filter(function(E){return t.map(function(S){return S.id}).indexOf(E)>-1}),y=function(E){var S=m[E];if(s[S]||s[S]===0)a[S]&&(u[v.id]=Math.min(u[v.id],s[S]));else{var M=t.filter(function(k){return k.id===S});M.length>0&&g(M[0]),u[v.id]=Math.min(u[v.id],u[S])}},b=0;b<m.length;b++)y(b);if(u[v.id]===s[v.id]){for(var x=[];o.length>0;){var w=o.pop();if(a[w.id]=!1,x.push(w),w===v)break}x.length>0&&c.push(x)}},d=0,f=t;d<f.length;d++){var p=f[d];s[p.id]||s[p.id]===0||h(p)}return c};ga.detectStrongConnectComponents=NM;var Po={};Object.defineProperty(Po,"__esModule",{value:!0}),Po.getOutDegree=Po.getInDegree=Po.default=void 0;var qc=function(e){var n={},t=e.nodes,r=t===void 0?[]:t,i=e.edges,o=i===void 0?[]:i;return r.forEach(function(a){n[a.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(a){n[a.source].degree++,n[a.source].outDegree++,n[a.target].degree++,n[a.target].inDegree++}),n},GR=qc;Po.default=GR,Po.getInDegree=function(e,n){return qc(e)[n]?qc(e)[n].inDegree:0},Po.getOutDegree=function(e,n){return qc(e)[n]?qc(e)[n].outDegree:0};var oo={},Ud={};Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.default=function(e,n,t,r){r===void 0&&(r=!0),PM(e,n,"",function(i){i===void 0&&(i={});var o=i,a=function(){},s=(u={},function(c){var l=c.next;return!u[l]&&(u[l]=!0,!0)}),u;return o.allowTraversal=i.allowTraversal||s,o.enter=i.enter||a,o.leave=i.leave||a,o}(t),r)};var YR=Xn;function PM(e,n,t,r,i){i===void 0&&(i=!0),r.enter({current:n,previous:t});var o=e.edges,a=o===void 0?[]:o;(0,YR.getNeighbors)(n,a,i?"target":void 0).forEach(function(s){r.allowTraversal({previous:t,current:n,next:s})&&PM(e,s,n,r,i)}),r.leave({current:n,previous:t})}function Bv(e){return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bv(e)}Object.defineProperty(oo,"__esModule",{value:!0}),oo.detectAllUndirectedCycle=oo.detectAllDirectedCycle=oo.detectAllCycles=oo.default=void 0;var XR=function(e){return e&&e.__esModule?e:{default:e}}(Ud),DM=function(e,n){if(e&&e.__esModule)return e;if(e===null||Bv(e)!=="object"&&typeof e!="function")return{default:e};var t=BM(n);if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(ga),LM=Xn;function BM(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,t=new WeakMap;return(BM=function(r){return r?t:n})(e)}var RM=function(e,n,t){var r,i;t===void 0&&(t=!0);for(var o=[],a=0,s=(0,DM.default)(e,!1);a<s.length;a++){var u=s[a];if(u.length)for(var c=u[0],l=c.id,h=[c],d=((r={})[l]=c,r),f=((i={})[l]=new Set,i);h.length>0;)for(var p=h.pop(),g=p.id,v=(0,LM.getNeighbors)(g,e.edges),m=function(b){var x,w=v[b],E=e.nodes.find(function(T){return T.id===w});if(w===g)o.push(((x={})[w]=p,x));else if(w in f){if(!f[g].has(E)){for(var S=!0,M=[E,p],k=d[g];f[w].size&&!f[w].has(k)&&(M.push(k),k!==d[k.id]);)k=d[k.id];if(M.push(k),n&&t?(S=!1,M.findIndex(function(T){return n.indexOf(T.id)>-1})>-1&&(S=!0)):n&&!t&&M.findIndex(function(T){return n.indexOf(T.id)>-1})>-1&&(S=!1),S){for(var _={},C=1;C<M.length;C+=1)_[M[C-1].id]=M[C];M.length&&(_[M[M.length-1].id]=M[0]),o.push(_)}f[w].add(p)}}else d[w]=p,h.push(E),f[w]=new Set([p])},y=0;y<v.length;y+=1)m(y)}return o};oo.detectAllUndirectedCycle=RM;var jM=function(e,n,t){t===void 0&&(t=!0);for(var r=[],i=new Set,o=[],a=[],s={},u={},c=function k(_,C,T){var A=!1;if(n&&t===!1&&n.indexOf(_.id)>-1)return A;r.push(_),i.add(_);for(var D=T[_.id],R=0;R<D.length;R+=1)if((N=s[D[R]])===C){for(var B={},F=1;F<r.length;F+=1)B[r[F-1].id]=r[F];r.length&&(B[r[r.length-1].id]=r[0]),a.push(B),A=!0}else i.has(N)||k(N,C,T)&&(A=!0);if(A)(function(L){for(var z=[L];z.length>0;){var Z=z.pop();i.has(Z)&&(i.delete(Z),o[Z.id].forEach(function(ne){z.push(ne)}),o[Z.id].clear())}})(_);else for(R=0;R<D.length;R+=1){var N=s[D[R]];o[N.id].has(_)||o[N.id].add(_)}return r.pop(),A},l=e.nodes,h=l===void 0?[]:l,d=0;d<h.length;d+=1){var f=h[d],p=f.id;u[p]=d,s[d]=f}if(n&&t){var g=function(k){var _=n[k];u[h[k].id]=u[_],u[_]=0,s[0]=h.find(function(C){return C.id===_}),s[u[h[k].id]]=h[k]};for(d=0;d<n.length;d++)g(d)}for(var v=function(k){for(var _,C,T=1/0,A=0;A<k.length;A+=1)for(var D=k[A],R=0;R<D.length;R++){var B=u[D[R].id];B<T&&(T=B,C=A)}var F=k[C],N=[];for(A=0;A<F.length;A+=1){var L=F[A];N[L.id]=[];for(var z=0,Z=(0,LM.getNeighbors)(L.id,e.edges,"target").filter(function(J){return F.map(function(q){return q.id}).indexOf(J)>-1});z<Z.length;z++){var ne=Z[z];ne!==L.id||t===!1&&n.indexOf(L.id)>-1?N[L.id].push(u[ne]):a.push(((_={})[L.id]=L,_))}}return{component:F,adjList:N,minIdx:T}},m=0;m<h.length;){var y=h.filter(function(k){return u[k.id]>=m}),b=(0,DM.detectStrongConnectComponents)({nodes:y,edges:e.edges}).filter(function(k){return k.length>1});if(b.length===0)break;var x=v(b),w=x.minIdx,E=x.adjList,S=x.component;if(!(S.length>1))break;S.forEach(function(k){o[k.id]=new Set});var M=s[w];if(n&&t&&n.indexOf(M.id)===-1)return a;c(M,M,E),m=w+1}return a};oo.detectAllDirectedCycle=jM,oo.detectAllCycles=function(e,n,t,r){return r===void 0&&(r=!0),n?jM(e,t,r):RM(e,t,r)};var UR=function(e){var n=null,t=e.nodes,r={},i={},o={},a={};(t===void 0?[]:t).forEach(function(c){i[c.id]=c});for(var s={enter:function(c){var l=c.current,h=c.previous;if(o[l]){n={};for(var d=l,f=h;f!==l;)n[d]=f,d=f,f=r[f];n[d]=f}else o[l]=l,delete i[l],r[l]=h},leave:function(c){var l=c.current;a[l]=l,delete o[l]},allowTraversal:function(c){var l=c.next;return!n&&!a[l]}};Object.keys(i).length;){var u=Object.keys(i)[0];(0,XR.default)(e,u,s)}return n};oo.default=UR;var gu={};const zM=Ao(W3),Zc=Ao(s5);Object.defineProperty(gu,"__esModule",{value:!0}),gu.default=void 0;var FM=zM,WR=Zc,GM=Xn,VR=function(e,n,t,r){var i=e.nodes,o=i===void 0?[]:i,a=e.edges,s=a===void 0?[]:a,u={},c={},l={};o.forEach(function(m,y){var b=m.id;c[b]=1/0,b===n&&(c[b]=0)});for(var h=o.length,d=function(m){var y=function(x,w,E){for(var S,M=1/0,k=0;k<w.length;k++){var _=w[k].id;!E[_]&&x[_]<=M&&(M=x[_],S=w[k])}return S}(c,o,u),b=y.id;if(u[b]=!0,c[b]===1/0)return"continue";(t?(0,GM.getOutEdgesNodeId)(b,s):(0,GM.getEdgesByNodeId)(b,s)).forEach(function(x){var w=x.target,E=x.source,S=w===b?E:w,M=r&&x[r]?x[r]:1;c[S]>c[y.id]+M?(c[S]=c[y.id]+M,l[S]=[y.id]):c[S]===c[y.id]+M&&l[S].push(y.id)})},f=0;f<h;f++)d();l[n]=[n];var p={};for(var g in c)c[g]!==1/0&&YM(n,g,l,p);var v={};for(var g in p)v[g]=p[g][0];return{length:c,path:v,allPath:p}};function YM(e,n,t,r){if(e===n)return[e];if(r[n])return r[n];for(var i=[],o=0,a=t[n];o<a.length;o++){var s=YM(e,a[o],t,r);if(!s)return;for(var u=0,c=s;u<c.length;u++){var l=c[u];(0,WR.isArray)(l)?i.push((0,FM.__spreadArray)((0,FM.__spreadArray)([],l,!0),[n],!1)):i.push([l,n])}}return r[n]=i,r[n]}gu.default=VR;var vu={};Object.defineProperty(vu,"__esModule",{value:!0}),vu.findShortestPath=vu.findAllPath=void 0;var HR=function(e){return e&&e.__esModule?e:{default:e}}(gu),Wd=Xn;vu.findShortestPath=function(e,n,t,r,i){var o=(0,HR.default)(e,n,r,i),a=o.length,s=o.path,u=o.allPath;return{length:a[t],path:s[t],allPath:u[t]}},vu.findAllPath=function(e,n,t,r){var i;if(n===t)return[[n]];var o=e.edges,a=o===void 0?[]:o,s=[n],u=((i={})[n]=!0,i),c=[],l=[],h=r?(0,Wd.getNeighbors)(n,a,"target"):(0,Wd.getNeighbors)(n,a);for(c.push(h);s.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var f=d.shift();if(f&&(s.push(f),u[f]=!0,h=r?(0,Wd.getNeighbors)(f,a,"target"):(0,Wd.getNeighbors)(f,a),c.push(h.filter(function(v){return!u[v]}))),s[s.length-1]===t){var p=s.map(function(v){return v});l.push(p),g=s.pop(),u[g]=!1,c.pop()}}else{var g=s.pop();u[g]=!1,c.pop()}}return l};var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.default=void 0;var qR=function(e){return e&&e.__esModule?e:{default:e}}(ns),ZR=function(e,n){for(var t=(0,qR.default)(e,n),r=[],i=t.length,o=0;o<i;o+=1){r[o]=[];for(var a=0;a<i;a+=1)o===a?r[o][a]=0:t[o][a]!==0&&t[o][a]?r[o][a]=t[o][a]:r[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)r[o][a]>r[o][s]+r[s][a]&&(r[o][a]=r[o][s]+r[s][a]);return r};Kc.default=ZR;var Vd={};Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.default=void 0;var KR=function(e){return e&&e.__esModule?e:{default:e}}(ns),$R=Xn,QR=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t="weight"),r===void 0&&(r=1e3);var i=e.nodes,o=i===void 0?[]:i,a=e.edges,s=a===void 0?[]:a,u={},c={};o.forEach(function(m,y){var b=(0,$R.uniqueId)();m.clusterId=b,u[b]={id:b,nodes:[m]},c[m.id]={node:m,idx:y}});var l=(0,KR.default)(e,n),h={};l.forEach(function(m,y){var b=o[y].id;h[b]={},m.forEach(function(x,w){if(x){var E=o[w].id;h[b][E]=x}})});for(var d=0,f=function(){var m=!1;if(o.forEach(function(y){var b={};Object.keys(h[y.id]).forEach(function(C){var T=h[y.id][C],A=c[C].node.clusterId;b[A]||(b[A]=0),b[A]+=T});var x=-1/0,w=[];if(Object.keys(b).forEach(function(C){x<b[C]?(x=b[C],w=[C]):x===b[C]&&w.push(C)}),w.length!==1||w[0]!==y.clusterId){var E=w.indexOf(y.clusterId);if(E>=0&&w.splice(E,1),w&&w.length){m=!0;var S=u[y.clusterId],M=S.nodes.indexOf(y);S.nodes.splice(M,1);var k=Math.floor(Math.random()*w.length),_=u[w[k]];_.nodes.push(y),y.clusterId=_.id}}}),!m)return"break";d++};d<r&&f()!=="break";);Object.keys(u).forEach(function(m){var y=u[m];y.nodes&&y.nodes.length||delete u[m]});var p=[],g={};s.forEach(function(m){var y=m.source,b=m.target,x=m[t]||1,w=c[y].node.clusterId,E=c[b].node.clusterId,S="".concat(w,"---").concat(E);if(g[S])g[S].weight+=x,g[S].count++;else{var M={source:w,target:E,weight:x,count:1};g[S]=M,p.push(M)}});var v=[];return Object.keys(u).forEach(function(m){v.push(u[m])}),{clusters:v,clusterEdges:p}};Vd.default=QR;var Hd={},$c={};Object.defineProperty($c,"__esModule",{value:!0}),$c.default=void 0;var JR=Zc,e4=function(){function e(n){this.arr=n}return e.prototype.getArr=function(){return this.arr||[]},e.prototype.add=function(n){var t,r=n.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new e(r);if(!(r!=null&&r.length))return new e(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new e(i)}},e.prototype.subtract=function(n){var t,r=n.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new e(r);if(!(r!=null&&r.length))return new e(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new e(i)}},e.prototype.avg=function(n){var t=[];if(n!==0)for(var r in this.arr)t[r]=this.arr[r]/n;return new e(t)},e.prototype.negate=function(){var n=[];for(var t in this.arr)n[t]=-this.arr[t];return new e(n)},e.prototype.squareEuclideanDistance=function(n){var t,r=n.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var i=0;for(var o in this.arr)i+=Math.pow(this.arr[o]-n.arr[o],2);return i}},e.prototype.euclideanDistance=function(n){var t,r=n.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var i=0;for(var o in this.arr)i+=Math.pow(this.arr[o]-n.arr[o],2);return Math.sqrt(i)}},e.prototype.normalize=function(){var n=[],t=(0,JR.clone)(this.arr);t.sort(function(a,s){return a-s});var r=t[t.length-1],i=t[0];for(var o in this.arr)n[o]=(this.arr[o]-i)/(r-i);return new e(n)},e.prototype.norm2=function(){var n;if(!(!((n=this.arr)===null||n===void 0)&&n.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},e.prototype.dot=function(n){var t,r=n.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var i=0;for(var o in this.arr)i+=this.arr[o]*n.arr[o];return i}},e.prototype.equal=function(n){var t,r=n.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var i in this.arr)if(this.arr[i]!==r[i])return!1;return!0},e}(),t4=e4;$c.default=t4;var ao={},mu={};Object.defineProperty(mu,"__esModule",{value:!0}),mu.secondReg=mu.dateReg=void 0,mu.secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,mu.dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,Object.defineProperty(ao,"__esModule",{value:!0}),ao.getPropertyWeight=ao.getAllSortProperties=ao.getAllProperties=ao.default=void 0;var XM=mu,Rv=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=100);var t={};e.forEach(function(i){i.properties&&Object.keys(i.properties).forEach(function(o){o==="id"||!"".concat(i.properties[o]).match(XM.secondReg)&&!"".concat(i.properties[o]).match(XM.dateReg)&&isNaN(Number(i.properties[o]))?t.hasOwnProperty(o)&&delete t[o]:t.hasOwnProperty(o)?t[o]+=1:t[o]=1})});var r=Object.keys(t).sort(function(i,o){return t[o]-t[i]});return r.length<n?r:r.slice(0,n)};ao.getAllSortProperties=Rv;var n4=function(e,n){return n.map(function(t){return e.hasOwnProperty(t)?e[t]:0})},UM=function(e){for(var n=Rv(e),t=[],r=0;r<e.length;r++)t[r]=n4(e[r].properties,n);return t};ao.getPropertyWeight=UM;var WM=function(e,n){n===void 0&&(n=void 0);var t=[];return e.forEach(function(r){n===void 0&&t.push(r),r[n]!==void 0&&t.push(r[n])}),t};ao.getAllProperties=WM;var r4={getAllSortProperties:Rv,getPropertyWeight:UM,getAllProperties:WM};ao.default=r4;var jv,so={},Qc={};Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.DistanceType=void 0,Qc.DistanceType=jv,function(e){e.EuclideanDistance="euclideanDistance"}(jv||(Qc.DistanceType=jv={})),Object.defineProperty(so,"__esModule",{value:!0}),so.oneHot=so.getDistance=so.getAllKeyValueMap=so.default=void 0;var VM=Zc,HM=Qc,qM=function(e){return e&&e.__esModule?e:{default:e}}($c),zv=function(e,n,t){var r=[];n!=null&&n.length?r=n:(e.forEach(function(o){r=r.concat(Object.keys(o))}),r=(0,VM.uniq)(r));var i={};return r.forEach(function(o){var a=[];e.forEach(function(s){s[o]!==void 0&&s[o]!==""&&a.push(s[o])}),a.length&&!(t!=null&&t.includes(o))&&(i[o]=(0,VM.uniq)(a))}),i};so.getAllKeyValueMap=zv;var ZM=function(e,n,t){var r=zv(e,n,t),i=[];if(!Object.keys(r).length)return i;var o=Object.values(r).every(function(a){return a.every(function(s){return typeof s=="number"})});return e.forEach(function(a,s){var u=[];Object.keys(r).forEach(function(c){var l=a[c],h=r[c],d=h.findIndex(function(g){return l===g}),f=[];if(o)f.push(l);else for(var p=0;p<h.length;p++)p===d?f.push(1):f.push(0);u=u.concat(f)}),i[s]=u}),i};so.oneHot=ZM;var KM=function(e,n,t,r){t===void 0&&(t=HM.DistanceType.EuclideanDistance);var i=0;return t===HM.DistanceType.EuclideanDistance&&(i=new qM.default(e).euclideanDistance(new qM.default(n))),i};so.getDistance=KM;var i4={getAllKeyValueMap:zv,oneHot:ZM,getDistance:KM};so.default=i4,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.default=void 0;var o4=Zc,a4=$M(ns),Jc=$M($c),s4=ao,u4=so;function $M(e){return e&&e.__esModule?e:{default:e}}var QM=function(e,n,t,r){for(var i=n.length,o=2*r,a=0,s=0;s<i;s++)for(var u=e[s].clusterId,c=0;c<i;c++)u===e[c].clusterId&&(a+=(n[s][c]||0)-(t[s]||0)*(t[c]||0)/o);return a*=1/o},Fv=function(e,n){e===void 0&&(e=[]);for(var t=e.length,r=new Jc.default([]),i=0;i<t;i++)r=r.add(new Jc.default(n[i]));var o=r.avg(t);o.normalize();var a=0;for(i=0;i<t;i++)a+=(u=new Jc.default(n[i])).squareEuclideanDistance(o);var s=[];for(e.forEach(function(){s.push([])}),i=0;i<t;i++){var u=new Jc.default(n[i]);e[i].clusterInertial=0;for(var c=0;c<t;c++)if(i!==c){var l=new Jc.default(n[c]);s[i][c]=u.squareEuclideanDistance(l),e[i].clusterInertial+=s[i][c]}else s[i][c]=0}var h=0,d=2*t*a;for(i=0;i<t;i++){var f=e[i].clusterId;for(c=0;c<t;c++){var p=e[c].clusterId;i!==c&&f===p&&(h+=e[i].clusterInertial*e[c].clusterInertial/Math.pow(d,2)-s[i][c]/d)}}return Number(h.toFixed(4))},c4=function(e,n,t,r,i,o,a,s,u){n===void 0&&(n=!1),t===void 0&&(t="weight"),r===void 0&&(r=1e-4),i===void 0&&(i=!1),o===void 0&&(o=void 0),a===void 0&&(a=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1);var c=e.nodes,l=c===void 0?[]:c,h=e.edges,d=h===void 0?[]:h,f=[];if(i){l.forEach(function(N,L){N.properties=N.properties||{},N.originIndex=L});var p=[];l.every(function(N){return N.hasOwnProperty("nodeType")})&&(p=Array.from(new Set(l.map(function(N){return N.nodeType}))),l.forEach(function(N){N.properties.nodeType=p.findIndex(function(L){return L===N.nodeType})}));var g=(0,s4.getAllProperties)(l,o);f=(0,u4.oneHot)(g,a,s)}var v=1,m={},y={};l.forEach(function(N,L){var z=String(v++);N.clusterId=z,m[z]={id:z,nodes:[N]},y[N.id]={node:N,idx:L}});var b=(0,a4.default)(e,n),x=[],w={},E=0;b.forEach(function(N,L){var z=0,Z=l[L].id;w[Z]={},N.forEach(function(ne,J){if(ne){z+=ne;var q=l[J].id;w[Z][q]=ne,E+=ne}}),x.push(z)}),E/=2;for(var S=1/0,M=1/0,k=0,_=[],C={};;){S=i&&l.every(function(N){return N.hasOwnProperty("properties")})?QM(l,b,x,E)+Fv(l,f)*u:QM(l,b,x,E),k===0&&(M=S,_=l,C=m);var T=S>0&&S>M&&S-M<r;if(S>M&&(_=l.map(function(N){return{node:N,clusterId:N.clusterId}}),C=(0,o4.clone)(m),M=S),T||k>100)break;k++,Object.keys(m).forEach(function(N){var L=0;d.forEach(function(z){var Z=z.source,ne=z.target,J=y[Z].node.clusterId,q=y[ne].node.clusterId;(J===N&&q!==N||q===N&&J!==N)&&(L+=z[t]||1)}),m[N].sumTot=L}),l.forEach(function(N,L){var z,Z=m[N.clusterId],ne=0,J=x[L]/(2*E),q=0,ie=Z.nodes;ie.forEach(function(Oe){var Ye=y[Oe.id].idx;q+=b[L][Ye]||0});var Me=q-Z.sumTot*J,me=ie.filter(function(Oe){return Oe.id!==N.id});me.forEach(function(Oe,Ye){f[Oe.originIndex]});var ke=Fv(me,f)*u,yt=w[N.id];if(Object.keys(yt).forEach(function(Oe){var Ye=y[Oe].node.clusterId;if(Ye!==N.clusterId){var Pe=m[Ye],Se=Pe.nodes;if(Se&&Se.length){var We=0;Se.forEach(function(Ze){var Je=y[Ze.id].idx;We+=b[L][Je]||0});var Ve=We-Pe.sumTot*J,O=Se.concat([N]);O.forEach(function(Ze,Je){f[Ze.originIndex]});var fe=Fv(O,f)*u,_e=Ve-Me;i&&(_e=Ve+fe-(Me+ke)),_e>ne&&(ne=_e,z=Pe)}}}),ne>0){z.nodes.push(N);var Tt=N.clusterId;N.clusterId=z.id;var cn=Z.nodes.indexOf(N);Z.nodes.splice(cn,1);var ct=0,Ge=0;d.forEach(function(Oe){var Ye=Oe.source,Pe=Oe.target,Se=y[Ye].node.clusterId,We=y[Pe].node.clusterId;(Se===z.id&&We!==z.id||We===z.id&&Se!==z.id)&&(ct+=Oe[t]||1),(Se===Tt&&We!==Tt||We===Tt&&Se!==Tt)&&(Ge+=Oe[t]||1)}),z.sumTot=ct,Z.sumTot=Ge}})}var A={},D=0;Object.keys(C).forEach(function(N){var L=C[N];if(L.nodes&&L.nodes.length){var z=String(D+1);z!==N&&(L.id=z,L.nodes=L.nodes.map(function(Z){return{id:Z.id,clusterId:z}}),C[z]=L,A[N]=z,delete C[N],D++)}else delete C[N]}),_.forEach(function(N){var L=N.node,z=N.clusterId;L&&(L.clusterId=z,L.clusterId&&A[L.clusterId]&&(L.clusterId=A[L.clusterId]))});var R=[],B={};d.forEach(function(N){var L=N.source,z=N.target,Z=N[t]||1,ne=y[L].node.clusterId,J=y[z].node.clusterId;if(ne&&J){var q="".concat(ne,"---").concat(J);if(B[q])B[q].weight+=Z,B[q].count++;else{var ie={source:ne,target:J,weight:Z,count:1};B[q]=ie,R.push(ie)}}});var F=[];return Object.keys(C).forEach(function(N){F.push(C[N])}),{clusters:F,clusterEdges:R}};Hd.default=c4;var qd={},Zd={};Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.default=void 0;var l4=function(){function e(n){this.count=n.length,this.parent={};for(var t=0,r=n;t<r.length;t++){var i=r[t];this.parent[i]=i}}return e.prototype.find=function(n){for(;this.parent[n]!==n;)n=this.parent[n];return n},e.prototype.union=function(n,t){var r=this.find(n),i=this.find(t);r!==i&&(r<i?(this.parent[t]!==t&&this.union(this.parent[t],n),this.parent[t]=this.parent[n]):(this.parent[n]!==n&&this.union(this.parent[n],t),this.parent[n]=this.parent[t]))},e.prototype.connected=function(n,t){return this.find(n)===this.find(t)},e}(),h4=l4;Zd.default=h4;var Kd={};Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.default=void 0;var d4=function(e,n){return e-n},f4=function(){function e(n){n===void 0&&(n=d4),this.compareFn=n,this.list=[]}return e.prototype.getLeft=function(n){return 2*n+1},e.prototype.getRight=function(n){return 2*n+2},e.prototype.getParent=function(n){return n===0?null:Math.floor((n-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var n=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),n},e.prototype.insert=function(n){if(n!==null){this.list.push(n);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(n){for(var t=this.getParent(n);n&&n>0&&this.compareFn(this.list[t],this.list[n])>0;){var r=this.list[t];this.list[t]=this.list[n],this.list[n]=r,n=t,t=this.getParent(n)}},e.prototype.moveDown=function(n){var t,r=n,i=this.getLeft(n),o=this.getRight(n),a=this.list.length;i!==null&&i<a&&this.compareFn(this.list[r],this.list[i])>0?r=i:o!==null&&o<a&&this.compareFn(this.list[r],this.list[o])>0&&(r=o),n!==r&&(t=[this.list[r],this.list[n]],this.list[n]=t[0],this.list[r]=t[1],this.moveDown(r))},e}(),p4=f4;Kd.default=p4,Object.defineProperty(qd,"__esModule",{value:!0}),qd.default=void 0;var g4=JM(Zd),v4=JM(Kd),Gv=Xn;function JM(e){return e&&e.__esModule?e:{default:e}}var m4=function(e,n){var t=[],r=e.nodes,i=r===void 0?[]:r,o=e.edges,a=o===void 0?[]:o;if(i.length===0)return t;var s=i[0],u=new Set;u.add(s);var c=new v4.default(function(f,p){return n?f.weight-p.weight:0});for((0,Gv.getEdgesByNodeId)(s.id,a).forEach(function(f){c.insert(f)});!c.isEmpty();){var l=c.delMin(),h=l.source,d=l.target;u.has(h)&&u.has(d)||(t.push(l),u.has(h)||(u.add(h),(0,Gv.getEdgesByNodeId)(h,a).forEach(function(f){c.insert(f)})),u.has(d)||(u.add(d),(0,Gv.getEdgesByNodeId)(d,a).forEach(function(f){c.insert(f)})))}return t},e_=function(e,n){var t=[],r=e.nodes,i=r===void 0?[]:r,o=e.edges,a=o===void 0?[]:o;if(i.length===0)return t;var s=a.map(function(d){return d});n&&s.sort(function(d,f){return d.weight-f.weight});for(var u=new g4.default(i.map(function(d){return d.id}));s.length>0;){var c=s.shift(),l=c.source,h=c.target;u.connected(l,h)||(t.push(c),u.union(l,h))}return t},y4=function(e,n,t){return t?{prim:m4,kruskal:e_}[t](e,n):e_(e,n)};qd.default=y4;var $d={};Object.defineProperty($d,"__esModule",{value:!0}),$d.default=void 0;var b4=function(e){return e&&e.__esModule?e:{default:e}}(Po),x4=Xn,w4=function(e,n,t){typeof n!="number"&&(n=1e-6),typeof t!="number"&&(t=.85);for(var r,i=1,o=0,a=1e3,s=e.nodes,u=s===void 0?[]:s,c=e.edges,l=c===void 0?[]:c,h=u.length,d={},f={},p=0;p<h;++p)d[v=(w=u[p]).id]=1/h,f[v]=1/h;for(var g=(0,b4.default)(e);a>0&&i>n;){for(o=0,p=0;p<h;++p){var v=(w=u[p]).id;if(r=0,g[w.id].inDegree===0)d[v]=0;else{for(var m=(0,x4.getNeighbors)(v,l,"source"),y=0;y<m.length;++y){var b=m[y],x=g[b].outDegree;x>0&&(r+=f[b]/x)}d[v]=t*r,o+=d[v]}}for(o=(1-o)/h,i=0,p=0;p<h;++p){var w;r=d[v=(w=u[p]).id]+o,i+=Math.abs(r-f[v]),f[v]=r}a-=1}return f};$d.default=w4;var Qd={},Jd={},Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.VACANT_NODE_LABEL=Un.VACANT_NODE_ID=Un.VACANT_GRAPH_ID=Un.VACANT_EDGE_LABEL=Un.VACANT_EDGE_ID=Un.Node=Un.Graph=Un.Edge=Un.AUTO_EDGE_ID=void 0,Un.VACANT_EDGE_ID=-1,Un.VACANT_NODE_ID=-1,Un.VACANT_EDGE_LABEL="-1",Un.VACANT_NODE_LABEL="-1",Un.VACANT_GRAPH_ID=-1,Un.AUTO_EDGE_ID="-1";var Yv=function(e,n,t,r){e===void 0&&(e=-1),n===void 0&&(n=-1),t===void 0&&(t=-1),r===void 0&&(r="-1"),this.id=e,this.from=n,this.to=t,this.label=r};Un.Edge=Yv;var t_=function(){function e(n,t){n===void 0&&(n=-1),t===void 0&&(t="-1"),this.id=n,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(n){this.edges.push(n),this.edgeMap[n.id]=n},e}();Un.Node=t_;var E4=function(){function e(n,t,r){n===void 0&&(n=-1),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=n,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(n,t){if(!this.nodeMap[n]){var r=new t_(n,t);this.nodes.push(r),this.nodeMap[n]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(n)}},e.prototype.addEdge=function(n,t,r,i){if((this.edgeIdAutoIncrease||n===void 0)&&(n=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[n])){var o=new Yv(n,t,r,i);if(this.edges.push(o),this.edgeMap[n]=o,this.nodeMap[t].addEdge(o),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(o),!this.directed){var a=new Yv(n,r,t,i);this.nodeMap[r].addEdge(a),this.edgeLabelMap[i].push(a)}}},e}();Un.Graph=E4,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.default=void 0;var S4=Zc,jr=Un,rs=function(){function e(n,t,r,i,o){this.fromNode=n,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||jr.VACANT_NODE_LABEL,edgeLabel:i||jr.VACANT_EDGE_LABEL,nodeLabel2:o||jr.VACANT_NODE_LABEL}}return e.prototype.equalTo=function(n){return this.fromNode===n.formNode&&this.toNode===n.toNode&&this.nodeEdgeNodeLabel===n.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(n){return!this.equalTo(n)},e}(),n_=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(n){var t=this.dfsEdgeList.length;if(t!==n.length)return!1;for(var r=0;r<t;r++)if(this.dfsEdgeList[r]!==n[r])return!1;return!0},e.prototype.notEqualTo=function(n){return!this.equalTo(n)},e.prototype.pushBack=function(n,t,r,i,o){return this.dfsEdgeList.push(new rs(n,t,r,i,o)),this.dfsEdgeList},e.prototype.toGraph=function(n,t){n===void 0&&(n=jr.VACANT_GRAPH_ID),t===void 0&&(t=!1);var r=new jr.Graph(n,!0,t);return this.dfsEdgeList.forEach(function(i){var o=i.fromNode,a=i.toNode,s=i.nodeEdgeNodeLabel,u=s.nodeLabel1,c=s.edgeLabel,l=s.nodeLabel2;u!==jr.VACANT_NODE_LABEL&&r.addNode(o,u),l!==jr.VACANT_NODE_LABEL&&r.addNode(a,l),u!==jr.VACANT_NODE_LABEL&&l!==u&&r.addEdge(void 0,o,a,c)}),r},e.prototype.buildRmpath=function(){this.rmpath=[];for(var n=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var r=this.dfsEdgeList[t],i=r.fromNode,o=r.toNode;i<o&&(n===void 0||o===n)&&(this.rmpath.push(t),n=i)}return this.rmpath},e.prototype.getNodeNum=function(){var n={};return this.dfsEdgeList.forEach(function(t){n[t.fromNode]||(n[t.fromNode]=!0),n[t.toNode]||(n[t.toNode]=!0)}),Object.keys(n).length},e}(),ef=function(){function e(n){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],n){for(;n;){var t=n.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,n=n.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(n){return this.nodesUsed[n.id]===1},e.prototype.hasEdge=function(n){return this.edgesUsed[n.id]===1},e}(),M4=function(){function e(n){var t=n.graphs,r=n.minSupport,i=r===void 0?2:r,o=n.minNodeNum,a=o===void 0?1:o,s=n.maxNodeNum,u=s===void 0?4:s,c=n.top,l=c===void 0?10:c,h=n.directed,d=h!==void 0&&h,f=n.verbose,p=f!==void 0&&f;this.graphs=t,this.dfsCode=new n_,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=l,this.directed=d,this.counter=0,this.maxNodeNum=u,this.minNodeNum=a,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(n,t){var r=this,i=[],o=n.nodeMap;return t.edges.forEach(function(a){(r.directed||t.label<=o[a.to].label)&&i.push(a)}),i},e.prototype.findBackwardEdge=function(n,t,r,i){if(!this.directed&&t===r)return null;for(var o=n.nodeMap,a=o[r.to].edges,s=a.length,u=0;u<s;u++){var c=a[u];if(!i.hasEdge(c)&&c.to===t.from){if(this.directed){if(o[t.from].label<o[r.to].label||o[t.from].label===o[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&o[t.to].label<=o[r.to].label)return c}}return null},e.prototype.findForwardPureEdges=function(n,t,r,i){for(var o=[],a=t.to,s=n.nodeMap[a].edges,u=s.length,c=0;c<u;c++){var l=s[c],h=n.nodeMap[l.to];r<=h.label&&!i.hasNode(h)&&o.push(l)}return o},e.prototype.findForwardRmpathEdges=function(n,t,r,i){for(var o=[],a=n.nodeMap,s=a[t.to].label,u=a[t.from].edges,c=u.length,l=0;l<c;l++){var h=u[l],d=a[h.to].label;t.to===h.to||r>d||i.hasNode(a[h.to])||(t.label<h.label||t.label===h.label&&s<=d)&&o.push(h)}return o},e.prototype.getSupport=function(n){var t={};return n.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},e.prototype.findMinLabel=function(n){var t=void 0;return Object.keys(n).forEach(function(r){var i=n[r],o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;t?(o<t.nodeLabel1||o===t.nodeLabel1&&a<t.edgeLabel||o===t.nodeLabel1&&a===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:o,edgeLabel:a,nodeLabel2:s}):t={nodeLabel1:o,edgeLabel:a,nodeLabel2:s}}),t},e.prototype.isMin=function(){var n=this,t=this.dfsCode;if(this.verbose,t.dfsEdgeList.length===1)return!0;var r=this.directed,i=t.toGraph(jr.VACANT_GRAPH_ID,r),o=i.nodeMap,a=new n_,s={};i.nodes.forEach(function(l){n.findForwardRootEdges(i,l).forEach(function(h){var d=o[h.to],f="".concat(l.label,"-").concat(h.label,"-").concat(d.label);s[f]||(s[f]={projected:[],nodeLabel1:l.label,edgeLabel:h.label,nodeLabel2:d.label});var p={graphId:i.id,edge:h,preNode:null};s[f].projected.push(p)})});var u=this.findMinLabel(s);if(u){a.dfsEdgeList.push(new rs(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return function l(h){for(var d=a.buildRmpath(),f=a.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=a.dfsEdgeList[d[0]].toNode,g={},v=!1,m=0,y=r?-1:0,b=function(A){if(v)return"break";h.forEach(function(D){var R=new ef(D),B=n.findBackwardEdge(i,R.edges[d[A]],R.edges[d[0]],R);B&&(g[B.label]||(g[B.label]={projected:[],edgeLabel:B.label}),g[B.label].projected.push({graphId:i.id,edge:g,preNode:D}),m=a.dfsEdgeList[d[A]].fromNode,v=!0)})},x=d.length-1;x>y&&b(x)!=="break";x--);if(v){var w=n.findMinLabel(g);a.dfsEdgeList.push(new rs(p,m,jr.VACANT_NODE_LABEL,w.edgeLabel,jr.VACANT_NODE_LABEL));var E=a.dfsEdgeList.length-1;return n.dfsCode.dfsEdgeList[E]===a.dfsEdgeList[E]&&l(g[w.edgeLabel].projected)}var S={};v=!1;var M=0;h.forEach(function(A){var D=new ef(A),R=n.findForwardPureEdges(i,D.edges[d[0]],f,D);R.length>0&&(v=!0,M=p,R.forEach(function(B){var F="".concat(B.label,"-").concat(o[B.to].label);S[F]||(S[F]={projected:[],edgeLabel:B.label,nodeLabel2:o[B.to].label}),S[F].projected.push({graphId:i.id,edge:B,preNode:A})}))});var k=d.length,_=function(A){if(v)return"break";var D=d[A];h.forEach(function(R){var B=new ef(R),F=n.findForwardRmpathEdges(i,B.edges[D],f,B);F.length>0&&(v=!0,M=a.dfsEdgeList[D].fromNode,F.forEach(function(N){var L="".concat(N.label,"-").concat(o[N.to].label);S[L]||(S[L]={projected:[],edgeLabel:N.label,nodeLabel2:o[N.to].label}),S[L].projected.push({graphId:i.id,edge:N,preNode:R})}))})};for(x=0;x<k&&_(x)!=="break";x++);if(!v)return!0;var C=n.findMinLabel(S);a.dfsEdgeList.push(new rs(M,p+1,jr.VACANT_NODE_LABEL,C.edgeLabel,C.nodeLabel2));var T=a.dfsEdgeList.length-1;return t.dfsEdgeList[T]===a.dfsEdgeList[T]&&l(S["".concat(C.edgeLabel,"-").concat(C.nodeLabel2)].projected)}(s[c].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var n=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,S4.clone)(n))}},e.prototype.subGraphMining=function(n){var t=this;if(!(this.getSupport(n)<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[i[0]].toNode,a=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,s={},u={};n.forEach(function(c){for(var l=t.graphs[c.graphId],h=l.nodeMap,d=new ef(c),f=i.length-1;f>=0;f--){var p=t.findBackwardEdge(l,d.edges[i[f]],d.edges[i[0]],d);if(p){var g="".concat(t.dfsCode.dfsEdgeList[i[f]].fromNode,"-").concat(p.label);u[g]||(u[g]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[i[f]].fromNode,edgeLabel:p.label}),u[g].projected.push({graphId:c.graphId,edge:p,preNode:c})}}if(!(r>=t.maxNodeNum)){t.findForwardPureEdges(l,d.edges[i[0]],a,d).forEach(function(m){var y="".concat(o,"-").concat(m.label,"-").concat(h[m.to].label);s[y]||(s[y]={projected:[],fromNodeId:o,edgeLabel:m.label,nodeLabel2:h[m.to].label}),s[y].projected.push({graphId:c.graphId,edge:m,preNode:c})});var v=function(m){t.findForwardRmpathEdges(l,d.edges[i[m]],a,d).forEach(function(y){var b="".concat(t.dfsCode.dfsEdgeList[i[m]].fromNode,"-").concat(y.label,"-").concat(h[y.to].label);s[b]||(s[b]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[i[m]].fromNode,edgeLabel:y.label,nodeLabel2:h[y.to].label}),s[b].projected.push({graphId:c.graphId,edge:y,preNode:c})})};for(f=0;f<i.length;f++)v(f)}}),Object.keys(u).forEach(function(c){var l=u[c],h=l.toNodeId,d=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new rs(o,h,"-1",d,"-1")),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(s).forEach(function(c){var l=s[c],h=l.fromNodeId,d=l.edgeLabel,f=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new rs(h,o+1,jr.VACANT_NODE_LABEL,d,f)),t.subGraphMining(s[c].projected),t.dfsCode.dfsEdgeList.pop()})}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var n=this.graphs,t=this.directed,r=this.minSupport,i=this.frequentSize1Subgraphs,o={},a={},s={};return Object.keys(n).forEach(function(u){var c=n[u],l=c.nodeMap;c.nodes.forEach(function(h,d){var f=h.label,p="".concat(u,"-").concat(f);if(!s[p]){var g=o[f]||0;g++,o[f]=g}s[p]={graphKey:u,label:f},h.edges.forEach(function(v){var m=f,y=l[v.to].label;if(!t&&m>y){var b=y;y=m,m=b}var x=v.label,w="".concat(m,"-").concat(x,"-").concat(y);if(!a[w]){var E=a[w]||0;E++,a[w]=E}})})}),Object.keys(o).forEach(function(u){if(!(o[u]<r)){var c={nodes:[],edges:[]};c.nodes.push({id:"0",label:u}),i.push(c)}}),i},e.prototype.run=function(){var n=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var r={};Object.keys(t).forEach(function(i){var o=t[i],a=o.nodeMap;o.nodes.forEach(function(s){n.findForwardRootEdges(o,s).forEach(function(u){var c=a[u.to],l="".concat(s.label,"-").concat(u.label,"-").concat(c.label);r[l]||(r[l]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:c.label});var h={graphId:i,edge:u,preNode:null};r[l].projected.push(h)})})}),Object.keys(r).forEach(function(i){var o=r[i],a=o.projected,s=o.nodeLabel1,u=o.edgeLabel,c=o.nodeLabel2;n.dfsCode.dfsEdgeList.push(new rs(0,1,s,u,c)),n.subGraphMining(a),n.dfsCode.dfsEdgeList.pop()})}},e}(),r_="cluster",_4=function(e){var n=e.graphs,t=e.directed,r=t!==void 0&&t,i=e.nodeLabelProp,o=i===void 0?r_:i,a=e.edgeLabelProp,s=a===void 0?r_:a,u=function(v,m,y,b){var x={};return Object.keys(v).forEach(function(w,E){var S=v[w],M=new jr.Graph(E,!0,m),k={};S.nodes.forEach(function(_,C){M.addNode(C,_[y]),k[_.id]=C}),S.edges.forEach(function(_,C){var T=k[_.source],A=k[_.target];M.addEdge(-1,T,A,_[b])}),M&&M.getNodeNum()&&(x[M.id]=M)}),x}(n,r,o,s),c=e.minSupport,l=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,f=e.top,p=new M4({graphs:u,minSupport:c,maxNodeNum:l,minNodeNum:h,top:f,verbose:d,directed:r});p.run();var g=function(v,m,y){var b=[];return v.forEach(function(x){var w={nodes:[],edges:[]};x.nodes.forEach(function(E){var S;w.nodes.push(((S={id:"".concat(E.id)})[m]=E.label,S))}),x.edges.forEach(function(E){var S;w.edges.push(((S={source:"".concat(E.from),target:"".concat(E.to)})[y]=E.label,S))}),b.push(w)}),b}(p.frequentSubgraphs,o,s);return g};Jd.default=_4,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.default=void 0;var i_=zM,o_=Xv(Kc),k4=Xv(Jd),a_=Xv(gu),C4=Xn;function Xv(e){return e&&e.__esModule?e:{default:e}}var s_=function(e,n,t,r){t===void 0&&(t="cluster"),r===void 0&&(r=2);var i=[],o=e.nodes;return n.forEach(function(a,s){i.push(u_(o,a,s,t,r))}),i},u_=function(e,n,t,r,i){var o=[t],a=[],s={};return n.forEach(function(u,c){if(u<=i&&t!==c){o.push(c),a.push(e[c]);var l=e[c][r];s[l]?(s[l].count++,s[l].dists.push(u)):s[l]={count:1,dists:[u]}}}),Object.keys(s).forEach(function(u){s[u].dists=s[u].dists.sort(function(c,l){return c-l})}),{nodeIdx:t,nodeId:e[t].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},tf=function(e,n,t,r){var i=t.nodes;return r||(r={}),Object.keys(e).forEach(function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var u=e[o],c=(a=n[u.start])===null||a===void 0?void 0:a.nodeIdxs,l=(s=n[u.end])===null||s===void 0?void 0:s.nodeIdxs;if(c&&l){var h=new Set(l),d=c.filter(function(m){return h.has(m)});if(d&&d.length){for(var f={},p=d.length,g=0;g<p;g++){var v=i[d[g]];r[o].nodes.push(v),f[v.id]=!0}t.edges.forEach(function(m){f[m.source]&&f[m.target]&&r[o].edges.push(m)})}}}}),r},nf=function(e,n,t,r){var i,o,a={};e.nodes.forEach(function(u){a[u.id]=u});var s=0;return!(!((i=n==null?void 0:n.edges)===null||i===void 0)&&i.length)||((o=n==null?void 0:n.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var c=a[u.source][t],l=a[u.target][t],h=n==null?void 0:n.nodes[0][t],d=n==null?void 0:n.nodes[1][t],f=n==null?void 0:n.edges[0][r];u[r]===f&&(c===h&&l===d||c===d&&l===h)&&s++}),s)},c_=function(e,n){var t={},r={};return e.forEach(function(i,o){t[i.id]={idx:o,node:i,degree:0,inDegree:0,outDegree:0};var a=i[n];r[a]||(r[a]=[]),r[a].push(i)}),{nodeMap:t,nodeLabelMap:r}},l_=function(e,n,t){var r={},i={};return e.forEach(function(o,a){r["".concat(C4.uniqueId)]={idx:a,edge:o};var s=o[n];i[s]||(i[s]=[]),i[s].push(o);var u=t[o.source];u&&(u.degree++,u.outDegree++);var c=t[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:r,edgeLabelMap:i}},h_=function(e,n,t){var r=n.length,i={};return n.forEach(function(o,a){for(var s=t?0:a+1,u=e[a].id,c=s;c<r;c++)if(a!==c){var l=e[c].id,h=o[c];i["".concat(u,"-").concat(l)]=h,t||(i["".concat(l,"-").concat(u)]=h)}}),i},A4=function(e,n,t,r,i,o,a,s,u,c,l){var h,d="".concat(n.id,"-").concat(t.id);if(c&&c[d])return c[d];var f=l?l[d]:void 0;if(!f){var p=((h={})[d]={start:r[n.id].idx,end:r[t.id].idx,distance:i},h);f=(l=tf(p,o,e,l))[d]}return nf(f,a,s,u)},d_=function(e,n,t,r){var i,o,a,s=(i=e[n])===null||i===void 0?void 0:i.degree,u=(o=e[n])===null||o===void 0?void 0:o.inDegree,c=(a=e[n])===null||a===void 0?void 0:a.outDegree;return e[n]===void 0&&(s=1/0,u=1/0,c=1/0,r[n].forEach(function(l){var h=t[l.id].degree;s>h&&(s=h);var d=t[l.id].inDegree;u>d&&(u=d);var f=t[l.id].outDegree;c>f&&(c=f)}),e[n]={degree:s,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},I4=function(e,n,t,r,i,o,a){var s;if(t===void 0&&(t=!1),o===void 0&&(o="cluster"),a===void 0&&(a="cluster"),e&&e.nodes){var u=e.nodes.length;if(u){var c=(0,o_.default)(e,t),l=(0,o_.default)(n,t),h=h_(e.nodes,c,t),d=h_(n.nodes,l,t),f=c_(e.nodes,o),p=f.nodeMap,g=f.nodeLabelMap,v=c_(n.nodes,o),m=v.nodeMap,y=v.nodeLabelMap;l_(e.edges,a,p);var b=l_(n.edges,a,m).edgeLabelMap,x=[];l==null||l.forEach(function(Ge){x=x.concat(Ge)}),i||(i=Math.max.apply(Math,(0,i_.__spreadArray)((0,i_.__spreadArray)([],x,!1),[2],!1))),r||(r=i);var w=s_(e,c,o,r),E=s_(n,l,o,r),S=function(Ge,Oe,Ye,Pe,Se){var We=Math.ceil(Ye/Oe),Ve={},O=0;return Pe.forEach(function(fe,_e){for(var Ze=0,Je=0,qe=fe.nodeIdxs,bt=fe.neighborNum-1;Ze<We;){for(var vt=qe[1+Math.floor(Math.random()*bt)],Mt=0;(Ve["".concat(_e,"-").concat(vt)]||Ve["".concat(vt,"-").concat(_e)])&&(vt=Math.floor(Math.random()*Oe),!(++Mt>2*Oe)););if(Mt<2*Oe&&(Ve["".concat(_e,"-").concat(vt)]={start:_e,end:vt,distance:Se[_e][vt]},Ze++,++O>=Ye))return Ve;if(++Je>2*Oe)break}Ze<We&&(We=(We+(We-Ze))/(Oe-_e-1))}),Ve}(0,u,Math.min(100,u*(u-1)/2),w,c),M=tf(S,w,e),k={graphs:M,nodeLabelProp:o,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:t},_=(0,k4.default)(k).slice(0,10),C=_.length,T=[];_.forEach(function(Ge,Oe){T[Oe]={},Object.keys(M).forEach(function(Ye){var Pe=M[Ye],Se=nf(Pe,Ge,o,a);T[Oe][Ye]=Se})});var A=function(Ge,Oe,Ye){for(var Pe=1/0,Se=0,We=function(O){var fe=Ge[O],_e=Object.keys(fe).sort(function(Mt,Ot){return fe[Mt]-fe[Ot]}),Ze=[];_e.forEach(function(Mt,Ot){Ze[Ot%10]||(Ze[Ot%10]={graphs:[],totalCount:0,aveCount:0}),Ze[Ot%10].graphs.push(Mt),Ze[Ot%10].totalCount+=fe[Mt]});var Je=0,qe=[];Ze.forEach(function(Mt){var Ot=Mt.totalCount/Mt.graphs.length;Mt.aveCount=Ot,qe.push(Ot);var Bt=0,fn=Mt.length;Mt.graphs.forEach(function(kn,gr){var Vr=fe[kn];Mt.graphs.forEach(function(kr,Mo){gr!==Mo&&(Bt+=Math.abs(Vr-fe[kr]))})}),Je+=Bt/=fn*(fn-1)/2}),Je/=Ze.length;var bt=0;qe.forEach(function(Mt,Ot){qe.forEach(function(Bt,fn){Ot!==fn&&(bt+=Math.abs(Mt-Bt))}),bt/=qe.length*(qe.length-1)/2});var vt=bt-Je;Pe<vt&&(Pe=vt,Se=O)},Ve=0;Ve<Oe;Ve++)We(Ve);return{structure:Ye[Se],structureCountMap:Ge[Se]}}(T,C,_),D=A.structure,R=A.structureCountMap,B=n.nodes[0],F=[],N=(s=n.nodes[0])===null||s===void 0?void 0:s[o],L=-1/0;n.nodes.forEach(function(Ge){var Oe=Ge[o],Ye=g[Oe];(Ye==null?void 0:Ye.length)>L&&(L=Ye.length,F=Ye,N=Oe,B=Ge)});var z={},Z={},ne={},J={},q={},ie={};Object.keys(y).forEach(function(Ge,Oe){q[Ge]=[],t&&(ie[Ge]=[]);var Ye=y[Ge],Pe={};Ye.forEach(function(O){var fe=d["".concat(B.id,"-").concat(O.id)];if(fe&&q[Ge].push(fe),Pe["".concat(B.id,"-").concat(O.id)]={start:0,end:m[O.id].idx,distance:fe},t){var _e=d["".concat(O.id,"-").concat(B.id)];_e&&ie[Ge].push(_e)}}),q[Ge]=q[Ge].sort(function(O,fe){return O-fe}),t&&(ie[Ge]=ie[Ge].sort(function(O,fe){return O-fe})),Z=tf(Pe,E,n,Z);var Se=[];if(Object.keys(Pe).forEach(function(O){if(ne[O])Se.push(ne[O]);else{var fe=Z[O];ne[O]=nf(fe,D,o,a),Se.push(ne[O])}}),Se=Se.sort(function(O,fe){return fe-O}),J["".concat(B.id,"-").concat(Ge)]=Se,Ge!==N)for(var We=function(O){var fe=F[O],_e=w[p[fe.id].idx],Ze=_e.nodeLabelCountMap[Ge],Je=y[Ge].length;if(!Ze||Ze.count<Je)return F.splice(O,1),"continue";for(var qe=!1,bt=0;bt<Je;bt++)if(Ze.dists[bt]>q[Ge][bt]){qe=!0;break}if(qe)return F.splice(O,1),"continue";var vt={};_e.neighbors.forEach(function(Bt){var fn=h["".concat(fe.id,"-").concat(Bt.id)];vt["".concat(fe.id,"-").concat(Bt.id)]={start:p[fe.id].idx,end:p[Bt.id].idx,distance:fn}}),M=tf(vt,w,e,M);var Mt=[];Object.keys(vt).forEach(function(Bt){if(R[Bt])Mt.push(R[Bt]);else{var fn=M[Bt];R[Bt]=nf(fn,D,o,a),Mt.push(R[Bt])}}),Mt=Mt.sort(function(Bt,fn){return fn-Bt});var Ot=!1;for(bt=0;bt<Je;bt++)if(Mt[bt]<Se[bt]){Ot=!0;break}return Ot?(F.splice(O,1),"continue"):void 0},Ve=((F==null?void 0:F.length)||0)-1;Ve>=0;Ve--)We(Ve)});var Me=[];F==null||F.forEach(function(Ge){for(var Oe=p[Ge.id].idx,Ye=u_(e.nodes,c[Oe],Oe,o,i).neighbors,Pe=!1,Se=Ye.length-1;Se>=0;Se--){if(Ye.length+1<n.nodes.length)return void(Pe=!0);var We=Ye[Se],Ve=We[o];if(y[Ve]&&y[Ve].length)if(q[Ve]&&q[Ve].length){var O="".concat(Ge.id,"-").concat(We.id),fe=h[O],_e=q[Ve].length-1;if(fe>q[Ve][_e])Ye.splice(Se,1);else{if(t){var Ze="".concat(We.id,"-").concat(Ge.id),Je=h[Ze];if(_e=ie[Ve].length-1,Je>ie[Ve][_e]){Ye.splice(Se,1);continue}}var qe=R[O]?R[O]:A4(e,Ge,We,p,fe,w,D,o,a,R,M),bt="".concat(B.id,"-").concat(Ve);if(qe<J[bt][J[bt].length-1])Ye.splice(Se,1);else{var vt=d_(z,Ve,m,y),Mt=vt.minPatternNodeLabelDegree;vt.minPatternNodeLabelInDegree,vt.minPatternNodeLabelOutDegree,p[We.id].degree<Mt&&Ye.splice(Se,1)}}}else Ye.splice(Se,1);else Ye.splice(Se,1)}Pe||Me.push({nodes:[Ge].concat(Ye)})});var me=(0,a_.default)(n,B.id,!1).length,ke={};t?(Object.keys(me).forEach(function(Ge){var Oe=m[Ge].node[o];ke[Oe]?ke[Oe].push(me[Ge]):ke[Oe]=[me[Ge]]}),Object.keys(ke).forEach(function(Ge){ke[Ge].sort(function(Oe,Ye){return Oe-Ye})})):ke=q;for(var yt=function(Ge){var Oe=Me[Ge],Ye=Oe.nodes[0],Pe={},Se={};Oe.nodes.forEach(function(Pt,zt){Se[Pt.id]={idx:zt,node:Pt,degree:0,inDegree:0,outDegree:0};var pn=Pt[o];Pe[pn]?Pe[pn]++:Pe[pn]=1});var We=[],Ve={};e.edges.forEach(function(Pt){Se[Pt.source]&&Se[Pt.target]&&(We.push(Pt),Ve[Pt[a]]?Ve[Pt[a]]++:Ve[Pt[a]]=1,Se[Pt.source].degree++,Se[Pt.target].degree++,Se[Pt.source].outDegree++,Se[Pt.target].inDegree++)});for(var O=Object.keys(b).length,fe=!1,_e=0;_e<O;_e++){var Ze=Object.keys(b)[_e];if(!Ve[Ze]||Ve[Ze]<b[Ze].length){fe=!0;break}}if(fe)return Me.splice(Ge,1),"continue";var Je=We.length;if(Je<n.edges.length)return Me.splice(Ge,1),"break";var qe=!1,bt=function(Pt){var zt=We[Pt],pn=zt[a],yr=b[pn];if(!yr||!yr.length)return Ve[pn]--,yr&&Ve[pn]<yr.length?(qe=!0,"break"):(We.splice(Pt,1),Se[zt.source].degree--,Se[zt.target].degree--,Se[zt.source].outDegree--,Se[zt.target].inDegree--,"continue");var Ns=Se[zt.source].node[o],Ga=Se[zt.target].node[o],Ya=!1;return yr.forEach(function(Ps){var Ds=m[Ps.source].node,vg=m[Ps.target].node;Ds[o]===Ns&&vg[o]===Ga&&(Ya=!0),t||Ds[o]!==Ga||vg[o]!==Ns||(Ya=!0)}),Ya?void 0:(Ve[pn]--,yr&&Ve[pn]<yr.length?(qe=!0,"break"):(We.splice(Pt,1),Se[zt.source].degree--,Se[zt.target].degree--,Se[zt.source].outDegree--,Se[zt.target].inDegree--,"continue"))};for(_e=Je-1;_e>=0&&bt(_e)!=="break";_e--);if(qe)return Me.splice(Ge,1),"continue";Oe.edges=We;var vt=(0,a_.default)(Oe,Oe.nodes[0].id,!1).length;if(Object.keys(vt).reverse().forEach(function(Pt){if(Pt!==Oe.nodes[0].id&&!qe){if(vt[Pt]===1/0){var zt=Se[Pt].node[o];if(Pe[zt]--,Pe[zt]<y[zt].length)return void(qe=!0);var pn=Oe.nodes.indexOf(Se[Pt].node);return Oe.nodes.splice(pn,1),void(Se[Pt]=void 0)}var yr=p[Pt].node[o];if(!ke[yr]||!ke[yr].length||vt[Pt]>ke[yr][ke[yr].length-1]){if(zt=Se[Pt].node[o],Pe[zt]--,Pe[zt]<y[zt].length)return void(qe=!0);pn=Oe.nodes.indexOf(Se[Pt].node),Oe.nodes.splice(pn,1),Se[Pt]=void 0}}}),qe)return Me.splice(Ge,1),"continue";for(var Mt=!0,Ot=0;Mt&&!qe;){if(Mt=!1,t?Se[Ye.id].degree<m[B.id].degree||Se[Ye.id].inDegree<m[B.id].inDegree||Se[Ye.id].outDegree<m[B.id].outDegree:Se[Ye.id].degree<m[B.id].degree){qe=!0;break}if(Pe[Ye[o]]<y[Ye[o]].length){qe=!0;break}for(var Bt=Oe.nodes.length-1;Bt>=0;Bt--){var fn=Oe.nodes[Bt],kn=Se[fn.id].degree,gr=Se[fn.id].inDegree,Vr=Se[fn.id].outDegree,kr=fn[o],Mo=d_(z,kr,m,y),sc=Mo.minPatternNodeLabelDegree,vh=Mo.minPatternNodeLabelInDegree,Fa=Mo.minPatternNodeLabelOutDegree;if(t?kn<sc||gr<vh||Vr<Fa:kn<sc){if(Pe[fn[o]]--,Pe[fn[o]]<y[fn[o]].length){qe=!0;break}Oe.nodes.splice(Bt,1),Se[fn.id]=void 0,Mt=!0}}if(qe||!Mt&&Ot!==0)break;for(var vr=(Je=We.length)-1;vr>=0;vr--){var mr=We[vr];if(!Se[mr.source]||!Se[mr.target]){We.splice(vr,1);var sn=mr[a];if(Ve[sn]--,Se[mr.source]&&(Se[mr.source].degree--,Se[mr.source].outDegree--),Se[mr.target]&&(Se[mr.target].degree--,Se[mr.target].inDegree--),b[sn]&&Ve[sn]<b[sn].length){qe=!0;break}Mt=!0}}Ot++}return qe||qe||Oe.nodes.length<n.nodes.length||We.length<n.edges.length?(Me.splice(Ge,1),"continue"):void 0},Tt=Me.length-1;Tt>=0&&yt(Tt)!=="break";Tt--);var cn=Me.length,ct=function(Ge){var Oe=Me[Ge],Ye={};Oe.edges.forEach(function(We){var Ve="".concat(We.source,"-").concat(We.target,"-").concat(We.label);Ye[Ve]?Ye[Ve]++:Ye[Ve]=1});for(var Pe=function(We){var Ve=Me[We],O={};Ve.edges.forEach(function(_e){var Ze="".concat(_e.source,"-").concat(_e.target,"-").concat(_e.label);O[Ze]?O[Ze]++:O[Ze]=1});var fe=!0;Object.keys(O).length!==Object.keys(Ye).length?fe=!1:Object.keys(Ye).forEach(function(_e){O[_e]!==Ye[_e]&&(fe=!1)}),fe&&Me.splice(We,1)},Se=cn-1;Se>Ge;Se--)Pe(Se);cn=Me.length};for(Tt=0;Tt<=cn-1;Tt++)ct(Tt);return Me}}};function Uv(e){return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Uv(e)}Qd.default=I4,function(e){function n(b){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},n(b)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDI",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"breadthFirstSearch",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"connectedComponent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"depthFirstSearch",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"detectCycle",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"dijkstra",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"findAllPath",{enumerable:!0,get:function(){return c.findAllPath}}),Object.defineProperty(e,"findShortestPath",{enumerable:!0,get:function(){return c.findShortestPath}}),Object.defineProperty(e,"floydWarshall",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"getAdjMatrix",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"getDegree",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"getInDegree",{enumerable:!0,get:function(){return o.getInDegree}}),Object.defineProperty(e,"getNeighbors",{enumerable:!0,get:function(){return v.getNeighbors}}),Object.defineProperty(e,"getOutDegree",{enumerable:!0,get:function(){return o.getOutDegree}}),Object.defineProperty(e,"labelPropagation",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"louvain",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"minimumSpanningTree",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"pageRank",{enumerable:!0,get:function(){return p.default}});var t=y(ns),r=y(Gd),i=y(ga),o=function(b,x){if(b&&b.__esModule)return b;if(b===null||n(b)!=="object"&&typeof b!="function")return{default:b};var w=m(x);if(w&&w.has(b))return w.get(b);var E={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in b)if(M!=="default"&&Object.prototype.hasOwnProperty.call(b,M)){var k=S?Object.getOwnPropertyDescriptor(b,M):null;k&&(k.get||k.set)?Object.defineProperty(E,M,k):E[M]=b[M]}return E.default=b,w&&w.set(b,E),E}(Po),a=y(oo),s=y(Ud),u=y(gu),c=vu,l=y(Kc),h=y(Vd),d=y(Hd),f=y(qd),p=y($d),g=y(Qd),v=Xn;function m(b){if(typeof WeakMap!="function")return null;var x=new WeakMap,w=new WeakMap;return(m=function(E){return E?w:x})(b)}function y(b){return b&&b.__esModule?b:{default:b}}}(IM),Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.default=void 0;var Wv=function(e,n){if(e&&e.__esModule)return e;if(e===null||Uv(e)!=="object"&&typeof e!="function")return{default:e};var t=p_(n);if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(IM),f_=pa;function p_(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,t=new WeakMap;return(p_=function(r){return r?t:n})(e)}var Vv=typeof self!="undefined"?self:{};Vv.onmessage=function(e){var n=e.data,t=n._algorithmType,r=n.data;if(t)if(typeof Wv[t]!="function")Vv.postMessage({_algorithmType:f_.MESSAGE.FAILURE});else{var i=Wv[t].apply(Wv,r);Vv.postMessage({_algorithmType:f_.MESSAGE.SUCCESS,data:i})}},Fd.default=null,Object.defineProperty(zd,"__esModule",{value:!0}),zd.default=void 0;var T4=pa,O4=function(e){return e&&e.__esModule?e:{default:e}}(Fd),N4=function(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return new Promise(function(r,i){var o=new O4.default;o.postMessage({_algorithmType:e,data:n}),o.onmessage=function(a){var s=a.data,u=s.data,c=s._algorithmType;T4.MESSAGE.SUCCESS===c?r(u):i(),o.terminate()}})}};zd.default=N4,Object.defineProperty(en,"__esModule",{value:!0}),en.pageRankAsync=en.minimumSpanningTreeAsync=en.louvainAsync=en.labelPropagationAsync=en.getOutDegreeAsync=en.getNeighborsAsync=en.getInDegreeAsync=en.getDegreeAsync=en.getAdjMatrixAsync=en.floydWarshallAsync=en.findShortestPathAsync=en.findAllPathAsync=en.dijkstraAsync=en.detectCycleAsync=en.detectAllUndirectedCycleAsync=en.detectAllDirectedCycleAsync=en.detectAllCyclesAsync=en.connectedComponentAsync=en.GADDIAsync=void 0;var Kn=function(e){return e&&e.__esModule?e:{default:e}}(zd),$n=pa;en.getAdjMatrixAsync=function(e,n){return(0,Kn.default)($n.ALGORITHM.getAdjMatrix).apply(void 0,[e,n])},en.connectedComponentAsync=function(e,n){return(0,Kn.default)($n.ALGORITHM.connectedComponent).apply(void 0,[e,n])},en.getDegreeAsync=function(e){return(0,Kn.default)($n.ALGORITHM.getDegree)(e)},en.getInDegreeAsync=function(e,n){return(0,Kn.default)($n.ALGORITHM.getInDegree)(e,n)},en.getOutDegreeAsync=function(e,n){return(0,Kn.default)($n.ALGORITHM.getOutDegree)(e,n)},en.detectCycleAsync=function(e){return(0,Kn.default)($n.ALGORITHM.detectCycle)(e)},en.detectAllCyclesAsync=function(e){return(0,Kn.default)($n.ALGORITHM.detectAllCycles)(e)},en.detectAllDirectedCycleAsync=function(e){return(0,Kn.default)($n.ALGORITHM.detectAllDirectedCycle)(e)},en.detectAllUndirectedCycleAsync=function(e){return(0,Kn.default)($n.ALGORITHM.detectAllUndirectedCycle)(e)},en.dijkstraAsync=function(e,n,t,r){return(0,Kn.default)($n.ALGORITHM.dijkstra).apply(void 0,[e,n,t,r])},en.findAllPathAsync=function(e,n,t,r){return(0,Kn.default)($n.ALGORITHM.findAllPath).apply(void 0,[e,n,t,r])},en.findShortestPathAsync=function(e,n,t,r,i){return(0,Kn.default)($n.ALGORITHM.findShortestPath).apply(void 0,[e,n,t,r,i])},en.floydWarshallAsync=function(e,n){return(0,Kn.default)($n.ALGORITHM.floydWarshall).apply(void 0,[e,n])},en.labelPropagationAsync=function(e,n,t,r){return r===void 0&&(r=1e3),(0,Kn.default)($n.ALGORITHM.labelPropagation)(e,n,t,r)},en.louvainAsync=function(e,n,t,r){return(0,Kn.default)($n.ALGORITHM.louvain)(e,n,t,r)},en.minimumSpanningTreeAsync=function(e,n,t){return(0,Kn.default)($n.ALGORITHM.minimumSpanningTree).apply(void 0,[e,n,t])},en.pageRankAsync=function(e,n,t){return(0,Kn.default)($n.ALGORITHM.pageRank).apply(void 0,[e,n,t])},en.getNeighborsAsync=function(e,n,t){return(0,Kn.default)($n.ALGORITHM.getNeighbors).apply(void 0,[e,n,t])},en.GADDIAsync=function(e,n,t,r,i,o,a){return t===void 0&&(t=!1),o===void 0&&(o="cluster"),a===void 0&&(a="cluster"),(0,Kn.default)($n.ALGORITHM.GADDI).apply(void 0,[e,n,t,r,i,o,a])},function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDIAsync",{enumerable:!0,get:function(){return n.GADDIAsync}}),Object.defineProperty(e,"connectedComponentAsync",{enumerable:!0,get:function(){return n.connectedComponentAsync}}),e.default=void 0,Object.defineProperty(e,"detectAllCyclesAsync",{enumerable:!0,get:function(){return n.detectAllCyclesAsync}}),Object.defineProperty(e,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return n.detectAllDirectedCycleAsync}}),Object.defineProperty(e,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return n.detectAllUndirectedCycleAsync}}),Object.defineProperty(e,"detectCycleAsync",{enumerable:!0,get:function(){return n.detectCycleAsync}}),e.detectDirectedCycleAsync=void 0,Object.defineProperty(e,"dijkstraAsync",{enumerable:!0,get:function(){return n.dijkstraAsync}}),Object.defineProperty(e,"findAllPathAsync",{enumerable:!0,get:function(){return n.findAllPathAsync}}),Object.defineProperty(e,"findShortestPathAsync",{enumerable:!0,get:function(){return n.findShortestPathAsync}}),Object.defineProperty(e,"floydWarshallAsync",{enumerable:!0,get:function(){return n.floydWarshallAsync}}),Object.defineProperty(e,"getAdjMatrixAsync",{enumerable:!0,get:function(){return n.getAdjMatrixAsync}}),Object.defineProperty(e,"getDegreeAsync",{enumerable:!0,get:function(){return n.getDegreeAsync}}),Object.defineProperty(e,"getInDegreeAsync",{enumerable:!0,get:function(){return n.getInDegreeAsync}}),Object.defineProperty(e,"getNeighborsAsync",{enumerable:!0,get:function(){return n.getNeighborsAsync}}),Object.defineProperty(e,"getOutDegreeAsync",{enumerable:!0,get:function(){return n.getOutDegreeAsync}}),Object.defineProperty(e,"labelPropagationAsync",{enumerable:!0,get:function(){return n.labelPropagationAsync}}),Object.defineProperty(e,"louvainAsync",{enumerable:!0,get:function(){return n.louvainAsync}}),Object.defineProperty(e,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return n.minimumSpanningTreeAsync}}),Object.defineProperty(e,"pageRankAsync",{enumerable:!0,get:function(){return n.pageRankAsync}});var n=en,t=n.detectCycleAsync;e.detectDirectedCycleAsync=t;var r={getAdjMatrixAsync:n.getAdjMatrixAsync,connectedComponentAsync:n.connectedComponentAsync,getDegreeAsync:n.getDegreeAsync,getInDegreeAsync:n.getInDegreeAsync,getOutDegreeAsync:n.getOutDegreeAsync,detectCycleAsync:n.detectCycleAsync,detectDirectedCycleAsync:t,detectAllCyclesAsync:n.detectAllCyclesAsync,detectAllDirectedCycleAsync:n.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:n.detectAllUndirectedCycleAsync,dijkstraAsync:n.dijkstraAsync,findAllPathAsync:n.findAllPathAsync,findShortestPathAsync:n.findShortestPathAsync,floydWarshallAsync:n.floydWarshallAsync,labelPropagationAsync:n.labelPropagationAsync,louvainAsync:n.louvainAsync,minimumSpanningTreeAsync:n.minimumSpanningTreeAsync,pageRankAsync:n.pageRankAsync,getNeighborsAsync:n.getNeighborsAsync,GADDIAsync:n.GADDIAsync};e.default=r}(Dv);const P4=Cr({__proto__:null,default:qs(Dv)},[Dv]);function g_(e,n,t,r){var i=e-t,o=n-r;return Math.sqrt(i*i+o*o)}function is(e,n,t,r,i,o){return i>=e&&i<=e+t&&o>=n&&o<=n+r}function el(e,n){return!(n.minX>e.maxX||n.maxX<e.minX||n.minY>e.maxY||n.maxY<e.minY)}function v_(e,n){return e[0]===n[0]&&e[1]===n[1]}var D4=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,L4=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,B4=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,m_=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function y_(e,n){re(e.match(m_),function(t){var r=t.split(":");n.addColorStop(r[0],r[1])})}function R4(e,n,t){var r=n.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if(he(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return function(i,o,a){var s,u,c=D4.exec(a),l=parseFloat(c[1])%360*(Math.PI/180),h=c[2],d=o.getBBox();l>=0&&l<.5*Math.PI?(s={x:d.minX,y:d.minY},u={x:d.maxX,y:d.maxY}):.5*Math.PI<=l&&l<Math.PI?(s={x:d.maxX,y:d.minY},u={x:d.minX,y:d.maxY}):Math.PI<=l&&l<1.5*Math.PI?(s={x:d.maxX,y:d.maxY},u={x:d.minX,y:d.minY}):(s={x:d.minX,y:d.maxY},u={x:d.maxX,y:d.minY});var f=Math.tan(l),p=f*f,g=(u.x-s.x+f*(u.y-s.y))/(p+1)+s.x,v=f*(u.x-s.x+f*(u.y-s.y))/(p+1)+s.y,m=i.createLinearGradient(s.x,s.y,g,v);return y_(h,m),m}(e,n,t);if(t[0]==="r")return function(i,o,a){var s=L4.exec(a),u=parseFloat(s[1]),c=parseFloat(s[2]),l=parseFloat(s[3]),h=s[4];if(l===0){var d=h.match(m_);return d[d.length-1].split(":")[1]}var f=o.getBBox(),p=f.maxX-f.minX,g=f.maxY-f.minY,v=Math.sqrt(p*p+g*g)/2,m=i.createRadialGradient(f.minX+p*u,f.minY+g*c,0,f.minX+p/2,f.minY+g/2,l*v);return y_(h,m),m}(e,n,t);if(t[0]==="p")return function(i,o,a){if(o.get("patternSource")&&o.get("patternSource")===a)return o.get("pattern");var s,u,c=B4.exec(a),l=c[1],h=c[2];function d(){s=i.createPattern(u,l),o.set("pattern",s),o.set("patternSource",a)}switch(l){case"a":l="repeat";break;case"x":l="repeat-x";break;case"y":l="repeat-y";break;default:l="no-repeat"}return u=new Image,h.match(/^data:/i)||(u.crossOrigin="Anonymous"),u.src=h,u.complete?d():(u.onload=d,u.src=u.src),s}(e,n,t)}return t}return t instanceof CanvasPattern?t:void 0}function rf(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Hv(e,n){return rf(e)*rf(n)?(e[0]*n[0]+e[1]*n[1])/(rf(e)*rf(n)):1}function b_(e,n){return(e[0]*n[1]<e[1]*n[0]?-1:1)*Math.acos(Hv(e,n))}function x_(e,n){var t=n[1],r=n[2],i=Xh(Uh(n[3]),2*Math.PI),o=n[4],a=n[5],s=e[0],u=e[1],c=n[6],l=n[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(u-l)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(u-l)/2,f=h*h/(t*t)+d*d/(r*r);f>1&&(t*=Math.sqrt(f),r*=Math.sqrt(f));var p=t*t*(d*d)+r*r*(h*h),g=p?Math.sqrt((t*t*(r*r)-p)/p):1;o===a&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*t*d/r:0,m=t?g*-r*h/t:0,y=(s+c)/2+Math.cos(i)*v-Math.sin(i)*m,b=(u+l)/2+Math.sin(i)*v+Math.cos(i)*m,x=[(h-v)/t,(d-m)/r],w=[(-1*h-v)/t,(-1*d-m)/r],E=b_([1,0],x),S=b_(x,w);return Hv(x,w)<=-1&&(S=Math.PI),Hv(x,w)>=1&&(S=0),a===0&&S>0&&(S-=2*Math.PI),a===1&&S<0&&(S+=2*Math.PI),{cx:y,cy:b,rx:v_(e,[c,l])?0:t,ry:v_(e,[c,l])?0:r,startAngle:E,endAngle:E+S,xRotation:i,arcFlag:o,sweepFlag:a}}var of=Math.sin,af=Math.cos,qv=Math.atan2,sf=Math.PI;function w_(e,n,t,r,i,o,a){var s=n.stroke,u=n.lineWidth,c=qv(r-o,t-i),l=new tm({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*af(sf/6)+","+10*of(sf/6)+" L0,0 L"+10*af(sf/6)+",-"+10*of(sf/6),stroke:s,lineWidth:u}});l.translate(i,o),l.rotateAtPoint(i,o,c),e.set(a?"startArrowShape":"endArrowShape",l)}function E_(e,n,t,r,i,o,a){var s=n.startArrow,u=n.endArrow,c=n.stroke,l=n.lineWidth,h=a?s:u,d=h.d,f=h.fill,p=h.stroke,g=h.lineWidth,v=yn(h,["d","fill","stroke","lineWidth"]),m=qv(r-o,t-i);d&&(i-=af(m)*d,o-=of(m)*d);var y=new tm({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:P(P({},v),{stroke:p||c,lineWidth:g||l,fill:f})});y.translate(i,o),y.rotateAtPoint(i,o,m),e.set(a?"startArrowShape":"endArrowShape",y)}function os(e,n,t,r,i){var o=qv(r-n,t-e);return{dx:af(o)*i,dy:of(o)*i}}function Zv(e,n,t,r,i,o){typeof n.startArrow=="object"?E_(e,n,t,r,i,o,!0):n.startArrow?w_(e,n,t,r,i,o,!0):e.set("startArrowShape",null)}function Kv(e,n,t,r,i,o){typeof n.endArrow=="object"?E_(e,n,t,r,i,o,!1):n.endArrow?w_(e,n,t,r,i,o,!1):e.set("startArrowShape",null)}var S_={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function yu(e,n){var t=n.attr();for(var r in t){var i=t[r],o=S_[r]?S_[r]:r;o==="matrix"&&i?e.transform(i[0],i[1],i[3],i[4],i[6],i[7]):o==="lineDash"&&e.setLineDash?at(i)&&e.setLineDash(i):(o==="strokeStyle"||o==="fillStyle"?i=R4(e,n,i):o==="globalAlpha"&&(i*=e.globalAlpha),e[o]=i)}}function $v(e,n,t){for(var r=0;r<n.length;r++){var i=n[r];i.cfg.visible?i.draw(e,t):i.skipDraw()}}function j4(e,n,t){var r=e.get("refreshElements");re(r,function(i){if(i!==e)for(var o=i.cfg.parent;o&&o!==e&&!o.cfg.refresh;)o.cfg.refresh=!0,o=o.cfg.parent}),r[0]===e?Jv(n):Qv(n,t)}function Qv(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&Jv(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&Qv(r.cfg.children,n);else{var i=z4(r,n);r.cfg.refresh=i,i&&r.isGroup()&&Qv(r.cfg.children,n)}}}function M_(e){for(var n=0;n<e.length;n++){var t=e[n];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&M_(t.cfg.children)}}function Jv(e,n){for(var t=0;t<e.length;t++){var r=e[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&Jv(r.get("children")))}}function z4(e,n){var t=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&t&&el(t,n)}function __(e,n,t,r){var i=t.path,o=t.startArrow,a=t.endArrow;if(i){var s=[0,0],u=[0,0],c={dx:0,dy:0};n.beginPath();for(var l=0;l<i.length;l++){var h=i[l],d=h[0];if(l===0&&o&&o.d)c=os((f=e.getStartTangent())[0][0],f[0][1],f[1][0],f[1][1],o.d);else if(l===i.length-2&&i[l+1][0]==="Z"&&a&&a.d)i[l+1][0]==="Z"&&(c=os((f=e.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d));else if(l===i.length-1&&a&&a.d){var f;i[0]!=="Z"&&(c=os((f=e.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d))}var p=c.dx,g=c.dy;switch(d){case"M":n.moveTo(h[1]-p,h[2]-g),u=[h[1],h[2]];break;case"L":n.lineTo(h[1]-p,h[2]-g);break;case"Q":n.quadraticCurveTo(h[1],h[2],h[3]-p,h[4]-g);break;case"C":n.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-p,h[6]-g);break;case"A":var v=void 0;r?(v=r[l])||(v=x_(s,h),r[l]=v):v=x_(s,h);var m=v.cx,y=v.cy,b=v.rx,x=v.ry,w=v.startAngle,E=v.endAngle,S=v.xRotation,M=v.sweepFlag;if(n.ellipse)n.ellipse(m,y,b,x,S,w,E,1-M);else{var k=b>x?b:x,_=b>x?1:b/x,C=b>x?x/b:1;n.translate(m,y),n.rotate(S),n.scale(_,C),n.arc(0,0,k,w,E,1-M),n.scale(1/_,1/C),n.rotate(-S),n.translate(-m,-y)}break;case"Z":n.closePath()}if(d==="Z")s=u;else{var T=h.length;s=[h[T-2],h[T-1]]}}}}function k_(e,n){var t=e.get("canvas");t&&(n==="remove"&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(t.refreshElement(e,n,t),t.get("autoDraw")&&t.draw())))}function F4(e){var n,t,r;if(e.destroyed)n=e._cacheCanvasBBox;else{var i=e.get("cacheCanvasBBox"),o=i&&!(!i.width||!i.height),a=e.getCanvasBBox(),s=a&&!(!a.width||!a.height);o&&s?(r=a,n=(t=i)&&r?{minX:Math.min(t.minX,r.minX),minY:Math.min(t.minY,r.minY),maxX:Math.max(t.maxX,r.maxX),maxY:Math.max(t.maxY,r.maxY)}:t||r):o?n=i:s&&(n=a)}return n}var C_=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.onCanvasChange=function(t){k_(this,t)},n.prototype.getShapeBase=function(){return rr},n.prototype.getGroupBase=function(){return n},n.prototype._applyClip=function(t,r){r&&(t.save(),yu(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},n.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],i=[];re(t,function(d){var f=d.cfg.cacheCanvasBBox;f&&d.cfg.isInView&&(r.push(f.minX,f.maxX),i.push(f.minY,f.maxY))});var o=null;if(r.length){var a=Wi(r),s=Ui(r),u=Wi(i),c=Ui(i);o={minX:a,minY:u,x:a,y:u,maxX:s,maxY:c,width:s-a,height:c-u};var l=this.cfg.canvas;if(l){var h=l.getViewRange();this.set("isInView",el(o,h))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",o)},n.prototype.draw=function(t,r){var i=this.cfg.children,o=!r||this.cfg.refresh;i.length&&o&&(t.save(),yu(t,this),this._applyClip(t,this.getClip()),$v(t,i,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},n}(AS),Ci=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.getShapeBase=function(){return rr},n.prototype.getGroupBase=function(){return C_},n.prototype.onCanvasChange=function(t){k_(this,t)},n.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),i=OS(t)(this),o=r/2,a=i.x-o,s=i.y-o,u=i.x+i.width+o,c=i.y+i.height+o;return{x:a,minX:a,y:s,minY:s,width:i.width+r,height:i.height+r,maxX:u,maxY:c}},n.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},n.prototype.isStroke=function(){return!!this.attrs.stroke},n.prototype._applyClip=function(t,r){r&&(t.save(),yu(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},n.prototype.draw=function(t,r){var i=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1)return void this.set("hasChanged",!1);if(!el(r,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),yu(t,this),this._applyClip(t,i),this.drawPath(t),t.restore(),this._afterDraw()},n.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},n.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),i=el(r,t);this.set("isInView",i),i?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},n.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},n.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},n.prototype.fill=function(t){t.fill()},n.prototype.stroke=function(t){t.stroke()},n.prototype.strokeAndFill=function(t){var r=this.attrs,i=r.lineWidth,o=r.opacity,a=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(ht(s)||s===1?this.fill(t):(t.globalAlpha=s,this.fill(t),t.globalAlpha=o)),this.isStroke()&&i>0&&(ht(a)||a===1||(t.globalAlpha=a),this.stroke(t)),this.afterDrawPath(t)},n.prototype.createPath=function(t){},n.prototype.afterDrawPath=function(t){},n.prototype.isInShape=function(t,r){var i=this.isStroke(),o=this.isFill(),a=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,i,o,a)},n.prototype.isInStrokeOrPath=function(t,r,i,o,a){return!1},n.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},n}(IS),G4=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,r:0})},n.prototype.isInStrokeOrPath=function(t,r,i,o,a){var s=this.attr(),u=s.x,c=s.y,l=s.r,h=a/2,d=g_(u,c,t,r);return o&&i?d<=l+h:o?d<=l:!!i&&d>=l-h&&d<=l+h},n.prototype.createPath=function(t){var r=this.attr(),i=r.x,o=r.y,a=r.r;t.beginPath(),t.arc(i,o,a,0,2*Math.PI,!1),t.closePath()},n}(Ci);function uf(e,n,t,r){return e/(t*t)+n/(r*r)}var Y4=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,rx:0,ry:0})},n.prototype.isInStrokeOrPath=function(t,r,i,o,a){var s=this.attr(),u=a/2,c=s.x,l=s.y,h=s.rx,d=s.ry,f=(t-c)*(t-c),p=(r-l)*(r-l);return o&&i?uf(f,p,h+u,d+u)<=1:o?uf(f,p,h,d)<=1:!!i&&uf(f,p,h-u,d-u)>=1&&uf(f,p,h+u,d+u)<=1},n.prototype.createPath=function(t){var r=this.attr(),i=r.x,o=r.y,a=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(i,o,a,s,0,0,2*Math.PI,!1);else{var u=a>s?a:s,c=a>s?1:a/s,l=a>s?s/a:1;t.save(),t.translate(i,o),t.scale(c,l),t.arc(0,0,u,0,2*Math.PI),t.restore(),t.closePath()}},n}(Ci);function A_(e){return e instanceof HTMLElement&&he(e.nodeName)&&e.nodeName.toUpperCase()==="CANVAS"}var X4=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,width:0,height:0})},n.prototype.initAttrs=function(t){this._setImage(t.img)},n.prototype.isStroke=function(){return!1},n.prototype.isOnlyHitBox=function(){return!0},n.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},n.prototype._setImage=function(t){var r=this,i=this.attrs;if(he(t)){var o=new Image;o.onload=function(){if(r.destroyed)return!1;r.attr("img",o),r.set("loading",!1),r._afterLoading();var a=r.get("callback");a&&a.call(r)},o.crossOrigin="Anonymous",o.src=t,this.set("loading",!0)}else t instanceof Image?(i.width||(i.width=t.width),i.height||(i.height=t.height)):A_(t)&&(i.width||(i.width=Number(t.getAttribute("width"))),i.height||(i.height,Number(t.getAttribute("height"))))},n.prototype.onAttrChange=function(t,r,i){e.prototype.onAttrChange.call(this,t,r,i),t==="img"&&this._setImage(r)},n.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var r=this.attr(),i=r.x,o=r.y,a=r.width,s=r.height,u=r.sx,c=r.sy,l=r.swidth,h=r.sheight,d=r.img;(d instanceof Image||A_(d))&&(ht(u)||ht(c)||ht(l)||ht(h)?t.drawImage(d,i,o,a,s):t.drawImage(d,u,c,l,h,i,o,a,s))},n}(Ci);function va(e,n,t,r,i,o,a){var s=Math.min(e,t),u=Math.max(e,t),c=Math.min(n,r),l=Math.max(n,r),h=i/2;return o>=s-h&&o<=u+h&&a>=c-h&&a<=l+h&&wr.pointToLine(e,n,t,r,o,a)<=i/2}var U4=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this.setArrow()},n.prototype.onAttrChange=function(t,r,i){e.prototype.onAttrChange.call(this,t,r,i),this.setArrow()},n.prototype.setArrow=function(){var t=this.attr(),r=t.x1,i=t.y1,o=t.x2,a=t.y2,s=t.startArrow,u=t.endArrow;s&&Zv(this,t,o,a,r,i),u&&Kv(this,t,r,i,o,a)},n.prototype.isInStrokeOrPath=function(t,r,i,o,a){if(!i||!a)return!1;var s=this.attr();return va(s.x1,s.y1,s.x2,s.y2,a,t,r)},n.prototype.createPath=function(t){var r=this.attr(),i=r.x1,o=r.y1,a=r.x2,s=r.y2,u=r.startArrow,c=r.endArrow,l={dx:0,dy:0},h={dx:0,dy:0};u&&u.d&&(l=os(i,o,a,s,r.startArrow.d)),c&&c.d&&(h=os(i,o,a,s,r.endArrow.d)),t.beginPath(),t.moveTo(i+l.dx,o+l.dy),t.lineTo(a-h.dx,s-h.dy)},n.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),i=this.get("endArrowShape");r&&r.draw(t),i&&i.draw(t)},n.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,i=t.y1,o=t.x2,a=t.y2;return wr.length(r,i,o,a)},n.prototype.getPoint=function(t){var r=this.attr(),i=r.x1,o=r.y1,a=r.x2,s=r.y2;return wr.pointAt(i,o,a,s,t)},n}(Ci),W4={circle:function(e,n,t){return[["M",e-t,n],["A",t,t,0,1,0,e+t,n],["A",t,t,0,1,0,e-t,n]]},square:function(e,n,t){return[["M",e-t,n-t],["L",e+t,n-t],["L",e+t,n+t],["L",e-t,n+t],["Z"]]},diamond:function(e,n,t){return[["M",e-t,n],["L",e,n-t],["L",e+t,n],["L",e,n+t],["Z"]]},triangle:function(e,n,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",e-t,n+r],["L",e,n-r],["L",e+t,n+r],["Z"]]},"triangle-down":function(e,n,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",e-t,n-r],["L",e+t,n-r],["L",e,n+r],["Z"]]}},V4=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.initAttrs=function(t){this._resetParamsCache()},n.prototype._resetParamsCache=function(){this.set("paramsCache",{})},n.prototype.onAttrChange=function(t,r,i){e.prototype.onAttrChange.call(this,t,r,i),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},n.prototype.isOnlyHitBox=function(){return!0},n.prototype._getR=function(t){return ht(t.r)?t.radius:t.r},n.prototype._getPath=function(){var t,r,i=this.attr(),o=i.x,a=i.y,s=i.symbol||"circle",u=this._getR(i);if(gn(s))r=qS(r=(t=s)(o,a,u));else{if(!(t=n.Symbols[s]))return null;r=t(o,a,u)}return r},n.prototype.createPath=function(t){__(this,t,{path:this._getPath()},this.get("paramsCache"))},n.Symbols=W4,n}(Ci);function I_(e,n,t){var r=US();return e.createPath(r),r.isPointInPath(n,t)}function em(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function H4(e,n,t){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])&&Math.min(e[0],n[0])<=t[0]&&t[0]<=Math.max(e[0],n[0])&&Math.min(e[1],n[1])<=t[1]&&t[1]<=Math.max(e[1],n[1])}function T_(e,n,t){var r=!1,i=e.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=e[o],s=e[(o+1)%i];if(H4(a,s,[n,t]))return!0;em(a[1]-t)>0!=em(s[1]-t)>0&&em(n-(t-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function tl(e,n,t,r,i,o,a,s){var u=(Math.atan2(s-n,a-e)+2*Math.PI)%(2*Math.PI);if(u<r||u>i)return!1;var c={x:e+t*Math.cos(u),y:n+t*Math.sin(u)};return g_(c.x,c.y,a,s)<=o/2}var q4=br;const cf=P({hasArc:function(e){for(var n=!1,t=e.length,r=0;r<t;r++){var i=e[r][0];if(i==="C"||i==="A"||i==="Q"){n=!0;break}}return n},extractPolygons:function(e){for(var n=e.length,t=[],r=[],i=[],o=0;o<n;o++){var a=e[o],s=a[0];s==="M"?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):s==="Z"?i.length&&(t.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:t,polylines:r}},isPointInStroke:function(e,n,t,r,i){for(var o=!1,a=n/2,s=0;s<e.length;s++){var u=e[s],c=u.currentPoint,l=u.params,h=u.prePoint,d=u.box;if(!d||is(d.x-a,d.y-a,d.width+n,d.height+n,t,r)){switch(u.command){case"L":case"Z":o=va(h[0],h[1],c[0],c[1],n,t,r);break;case"Q":o=zS.pointDistance(h[0],h[1],l[1],l[2],l[3],l[4],t,r)<=n/2;break;case"C":o=Xc.pointDistance(h[0],h[1],l[1],l[2],l[3],l[4],l[5],l[6],t,r,i)<=n/2;break;case"A":var f=u.arcParams,p=f.cx,g=f.cy,v=f.rx,m=f.ry,y=f.startAngle,b=f.endAngle,x=f.xRotation,w=[t,r,1],E=v>m?v:m;iu(w,w,q4(null,[["t",-p,-g],["r",-x],["s",1/(v>m?1:v/m),1/(v>m?m/v:1)]])),o=tl(0,0,E,y,b,n,w[0],w[1])}if(o)break}}return o}},$L);function O_(e,n,t){for(var r=!1,i=0;i<e.length&&!(r=T_(e[i],n,t));i++);return r}var tm=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},n.prototype.onAttrChange=function(t,r,i){e.prototype.onAttrChange.call(this,t,r,i),t==="path"&&this._setPathArr(r),this.setArrow()},n.prototype._setPathArr=function(t){this.attrs.path=qS(t);var r=cf.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},n.prototype.getSegments=function(){var t=this.get("segements");return t||(t=$S(this.attr("path")),this.set("segments",t)),t},n.prototype.setArrow=function(){var t,r=this.attr(),i=r.startArrow,o=r.endArrow;i&&Zv(this,r,(t=this.getStartTangent())[0][0],t[0][1],t[1][0],t[1][1]),o&&Kv(this,r,(t=this.getEndTangent())[0][0],t[0][1],t[1][0],t[1][1])},n.prototype.isInStrokeOrPath=function(t,r,i,o,a){var s=this.getSegments(),u=this.get("hasArc"),c=!1;if(i){var l=this.getTotalLength();c=cf.isPointInStroke(s,a,t,r,l)}if(!c&&o)if(u)c=I_(this,t,r);else{var h=this.attr("path"),d=cf.extractPolygons(h);c=O_(d.polygons,t,r)||O_(d.polylines,t,r)}return c},n.prototype.createPath=function(t){__(this,t,this.attr(),this.get("paramsCache"))},n.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),i=this.get("endArrowShape");r&&r.draw(t),i&&i.draw(t)},n.prototype.getTotalLength=function(){var t=this.get("totalLength");return ht(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},n.prototype.getPoint=function(t){var r,i,o=this.get("tCache");o||(this._calculateCurve(),this._setTcache(),o=this.get("tCache"));var a=this.get("curve");if(!o||o.length===0)return a?{x:a[0][1],y:a[0][2]}:null;re(o,function(l,h){t>=l[0]&&t<=l[1]&&(r=(t-l[0])/(l[1]-l[0]),i=h)});var s=a[i];if(ht(s)||ht(i))return null;var u=s.length,c=a[i+1];return Xc.pointAt(s[u-2],s[u-1],c[1],c[2],c[3],c[4],c[5],c[6],r)},n.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",cf.pathToCurve(t))},n.prototype._setTcache=function(){var t,r,i,o,a=0,s=0,u=[],c=this.get("curve");c&&(re(c,function(l,h){i=c[h+1],o=l.length,i&&(a+=Xc.length(l[o-2],l[o-1],i[1],i[2],i[3],i[4],i[5],i[6])||0)}),this.set("totalLength",a),a!==0?(re(c,function(l,h){i=c[h+1],o=l.length,i&&((t=[])[0]=s/a,r=Xc.length(l[o-2],l[o-1],i[1],i[2],i[3],i[4],i[5],i[6]),s+=r||0,t[1]=s/a,u.push(t))}),this.set("tCache",u)):this.set("tCache",[]))},n.prototype.getStartTangent=function(){var t,r=this.getSegments();if(r.length>1){var i=r[0].currentPoint,o=r[1].currentPoint,a=r[1].startTangent;t=[],a?(t.push([i[0]-a[0],i[1]-a[1]]),t.push([i[0],i[1]])):(t.push([o[0],o[1]]),t.push([i[0],i[1]]))}return t},n.prototype.getEndTangent=function(){var t,r=this.getSegments(),i=r.length;if(i>1){var o=r[i-2].currentPoint,a=r[i-1].currentPoint,s=r[i-1].endTangent;t=[],s?(t.push([a[0]-s[0],a[1]-s[1]]),t.push([a[0],a[1]])):(t.push([o[0],o[1]]),t.push([a[0],a[1]]))}return t},n}(Ci);function N_(e,n,t,r,i){var o=e.length;if(o<2)return!1;for(var a=0;a<o-1;a++)if(va(e[a][0],e[a][1],e[a+1][0],e[a+1][1],n,t,r))return!0;if(i){var s=e[0],u=e[o-1];if(va(s[0],s[1],u[0],u[1],n,t,r))return!0}return!1}var Z4=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.isInStrokeOrPath=function(t,r,i,o,a){var s=this.attr().points,u=!1;return i&&(u=N_(s,a,t,r,!0)),!u&&o&&(u=T_(s,t,r)),u},n.prototype.createPath=function(t){var r=this.attr().points;if(!(r.length<2)){t.beginPath();for(var i=0;i<r.length;i++){var o=r[i];i===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},n}(Ci),K4=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this.setArrow()},n.prototype.onAttrChange=function(t,r,i){e.prototype.onAttrChange.call(this,t,r,i),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},n.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},n.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,i=r.points,o=r.startArrow,a=r.endArrow,s=i.length,u=i[0][0],c=i[0][1],l=i[s-1][0],h=i[s-1][1];o&&Zv(this,t,i[1][0],i[1][1],u,c),a&&Kv(this,t,i[s-2][0],i[s-2][1],l,h)},n.prototype.isFill=function(){return!1},n.prototype.isInStrokeOrPath=function(t,r,i,o,a){return!(!i||!a)&&N_(this.attr().points,a,t,r,!1)},n.prototype.isStroke=function(){return!0},n.prototype.createPath=function(t){var r=this.attr(),i=r.points,o=r.startArrow,a=r.endArrow,s=i.length;if(!(i.length<2)){var u,c=i[0][0],l=i[0][1],h=i[s-1][0],d=i[s-1][1];o&&o.d&&(c+=(u=os(c,l,i[1][0],i[1][1],o.d)).dx,l+=u.dy),a&&a.d&&(h-=(u=os(i[s-2][0],i[s-2][1],h,d,a.d)).dx,d-=u.dy),t.beginPath(),t.moveTo(c,l);for(var f=0;f<s-1;f++){var p=i[f];t.lineTo(p[0],p[1])}t.lineTo(h,d)}},n.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),i=this.get("endArrowShape");r&&r.draw(t),i&&i.draw(t)},n.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return ht(r)?(this.set("totalLength",YS(t)),this.get("totalLength")):r},n.prototype.getPoint=function(t){var r,i,o=this.attr().points,a=this.get("tCache");return a||(this._setTcache(),a=this.get("tCache")),re(a,function(s,u){t>=s[0]&&t<=s[1]&&(r=(t-s[0])/(s[1]-s[0]),i=u)}),wr.pointAt(o[i][0],o[i][1],o[i+1][0],o[i+1][1],r)},n.prototype._setTcache=function(){var t=this.attr().points;if(t&&t.length!==0){var r=this.getTotalLength();if(!(r<=0)){var i,o,a=0,s=[];re(t,function(u,c){t[c+1]&&((i=[])[0]=a/r,o=wr.length(u[0],u[1],t[c+1][0],t[c+1][1]),a+=o,i[1]=a/r,s.push(i))}),this.set("tCache",s)}}},n.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},n.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,i=[];return i.push([t[r-1][0],t[r-1][1]]),i.push([t[r][0],t[r][1]]),i},n}(Ci),$4=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,width:0,height:0,radius:0})},n.prototype.isInStrokeOrPath=function(t,r,i,o,a){var s=this.attr(),u=s.x,c=s.y,l=s.width,h=s.height,d=s.radius;if(d){var f=!1;return i&&(f=function(g,v,m,y,b,x,w,E){return va(g+b,v,g+m-b,v,x,w,E)||va(g+m,v+b,g+m,v+y-b,x,w,E)||va(g+m-b,v+y,g+b,v+y,x,w,E)||va(g,v+y-b,g,v+b,x,w,E)||tl(g+m-b,v+b,b,1.5*Math.PI,2*Math.PI,x,w,E)||tl(g+m-b,v+y-b,b,0,.5*Math.PI,x,w,E)||tl(g+b,v+y-b,b,.5*Math.PI,Math.PI,x,w,E)||tl(g+b,v+b,b,Math.PI,1.5*Math.PI,x,w,E)}(u,c,l,h,d,a,t,r)),!f&&o&&(f=I_(this,t,r)),f}var p=a/2;return o&&i?is(u-p,c-p,l+p,h+p,t,r):o?is(u,c,l,h,t,r):i?function(g,v,m,y,b,x,w){var E=b/2;return is(g-E,v-E,m,b,x,w)||is(g+m-E,v-E,b,y,x,w)||is(g+E,v+y-E,m,b,x,w)||is(g-E,v+E,b,y,x,w)}(u,c,l,h,a,t,r):void 0},n.prototype.createPath=function(t){var r=this.attr(),i=r.x,o=r.y,a=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(i,o,a,s);else{var c=function(p){var g=0,v=0,m=0,y=0;return at(p)?p.length===1?g=v=m=y=p[0]:p.length===2?(g=m=p[0],v=y=p[1]):p.length===3?(g=p[0],v=y=p[1],m=p[2]):(g=p[0],v=p[1],m=p[2],y=p[3]):g=v=m=y=p,[g,v,m,y]}(u),l=c[0],h=c[1],d=c[2],f=c[3];t.moveTo(i+l,o),t.lineTo(i+a-h,o),h!==0&&t.arc(i+a-h,o+h,h,-Math.PI/2,0),t.lineTo(i+a,o+s-d),d!==0&&t.arc(i+a-d,o+s-d,d,0,Math.PI/2),t.lineTo(i+f,o+s),f!==0&&t.arc(i+f,o+s-f,f,Math.PI/2,Math.PI),t.lineTo(i,o+l),l!==0&&t.arc(i+l,o+l,l,Math.PI,1.5*Math.PI),t.closePath()}},n}(Ci),Q4=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},n.prototype.isOnlyHitBox=function(){return!0},n.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},n.prototype._assembleFont=function(){var t=this.attrs;t.font=VS(t)},n.prototype._setText=function(t){var r=null;he(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},n.prototype.onAttrChange=function(t,r,i){e.prototype.onAttrChange.call(this,t,r,i),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},n.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,i=1*t.fontSize;return r?r-i:.14*i},n.prototype._drawTextArr=function(t,r,i){var o,a=this.attrs,s=a.textBaseline,u=a.x,c=a.y,l=1*a.fontSize,h=this._getSpaceingY(),d=WS(a.text,a.fontSize,a.lineHeight);re(r,function(f,p){o=c+p*(h+l)-d+l,s==="middle"&&(o+=d-l-(d-l)/2),s==="top"&&(o+=d-l),ht(f)||(i?t.fillText(f,u,o):t.strokeText(f,u,o))})},n.prototype._drawText=function(t,r){var i=this.attr(),o=i.x,a=i.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=i.text;ht(u)||(r?t.fillText(u,o,a):t.strokeText(u,o,a))}},n.prototype.strokeAndFill=function(t){var r=this.attrs,i=r.lineWidth,o=r.opacity,a=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&i>0&&(ht(a)||a===1||(t.globalAlpha=o),this.stroke(t)),this.isFill()&&(ht(s)||s===1?this.fill(t):(t.globalAlpha=s,this.fill(t),t.globalAlpha=o)),this.afterDrawPath(t)},n.prototype.fill=function(t){this._drawText(t,!0)},n.prototype.stroke=function(t){this._drawText(t,!1)},n}(Ci);function P_(e,n,t){var r=e.getTotalMatrix();if(r){var i=function(o,a){return a?Qa(YE(a),o):o}([n,t,1],r);return[i[0],i[1]]}return[n,t]}function D_(e,n,t){if(e.isCanvas&&e.isCanvas())return!0;if(!$0(e)||e.cfg.isInView===!1)return!1;if(e.cfg.clipShape){var r=P_(e,n,t),i=r[0],o=r[1];if(e.isClipped(i,o))return!1}var a=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return n>=a.minX&&n<=a.maxX&&t>=a.minY&&t<=a.maxY}function L_(e,n,t){if(!D_(e,n,t))return null;for(var r=null,i=e.getChildren(),o=i.length-1;o>=0;o--){var a=i[o];if(a.isGroup())r=L_(a,n,t);else if(D_(a,n,t)){var s=a,u=P_(a,n,t),c=u[0],l=u[1];s.isInShape(c,l)&&(r=a)}if(r)break}return r}var Do=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},n.prototype.onCanvasChange=function(t){t!=="attr"&&t!=="sort"&&t!=="changeSize"||(this.set("refreshElements",[this]),this.draw())},n.prototype.getShapeBase=function(){return rr},n.prototype.getGroupBase=function(){return C_},n.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},n.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},n.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},n.prototype.setDOMSize=function(t,r){e.prototype.setDOMSize.call(this,t,r);var i=this.get("context"),o=this.get("el"),a=this.getPixelRatio();o.width=a*t,o.height=a*r,a>1&&i.scale(a,a)},n.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},n.prototype.getShape=function(t,r){return this.get("quickHit")?L_(this,t,r):e.prototype.getShape.call(this,t,r,null)},n.prototype._getRefreshRegion=function(){var t,r=this.get("refreshElements"),i=this.getViewRange();return r.length&&r[0]===this?t=i:(t=function(o){if(!o.length)return null;var a=[],s=[],u=[],c=[];return re(o,function(l){var h=F4(l);h&&(a.push(h.minX),s.push(h.minY),u.push(h.maxX),c.push(h.maxY))}),{minX:Wi(a),minY:Wi(s),maxX:Ui(u),maxY:Ui(c)}}(r),t&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=function(o,a){return o&&a&&el(o,a)?{minX:Math.max(o.minX,a.minX),minY:Math.max(o.minY,a.minY),maxX:Math.min(o.maxX,a.maxX),maxY:Math.min(o.maxY,a.maxY)}:null}(t,i)))),t},n.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},n.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(aw(t),this.set("drawFrame",null),this.set("refreshElements",[]))},n.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},n.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),i=this.getChildren();t.clearRect(0,0,r.width,r.height),yu(t,this),$v(t,i),this.set("refreshElements",[])},n.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),i=this.getChildren(),o=this._getRefreshRegion();o?(t.clearRect(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY),t.save(),t.beginPath(),t.rect(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY),t.clip(),yu(t,this),j4(this,i,o),$v(t,i,o),t.restore()):r.length&&M_(r),re(r,function(a){a.get("hasChanged")&&a.set("hasChanged",!1)}),this.set("refreshElements",[])},n.prototype._startDraw=function(){var t=this,r=this.get("drawFrame"),i=this.get("drawFrameCallback");r||(r=ow(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null),i&&i()}),this.set("drawFrame",r))},n.prototype.skipDraw=function(){},n.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},n}(CS),nm={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},an={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function ui(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function B_(e){var n=nm[e.type],t=e.getParent();if(!n)throw new Error("the type "+e.type+" is not supported by svg");var r=ui(n);if(e.get("id")&&(r.id=e.get("id")),e.set("el",r),e.set("attrs",{}),t){var i=t.get("el");i||(i=t.createDom(),t.set("el",i)),i.appendChild(r)}return r}function R_(e,n){var t=e.get("el"),r=lw(t.children).sort(n),i=document.createDocumentFragment();r.forEach(function(o){i.appendChild(o)}),t.appendChild(i)}function nl(e){var n=e.attr().matrix;if(n){for(var t=e.cfg.el,r=[],i=0;i<9;i+=3)r.push(n[i]+","+n[i+1]);(r=r.join(",")).indexOf("NaN")===-1&&t.setAttribute("transform","matrix("+r+")")}}function rl(e,n){var t=e.getClip(),r=e.get("el");if(t){if(t&&!r.hasAttribute("clip-path")){B_(t),t.createPath(n);var i=n.addClip(t);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function j_(e,n){n.forEach(function(t){t.draw(e)})}function z_(e,n){var t=e.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),i=e.getParent(),o=i?i.getChildren():[t],a=e.get("el");if(n==="remove")if(e.get("isClipShape")){var s=a&&a.parentNode,u=s&&s.parentNode;s&&u&&u.removeChild(s)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if(n==="show")a.setAttribute("visibility","visible");else if(n==="hide")a.setAttribute("visibility","hidden");else if(n==="zIndex")(function(l,h){var d=l.parentNode,f=Array.from(d.childNodes).filter(function(m){return m.nodeType===1&&m.nodeName.toLowerCase()!=="defs"}),p=f[h],g=f.indexOf(l);if(p){if(g>h)d.insertBefore(l,p);else if(g<h){var v=f[h+1];v?d.insertBefore(l,v):d.appendChild(l)}}else d.appendChild(l)})(a,o.indexOf(e));else if(n==="sort"){var c=e.get("children");c&&c.length&&R_(e,function(l,h){return c.indexOf(l)-c.indexOf(h)?1:0})}else n==="clear"?a&&(a.innerHTML=""):n==="matrix"?nl(e):n==="clip"?rl(e,r):n==="attr"||n==="add"&&e.draw(r)}}var F_=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.isEntityGroup=function(){return!0},n.prototype.createDom=function(){var t=ui("g");this.set("el",t);var r=this.getParent();if(r){var i=r.get("el");i||(i=r.createDom(),r.set("el",i)),i.appendChild(t)}return t},n.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var i=r.get("context");this.createPath(i,t)}},n.prototype.onCanvasChange=function(t){z_(this,t)},n.prototype.getShapeBase=function(){return Zn},n.prototype.getGroupBase=function(){return n},n.prototype.draw=function(t){var r=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),rl(this,t),this.createPath(t),r.length&&j_(t,r))},n.prototype.createPath=function(t,r){var i=this.attr(),o=this.get("el");re(r||i,function(a,s){an[s]&&o.setAttribute(an[s],a)}),nl(this)},n}(AS),ci=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var i=r.get("context");this.draw(i,t)}},n.prototype.getShapeBase=function(){return Zn},n.prototype.getGroupBase=function(){return F_},n.prototype.onCanvasChange=function(t){z_(this,t)},n.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var i=OS(this.get("type"));i&&(r=i(this))}if(r){var o=r.x,a=r.y,s=r.width,u=r.height,c=this.getHitLineWidth(),l=c/2,h=o-l,d=a-l;return{x:h,y:d,minX:h,minY:d,maxX:o+s+l,maxY:a+u+l,width:s+c,height:u+c}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},n.prototype.isFill=function(){var t=this.attr(),r=t.fill,i=t.fillStyle;return(r||i||this.isClipShape())&&this.canFill},n.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,i=t.strokeStyle;return(r||i)&&this.canStroke},n.prototype.draw=function(t,r){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||B_(this),rl(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},n.prototype.createPath=function(t,r){},n.prototype.strokeAndFill=function(t,r){var i=r||this.attr(),o=i.fill,a=i.fillStyle,s=i.stroke,u=i.strokeStyle,c=i.fillOpacity,l=i.strokeOpacity,h=i.lineWidth,d=this.get("el");this.canFill&&(r?"fill"in i?this._setColor(t,"fill",o):"fillStyle"in i&&this._setColor(t,"fill",a):this._setColor(t,"fill",o||a),c&&d.setAttribute(an.fillOpacity,c)),this.canStroke&&h>0&&(r?"stroke"in i?this._setColor(t,"stroke",s):"strokeStyle"in i&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),l&&d.setAttribute(an.strokeOpacity,l),h&&d.setAttribute(an.lineWidth,h))},n.prototype._setColor=function(t,r,i){var o=this.get("el");if(i)if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i))(a=t.find("gradient",i))||(a=t.addGradient(i)),o.setAttribute(an[r],"url(#"+a+")");else if(/^[p,P]{1}[\s]*\(/.test(i)){var a;(a=t.find("pattern",i))||(a=t.addPattern(i)),o.setAttribute(an[r],"url(#"+a+")")}else o.setAttribute(an[r],i);else o.setAttribute(an[r],"none")},n.prototype.shadow=function(t,r){var i=this.attr(),o=r||i,a=o.shadowOffsetX,s=o.shadowOffsetY,u=o.shadowBlur,c=o.shadowColor;(a||s||u||c)&&function(l,h){var d=l.cfg.el,f=l.attr(),p={dx:f.shadowOffsetX,dy:f.shadowOffsetY,blur:f.shadowBlur,color:f.shadowColor};if(p.dx||p.dy||p.blur||p.color){var g=h.find("filter",p);g||(g=h.addShadow(p)),d.setAttribute("filter","url(#"+g+")")}else d.removeAttribute("filter")}(this,t)},n.prototype.transform=function(t){var r=this.attr();(t||r).matrix&&nl(this)},n.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},n.prototype.isPointInPath=function(t,r){var i=this.get("el"),o=this.get("canvas").get("el").getBoundingClientRect(),a=t+o.left,s=r+o.top,u=document.elementFromPoint(a,s);return!(!u||!u.isEqualNode(i))},n.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,i=t.lineAppendWidth;return this.isStroke()?r+i:0},n}(IS),J4=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,r:0})},n.prototype.createPath=function(t,r){var i=this.attr(),o=this.get("el");re(r||i,function(a,s){s==="x"||s==="y"?o.setAttribute("c"+s,a):an[s]&&o.setAttribute(an[s],a)})},n}(ci),e6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return At(n,e),n.prototype.createPath=function(t,r){var i=this.attr(),o=this.get("el");if(re(r||i,function(c,l){an[l]&&o.setAttribute(an[l],c)}),typeof i.html=="function"){var a=i.html.call(this,i);if(a instanceof Element||a instanceof HTMLDocument){for(var s=o.childNodes,u=s.length-1;u>=0;u--)o.removeChild(s[u]);o.appendChild(a)}else o.innerHTML=a}else o.innerHTML=i.html},n}(ci),t6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,rx:0,ry:0})},n.prototype.createPath=function(t,r){var i=this.attr(),o=this.get("el");re(r||i,function(a,s){s==="x"||s==="y"?o.setAttribute("c"+s,a):an[s]&&o.setAttribute(an[s],a)})},n}(ci),n6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,width:0,height:0})},n.prototype.createPath=function(t,r){var i=this,o=this.attr(),a=this.get("el");re(r||o,function(s,u){u==="img"?i._setImage(o.img):an[u]&&a.setAttribute(an[u],s)})},n.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},n.prototype._setImage=function(t){var r=this.attr(),i=this.get("el");if(he(t))i.setAttribute("href",t);else if(t instanceof window.Image)r.width||(i.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(i.setAttribute("height",t.height),this.attr("height",t.height)),i.setAttribute("href",t.src);else if(t instanceof HTMLElement&&he(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var o=document.createElement("canvas");o.setAttribute("width",""+t.width),o.setAttribute("height",""+t.height),o.getContext("2d").putImageData(t,0,0),r.width||(i.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(i.setAttribute("height",""+t.height),this.attr("height",t.height)),i.setAttribute("href",o.toDataURL())}},n}(ci),r6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},n.prototype.createPath=function(t,r){var i=this.attr(),o=this.get("el");re(r||i,function(a,s){if(s==="startArrow"||s==="endArrow")if(a){var u=Tn(a)?t.addArrow(i,an[s]):t.getDefaultArrow(i,an[s]);o.setAttribute(an[s],"url(#"+u+")")}else o.removeAttribute(an[s]);else an[s]&&o.setAttribute(an[s],a)})},n.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,i=t.y1,o=t.x2,a=t.y2;return wr.length(r,i,o,a)},n.prototype.getPoint=function(t){var r=this.attr(),i=r.x1,o=r.y1,a=r.x2,s=r.y2;return wr.pointAt(i,o,a,s,t)},n}(ci),lf={circle:function(e,n,t){return[["M",e,n],["m",-t,0],["a",t,t,0,1,0,2*t,0],["a",t,t,0,1,0,2*-t,0]]},square:function(e,n,t){return[["M",e-t,n-t],["L",e+t,n-t],["L",e+t,n+t],["L",e-t,n+t],["Z"]]},diamond:function(e,n,t){return[["M",e-t,n],["L",e,n-t],["L",e+t,n],["L",e,n+t],["Z"]]},triangle:function(e,n,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",e-t,n+r],["L",e,n-r],["L",e+t,n+r],["z"]]},triangleDown:function(e,n,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",e-t,n-r],["L",e+t,n-r],["L",e,n+r],["Z"]]}};const G_={get:function(e){return lf[e]},register:function(e,n){lf[e]=n},remove:function(e){delete lf[e]},getAll:function(){return lf}};var i6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return At(n,e),n.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},n.prototype._assembleMarker=function(){var t=this._getPath();return at(t)?t.map(function(r){return r.join(" ")}).join(""):t},n.prototype._getPath=function(){var t,r=this.attr(),i=r.x,o=r.y,a=r.r||r.radius,s=r.symbol||"circle";return(t=gn(s)?s:G_.get(s))?t(i,o,a):null},n.symbolsFactory=G_,n}(ci),o6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{startArrow:!1,endArrow:!1})},n.prototype.createPath=function(t,r){var i=this,o=this.attr(),a=this.get("el");re(r||o,function(s,u){if(u==="path"&&at(s))a.setAttribute("d",i._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var c=Tn(s)?t.addArrow(o,an[u]):t.getDefaultArrow(o,an[u]);a.setAttribute(an[u],"url(#"+c+")")}else a.removeAttribute(an[u]);else an[u]&&a.setAttribute(an[u],s)})},n.prototype._formatPath=function(t){var r=t.map(function(i){return i.join(" ")}).join("");return~r.indexOf("NaN")?"":r},n.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},n.prototype.getPoint=function(t){var r=this.get("el"),i=this.getTotalLength();if(i===0)return null;var o=r?r.getPointAtLength(t*i):null;return o?{x:o.x,y:o.y}:null},n}(ci),a6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return At(n,e),n.prototype.createPath=function(t,r){var i=this.attr(),o=this.get("el");re(r||i,function(a,s){s==="points"&&at(a)&&a.length>=2?o.setAttribute("points",a.map(function(u){return u[0]+","+u[1]}).join(" ")):an[s]&&o.setAttribute(an[s],a)})},n}(ci),s6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{startArrow:!1,endArrow:!1})},n.prototype.onAttrChange=function(t,r,i){e.prototype.onAttrChange.call(this,t,r,i),["points"].indexOf(t)!==-1&&this._resetCache()},n.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},n.prototype.createPath=function(t,r){var i=this.attr(),o=this.get("el");re(r||i,function(a,s){s==="points"&&at(a)&&a.length>=2?o.setAttribute("points",a.map(function(u){return u[0]+","+u[1]}).join(" ")):an[s]&&o.setAttribute(an[s],a)})},n.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return ht(r)?(this.set("totalLength",YS(t)),this.get("totalLength")):r},n.prototype.getPoint=function(t){var r,i,o=this.attr().points,a=this.get("tCache");return a||(this._setTcache(),a=this.get("tCache")),re(a,function(s,u){t>=s[0]&&t<=s[1]&&(r=(t-s[0])/(s[1]-s[0]),i=u)}),wr.pointAt(o[i][0],o[i][1],o[i+1][0],o[i+1][1],r)},n.prototype._setTcache=function(){var t=this.attr().points;if(t&&t.length!==0){var r=this.getTotalLength();if(!(r<=0)){var i,o,a=0,s=[];re(t,function(u,c){t[c+1]&&((i=[])[0]=a/r,o=wr.length(u[0],u[1],t[c+1][0],t[c+1][1]),a+=o,i[1]=a/r,s.push(i))}),this.set("tCache",s)}}},n.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},n.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,i=[];return i.push([t[r-1][0],t[r-1][1]]),i.push([t[r][0],t[r][1]]),i},n}(ci),u6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,width:0,height:0,radius:0})},n.prototype.createPath=function(t,r){var i=this,o=this.attr(),a=this.get("el"),s=!1,u=["x","y","width","height","radius"];re(r||o,function(c,l){u.indexOf(l)===-1||s?u.indexOf(l)===-1&&an[l]&&a.setAttribute(an[l],c):(a.setAttribute("d",i._assembleRect(o)),s=!0)})},n.prototype._assembleRect=function(t){var r=t.x,i=t.y,o=t.width,a=t.height,s=t.radius;if(!s)return"M "+r+","+i+" l "+o+",0 l 0,"+a+" l"+-o+" 0 z";var u=function(c){var l=0,h=0,d=0,f=0;return at(c)?c.length===1?l=h=d=f=c[0]:c.length===2?(l=d=c[0],h=f=c[1]):c.length===3?(l=c[0],h=f=c[1],d=c[2]):(l=c[0],h=c[1],d=c[2],f=c[3]):l=h=d=f=c,{r1:l,r2:h,r3:d,r4:f}}(s);return at(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s,[["M "+(r+u.r1)+","+i],["l "+(o-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(a-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-o)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-a)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]].join(" ")},n}(ci),c6={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},l6={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},h6={left:"left",start:"left",center:"middle",right:"end",end:"end"},d6=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return At(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},n.prototype.createPath=function(t,r){var i=this,o=this.attr(),a=this.get("el");this._setFont(),re(r||o,function(s,u){u==="text"?i._setText(""+s):u==="matrix"&&s?nl(i):an[u]&&a.setAttribute(an[u],s)}),a.setAttribute("paint-order","stroke"),a.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},n.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),i=r.textBaseline,o=r.textAlign,a=FE();a&&a.name==="firefox"?t.setAttribute("dominant-baseline",l6[i]||"alphabetic"):t.setAttribute("alignment-baseline",c6[i]||"baseline"),t.setAttribute("text-anchor",h6[o]||"left")},n.prototype._setText=function(t){var r=this.get("el"),i=this.attr(),o=i.x,a=i.textBaseline,s=a===void 0?"bottom":a;if(t)if(~t.indexOf(`
`)){var u=t.split(`
`),c=u.length-1,l="";re(u,function(h,d){d===0?s==="alphabetic"?l+='<tspan x="'+o+'" dy="'+-c+'em">'+h+"</tspan>":s==="top"?l+='<tspan x="'+o+'" dy="0.9em">'+h+"</tspan>":s==="middle"?l+='<tspan x="'+o+'" dy="'+-(c-1)/2+'em">'+h+"</tspan>":s==="bottom"?l+='<tspan x="'+o+'" dy="-'+(c+.3)+'em">'+h+"</tspan>":s==="hanging"&&(l+='<tspan x="'+o+'" dy="'+(-(c-1)-.3)+'em">'+h+"</tspan>"):l+='<tspan x="'+o+'" dy="1em">'+h+"</tspan>"}),r.innerHTML=l}else r.innerHTML=t;else r.innerHTML=""},n}(ci),f6=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,p6=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,g6=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Y_(e){var n=e.match(g6);if(!n)return"";var t="";return n.sort(function(r,i){return r=r.split(":"),i=i.split(":"),Number(r[0])-Number(i[0])}),re(n,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}var il,rm,X_,im,v6=function(){function e(n){this.cfg={};var t=null,r=qi("gradient_");return n.toLowerCase()[0]==="l"?function(i,o){var a,s,u=f6.exec(i),c=Xh(Uh(parseFloat(u[1])),2*Math.PI),l=u[2];c>=0&&c<.5*Math.PI?(a={x:0,y:0},s={x:1,y:1}):.5*Math.PI<=c&&c<Math.PI?(a={x:1,y:0},s={x:0,y:1}):Math.PI<=c&&c<1.5*Math.PI?(a={x:1,y:1},s={x:0,y:0}):(a={x:0,y:1},s={x:1,y:0});var h=Math.tan(c),d=h*h,f=(s.x-a.x+h*(s.y-a.y))/(d+1)+a.x,p=h*(s.x-a.x+h*(s.y-a.y))/(d+1)+a.y;o.setAttribute("x1",a.x),o.setAttribute("y1",a.y),o.setAttribute("x2",f),o.setAttribute("y2",p),o.innerHTML=Y_(l)}(n,t=ui("linearGradient")):function(i,o){var a=p6.exec(i),s=parseFloat(a[1]),u=parseFloat(a[2]),c=parseFloat(a[3]),l=a[4];o.setAttribute("cx",s),o.setAttribute("cy",u),o.setAttribute("r",c),o.innerHTML=Y_(l)}(n,t=ui("radialGradient")),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=n,this}return e.prototype.match=function(n,t){return this.cfg===t},e}(),m6={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},y6={x:"-40%",y:"-40%",width:"200%",height:"200%"},b6=function(){function e(n){this.type="filter",this.cfg={},this.type="filter";var t=ui("filter");return re(y6,function(r,i){t.setAttribute(i,r)}),this.el=t,this.id=qi("filter_"),this.el.id=this.id,this.cfg=n,this._parseShadow(n,t),this}return e.prototype.match=function(n,t){if(this.type!==n)return!1;var r=!0,i=this.cfg;return re(Object.keys(i),function(o){if(i[o]!==t[o])return r=!1,!1}),r},e.prototype.update=function(n,t){var r=this.cfg;return r[m6[n]]=t,this._parseShadow(r,this.el),this},e.prototype._parseShadow=function(n,t){var r=`<feDropShadow
      dx="`+(n.dx||0)+`"
      dy="`+(n.dy||0)+`"
      stdDeviation="`+(n.blur?n.blur/10:0)+`"
      flood-color="`+(n.color?n.color:"#000")+`"
      flood-opacity="`+(n.opacity?n.opacity:1)+`"
      />`;t.innerHTML=r},e}(),U_=function(){function e(n,t){this.cfg={};var r=ui("marker"),i=qi("marker_");r.setAttribute("id",i);var o=ui("path");o.setAttribute("stroke",n.stroke||"none"),o.setAttribute("fill",n.fill||"none"),r.appendChild(o),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=o,this.id=i;var a=n[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=n.stroke||"#000",a===!0?this._setDefaultPath(t,o):(this.cfg=a,this._setMarker(n.lineWidth,o)),this}return e.prototype.match=function(){return!1},e.prototype._setDefaultPath=function(n,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},e.prototype._setMarker=function(n,t){var r=this.el,i=this.cfg.path,o=this.cfg.d;at(i)&&(i=i.map(function(a){return a.join(" ")}).join("")),t.setAttribute("d",i),r.appendChild(t),o&&r.setAttribute("refX",""+o/n)},e.prototype.update=function(n){var t=this.child;t.attr?t.attr("fill",n):t.setAttribute("fill",n)},e}(),x6=function(){function e(n){this.type="clip",this.cfg={};var t=ui("clipPath");this.el=t,this.id=qi("clip_"),t.id=this.id;var r=n.cfg.el;return t.appendChild(r),this.cfg=n,this}return e.prototype.match=function(){return!1},e.prototype.remove=function(){var n=this.el;n.parentNode.removeChild(n)},e}(),w6=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,E6=function(){function e(n){this.cfg={};var t=ui("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=ui("image");t.appendChild(r);var i=qi("pattern_");t.id=i,this.el=t,this.id=i,this.cfg=n;var o=w6.exec(n)[2];r.setAttribute("href",o);var a=new Image;function s(){t.setAttribute("width",""+a.width),t.setAttribute("height",""+a.height)}return o.match(/^data:/i)||(a.crossOrigin="Anonymous"),a.src=o,a.complete?s():(a.onload=s,a.src=a.src),this}return e.prototype.match=function(n,t){return this.cfg===t},e}(),S6=function(){function e(n){var t=ui("defs"),r=qi("defs_");t.id=r,n.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=n}return e.prototype.find=function(n,t){for(var r=this.children,i=null,o=0;o<r.length;o++)if(r[o].match(n,t)){i=r[o].id;break}return i},e.prototype.findById=function(n){for(var t=this.children,r=null,i=0;i<t.length;i++)if(t[i].id===n){r=t[i];break}return r},e.prototype.add=function(n){this.children.push(n),n.canvas=this.canvas,n.parent=this},e.prototype.getDefaultArrow=function(n,t){var r=n.stroke||n.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var i=new U_(n,t);return this.defaultArrow[r]=i,this.el.appendChild(i.el),this.add(i),i.id},e.prototype.addGradient=function(n){var t=new v6(n);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addArrow=function(n,t){var r=new U_(n,t);return this.el.appendChild(r.el),this.add(r),r.id},e.prototype.addShadow=function(n){var t=new b6(n);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addPattern=function(n){var t=new E6(n);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addClip=function(n){var t=new x6(n);return this.el.appendChild(t.el),this.add(t),t.id},e}(),ol=function(e){function n(t){return e.call(this,P(P({},t),{autoDraw:!0,renderer:"svg"}))||this}return At(n,e),n.prototype.getShapeBase=function(){return Zn},n.prototype.getGroupBase=function(){return F_},n.prototype.getShape=function(t,r,i){var o=i.target||i.srcElement;if(!nm[o.tagName]){for(var a=o.parentNode;a&&!nm[a.tagName];)a=a.parentNode;o=a}return this.find(function(s){return s.get("el")===o})},n.prototype.createDom=function(){var t=ui("svg"),r=new S6(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},n.prototype.onCanvasChange=function(t){var r=this.get("context"),i=this.get("el");if(t==="sort"){var o=this.get("children");o&&o.length&&R_(this,function(s,u){return o.indexOf(s)-o.indexOf(u)?1:0})}else if(t==="clear"){if(i){i.innerHTML="";var a=r.el;a.innerHTML="",i.appendChild(a)}}else t==="matrix"?nl(this):t==="clip"?rl(this,r):t==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},n.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();rl(this,t),r.length&&j_(t,r)},n}(CS);function hf(e,n,t){if(e){if(typeof e.addEventListener=="function")return e.addEventListener(n,t,!1),{remove:function(){e.removeEventListener(n,t,!1)}};if(typeof e.attachEvent=="function")return e.attachEvent("on"+n,t),{remove:function(){e.detachEvent("on"+n,t)}}}}function xn(e){il||(il=document.createElement("table"),rm=document.createElement("tr"),X_=/^\s*<(\w+|!)[^>]*>/,im={tr:document.createElement("tbody"),tbody:il,thead:il,tfoot:il,td:rm,th:rm,"*":document.createElement("div")});var n=X_.test(e)&&RegExp.$1;n&&n in im||(n="*");var t=im[n];e=typeof e=="string"?e.replace(/(^\s*)|(\s*$)/g,""):e,t.innerHTML=""+e;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}function Ht(e,n){if(e)for(var t in n)n.hasOwnProperty(t)&&(e.style[t]=n[t]);return e}var W_={exports:{}},V_={exports:{}},M6=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))},_6=Array.prototype.concat,k6=Array.prototype.slice,H_=V_.exports=function(e){for(var n=[],t=0,r=e.length;t<r;t++){var i=e[t];M6(i)?n=_6.call(n,k6.call(i)):n.push(i)}return n};H_.wrap=function(e){return function(){return e(H_(arguments))}};var C6=V_.exports,al={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},sl=C6,q_=Object.hasOwnProperty,Z_=Object.create(null);for(var om in al)q_.call(al,om)&&(Z_[al[om]]=om);var Kr=W_.exports={to:{},get:{}};function ma(e,n,t){return Math.min(Math.max(n,e),t)}function df(e){var n=Math.round(e).toString(16).toUpperCase();return n.length<2?"0"+n:n}Kr.get=function(e){var n,t;switch(e.substring(0,3).toLowerCase()){case"hsl":n=Kr.get.hsl(e),t="hsl";break;case"hwb":n=Kr.get.hwb(e),t="hwb";break;default:n=Kr.get.rgb(e),t="rgb"}return n?{model:t,value:n}:null},Kr.get.rgb=function(e){if(!e)return null;var n,t,r,i=[0,0,0,1];if(n=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=n[2],n=n[1],t=0;t<3;t++){var o=2*t;i[t]=parseInt(n.slice(o,o+2),16)}r&&(i[3]=parseInt(r,16)/255)}else if(n=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(n=n[1])[3],t=0;t<3;t++)i[t]=parseInt(n[t]+n[t],16);r&&(i[3]=parseInt(r+r,16)/255)}else if(n=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(t=0;t<3;t++)i[t]=parseInt(n[t+1],0);n[4]&&(n[5]?i[3]=.01*parseFloat(n[4]):i[3]=parseFloat(n[4]))}else{if(!(n=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(n=e.match(/^(\w+)$/))?n[1]==="transparent"?[0,0,0,0]:q_.call(al,n[1])?((i=al[n[1]])[3]=1,i):null:null;for(t=0;t<3;t++)i[t]=Math.round(2.55*parseFloat(n[t+1]));n[4]&&(n[5]?i[3]=.01*parseFloat(n[4]):i[3]=parseFloat(n[4]))}for(t=0;t<3;t++)i[t]=ma(i[t],0,255);return i[3]=ma(i[3],0,1),i},Kr.get.hsl=function(e){if(!e)return null;var n=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(n){var t=parseFloat(n[4]);return[(parseFloat(n[1])%360+360)%360,ma(parseFloat(n[2]),0,100),ma(parseFloat(n[3]),0,100),ma(isNaN(t)?1:t,0,1)]}return null},Kr.get.hwb=function(e){if(!e)return null;var n=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(n){var t=parseFloat(n[4]);return[(parseFloat(n[1])%360+360)%360,ma(parseFloat(n[2]),0,100),ma(parseFloat(n[3]),0,100),ma(isNaN(t)?1:t,0,1)]}return null},Kr.to.hex=function(){var e=sl(arguments);return"#"+df(e[0])+df(e[1])+df(e[2])+(e[3]<1?df(Math.round(255*e[3])):"")},Kr.to.rgb=function(){var e=sl(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},Kr.to.rgb.percent=function(){var e=sl(arguments),n=Math.round(e[0]/255*100),t=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+n+"%, "+t+"%, "+r+"%)":"rgba("+n+"%, "+t+"%, "+r+"%, "+e[3]+")"},Kr.to.hsl=function(){var e=sl(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},Kr.to.hwb=function(){var e=sl(arguments),n="";return e.length>=4&&e[3]!==1&&(n=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+n+")"},Kr.to.keyword=function(e){return Z_[e.slice(0,3)]};var A6=W_.exports,K_={exports:{}},as={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},$_={};for(var am in as)as.hasOwnProperty(am)&&($_[as[am]]=am);var It=K_.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var zr in It)if(It.hasOwnProperty(zr)){if(!("channels"in It[zr]))throw new Error("missing channels property: "+zr);if(!("labels"in It[zr]))throw new Error("missing channel labels property: "+zr);if(It[zr].labels.length!==It[zr].channels)throw new Error("channel and label counts mismatch: "+zr);var I6=It[zr].channels,T6=It[zr].labels;delete It[zr].channels,delete It[zr].labels,Object.defineProperty(It[zr],"channels",{value:I6}),Object.defineProperty(It[zr],"labels",{value:T6})}function O6(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)+Math.pow(e[2]-n[2],2)}It.rgb.hsl=function(e){var n,t,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a;return s===a?n=0:r===s?n=(i-o)/u:i===s?n=2+(o-r)/u:o===s&&(n=4+(r-i)/u),(n=Math.min(60*n,360))<0&&(n+=360),t=(a+s)/2,[n,100*(s===a?0:t<=.5?u/(s+a):u/(2-s-a)),100*t]},It.rgb.hsv=function(e){var n,t,r,i,o,a=e[0]/255,s=e[1]/255,u=e[2]/255,c=Math.max(a,s,u),l=c-Math.min(a,s,u),h=function(d){return(c-d)/6/l+.5};return l===0?i=o=0:(o=l/c,n=h(a),t=h(s),r=h(u),a===c?i=r-t:s===c?i=1/3+n-r:u===c&&(i=2/3+t-n),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},It.rgb.hwb=function(e){var n=e[0],t=e[1],r=e[2];return[It.rgb.hsl(e)[0],100*(1/255*Math.min(n,Math.min(t,r))),100*(r=1-1/255*Math.max(n,Math.max(t,r)))]},It.rgb.cmyk=function(e){var n,t=e[0]/255,r=e[1]/255,i=e[2]/255;return[100*((1-t-(n=Math.min(1-t,1-r,1-i)))/(1-n)||0),100*((1-r-n)/(1-n)||0),100*((1-i-n)/(1-n)||0),100*n]},It.rgb.keyword=function(e){var n=$_[e];if(n)return n;var t,r=1/0;for(var i in as)if(as.hasOwnProperty(i)){var o=O6(e,as[i]);o<r&&(r=o,t=i)}return t},It.keyword.rgb=function(e){return as[e]},It.rgb.xyz=function(e){var n=e[0]/255,t=e[1]/255,r=e[2]/255;return[100*(.4124*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.3576*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*n+.7152*t+.0722*r),100*(.0193*n+.1192*t+.9505*r)]},It.rgb.lab=function(e){var n=It.rgb.xyz(e),t=n[0],r=n[1],i=n[2];return r/=100,i/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},It.hsl.rgb=function(e){var n,t,r,i,o,a=e[0]/360,s=e[1]/100,u=e[2]/100;if(s===0)return[o=255*u,o,o];n=2*u-(t=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var c=0;c<3;c++)(r=a+1/3*-(c-1))<0&&r++,r>1&&r--,o=6*r<1?n+6*(t-n)*r:2*r<1?t:3*r<2?n+(t-n)*(2/3-r)*6:n,i[c]=255*o;return i},It.hsl.hsv=function(e){var n=e[0],t=e[1]/100,r=e[2]/100,i=t,o=Math.max(r,.01);return t*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[n,100*(r===0?2*i/(o+i):2*t/(r+t)),100*((r+t)/2)]},It.hsv.rgb=function(e){var n=e[0]/60,t=e[1]/100,r=e[2]/100,i=Math.floor(n)%6,o=n-Math.floor(n),a=255*r*(1-t),s=255*r*(1-t*o),u=255*r*(1-t*(1-o));switch(r*=255,i){case 0:return[r,u,a];case 1:return[s,r,a];case 2:return[a,r,u];case 3:return[a,s,r];case 4:return[u,a,r];case 5:return[r,a,s]}},It.hsv.hsl=function(e){var n,t,r,i=e[0],o=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return r=(2-o)*a,t=o*s,[i,100*(t=(t/=(n=(2-o)*s)<=1?n:2-n)||0),100*(r/=2)]},It.hwb.rgb=function(e){var n,t,r,i,o,a,s,u=e[0]/360,c=e[1]/100,l=e[2]/100,h=c+l;switch(h>1&&(c/=h,l/=h),r=6*u-(n=Math.floor(6*u)),1&n&&(r=1-r),i=c+r*((t=1-l)-c),n){default:case 6:case 0:o=t,a=i,s=c;break;case 1:o=i,a=t,s=c;break;case 2:o=c,a=t,s=i;break;case 3:o=c,a=i,s=t;break;case 4:o=i,a=c,s=t;break;case 5:o=t,a=c,s=i}return[255*o,255*a,255*s]},It.cmyk.rgb=function(e){var n=e[0]/100,t=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},It.xyz.rgb=function(e){var n,t,r,i=e[0]/100,o=e[1]/100,a=e[2]/100;return t=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,n=(n=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(n=Math.min(Math.max(0,n),1)),255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1))]},It.xyz.lab=function(e){var n=e[0],t=e[1],r=e[2];return t/=100,r/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(t=t>.008856?Math.pow(t,1/3):7.787*t+16/116)-16,500*(n-t),200*(t-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},It.lab.xyz=function(e){var n,t,r,i=e[0];n=e[1]/500+(t=(i+16)/116),r=t-e[2]/200;var o=Math.pow(t,3),a=Math.pow(n,3),s=Math.pow(r,3);return t=o>.008856?o:(t-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[n*=95.047,t*=100,r*=108.883]},It.lab.lch=function(e){var n,t=e[0],r=e[1],i=e[2];return(n=360*Math.atan2(i,r)/2/Math.PI)<0&&(n+=360),[t,Math.sqrt(r*r+i*i),n]},It.lch.lab=function(e){var n,t=e[0],r=e[1];return n=e[2]/360*2*Math.PI,[t,r*Math.cos(n),r*Math.sin(n)]},It.rgb.ansi16=function(e){var n=e[0],t=e[1],r=e[2],i=1 in arguments?arguments[1]:It.rgb.hsv(e)[2];if((i=Math.round(i/50))===0)return 30;var o=30+(Math.round(r/255)<<2|Math.round(t/255)<<1|Math.round(n/255));return i===2&&(o+=60),o},It.hsv.ansi16=function(e){return It.rgb.ansi16(It.hsv.rgb(e),e[2])},It.rgb.ansi256=function(e){var n=e[0],t=e[1],r=e[2];return n===t&&t===r?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)},It.ansi16.rgb=function(e){var n=e%10;if(n===0||n===7)return e>50&&(n+=3.5),[n=n/10.5*255,n,n];var t=.5*(1+~~(e>50));return[(1&n)*t*255,(n>>1&1)*t*255,(n>>2&1)*t*255]},It.ansi256.rgb=function(e){if(e>=232){var n=10*(e-232)+8;return[n,n,n]}var t;return e-=16,[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},It.rgb.hex=function(e){var n=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(n.length)+n},It.hex.rgb=function(e){var n=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];var t=n[0];n[0].length===3&&(t=t.split("").map(function(i){return i+i}).join(""));var r=parseInt(t,16);return[r>>16&255,r>>8&255,255&r]},It.rgb.hcg=function(e){var n,t=e[0]/255,r=e[1]/255,i=e[2]/255,o=Math.max(Math.max(t,r),i),a=Math.min(Math.min(t,r),i),s=o-a;return n=s<=0?0:o===t?(r-i)/s%6:o===r?2+(i-t)/s:4+(t-r)/s+4,n/=6,[360*(n%=1),100*s,100*(s<1?a/(1-s):0)]},It.hsl.hcg=function(e){var n=e[1]/100,t=e[2]/100,r=1,i=0;return(r=t<.5?2*n*t:2*n*(1-t))<1&&(i=(t-.5*r)/(1-r)),[e[0],100*r,100*i]},It.hsv.hcg=function(e){var n=e[1]/100,t=e[2]/100,r=n*t,i=0;return r<1&&(i=(t-r)/(1-r)),[e[0],100*r,100*i]},It.hcg.rgb=function(e){var n=e[0]/360,t=e[1]/100,r=e[2]/100;if(t===0)return[255*r,255*r,255*r];var i,o=[0,0,0],a=n%1*6,s=a%1,u=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=u,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=u,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=u}return i=(1-t)*r,[255*(t*o[0]+i),255*(t*o[1]+i),255*(t*o[2]+i)]},It.hcg.hsv=function(e){var n=e[1]/100,t=n+e[2]/100*(1-n),r=0;return t>0&&(r=n/t),[e[0],100*r,100*t]},It.hcg.hsl=function(e){var n=e[1]/100,t=e[2]/100*(1-n)+.5*n,r=0;return t>0&&t<.5?r=n/(2*t):t>=.5&&t<1&&(r=n/(2*(1-t))),[e[0],100*r,100*t]},It.hcg.hwb=function(e){var n=e[1]/100,t=n+e[2]/100*(1-n);return[e[0],100*(t-n),100*(1-t)]},It.hwb.hcg=function(e){var n=e[1]/100,t=1-e[2]/100,r=t-n,i=0;return r<1&&(i=(t-r)/(1-r)),[e[0],100*r,100*i]},It.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},It.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},It.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},It.gray.hsl=It.gray.hsv=function(e){return[0,0,e[0]]},It.gray.hwb=function(e){return[0,100,e[0]]},It.gray.cmyk=function(e){return[0,0,0,e[0]]},It.gray.lab=function(e){return[e[0],0,0]},It.gray.hex=function(e){var n=255&Math.round(e[0]/100*255),t=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(t.length)+t},It.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};var Q_=K_.exports,ff=Q_;function N6(e){var n=function(){for(var c={},l=Object.keys(ff),h=l.length,d=0;d<h;d++)c[l[d]]={distance:-1,parent:null};return c}(),t=[e];for(n[e].distance=0;t.length;)for(var r=t.pop(),i=Object.keys(ff[r]),o=i.length,a=0;a<o;a++){var s=i[a],u=n[s];u.distance===-1&&(u.distance=n[r].distance+1,u.parent=r,t.unshift(s))}return n}function P6(e,n){return function(t){return n(e(t))}}function D6(e,n){for(var t=[n[e].parent,e],r=ff[n[e].parent][e],i=n[e].parent;n[i].parent;)t.unshift(n[i].parent),r=P6(ff[n[i].parent][i],r),i=n[i].parent;return r.conversion=t,r}var sm=Q_,L6=function(e){for(var n=N6(e),t={},r=Object.keys(n),i=r.length,o=0;o<i;o++){var a=r[o];n[a].parent!==null&&(t[a]=D6(a,n))}return t},bu={};Object.keys(sm).forEach(function(e){bu[e]={},Object.defineProperty(bu[e],"channels",{value:sm[e].channels}),Object.defineProperty(bu[e],"labels",{value:sm[e].labels});var n=L6(e);Object.keys(n).forEach(function(t){var r=n[t];bu[e][t]=function(i){var o=function(a){if(a==null)return a;arguments.length>1&&(a=Array.prototype.slice.call(arguments));var s=i(a);if(typeof s=="object")for(var u=s.length,c=0;c<u;c++)s[c]=Math.round(s[c]);return s};return"conversion"in i&&(o.conversion=i.conversion),o}(r),bu[e][t].raw=function(i){var o=function(a){return a==null?a:(arguments.length>1&&(a=Array.prototype.slice.call(arguments)),i(a))};return"conversion"in i&&(o.conversion=i.conversion),o}(r)})});var ul=A6,$r=bu,um=[].slice,J_=["keyword","gray","hex"],cm={};Object.keys($r).forEach(function(e){cm[um.call($r[e].labels).sort().join("")]=e});var pf={};function pr(e,n){if(!(this instanceof pr))return new pr(e,n);if(n&&n in J_&&(n=null),n&&!(n in $r))throw new Error("Unknown model: "+n);var t,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof pr)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(typeof e=="string"){var i=ul.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,r=$r[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(e.length){this.model=n||"rgb",r=$r[this.model].channels;var o=um.call(e,0,r);this.color=lm(o,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var a=Object.keys(e);"alpha"in e&&(a.splice(a.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);var s=a.sort().join("");if(!(s in cm))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=cm[s];var u=$r[this.model].labels,c=[];for(t=0;t<u.length;t++)c.push(e[u[t]]);this.color=lm(c)}if(pf[this.model])for(r=$r[this.model].channels,t=0;t<r;t++){var l=pf[this.model][t];l&&(this.color[t]=l(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function On(e,n,t){return(e=Array.isArray(e)?e:[e]).forEach(function(r){(pf[r]||(pf[r]=[]))[n]=t}),e=e[0],function(r){var i;return arguments.length?(t&&(r=t(r)),(i=this[e]()).color[n]=r,i):(i=this[e]().color[n],t&&(i=t(i)),i)}}function Qn(e){return function(n){return Math.max(0,Math.min(e,n))}}function lm(e,n){for(var t=0;t<n;t++)typeof e[t]!="number"&&(e[t]=0);return e}pr.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var n=this.model in ul.to?this:this.rgb(),t=(n=n.round(typeof e=="number"?e:1)).valpha===1?n.color:n.color.concat(this.valpha);return ul.to[n.model](t)},percentString:function(e){var n=this.rgb().round(typeof e=="number"?e:1),t=n.valpha===1?n.color:n.color.concat(this.valpha);return ul.to.rgb.percent(t)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},n=$r[this.model].channels,t=$r[this.model].labels,r=0;r<n;r++)e[t[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new pr(this.color.map(function(n){return function(t){return function(r,i){return Number(r.toFixed(i))}(t,n)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new pr(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:On("rgb",0,Qn(255)),green:On("rgb",1,Qn(255)),blue:On("rgb",2,Qn(255)),hue:On(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:On("hsl",1,Qn(100)),lightness:On("hsl",2,Qn(100)),saturationv:On("hsv",1,Qn(100)),value:On("hsv",2,Qn(100)),chroma:On("hcg",1,Qn(100)),gray:On("hcg",2,Qn(100)),white:On("hwb",1,Qn(100)),wblack:On("hwb",2,Qn(100)),cyan:On("cmyk",0,Qn(100)),magenta:On("cmyk",1,Qn(100)),yellow:On("cmyk",2,Qn(100)),black:On("cmyk",3,Qn(100)),x:On("xyz",0,Qn(100)),y:On("xyz",1,Qn(100)),z:On("xyz",2,Qn(100)),l:On("lab",0,Qn(100)),a:On("lab",1),b:On("lab",2),keyword:function(e){return arguments.length?new pr(e):$r[this.model].keyword(this.color)},hex:function(e){return arguments.length?new pr(e):ul.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,n=[],t=0;t<e.length;t++){var r=e[t]/255;n[t]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return .2126*n[0]+.7152*n[1]+.0722*n[2]},contrast:function(e){var n=this.luminosity(),t=e.luminosity();return n>t?(n+.05)/(t+.05):(t+.05)/(n+.05)},level:function(e){var n=this.contrast(e);return n>=7.1?"AAA":n>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),n=0;n<3;n++)e.color[n]=255-e.color[n];return e},lighten:function(e){var n=this.hsl();return n.color[2]+=n.color[2]*e,n},darken:function(e){var n=this.hsl();return n.color[2]-=n.color[2]*e,n},saturate:function(e){var n=this.hsl();return n.color[1]+=n.color[1]*e,n},desaturate:function(e){var n=this.hsl();return n.color[1]-=n.color[1]*e,n},whiten:function(e){var n=this.hwb();return n.color[1]+=n.color[1]*e,n},blacken:function(e){var n=this.hwb();return n.color[2]+=n.color[2]*e,n},grayscale:function(){var e=this.rgb().color,n=.3*e[0]+.59*e[1]+.11*e[2];return pr.rgb(n,n,n)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var n=this.hsl(),t=n.color[0];return t=(t=(t+e)%360)<0?360+t:t,n.color[0]=t,n},mix:function(e,n){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var t=e.rgb(),r=this.rgb(),i=n===void 0?.5:n,o=2*i-1,a=t.alpha()-r.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,u=1-s;return pr.rgb(s*t.red()+u*r.red(),s*t.green()+u*r.green(),s*t.blue()+u*r.blue(),t.alpha()*i+r.alpha()*(1-i))}},Object.keys($r).forEach(function(e){if(J_.indexOf(e)===-1){var n=$r[e].channels;pr.prototype[e]=function(){if(this.model===e)return new pr(this);if(arguments.length)return new pr(arguments,e);var t,r=typeof arguments[n]=="number"?n:this.valpha;return new pr((t=$r[this.model][e].raw(this.color),Array.isArray(t)?t:[t]).concat(r),e)},pr[e]=function(t){return typeof t=="number"&&(t=lm(um.call(arguments),n)),new pr(t,e)}}});const cl=qs(pr);var B6=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function ek(e,n,t){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?t?Math.round(e.h)-2*n:Math.round(e.h)+2*n:t?Math.round(e.h)+2*n:Math.round(e.h)-2*n)<0?r+=360:r>=360&&(r-=360),r}function tk(e,n,t){return e.h===0&&e.s===0?e.s:((r=t?e.s-.16*n:n===4?e.s+.16:e.s+.05*n)>1&&(r=1),t&&n===5&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function nk(e,n,t){var r;return(r=t?e.v+.05*n:e.v-.15*n)>1&&(r=1),Number(r.toFixed(2))}function gf(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=Vg(e),i=5;i>0;i-=1){var o=r.toHsv(),a=Vg({h:ek(o,i,!0),s:tk(o,i,!0),v:nk(o,i,!0)}).toHexString();t.push(a)}t.push(r.toHexString());for(var s=1;s<=4;s+=1){var u=r.toHsv(),c=Vg({h:ek(u,s),s:tk(u,s),v:nk(u,s)}).toHexString();t.push(c)}return n.theme==="dark"?B6.map(function(l){var h=l.index,d=l.opacity;return Vg.mix(n.backgroundColor||"#141414",t[h],100*d).toHexString()}):t}var hm={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},dm={},fm={};Object.keys(hm).forEach(function(e){dm[e]=gf(hm[e]),dm[e].primary=dm[e][5],fm[e]=gf(hm[e],{theme:"dark",backgroundColor:"#141414"}),fm[e].primary=fm[e][5]});var Jn=function(e,n,t){var r=cl(e),i=cl(n);return cl([(1-t)*r.red()+t*i.red(),(1-t)*r.green()+t*i.green(),(1-t)*r.blue()+t*i.blue()]).rgb()},pm=function(e,n,t,r){return n===void 0&&(n="#fff"),t===void 0&&(t="default"),t==="default"?function(i,o,a){o===void 0&&(o="#fff");var s=Jn(o,i,.05).rgb().toString(),u=Jn(o,i,.1).rgb().toString(),c=Jn(o,i,.2).rgb().toString(),l=Jn(o,i,.4).rgb().toString(),h=Jn(o,a,.02).rgb().toString(),d=Jn(o,a,.05).rgb().toString(),f=Jn(o,a,.1).rgb().toString(),p=Jn(o,a,.2).rgb().toString(),g=Jn(o,a,.3).rgb().toString(),v=gf(i,{theme:"default",backgroundColor:o}),m=cl(i).hex().toLowerCase(),y=v.indexOf(m),b=i;return y!==-1&&(b=v[y+1]),{mainStroke:i,mainFill:u,activeStroke:i,activeFill:s,inactiveStroke:l,inactiveFill:s,selectedStroke:i,selectedFill:o,highlightStroke:b,highlightFill:c,disableStroke:g,disableFill:d,edgeMainStroke:g,edgeActiveStroke:i,edgeInactiveStroke:p,edgeSelectedStroke:i,edgeHighlightStroke:i,edgeDisableStroke:f,comboMainStroke:g,comboMainFill:h,comboActiveStroke:i,comboActiveFill:s,comboInactiveStroke:g,comboInactiveFill:h,comboSelectedStroke:i,comboSelectedFill:h,comboHighlightStroke:b,comboHighlightFill:h,comboDisableStroke:p,comboDisableFill:d}}(e,n,"rgb(150, 150, 150)"):function(i,o,a){o===void 0&&(o="#fff");var s=Jn(o,i,.2).rgb().toString(),u=Jn(o,i,.3).rgb().toString(),c=Jn(o,i,.6).rgb().toString(),l=Jn(o,i,.8).rgb().toString(),h=Jn(o,a,.2).rgb().toString(),d=Jn(o,a,.25).rgb().toString(),f=Jn(o,a,.3).rgb().toString(),p=Jn(o,a,.4).rgb().toString(),g=Jn(o,a,.5).rgb().toString(),v=gf(i,{theme:"dark",backgroundColor:o}),m=cl(i).hex().toLowerCase(),y=v.indexOf(m),b=i;return y!==-1&&(b=v[y+1]),{mainStroke:l,mainFill:s,activeStroke:i,activeFill:u,inactiveStroke:l,inactiveFill:s,selectedStroke:i,selectedFill:s,highlightStroke:i,highlightFill:c,disableStroke:g,disableFill:d,edgeMainStroke:a,edgeActiveStroke:i,edgeInactiveStroke:a,edgeSelectedStroke:i,edgeHighlightStroke:i,edgeDisableStroke:f,comboMainStroke:p,comboMainFill:d,comboActiveStroke:i,comboActiveFill:h,comboInactiveStroke:p,comboInactiveFill:d,comboSelectedStroke:i,comboSelectedFill:h,comboHighlightStroke:b,comboHighlightFill:d,comboDisableStroke:p,comboDisableFill:h}}(e,n,"#777")};const R6=Object.freeze(Object.defineProperty({__proto__:null,getColorSetsBySubjectColors:function(e,n,t,r){n===void 0&&(n="#fff"),t===void 0&&(t="default");var i=[];return e.forEach(function(o){i.push(pm(o,n,t))}),i},getColorsWithSubjectColor:pm,mixColor:Jn},Symbol.toStringTag,{value:"Module"}));var rk="rgb(0, 0, 0)",nn=pm("rgb(95, 149, 255)","rgb(255, 255, 255)");const ss={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:nn.mainStroke,fill:nn.mainFill},size:20,color:nn.mainStroke,linkPoints:{size:8,lineWidth:1,fill:nn.activeFill,stroke:nn.activeStroke}},nodeStateStyles:{active:{fill:nn.activeFill,stroke:nn.activeStroke,lineWidth:2,shadowColor:nn.mainStroke,shadowBlur:10},selected:{fill:nn.selectedFill,stroke:nn.selectedStroke,lineWidth:4,shadowColor:nn.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:nn.highlightFill,stroke:nn.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:nn.inactiveFill,stroke:nn.inactiveStroke,lineWidth:1},disable:{fill:nn.disableFill,stroke:nn.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:rk,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:nn.edgeMainStroke,lineAppendWidth:2},color:nn.edgeMainStroke},edgeStateStyles:{active:{stroke:nn.edgeActiveStroke,lineWidth:1},selected:{stroke:nn.edgeSelectedStroke,lineWidth:2,shadowColor:nn.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:nn.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:nn.edgeInactiveStroke,lineWidth:1},disable:{stroke:nn.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:rk,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:nn.comboMainFill,lineWidth:1,stroke:nn.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:nn.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:nn.comboActiveStroke,lineWidth:1,fill:nn.comboActiveFill},selected:{stroke:nn.comboSelectedStroke,lineWidth:2,fill:nn.comboSelectedFill,shadowColor:nn.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:nn.comboHighlightStroke,lineWidth:2,fill:nn.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:nn.comboInactiveStroke,fill:nn.comboInactiveFill,lineWidth:1},disable:{stroke:nn.comboDisableStroke,fill:nn.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};var j6=function e(n,t){var r;n.isGroup()&&t.isGroup()&&((r=n.get("children"))===null||r===void 0||r.forEach(function(s,u){var c=t.get("children")[u];e(s,c)}));var i=n.get("type"),o=t.get("type");if(i==="image"&&o==="image"){var a=n.get("clipShape");a&&t.setClip({type:a.get("type"),attrs:a.attr()})}},z6=fu.cloneEvent,F6=fu.isViewportChanged,G6=function(e){function n(t){var r=e.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return At(n,e),n.prototype.initEvents=function(){var t=this.graph,r=this.extendEvents,i=r===void 0?[]:r,o=t.get("canvas"),a=o.get("el"),s=ia(this,"onCanvasEvents"),u=ia(this,"onExtendEvents"),c=ia(this,"onWheelEvent");o.off("*").on("*",s),this.canvasHandler=s,i.push(hf(a,"wheel",c)),typeof window!="undefined"&&(i.push(hf(window,"keydown",u)),i.push(hf(window,"keyup",u)),i.push(hf(window,"focus",u))),this.resetHandler&&t.off("afterchangedata",this.resetHandler),this.resetHandler=ia(this,"resetStatus"),t.on("afterchangedata",this.resetHandler)},n.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},n.prototype.onCanvasEvents=function(t){var r=this,i=this.graph,o=i.get("canvas"),a=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},c=i.get("group").getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),F6(c)&&(u=i.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=i,a===o)return s!=="mousemove"&&s!=="mouseleave"||this.handleMouseMove(t,"canvas"),t.target=o,t.item=null,i.emit(s,t),void i.emit("canvas:".concat(s),t);var l=n.getItemRoot(a);if(l){var h=l.get("item");if(!h.destroyed){var d=h.getType();if(t.target=a,t.item=h,t.canvasX===t.x&&t.canvasY===t.y){var f=i.getCanvasByPoint(t.x,t.y);t.canvasX=f.x,t.canvasY=f.y}t.name&&!t.name.includes(":")?(i.emit("".concat(d,":").concat(s),t),i.emit(s,t)):t.name&&i.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,d)}}else i.emit(s,t)},n.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},n.prototype.onWheelEvent=function(t){ht(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},n.prototype.handleMouseMove=function(t,r){var i=this.graph,o=this.preItem,a=i.get("canvas"),s=t.target===a?null:t.item;t=z6(t),o&&o!==s&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),s&&o!==s&&(t.item=s,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=s},n.prototype.emitCustomEvent=function(t,r,i){i.type=r,this.graph.emit("".concat(t,":").concat(r),i)},n.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},n.prototype.destroy=function(){var t=this,r=t.graph,i=t.canvasHandler,o=t.extendEvents;r.get("canvas").off("*",i),re(o,function(a){a.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},n}(AR),$t={},Lo={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.Base=void 0;var Y6=function(){function e(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return e.prototype.layout=function(n){return this.init(n),this.execute(!0)},e.prototype.init=function(n){this.nodes=n.nodes||[],this.edges=n.edges||[],this.combos=n.combos||[],this.comboEdges=n.comboEdges||[],this.hiddenNodes=n.hiddenNodes||[],this.hiddenEdges=n.hiddenEdges||[],this.hiddenCombos=n.hiddenCombos||[],this.vedges=n.vedges||[]},e.prototype.execute=function(n){},e.prototype.executeWithWorker=function(){},e.prototype.getDefaultCfg=function(){return{}},e.prototype.updateCfg=function(n){n&&Object.assign(this,n)},e.prototype.getType=function(){return"base"},e.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},e}();Nn.Base=Y6;var ik={},xu={};Object.defineProperty(xu,"__esModule",{value:!0}),xu.camelize=xu.isString=void 0,xu.isString=function(e){return typeof e=="string"};var X6=/-(\w)/g;xu.camelize=function(e){var n=Object.create(null);return function(t){return n[t]||(n[t]=e(t))}}(function(e){return e.replace(X6,function(n,t){return t?t.toUpperCase():""})});var ll={};Object.defineProperty(ll,"__esModule",{value:!0}),ll.isArray=void 0,ll.isArray=Array.isArray;var vf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toNumber=e.isNaN=e.isNumber=void 0,e.isNumber=function(n){return typeof n=="number"},e.isNaN=function(n){return Number.isNaN(Number(n))},e.toNumber=function(n){var t=parseFloat(n);return(0,e.isNaN)(t)?n:t}})(vf);var mf={},gm={};(function(e){var n=Ee&&Ee.__assign||function(){return n=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++)for(var a in r=arguments[i])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.isObject=void 0,e.isObject=function(t){return t!==null&&typeof t=="object"},e.clone=function(t){if(t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var r=[];return t.forEach(function(o){r.push(o)}),r.map(function(o){return(0,e.clone)(o)})}if(typeof t=="object"&&Object.keys(t).length){var i=n({},t);return Object.keys(i).forEach(function(o){i[o]=(0,e.clone)(i[o])}),i}return t}})(gm),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCoreNodeAndRelativeLeafNodes=e.getAvgNodePosition=e.getLayoutBBox=e.traverseTreeUp=e.scaleMatrix=e.getAdjMatrix=e.floydWarshall=e.getDegreeMap=e.getDegree=e.getEdgeTerminal=void 0;var n=ll,t=vf,r=gm;e.getEdgeTerminal=function(s,u){var c=s[u];return(0,r.isObject)(c)?c.cell:c},e.getDegree=function(s,u,c){for(var l=[],h=0;h<s;h++)l[h]={in:0,out:0,all:0};return c&&c.forEach(function(d){var f=(0,e.getEdgeTerminal)(d,"source"),p=(0,e.getEdgeTerminal)(d,"target");f&&l[u[f]]&&(l[u[f]].out+=1,l[u[f]].all+=1),p&&l[u[p]]&&(l[u[p]].in+=1,l[u[p]].all+=1)}),l},e.getDegreeMap=function(s,u){var c={};return s.forEach(function(l){c[l.id]={in:0,out:0,all:0}}),u&&u.forEach(function(l){var h=(0,e.getEdgeTerminal)(l,"source"),d=(0,e.getEdgeTerminal)(l,"target");h&&(c[h].out+=1,c[h].all+=1),d&&(c[d].in+=1,c[d].all+=1)}),c},e.floydWarshall=function(s){for(var u=[],c=s.length,l=0;l<c;l+=1){u[l]=[];for(var h=0;h<c;h+=1)l===h?u[l][h]=0:s[l][h]!==0&&s[l][h]?u[l][h]=s[l][h]:u[l][h]=1/0}for(var d=0;d<c;d+=1)for(l=0;l<c;l+=1)for(h=0;h<c;h+=1)u[l][h]>u[l][d]+u[d][h]&&(u[l][h]=u[l][d]+u[d][h]);return u},e.getAdjMatrix=function(s,u){var c=s.nodes,l=s.edges,h=[],d={};if(!c)throw new Error("invalid nodes data!");return c&&c.forEach(function(f,p){d[f.id]=p,h.push([])}),l==null||l.forEach(function(f){var p=(0,e.getEdgeTerminal)(f,"source"),g=(0,e.getEdgeTerminal)(f,"target"),v=d[p],m=d[g];v!==void 0&&m!==void 0&&(h[v][m]=1,u||(h[m][v]=1))}),h},e.scaleMatrix=function(s,u){var c=[];return s.forEach(function(l){var h=[];l.forEach(function(d){h.push(d*u)}),c.push(h)}),c};var i=function(s,u){if(s&&s.children){for(var c=s.children.length-1;c>=0;c--)if(!i(s.children[c],u))return}return!!u(s)};e.traverseTreeUp=function(s,u){typeof u=="function"&&i(s,u)},e.getLayoutBBox=function(s){var u=1/0,c=1/0,l=-1/0,h=-1/0;return s.forEach(function(d){var f=d.size;(0,n.isArray)(f)?f.length===1&&(f=[f[0],f[0]]):(0,t.isNumber)(f)?f=[f,f]:(f===void 0||isNaN(f))&&(f=[30,30]);var p=[f[0]/2,f[1]/2],g=d.x-p[0],v=d.x+p[0],m=d.y-p[1],y=d.y+p[1];u>g&&(u=g),c>m&&(c=m),l<v&&(l=v),h<y&&(h=y)}),{minX:u,minY:c,maxX:l,maxY:h}},e.getAvgNodePosition=function(s){var u={x:0,y:0};s.forEach(function(l){u.x+=l.x||0,u.y+=l.y||0});var c=s.length||1;return{x:u.x/c,y:u.y/c}};var o=function(s,u,c){var l,h;return s==="source"?((l=c==null?void 0:c.find(function(d){return d.target===u.id}))===null||l===void 0?void 0:l.source)||{}:((h=c==null?void 0:c.find(function(d){return d.source===u.id}))===null||h===void 0?void 0:h.target)||{}},a=function(s,u,c){var l=[];switch(s){case"source":l=c==null?void 0:c.filter(function(d){return d.source===u.id}).map(function(d){return d.target});break;case"target":l=c==null?void 0:c.filter(function(d){return d.target===u.id}).map(function(d){return d.source});break;case"both":l=c==null?void 0:c.filter(function(d){return d.source===u.id}).map(function(d){return d.target}).concat(c==null?void 0:c.filter(function(d){return d.target===u.id}).map(function(d){return d.source}))}var h=new Set(l);return Array.from(h)};e.getCoreNodeAndRelativeLeafNodes=function(s,u,c,l,h,d){var f=h[u.id],p=f.in,g=f.out,v=u,m=[];p===0?(v=o("source",u,c),m=a("both",v,c).map(function(b){return d[b]})):g===0&&(v=o("target",u,c),m=a("both",v,c).map(function(b){return d[b]})),m=m.filter(function(b){return h[b.id]&&(h[b.id].in===0||h[b.id].out===0)});var y=function(b,x,w,E,S){var M=w[x]||"",k=(E==null?void 0:E.filter(function(_){return _[x]===M}))||[];return b==="leaf"&&(k=k.filter(function(_){var C,T;return((C=S[_.id])===null||C===void 0?void 0:C.in)===0||((T=S[_.id])===null||T===void 0?void 0:T.out)===0})),k}(s,l,u,m,h);return{coreNode:v,relativeLeafNodes:m,sameTypeLeafNodes:y}}}(mf);var ok,ak,sk={};function Cn(){return ak||(ak=1,function(e){var n=Ee&&Ee.__createBinding||(Object.create?function(r,i,o,a){a===void 0&&(a=o);var s=Object.getOwnPropertyDescriptor(i,o);s&&!("get"in s?!i.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,a,s)}:function(r,i,o,a){a===void 0&&(a=o),r[a]=i[o]}),t=Ee&&Ee.__exportStar||function(r,i){for(var o in r)o==="default"||Object.prototype.hasOwnProperty.call(i,o)||n(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),t(xu,e),t(ll,e),t(vf,e),t(mf,e),t(gm,e),t((ok||(ok=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getFuncByUnknownType=r.getFunc=r.isFunction=void 0;var i=Cn(),o=vf;r.isFunction=function(a){return typeof a=="function"},r.getFunc=function(a,s,u){return u||((0,o.isNumber)(a)?function(){return a}:function(){return s})},r.getFuncByUnknownType=function(a,s,u){return u===void 0&&(u=!0),s||s===0?(0,r.isFunction)(s)?s:(0,o.isNumber)(s)?function(){return s}:(0,i.isArray)(s)?function(){if(u){var c=Math.max.apply(Math,s);return isNaN(c)?a:c}return s}:(0,i.isObject)(s)?function(){if(u){var c=Math.max(s.width,s.height);return isNaN(c)?a:c}return[s.width,s.height]}:function(){return a}:function(c){return c.size?(0,i.isArray)(c.size)?c.size[0]>c.size[1]?c.size[0]:c.size[1]:(0,i.isObject)(c.size)?c.size.width>c.size.height?c.size.width:c.size.height:c.size:a}}}(sk)),sk),e)}(ik)),ik}var U6=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.getLayoutByName=Lo.unRegisterLayout=Lo.registerLayout=void 0;var W6=Nn,V6=Cn(),ya=new Map;Lo.registerLayout=function(e,n){if(ya.get(e),(0,V6.isObject)(n)){var t=function(r){function i(o){var a,s,u=a=r.call(this)||this,c={},l=Object.assign({},u.getDefaultCfg(),((s=n.getDefaultCfg)===null||s===void 0?void 0:s.call(n))||{});return Object.assign(c,l,n,o),Object.keys(c).forEach(function(h){var d=c[h];u[h]=d}),a}return U6(i,r),i}(W6.Base);ya.set(e,t)}else ya.set(e,n);return ya.get(e)},Lo.unRegisterLayout=function(e){ya.has(e)&&ya.delete(e)},Lo.getLayoutByName=function(e){return ya.has(e)?ya.get(e):null};var uk={},hl={},H6=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(hl,"__esModule",{value:!0}),hl.GridLayout=void 0;var wu=Cn(),q6=function(e){function n(t){var r=e.call(this)||this;return r.begin=[0,0],r.preventOverlap=!0,r.preventOverlapPadding=10,r.condense=!1,r.sortBy="degree",r.nodes=[],r.edges=[],r.width=300,r.height=300,r.row=0,r.col=0,r.cellWidth=0,r.cellHeight=0,r.cellUsed={},r.id2manPos={},r.onLayoutEnd=function(){},r.updateCfg(t),r}return H6(n,e),n.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},n.prototype.execute=function(){var t=this,r=t.nodes,i=t.edges,o=t.begin,a=r.length;if(a===0)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:r,edges:i};if(a===1)return r[0].x=o[0],r[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:r,edges:i};var s=t.sortBy,u=t.width,c=t.height,l=t.condense,h=t.preventOverlapPadding,d=t.preventOverlap,f=t.nodeSpacing,p=t.nodeSize,g=[];r.forEach(function(T){g.push(T)});var v={};if(g.forEach(function(T,A){v[T.id]=A}),(s==="degree"||!(0,wu.isString)(s)||g[0][s]===void 0)&&(s="degree",(0,wu.isNaN)(r[0].degree))){var m=(0,wu.getDegree)(g.length,v,i);g.forEach(function(T,A){T.degree=m[A].all})}g.sort(function(T,A){return A[s]-T[s]}),u||typeof window=="undefined"||(u=window.innerWidth),c||typeof window=="undefined"||(c=window.innerHeight);var y=t.rows,b=t.cols!=null?t.cols:t.columns;if(t.cells=a,y!=null&&b!=null?(t.rows=y,t.cols=b):y!=null&&b==null?(t.rows=y,t.cols=Math.ceil(t.cells/t.rows)):y==null&&b!=null?(t.cols=b,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells)((w=t.small())-1)*(x=t.large())>=t.cells?t.small(w-1):(x-1)*w>=t.cells&&t.large(x-1);else for(;t.cols*t.rows<t.cells;){var x,w=t.small();((x=t.large())+1)*w>=t.cells?t.large(x+1):t.small(w+1)}if(t.cellWidth=u/t.cols,t.cellHeight=c/t.rows,l&&(t.cellWidth=0,t.cellHeight=0),d||f){var E=(0,wu.getFuncByUnknownType)(10,f),S=(0,wu.getFuncByUnknownType)(30,p,!1);g.forEach(function(T){T.x&&T.y||(T.x=0,T.y=0);var A,D,R=S(T)||30;(0,wu.isArray)(R)?(A=R[0],D=R[1]):(A=R,D=R);var B=E!==void 0?E(T):h,F=A+B,N=D+B;t.cellWidth=Math.max(t.cellWidth,F),t.cellHeight=Math.max(t.cellHeight,N)})}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var M=0;M<g.length;M++){var k=g[M],_=void 0;if(t.position&&(_=t.position(k)),_&&(_.row!==void 0||_.col!==void 0)){var C={row:_.row,col:_.col};if(C.col===void 0)for(C.col=0;t.used(C.row,C.col);)C.col++;else if(C.row===void 0)for(C.row=0;t.used(C.row,C.col);)C.row++;t.id2manPos[k.id]=C,t.use(C.row,C.col)}t.getPos(k)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:i,nodes:g}},n.prototype.small=function(t){var r,i=this,o=i.rows||5,a=i.cols||5;return t==null?r=Math.min(o,a):Math.min(o,a)===i.rows?i.rows=t:i.cols=t,r},n.prototype.large=function(t){var r,i=this,o=i.rows||5,a=i.cols||5;return t==null?r=Math.max(o,a):Math.max(o,a)===i.rows?i.rows=t:i.cols=t,r},n.prototype.used=function(t,r){return this.cellUsed["c-".concat(t,"-").concat(r)]||!1},n.prototype.use=function(t,r){this.cellUsed["c-".concat(t,"-").concat(r)]=!0},n.prototype.moveToNextCell=function(){var t=this,r=t.cols||5;t.col++,t.col>=r&&(t.col=0,t.row++)},n.prototype.getPos=function(t){var r,i,o=this,a=o.begin,s=o.cellWidth,u=o.cellHeight,c=o.id2manPos[t.id];if(c)r=c.col*s+s/2+a[0],i=c.row*u+u/2+a[1];else{for(;o.used(o.row,o.col);)o.moveToNextCell();r=o.col*s+s/2+a[0],i=o.row*u+u/2+a[1],o.use(o.row,o.col),o.moveToNextCell()}t.x=r,t.y=i},n.prototype.getType=function(){return"grid"},n}(Nn.Base);hl.GridLayout=q6;var dl={},Z6=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(dl,"__esModule",{value:!0}),dl.RandomLayout=void 0;var K6=function(e){function n(t){var r=e.call(this)||this;return r.center=[0,0],r.width=300,r.height=300,r.nodes=[],r.edges=[],r.onLayoutEnd=function(){},r.updateCfg(t),r}return Z6(n,e),n.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},n.prototype.execute=function(){var t=this,r=t.nodes,i=t.center;return t.width||typeof window=="undefined"||(t.width=window.innerWidth),t.height||typeof window=="undefined"||(t.height=window.innerHeight),r&&r.forEach(function(o){o.x=.9*(Math.random()-.5)*t.width+i[0],o.y=.9*(Math.random()-.5)*t.height+i[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:r,edges:this.edges}},n.prototype.getType=function(){return"random"},n}(Nn.Base);dl.RandomLayout=K6;var fl={},$6=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(fl,"__esModule",{value:!0}),fl.GForceLayout=void 0;var Q6=Nn,Er=Cn(),vm=function(e,n){return e?(0,Er.isNumber)(e)?function(t){return e}:e:function(t){return n}},J6=function(e){function n(t){var r=e.call(this)||this;return r.maxIteration=500,r.workerEnabled=!1,r.edgeStrength=200,r.nodeStrength=1e3,r.coulombDisScale=.005,r.damping=.9,r.maxSpeed=1e3,r.minMovement=.5,r.interval=.02,r.factor=1,r.linkDistance=1,r.gravity=10,r.preventOverlap=!0,r.collideStrength=1,r.tick=function(){},r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.animate=!0,r.updateCfg(t),r}return $6(n,e),n.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},n.prototype.execute=function(){var t,r,i=this,o=i.nodes;if(i.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(i.timeInterval),o&&o.length!==0){i.width||typeof window=="undefined"||(i.width=window.innerWidth),i.height||typeof window=="undefined"||(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var a=i.center;if(o.length===1)return o[0].x=a[0],o[0].y=a[1],void((r=i.onLayoutEnd)===null||r===void 0||r.call(i));var s={},u={};o.forEach(function(p,g){(0,Er.isNumber)(p.x)||(p.x=Math.random()*i.width),(0,Er.isNumber)(p.y)||(p.y=Math.random()*i.height),s[p.id]=p,u[p.id]=g}),i.nodeMap=s,i.nodeIdxMap=u,i.linkDistance=vm(i.linkDistance,1),i.nodeStrength=vm(i.nodeStrength,1),i.edgeStrength=vm(i.edgeStrength,1);var c,l=i.nodeSize;if(i.preventOverlap){var h,d=i.nodeSpacing;h=(0,Er.isNumber)(d)?function(){return d}:(0,Er.isFunction)(d)?d:function(){return 0},c=l?(0,Er.isArray)(l)?function(p){return Math.max(l[0],l[1])+h(p)}:function(p){return l+h(p)}:function(p){return p.size?(0,Er.isArray)(p.size)?Math.max(p.size[0],p.size[1])+h(p):(0,Er.isObject)(p.size)?Math.max(p.size.width,p.size.height)+h(p):p.size+h(p):10+h(p)}}i.nodeSize=c;var f=i.edges;i.degrees=(0,Er.getDegree)(o.length,i.nodeIdxMap,f),i.getMass||(i.getMass=function(p){return p.mass||i.degrees[i.nodeIdxMap[p.id]].all||1}),i.run()}else(t=i.onLayoutEnd)===null||t===void 0||t.call(i)},n.prototype.run=function(){var t,r=this,i=r.maxIteration,o=r.nodes,a=r.workerEnabled,s=r.minMovement,u=r.animate;if(o)if(a||!u){for(var c=0;c<i;c++){var l=r.runOneStep(c);if(r.reachMoveThreshold(o,l,s))break}(t=r.onLayoutEnd)===null||t===void 0||t.call(r)}else{if(typeof window=="undefined")return;var h=0;this.timeInterval=window.setInterval(function(){var d,f;if(o){var p=r.runOneStep(h)||[];r.reachMoveThreshold(o,p,s)&&((d=r.onLayoutEnd)===null||d===void 0||d.call(r),window.clearInterval(r.timeInterval)),++h>=i&&((f=r.onLayoutEnd)===null||f===void 0||f.call(r),window.clearInterval(r.timeInterval))}},0)}},n.prototype.reachMoveThreshold=function(t,r,i){var o=0;return t.forEach(function(a,s){var u=a.x-r[s].x,c=a.y-r[s].y;o+=Math.sqrt(u*u+c*c)}),(o/=t.length)<i},n.prototype.runOneStep=function(t){var r,i=this,o=i.nodes,a=i.edges,s=[],u=[];if(o){o.forEach(function(h,d){s[2*d]=0,s[2*d+1]=0,u[2*d]=0,u[2*d+1]=0}),i.calRepulsive(s,o),a&&i.calAttractive(s,a),i.calGravity(s,o);var c=Math.max(.02,i.interval-.002*t);i.updateVelocity(s,u,c,o);var l=[];return o.forEach(function(h){l.push({x:h.x,y:h.y})}),i.updatePosition(u,c,o),(r=i.tick)===null||r===void 0||r.call(i),l}},n.prototype.calRepulsive=function(t,r){var i=this,o=i.getMass,a=i.factor,s=i.coulombDisScale,u=i.preventOverlap,c=i.collideStrength,l=c===void 0?1:c,h=i.nodeStrength,d=i.nodeSize;r.forEach(function(f,p){var g=o?o(f):1;r.forEach(function(v,m){if(!(p>=m)){var y=f.x-v.x,b=f.y-v.y;y===0&&b===0&&(y=.01*Math.random(),b=.01*Math.random());var x=y*y+b*b,w=Math.sqrt(x),E=(w+.1)*s,S=y/w,M=b/w,k=.5*(h(f)+h(v))*a/(E*E),_=o?o(v):1;if(t[2*p]+=S*k,t[2*p+1]+=M*k,t[2*m]-=S*k,t[2*m+1]-=M*k,u&&(d(f)+d(v))/2>w){var C=l*(h(f)+h(v))*.5/x;t[2*p]+=S*C/g,t[2*p+1]+=M*C/g,t[2*m]-=S*C/_,t[2*m+1]-=M*C/_}}})})},n.prototype.calAttractive=function(t,r){var i=this,o=i.nodeMap,a=i.nodeIdxMap,s=i.linkDistance,u=i.edgeStrength,c=i.nodeSize,l=i.getMass;r.forEach(function(h,d){var f=(0,Er.getEdgeTerminal)(h,"source"),p=(0,Er.getEdgeTerminal)(h,"target"),g=o[f],v=o[p],m=v.x-g.x,y=v.y-g.y;m===0&&y===0&&(m=.01*Math.random(),y=.01*Math.random());var b=Math.sqrt(m*m+y*y),x=m/b,w=y/b,E=((s(h,g,v)||1+(c(g)+c(v)||0)/2)-b)*u(h),S=a[f],M=a[p],k=l?l(g):1,_=l?l(v):1;t[2*S]-=x*E/k,t[2*S+1]-=w*E/k,t[2*M]+=x*E/_,t[2*M+1]+=w*E/_})},n.prototype.calGravity=function(t,r){for(var i=this,o=i.center,a=i.gravity,s=i.degrees,u=r.length,c=0;c<u;c++){var l=r[c],h=l.x-o[0],d=l.y-o[1],f=a;if(i.getCenter){var p=i.getCenter(l,s[c].all);p&&(0,Er.isNumber)(p[0])&&(0,Er.isNumber)(p[1])&&(0,Er.isNumber)(p[2])&&(h=l.x-p[0],d=l.y-p[1],f=p[2])}f&&(t[2*c]-=f*h,t[2*c+1]-=f*d)}},n.prototype.updateVelocity=function(t,r,i,o){var a=this,s=i*a.damping;o.forEach(function(u,c){var l=t[2*c]*s||.01,h=t[2*c+1]*s||.01,d=Math.sqrt(l*l+h*h);if(d>a.maxSpeed){var f=a.maxSpeed/d;l*=f,h*=f}r[2*c]=l,r[2*c+1]=h})},n.prototype.updatePosition=function(t,r,i){i.forEach(function(o,a){if((0,Er.isNumber)(o.fx)&&(0,Er.isNumber)(o.fy))return o.x=o.fx,void(o.y=o.fy);var s=t[2*a]*r,u=t[2*a+1]*r;o.x+=s,o.y+=u})},n.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},n.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},n.prototype.getType=function(){return"gForce"},n}(Q6.Base);fl.GForceLayout=J6;var pl={},yf={};function ck(e,n,t,r){if(isNaN(n)||isNaN(t))return e;var i,o,a,s,u,c,l,h,d,f=e._root,p={data:r},g=e._x0,v=e._y0,m=e._x1,y=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((c=n>=(o=(g+m)/2))?g=o:m=o,(l=t>=(a=(v+y)/2))?v=a:y=a,i=f,!(f=f[h=l<<1|c]))return i[h]=p,e;if(s=+e._x.call(null,f.data),u=+e._y.call(null,f.data),n===s&&t===u)return p.next=f,i?i[h]=p:e._root=p,e;do i=i?i[h]=new Array(4):e._root=new Array(4),(c=n>=(o=(g+m)/2))?g=o:m=o,(l=t>=(a=(v+y)/2))?v=a:y=a;while((h=l<<1|c)==(d=(u>=a)<<1|s>=o));return i[d]=f,i[h]=p,e}function Ar(e,n,t,r,i){this.node=e,this.x0=n,this.y0=t,this.x1=r,this.y1=i}function ej(e){return e[0]}function tj(e){return e[1]}function bf(e,n,t){var r=new mm(n==null?ej:n,t==null?tj:t,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function mm(e,n,t,r,i,o){this._x=e,this._y=n,this._x0=t,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function lk(e){for(var n={data:e.data},t=n;e=e.next;)t=t.next={data:e.data};return n}var Ir=bf.prototype=mm.prototype;Ir.copy=function(){var e,n,t=new mm(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return t;if(!r.length)return t._root=lk(r),t;for(e=[{source:r,target:t._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?e.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=lk(n));return t},Ir.add=function(e){const n=+this._x.call(null,e),t=+this._y.call(null,e);return ck(this.cover(n,t),n,t,e)},Ir.addAll=function(e){var n,t,r,i,o=e.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,h=-1/0;for(t=0;t<o;++t)isNaN(r=+this._x.call(null,n=e[t]))||isNaN(i=+this._y.call(null,n))||(a[t]=r,s[t]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>h&&(h=i));if(u>l||c>h)return this;for(this.cover(u,c).cover(l,h),t=0;t<o;++t)ck(this,a[t],s[t],e[t]);return this},Ir.cover=function(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var t=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(t))i=(t=Math.floor(e))+1,o=(r=Math.floor(n))+1;else{for(var a,s,u=i-t||1,c=this._root;t>e||e>=i||r>n||n>=o;)switch(s=(n<r)<<1|e<t,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=t+u,o=r+u;break;case 1:t=i-u,o=r+u;break;case 2:i=t+u,r=o-u;break;case 3:t=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=t,this._y0=r,this._x1=i,this._y1=o,this},Ir.data=function(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e},Ir.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ir.find=function(e,n,t){var r,i,o,a,s,u,c,l=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new Ar(g,l,h,d,f)),t==null?t=1/0:(l=e-t,h=n-t,d=e+t,f=n+t,t*=t);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>d||(o=u.y0)>f||(a=u.x1)<l||(s=u.y1)<h))if(g.length){var v=(i+a)/2,m=(o+s)/2;p.push(new Ar(g[3],v,m,a,s),new Ar(g[2],i,m,v,s),new Ar(g[1],v,o,a,m),new Ar(g[0],i,o,v,m)),(c=(n>=m)<<1|e>=v)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=e-+this._x.call(null,g.data),b=n-+this._y.call(null,g.data),x=y*y+b*b;if(x<t){var w=Math.sqrt(t=x);l=e-w,h=n-w,d=e+w,f=n+w,r=g.data}}return r},Ir.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var n,t,r,i,o,a,s,u,c,l,h,d,f=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!f)return this;if(f.length)for(;;){if((c=o>=(s=(p+v)/2))?p=s:v=s,(l=a>=(u=(g+m)/2))?g=u:m=u,n=f,!(f=f[h=l<<1|c]))return this;if(!f.length)break;(n[h+1&3]||n[h+2&3]||n[h+3&3])&&(t=n,d=h)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):n?(i?n[h]=i:delete n[h],(f=n[0]||n[1]||n[2]||n[3])&&f===(n[3]||n[2]||n[1]||n[0])&&!f.length&&(t?t[d]=f:this._root=f),this):(this._root=i,this)},Ir.removeAll=function(e){for(var n=0,t=e.length;n<t;++n)this.remove(e[n]);return this},Ir.root=function(){return this._root},Ir.size=function(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e},Ir.visit=function(e){var n,t,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Ar(u,this._x0,this._y0,this._x1,this._y1));n=s.pop();)if(!e(u=n.node,r=n.x0,i=n.y0,o=n.x1,a=n.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(t=u[3])&&s.push(new Ar(t,c,l,o,a)),(t=u[2])&&s.push(new Ar(t,r,l,c,a)),(t=u[1])&&s.push(new Ar(t,c,i,o,l)),(t=u[0])&&s.push(new Ar(t,r,i,c,l))}return this},Ir.visitAfter=function(e){var n,t=[],r=[];for(this._root&&t.push(new Ar(this._root,this._x0,this._y0,this._x1,this._y1));n=t.pop();){var i=n.node;if(i.length){var o,a=n.x0,s=n.y0,u=n.x1,c=n.y1,l=(a+u)/2,h=(s+c)/2;(o=i[0])&&t.push(new Ar(o,a,s,l,h)),(o=i[1])&&t.push(new Ar(o,l,s,u,h)),(o=i[2])&&t.push(new Ar(o,a,h,l,c)),(o=i[3])&&t.push(new Ar(o,l,h,u,c))}r.push(n)}for(;n=r.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this},Ir.x=function(e){return arguments.length?(this._x=e,this):this._x},Ir.y=function(e){return arguments.length?(this._y=e,this):this._y};const nj=Ao(Object.freeze(Object.defineProperty({__proto__:null,quadtree:bf},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(yf,"__esModule",{value:!0}),yf.forceNBody=void 0;var rj=nj;function ij(e){var n=0,t=0,r=0;if(e.length){for(var i=0;i<4;i++)(o=e[i])&&o.weight&&(n+=o.weight,t+=o.x*o.weight,r+=o.y*o.weight);e.x=t/n,e.y=r/n,e.weight=n}else{var o=e;e.x=o.data.x,e.y=o.data.y,e.weight=o.data.weight}}yf.forceNBody=function(e,n,t,r,i){var o=t/r,a=e.map(function(u,c){var l=n[u.id],h=l.data,d=l.x,f=l.y,p=l.size,g=h.layout.force.nodeStrength;return{x:d,y:f,size:p,index:c,vx:0,vy:0,weight:o*g}}),s=(0,rj.quadtree)(a,function(u){return u.x},function(u){return u.y}).visitAfter(ij);return a.forEach(function(u){(function(c,l){l.visit(function(h,d,f,p,g){return oj(h,d,f,p,g,c)})})(u,s)}),a.map(function(u,c){var l=n[e[c].id].data.layout.force.mass,h=l===void 0?1:l;i[2*c]=u.vx/h,i[2*c+1]=u.vy/h}),i};var oj=function(e,n,t,r,i,o){var a=o.x-e.x||.1,s=o.y-e.y||.1,u=r-n,c=a*a+s*s,l=Math.sqrt(c)*c;if(u*u*.81<c){var h=e.weight/l;return o.vx+=a*h,o.vy+=s*h,!0}if(e.length)return!1;e.data!==o&&(h=e.data.weight/l,o.vx+=a*h,o.vy+=s*h)},aj=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ai=Ee&&Ee.__assign||function(){return Ai=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Ai.apply(this,arguments)};Object.defineProperty(pl,"__esModule",{value:!0}),pl.Force2Layout=void 0;var sj=Nn,er=Cn(),uj=yf,ym=function(e,n){return e?(0,er.isNumber)(e)?function(t){return e}:e:function(t){return n}},cj=function(e){function n(t){var r=e.call(this)||this;r.maxIteration=1e3,r.workerEnabled=!1,r.edgeStrength=200,r.nodeStrength=1e3,r.coulombDisScale=.005,r.damping=.9,r.maxSpeed=500,r.minMovement=.4,r.interval=.02,r.factor=1,r.linkDistance=200,r.gravity=0,r.clusterNodeStrength=20,r.preventOverlap=!0,r.distanceThresholdMode="mean",r.tick=function(){},r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.judgingDistance=0,r.centripetalOptions={leaf:2,single:2,others:1,center:function(o){return{x:r.width/2,y:r.height/2}}};var i=t.getMass;return r.propsGetMass=i,r.updateCfg(t),r}return aj(n,e),n.prototype.getCentripetalOptions=function(){var t,r=this,i=r.leafCluster,o=r.clustering,a=r.nodeClusterBy,s=r.nodes,u=r.nodeMap,c=r.clusterNodeStrength,l=function(b){return typeof c=="function"?c(b):c},h={};if(i){t=this.getSameTypeLeafMap()||{};var d=Array.from(new Set(s==null?void 0:s.map(function(b){return b[a]})))||[];h={single:100,leaf:function(b,x,w){var E=t[b.id]||{},S=E.relativeLeafNodes,M=E.sameTypeLeafNodes;return(M==null?void 0:M.length)===(S==null?void 0:S.length)||(d==null?void 0:d.length)===1?1:l(b)},others:1,center:function(b,x,w){var E,S,M=(((E=b.data)===null||E===void 0?void 0:E.layout)||{}).degree;if(!M)return{x:100,y:100};if(M===1){var k=(t[b.id]||{}).sameTypeLeafNodes,_=k===void 0?[]:k;_.length===1?S=void 0:_.length>1&&(S=(0,er.getAvgNodePosition)(_))}else S=void 0;return{x:S==null?void 0:S.x,y:S==null?void 0:S.y}}}}if(o){t||(t=this.getSameTypeLeafMap());var f=Array.from(new Set(s.map(function(b,x){return b[a]}))).filter(function(b){return b!==void 0}),p={};f.forEach(function(b){var x=s.filter(function(w){return w[a]===b}).map(function(w){return u[w.id]});p[b]=(0,er.getAvgNodePosition)(x)}),h={single:function(b){return l(b)},leaf:function(b){return l(b)},others:function(b){return l(b)},center:function(b,x,w){var E=p[b[a]];return{x:E==null?void 0:E.x,y:E==null?void 0:E.y}}}}this.centripetalOptions=Ai(Ai({},this.centripetalOptions),h);var g=this.centripetalOptions,v=g.leaf,m=g.single,y=g.others;v&&typeof v!="function"&&(this.centripetalOptions.leaf=function(){return v}),m&&typeof m!="function"&&(this.centripetalOptions.single=function(){return m}),y&&typeof y!="function"&&(this.centripetalOptions.others=function(){return y})},n.prototype.updateCfg=function(t){t&&Object.assign(this,t)},n.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},n.prototype.execute=function(){var t=this;t.stop();var r=t.nodes,i=t.edges,o=t.defSpringLen;if(t.judgingDistance=0,r&&r.length!==0){t.width||typeof window=="undefined"||(t.width=window.innerWidth),t.height||typeof window=="undefined"||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var a=t.center;if(r.length===1)return r[0].x=a[0],r[0].y=a[1],void t.onLayoutEnd([Ai({},r[0])]);t.degreesMap=(0,er.getDegreeMap)(r,i),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=function(f){var p=1;(0,er.isNumber)(f.mass)&&(p=f.mass);var g=t.degreesMap[f.id].all;return!g||g<5?p:5*g*p};var s,u=t.nodeSize;if(t.preventOverlap){var c,l=t.nodeSpacing;c=(0,er.isNumber)(l)?function(){return l}:(0,er.isFunction)(l)?l:function(){return 0},s=u?(0,er.isArray)(u)?function(f){return Math.max(u[0],u[1])+c(f)}:function(f){return u+c(f)}:function(f){return f.size?(0,er.isArray)(f.size)?Math.max(f.size[0],f.size[1])+c(f):(0,er.isObject)(f.size)?Math.max(f.size.width,f.size.height)+c(f):f.size+c(f):10+c(f)}}t.nodeSize=s,t.linkDistance=ym(t.linkDistance,1),t.nodeStrength=ym(t.nodeStrength,1),t.edgeStrength=ym(t.edgeStrength,1);var h={},d={};r.forEach(function(f,p){(0,er.isNumber)(f.x)||(f.x=Math.random()*t.width),(0,er.isNumber)(f.y)||(f.y=Math.random()*t.height);var g=t.degreesMap[f.id];h[f.id]=Ai(Ai({},f),{data:Ai(Ai({},f.data),{size:t.nodeSize(f)||30,layout:{inDegree:g.in,outDegree:g.out,degree:g.all,tDegree:g.in,sDegree:g.out,force:{mass:t.getMass(f),nodeStrength:t.nodeStrength(f,i)}}})}),d[f.id]=p}),t.nodeMap=h,t.nodeIdxMap=d,t.edgeInfos=[],i==null||i.forEach(function(f){var p=h[f.source],g=h[f.target];p&&g?t.edgeInfos.push({edgeStrength:t.edgeStrength(f),linkDistance:o?o(Ai(Ai({},f),{source:p,target:g}),p,g):t.linkDistance(f,p,g)||1+(u(p)+u(p)||0)/2}):elf.edgeInfos.push({})}),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||function(){},t.run()}else t.onLayoutEnd([])},n.prototype.run=function(){var t=this,r=t.maxIteration,i=t.nodes,o=t.edges,a=t.workerEnabled,s=t.minMovement,u=t.animate,c=t.nodeMap,l=t.height;if(t.currentMinY=0,t.currentMaxY=l,i){var h=[];if(i.forEach(function(v,m){h[2*m]=0,h[2*m+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var d={};o.forEach(function(v){var m=v.source,y=v.target;d[m]=d[m]||[],d[m].push(v),d[y]=d[y]||[],d[y].push(v)}),this.relatedEdges=d}var f=r;if(a||!u){for(var p=0;(t.judgingDistance>s||p<1)&&p<f;p++)t.runOneStep(p,h);t.onLayoutEnd(Object.values(c))}else{if(typeof window=="undefined")return;var g=0;this.timeInterval=window.setInterval(function(){i&&(t.runOneStep(g,h),(++g>=f||t.judgingDistance<s)&&(t.onLayoutEnd(Object.values(c)),window.clearInterval(t.timeInterval)))},0)}}},n.prototype.runOneStep=function(t,r){var i,o=this,a=o.nodes,s=o.edges;o.nodeMap;var u=o.monitor,c=[];if(a!=null&&a.length){o.calRepulsive(c),s&&o.calAttractive(c),o.calGravity(c),o.attractToSide(c);var l=o.interval;o.updateVelocity(c,r,l),o.updatePosition(r,l),(i=o.tick)===null||i===void 0||i.call(o),u&&u({energy:this.calTotalEnergy(c),nodes:a,edges:s,iterations:t})}},n.prototype.calTotalEnergy=function(t){var r=this.nodes,i=this.nodeMap;if(!(r!=null&&r.length))return 0;var o=0;return r.forEach(function(a,s){var u=t[2*s],c=t[2*s+1],l=u*u+c*c,h=i[a.id].data.layout.force.mass;o+=(h===void 0?1:h)*l*.5}),o},n.prototype.calRepulsive=function(t){var r=this,i=r.nodes,o=r.nodeMap,a=r.factor,s=r.coulombDisScale;r.nodeSize,(0,uj.forceNBody)(i,o,a,s*s,t)},n.prototype.calAttractive=function(t){var r=this,i=r.edges,o=r.nodeMap,a=r.nodeIdxMap,s=r.edgeInfos;r.nodeSize,i.forEach(function(u,c){var l=(0,er.getEdgeTerminal)(u,"source"),h=(0,er.getEdgeTerminal)(u,"target"),d=o[l],f=o[h];if(d&&f){var p=f.x-d.x,g=f.y-d.y;p||g||(p=.01*Math.random(),g=.01*Math.random());var v=Math.sqrt(p*p+g*g),m=p/v,y=g/v,b=s[c]||{},x=b.linkDistance,w=x===void 0?200:x,E=b.edgeStrength,S=(w-v)*(E===void 0?200:E),M=1/(d.data.layout.force.mass||1),k=1/(f.data.layout.force.mass||1),_=m*S,C=y*S,T=2*a[l],A=2*a[h];t[T]-=_*M,t[T+1]-=C*M,t[A]+=_*k,t[A+1]+=C*k}})},n.prototype.calGravity=function(t){var r,i=this,o=i.nodes,a=i.edges,s=a===void 0?[]:a,u=i.nodeMap,c=i.width,l=i.height,h=i.center,d=i.gravity,f=i.degreesMap,p=i.centripetalOptions;if(o)for(var g=o.length,v=0;v<g;v++){var m=2*v,y=u[o[v].id],b=y.data.layout.force.mass,x=b===void 0?1:b,w=0,E=0,S=d,M=f[y.id],k=M.in,_=M.out,C=M.all,T=(r=i.getCenter)===null||r===void 0?void 0:r.call(i,y,C);if(T){var A=T[0],D=T[1],R=T[2];w=y.x-A,E=y.y-D,S=R}else w=y.x-h[0],E=y.y-h[1];if(S&&(t[m]-=S*w/x,t[m+1]-=S*E/x),p){var B=p.leaf,F=p.single,N=p.others,L=p.center,z=(L==null?void 0:L(y,o,s,c,l))||{x:0,y:0,centerStrength:0},Z=z.x,ne=z.y,J=z.centerStrength;if(!(0,er.isNumber)(Z)||!(0,er.isNumber)(ne))continue;var q=(y.x-Z)/x,ie=(y.y-ne)/x;if(J&&(t[m]-=J*q,t[m+1]-=J*ie),C===0){var Me=F(y);if(!Me)continue;t[m]-=Me*q,t[m+1]-=Me*ie;continue}if(k===0||_===0){var me=B(y,o,s);if(!me)continue;t[m]-=me*q,t[m+1]-=me*ie;continue}var ke=N(y);if(!ke)continue;t[m]-=ke*q,t[m+1]-=ke*ie}}},n.prototype.attractToSide=function(t){var r=this,i=r.defSideCoe;r.height;var o=r.nodes,a=r.relatedEdges,s=r.currentMinY,u=s===void 0?0:s,c=r.currentMaxY,l=c===void 0?this.height:c;i&&typeof i=="function"&&(o!=null&&o.length)&&o.forEach(function(h,d){var f=i(h,a[h.id]||[]);if(f!==0){var p=f<0?u:l,g=Math.abs(f);t[2*d+1]-=g*(h.y-p)}})},n.prototype.updateVelocity=function(t,r,i){var o=this,a=o.nodes,s=o.damping,u=o.maxSpeed;a!=null&&a.length&&a.forEach(function(c,l){var h=(r[2*l]+t[2*l]*i)*s||.01,d=(r[2*l+1]+t[2*l+1]*i)*s||.01,f=Math.sqrt(h*h+d*d);if(f>u){var p=u/f;h*=p,d*=p}r[2*l]=h,r[2*l+1]=d})},n.prototype.updatePosition=function(t,r){var i=this,o=i.nodes,a=i.distanceThresholdMode,s=i.nodeMap;if(o!=null&&o.length){var u=0;a==="max"?i.judgingDistance=-1/0:a==="min"&&(i.judgingDistance=1/0);var c=1/0,l=-1/0;o.forEach(function(h,d){var f=s[h.id];if((0,er.isNumber)(h.fx)&&(0,er.isNumber)(h.fy))return h.x=h.fx,h.y=h.fy,f.x=h.x,void(f.y=h.y);var p=t[2*d]*r,g=t[2*d+1]*r;h.x+=p,h.y+=g,f.x=h.x,f.y=h.y,h.y<c&&(c=h.y),h.y>l&&(l=h.y);var v=Math.sqrt(p*p+g*g);switch(a){case"max":i.judgingDistance<v&&(i.judgingDistance=v);break;case"min":i.judgingDistance>v&&(i.judgingDistance=v);break;default:u+=v}}),this.currentMinY=c,this.currentMaxY=l,a&&a!=="mean"||(i.judgingDistance=u/o.length)}else this.judgingDistance=0},n.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},n.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},n.prototype.getType=function(){return"force2"},n.prototype.getSameTypeLeafMap=function(){var t=this,r=t.nodeClusterBy,i=t.nodes,o=t.edges,a=t.nodeMap,s=t.degreesMap;if(i!=null&&i.length){var u={};return i.forEach(function(c,l){s[c.id].all===1&&(u[c.id]=(0,er.getCoreNodeAndRelativeLeafNodes)("leaf",c,o,r,s,a))}),u}},n}(sj.Base);pl.Force2Layout=cj;var bm={},xf={};function tr(e){return function(){return e}}function ba(e){return 1e-6*(e()-.5)}function lj(e){return e.x+e.vx}function hj(e){return e.y+e.vy}function dj(e){return e.index}function hk(e,n){var t=e.get(n);if(!t)throw new Error("node not found: "+n);return t}var fj={value:()=>{}};function dk(){for(var e,n=0,t=arguments.length,r={};n<t;++n){if(!(e=arguments[n]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new wf(r)}function wf(e){this._=e}function pj(e,n){for(var t,r=0,i=e.length;r<i;++r)if((t=e[r]).name===n)return t.value}function fk(e,n,t){for(var r=0,i=e.length;r<i;++r)if(e[r].name===n){e[r]=fj,e=e.slice(0,r).concat(e.slice(r+1));break}return t!=null&&e.push({name:n,value:t}),e}wf.prototype=dk.prototype={constructor:wf,on:function(e,n){var t,r=this._,i=function(s,u){return s.trim().split(/^|\s+/).map(function(c){var l="",h=c.indexOf(".");if(h>=0&&(l=c.slice(h+1),c=c.slice(0,h)),c&&!u.hasOwnProperty(c))throw new Error("unknown type: "+c);return{type:c,name:l}})}(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(t=(e=i[o]).type)r[t]=fk(r[t],e.name,n);else if(n==null)for(t in r)r[t]=fk(r[t],e.name,null);return this}for(;++o<a;)if((t=(e=i[o]).type)&&(t=pj(r[t],e.name)))return t},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new wf(e)},call:function(e,n){if((t=arguments.length-2)>0)for(var t,r,i=new Array(t),o=0;o<t;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,t=(r=this._[e]).length;o<t;++o)r[o].value.apply(n,i)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(n,t)}};var Ef,gl,Eu=0,vl=0,ml=0,Sf=0,us=0,Mf=0,yl=typeof performance=="object"&&performance.now?performance:Date,pk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gk(){return us||(pk(gj),us=yl.now()+Mf)}function gj(){us=0}function xm(){this._call=this._time=this._next=null}function vk(e,n,t){var r=new xm;return r.restart(e,n,t),r}function mk(){us=(Sf=yl.now())+Mf,Eu=vl=0;try{(function(){gk(),++Eu;for(var e,n=Ef;n;)(e=us-n._time)>=0&&n._call.call(null,e),n=n._next;--Eu})()}finally{Eu=0,function(){for(var e,n,t=Ef,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ef=n);gl=e,wm(r)}(),us=0}}function vj(){var e=yl.now(),n=e-Sf;n>1e3&&(Mf-=n,Sf=e)}function wm(e){Eu||(vl&&(vl=clearTimeout(vl)),e-us>24?(e<1/0&&(vl=setTimeout(mk,e-yl.now()-Mf)),ml&&(ml=clearInterval(ml))):(ml||(Sf=yl.now(),ml=setInterval(vj,1e3)),Eu=1,pk(mk)))}xm.prototype=vk.prototype={constructor:xm,restart:function(e,n,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?gk():+t)+(n==null?0:+n),this._next||gl===this||(gl?gl._next=this:Ef=this,gl=this),this._call=e,this._time=t,wm()},stop:function(){this._call&&(this._call=null,this._time=1/0,wm())}};const yk=4294967296;function mj(e){return e.x}function yj(e){return e.y}var bj=Math.PI*(3-Math.sqrt(5));const xj=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:function(e,n){var t,r=1;function i(){var o,a,s=t.length,u=0,c=0;for(o=0;o<s;++o)u+=(a=t[o]).x,c+=a.y;for(u=(u/s-e)*r,c=(c/s-n)*r,o=0;o<s;++o)(a=t[o]).x-=u,a.y-=c}return e==null&&(e=0),n==null&&(n=0),i.initialize=function(o){t=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(n=+o,i):n},i.strength=function(o){return arguments.length?(r=+o,i):r},i},forceCollide:function(e){var n,t,r,i=1,o=1;function a(){for(var c,l,h,d,f,p,g,v=n.length,m=0;m<o;++m)for(l=bf(n,lj,hj).visitAfter(s),c=0;c<v;++c)h=n[c],p=t[h.index],g=p*p,d=h.x+h.vx,f=h.y+h.vy,l.visit(y);function y(b,x,w,E,S){var M=b.data,k=b.r,_=p+k;if(!M)return x>d+_||E<d-_||w>f+_||S<f-_;if(M.index>h.index){var C=d-M.x-M.vx,T=f-M.y-M.vy,A=C*C+T*T;A<_*_&&(C===0&&(A+=(C=ba(r))*C),T===0&&(A+=(T=ba(r))*T),A=(_-(A=Math.sqrt(A)))/A*i,h.vx+=(C*=A)*(_=(k*=k)/(g+k)),h.vy+=(T*=A)*_,M.vx-=C*(_=1-_),M.vy-=T*_)}}}function s(c){if(c.data)return c.r=t[c.data.index];for(var l=c.r=0;l<4;++l)c[l]&&c[l].r>c.r&&(c.r=c[l].r)}function u(){if(n){var c,l,h=n.length;for(t=new Array(h),c=0;c<h;++c)l=n[c],t[l.index]=+e(l,c,n)}}return typeof e!="function"&&(e=tr(e==null?1:+e)),a.initialize=function(c,l){n=c,r=l,u()},a.iterations=function(c){return arguments.length?(o=+c,a):o},a.strength=function(c){return arguments.length?(i=+c,a):i},a.radius=function(c){return arguments.length?(e=typeof c=="function"?c:tr(+c),u(),a):e},a},forceLink:function(e){var n,t,r,i,o,a,s=dj,u=function(g){return 1/Math.min(i[g.source.index],i[g.target.index])},c=tr(30),l=1;function h(g){for(var v=0,m=e.length;v<l;++v)for(var y,b,x,w,E,S,M,k=0;k<m;++k)b=(y=e[k]).source,w=(x=y.target).x+x.vx-b.x-b.vx||ba(a),E=x.y+x.vy-b.y-b.vy||ba(a),w*=S=((S=Math.sqrt(w*w+E*E))-t[k])/S*g*n[k],E*=S,x.vx-=w*(M=o[k]),x.vy-=E*M,b.vx+=w*(M=1-M),b.vy+=E*M}function d(){if(r){var g,v,m=r.length,y=e.length,b=new Map(r.map((x,w)=>[s(x,w,r),x]));for(g=0,i=new Array(m);g<y;++g)(v=e[g]).index=g,typeof v.source!="object"&&(v.source=hk(b,v.source)),typeof v.target!="object"&&(v.target=hk(b,v.target)),i[v.source.index]=(i[v.source.index]||0)+1,i[v.target.index]=(i[v.target.index]||0)+1;for(g=0,o=new Array(y);g<y;++g)v=e[g],o[g]=i[v.source.index]/(i[v.source.index]+i[v.target.index]);n=new Array(y),f(),t=new Array(y),p()}}function f(){if(r)for(var g=0,v=e.length;g<v;++g)n[g]=+u(e[g],g,e)}function p(){if(r)for(var g=0,v=e.length;g<v;++g)t[g]=+c(e[g],g,e)}return e==null&&(e=[]),h.initialize=function(g,v){r=g,a=v,d()},h.links=function(g){return arguments.length?(e=g,d(),h):e},h.id=function(g){return arguments.length?(s=g,h):s},h.iterations=function(g){return arguments.length?(l=+g,h):l},h.strength=function(g){return arguments.length?(u=typeof g=="function"?g:tr(+g),f(),h):u},h.distance=function(g){return arguments.length?(c=typeof g=="function"?g:tr(+g),p(),h):c},h},forceManyBody:function(){var e,n,t,r,i,o=tr(-30),a=1,s=1/0,u=.81;function c(f){var p,g=e.length,v=bf(e,mj,yj).visitAfter(h);for(r=f,p=0;p<g;++p)n=e[p],v.visit(d)}function l(){if(e){var f,p,g=e.length;for(i=new Array(g),f=0;f<g;++f)p=e[f],i[p.index]=+o(p,f,e)}}function h(f){var p,g,v,m,y,b=0,x=0;if(f.length){for(v=m=y=0;y<4;++y)(p=f[y])&&(g=Math.abs(p.value))&&(b+=p.value,x+=g,v+=g*p.x,m+=g*p.y);f.x=v/x,f.y=m/x}else{(p=f).x=p.data.x,p.y=p.data.y;do b+=i[p.data.index];while(p=p.next)}f.value=b}function d(f,p,g,v){if(!f.value)return!0;var m=f.x-n.x,y=f.y-n.y,b=v-p,x=m*m+y*y;if(b*b/u<x)return x<s&&(m===0&&(x+=(m=ba(t))*m),y===0&&(x+=(y=ba(t))*y),x<a&&(x=Math.sqrt(a*x)),n.vx+=m*f.value*r/x,n.vy+=y*f.value*r/x),!0;if(!(f.length||x>=s)){(f.data!==n||f.next)&&(m===0&&(x+=(m=ba(t))*m),y===0&&(x+=(y=ba(t))*y),x<a&&(x=Math.sqrt(a*x)));do f.data!==n&&(b=i[f.data.index]*r/x,n.vx+=m*b,n.vy+=y*b);while(f=f.next)}}return c.initialize=function(f,p){e=f,t=p,l()},c.strength=function(f){return arguments.length?(o=typeof f=="function"?f:tr(+f),l(),c):o},c.distanceMin=function(f){return arguments.length?(a=f*f,c):Math.sqrt(a)},c.distanceMax=function(f){return arguments.length?(s=f*f,c):Math.sqrt(s)},c.theta=function(f){return arguments.length?(u=f*f,c):Math.sqrt(u)},c},forceRadial:function(e,n,t){var r,i,o,a=tr(.1);function s(c){for(var l=0,h=r.length;l<h;++l){var d=r[l],f=d.x-n||1e-6,p=d.y-t||1e-6,g=Math.sqrt(f*f+p*p),v=(o[l]-g)*i[l]*c/g;d.vx+=f*v,d.vy+=p*v}}function u(){if(r){var c,l=r.length;for(i=new Array(l),o=new Array(l),c=0;c<l;++c)o[c]=+e(r[c],c,r),i[c]=isNaN(o[c])?0:+a(r[c],c,r)}}return typeof e!="function"&&(e=tr(+e)),n==null&&(n=0),t==null&&(t=0),s.initialize=function(c){r=c,u()},s.strength=function(c){return arguments.length?(a=typeof c=="function"?c:tr(+c),u(),s):a},s.radius=function(c){return arguments.length?(e=typeof c=="function"?c:tr(+c),u(),s):e},s.x=function(c){return arguments.length?(n=+c,s):n},s.y=function(c){return arguments.length?(t=+c,s):t},s},forceSimulation:function(e){var n,t=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=vk(h),c=dk("tick","end"),l=function(){let g=1;return()=>(g=(1664525*g+1013904223)%yk)/yk}();function h(){d(),c.call("tick",n),t<r&&(u.stop(),c.call("end",n))}function d(g){var v,m,y=e.length;g===void 0&&(g=1);for(var b=0;b<g;++b)for(t+=(o-t)*i,s.forEach(function(x){x(t)}),v=0;v<y;++v)(m=e[v]).fx==null?m.x+=m.vx*=a:(m.x=m.fx,m.vx=0),m.fy==null?m.y+=m.vy*=a:(m.y=m.fy,m.vy=0);return n}function f(){for(var g,v=0,m=e.length;v<m;++v){if((g=e[v]).index=v,g.fx!=null&&(g.x=g.fx),g.fy!=null&&(g.y=g.fy),isNaN(g.x)||isNaN(g.y)){var y=10*Math.sqrt(.5+v),b=v*bj;g.x=y*Math.cos(b),g.y=y*Math.sin(b)}(isNaN(g.vx)||isNaN(g.vy))&&(g.vx=g.vy=0)}}function p(g){return g.initialize&&g.initialize(e,l),g}return e==null&&(e=[]),f(),n={tick:d,restart:function(){return u.restart(h),n},stop:function(){return u.stop(),n},nodes:function(g){return arguments.length?(e=g,f(),s.forEach(p),n):e},alpha:function(g){return arguments.length?(t=+g,n):t},alphaMin:function(g){return arguments.length?(r=+g,n):r},alphaDecay:function(g){return arguments.length?(i=+g,n):+i},alphaTarget:function(g){return arguments.length?(o=+g,n):o},velocityDecay:function(g){return arguments.length?(a=1-g,n):1-a},randomSource:function(g){return arguments.length?(l=g,s.forEach(p),n):l},force:function(g,v){return arguments.length>1?(v==null?s.delete(g):s.set(g,p(v)),n):s.get(g)},find:function(g,v,m){var y,b,x,w,E,S=0,M=e.length;for(m==null?m=1/0:m*=m,S=0;S<M;++S)(x=(y=g-(w=e[S]).x)*y+(b=v-w.y)*b)<m&&(E=w,m=x);return E},on:function(g,v){return arguments.length>1?(c.on(g,v),n):c.on(g)}}},forceX:function(e){var n,t,r,i=tr(.1);function o(s){for(var u,c=0,l=n.length;c<l;++c)(u=n[c]).vx+=(r[c]-u.x)*t[c]*s}function a(){if(n){var s,u=n.length;for(t=new Array(u),r=new Array(u),s=0;s<u;++s)t[s]=isNaN(r[s]=+e(n[s],s,n))?0:+i(n[s],s,n)}}return typeof e!="function"&&(e=tr(e==null?0:+e)),o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(i=typeof s=="function"?s:tr(+s),a(),o):i},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:tr(+s),a(),o):e},o},forceY:function(e){var n,t,r,i=tr(.1);function o(s){for(var u,c=0,l=n.length;c<l;++c)(u=n[c]).vy+=(r[c]-u.y)*t[c]*s}function a(){if(n){var s,u=n.length;for(t=new Array(u),r=new Array(u),s=0;s<u;++s)t[s]=isNaN(r[s]=+e(n[s],s,n))?0:+i(n[s],s,n)}}return typeof e!="function"&&(e=tr(e==null?0:+e)),o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(i=typeof s=="function"?s:tr(+s),a(),o):i},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:tr(+s),a(),o):e},o}},Symbol.toStringTag,{value:"Module"})),Em=Ao(xj);var Sm={},wj=Ee&&Ee.__createBinding||(Object.create?function(e,n,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(n,t);i&&!("get"in i?!n.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,i)}:function(e,n,t,r){r===void 0&&(r=t),e[r]=n[t]}),Ej=Ee&&Ee.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),Sj=Ee&&Ee.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&wj(n,e,t);return Ej(n,e),n};Object.defineProperty(Sm,"__esModule",{value:!0});var Su=Sj(Em),_f=Cn();Sm.default=function(){function e(w){return function(){return w}}var n,t=function(w){return w.cluster},r=e(1),i=e(-1),o=e(100),a=e(.1),s=[0,0],u=[],c={},l=[],h=100,d=100,f={none:{x:0,y:0}},p=[],g="force",v=!0,m=.1;function y(w){if(!v)return y;n.tick(),x();for(var E=0,S=u.length,M=void 0,k=w*m;E<S;++E)(M=u[E]).vx+=(f[t(M)].x-M.x)*k,M.vy+=(f[t(M)].y-M.y)*k}function b(){u&&function(){if(!(!u||!u.length)){if(t(u[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var w=(E=[],S=[],M={},k={},_=[],k=function(C){var T={};return C.forEach(function(A){var D=t(A);T[D]||(T[D]={count:0,sumforceNodeSize:0})}),C.forEach(function(A){var D=t(A),R=r(A),B=T[D];B.count=B.count+1,B.sumforceNodeSize=B.sumforceNodeSize+Math.PI*(R*R)*1.3,T[D]=B}),T}(u),_=function(C){var T={},A=[];return C.forEach(function(D){var R=function(F){var N=(0,_f.getEdgeTerminal)(F,"source"),L=(0,_f.getEdgeTerminal)(F,"target"),z=t(c[N]),Z=t(c[L]);return z<=Z?"".concat(z,"~").concat(Z):"".concat(Z,"~").concat(z)}(D),B=0;T[R]!==void 0&&(B=T[R]),B+=1,T[R]=B}),Object.entries(T).forEach(function(D){var R=D[0],B=D[1],F=R.split("~")[0],N=R.split("~")[1];F!==void 0&&N!==void 0&&A.push({source:F,target:N,count:B})}),A}(l),Object.keys(k).forEach(function(C,T){var A=k[C];E.push({id:C,size:A.count,r:Math.sqrt(A.sumforceNodeSize/Math.PI)}),M[C]=T}),_.forEach(function(C){var T=(0,_f.getEdgeTerminal)(C,"source"),A=(0,_f.getEdgeTerminal)(C,"target"),D=M[T],R=M[A];D!==void 0&&R!==void 0&&S.push({source:D,target:R,count:C.count})}),{nodes:E,links:S}),E,S,M,k,_;n=Su.forceSimulation(w.nodes).force("x",Su.forceX(h).strength(.1)).force("y",Su.forceY(d).strength(.1)).force("collide",Su.forceCollide(function(C){return C.r}).iterations(4)).force("charge",Su.forceManyBody().strength(i)).force("links",Su.forceLink(w.nodes.length?w.links:[]).distance(o).strength(a)),p=n.nodes(),x()}}()}function x(){return f={none:{x:0,y:0}},p.forEach(function(w){f[w.id]={x:w.x-s[0],y:w.y-s[1]}}),f}return y.initialize=function(w){u=w,b()},y.template=function(w){return arguments.length?(g=w,b(),y):g},y.groupBy=function(w){return arguments.length?typeof w=="string"?(t=function(E){return E[w]},y):(t=w,y):t},y.enableGrouping=function(w){return arguments.length?(v=w,y):v},y.strength=function(w){return arguments.length?(m=w,y):m},y.centerX=function(w){return arguments.length?(h=w,y):h},y.centerY=function(w){return arguments.length?(d=w,y):d},y.nodes=function(w){return arguments.length?(function(E){c={},E.forEach(function(S){c[S.id]=S})}(w||[]),u=w||[],y):u},y.links=function(w){return arguments.length?(l=w||[],b(),y):l},y.forceNodeSize=function(w){return arguments.length?(r=typeof w=="function"?w:e(+w),b(),y):r},y.nodeSize=y.forceNodeSize,y.forceCharge=function(w){return arguments.length?(i=typeof w=="function"?w:e(+w),b(),y):i},y.forceLinkDistance=function(w){return arguments.length?(o=typeof w=="function"?w:e(+w),b(),y):o},y.forceLinkStrength=function(w){return arguments.length?(a=typeof w=="function"?w:e(+w),b(),y):a},y.offset=function(w){return arguments.length?(s=w,y):s},y.getFocis=x,y};var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.FORCE_LAYOUT_TYPE_MAP=Bo.LAYOUT_MESSAGE=void 0,Bo.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},Bo.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};var Mj=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_j=Ee&&Ee.__createBinding||(Object.create?function(e,n,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(n,t);i&&!("get"in i?!n.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,i)}:function(e,n,t,r){r===void 0&&(r=t),e[r]=n[t]}),kj=Ee&&Ee.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),Cj=Ee&&Ee.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&_j(n,e,t);return kj(n,e),n},Aj=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xf,"__esModule",{value:!0}),xf.ForceLayout=void 0;var Mu=Cj(Em),Ij=Aj(Sm),cs=Cn(),Tj=Bo,Oj=function(e){function n(t){var r=e.call(this)||this;return r.center=[0,0],r.nodeStrength=null,r.edgeStrength=null,r.preventOverlap=!1,r.clusterNodeStrength=null,r.clusterEdgeStrength=null,r.clusterEdgeDistance=null,r.clusterNodeSize=null,r.clusterFociStrength=null,r.linkDistance=50,r.alphaDecay=.028,r.alphaMin=.001,r.alpha=.3,r.collideStrength=1,r.workerEnabled=!1,r.tick=function(){},r.onLayoutEnd=function(){},r.ticking=void 0,t&&r.updateCfg(t),r}return Mj(n,e),n.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},n.prototype.init=function(t){var r=this;r.nodes=t.nodes||[];var i=t.edges||[];r.edges=i.map(function(o){var a={},s=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(o).forEach(function(u){s.indexOf(u)>-1||(a[u]=o[u])}),a}),r.ticking=!1},n.prototype.execute=function(t){var r=this,i=r.nodes,o=r.edges;if(!r.ticking){var a=r.forceSimulation,s=r.alphaMin,u=r.alphaDecay,c=r.alpha;if(a)t&&(r.clustering&&r.clusterForce&&(r.clusterForce.nodes(i),r.clusterForce.links(o)),a.nodes(i),o&&r.edgeForce?r.edgeForce.links(o):o&&!r.edgeForce&&(d=Mu.forceLink().id(function(g){return g.id}).links(o),r.edgeStrength&&d.strength(r.edgeStrength),r.linkDistance&&d.distance(r.linkDistance),r.edgeForce=d,a.force("link",d))),r.preventOverlap&&r.overlapProcess(a),a.alpha(c).restart(),this.ticking=!0;else try{var l=Mu.forceManyBody();if(r.nodeStrength&&l.strength(r.nodeStrength),a=Mu.forceSimulation().nodes(i),r.clustering){var h=(0,Ij.default)();h.centerX(r.center[0]).centerY(r.center[1]).template("force").strength(r.clusterFociStrength),o&&h.links(o),i&&h.nodes(i),h.forceLinkDistance(r.clusterEdgeDistance).forceLinkStrength(r.clusterEdgeStrength).forceCharge(r.clusterNodeStrength).forceNodeSize(r.clusterNodeSize),r.clusterForce=h,a.force("group",h)}if(a.force("center",Mu.forceCenter(r.center[0],r.center[1])).force("charge",l).alpha(c).alphaDecay(u).alphaMin(s),r.preventOverlap&&r.overlapProcess(a),o){var d=Mu.forceLink().id(function(g){return g.id}).links(o);r.edgeStrength&&d.strength(r.edgeStrength),r.linkDistance&&d.distance(r.linkDistance),r.edgeForce=d,a.force("link",d)}if(r.workerEnabled&&!Nj()&&(r.workerEnabled=!1),r.workerEnabled){a.stop();for(var f=function(g){var v=g.alphaMin(),m=g.alphaTarget(),y=g.alpha(),b=Math.log((v-m)/(y-m))/Math.log(1-g.alphaDecay()),x=Math.ceil(b);return x}(a),p=1;p<=f;p++)a.tick(),postMessage({nodes:i,currentTick:p,totalTicks:f,type:Tj.LAYOUT_MESSAGE.TICK},void 0);r.ticking=!1}else a.on("tick",function(){r.tick()}).on("end",function(){r.ticking=!1,r.onLayoutEnd&&r.onLayoutEnd()}),r.ticking=!0;r.forceSimulation=a,r.ticking=!0}catch(g){r.ticking=!1}}},n.prototype.overlapProcess=function(t){var r,i,o=this,a=o.nodeSize,s=o.nodeSpacing,u=o.collideStrength;if(i=(0,cs.isNumber)(s)?function(){return s}:(0,cs.isFunction)(s)?s:function(){return 0},a)if((0,cs.isFunction)(a))r=function(h){return a(h)+i(h)};else if((0,cs.isArray)(a)){var c=(a[0]>a[1]?a[0]:a[1])/2;r=function(h){return c+i(h)}}else if((0,cs.isNumber)(a)){var l=a/2;r=function(h){return l+i(h)}}else r=function(){return 10};else r=function(h){return h.size?(0,cs.isArray)(h.size)?(h.size[0]>h.size[1]?h.size[0]:h.size[1])/2+i(h):(0,cs.isObject)(h.size)?(h.size.width>h.size.height?h.size.width:h.size.height)/2+i(h):h.size/2+i(h):10+i(h)};t.force("collisionForce",Mu.forceCollide(r).strength(u))},n.prototype.updateCfg=function(t){var r=this;r.ticking&&(r.forceSimulation.stop(),r.ticking=!1),r.forceSimulation=null,Object.assign(r,t)},n.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},n}(Nn.Base);function Nj(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}xf.ForceLayout=Oj,function(e){var n=Ee&&Ee.__createBinding||(Object.create?function(r,i,o,a){a===void 0&&(a=o);var s=Object.getOwnPropertyDescriptor(i,o);s&&!("get"in s?!i.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,a,s)}:function(r,i,o,a){a===void 0&&(a=o),r[a]=i[o]}),t=Ee&&Ee.__exportStar||function(r,i){for(var o in r)o==="default"||Object.prototype.hasOwnProperty.call(i,o)||n(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),t(xf,e)}(bm);var bl={},Pj=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(bl,"__esModule",{value:!0}),bl.CircularLayout=void 0;var Dj=Nn,uo=Cn();function Lj(e,n){var t=e.degree,r=n.degree;return t<r?-1:t>r?1:0}var Bj=function(e){function n(t){var r=e.call(this)||this;return r.radius=null,r.nodeSize=void 0,r.startRadius=null,r.endRadius=null,r.startAngle=0,r.endAngle=2*Math.PI,r.clockwise=!0,r.divisions=1,r.ordering=null,r.angleRatio=1,r.nodes=[],r.edges=[],r.nodeMap={},r.degrees=[],r.width=300,r.height=300,r.updateCfg(t),r}return Pj(n,e),n.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},n.prototype.execute=function(){var t,r=this,i=r.nodes,o=r.edges,a=i.length;if(a!==0){r.width||typeof window=="undefined"||(r.width=window.innerWidth),r.height||typeof window=="undefined"||(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var s=r.center;if(a===1)return i[0].x=s[0],i[0].y=s[1],void(r.onLayoutEnd&&r.onLayoutEnd());var u=r.radius,c=r.startRadius,l=r.endRadius,h=r.divisions,d=r.startAngle,f=r.endAngle,p=r.angleRatio,g=r.ordering,v=r.clockwise,m=r.nodeSpacing,y=r.nodeSize,b=(f-d)/a,x={};i.forEach(function(B,F){x[B.id]=F}),r.nodeMap=x;var w=(0,uo.getDegree)(i.length,x,o);if(r.degrees=w,m){var E=(0,uo.getFuncByUnknownType)(10,m),S=(0,uo.getFuncByUnknownType)(10,y),M=-1/0;i.forEach(function(B){var F=S(B);M<F&&(M=F)});var k=0;i.forEach(function(B,F){k+=F===0?M||10:(E(B)||0)+(M||10)}),u=k/(2*Math.PI)}else u||c||l?!c&&l?c=l:c&&!l&&(l=c):u=r.height>r.width?r.width/2:r.height/2;var _=b*p,C=[];C=g==="topology"?r.topologyOrdering():g==="topology-directed"?r.topologyOrdering(!0):g==="degree"?r.degreeOrdering():i;for(var T=Math.ceil(a/h),A=0;A<a;++A){var D=u;D||c===null||l===null||(D=c+A*(l-c)/(a-1)),D||(D=10+100*A/(a-1));var R=d+A%T*_+2*Math.PI/h*Math.floor(A/T);v||(R=f-A%T*_-2*Math.PI/h*Math.floor(A/T)),C[A].x=s[0]+Math.cos(R)*D,C[A].y=s[1]+Math.sin(R)*D,C[A].weight=w[A].all}return(t=r.onLayoutEnd)===null||t===void 0||t.call(r),{nodes:C,edges:this.edges}}r.onLayoutEnd&&r.onLayoutEnd()},n.prototype.topologyOrdering=function(t){t===void 0&&(t=!1);var r=this,i=r.degrees,o=r.edges,a=r.nodes,s=(0,uo.clone)(a),u=r.nodeMap,c=[s[0]],l=[a[0]],h=[],d=a.length;h[0]=!0,function(p,g,v,m){p.forEach(function(y,b){p[b].children=[],p[b].parent=[]}),m?g.forEach(function(y){var b=(0,uo.getEdgeTerminal)(y,"source"),x=(0,uo.getEdgeTerminal)(y,"target"),w=0;b&&(w=v[b]);var E=0;x&&(E=v[x]);var S=p[w].children,M=p[E].parent;S.push(p[E].id),M.push(p[w].id)}):g.forEach(function(y){var b=(0,uo.getEdgeTerminal)(y,"source"),x=(0,uo.getEdgeTerminal)(y,"target"),w=0;b&&(w=v[b]);var E=0;x&&(E=v[x]);var S=p[w].children,M=p[E].children;S.push(p[E].id),M.push(p[w].id)})}(s,o,u,t);var f=0;return s.forEach(function(p,g){if(g!==0)if(g!==d-1&&i[g].all===i[g+1].all&&!function(w,E,S){for(var M=S.length,k=0;k<M;k++){var _=(0,uo.getEdgeTerminal)(S[k],"source"),C=(0,uo.getEdgeTerminal)(S[k],"target");if(w.id===_&&E.id===C||E.id===_&&w.id===C)return!0}return!1}(c[f],p,o)||h[g]){for(var v=c[f].children,m=!1,y=0;y<v.length;y++){var b=u[v[y]];if(i[b].all===i[g].all&&!h[b]){c.push(s[b]),l.push(a[u[s[b].id]]),h[b]=!0,m=!0;break}}for(var x=0;!m&&(h[x]||(c.push(s[x]),l.push(a[u[s[x].id]]),h[x]=!0,m=!0),++x!==d););}else c.push(p),l.push(a[u[p.id]]),h[g]=!0,f++}),l},n.prototype.degreeOrdering=function(){var t=this.nodes,r=[],i=this.degrees;return t.forEach(function(o,a){o.degree=i[a].all,r.push(o)}),r.sort(Lj),r},n.prototype.getType=function(){return"circular"},n}(Dj.Base);bl.CircularLayout=Bj;var _u={},Mm={},_m={},km={},Cm={},Am={};Object.defineProperty(Am,"__esModule",{value:!0});var ku,Rj=function(e,n){if(e!=="next"&&e!=="prev")return n},bk=function(e){e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev},jj=function(){function e(){var n={};n.prev=n,n.next=n.prev,this.shortcut=n}return e.prototype.dequeue=function(){var n=this.shortcut,t=n.prev;if(t&&t!==n)return bk(t),t},e.prototype.enqueue=function(n){var t=this.shortcut;n.prev&&n.next&&bk(n),n.next=t.next,t.next.prev=n,t.next=n,n.prev=t},e.prototype.toString=function(){for(var n=[],t=this.shortcut,r=t.prev;r!==t;)n.push(JSON.stringify(r,Rj)),r=r==null?void 0:r.prev;return"[".concat(n.join(", "),"]")},e}();function xk(e,n){var t=e.get(n)||0;e.set(n,t+1)}function wk(e,n){var t=e.get(n);t!==void 0&&((t-=1)>0?e.set(n,t):e.delete(n))}function Ek(e,n,t,r){var i=String(n),o=String(t);if(!e&&i>o){var a=i;i=o,o=a}return i+ku.EDGE_KEY_DELIM+o+ku.EDGE_KEY_DELIM+(r===void 0?ku.DEFAULT_EDGE_NAME:r)}function Sk(e,n,t,r){var i=String(n),o=String(t),a={v:n,w:t};if(!e&&i>o){var s=a.v;a.v=a.w,a.w=s}return r!==void 0&&(a.name=r),a}function Im(e,n){return Ek(e,n.v,n.w,n.name)}function Mk(e){return typeof e=="function"}Am.default=jj,function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""}(ku||(ku={}));var zj=function(e){return e.nodes().map(function(n){var t={id:n,value:e.node(n),parent:e.parent(n)};return t.value===void 0&&delete t.value,t.parent===void 0&&delete t.parent,t})},Fj=function(e){return e.edges().map(function(n){var t=e.edge(n),r={v:n.v,w:n.w,value:t,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})};function _k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function kk(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?_k(Object(t),!0).forEach(function(r){Gj(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_k(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Gj(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Yj(e,n,t){return n&&function(r,i){for(var o=0;o<i.length;o++){var a=i[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Xj={compound:!1,multigraph:!1,directed:!0},ls=function(){function e(){var n=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=ku.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return n.directed},this.isMultigraph=function(){return n.multigraph},this.isCompound=function(){return n.compound},this.setGraph=function(i){return n.label=i,n},this.graph=function(){return n.label},this.setDefaultNodeLabel=function(i){return Mk(i)?n.defaultNodeLabelFn=i:n.defaultNodeLabelFn=function(){return i},n},this.nodeCount=function(){return n.nodeCountNum},this.node=function(i){return n.nodesLabelMap.get(i)},this.nodes=function(){return Array.from(n.nodesLabelMap.keys())},this.sources=function(){return n.nodes().filter(function(i){var o;return!(!((o=n.inEdgesMap.get(i))===null||o===void 0)&&o.size)})},this.sinks=function(){return n.nodes().filter(function(i){var o;return!(!((o=n.outEdgesMap.get(i))===null||o===void 0)&&o.size)})},this.setNodes=function(i,o){return i.map(function(a){return n.setNode(a,o)}),n},this.hasNode=function(i){return n.nodesLabelMap.has(i)},this.checkCompound=function(){if(!n.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(i){if(n.isCompound()){var o,a=(o=n.parentMap)===null||o===void 0?void 0:o.get(i);if(a!==n.GRAPH_NODE)return a}},this.removeFromParentsChildList=function(i){var o=n.parentMap.get(i);n.childrenMap.get(o).delete(i)},this.setParent=function(i,o){var a,s;n.checkCompound();for(var u=o===void 0?n.GRAPH_NODE:o,c=n.parent(u);c;){if(i===c)throw new Error("Setting "+o+" as parent of "+i+" would create a cycle");c=n.parent(c)}o&&n.setNode(o),n.setNode(i),n.removeFromParentsChildList(i),(a=n.parentMap)===null||a===void 0||a.set(i,u);var l=n.childrenMap.get(u);return l.set(i,!0),(s=n.childrenMap)===null||s===void 0||s.set(u,l),n},this.children=function(i){var o=i===void 0?n.GRAPH_NODE:i;if(n.isCompound()){var a,s=(a=n.childrenMap)===null||a===void 0?void 0:a.get(o);return s?Array.from(s.keys()):void 0}return o===n.GRAPH_NODE?n.nodes():i&&n.hasNode(i)?[]:void 0},this.predecessors=function(i){var o=n.predecessorsMap.get(i);return o?Array.from(o.keys()):void 0},this.successors=function(i){var o=n.successorsMap.get(i);return o?Array.from(o.keys()):void 0},this.neighbors=function(i){var o;if(n.hasNode(i))return Array.from(new Set((o=n.predecessors(i))===null||o===void 0?void 0:o.concat(n.successors(i))))},this.isLeaf=function(i){var o,a;return n.isDirected()?!(!((a=n.successors(i))===null||a===void 0)&&a.length):!(!((o=n.neighbors(i))===null||o===void 0)&&o.length)},this.filterNodes=function(i){var o=n.directed,a=n.multigraph,s=n.compound,u=new e({directed:o,multigraph:a,compound:s});return u.setGraph(n.graph()),n.nodes().forEach(function(c){i(c)&&u.setNode(c,n.node(c))}),n.edges().forEach(function(c){u.hasNode(c.v)&&u.hasNode(c.w)&&u.setEdgeObj(c,n.edge(c))}),s&&u.nodes().forEach(function(c){u.setParent(c,function(l){for(var h=n.parent(l);h!==void 0&&!u.hasNode(h);)h=n.parent(h);return h}(c))}),u},this.setDefaultEdgeLabel=function(i){return Mk(i)?n.defaultEdgeLabelFn=i:n.defaultEdgeLabelFn=function(){return i},n},this.edgeCount=function(){return n.edgeCountNum},this.setEdgeObj=function(i,o){return n.setEdge(i.v,i.w,o,i.name)},this.setPath=function(i,o){return i.reduce(function(a,s){return n.setEdge(a,s,o),s}),n},this.edgeFromArgs=function(i,o,a){return n.edge({v:i,w:o,name:a})},this.edge=function(i){return n.edgesLabelsMap.get(Im(n.isDirected(),i))},this.hasEdge=function(i,o,a){return n.edgesLabelsMap.has(Im(n.isDirected(),{v:i,w:o,name:a}))},this.removeEdgeObj=function(i){var o=i.v,a=i.w,s=i.name;return n.removeEdge(o,a,s)},this.edges=function(){return Array.from(n.edgesMap.values())},this.inEdges=function(i,o){var a=n.inEdgesMap.get(i);if(a)return Array.from(a.values()).filter(function(s){return!o||s.v===o})},this.outEdges=function(i,o){var a=n.outEdgesMap.get(i);if(a)return Array.from(a.values()).filter(function(s){return!o||s.w===o})},this.nodeEdges=function(i,o){var a;if(n.hasNode(i))return(a=n.inEdges(i,o))===null||a===void 0?void 0:a.concat(n.outEdges(i,o))},this.toJSON=function(){return function(i){var o={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:zj(i),edges:Fj(i),value:i.graph()};return o.value===void 0&&delete o.value,o}(n)},this.nodeInDegree=function(i){var o=n.inEdgesMap.get(i);return o?o.size:0},this.nodeOutDegree=function(i){var o=n.outEdgesMap.get(i);return o?o.size:0},this.nodeDegree=function(i){return n.nodeInDegree(i)+n.nodeOutDegree(i)},this.source=function(i){return i.v},this.target=function(i){return i.w};var r=kk(kk({},Xj),t);this.compound=r.compound,this.directed=r.directed,this.multigraph=r.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return Yj(e,[{key:"setNode",value:function(n,t){var r,i=this.nodesLabelMap,o=this.defaultNodeLabelFn,a=this.isCompound,s=this.parentMap,u=this.childrenMap,c=this.inEdgesMap,l=this.outEdgesMap,h=this.predecessorsMap,d=this.successorsMap;return i.has(n)?(t!==void 0&&i.set(n,t),this):(i.set(n,t||o(n)),a()&&(s==null||s.set(n,this.GRAPH_NODE),u==null||u.set(n,new Map),u!=null&&u.has(this.GRAPH_NODE)||u==null||u.set(this.GRAPH_NODE,new Map),u==null||(r=u.get(this.GRAPH_NODE))===null||r===void 0||r.set(n,!0)),[c,l,h,d].forEach(function(f){return f.set(n,new Map)}),this.nodeCountNum+=1,this)}},{key:"removeNode",value:function(n){var t=this;if(this.hasNode(n)){var r,i,o,a=function(p){t.removeEdge(p.v,p.w,p.name)},s=this.inEdgesMap,u=this.outEdgesMap,c=this.predecessorsMap,l=this.successorsMap,h=this.nodesLabelMap;this.isCompound()&&(this.removeFromParentsChildList(n),(r=this.parentMap)===null||r===void 0||r.delete(n),(i=this.children(n))===null||i===void 0||i.forEach(function(p){return t.setParent(p)}),(o=this.childrenMap)===null||o===void 0||o.delete(n));var d=s.get(n),f=u.get(n);Array.from(d.values()).forEach(function(p){return a(p)}),Array.from(f.values()).forEach(function(p){return a(p)}),h.delete(n),s.delete(n),u.delete(n),c.delete(n),l.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,t,r,i){var o,a,s=Sk(this.isDirected(),n,t,i),u=Im(this.isDirected(),s),c=s.v,l=s.w;if(this.edgesLabelsMap.has(u))return this.edgesLabelsMap.set(u,r),this;if(i!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(l),this.edgesLabelsMap.set(u,r||this.defaultEdgeLabelFn(c,l,i)),Object.freeze(s),this.edgesMap.set(u,s);var h=this.predecessorsMap.get(l),d=this.successorsMap.get(c);return xk(h,c),xk(d,l),(o=this.inEdgesMap.get(l))===null||o===void 0||o.set(u,s),(a=this.outEdgesMap.get(c))===null||a===void 0||a.set(u,s),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,t,r){var i=Ek(this.isDirected(),n,t,r);if(this.edgesMap.get(i)){var o=Sk(this.isDirected(),n,t,r),a=o.v,s=o.w;this.edgesLabelsMap.delete(i),this.edgesMap.delete(i);var u=this.predecessorsMap.get(s),c=this.successorsMap.get(a);wk(u,a),wk(c,s),this.inEdgesMap.get(s).delete(i),this.outEdgesMap.get(a).delete(i),this.edgeCountNum-=1}return this}}]),e}();function Tm(e){return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tm(e)}function Uj(e,n,t){return n&&function(r,i){for(var o=0;o<i.length;o++){var a=i[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cu(){return Cu=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,n,t){var r=function(o,a){for(;!Object.prototype.hasOwnProperty.call(o,a)&&(o=Ro(o))!==null;);return o}(e,n);if(r){var i=Object.getOwnPropertyDescriptor(r,n);return i.get?i.get.call(arguments.length<3?e:t):i.value}},Cu.apply(this,arguments)}function Om(e,n){return Om=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Om(e,n)}function Wj(e){var n=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,r=Ro(e);if(n){var i=Ro(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return function(o,a){if(a&&(Tm(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(o)}(this,t)}}function Ro(e){return Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ro(e)}ls.fromJSON=function(e){var n=new ls(e.options);return e.value!==void 0&&n.setGraph(e.value),e.nodes.forEach(function(t){n.setNode(t.id,t.value),t.parent&&n.setParent(t.id,t.parent)}),e.edges.forEach(function(t){n.setEdge(t.v,t.w,t.value,t.name)}),n};var Vj=function(){(function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Om(t,r)})(n,ls);var e=Wj(n);function n(){var t;(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).eventPool={},t}return Uj(n,[{key:"appendEvent",value:function(t,r){this.eventPool[t]||(this.eventPool[t]=[]),this.eventPool[t].push(r)}},{key:"removeEvent",value:function(t,r){if(this.eventPool[t]){var i=this.eventPool[t].indexOf(r);i>-1&&this.eventPool[t].splice(i,1)}}},{key:"emitEvent",value:function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];this.eventPool[t]&&this.eventPool[t].forEach(function(a){a.apply(void 0,i)})}},{key:"setNode",value:function(t,r){return Cu(Ro(n.prototype),"setNode",this).call(this,t,r),this.emitEvent("nodeAdd",t,r),this}},{key:"removeNode",value:function(t){return Cu(Ro(n.prototype),"removeNode",this).call(this,t),this.emitEvent("nodeRemove",t),this}},{key:"setEdge",value:function(t,r,i,o){return Cu(Ro(n.prototype),"setEdge",this).call(this,t,r,i,o),this.emitEvent("edgeAdd",t,r,i,o),this}},{key:"removeEdge",value:function(t,r,i){return Cu(Ro(n.prototype),"removeEdge",this).call(this,t,r,i),this.emitEvent("edgeRemove",t,r,i),this}}]),n}();function Hj(e,n,t){return Object.defineProperty(e,"prototype",{writable:!1}),e}var Ck=Hj(function e(){var n=this;(function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")})(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return n.arr.length},this.keys=function(){return n.arr.map(function(t){return t.key})},this.has=function(t){return n.keyIndice.has(t)},this.priority=function(t){var r=n.keyIndice.get(t);if(r!==void 0)return n.arr[r].priority},this.swap=function(t,r){var i=n.arr,o=n.keyIndice,a=[i[t],i[r]],s=a[0],u=a[1];i[t]=u,i[r]=s,o.set(s.key,r),o.set(u.key,t)},this.innerDecrease=function(t){for(var r,i=n.arr,o=i[t].priority,a=t;a!==0;){var s;if(((s=i[r=a>>1])===null||s===void 0?void 0:s.priority)<o)break;n.swap(a,r),a=r}},this.heapify=function(t){var r=n.arr,i=t<<1,o=i+1,a=t;i<r.length&&(a=r[i].priority<r[a].priority?i:a,o<r.length&&(a=r[o].priority<r[a].priority?o:a),a!==t&&(n.swap(t,a),n.heapify(a)))},this.min=function(){if(n.size()===0)throw new Error("Queue underflow");return n.arr[0].key},this.add=function(t,r){var i=n.keyIndice,o=n.arr;if(!i.has(t)){var a=o.length;return i.set(t,a),o.push({key:t,priority:r}),n.innerDecrease(a),!0}return!1},this.removeMin=function(){n.swap(0,n.arr.length-1);var t=n.arr.pop();return n.keyIndice.delete(t.key),n.heapify(0),t.key},this.decrease=function(t,r){if(!n.has(t))throw new Error("There's no key named ".concat(t));var i=n.keyIndice.get(t);if(r>n.arr[i].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(n.arr[i].priority," New: ").concat(r));n.arr[i].priority=r,n.innerDecrease(i)}}),qj=function e(n,t,r,i,o,a){i.includes(t)||(i.push(t),r||a.push(t),o(t).forEach(function(s){return e(n,s,r,i,o,a)}),r&&a.push(t))},Nm=function(e,n,t){var r=Array.isArray(n)?n:[n],i=function(s){return e.isDirected()?e.successors(s):e.neighbors(s)},o=[],a=[];return r.forEach(function(s){if(!e.hasNode(s))throw new Error("Graph does not have node: "+s);qj(e,s,t==="post",a,i,o)}),o};function Zj(e,n){return function(t){if(Array.isArray(t))return t}(e)||function(t,r){var i=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o,a,s=[],u=!0,c=!1;try{for(i=i.call(t);!(u=(o=i.next()).done)&&(s.push(o.value),!r||s.length!==r);u=!0);}catch(l){c=!0,a=l}finally{try{u||i.return==null||i.return()}finally{if(c)throw a}}return s}}(e,n)||function(t,r){if(t){if(typeof t=="string")return Ak(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ak(t,r)}}(e,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ak(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var Kj=function(){return 1},Ik=function(e,n,t,r){return $j(e,n,t||Kj,r||function(i){return e.outEdges(i)})},$j=function(e,n,t,r){var i,o,a=new Map,s=new Ck,u=function(l){var h=l.v!==i?l.v:l.w,d=a.get(h),f=t(l),p=o.distance+f;if(f<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+l+" Weight: "+f);p<d.distance&&(d.distance=p,d.predecessor=i,s.decrease(h,p))};for(e.nodes().forEach(function(l){var h=l===n?0:Number.POSITIVE_INFINITY;a.set(l,{distance:h}),s.add(l,h)});s.size()>0&&(i=s.removeMin(),!(o=a.get(i))||o.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(u);var c={};return Array.from(a.entries()).forEach(function(l){var h=Zj(l,2),d=h[0],f=h[1];return c[String(d)]=f,c}),c},Tk=function(e){var n=0,t=[],r=new Map,i=[];function o(a){var s,u={onStack:!0,lowlink:n,index:n};if(r.set(a,u),n+=1,t.push(a),(s=e.successors(a))===null||s===void 0||s.forEach(function(h){var d;if(r.has(h)){if(!((d=r.get(h))===null||d===void 0)&&d.onStack){var f=r.get(h);u.lowlink=Math.min(u.lowlink,f.index)}}else{o(h);var p=r.get(h);u.lowlink=Math.min(u.lowlink,p.lowlink)}}),u.lowlink===u.index){var c,l=[];do c=t.pop(),r.get(c).onStack=!1,l.push(c);while(a!==c);i.push(l)}}return e.nodes().forEach(function(a){r.has(a)||o(a)}),i};function Pm(e){return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Pm(e)}function Qj(e){var n=Ok();return function(){var t,r=wl(e);if(n){var i=wl(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return function(o,a){if(a&&(Pm(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(o)}(this,t)}}function Dm(e){var n=typeof Map=="function"?new Map:void 0;return Dm=function(t){if(t===null||!function(i){return Function.toString.call(i).indexOf("[native code]")!==-1}(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return Lm(t,arguments,wl(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),xl(r,t)},Dm(e)}function Lm(e,n,t){return Lm=Ok()?Reflect.construct:function(r,i,o){var a=[null];a.push.apply(a,i);var s=new(Function.bind.apply(r,a));return o&&xl(s,o.prototype),s},Lm.apply(null,arguments)}function Ok(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function xl(e,n){return xl=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},xl(e,n)}function wl(e){return wl=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},wl(e)}var Bm=function(){(function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&xl(r,i)})(t,Dm(Error));var e,n=Qj(t);function t(){return function(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),n.apply(this,arguments)}return e=t,Object.defineProperty(e,"prototype",{writable:!1}),e}();function Nk(e){var n=new Set,t=new Set,r=[];if(e.sinks().forEach(function i(o){if(t.has(o))throw new Bm;var a;n.has(o)||(t.add(o),n.add(o),(a=e.predecessors(o))===null||a===void 0||a.forEach(i),t.delete(o),r.push(o))}),n.size!==e.nodeCount())throw new Bm;return r}var Jj=function(){return 1};const ez=Object.freeze(Object.defineProperty({__proto__:null,components:function(e){var n=new Set,t=[];return e.nodes().forEach(function(r){for(var i=[],o=[r];o.length>0;){var a,s,u=o.pop();n.has(u)||(n.add(u),i.push(u),(a=e.successors(u))===null||a===void 0||a.forEach(function(c){return o.push(c)}),(s=e.predecessors(u))===null||s===void 0||s.forEach(function(c){return o.push(c)}))}i.length&&t.push(i)}),t},dfs:Nm,dijkstra:Ik,dijkstraAll:function(e,n,t){var r={};return e.nodes().forEach(function(i){return r[String(i)]=Ik(e,i,n,t),r}),r},findCycles:function(e){return Tk(e).filter(function(n){return n.length>1||n.length===1&&e.hasEdge(n[0],n[0])})},floydWarshall:function(e,n,t){return function(r,i,o){var a={},s=r.nodes();return s.forEach(function(u){var c=String(u);a[c]={},a[c][c]={distance:0},s.forEach(function(l){u!==l&&(a[c][String(l)]={distance:Number.POSITIVE_INFINITY})}),o(u).forEach(function(l){var h=l.v===u?l.w:l.v,d=i(l);a[c][String(h)]={distance:d,predecessor:u}})}),s.forEach(function(u){var c=String(u),l=a[c];s.forEach(function(h){var d=String(h),f=a[d];s.forEach(function(p){var g=String(p),v=f[c],m=l[g],y=f[g],b=v.distance+m.distance;b<y.distance&&(y.distance=b,y.predecessor=m.predecessor)})})}),a}(e,n||Jj,t||function(r){return e.outEdges(r)})},isAcyclic:function(e){try{Nk(e)}catch(n){if(n instanceof Bm)return!1;throw n}return!0},postorder:function(e,n){return Nm(e,n,"post")},preorder:function(e,n){return Nm(e,n,"pre")},prim:function(e,n){var t,r=new ls,i=new Map,o=new Ck;function a(c){var l=c.v===t?c.w:c.v,h=o.priority(l);if(h!==void 0){var d=n(c);d<h&&(i.set(l,t),o.decrease(l,d))}}if(e.nodeCount()===0)return r;e.nodes().forEach(function(c){o.add(c,Number.POSITIVE_INFINITY),r.setNode(c)}),o.decrease(e.nodes()[0],0);for(var s=!1;o.size()>0;){var u;if(t=o.removeMin(),i.has(t))r.setEdge(t,i.get(t));else{if(s)throw new Error("Input graph is not connected: "+e.graph());s=!0}(u=e.nodeEdges(t))===null||u===void 0||u.forEach(a)}return r},tarjan:Tk,topsort:Nk},Symbol.toStringTag,{value:"Module"}));var Pk=function(e,n){for(var t=e.edges(),r=0;r<t.length;r++){var i=t[r];if(n.hasEdge(i.v,i.w,i.name))return!0}return!1},Dk=function(e,n){return e.nodes().filter(function(t){return n.hasNode(t)})},Lk=function(e,n){return e.edges().filter(function(t){return n.hasEdge(t.v,t.w,t.name)})},Bk=function(e,n){return e.isCompound()===n.isCompound()&&e.isDirected()===n.isDirected()&&e.isMultigraph()===n.isMultigraph()},kf=function(e,n){return Dk(e,n).length===e.nodes().length},Rm=function(e,n){return Lk(e,n).length===e.edges().length};function tz(e,n){return function(t){if(Array.isArray(t))return t}(e)||function(t,r){var i=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o,a,s=[],u=!0,c=!1;try{for(i=i.call(t);!(u=(o=i.next()).done)&&(s.push(o.value),!r||s.length!==r);u=!0);}catch(l){c=!0,a=l}finally{try{u||i.return==null||i.return()}finally{if(c)throw a}}return s}}(e,n)||function(t,r){if(t){if(typeof t=="string")return Rk(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Rk(t,r)}}(e,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rk(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Cf(e){if(e.isMultigraph())return!1;for(var n=e.edges(),t=new Map,r=0;r<n.length;r++){var i=n[r];if(i.v===i.w)return!1;var o=tz([i.v,i.w].sort(),2),a=o[0],s=o[1],u="".concat(a,"-").concat(s);if(t.has(u))return!1;t.set(u,!0)}return!0}const nz=Object.freeze(Object.defineProperty({__proto__:null,hasSelfLoop:function(e){for(var n=e.edges(),t=0;t<n.length;t++){var r=n[t];if(r.v===r.w)return!0}return!1},isGraph:function(e){return e instanceof ls},isNullGraph:function(e){return e.nodes().length===0},isSimpleGraph:Cf},Symbol.toStringTag,{value:"Module"})),rz=Object.freeze(Object.defineProperty({__proto__:null,containAllSameEdges:Rm,containAllSameNodes:kf,containSameEdges:Pk,containSameNodes:function(e,n){for(var t=e.nodes(),r=0;r<t.length;r++){var i=t[r];if(n.hasNode(i))return!0}return!1},getSameEdges:Lk,getSameNodes:Dk,isGraphComplement:function(e,n){if(!Cf(e)||!Cf(n)||!kf(e,n)||Pk(e,n))return!1;var t=e.nodeCount();return e.edgeCount()+n.edgeCount()===t*(t-1)/2},isGraphContainsAnother:function(e,n){return kf(e,n)&&Rm(e,n)},isGraphOptionSame:Bk,isGraphSame:function(e,n){return Bk(e,n)&&e.nodeCount()===n.nodeCount()&&kf(e,n)&&e.edgeCount()===n.edgeCount()&&Rm(e,n)}},Symbol.toStringTag,{value:"Module"})),iz=Object.freeze(Object.defineProperty({__proto__:null,getGraphComplement:function(e){if(!Cf(e))return null;for(var n=e.nodeCount(),t=new ls({compound:e.isCompound(),directed:e.isDirected(),multigraph:e.isMultigraph()}),r=e.nodes(),i=0;i<n;i++){var o=r[i];t.setNode(o,e.node(o));for(var a=i+1;a<n;a++){var s=r[a];e.hasEdge(o,s)||t.setEdge(o,s)}}return t}},Symbol.toStringTag,{value:"Module"})),Af=Ao(Object.freeze(Object.defineProperty({__proto__:null,Graph:ls,GraphWithEvent:Vj,algorithm:ez,comparision:rz,essence:nz,generate:iz},Symbol.toStringTag,{value:"Module"})));var jk=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oz=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cm,"__esModule",{value:!0});var az=oz(Am),sz=Af,uz=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return jk(n,e),n}(az.default),cz=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return jk(n,e),n}(sz.Graph),lz=function(){return 1},hz=function(e,n,t){for(var r,i=[],o=n[n.length-1],a=n[0];e.nodeCount();){for(;r=a.dequeue();)jm(e,n,t,r);for(;r=o.dequeue();)jm(e,n,t,r);if(e.nodeCount()){for(var s=n.length-2;s>0;--s)if(r=n[s].dequeue()){i=i.concat(jm(e,n,t,r,!0));break}}}return i},jm=function(e,n,t,r,i){var o,a,s=[];return(o=e.inEdges(r.v))===null||o===void 0||o.forEach(function(u){var c=e.edge(u),l=e.node(u.v);i&&s.push({v:u.v,w:u.w,in:0,out:0}),l.out===void 0&&(l.out=0),l.out-=c,zm(n,t,l)}),(a=e.outEdges(r.v))===null||a===void 0||a.forEach(function(u){var c=e.edge(u),l=u.w,h=e.node(l);h.in===void 0&&(h.in=0),h.in-=c,zm(n,t,h)}),e.removeNode(r.v),i?s:void 0},dz=function(e,n){var t=new cz,r=0,i=0;e.nodes().forEach(function(c){t.setNode(c,{v:c,in:0,out:0})}),e.edges().forEach(function(c){var l=t.edge(c)||0,h=(n==null?void 0:n(c))||1,d=l+h;t.setEdge(c.v,c.w,d),i=Math.max(i,t.node(c.v).out+=h),r=Math.max(r,t.node(c.w).in+=h)});for(var o=[],a=i+r+3,s=0;s<a;s++)o.push(new uz);var u=r+1;return t.nodes().forEach(function(c){zm(o,u,t.node(c))}),{buckets:o,zeroIdx:u,graph:t}},zm=function(e,n,t){t.out?t.in?e[t.out-t.in+n].enqueue(t):e[e.length-1].enqueue(t):e[0].enqueue(t)};Cm.default=function(e,n){var t;if(e.nodeCount()<=1)return[];var r=dz(e,n||lz);return(t=hz(r.graph,r.buckets,r.zeroIdx).map(function(i){return e.outEdges(i.v,i.w)}))===null||t===void 0?void 0:t.flat()};var fz=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(km,"__esModule",{value:!0});var pz=fz(Cm),gz=function(e){var n=[],t={},r={},i=function(o){var a;r[o]||(r[o]=!0,t[o]=!0,(a=e.outEdges(o))===null||a===void 0||a.forEach(function(s){t[s.w]?n.push(s):i(s.w)}),delete t[o])};return e.nodes().forEach(i),n};km.default={run:function(e){var n=e.graph().acyclicer==="greedy"?(0,pz.default)(e,function(t){return function(r){var i;return((i=t.edge(r))===null||i===void 0?void 0:i.weight)||1}}(e)):gz(e);n==null||n.forEach(function(t){var r=e.edge(t);e.removeEdgeObj(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,"rev-".concat(Math.random()))})},undo:function(e){e.edges().forEach(function(n){var t=e.edge(n);if(t.reversed){e.removeEdgeObj(n);var r=t.forwardName;delete t.reversed,delete t.forwardName,e.setEdge(n.w,n.v,t,r)}})}};var Fm={},Qr={},jo={},vz=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(jo,"__esModule",{value:!0}),jo.Graph=void 0;var mz=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return vz(n,e),n}(Af.Graph);jo.Graph=mz,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.minBy=e.notime=e.time=e.partition=e.maxRank=e.addBorderNode=e.removeEmptyRanks=e.normalizeRanks=e.buildLayerMatrix=e.intersectRect=e.predecessorWeights=e.successorWeights=e.zipObject=e.asNonCompoundGraph=e.simplify=e.addDummyNode=void 0;var n=Cn(),t=jo;e.addDummyNode=function(r,i,o,a){var s;do s="".concat(a).concat(Math.random());while(r.hasNode(s));return o.dummy=i,r.setNode(s,o),s},e.simplify=function(r){var i=new t.Graph().setGraph(r.graph());return r.nodes().forEach(function(o){i.setNode(o,r.node(o))}),r.edges().forEach(function(o){var a=i.edgeFromArgs(o.v,o.w)||{weight:0,minlen:1},s=r.edge(o);i.setEdge(o.v,o.w,{weight:a.weight+s.weight,minlen:Math.max(a.minlen,s.minlen)})}),i},e.asNonCompoundGraph=function(r){var i=new t.Graph({multigraph:r.isMultigraph()}).setGraph(r.graph());return r.nodes().forEach(function(o){var a;!((a=r.children(o))===null||a===void 0)&&a.length||i.setNode(o,r.node(o))}),r.edges().forEach(function(o){i.setEdgeObj(o,r.edge(o))}),i},e.zipObject=function(r,i){return r==null?void 0:r.reduce(function(o,a,s){return o[a]=i[s],o},{})},e.successorWeights=function(r){var i={};return r.nodes().forEach(function(o){var a,s={};(a=r.outEdges(o))===null||a===void 0||a.forEach(function(u){var c;s[u.w]=(s[u.w]||0)+(((c=r.edge(u))===null||c===void 0?void 0:c.weight)||0)}),i[o]=s}),i},e.predecessorWeights=function(r){var i=r.nodes(),o=i.map(function(a){var s,u={};return(s=r.inEdges(a))===null||s===void 0||s.forEach(function(c){u[c.v]=(u[c.v]||0)+r.edge(c).weight}),u});return(0,e.zipObject)(i,o)},e.intersectRect=function(r,i){var o,a,s=Number(r.x),u=Number(r.y),c=Number(i.x)-s,l=Number(i.y)-u,h=Number(r.width)/2,d=Number(r.height)/2;return c||l?(Math.abs(l)*h>Math.abs(c)*d?(l<0&&(d=-d),o=d*c/l,a=d):(c<0&&(h=-h),o=h,a=h*l/c),{x:s+o,y:u+a}):{x:0,y:0}},e.buildLayerMatrix=function(r){for(var i=[],o=(0,e.maxRank)(r)+1,a=0;a<o;a++)i.push([]);for(r.nodes().forEach(function(s){var u=r.node(s);if(u){var c=u.rank;c!==void 0&&i[c]&&i[c].push(s)}}),a=0;a<o;a++)i[a]=i[a].sort(function(s,u){var c,l,h,d;return h=(c=r.node(s))===null||c===void 0?void 0:c.order,d=(l=r.node(u))===null||l===void 0?void 0:l.order,Number(h)-Number(d)});return i},e.normalizeRanks=function(r){var i=r.nodes().filter(function(a){var s;return((s=r.node(a))===null||s===void 0?void 0:s.rank)!==void 0}).map(function(a){return r.node(a).rank}),o=Math.min.apply(Math,i);r.nodes().forEach(function(a){var s=r.node(a);s.hasOwnProperty("rank")&&o!==1/0&&(s.rank-=o)})},e.removeEmptyRanks=function(r){var i=r.nodes(),o=i.filter(function(d){var f;return((f=r.node(d))===null||f===void 0?void 0:f.rank)!==void 0}).map(function(d){return r.node(d).rank}),a=Math.min.apply(Math,o),s=[];i.forEach(function(d){var f,p=(((f=r.node(d))===null||f===void 0?void 0:f.rank)||0)-a;s[p]||(s[p]=[]),s[p].push(d)});for(var u=0,c=r.graph().nodeRankFactor||0,l=0;l<s.length;l++){var h=s[l];h===void 0?l%c!=0&&(u-=1):u&&(h==null||h.forEach(function(d){var f=r.node(d);f&&(f.rank=f.rank||0,f.rank+=u)}))}},e.addBorderNode=function(r,i,o,a){var s={width:0,height:0};return(0,n.isNumber)(o)&&(0,n.isNumber)(a)&&(s.rank=o,s.order=a),(0,e.addDummyNode)(r,"border",s,i)},e.maxRank=function(r){var i;return r.nodes().forEach(function(o){var a,s=(a=r.node(o))===null||a===void 0?void 0:a.rank;s!==void 0&&(i===void 0||s>i)&&(i=s)}),i||(i=0),i},e.partition=function(r,i){var o={lhs:[],rhs:[]};return r==null||r.forEach(function(a){i(a)?o.lhs.push(a):o.rhs.push(a)}),o},e.time=function(r,i){Date.now();try{return i()}finally{}},e.notime=function(r,i){return i()},e.minBy=function(r,i){return r.reduce(function(o,a){return i(o)>i(a)?a:o})}}(Qr),Object.defineProperty(Fm,"__esModule",{value:!0});var yz=Qr,bz=function(e,n){var t=n.v,r=e.node(t).rank,i=n.w,o=e.node(i).rank,a=n.name,s=e.edge(n),u=s.labelRank;if(o!==r+1){e.removeEdgeObj(n);var c,l,h,d=e.graph();for(h=0,++r;r<o;++h,++r)s.points=[],c=(0,yz.addDummyNode)(e,"edge",l={edgeLabel:s,width:0,height:0,edgeObj:n,rank:r},"_d"),r===u&&(l.width=s.width,l.height=s.height,l.dummy="edge-label",l.labelpos=s.labelpos),e.setEdge(t,c,{weight:s.weight},a),h===0&&(d.dummyChains||(d.dummyChains=[]),d.dummyChains.push(c)),t=c;e.setEdge(t,i,{weight:s.weight},a)}};Fm.default={run:function(e){e.graph().dummyChains=[],e.edges().forEach(function(n){return bz(e,n)})},undo:function(e){var n;(n=e.graph().dummyChains)===null||n===void 0||n.forEach(function(t){var r,i=e.node(t),o=i.edgeLabel;i.edgeObj&&e.setEdgeObj(i.edgeObj,o);for(var a=t;i.dummy;)r=e.successors(a)[0],e.removeNode(a),o.points.push({x:i.x,y:i.y}),i.dummy==="edge-label"&&(o.x=i.x,o.y=i.y,o.width=i.width,o.height=i.height),a=r,i=e.node(a)})}};var Gm={},Ii={};Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.slack=Ii.longestPathWithLayer=Ii.longestPath=void 0;var zk=function(e){var n,t={},r=function(i){var o,a,s=e.node(i);return s?t[i]?s.rank:(t[i]=!0,(o=e.outEdges(i))===null||o===void 0||o.forEach(function(u){var c=r(u.w)-e.edge(u).minlen;c&&(a===void 0||c<a)&&(a=c)}),a||(a=0),s.rank=a,a):0};(n=e.sources())===null||n===void 0||n.forEach(function(i){return r(i)})};Ii.longestPath=zk;var Fk=function(e){var n,t,r={},i=function(s){var u,c,l=e.node(s);return l?r[s]?l.rank:(r[s]=!0,(u=e.outEdges(s))===null||u===void 0||u.forEach(function(h){var d=i(h.w)-e.edge(h).minlen;d&&(c===void 0||d<c)&&(c=d)}),c||(c=0),(t===void 0||c<t)&&(t=c),l.rank=c,c):0};(n=e.sources())===null||n===void 0||n.forEach(function(s){e.node(s)&&i(s)}),t===void 0&&(t=0);var o={},a=function(s,u){var c,l=e.node(s),h=isNaN(l.layer)?u:l.layer;(l.rank===void 0||l.rank<h)&&(l.rank=h),o[s]||(o[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.map(function(d){a(d.w,h+e.edge(d).minlen)}))};e.nodes().forEach(function(s){var u=e.node(s);u&&(isNaN(u.layer)?u.rank-=t:a(s,u.layer))})};Ii.longestPathWithLayer=Fk;var Gk=function(e,n){return e.node(n.w).rank-e.node(n.v).rank-e.edge(n).minlen};Ii.slack=Gk,Ii.default={longestPath:zk,longestPathWithLayer:Fk,slack:Gk};var xa={};Object.defineProperty(xa,"__esModule",{value:!0}),xa.feasibleTreeWithLayer=xa.feasibleTree=void 0;var hs=Ii,xz=Qr,Yk=jo,Xk=function(e){var n,t,r=new Yk.Graph({directed:!1}),i=e.nodes()[0],o=e.nodeCount();for(r.setNode(i,{});wz(r,e)<o;)n=Wk(r,e),t=r.hasNode(n.v)?(0,hs.slack)(e,n):-(0,hs.slack)(e,n),Vk(r,e,t);return r};xa.feasibleTree=Xk;var wz=function(e,n){var t=function(r){n.nodeEdges(r).forEach(function(i){var o=i.v,a=r===o?i.w:o;e.hasNode(a)||(0,hs.slack)(n,i)||(e.setNode(a,{}),e.setEdge(r,a,{}),t(a))})};return e.nodes().forEach(t),e.nodeCount()},Uk=function(e){var n,t,r=new Yk.Graph({directed:!1}),i=e.nodes()[0],o=e.nodes().filter(function(a){return!!e.node(a)}).length;for(r.setNode(i,{});Ez(r,e)<o;)n=Wk(r,e),t=r.hasNode(n.v)?(0,hs.slack)(e,n):-(0,hs.slack)(e,n),Vk(r,e,t);return r};xa.feasibleTreeWithLayer=Uk;var Ez=function(e,n){var t=function(r){var i;(i=n.nodeEdges(r))===null||i===void 0||i.forEach(function(o){var a=o.v,s=r===a?o.w:a;e.hasNode(s)||n.node(s).layer===void 0&&(0,hs.slack)(n,o)||(e.setNode(s,{}),e.setEdge(r,s,{}),t(s))})};return e.nodes().forEach(t),e.nodeCount()},Wk=function(e,n){return(0,xz.minBy)(n.edges(),function(t){return e.hasNode(t.v)!==e.hasNode(t.w)?(0,hs.slack)(n,t):1/0})},Vk=function(e,n,t){e.nodes().forEach(function(r){n.node(r).rank||(n.node(r).rank=0),n.node(r).rank+=t})};xa.default={feasibleTree:Xk,feasibleTreeWithLayer:Uk};var Hk={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.exchangeEdges=e.enterEdge=e.leaveEdge=e.initLowLimValues=e.calcCutValue=e.initCutValues=void 0;var n=xa,t=Ii,r=Qr,i=Af,o=i.algorithm.preorder,a=i.algorithm.postorder;e.initCutValues=function(d,f){var p=a(d,d.nodes());(p=p==null?void 0:p.slice(0,(p==null?void 0:p.length)-1))==null||p.forEach(function(g){s(d,f,g)})};var s=function(d,f,p){var g=d.node(p).parent;d.edgeFromArgs(p,g).cutvalue=(0,e.calcCutValue)(d,f,p)};e.calcCutValue=function(d,f,p){var g,v=d.node(p).parent,m=!0,y=f.edgeFromArgs(p,v),b=0;return y||(m=!1,y=f.edgeFromArgs(v,p)),b=y.weight,(g=f.nodeEdges(p))===null||g===void 0||g.forEach(function(x){var w=x.v===p,E=w?x.w:x.v;if(E!==v){var S=w===m,M=f.edge(x).weight;if(b+=S?M:-M,l(d,p,E)){var k=d.edgeFromArgs(p,E).cutvalue;b+=S?-k:k}}}),b},e.initLowLimValues=function(d,f){f===void 0&&(f=d.nodes()[0]),u(d,{},1,f)};var u=function(d,f,p,g,v){var m,y=p,b=p,x=d.node(g);return f[g]=!0,(m=d.neighbors(g))===null||m===void 0||m.forEach(function(w){f[w]||(b=u(d,f,b,w,g))}),x.low=y,x.lim=b++,v?x.parent=v:delete x.parent,b};e.leaveEdge=function(d){return d.edges().find(function(f){return d.edge(f).cutvalue<0})},e.enterEdge=function(d,f,p){var g=p.v,v=p.w;f.hasEdge(g,v)||(g=p.w,v=p.v);var m=d.node(g),y=d.node(v),b=m,x=!1;m.lim>y.lim&&(b=y,x=!0);var w=f.edges().filter(function(E){return x===h(d,d.node(E.v),b)&&x!==h(d,d.node(E.w),b)});return(0,r.minBy)(w,function(E){return(0,t.slack)(f,E)})},e.exchangeEdges=function(d,f,p,g){var v=p.v,m=p.w;d.removeEdge(v,m),d.setEdge(g.v,g.w,{}),(0,e.initLowLimValues)(d),(0,e.initCutValues)(d,f),c(d,f)};var c=function(d,f){var p=d.nodes().find(function(v){var m;return!(!((m=f.node(v))===null||m===void 0)&&m.parent)}),g=o(d,p);(g=g==null?void 0:g.slice(1))==null||g.forEach(function(v){var m=d.node(v).parent,y=f.edgeFromArgs(v,m),b=!1;y||(y=f.edgeFromArgs(m,v),b=!0),f.node(v).rank=f.node(m).rank+(b?y.minlen:-y.minlen)})},l=function(d,f,p){return d.hasEdge(f,p)},h=function(d,f,p){return p.low<=f.lim&&f.lim<=p.lim};e.default=function(d){var f=(0,r.simplify)(d);(0,t.longestPath)(f);var p,g,v=(0,n.feasibleTree)(f);for((0,e.initLowLimValues)(v),(0,e.initCutValues)(v,f);p=(0,e.leaveEdge)(v);)g=(0,e.enterEdge)(v,f,p),(0,e.exchangeEdges)(v,f,p,g)}})(Hk);var Sz=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gm,"__esModule",{value:!0});var qk=Ii,Mz=xa,_z=Sz(Hk),kz=qk.longestPath,Cz=function(e){(0,qk.longestPathWithLayer)(e),(0,Mz.feasibleTreeWithLayer)(e)},Az=function(e){(0,_z.default)(e)};Gm.default=function(e){switch(e.graph().ranker){case"network-simplex":Az(e);break;case"tight-tree":default:Cz(e);break;case"longest-path":kz(e)}};var Ym={};Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.default=function(e){var n,t=function(r){var i,o={},a=0,s=function(u){var c,l=a;(c=r.children(u))===null||c===void 0||c.forEach(s),o[u]={low:l,lim:a++}};return(i=r.children())===null||i===void 0||i.forEach(s),o}(e);(n=e.graph().dummyChains)===null||n===void 0||n.forEach(function(r){var i,o,a=r,s=e.node(a),u=s.edgeObj;if(u)for(var c=function(g,v,m,y){var b,x,w=[],E=[],S=Math.min(v[m].low,v[y].low),M=Math.max(v[m].lim,v[y].lim);b=m;do b=g.parent(b),w.push(b);while(b&&(v[b].low>S||M>v[b].lim));for(x=b,b=y;b&&b!==x;)E.push(b),b=g.parent(b);return{lca:x,path:w.concat(E.reverse())}}(e,t,u.v,u.w),l=c.path,h=c.lca,d=0,f=l[d],p=!0;a!==u.w;){if(s=e.node(a),p){for(;f!==h&&((i=e.node(f))===null||i===void 0?void 0:i.maxRank)<s.rank;)f=l[++d];f===h&&(p=!1)}if(!p){for(;d<l.length-1&&((o=e.node(l[d+1]))===null||o===void 0?void 0:o.minRank)<=s.rank;)d++;f=l[d]}e.setParent(a,f),a=e.successors(a)[0]}})};var Xm={};Object.defineProperty(Xm,"__esModule",{value:!0});var Um=Qr,Zk=function(e,n,t,r,i,o,a){var s=e.children(a);if(s!=null&&s.length){var u=(0,Um.addBorderNode)(e,"_bt"),c=(0,Um.addBorderNode)(e,"_bb"),l=e.node(a);e.setParent(u,a),l.borderTop=u,e.setParent(c,a),l.borderBottom=c,s==null||s.forEach(function(h){Zk(e,n,t,r,i,o,h);var d=e.node(h),f=d.borderTop?d.borderTop:h,p=d.borderBottom?d.borderBottom:h,g=d.borderTop?r:2*r,v=f!==p?1:i-o[a]+1;e.setEdge(u,f,{minlen:v,weight:g,nestingEdge:!0}),e.setEdge(p,c,{minlen:v,weight:g,nestingEdge:!0})}),e.parent(a)||e.setEdge(n,u,{weight:0,minlen:i+o[a]})}else a!==n&&e.setEdge(n,a,{weight:0,minlen:t})},Iz=function(e){var n,t={},r=function(i,o){var a=e.children(i);a==null||a.forEach(function(s){return r(s,o+1)}),t[i]=o};return(n=e.children())===null||n===void 0||n.forEach(function(i){return r(i,1)}),t},Tz=function(e){var n=0;return e.edges().forEach(function(t){n+=e.edge(t).weight}),n};Xm.default={run:function(e){var n,t=(0,Um.addDummyNode)(e,"root",{},"_root"),r=Iz(e),i=Math.max.apply(Math,Object.values(r));Math.abs(i)===1/0&&(i=1);var o=i-1,a=2*o+1;e.graph().nestingRoot=t,e.edges().forEach(function(u){e.edge(u).minlen*=a});var s=Tz(e)+1;(n=e.children())===null||n===void 0||n.forEach(function(u){Zk(e,t,a,s,o,r,u)}),e.graph().nodeRankFactor=a},cleanup:function(e){var n=e.graph();n.nestingRoot&&e.removeNode(n.nestingRoot),delete n.nestingRoot,e.edges().forEach(function(t){e.edge(t).nestingEdge&&e.removeEdgeObj(t)})}};var Wm={};Object.defineProperty(Wm,"__esModule",{value:!0});var Oz=Qr,Kk=function(e,n,t,r,i,o){var a={rank:o,borderType:n,width:0,height:0},s=i[n][o-1],u=(0,Oz.addDummyNode)(e,"border",a,t);i[n][o]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})};Wm.default=function(e){var n,t=function(r){var i=e.children(r),o=e.node(r);if(i!=null&&i.length&&i.forEach(function(u){return t(u)}),o.hasOwnProperty("minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,s=o.maxRank+1;a<s;a+=1)Kk(e,"borderLeft","_bl",r,o,a),Kk(e,"borderRight","_br",r,o,a)}};(n=e.children())===null||n===void 0||n.forEach(function(r){return t(r)})};var Vm={};Object.defineProperty(Vm,"__esModule",{value:!0});var $k=function(e){e.nodes().forEach(function(n){Qk(e.node(n))}),e.edges().forEach(function(n){Qk(e.edge(n))})},Qk=function(e){var n=e.width;e.width=e.height,e.height=n},Nz=function(e){e.nodes().forEach(function(n){Hm(e.node(n))}),e.edges().forEach(function(n){var t,r=e.edge(n);(t=r.points)===null||t===void 0||t.forEach(function(i){return Hm(i)}),r.hasOwnProperty("y")&&Hm(r)})},Hm=function(e){e!=null&&e.y&&(e.y=-e.y)},Pz=function(e){e.nodes().forEach(function(n){qm(e.node(n))}),e.edges().forEach(function(n){var t,r=e.edge(n);(t=r.points)===null||t===void 0||t.forEach(function(i){return qm(i)}),r.hasOwnProperty("x")&&qm(r)})},qm=function(e){var n=e.x;e.x=e.y,e.y=n};Vm.default={adjust:function(e){var n,t=(n=e.graph().rankdir)===null||n===void 0?void 0:n.toLowerCase();t!=="lr"&&t!=="rl"||$k(e)},undo:function(e){var n,t=(n=e.graph().rankdir)===null||n===void 0?void 0:n.toLowerCase();t!=="bt"&&t!=="rl"||Nz(e),t!=="lr"&&t!=="rl"||(Pz(e),$k(e))}};var Zm={},Km={};function Jk(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}function $m(e){var n=Math.round(e).toString(16);return n.length===1?"0".concat(n):n}function eC(e){return"#".concat($m(e[0])).concat($m(e[1])).concat($m(e[2]))}var Fr=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},If=function(e,n){return!!Fr(e)&&e.indexOf(n)>-1},tC=function(e,n){if(!Fr(e))return e;for(var t=[],r=0;r<e.length;r++){var i=e[r];n(i,r)&&t.push(i)}return t};function li(e){return typeof e=="function"}function wa(e){return e==null}function Wn(e){return Array.isArray(e)}const Tf=function(e){var n=typeof e;return e!==null&&n==="object"||n==="function"};function Au(e,n){if(e){if(Wn(e))for(var t=0,r=e.length;t<r&&n(e[t],t)!==!1;t++);else if(Tf(e)){for(var i in e)if(e.hasOwnProperty(i)&&n(e[i],i)===!1)break}}}var nC=Object.keys?function(e){return Object.keys(e)}:function(e){var n=[];return Au(e,function(t,r){li(e)&&r==="prototype"||n.push(r)}),n};function rC(e,n){var t=nC(n),r=t.length;if(wa(e))return!r;for(var i=0;i<r;i+=1){var o=t[i];if(n[o]!==e[o]||!(o in e))return!1}return!0}var Of=function(e){return typeof e=="object"&&e!==null},Dz={}.toString,Iu=function(e,n){return Dz.call(e)==="[object "+n+"]"},Tu=function(e){if(!Of(e)||!Iu(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n},iC=function(e,n){if(n===void 0&&(n=[]),Wn(e))for(var t=0;t<e.length;t+=1)iC(e[t],n);else n.push(e);return n};function oC(e){if(!Array.isArray(e))return-1/0;var n=e.length;if(!n)return-1/0;for(var t=e[0],r=1;r<n;r++)t=Math.max(t,e[r]);return t}const aC=function(e){if(Wn(e))return e.reduce(function(n,t){return Math.min(n,t)},e[0])};var sC=Array.prototype,Lz=sC.splice,Bz=sC.indexOf,Rz=Array.prototype.splice,uC=function(e,n){if(!Fr(e))return[];for(var t=e?n.length:0,r=t-1;t--;){var i=void 0,o=n[t];t!==r&&o===i||(i=o,Rz.call(e,o,1))}return e},cC=function(e,n,t){if(!Wn(e)&&!Tu(e))return e;var r=t;return Au(e,function(i,o){r=n(r,i,o)}),r};function Ea(e){return typeof e=="string"}function lC(e,n){n===void 0&&(n=new Map);var t=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.has(o)||(t.push(o),n.set(o,!0))}return t}var jz=Object.prototype.hasOwnProperty;function hC(e,n){if(!n||!Wn(e))return{};for(var t,r={},i=li(n)?n:function(s){return s[n]},o=0;o<e.length;o++){var a=e[o];t=i(a),jz.call(r,t)?r[t].push(a):r[t]=[a]}return r}function dC(e,n){if(!n)return{0:e};if(!li(n)){var t=Wn(n)?n:n.replace(/\s+/g,"").split("*");n=function(r){for(var i="_",o=0,a=t.length;o<a;o++)i+=r[t[o]]&&r[t[o]].toString();return i}}return hC(e,n)}var fC={};function zo(e){return typeof e=="number"}var zz=180/Math.PI;const Fz=parseInt;var Gz=Math.PI/180;const pC=function(e,n){return e.hasOwnProperty(n)};var gC=Object.values?function(e){return Object.values(e)}:function(e){var n=[];return Au(e,function(t,r){li(e)&&r==="prototype"||n.push(t)}),n};const El=function(e){return wa(e)?"":e.toString()};var Yz={}.toString,vC=function(e){return Yz.call(e).replace(/^\[object /,"").replace(/]$/,"")},Xz=Object.prototype,mC=function(e){var n=e&&e.constructor;return e===(typeof n=="function"&&n.prototype||Xz)};function Qm(e,n){for(var t in n)n.hasOwnProperty(t)&&t!=="constructor"&&n[t]!==void 0&&(e[t]=n[t])}function Ou(e,n,t,r){return n&&Qm(e,n),t&&Qm(e,t),r&&Qm(e,r),e}var Jm=function(e){if(typeof e!="object"||e===null)return e;var n;if(Wn(e)){n=[];for(var t=0,r=e.length;t<r;t++)typeof e[t]=="object"&&e[t]!=null?n[t]=Jm(e[t]):n[t]=e[t]}else for(var i in n={},e)typeof e[i]=="object"&&e[i]!=null?n[i]=Jm(e[i]):n[i]=e[i];return n},ey=new Map;function yC(e,n,t){return t===void 0&&(t=128),function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=n?n.apply(this,r):r[0];ey.has(e)||ey.set(e,function(u){var c,l,h,d=u||1;function f(g,v){++c>d&&(h=l,p(1),++c),l[g]=v}function p(g){c=0,l=Object.create(null),g||(h=Object.create(null))}return p(),{clear:p,has:function(g){return l[g]!==void 0||h[g]!==void 0},get:function(g){var v=l[g];return v!==void 0?v:(v=h[g])!==void 0?(f(g,v),v):void 0},set:function(g,v){l[g]!==void 0?l[g]=v:f(g,v)}}}(t));var a=ey.get(e);if(a.has(o))return a.get(o);var s=e.apply(this,r);return a.set(o,s),s}}function Uz(e,n){if(Object.hasOwn)return Object.hasOwn(e,n);if(e==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),n)}function bC(e,n,t,r){for(var i in t=t||0,r=r||5,n)if(Uz(n,i)){var o=n[i];o!==null&&Tu(o)?(Tu(e[i])||(e[i]={}),t<r?bC(e[i],o,t+1,r):e[i]=n[i]):Wn(o)?(e[i]=[],e[i]=e[i].concat(o)):o!==void 0&&(e[i]=o)}}var Wz=Object.prototype.hasOwnProperty,Nf=function(e,n){if(e===n)return!0;if(!e||!n||Ea(e)||Ea(n))return!1;if(Fr(e)||Fr(n)){if(e.length!==n.length)return!1;for(var t=!0,r=0;r<e.length&&(t=Nf(e[r],n[r]));r++);return t}if(Of(e)||Of(n)){var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(t=!0,r=0;r<i.length&&(t=Nf(e[i[r]],n[i[r]]));r++);return t}return!1},Vz=function(e){return e},Hz=Object.prototype.hasOwnProperty,Pf={},qz=function(){function e(){this.map={}}return e.prototype.has=function(n){return this.map[n]!==void 0},e.prototype.get=function(n,t){var r=this.map[n];return r===void 0?t:r},e.prototype.set=function(n,t){this.map[n]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(n){delete this.map[n]},e.prototype.size=function(){return Object.keys(this.map).length},e}(),Zz=/rgba?\(([\s.,0-9]+)\)/,xC=yC(function(e){if(e[0]==="#"&&e.length===7)return e;var n=function(){var i=document.getElementById("antv-web-colour-picker");return i||((i=document.createElement("i")).id="antv-web-colour-picker",i.title="Web Colour Picker",i.style.display="none",document.body.appendChild(i),i)}();n.style.color=e;var t=document.defaultView.getComputedStyle(n,"").getPropertyValue("color"),r=Zz.exec(t)[1].split(/\s*,\s*/).map(function(i){return Number(i)});return t=eC(r)},function(e){return e},256);function ty(e,n,t,r){return e[r]+(n[r]-e[r])*t}var Kz=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,$z=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Qz=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Jz(e,n,t){var r=[0,0,0,0,0,0,0,0,0];return s0(r,t),Zi(e,r,n)}function eF(e,n,t){var r=[0,0,0,0,0,0,0,0,0];return u0(r,t),Zi(e,r,n)}function tF(e,n,t){var r=[0,0,0,0,0,0,0,0,0];return c0(r,t),Zi(e,r,n)}function nF(e,n,t){return Zi(e,t,n)}function wC(e,n){return e[0]*n[1]-n[0]*e[1]}var EC={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function rF(e,n,t){if(e[t].length>7){e[t].shift();for(var r=e[t],i=t;r.length;)n[t]="A",e.splice(i+=1,0,["C"].concat(r.splice(0,6)));e.splice(t,1)}}var Sl={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function SC(e){return Array.isArray(e)&&e.every(function(n){var t=n[0].toLowerCase();return Sl[t]===n.length-1&&"achlmqstvz".includes(t)})}function MC(e){return SC(e)&&e.every(function(n){var t=n[0];return t===t.toUpperCase()})}function _C(e){return MC(e)&&e.every(function(n){var t=n[0];return"ACLMQZ".includes(t)})}function kC(e){for(var n=e.pathValue[e.segmentStart],t=n.toLowerCase(),r=e.data;r.length>=Sl[t]&&(t==="m"&&r.length>2?(e.segments.push([n].concat(r.splice(0,2))),t="l",n=n==="m"?"l":"L"):e.segments.push([n].concat(r.splice(0,Sl[t]))),Sl[t]););}function iF(e){var n=e.index,t=e.pathValue,r=t.charCodeAt(n);return r===48?(e.param=0,void(e.index+=1)):r===49?(e.param=1,void(e.index+=1)):void(e.err='[path-util]: invalid Arc flag "'.concat(t[n],'", expecting 0 or 1 at index ').concat(n))}function oF(e){return e>=48&&e<=57||e===43||e===45||e===46}function Nu(e){return e>=48&&e<=57}function aF(e){var n,t=e.max,r=e.pathValue,i=e.index,o=i,a=!1,s=!1,u=!1,c=!1;if(o>=t)e.err="[path-util]: Invalid path value at index ".concat(o,', "pathValue" is missing param');else if((n=r.charCodeAt(o))!==43&&n!==45||(o+=1,n=r.charCodeAt(o)),Nu(n)||n===46){if(n!==46){if(a=n===48,o+=1,n=r.charCodeAt(o),a&&o<t&&n&&Nu(n))return void(e.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(r[i],'" illegal number'));for(;o<t&&Nu(r.charCodeAt(o));)o+=1,s=!0;n=r.charCodeAt(o)}if(n===46){for(c=!0,o+=1;Nu(r.charCodeAt(o));)o+=1,u=!0;n=r.charCodeAt(o)}if(n===101||n===69){if(c&&!s&&!u)return void(e.err="[path-util]: Invalid path value at index ".concat(o,', "').concat(r[o],'" invalid float exponent'));if(o+=1,(n=r.charCodeAt(o))!==43&&n!==45||(o+=1),!(o<t&&Nu(r.charCodeAt(o))))return void(e.err="[path-util]: Invalid path value at index ".concat(o,', "').concat(r[o],'" invalid integer exponent'));for(;o<t&&Nu(r.charCodeAt(o));)o+=1}e.index=o,e.param=+e.pathValue.slice(i,o)}else e.err="[path-util]: Invalid path value at index ".concat(o,', "').concat(r[o],'" is not a number')}function Df(e){for(var n,t=e.pathValue,r=e.max;e.index<r&&((n=t.charCodeAt(e.index))===10||n===13||n===8232||n===8233||n===32||n===9||n===11||n===12||n===160||n>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(n));)e.index+=1}function sF(e){var n=e.max,t=e.pathValue,r=e.index,i=t.charCodeAt(r),o=Sl[t[r].toLowerCase()];if(e.segmentStart=r,function(s){switch(32|s){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}(i))if(e.index+=1,Df(e),e.data=[],o){for(;;){for(var a=o;a>0;a-=1){if((32|i)!=97||a!==3&&a!==4?aF(e):iF(e),e.err.length)return;e.data.push(e.param),Df(e),e.index<n&&t.charCodeAt(e.index)===44&&(e.index+=1,Df(e))}if(e.index>=e.max||!oF(t.charCodeAt(e.index)))break}kC(e)}else kC(e);else e.err='[path-util]: Invalid path value "'.concat(t[r],'" is not a path command')}var uF=function(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""};function Lf(e){if(SC(e))return[].concat(e);var n=new uF(e);for(Df(n);n.index<n.max&&!n.err.length;)sF(n);return n.err?n.err:n.segments}function CC(e){if(MC(e))return[].concat(e);var n=Lf(e),t=0,r=0,i=0,o=0;return n.map(function(a){var s,u=a.slice(1).map(Number),c=a[0],l=c.toUpperCase();if(c==="M")return t=u[0],r=u[1],i=t,o=r,["M",t,r];if(c!==l)switch(l){case"A":s=[l,u[0],u[1],u[2],u[3],u[4],u[5]+t,u[6]+r];break;case"V":s=[l,u[0]+r];break;case"H":s=[l,u[0]+t];break;default:var h=u.map(function(f,p){return f+(p%2?r:t)});s=[l].concat(h)}else s=[l].concat(u);var d=s.length;switch(l){case"Z":t=i,r=o;break;case"H":t=s[1];break;case"V":r=s[1];break;default:t=s[d-2],r=s[d-1],l==="M"&&(i=t,o=r)}return s})}function cF(e,n){var t=e[0],r=n.x1,i=n.y1,o=n.x2,a=n.y2,s=e.slice(1).map(Number),u=e;if("TQ".includes(t)||(n.qx=null,n.qy=null),t==="H")u=["L",e[1],i];else if(t==="V")u=["L",r,e[1]];else if(t==="S"){var c=2*r-o,l=2*i-a;n.x1=c,n.y1=l,u=["C",c,l].concat(s)}else if(t==="T"){var h=2*r-n.qx,d=2*i-n.qy;n.qx=h,n.qy=d,u=["Q",h,d].concat(s)}else if(t==="Q"){var f=s[0],p=s[1];n.qx=f,n.qy=p}return u}function Bf(e){if(_C(e))return[].concat(e);for(var n=CC(e),t=P({},EC),r=0;r<n.length;r+=1){n[r]=cF(n[r],t);var i=n[r],o=i.length;t.x1=+i[o-2],t.y1=+i[o-1],t.x2=+i[o-4]||t.x1,t.y2=+i[o-3]||t.y1}return n}function Rf(e,n,t){return{x:e*Math.cos(t)-n*Math.sin(t),y:e*Math.sin(t)+n*Math.cos(t)}}function ny(e,n,t,r,i,o,a,s,u,c){var l,h,d,f,p,g=e,v=n,m=t,y=r,b=s,x=u,w=120*Math.PI/180,E=Math.PI/180*(+i||0),S=[];if(c)h=c[0],d=c[1],f=c[2],p=c[3];else{g=(l=Rf(g,v,-E)).x,v=l.y;var M=(g-(b=(l=Rf(b,x,-E)).x))/2,k=(v-(x=l.y))/2,_=M*M/(m*m)+k*k/(y*y);_>1&&(m*=_=Math.sqrt(_),y*=_);var C=m*m,T=y*y,A=(o===a?-1:1)*Math.sqrt(Math.abs((C*T-C*k*k-T*M*M)/(C*k*k+T*M*M)));f=A*m*k/y+(g+b)/2,p=A*-y*M/m+(v+x)/2,h=Math.asin(((v-p)/y*Math.pow(10,9)|0)/Math.pow(10,9)),d=Math.asin(((x-p)/y*Math.pow(10,9)|0)/Math.pow(10,9)),h=g<f?Math.PI-h:h,d=b<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),a&&h>d&&(h-=2*Math.PI),!a&&d>h&&(d-=2*Math.PI)}var D=d-h;if(Math.abs(D)>w){var R=d,B=b,F=x;d=h+w*(a&&d>h?1:-1),S=ny(b=f+m*Math.cos(d),x=p+y*Math.sin(d),m,y,i,0,a,B,F,[d,R,f,p])}D=d-h;var N=Math.cos(h),L=Math.sin(h),z=Math.cos(d),Z=Math.sin(d),ne=Math.tan(D/4),J=4/3*m*ne,q=4/3*y*ne,ie=[g,v],Me=[g+J*L,v-q*N],me=[b+J*Z,x-q*z],ke=[b,x];if(Me[0]=2*ie[0]-Me[0],Me[1]=2*ie[1]-Me[1],c)return Me.concat(me,ke,S);for(var yt=[],Tt=0,cn=(S=Me.concat(me,ke,S)).length;Tt<cn;Tt+=1)yt[Tt]=Tt%2?Rf(S[Tt-1],S[Tt],E).y:Rf(S[Tt],S[Tt+1],E).x;return yt}function Sa(e,n,t){var r=e[0],i=e[1];return[r+(n[0]-r)*t,i+(n[1]-i)*t]}var AC=function(e,n,t,r){return ir(ir([],Sa([e,n],[t,r],.5),!0),[t,r,t,r],!1)};function lF(e,n){var t,r,i,o,a,s,u,c,l,h=e[0],d=e.slice(1).map(Number),f=d[0],p=d[1],g=n.x1,v=n.y1,m=n.x,y=n.y;switch("TQ".includes(h)||(n.qx=null,n.qy=null),h){case"M":return n.x=f,n.y=p,e;case"A":return t=[g,v].concat(d),["C"].concat(ny(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]));case"Q":return n.qx=f,n.qy=p,t=[g,v].concat(d),["C"].concat((r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],[(c=1/3)*r+(l=2/3)*o,c*i+l*a,c*s+l*o,c*u+l*a,s,u]));case"L":return["C"].concat(AC(g,v,f,p));case"Z":return g===m&&v===y?["C",g,v,m,y,m,y]:["C"].concat(AC(g,v,m,y))}return e}function IC(e,n){if(n===void 0&&(n=!1),function(f){return _C(f)&&f.every(function(p){var g=p[0];return"MC".includes(g)})}(e)){var t=[].concat(e);return n?[t,[]]:t}for(var r,i,o=Bf(e),a=P({},EC),s=[],u="",c=o.length,l=[],h=0;h<c;h+=1){o[h]&&(u=o[h][0]),s[h]=u;var d=lF(o[h],a);o[h]=d,rF(o,s,h),c=o.length,u==="Z"&&l.push(h),i=(r=o[h]).length,a.x1=+r[i-2],a.y1=+r[i-1],a.x2=+r[i-4]||a.x1,a.y2=+r[i-3]||a.y1}return n?[o,l]:o}function Pu(e,n){return Math.sqrt((e[0]-n[0])*(e[0]-n[0])+(e[1]-n[1])*(e[1]-n[1]))}function ry(e,n,t,r,i){var o=Pu([e,n],[t,r]),a={x:0,y:0};if(typeof i=="number")if(i<=0)a={x:e,y:n};else if(i>=o)a={x:t,y:r};else{var s=Sa([e,n],[t,r],i/o);a={x:s[0],y:s[1]}}return{length:o,point:a,min:{x:Math.min(e,t),y:Math.min(n,r)},max:{x:Math.max(e,t),y:Math.max(n,r)}}}function TC(e,n){var t=e.x,r=e.y,i=n.x,o=n.y,a=t*i+r*o,s=Math.sqrt((Math.pow(t,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(o,2)));return(t*o-r*i<0?-1:1)*Math.acos(a/s)}function hF(e,n,t,r,i,o,a,s,u,c){var l=Math.abs,h=Math.sin,d=Math.cos,f=Math.sqrt,p=Math.PI,g=l(t),v=l(r),m=(i%360+360)%360*(p/180);if(e===s&&n===u)return{x:e,y:n};if(g===0||v===0)return ry(e,n,s,u,c).point;var y=(e-s)/2,b=(n-u)/2,x={x:d(m)*y+h(m)*b,y:-h(m)*y+d(m)*b},w=Math.pow(x.x,2)/Math.pow(g,2)+Math.pow(x.y,2)/Math.pow(v,2);w>1&&(g*=f(w),v*=f(w));var E=(Math.pow(g,2)*Math.pow(v,2)-Math.pow(g,2)*Math.pow(x.y,2)-Math.pow(v,2)*Math.pow(x.x,2))/(Math.pow(g,2)*Math.pow(x.y,2)+Math.pow(v,2)*Math.pow(x.x,2)),S=(o!==a?1:-1)*f(E=E<0?0:E),M=S*(g*x.y/v),k=S*(-v*x.x/g),_=d(m)*M-h(m)*k+(e+s)/2,C=h(m)*M+d(m)*k+(n+u)/2,T={x:(x.x-M)/g,y:(x.y-k)/v},A=TC({x:1,y:0},T),D=TC(T,{x:(-x.x-M)/g,y:(-x.y-k)/v});!a&&D>0?D-=2*p:a&&D<0&&(D+=2*p);var R=A+(D%=2*p)*c,B=g*d(R),F=v*h(R);return{x:d(m)*B-h(m)*F+_,y:h(m)*B+d(m)*F+C}}function dF(e,n,t,r,i,o,a,s,u,c,l){var h,d=l.bbox,f=d===void 0||d,p=l.length,g=p===void 0||p,v=l.sampleSize,m=v===void 0?30:v,y=typeof c=="number",b=e,x=n,w=0,E=[b,x,w],S=[b,x],M={x:0,y:0},k=[{x:b,y:x}];y&&c<=0&&(M={x:b,y:x});for(var _=0;_<=m;_+=1){if(b=(h=hF(e,n,t,r,i,o,a,s,u,_/m)).x,x=h.y,f&&k.push({x:b,y:x}),g&&(w+=Pu(S,[b,x])),S=[b,x],y&&w>=c&&c>E[2]){var C=(w-c)/(w-E[2]);M={x:S[0]*(1-C)+E[0]*C,y:S[1]*(1-C)+E[1]*C}}E=[b,x,w]}return y&&c>=w&&(M={x:s,y:u}),{length:w,point:M,min:{x:Math.min.apply(null,k.map(function(T){return T.x})),y:Math.min.apply(null,k.map(function(T){return T.y}))},max:{x:Math.max.apply(null,k.map(function(T){return T.x})),y:Math.max.apply(null,k.map(function(T){return T.y}))}}}function fF(e,n,t,r,i,o,a,s,u){var c=1-u;return{x:Math.pow(c,3)*e+3*Math.pow(c,2)*u*t+3*c*Math.pow(u,2)*i+Math.pow(u,3)*a,y:Math.pow(c,3)*n+3*Math.pow(c,2)*u*r+3*c*Math.pow(u,2)*o+Math.pow(u,3)*s}}function OC(e,n,t,r,i,o,a,s,u,c){var l,h=c.bbox,d=h===void 0||h,f=c.length,p=f===void 0||f,g=c.sampleSize,v=g===void 0?10:g,m=typeof u=="number",y=e,b=n,x=0,w=[y,b,x],E=[y,b],S={x:0,y:0},M=[{x:y,y:b}];m&&u<=0&&(S={x:y,y:b});for(var k=0;k<=v;k+=1){if(y=(l=fF(e,n,t,r,i,o,a,s,k/v)).x,b=l.y,d&&M.push({x:y,y:b}),p&&(x+=Pu(E,[y,b])),E=[y,b],m&&x>=u&&u>w[2]){var _=(x-u)/(x-w[2]);S={x:E[0]*(1-_)+w[0]*_,y:E[1]*(1-_)+w[1]*_}}w=[y,b,x]}return m&&u>=x&&(S={x:a,y:s}),{length:x,point:S,min:{x:Math.min.apply(null,M.map(function(C){return C.x})),y:Math.min.apply(null,M.map(function(C){return C.y}))},max:{x:Math.max.apply(null,M.map(function(C){return C.x})),y:Math.max.apply(null,M.map(function(C){return C.y}))}}}function pF(e,n,t,r,i,o,a){var s=1-a;return{x:Math.pow(s,2)*e+2*s*a*t+Math.pow(a,2)*i,y:Math.pow(s,2)*n+2*s*a*r+Math.pow(a,2)*o}}function gF(e,n,t,r,i,o,a,s){var u,c=s.bbox,l=c===void 0||c,h=s.length,d=h===void 0||h,f=s.sampleSize,p=f===void 0?10:f,g=typeof a=="number",v=e,m=n,y=0,b=[v,m,y],x=[v,m],w={x:0,y:0},E=[{x:v,y:m}];g&&a<=0&&(w={x:v,y:m});for(var S=0;S<=p;S+=1){if(v=(u=pF(e,n,t,r,i,o,S/p)).x,m=u.y,l&&E.push({x:v,y:m}),d&&(y+=Pu(x,[v,m])),x=[v,m],g&&y>=a&&a>b[2]){var M=(y-a)/(y-b[2]);w={x:x[0]*(1-M)+b[0]*M,y:x[1]*(1-M)+b[1]*M}}b=[v,m,y]}return g&&a>=y&&(w={x:i,y:o}),{length:y,point:w,min:{x:Math.min.apply(null,E.map(function(k){return k.x})),y:Math.min.apply(null,E.map(function(k){return k.y}))},max:{x:Math.max.apply(null,E.map(function(k){return k.x})),y:Math.max.apply(null,E.map(function(k){return k.y}))}}}function jf(e,n,t){for(var r,i,o,a,s,u,c,l,h,d=Bf(e),f=typeof n=="number",p=[],g=0,v=0,m=0,y=0,b=[],x=[],w=0,E={x:0,y:0},S=E,M=E,k=E,_=0,C=0,T=d.length;C<T;C+=1)p=(c=(l=(h=d[C])[0])==="M")?p:[g,v].concat(h.slice(1)),c?(S=E={x:m=h[1],y:y=h[2]},w=0,f&&n<.001&&(k=E)):l==="L"?(w=(r=ry(p[0],p[1],p[2],p[3],(n||0)-_)).length,E=r.min,S=r.max,M=r.point):l==="A"?(w=(i=dF(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],(n||0)-_,t||{})).length,E=i.min,S=i.max,M=i.point):l==="C"?(w=(o=OC(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],(n||0)-_,t||{})).length,E=o.min,S=o.max,M=o.point):l==="Q"?(w=(a=gF(p[0],p[1],p[2],p[3],p[4],p[5],(n||0)-_,t||{})).length,E=a.min,S=a.max,M=a.point):l==="Z"&&(w=(s=ry((p=[g,v,m,y])[0],p[1],p[2],p[3],(n||0)-_)).length,E=s.min,S=s.max,M=s.point),f&&_<n&&_+w>=n&&(k=M),x.push(S),b.push(E),_+=w,g=(u=l!=="Z"?h.slice(-2):[m,y])[0],v=u[1];return f&&n>=_&&(k={x:g,y:v}),{length:_,point:k,min:{x:Math.min.apply(null,b.map(function(A){return A.x})),y:Math.min.apply(null,b.map(function(A){return A.y}))},max:{x:Math.max.apply(null,x.map(function(A){return A.x})),y:Math.max.apply(null,x.map(function(A){return A.y}))}}}function Ml(e,n){return jf(e,void 0,P(P({},n),{bbox:!1,length:!0})).length}function NC(e){var n=0,t=0,r=0;return IC(e).map(function(i){var o;if(i[0]==="M")return n=i[1],t=i[2],0;var a=i.slice(1),s=a[0],u=a[1],c=a[2],l=a[3],h=a[4],d=a[5];return r=function(f,p,g,v,m,y,b,x){return 3*((x-p)*(g+m)-(b-f)*(v+y)+v*(f-m)-g*(p-y)+x*(m+f/3)-b*(y+p/3))/20}(n,t,s,u,c,l,h,d),o=i.slice(-2),n=o[0],t=o[1],r}).reduce(function(i,o){return i+o},0)}function zf(e,n,t){return jf(e,n,P(P({},t),{bbox:!1,length:!0})).point}function vF(e,n){for(var t,r,i,o,a=Lf(e),s=Bf(a),u=Ml(a),c=function(x){var w=x.x-n.x,E=x.y-n.y;return w*w+E*E},l=8,h=0,d=0,f=1/0,p=0;p<=u;p+=l)(h=c(t=zf(s,p)))<f&&(r=t,d=p,f=h);l/=2;for(var g=0,v=0,m=0,y=0;l>.5;)m=c(i=zf(s,g=d-l)),y=c(o=zf(s,v=d+l)),g>=0&&m<f?(r=i,d=g,f=m):v<=u&&y<f?(r=o,d=v,f=y):l/=2;var b=function(x,w){var E=Lf(x);if(typeof E=="string")throw TypeError(E);var S=E.slice(),M=Ml(S),k=S.length-1,_=0,C=0,T=E[0],A=T.slice(-2),D={x:A[0],y:A[1]};if(k<=0||!w||!Number.isFinite(w))return{segment:T,index:0,length:C,point:D,lengthAtSegment:_};if(w>=M)return C=M-(_=Ml(S=E.slice(0,-1))),{segment:E[k],index:k,length:C,lengthAtSegment:_};for(var R=[];k>0;)T=S[k],C=M-(_=Ml(S=S.slice(0,-1))),M=_,R.push({segment:T,index:k,length:C,lengthAtSegment:_}),k-=1;return R.find(function(B){return B.lengthAtSegment<=w})}(a,d);return{closest:r,distance:Math.sqrt(f),segment:b}}function PC(e){return e.map(function(n,t,r){var i,o=t&&r[t-1].slice(-2).concat(n.slice(1)),a=t?OC(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],{bbox:!1}).length:0;return i=t?a?function(s,u){u===void 0&&(u=.5);var c=s.slice(0,2),l=s.slice(2,4),h=s.slice(4,6),d=s.slice(6,8),f=Sa(c,l,u),p=Sa(l,h,u),g=Sa(h,d,u),v=Sa(f,p,u),m=Sa(p,g,u),y=Sa(v,m,u);return[["C"].concat(f,v,y),["C"].concat(m,g,d)]}(o):[n,n]:[n],{s:n,ss:i,l:a}})}function iy(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function mF(e,n,t){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])&&Math.min(e[0],n[0])<=t[0]&&t[0]<=Math.max(e[0],n[0])&&Math.min(e[1],n[1])<=t[1]&&t[1]<=Math.max(e[1],n[1])}function oy(e,n,t){var r=!1,i=e.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=e[o],s=e[(o+1)%i];if(mF(a,s,[n,t]))return!0;iy(a[1]-t)>0!=iy(s[1]-t)>0&&iy(n-(t-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}var DC=function(e,n,t){return e>=n&&e<=t};function LC(e){for(var n=[],t=e.length,r=0;r<t-1;r++){var i=e[r],o=e[r+1];n.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(n.length>1){var a=e[0],s=e[t-1];n.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return n}function yF(e,n){var t=!1;return e.forEach(function(r){if(function(i,o,a,s){var u=a.x-i.x,c=a.y-i.y,l=o.x-i.x,h=o.y-i.y,d=s.x-a.x,f=s.y-a.y,p=l*f-h*d,g=null;if(p*p>.001*(l*l+h*h)*(d*d+f*f)){var v=(u*f-c*d)/p,m=(u*h-c*l)/p;DC(v,0,1)&&DC(m,0,1)&&(g={x:i.x+v*l,y:i.y+v*h})}return g}(r.from,r.to,n.from,n.to))return t=!0,!1}),t}function BC(e){var n=e.map(function(r){return r[0]}),t=e.map(function(r){return r[1]});return{minX:Math.min.apply(null,n),maxX:Math.max.apply(null,n),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}const bF=Object.freeze(Object.defineProperty({__proto__:null,Cache:qz,angleTo:function(e,n,t){var r=w2(e,n),i=wC(e,n)>=0;return t?i?2*Math.PI-r:r:i?r:2*Math.PI-r},arcToCubic:ny,assign:Ou,augment:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=e[0],r=1;r<e.length;r++){var i=e[r];li(i)&&(i=i.prototype),Ou(t.prototype,i)}},clamp:function(e,n,t){return e<n?n:e>t?t:e},clearAnimationFrame:function(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)},clone:Jm,clonePath:function(e){return e.map(function(n){return Array.isArray(n)?[].concat(n):n})},contains:If,createDOM:function(e){var n=document.createElement("div");n.innerHTML=e;var t=n.childNodes[0];return t&&n.contains(t)&&n.removeChild(t),t},debounce:function(e,n,t){var r;return function(){var i=this,o=arguments,a=t&&!r;clearTimeout(r),r=setTimeout(function(){r=null,t||e.apply(i,o)},n),a&&e.apply(i,o)}},deepMix:function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var r=0;r<n.length;r+=1)bC(e,n[r]);return e},difference:function(e,n){return n===void 0&&(n=[]),tC(e,function(t){return!If(n,t)})},direction:wC,distanceSquareRoot:Pu,each:Au,endsWith:function(e,n){return!(!Wn(e)&&!Ea(e))&&e[e.length-1]===n},equalizeSegments:function e(n,t,r){var i=PC(n),o=PC(t),a=i.length,s=o.length,u=i.filter(function(m){return m.l}).length,c=o.filter(function(m){return m.l}).length,l=i.filter(function(m){return m.l}).reduce(function(m,y){return m+y.l},0)/u||0,h=o.filter(function(m){return m.l}).reduce(function(m,y){return m+y.l},0)/c||0,d=r||Math.max(a,s),f=[l,h],p=[d-a,d-s],g=0,v=[i,o].map(function(m,y){return m.l===d?m.map(function(b){return b.s}):m.map(function(b,x){return g=x&&p[y]&&b.l>=f[y],p[y]-=g?1:0,g?b.ss:[b.s]}).flat()});return v[0].length===v[1].length?v:e(v[0],v[1],d)},every:function(e,n){for(var t=0;t<e.length;t++)if(!n(e[t],t))return!1;return!0},extend:function(e,n,t,r){li(n)||(t=n,n=e,e=function(){});var i=Object.create?function(a,s){return Object.create(a,{constructor:{value:s}})}:function(a,s){function u(){}u.prototype=a;var c=new u;return c.constructor=s,c},o=i(n.prototype,e);return e.prototype=Ou(o,e.prototype),e.superclass=i(n.prototype,n),Ou(o,t),Ou(e,r),e},filter:tC,find:function(e,n){if(!Wn(e))return null;var t;if(li(n)&&(t=n),Tu(n)&&(t=function(i){return rC(i,n)}),t){for(var r=0;r<e.length;r+=1)if(t(e[r]))return e[r]}return null},findIndex:function(e,n,t){t===void 0&&(t=0);for(var r=t;r<e.length;r++)if(n(e[r],r))return r;return-1},firstValue:function(e,n){for(var t=null,r=0;r<e.length;r++){var i=e[r][n];if(!wa(i)){t=Wn(i)?i[0]:i;break}}return t},fixedBase:function(e,n){var t=n.toString(),r=t.indexOf(".");if(r===-1)return Math.round(e);var i=t.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))},flatten:function(e){if(!Wn(e))return[];for(var n=[],t=0;t<e.length;t++)n=n.concat(e[t]);return n},flattenDeep:iC,forIn:Au,get:function(e,n,t){for(var r=0,i=Ea(n)?n.split("."):n;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?t:e},getDrawDirection:function(e){return NC(e)>=0},getPathArea:NC,getPathBBox:function(e,n){if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var t=jf(e,void 0,P(P({},n),{length:!1})),r=t.min,i=r.x,o=r.y,a=t.max,s=a.x,u=a.y,c=s-i,l=u-o;return{width:c,height:l,x:i,y:o,x2:s,y2:u,cx:i+c/2,cy:o+l/2,cz:Math.max(c,l)+Math.min(c,l)/2}},getPathBBoxTotalLength:function(e,n){if(!e)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var t=jf(e,void 0,P(P({},n),{bbox:!0,length:!0})),r=t.length,i=t.min,o=i.x,a=i.y,s=t.max,u=s.x,c=s.y,l=u-o,h=c-a;return{length:r,width:l,height:h,x:o,y:a,x2:u,y2:c,cx:o+l/2,cy:a+h/2,cz:Math.max(l,h)+Math.min(l,h)/2}},getPointAtLength:zf,getRange:function(e){var n=e.filter(function(o){return!isNaN(o)});if(!n.length)return{min:0,max:0};if(Wn(e[0])){for(var t=[],r=0;r<e.length;r++)t=t.concat(e[r]);n=t}var i=oC(n);return{min:aC(n),max:i}},getRotatedCurve:function(e,n){var t=e.length-1,r=[],i=0,o=function(a){var s=a.length,u=s-1;return a.map(function(c,l){return a.map(function(h,d){var f,p=l+d;return d===0||a[p]&&a[p][0]==="M"?(f=a[p],["M"].concat(f.slice(-2))):(p>=s&&(p-=u),a[p])})})}(e);return o.forEach(function(a,s){e.slice(1).forEach(function(u,c){i+=Pu(e[(s+c)%t].slice(-2),n[c%t].slice(-2))}),r[s]=i,i=0}),o[r.indexOf(Math.min.apply(null,r))]},getTotalLength:Ml,getType:vC,getWrapBehavior:function(e,n){return e["_wrap_"+n]},gradient:function(e){var n=(typeof e=="string"?e.split("-"):e).map(function(t){return Jk(t.indexOf("#")===-1?xC(t):t)});return function(t){return function(r,i){var o=isNaN(Number(i))||i<0?0:i>1?1:Number(i),a=r.length-1,s=Math.floor(a*o),u=a*o-s,c=r[s],l=s===a?c:r[s+1];return eC([ty(c,l,u,0),ty(c,l,u,1),ty(c,l,u,2)])}(n,t)}},group:function(e,n){if(!n)return[e];var t=dC(e,n),r=[];for(var i in t)r.push(t[i]);return r},groupBy:hC,groupToMap:dC,has:pC,hasKey:pC,hasValue:function(e,n){return If(gC(e),n)},head:function(e){if(Fr(e))return e[0]},identity:function(e){return e},includes:If,indexOf:function(e,n){if(!Fr(e))return-1;var t=Array.prototype.indexOf;if(t)return t.call(e,n);for(var r=-1,i=0;i<e.length;i++)if(e[i]===n){r=i;break}return r},isArguments:function(e){return Iu(e,"Arguments")},isArray:Wn,isArrayLike:Fr,isBoolean:function(e){return Iu(e,"Boolean")},isDate:function(e){return e instanceof Date},isDecimal:function(e){return zo(e)&&e%1!=0},isElement:function(e){return e instanceof Element||e instanceof Document},isEmpty:function(e){if(wa(e))return!0;if(Fr(e))return!e.length;var n=vC(e);if(n==="Map"||n==="Set")return!e.size;if(mC(e))return!Object.keys(e).length;for(var t in e)if(Wz.call(e,t))return!1;return!0},isEqual:Nf,isEqualWith:function(e,n,t){return li(t)?!!t(e,n):Nf(e,n)},isError:function(e){return Iu(e,"Error")},isEven:function(e){return zo(e)&&e%2==0},isFinite:function(e){return zo(e)&&isFinite(e)},isFunction:li,isInteger:function(e){return zo(e)&&e%1==0},isMatch:rC,isNegative:function(e){return zo(e)&&e<0},isNil:wa,isNull:function(e){return e===null},isNumber:zo,isNumberEqual:function(e,n,t){return t===void 0&&(t=1e-5),e===n||Math.abs(e-n)<t},isObject:Tf,isObjectLike:Of,isOdd:function(e){return zo(e)&&e%2!=0},isPlainObject:Tu,isPointInPolygon:oy,isPointInStroke:function(e,n){var t=vF(e,n).distance;return Math.abs(t)<.001},isPolygonsIntersect:function(e,n){if(e.length<2||n.length<2)return!1;var t,r,i=BC(e),o=BC(n);if(t=i,(r=o).minX>t.maxX||r.maxX<t.minX||r.minY>t.maxY||r.maxY<t.minY)return!1;var a=!1;if(n.forEach(function(l){if(oy(e,l[0],l[1]))return a=!0,!1}),a||(e.forEach(function(l){if(oy(n,l[0],l[1]))return a=!0,!1}),a))return!0;var s=LC(e),u=LC(n),c=!1;return u.forEach(function(l){if(yF(s,l))return c=!0,!1}),c},isPositive:function(e){return zo(e)&&e>0},isPrototype:mC,isRegExp:function(e){return Iu(e,"RegExp")},isString:Ea,isType:Iu,isUndefined:function(e){return e===void 0},keys:nC,last:function(e){if(Fr(e))return e[e.length-1]},lowerCase:function(e){return El(e).toLowerCase()},lowerFirst:function(e){var n=El(e);return n.charAt(0).toLowerCase()+n.substring(1)},map:function(e,n){if(!Fr(e))return e;for(var t=[],r=0;r<e.length;r++){var i=e[r];t.push(n(i,r))}return t},mapValues:function(e,n){n===void 0&&(n=Vz);var t={};return Tf(e)&&!wa(e)&&Object.keys(e).forEach(function(r){t[r]=n(e[r],r)}),t},max:oC,maxBy:function(e,n){if(Wn(e)){for(var t,r=-1/0,i=0;i<e.length;i++){var o=e[i],a=li(n)?n(o):o[n];a>r&&(t=o,r=a)}return t}},memoize:yC,min:aC,minBy:function(e,n){if(Wn(e)){for(var t,r=1/0,i=0;i<e.length;i++){var o=e[i],a=li(n)?n(o):o[n];a<r&&(t=o,r=a)}return t}},mix:Ou,mod:function(e,n){return(e%n+n)%n},modifyCSS:function(e,n){if(e)return Object.keys(n).forEach(function(t){e.style[t]=n[t]}),e},noop:function(){},normalizePath:Bf,number2color:function(e){var n=fC[e];if(!n){for(var t=e.toString(16),r=t.length;r<6;r++)t="0"+t;n="#"+t,fC[e]=n}return n},omit:function(e,n){return cC(e,function(t,r,i){return n.includes(i)||(t[i]=r),t},{})},parseRadius:function(e){var n=0,t=0,r=0,i=0;return Wn(e)?e.length===1?n=t=r=i=e[0]:e.length===2?(n=r=e[0],t=i=e[1]):e.length===3?(n=e[0],t=i=e[1],r=e[2]):(n=e[0],t=e[1],r=e[2],i=e[3]):n=t=r=i=e,{r1:n,r2:t,r3:r,r4:i}},path2Absolute:CC,path2Array:function(e){return Lf(e)},path2Curve:IC,path2String:function(e,n){return n===void 0&&(n="off"),function(t,r){if(r==="off")return[].concat(t);var i=typeof r=="number"&&r>=1?Math.pow(10,r):1;return t.map(function(o){var a=o.slice(1).map(Number).map(function(s){return r?Math.round(s*i)/i:Math.round(s)});return[o[0]].concat(a)})}(e,n).map(function(t){return t[0]+t.slice(1).join(" ")}).join("")},pick:function(e,n){if(e===null||!Tu(e))return{};var t={};return Au(n,function(r){Hz.call(e,r)&&(t[r]=e[r])}),t},pull:function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var r=0;r<n.length;r++)for(var i=n[r],o=-1;(o=Bz.call(e,i))>-1;)Lz.call(e,o,1);return e},pullAt:uC,reduce:cC,remove:function(e,n){var t=[];if(!Fr(e))return t;for(var r=-1,i=[],o=e.length;++r<o;){var a=e[r];n(a,r,e)&&(t.push(a),i.push(r))}return uC(e,i),t},requestAnimationFrame:function(e){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return n(e)},reverseCurve:function(e){var n=e.slice(1).map(function(t,r,i){return r?i[r-1].slice(-2).concat(t.slice(1)):e[0].slice(1).concat(t.slice(1))}).map(function(t){return t.map(function(r,i){return t[t.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(n[0].slice(0,2))].concat(n.map(function(t){return["C"].concat(t.slice(2))}))},rgb2arr:Jk,set:function(e,n,t){var r=e,i=Ea(n)?n.split("."):n;return i.forEach(function(o,a){a<i.length-1?(Tf(r[o])||(r[o]=zo(i[a+1])?[]:{}),r=r[o]):r[o]=t}),e},size:function(e){return wa(e)?0:Fr(e)?e.length:Object.keys(e).length},some:function(e,n){for(var t=0;t<e.length;t++)if(n(e[t],t))return!0;return!1},sortBy:function(e,n){var t;if(li(n))t=function(i,o){return n(i)-n(o)};else{var r=[];Ea(n)?r.push(n):Wn(n)&&(r=n),t=function(i,o){for(var a=0;a<r.length;a+=1){var s=r[a];if(i[s]>o[s])return 1;if(i[s]<o[s])return-1}return 0}}return e.sort(t),e},startsWith:function(e,n){return!(!Wn(e)&&!Ea(e))&&e[0]===n},substitute:function(e,n){return e&&n?e.replace(/\\?\{([^{}]+)\}/g,function(t,r){return t.charAt(0)==="\\"?t.slice(1):n[r]===void 0?"":n[r]}):e},throttle:function(e,n,t){var r,i,o,a,s=0;t||(t={});var u=function(){s=t.leading===!1?0:Date.now(),r=null,a=e.apply(i,o),r||(i=o=null)},c=function(){var l=Date.now();s||t.leading!==!1||(s=l);var h=n-(l-s);return i=this,o=arguments,h<=0||h>n?(r&&(clearTimeout(r),r=null),s=l,a=e.apply(i,o),r||(i=o=null)):r||t.trailing===!1||(r=setTimeout(u,h)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c},toArray:function(e){return Fr(e)?Array.prototype.slice.call(e):[]},toCSSGradient:function(e){if(/^[r,R,L,l]{1}[\s]*\(/.test(e)){var n,t=void 0;if(e[0]==="l"){var r=+(i=Kz.exec(e))[1]+90;t=i[2],n="linear-gradient(".concat(r,"deg, ")}else if(e[0]==="r"){var i;n="radial-gradient(",t=(i=$z.exec(e))[4]}var o=t.match(Qz);return o.forEach(function(a,s){var u=a.split(":");n+="".concat(u[1]," ").concat(100*Number(u[0]),"%"),s!==o.length-1&&(n+=", ")}),n+=")"}return e},toDegree:function(e){return zz*e},toInteger:Fz,toRGB:xC,toRadian:function(e){return Gz*e},toString:El,transform:function(e,n){for(var t=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=n.length;r<i;r++){var o=n[r];switch(o[0]){case"t":Jz(t,t,[o[1],o[2]]);break;case"s":tF(t,t,[o[1],o[2]]);break;case"r":eF(t,t,o[1]);break;case"m":nF(t,t,o[1])}}return t},union:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return lC([].concat.apply([],e))},uniq:lC,uniqueId:function(e){return Pf[e=e||"g"]?Pf[e]+=1:Pf[e]=1,e+Pf[e]},upperCase:function(e){return El(e).toUpperCase()},upperFirst:function(e){var n=El(e);return n.charAt(0).toUpperCase()+n.substring(1)},values:gC,valuesOfKey:function(e,n){for(var t=[],r={},i=0;i<e.length;i++){var o=e[i][n];if(!wa(o)){Wn(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];r[s]||(t.push(s),r[s]=!0)}}}return t},vertical:function(e,n,t){return t?(e[0]=n[1],e[1]=-1*n[0]):(e[0]=-1*n[1],e[1]=n[0]),e},wrapBehavior:function(e,n){if(e["_wrap_"+n])return e["_wrap_"+n];var t=function(r){e[n](r)};return e["_wrap_"+n]=t,t}},Symbol.toStringTag,{value:"Module"})),RC=Ao(bF);Object.defineProperty(Km,"__esModule",{value:!0});var xF=RC;Km.default=function(e){for(var n={},t=e.nodes().filter(function(h){var d;return!(!((d=e.children(h))===null||d===void 0)&&d.length)}),r=t.map(function(h){return e.node(h).rank}),i=(0,xF.max)(r),o=[],a=0;a<i+1;a++)o.push([]);var s=function(h){var d;if(!n.hasOwnProperty(h)){n[h]=!0;var f=e.node(h);isNaN(f.rank)||o[f.rank].push(h),(d=e.successors(h))===null||d===void 0||d.forEach(function(p){return s(p)})}},u=t.sort(function(h,d){return e.node(h).rank-e.node(d).rank}),c=u.filter(function(h){return e.node(h).fixorder!==void 0}),l=c.sort(function(h,d){return e.node(h).fixorder-e.node(d).fixorder});return l==null||l.forEach(function(h){isNaN(e.node(h).rank)||o[e.node(h).rank].push(h),n[h]=!0}),u==null||u.forEach(s),o};var ay={};Object.defineProperty(ay,"__esModule",{value:!0});var wF=Qr,EF=function(e,n,t){for(var r=(0,wF.zipObject)(t,t.map(function(l,h){return h})),i=n.map(function(l){var h,d=(h=e.outEdges(l))===null||h===void 0?void 0:h.map(function(f){return{pos:r[f.w]||0,weight:e.edge(f).weight}});return d==null?void 0:d.sort(function(f,p){return f.pos-p.pos})}),o=i.flat().filter(function(l){return l!==void 0}),a=1;a<t.length;)a<<=1;var s=2*a-1;a-=1;var u=Array(s).fill(0,0,s),c=0;return o==null||o.forEach(function(l){if(l){var h=l.pos+a;u[h]+=l.weight;for(var d=0;h>0;)h%2&&(d+=u[h+1]),u[h=h-1>>1]+=l.weight;c+=l.weight*d}}),c};ay.default=function(e,n){for(var t=0,r=1;r<(n==null?void 0:n.length);r+=1)t+=EF(e,n[r-1],n[r]);return t};var sy={};Object.defineProperty(sy,"__esModule",{value:!0});var SF=jo,MF=function(e){for(var n;e.hasNode(n="_root".concat(Math.random())););return n};sy.default=function(e,n,t){var r=MF(e),i=new SF.Graph({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(o){return e.node(o)});return e.nodes().forEach(function(o){var a,s=e.node(o),u=e.parent(o);(s.rank===n||s.minRank<=n&&n<=s.maxRank)&&(i.setNode(o),i.setParent(o,u||r),(a=e[t](o))===null||a===void 0||a.forEach(function(c){var l=c.v===o?c.w:c.v,h=i.edgeFromArgs(l,o),d=h!==void 0?h.weight:0;i.setEdge(l,o,{weight:e.edge(c).weight+d})}),s.hasOwnProperty("minRank")&&i.setNode(o,{borderLeft:s.borderLeft[n],borderRight:s.borderRight[n]}))}),i};var uy={};Object.defineProperty(uy,"__esModule",{value:!0}),uy.default=function(e,n,t){var r,i={};t==null||t.forEach(function(o){for(var a,s,u=e.parent(o);u;){if((a=e.parent(u))?(s=i[a],i[a]=u):(s=r,r=u),s&&s!==u)return void n.setEdge(s,u);u=a}})};var cy={},ly={};Object.defineProperty(ly,"__esModule",{value:!0}),ly.default=function(e,n){return n.map(function(t){var r=e.inEdges(t);if(!(r!=null&&r.length))return{v:t};var i={sum:0,weight:0};return r==null||r.forEach(function(o){var a=e.edge(o),s=e.node(o.v);i.sum+=a.weight*s.order,i.weight+=a.weight}),{v:t,barycenter:i.sum/i.weight,weight:i.weight}})};var hy={};Object.defineProperty(hy,"__esModule",{value:!0});var _F=function(e){for(var n,t,r=[],i=function(){var s=e.pop();r.push(s),(n=s.in.reverse())===null||n===void 0||n.forEach(function(u){return(c=s,function(l){l.merged||(l.barycenter===void 0||c.barycenter===void 0||l.barycenter>=c.barycenter)&&kF(c,l)})(u);var c}),(t=s.out)===null||t===void 0||t.forEach(function(u){return(c=s,function(l){l.in.push(c),--l.indegree==0&&e.push(l)})(u);var c})};e!=null&&e.length;)i();var o=r.filter(function(s){return!s.merged}),a=["vs","i","barycenter","weight"];return o.map(function(s){var u={};return a==null||a.forEach(function(c){s[c]!==void 0&&(u[c]=s[c])}),u})},kF=function(e,n){var t,r=0,i=0;e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),n.weight&&(r+=n.barycenter*n.weight,i+=n.weight),e.vs=(t=n.vs)===null||t===void 0?void 0:t.concat(e.vs),e.barycenter=r/i,e.weight=i,e.i=Math.min(n.i,e.i),n.merged=!0};hy.default=function(e,n){var t,r,i,o={};e==null||e.forEach(function(s,u){o[s.v]={i:u,indegree:0,in:[],out:[],vs:[s.v]};var c=o[s.v];s.barycenter!==void 0&&(c.barycenter=s.barycenter,c.weight=s.weight)}),(t=n.edges())===null||t===void 0||t.forEach(function(s){var u=o[s.v],c=o[s.w];u!==void 0&&c!==void 0&&(c.indegree++,u.out.push(o[s.w]))});var a=(i=(r=Object.values(o)).filter)===null||i===void 0?void 0:i.call(r,function(s){return!s.indegree});return _F(a)};var dy={};Object.defineProperty(dy,"__esModule",{value:!0});var CF=Qr,jC=function(e,n,t){for(var r,i=t;n.length&&(r=n[n.length-1]).i<=i;)n.pop(),e==null||e.push(r.vs),i++;return i},AF=function(e,n){return function(t,r){if(t.fixorder!==void 0&&r.fixorder!==void 0)return t.fixorder-r.fixorder;if(t.barycenter<r.barycenter)return-1;if(t.barycenter>r.barycenter)return 1;if(n&&t.order!==void 0&&r.order!==void 0){if(t.order<r.order)return-1;if(t.order>r.order)return 1}return e?r.i-t.i:t.i-r.i}};dy.default=function(e,n,t,r){var i=(0,CF.partition)(e,function(d){var f=d.hasOwnProperty("fixorder")&&!isNaN(d.fixorder);return r?!f&&d.hasOwnProperty("barycenter"):f||d.hasOwnProperty("barycenter")}),o=i.lhs,a=i.rhs.sort(function(d,f){return-d.i- -f.i}),s=[],u=0,c=0,l=0;o==null||o.sort(AF(!!n,!!t)),l=jC(s,a,l),o==null||o.forEach(function(d){var f;l+=(f=d.vs)===null||f===void 0?void 0:f.length,s.push(d.vs),u+=d.barycenter*d.weight,c+=d.weight,l=jC(s,a,l)});var h={vs:s.flat()};return c&&(h.barycenter=u/c,h.weight=c),h};var fy=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cy,"__esModule",{value:!0});var IF=fy(ly),TF=fy(hy),OF=fy(dy),zC=function(e,n,t,r,i,o){var a,s,u,c,l=e.children(n),h=e.node(n),d=h?h.borderLeft:void 0,f=h?h.borderRight:void 0,p={};d&&(l=l==null?void 0:l.filter(function(x){return x!==d&&x!==f}));var g=(0,IF.default)(e,l||[]);g==null||g.forEach(function(x){var w;if(!((w=e.children(x.v))===null||w===void 0)&&w.length){var E=zC(e,x.v,t,r,o);p[x.v]=E,E.hasOwnProperty("barycenter")&&PF(x,E)}});var v=(0,TF.default)(g,t);NF(v,p),(a=v.filter(function(x){return x.vs.length>0}))===null||a===void 0||a.forEach(function(x){var w=e.node(x.vs[0]);w&&(x.fixorder=w.fixorder,x.order=w.order)});var m=(0,OF.default)(v,r,i,o);if(d&&(m.vs=[d,m.vs,f].flat(),(s=e.predecessors(d))===null||s===void 0?void 0:s.length)){var y=e.node(((u=e.predecessors(d))===null||u===void 0?void 0:u[0])||""),b=e.node(((c=e.predecessors(f))===null||c===void 0?void 0:c[0])||"");m.hasOwnProperty("barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+b.order)/(m.weight+2),m.weight+=2}return m},NF=function(e,n){e==null||e.forEach(function(t){var r,i=(r=t.vs)===null||r===void 0?void 0:r.map(function(o){return n[o]?n[o].vs:o});t.vs=i.flat()})},PF=function(e,n){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+n.barycenter*n.weight)/(e.weight+n.weight),e.weight+=n.weight):(e.barycenter=n.barycenter,e.weight=n.weight)};cy.default=zC;var _l=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zm,"__esModule",{value:!0});var FC=_l(Km),GC=_l(ay),DF=_l(sy),LF=_l(uy),BF=_l(cy),YC=Cn(),RF=jo,py=Qr,XC=function(e,n,t){return n.map(function(r){return(0,DF.default)(e,r,t)})},UC=function(e,n,t,r){var i=new RF.Graph;e==null||e.forEach(function(o){for(var a,s=o.graph().root,u=(0,BF.default)(o,s,i,n,t,r),c=0;c<((a=u.vs)===null||a===void 0?void 0:a.length);c++){var l=o.node(u.vs[c]);l&&(l.order=c)}(0,LF.default)(o,i,u.vs)})},gy=function(e,n){n==null||n.forEach(function(t){t==null||t.forEach(function(r,i){e.node(r).order=i})})};Zm.default=function(e,n){for(var t=(0,py.maxRank)(e),r=[],i=[],o=1;o<t+1;o++)r.push(o);for(o=t-1;o>-1;o--)i.push(o);var a=XC(e,r,"inEdges"),s=XC(e,i,"outEdges"),u=(0,FC.default)(e);gy(e,u);for(var c,l=Number.POSITIVE_INFINITY,h=(o=0,0);h<4;++o,++h)UC(o%2?a:s,o%4>=2,!1,n),u=(0,py.buildLayerMatrix)(e),(d=(0,GC.default)(e,u))<l&&(h=0,c=(0,YC.clone)(u),l=d);for(u=(0,FC.default)(e),gy(e,u),o=0,h=0;h<4;++o,++h){var d;UC(o%2?a:s,o%4>=2,!0,n),u=(0,py.buildLayerMatrix)(e),(d=(0,GC.default)(e,u))<l&&(h=0,c=(0,YC.clone)(u),l=d)}gy(e,c)};var vy={},WC={};(function(e){var n=Ee&&Ee.__extends||function(){var a=function(s,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(c[h]=l[h])},a(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function c(){this.constructor=s}a(s,u),s.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.width=e.sep=e.positionX=e.balance=e.alignCoordinates=e.findSmallestWidthAlignment=e.buildBlockGraph=e.horizontalCompaction=e.verticalAlignment=e.hasConflict=e.addConflict=e.findOtherInnerSegmentNode=e.findType2Conflicts=e.findType1Conflicts=void 0;var t=RC,r=Qr,i=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return n(s,a),s}(Af.Graph);e.findType1Conflicts=function(a,s){var u={};return s!=null&&s.length&&s.reduce(function(c,l){var h=0,d=0,f=c.length,p=l==null?void 0:l[(l==null?void 0:l.length)-1];return l==null||l.forEach(function(g,v){var m,y=(0,e.findOtherInnerSegmentNode)(a,g),b=y?a.node(y).order:f;(y||g===p)&&((m=l.slice(d,v+1))===null||m===void 0||m.forEach(function(x){var w;(w=a.predecessors(x))===null||w===void 0||w.forEach(function(E){var S,M=a.node(E),k=M.order;!(k<h||b<k)||M.dummy&&(!((S=a.node(x))===null||S===void 0)&&S.dummy)||(0,e.addConflict)(u,E,x)})}),d=v+1,h=b)}),l}),u},e.findType2Conflicts=function(a,s){var u={};function c(h,d,f,p,g){for(var v,m,y,b=d;b<f;b++)y=h[b],!((v=a.node(y))===null||v===void 0)&&v.dummy&&((m=a.predecessors(y))===null||m===void 0||m.forEach(function(x){var w=a.node(x);w.dummy&&(w.order<p||w.order>g)&&(0,e.addConflict)(u,x,y)}))}function l(h,d){var f=function(p){return JSON.stringify(p.slice(1))}(h);d.get(f)||(c.apply(void 0,h),d.set(f,!0))}return s!=null&&s.length&&s.reduce(function(h,d){var f,p=-1,g=0,v=new Map;return d==null||d.forEach(function(m,y){var b;if(((b=a.node(m))===null||b===void 0?void 0:b.dummy)==="border"){var x=a.predecessors(m)||[];x.length&&(f=a.node(x[0]).order,l([d,g,y,p,f],v),g=y,p=f)}l([d,g,d.length,f,h.length],v)}),d}),u},e.findOtherInnerSegmentNode=function(a,s){var u,c;if(!((u=a.node(s))===null||u===void 0)&&u.dummy)return(c=a.predecessors(s))===null||c===void 0?void 0:c.find(function(l){return a.node(l).dummy})},e.addConflict=function(a,s,u){var c=s,l=u;if(c>l){var h=c;c=l,l=h}var d=a[c];d||(a[c]=d={}),d[l]=!0},e.hasConflict=function(a,s,u){var c=s;return c>u&&(c=u),!!a[c]},e.verticalAlignment=function(a,s,u,c){var l={},h={},d={};return s==null||s.forEach(function(f){f==null||f.forEach(function(p,g){l[p]=p,h[p]=p,d[p]=g})}),s==null||s.forEach(function(f){var p=-1;f==null||f.forEach(function(g){var v=c(g);if(v.length){v=v.sort(function(w,E){return d[w]-d[E]});for(var m=(v.length-1)/2,y=Math.floor(m),b=Math.ceil(m);y<=b;++y){var x=v[y];h[g]===g&&p<d[x]&&!(0,e.hasConflict)(u,g,x)&&(h[x]=g,h[g]=l[g]=l[x],p=d[x])}}})}),{root:l,align:h}},e.horizontalCompaction=function(a,s,u,c,l){var h,d={},f=(0,e.buildBlockGraph)(a,s,u,l),p=l?"borderLeft":"borderRight",g=function(v,m){for(var y=f.nodes(),b=y.pop(),x={};b;)x[b]?v(b):(x[b]=!0,y.push(b),y=y.concat(m(b))),b=y.pop()};return g(function(v){d[v]=(f.inEdges(v)||[]).reduce(function(m,y){return Math.max(m,(d[y.v]||0)+f.edge(y))},0)},f.predecessors.bind(f)),g(function(v){var m=(f.outEdges(v)||[]).reduce(function(b,x){return Math.min(b,(d[x.w]||0)-f.edge(x))},Number.POSITIVE_INFINITY),y=a.node(v);m!==Number.POSITIVE_INFINITY&&y.borderType!==p&&(d[v]=Math.max(d[v],m))},f.successors.bind(f)),(h=Object.values(c))===null||h===void 0||h.forEach(function(v){d[v]=d[u[v]]}),d},e.buildBlockGraph=function(a,s,u,c){var l=new i,h=a.graph(),d=(0,e.sep)(h.nodesep,h.edgesep,c);return s==null||s.forEach(function(f){var p;f==null||f.forEach(function(g){var v=u[g];if(l.setNode(v),p){var m=u[p],y=l.edgeFromArgs(m,v);l.setEdge(m,v,Math.max(d(a,g,p),y||0))}p=g})}),l};function o(a,s){var u=Object.values(s),c=(0,t.min)(u),l=(0,t.max)(u);["u","d"].forEach(function(h){["l","r"].forEach(function(d){var f,p=h+d,g=a[p];if(g!==s){var v=Object.values(g);(f=d==="l"?c-(0,t.min)(v):l-(0,t.max)(v))&&(a[p]={},Object.keys(g).forEach(function(m){a[p][m]=g[m]+f}))}})})}e.findSmallestWidthAlignment=function(a,s){return(0,r.minBy)(Object.values(s),function(u){var c,l=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;return(c=Object.keys(u))===null||c===void 0||c.forEach(function(d){var f=u[d],p=(0,e.width)(a,d)/2;l=Math.max(f+p,l),h=Math.min(f-p,h)}),l-h})},e.alignCoordinates=o,e.balance=function(a,s){var u={};return Object.keys(a.ul).forEach(function(c){if(s)u[c]=a[s.toLowerCase()][c];else{var l=Object.values(a).map(function(h){return h[c]});u[c]=(l[0]+l[1])/2}}),u},e.positionX=function(a){var s,u=(0,r.buildLayerMatrix)(a),c=Object.assign((0,e.findType1Conflicts)(a,u),(0,e.findType2Conflicts)(a,u)),l={};["u","d"].forEach(function(d){s=d==="u"?u:Object.values(u).reverse(),["l","r"].forEach(function(f){f==="r"&&(s=s.map(function(m){return Object.values(m).reverse()}));var p=(d==="u"?a.predecessors:a.successors).bind(a),g=(0,e.verticalAlignment)(a,s,c,p),v=(0,e.horizontalCompaction)(a,s,g.root,g.align,f==="r");f==="r"&&Object.keys(v).forEach(function(m){v[m]=-v[m]}),l[d+f]=v})});var h=(0,e.findSmallestWidthAlignment)(a,l);return o(l,h),(0,e.balance)(l,a.graph().align)},e.sep=function(a,s,u){return function(c,l,h){var d,f=c.node(l),p=c.node(h),g=0;if(g+=f.width/2,f.hasOwnProperty("labelpos"))switch((f.labelpos||"").toLowerCase()){case"l":d=-f.width/2;break;case"r":d=f.width/2}if(d&&(g+=u?d:-d),d=0,g+=(f.dummy?s:a)/2,g+=(p.dummy?s:a)/2,g+=p.width/2,p.labelpos)switch((p.labelpos||"").toLowerCase()){case"l":d=p.width/2;break;case"r":d=-p.width/2}return d&&(g+=u?d:-d),d=0,g}},e.width=function(a,s){return a.node(s).width||0}})(WC);var VC=Ee&&Ee.__spreadArray||function(e,n,t){if(t||arguments.length===2)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(vy,"__esModule",{value:!0});var my=Qr,ds=WC;vy.default=function(e){var n,t=(0,my.asNonCompoundGraph)(e);(function(i){var o=(0,my.buildLayerMatrix)(i),a=i.graph().ranksep,s=0;o==null||o.forEach(function(u){var c=u.map(function(h){return i.node(h).height}),l=Math.max.apply(Math,VC(VC([],c,!1),[0],!1));u==null||u.forEach(function(h){i.node(h).y=s+l/2}),s+=l+a})})(t);var r=function(i){var o=(0,my.buildLayerMatrix)(i),a=Object.assign((0,ds.findType1Conflicts)(i,o),(0,ds.findType2Conflicts)(i,o)),s={},u=[];["u","d"].forEach(function(l){u=l==="u"?o:Object.values(o).reverse(),["l","r"].forEach(function(h){h==="r"&&(u=u.map(function(g){return Object.values(g).reverse()}));var d=(l==="u"?i.predecessors:i.successors).bind(i),f=(0,ds.verticalAlignment)(i,u,a,d),p=(0,ds.horizontalCompaction)(i,u,f.root,f.align,h==="r");h==="r"&&Object.keys(p).forEach(function(g){return p[g]=-p[g]}),s[l+h]=p})});var c=(0,ds.findSmallestWidthAlignment)(i,s);return c&&(0,ds.alignCoordinates)(s,c),(0,ds.balance)(s,i.graph().align)}(t);(n=Object.keys(r))===null||n===void 0||n.forEach(function(i){t.node(i).x=r[i]})};var yy={};Object.defineProperty(yy,"__esModule",{value:!0}),yy.default=function(e,n){for(var t=e.nodes().filter(function(s){var u;return!(!((u=e.children(s))===null||u===void 0)&&u.length)}),r=t.map(function(s){return e.node(s).rank}),i=Math.max.apply(Math,r),o=[],a=0;a<i+1;a++)o[a]=[];n==null||n.forEach(function(s){var u=e.node(s);u&&!(u!=null&&u.dummy)&&(isNaN(u.rank)||(u.fixorder=o[u.rank].length,o[u.rank].push(s)))})};var Ff=Ee&&Ee.__assign||function(){return Ff=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Ff.apply(this,arguments)},co=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_m,"__esModule",{value:!0});var HC=co(km),qC=co(Fm),jF=co(Gm),lo=Qr,zF=co(Ym),ZC=co(Xm),FF=co(Wm),KC=co(Vm),GF=co(Zm),YF=co(vy),XF=co(yy),UF=jo,WF=function(e,n,t){n("    removeSelfEdges",function(){l8(e)}),n("    acyclic",function(){HC.default.run(e)}),n("    nestingGraph.run",function(){ZC.default.run(e)}),n("    rank",function(){(0,jF.default)((0,lo.asNonCompoundGraph)(e))}),n("    injectEdgeLabelProxies",function(){n8(e)}),n("    removeEmptyRanks",function(){(0,lo.removeEmptyRanks)(e)}),n("    nestingGraph.cleanup",function(){ZC.default.cleanup(e)}),n("    normalizeRanks",function(){(0,lo.normalizeRanks)(e)}),n("    assignRankMinMax",function(){r8(e)}),n("    removeEdgeLabelProxies",function(){i8(e)}),n("    normalize.run",function(){qC.default.run(e)}),n("    parentDummyChains",function(){(0,zF.default)(e)}),n("    addBorderSegments",function(){(0,FF.default)(e)}),t&&t.keepNodeOrder&&n("    initDataOrder",function(){(0,XF.default)(e,t.nodeOrder)}),n("    order",function(){(0,GF.default)(e,t==null?void 0:t.keepNodeOrder)}),n("    insertSelfEdges",function(){h8(e)}),n("    adjustCoordinateSystem",function(){KC.default.adjust(e)}),n("    position",function(){(0,YF.default)(e)}),n("    positionSelfEdges",function(){d8(e)}),n("    removeBorderNodes",function(){c8(e)}),n("    normalize.undo",function(){qC.default.undo(e)}),n("    fixupEdgeLabelCoords",function(){s8(e)}),n("    undoCoordinateSystem",function(){KC.default.undo(e)}),n("    translateGraph",function(){o8(e)}),n("    assignNodeIntersects",function(){a8(e)}),n("    reversePoints",function(){u8(e)}),n("    acyclic.undo",function(){HC.default.undo(e)})},VF=function(e,n){e.nodes().forEach(function(t){var r=e.node(t),i=n.node(t);i!==void 0?(r.fixorder=i._order,delete i._order):delete r.fixorder})},HF=function(e,n){e.nodes().forEach(function(t){var r,i=e.node(t);if(i){var o=n.node(t);i.x=o.x,i.y=o.y,i._order=o.order,i._rank=o.rank,!((r=n.children(t))===null||r===void 0)&&r.length&&(i.width=o.width,i.height=o.height)}}),e.edges().forEach(function(t){var r=e.edge(t),i=n.edge(t);r.points=i?i.points:[],i&&i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=n.graph().width,e.graph().height=n.graph().height},qF=["nodesep","edgesep","ranksep","marginx","marginy"],ZF={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},$C=["acyclicer","ranker","rankdir","align"],KF=["width","height","layer","fixorder"],$F={width:0,height:0},QF=["minlen","weight","width","height","labeloffset"],JF={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},QC=["labelpos"],e8=function(e){var n=new UF.Graph({multigraph:!0,compound:!0}),t=xy(e.graph()),r={};return $C==null||$C.forEach(function(i){t[i]!==void 0&&(r[i]=t[i])}),n.setGraph(Object.assign({},ZF,by(t,qF),r)),e.nodes().forEach(function(i){var o=xy(e.node(i)),a=Ff(Ff({},$F),o),s=by(a,KF);n.setNode(i,s),n.setParent(i,e.parent(i))}),e.edges().forEach(function(i){var o=xy(e.edge(i)),a={};QC==null||QC.forEach(function(s){o[s]!==void 0&&(a[s]=o[s])}),n.setEdgeObj(i,Object.assign({},JF,by(o,QF),a))}),n},t8=function(e){var n=e.graph();n.ranksep||(n.ranksep=0),n.ranksep/=2,e.nodes().forEach(function(t){var r=e.node(t);isNaN(r.layer)||r.layer||(r.layer=0)}),e.edges().forEach(function(t){var r,i=e.edge(t);i.minlen*=2,((r=i.labelpos)===null||r===void 0?void 0:r.toLowerCase())!=="c"&&(n.rankdir==="TB"||n.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})},n8=function(e){e.edges().forEach(function(n){var t=e.edge(n);if(t.width&&t.height){var r=e.node(n.v),i={e:n,rank:(e.node(n.w).rank-r.rank)/2+r.rank};(0,lo.addDummyNode)(e,"edge-proxy",i,"_ep")}})},r8=function(e){var n=0;e.nodes().forEach(function(t){var r,i,o=e.node(t);o.borderTop&&(o.minRank=(r=e.node(o.borderTop))===null||r===void 0?void 0:r.rank,o.maxRank=(i=e.node(o.borderBottom))===null||i===void 0?void 0:i.rank,n=Math.max(n,o.maxRank||-1/0))}),e.graph().maxRank=n},i8=function(e){e.nodes().forEach(function(n){var t=e.node(n);t.dummy==="edge-proxy"&&(e.edge(t.e).labelRank=t.rank,e.removeNode(n))})},o8=function(e){var n,t,r=0,i=0,o=e.graph(),a=o.marginx||0,s=o.marginy||0,u=function(c){if(c){var l=c.x,h=c.y,d=c.width,f=c.height;isNaN(l)||isNaN(d)||(n===void 0&&(n=l-d/2),n=Math.min(n,l-d/2),r=Math.max(r,l+d/2)),isNaN(h)||isNaN(f)||(t===void 0&&(t=h-f/2),t=Math.min(t,h-f/2),i=Math.max(i,h+f/2))}};e.nodes().forEach(function(c){u(e.node(c))}),e.edges().forEach(function(c){var l=e.edge(c);l!=null&&l.hasOwnProperty("x")&&u(l)}),n-=a,t-=s,e.nodes().forEach(function(c){var l=e.node(c);l&&(l.x-=n,l.y-=t)}),e.edges().forEach(function(c){var l,h=e.edge(c);(l=h.points)===null||l===void 0||l.forEach(function(d){d.x-=n,d.y-=t}),h.hasOwnProperty("x")&&(h.x-=n),h.hasOwnProperty("y")&&(h.y-=t)}),o.width=r-n+a,o.height=i-t+s},a8=function(e){e.edges().forEach(function(n){var t,r,i=e.edge(n),o=e.node(n.v),a=e.node(n.w);i.points?(t=i.points[0],r=i.points[i.points.length-1]):(i.points=[],t=a,r=o),i.points.unshift((0,lo.intersectRect)(o,t)),i.points.push((0,lo.intersectRect)(a,r))})},s8=function(e){e.edges().forEach(function(n){var t=e.edge(n);if(t!=null&&t.hasOwnProperty("x"))switch(t.labelpos!=="l"&&t.labelpos!=="r"||(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset}})},u8=function(e){e.edges().forEach(function(n){var t,r=e.edge(n);r.reversed&&((t=r.points)===null||t===void 0||t.reverse())})},c8=function(e){e.nodes().forEach(function(n){var t,r,i;if(!((t=e.children(n))===null||t===void 0)&&t.length){var o=e.node(n),a=e.node(o.borderTop),s=e.node(o.borderBottom),u=e.node(o.borderLeft[((r=o.borderLeft)===null||r===void 0?void 0:r.length)-1]),c=e.node(o.borderRight[((i=o.borderRight)===null||i===void 0?void 0:i.length)-1]);o.width=Math.abs((c==null?void 0:c.x)-(u==null?void 0:u.x))||10,o.height=Math.abs((s==null?void 0:s.y)-(a==null?void 0:a.y))||10,o.x=((u==null?void 0:u.x)||0)+o.width/2,o.y=((a==null?void 0:a.y)||0)+o.height/2}}),e.nodes().forEach(function(n){var t;((t=e.node(n))===null||t===void 0?void 0:t.dummy)==="border"&&e.removeNode(n)})},l8=function(e){e.edges().forEach(function(n){if(n.v===n.w){var t=e.node(n.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:n,label:e.edge(n)}),e.removeEdgeObj(n)}})},h8=function(e){var n=(0,lo.buildLayerMatrix)(e);n==null||n.forEach(function(t){var r=0;t==null||t.forEach(function(i,o){var a,s=e.node(i);s.order=o+r,(a=s.selfEdges)===null||a===void 0||a.forEach(function(u){(0,lo.addDummyNode)(e,"selfedge",{width:u.label.width,height:u.label.height,rank:s.rank,order:o+ ++r,e:u.e,label:u.label},"_se")}),delete s.selfEdges})})},d8=function(e){e.nodes().forEach(function(n){var t=e.node(n);if(t.dummy==="selfedge"){var r=e.node(t.e.v),i=r.x+r.width/2,o=r.y,a=t.x-i,s=r.height/2;e.setEdgeObj(t.e,t.label),e.removeNode(n),t.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{y:o,x:i+a},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],t.label.x=t.x,t.label.y=t.y}})},by=function(e,n){var t={};return n==null||n.forEach(function(r){e[r]!==void 0&&(t[r]=+e[r])}),t},xy=function(e){e===void 0&&(e={});var n={};return Object.keys(e).forEach(function(t){n[t.toLowerCase()]=e[t]}),n};_m.default=function(e,n){var t=n&&n.debugTiming?lo.time:lo.notime;t("layout",function(){n&&!n.keepNodeOrder&&n.prevGraph&&t("  inheritOrder",function(){VF(e,n.prevGraph)});var r=t("  buildLayoutGraph",function(){return e8(e)});n&&n.edgeLabelSpace===!1||t("  makeSpaceForEdgeLabels",function(){t8(r)});try{t("  runLayout",function(){WF(r,t,n)})}catch(i){if(i.message==="Not possible to find intersection inside of the rectangle")return;throw i}t("  updateInputGraph",function(){HF(e,r)})})};var f8=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mm,"__esModule",{value:!0});var p8=f8(_m),JC=Qr;Mm.default={layout:p8.default,util:{time:JC.time,notime:JC.notime}};var g8=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),v8=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_u,"__esModule",{value:!0}),_u.DagreLayout=void 0;var m8=v8(Mm),Jr=Cn(),eA=jo,y8=function(e){function n(t){var r=e.call(this)||this;return r.rankdir="TB",r.nodesep=50,r.ranksep=50,r.controlPoints=!1,r.sortByCombo=!1,r.edgeLabelSpace=!0,r.radial=!1,r.nodes=[],r.edges=[],r.onLayoutEnd=function(){},r.layoutNode=function(i){var o=r.nodes.find(function(a){return a.id===i});return!o||o.layout!==!1},r.updateCfg(t),r}return g8(n,e),n.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},n.prototype.execute=function(){var t,r,i,o,a=this,s=this,u=s.nodes,c=s.nodeSize,l=s.rankdir,h=s.combos,d=s.begin,f=s.radial,p=s.comboEdges,g=p===void 0?[]:p,v=s.vedges,m=v===void 0?[]:v;if(u){var y=s.edges||[],b=new eA.Graph({multigraph:!0,compound:!0});s.nodeMap={};var x={};u.forEach(function(O){s.nodeMap[O.id]=O,O.comboId&&(x[O.comboId]=x[O.comboId]||[],x[O.comboId].push(O.id))});var w,E=[],S={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(function(O){S[O]=!0,E.push(s.nodeMap[O])}),u.forEach(function(O){S[O.id]||E.push(O)})):E=u,w=c?(0,Jr.isArray)(c)?function(){return c}:function(){return[c,c]}:function(O){return O.size?(0,Jr.isArray)(O.size)?O.size:(0,Jr.isObject)(O.size)?[O.size.width||40,O.size.height||40]:[O.size,O.size]:[40,40]};var M=(0,Jr.getFunc)(s.ranksep,50,s.ranksepFunc),k=(0,Jr.getFunc)(s.nodesep,50,s.nodesepFunc),_=k,C=M;l!=="LR"&&l!=="RL"||(_=M,C=k),b.setDefaultEdgeLabel(function(){return{}}),b.setGraph(s);var T={};this.sortByCombo&&h&&h.forEach(function(O){if(T[O.id]=O,O.collapsed){var fe=w(O),_e=C(O),Ze=_(O),Je=fe[0]+2*Ze,qe=fe[1]+2*_e;b.setNode(O.id,{width:Je,height:qe})}O.parentId&&(T[O.parentId]||b.setNode(O.parentId,{}),b.setParent(O.id,O.parentId))}),E.filter(function(O){return O.layout!==!1}).forEach(function(O){var fe=w(O),_e=C(O),Ze=_(O),Je=fe[0]+2*Ze,qe=fe[1]+2*_e,bt=O.layer;(0,Jr.isNumber)(bt)?b.setNode(O.id,{width:Je,height:qe,layer:bt}):b.setNode(O.id,{width:Je,height:qe}),a.sortByCombo&&O.comboId&&(T[O.comboId]||(T[O.comboId]={id:O.comboId},b.setNode(O.comboId,{})),b.setParent(O.id,O.comboId))}),y.forEach(function(O){var fe=(0,Jr.getEdgeTerminal)(O,"source"),_e=(0,Jr.getEdgeTerminal)(O,"target");a.layoutNode(fe)&&a.layoutNode(_e)&&b.setEdge(fe,_e,{weight:O.weight||1})}),(r=g==null?void 0:g.concat(m||[]))===null||r===void 0||r.forEach(function(O){var fe,_e,Ze=O.source,Je=O.target,qe=!((fe=T[Ze])===null||fe===void 0)&&fe.collapsed?[Ze]:x[Ze]||[Ze],bt=!((_e=T[Je])===null||_e===void 0)&&_e.collapsed?[Je]:x[Je]||[Je];qe.forEach(function(vt){bt.forEach(function(Mt){b.setEdge(vt,Mt,{weight:O.weight||1})})})});var A=void 0;!((i=s.preset)===null||i===void 0)&&i.nodes&&(A=new eA.Graph({multigraph:!0,compound:!0}),s.preset.nodes.forEach(function(O){A==null||A.setNode(O.id,O)})),m8.default.layout(b,{prevGraph:A,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});var D=[0,0];if(d){var R=1/0,B=1/0;b.nodes().forEach(function(O){var fe=b.node(O);R>fe.x&&(R=fe.x),B>fe.y&&(B=fe.y)}),b.edges().forEach(function(O){var fe;(fe=b.edge(O).points)===null||fe===void 0||fe.forEach(function(_e){R>_e.x&&(R=_e.x),B>_e.y&&(B=_e.y)})}),D[0]=d[0]-R,D[1]=d[1]-B}var F=l==="LR"||l==="RL";if(f){var N=this,L=N.focusNode,z=N.ranksep,Z=N.getRadialPos,ne=(0,Jr.isString)(L)?L:L==null?void 0:L.id,J=ne?(o=b.node(ne))===null||o===void 0?void 0:o._rank:0,q=[],ie=F?"y":"x",Me=F?"height":"width",me=1/0,ke=-1/0;b.nodes().forEach(function(O){var fe=b.node(O);if(s.nodeMap[O]){var _e=k(s.nodeMap[O]);if(J===0)q[fe._rank]||(q[fe._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),q[fe._rank].nodes.push(O),q[fe._rank].totalWidth+=2*_e+fe[Me],q[fe._rank].maxSize<Math.max(fe.width,fe.height)&&(q[fe._rank].maxSize=Math.max(fe.width,fe.height));else{var Ze=fe._rank-J;if(Ze===0)q[Ze]||(q[Ze]={nodes:[],totalWidth:0,maxSize:-1/0}),q[Ze].nodes.push(O),q[Ze].totalWidth+=2*_e+fe[Me],q[Ze].maxSize<Math.max(fe.width,fe.height)&&(q[Ze].maxSize=Math.max(fe.width,fe.height));else{var Je=Math.abs(Ze);q[Je]||(q[Je]={left:[],right:[],totalWidth:0,maxSize:-1/0}),q[Je].totalWidth+=2*_e+fe[Me],q[Je].maxSize<Math.max(fe.width,fe.height)&&(q[Je].maxSize=Math.max(fe.width,fe.height)),Ze<0?q[Je].left.push(O):q[Je].right.push(O)}}var qe=fe[ie]-fe[Me]/2-_e,bt=fe[ie]+fe[Me]/2+_e;qe<me&&(me=qe),bt>ke&&(ke=bt)}});var yt=z||50,Tt={},cn=(ke-me)/.9,ct=[.5*(me+ke-cn),.5*(me+ke+cn)],Ge=function(O,fe,_e,Ze){_e===void 0&&(_e=-1/0),Ze===void 0&&(Ze=[0,1]);var Je=_e;return O.forEach(function(qe){var bt=b.node(qe);Tt[qe]=fe;var vt=Z(bt[ie],ct,cn,fe,Ze),Mt=vt.x,Ot=vt.y;if(s.nodeMap[qe]){s.nodeMap[qe].x=Mt+D[0],s.nodeMap[qe].y=Ot+D[1],s.nodeMap[qe]._order=bt._order;var Bt=M(s.nodeMap[qe]);Je<Bt&&(Je=Bt)}}),Je},Oe=!0;q.forEach(function(O){var fe,_e,Ze,Je,qe,bt,vt;if(!((fe=O==null?void 0:O.nodes)===null||fe===void 0)&&fe.length||!((_e=O==null?void 0:O.left)===null||_e===void 0)&&_e.length||!((Ze=O==null?void 0:O.right)===null||Ze===void 0)&&Ze.length){if(Oe&&O.nodes.length===1){var Mt=O.nodes[0];return s.nodeMap[Mt]?(s.nodeMap[Mt].x=D[0],s.nodeMap[Mt].y=D[1],Tt[O.nodes[0]]=0,yt=M(s.nodeMap[Mt]),void(Oe=!1)):void 0}yt=Math.max(yt,O.totalWidth/(2*Math.PI));var Ot=-1/0;if(J===0||!((Je=O.nodes)===null||Je===void 0)&&Je.length)Ot=Ge(O.nodes,yt,Ot,[0,1]);else{var Bt=((qe=O.left)===null||qe===void 0?void 0:qe.length)/(((bt=O.left)===null||bt===void 0?void 0:bt.length)+((vt=O.right)===null||vt===void 0?void 0:vt.length));Ot=Ge(O.left,yt,Ot,[0,Bt]),Ot=Ge(O.right,yt,Ot,[Bt+.05,1])}yt+=Ot,Oe=!1,O.maxSize}}),b.edges().forEach(function(O){var fe,_e,Ze,Je=b.edge(O),qe=y.findIndex(function(gr){var Vr=(0,Jr.getEdgeTerminal)(gr,"source"),kr=(0,Jr.getEdgeTerminal)(gr,"target");return Vr===O.v&&kr===O.w});if(!(qe<=-1)&&s.edgeLabelSpace&&s.controlPoints&&y[qe].type!=="loop"){var bt=ie==="x"?"y":"x",vt=(fe=Je==null?void 0:Je.points)===null||fe===void 0?void 0:fe.slice(1,Je.points.length-1),Mt=[],Ot=(_e=b.node(O.v))===null||_e===void 0?void 0:_e[bt],Bt=Ot-((Ze=b.node(O.w))===null||Ze===void 0?void 0:Ze[bt]),fn=Tt[O.v],kn=fn-Tt[O.w];vt==null||vt.forEach(function(gr){var Vr=(gr[bt]-Ot)/Bt*kn+fn,kr=Z(gr[ie],ct,cn,Vr);Mt.push({x:kr.x+D[0],y:kr.y+D[1]})}),y[qe].controlPoints=Mt}})}else{var Ye=new Set,Pe=l==="BT"||l==="RL"?function(O,fe){return fe-O}:function(O,fe){return O-fe};b.nodes().forEach(function(O){var fe=b.node(O);if(fe){var _e=a.nodeMap[O];_e||(_e=h==null?void 0:h.find(function(Ze){return Ze.id===O})),_e&&(_e.x=fe.x+D[0],_e.y=fe.y+D[1],_e._order=fe._order,Ye.add(F?_e.x:_e.y))}});var Se=Array.from(Ye).sort(Pe),We=F?function(O,fe){return O.x!==fe.x}:function(O,fe){return O.y!==fe.y},Ve=F?function(O,fe,_e){var Ze=Math.max(fe.y,_e.y),Je=Math.min(fe.y,_e.y);return O.filter(function(qe){return qe.y<=Ze&&qe.y>=Je})}:function(O,fe,_e){var Ze=Math.max(fe.x,_e.x),Je=Math.min(fe.x,_e.x);return O.filter(function(qe){return qe.x<=Ze&&qe.x>=Je})};b.edges().forEach(function(O){var fe,_e=b.edge(O),Ze=y.findIndex(function(bt){var vt=(0,Jr.getEdgeTerminal)(bt,"source"),Mt=(0,Jr.getEdgeTerminal)(bt,"target");return vt===O.v&&Mt===O.w});if(!(Ze<=-1)&&s.edgeLabelSpace&&s.controlPoints&&y[Ze].type!=="loop"){(fe=_e==null?void 0:_e.points)===null||fe===void 0||fe.forEach(function(bt){bt.x+=D[0],bt.y+=D[1]});var Je=s.nodeMap[O.v],qe=s.nodeMap[O.w];y[Ze].controlPoints=b8(_e==null?void 0:_e.points,Je,qe,Se,F,We,Ve)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:y}}},n.prototype.getRadialPos=function(t,r,i,o,a){a===void 0&&(a=[0,1]);var s=(t-r[0])/i,u=2*(s=s*(a[1]-a[0])+a[0])*Math.PI;return{x:Math.cos(u)*o,y:Math.sin(u)*o}},n.prototype.getType=function(){return"dagre"},n}(Nn.Base);_u.DagreLayout=y8;var b8=function(e,n,t,r,i,o,a){var s=(e==null?void 0:e.slice(1,e.length-1))||[];if(n&&t){var u=n.x,c=n.y,l=t.x,h=t.y;if(i&&(u=n.y,c=n.x,l=t.y,h=t.x),h!==c&&u!==l){var d=r.indexOf(c),f=r[d+1];if(f){var p=s[0],g=i?{x:(c+f)/2,y:(p==null?void 0:p.y)||l}:{x:(p==null?void 0:p.x)||l,y:(c+f)/2};p&&!o(p,g)||s.unshift(g)}var v=r.indexOf(h),m=Math.abs(v-d);if(m===1)(s=a(s,n,t)).length||s.push(i?{x:(c+h)/2,y:u}:{x:u,y:(c+h)/2});else if(m>1){var y=r[v-1];if(y){var b=s[s.length-1],x=i?{x:(h+y)/2,y:(b==null?void 0:b.y)||l}:{x:(b==null?void 0:b.x)||u,y:(h+y)/2};b&&!o(b,x)||s.push(x)}}}}return s},kl={};const Gf={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function wy(e={},n=Gf){var t,r,i,o;const a=JSON.parse(JSON.stringify(n)),s=((t=e==null?void 0:e.graph)===null||t===void 0?void 0:t.meta)||{},u=((r=e==null?void 0:e.subScene)===null||r===void 0?void 0:r.meta)||{},c=((i=e==null?void 0:e.nodeSize)===null||i===void 0?void 0:i.meta)||{},l=((o=e==null?void 0:e.nodeSize)===null||o===void 0?void 0:o.node)||{},h=a.nodeSize.bridge;return{graph:{meta:Object.assign(a.graph.meta,s)},subScene:{meta:Object.assign(a.subScene.meta,u)},nodeSize:{meta:Object.assign(a.nodeSize.meta,c),node:Object.assign(a.nodeSize.node,l),bridge:h}}}function tA(e){return`\u25EC${e}\u25EC`}const Du=tA("ROOT"),nA=tA("BRIDGE_GRAPH");var Gr,fs,Lu,Ey;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(Gr||(Gr={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(fs||(fs={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(Lu||(Lu={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(Ey||(Ey={}));var Yf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Sy(e,n){return e(n={exports:{}},n.exports),n.exports}var Bu=function(e,n){return e===n||e!=e&&n!=n},Xf=function(e,n){for(var t=e.length;t--;)if(Bu(e[t][0],n))return t;return-1},x8=Array.prototype.splice;function Ru(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}Ru.prototype.clear=function(){this.__data__=[],this.size=0},Ru.prototype.delete=function(e){var n=this.__data__,t=Xf(n,e);return!(t<0||(t==n.length-1?n.pop():x8.call(n,t,1),--this.size,0))},Ru.prototype.get=function(e){var n=this.__data__,t=Xf(n,e);return t<0?void 0:n[t][1]},Ru.prototype.has=function(e){return Xf(this.__data__,e)>-1},Ru.prototype.set=function(e,n){var t=this.__data__,r=Xf(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this};var rA,Uf=Ru,iA=typeof Yf=="object"&&Yf&&Yf.Object===Object&&Yf,w8=typeof self=="object"&&self&&self.Object===Object&&self,Ti=iA||w8||Function("return this")(),hi=Ti.Symbol,oA=Object.prototype,E8=oA.hasOwnProperty,S8=oA.toString,Cl=hi?hi.toStringTag:void 0,M8=Object.prototype.toString,aA=hi?hi.toStringTag:void 0,Ma=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":aA&&aA in Object(e)?function(n){var t=E8.call(n,Cl),r=n[Cl];try{n[Cl]=void 0;var i=!0}catch(a){}var o=S8.call(n);return i&&(t?n[Cl]=r:delete n[Cl]),o}(e):function(n){return M8.call(n)}(e)},Yr=function(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")},Al=function(e){if(!Yr(e))return!1;var n=Ma(e);return n=="[object Function]"||n=="[object GeneratorFunction]"||n=="[object AsyncFunction]"||n=="[object Proxy]"},My=Ti["__core-js_shared__"],sA=(rA=/[^.]+$/.exec(My&&My.keys&&My.keys.IE_PROTO||""))?"Symbol(src)_1."+rA:"",_8=Function.prototype.toString,ps=function(e){if(e!=null){try{return _8.call(e)}catch(n){}try{return e+""}catch(n){}}return""},k8=/^\[object .+?Constructor\]$/,C8=Function.prototype,A8=Object.prototype,I8=C8.toString,T8=A8.hasOwnProperty,O8=RegExp("^"+I8.call(T8).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N8=function(e){return!(!Yr(e)||function(n){return!!sA&&sA in n}(e))&&(Al(e)?O8:k8).test(ps(e))},gs=function(e,n){var t=function(r,i){return r==null?void 0:r[i]}(e,n);return N8(t)?t:void 0},Il=gs(Ti,"Map"),Tl=gs(Object,"create"),P8=Object.prototype.hasOwnProperty,D8=Object.prototype.hasOwnProperty;function ju(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}ju.prototype.clear=function(){this.__data__=Tl?Tl(null):{},this.size=0},ju.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},ju.prototype.get=function(e){var n=this.__data__;if(Tl){var t=n[e];return t==="__lodash_hash_undefined__"?void 0:t}return P8.call(n,e)?n[e]:void 0},ju.prototype.has=function(e){var n=this.__data__;return Tl?n[e]!==void 0:D8.call(n,e)},ju.prototype.set=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Tl&&n===void 0?"__lodash_hash_undefined__":n,this};var uA=ju,Wf=function(e,n){var t=e.__data__;return function(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}(n)?t[typeof n=="string"?"string":"hash"]:t.map};function zu(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}zu.prototype.clear=function(){this.size=0,this.__data__={hash:new uA,map:new(Il||Uf),string:new uA}},zu.prototype.delete=function(e){var n=Wf(this,e).delete(e);return this.size-=n?1:0,n},zu.prototype.get=function(e){return Wf(this,e).get(e)},zu.prototype.has=function(e){return Wf(this,e).has(e)},zu.prototype.set=function(e,n){var t=Wf(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this};var Vf=zu;function Fu(e){var n=this.__data__=new Uf(e);this.size=n.size}Fu.prototype.clear=function(){this.__data__=new Uf,this.size=0},Fu.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},Fu.prototype.get=function(e){return this.__data__.get(e)},Fu.prototype.has=function(e){return this.__data__.has(e)},Fu.prototype.set=function(e,n){var t=this.__data__;if(t instanceof Uf){var r=t.__data__;if(!Il||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new Vf(r)}return t.set(e,n),this.size=t.size,this};var Gu=Fu,_y=function(e,n){for(var t=-1,r=e==null?0:e.length;++t<r&&n(e[t],t,e)!==!1;);return e},Hf=function(){try{var e=gs(Object,"defineProperty");return e({},"",{}),e}catch(n){}}(),qf=function(e,n,t){n=="__proto__"&&Hf?Hf(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t},L8=Object.prototype.hasOwnProperty,Zf=function(e,n,t){var r=e[n];L8.call(e,n)&&Bu(r,t)&&(t!==void 0||n in e)||qf(e,n,t)},Ol=function(e,n,t,r){var i=!t;t||(t={});for(var o=-1,a=n.length;++o<a;){var s=n[o],u=void 0;u===void 0&&(u=e[s]),i?qf(t,s,u):Zf(t,s,u)}return t},Oi=function(e){return e!=null&&typeof e=="object"},cA=function(e){return Oi(e)&&Ma(e)=="[object Arguments]"},lA=Object.prototype,B8=lA.hasOwnProperty,R8=lA.propertyIsEnumerable,Yu=cA(function(){return arguments}())?cA:function(e){return Oi(e)&&B8.call(e,"callee")&&!R8.call(e,"callee")},Pn=Array.isArray,j8=function(){return!1},vs=Sy(function(e,n){var t=n&&!n.nodeType&&n,r=t&&e&&!e.nodeType&&e,i=r&&r.exports===t?Ti.Buffer:void 0,o=(i?i.isBuffer:void 0)||j8;e.exports=o}),z8=/^(?:0|[1-9]\d*)$/,Kf=function(e,n){var t=typeof e;return!!(n=n==null?9007199254740991:n)&&(t=="number"||t!="symbol"&&z8.test(e))&&e>-1&&e%1==0&&e<n},ky=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},Mn={};Mn["[object Float32Array]"]=Mn["[object Float64Array]"]=Mn["[object Int8Array]"]=Mn["[object Int16Array]"]=Mn["[object Int32Array]"]=Mn["[object Uint8Array]"]=Mn["[object Uint8ClampedArray]"]=Mn["[object Uint16Array]"]=Mn["[object Uint32Array]"]=!0,Mn["[object Arguments]"]=Mn["[object Array]"]=Mn["[object ArrayBuffer]"]=Mn["[object Boolean]"]=Mn["[object DataView]"]=Mn["[object Date]"]=Mn["[object Error]"]=Mn["[object Function]"]=Mn["[object Map]"]=Mn["[object Number]"]=Mn["[object Object]"]=Mn["[object RegExp]"]=Mn["[object Set]"]=Mn["[object String]"]=Mn["[object WeakMap]"]=!1;var $f=function(e){return function(n){return e(n)}},Xu=Sy(function(e,n){var t=n&&!n.nodeType&&n,r=t&&e&&!e.nodeType&&e,i=r&&r.exports===t&&iA.process,o=function(){try{return r&&r.require&&r.require("util").types||i&&i.binding&&i.binding("util")}catch(a){}}();e.exports=o}),hA=Xu&&Xu.isTypedArray,Nl=hA?$f(hA):function(e){return Oi(e)&&ky(e.length)&&!!Mn[Ma(e)]},F8=Object.prototype.hasOwnProperty,dA=function(e,n){var t=Pn(e),r=!t&&Yu(e),i=!t&&!r&&vs(e),o=!t&&!r&&!i&&Nl(e),a=t||r||i||o,s=a?function(l,h){for(var d=-1,f=Array(l);++d<l;)f[d]=h(d);return f}(e.length,String):[],u=s.length;for(var c in e)!n&&!F8.call(e,c)||a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Kf(c,u))||s.push(c);return s},G8=Object.prototype,Qf=function(e){var n=e&&e.constructor;return e===(typeof n=="function"&&n.prototype||G8)},fA=function(e,n){return function(t){return e(n(t))}},Y8=fA(Object.keys,Object),X8=Object.prototype.hasOwnProperty,Cy=function(e){if(!Qf(e))return Y8(e);var n=[];for(var t in Object(e))X8.call(e,t)&&t!="constructor"&&n.push(t);return n},Fo=function(e){return e!=null&&ky(e.length)&&!Al(e)},_a=function(e){return Fo(e)?dA(e):Cy(e)},U8=Object.prototype.hasOwnProperty,W8=function(e){if(!Yr(e))return function(i){var o=[];if(i!=null)for(var a in Object(i))o.push(a);return o}(e);var n=Qf(e),t=[];for(var r in e)(r!="constructor"||!n&&U8.call(e,r))&&t.push(r);return t},ms=function(e){return Fo(e)?dA(e,!0):W8(e)},pA=Sy(function(e,n){var t=n&&!n.nodeType&&n,r=t&&e&&!e.nodeType&&e,i=r&&r.exports===t?Ti.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(a,s){if(s)return a.slice();var u=a.length,c=o?o(u):new a.constructor(u);return a.copy(c),c}}),gA=function(e,n){var t=-1,r=e.length;for(n||(n=Array(r));++t<r;)n[t]=e[t];return n},vA=function(e,n){for(var t=-1,r=e==null?0:e.length,i=0,o=[];++t<r;){var a=e[t];n(a,t,e)&&(o[i++]=a)}return o},mA=function(){return[]},V8=Object.prototype.propertyIsEnumerable,yA=Object.getOwnPropertySymbols,Ay=yA?function(e){return e==null?[]:(e=Object(e),vA(yA(e),function(n){return V8.call(e,n)}))}:mA,Iy=function(e,n){for(var t=-1,r=n.length,i=e.length;++t<r;)e[i+t]=n[t];return e},Jf=fA(Object.getPrototypeOf,Object),bA=Object.getOwnPropertySymbols?function(e){for(var n=[];e;)Iy(n,Ay(e)),e=Jf(e);return n}:mA,xA=function(e,n,t){var r=n(e);return Pn(e)?r:Iy(r,t(e))},Ty=function(e){return xA(e,_a,Ay)},H8=function(e){return xA(e,ms,bA)},Oy=gs(Ti,"DataView"),Ny=gs(Ti,"Promise"),Uu=gs(Ti,"Set"),Py=gs(Ti,"WeakMap"),q8=ps(Oy),Z8=ps(Il),K8=ps(Ny),$8=ps(Uu),Q8=ps(Py),ys=Ma;(Oy&&ys(new Oy(new ArrayBuffer(1)))!="[object DataView]"||Il&&ys(new Il)!="[object Map]"||Ny&&ys(Ny.resolve())!="[object Promise]"||Uu&&ys(new Uu)!="[object Set]"||Py&&ys(new Py)!="[object WeakMap]")&&(ys=function(e){var n=Ma(e),t=n=="[object Object]"?e.constructor:void 0,r=t?ps(t):"";if(r)switch(r){case q8:return"[object DataView]";case Z8:return"[object Map]";case K8:return"[object Promise]";case $8:return"[object Set]";case Q8:return"[object WeakMap]"}return n});var bs=ys,J8=Object.prototype.hasOwnProperty,ep=Ti.Uint8Array,Dy=function(e){var n=new e.constructor(e.byteLength);return new ep(n).set(new ep(e)),n},e9=/\w*$/,wA=hi?hi.prototype:void 0,EA=wA?wA.valueOf:void 0,SA=function(e,n){var t=n?Dy(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)},t9=function(e,n,t){var r=e.constructor;switch(n){case"[object ArrayBuffer]":return Dy(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return function(i,o){var a=o?Dy(i.buffer):i.buffer;return new i.constructor(a,i.byteOffset,i.byteLength)}(e,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return SA(e,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return function(i){var o=new i.constructor(i.source,e9.exec(i));return o.lastIndex=i.lastIndex,o}(e);case"[object Symbol]":return function(i){return EA?Object(EA.call(i)):{}}(e)}},MA=Object.create,_A=function(){function e(){}return function(n){if(!Yr(n))return{};if(MA)return MA(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}(),kA=function(e){return typeof e.constructor!="function"||Qf(e)?{}:_A(Jf(e))},CA=Xu&&Xu.isMap,n9=CA?$f(CA):function(e){return Oi(e)&&bs(e)=="[object Map]"},AA=Xu&&Xu.isSet,r9=AA?$f(AA):function(e){return Oi(e)&&bs(e)=="[object Set]"},wn={};wn["[object Arguments]"]=wn["[object Array]"]=wn["[object ArrayBuffer]"]=wn["[object DataView]"]=wn["[object Boolean]"]=wn["[object Date]"]=wn["[object Float32Array]"]=wn["[object Float64Array]"]=wn["[object Int8Array]"]=wn["[object Int16Array]"]=wn["[object Int32Array]"]=wn["[object Map]"]=wn["[object Number]"]=wn["[object Object]"]=wn["[object RegExp]"]=wn["[object Set]"]=wn["[object String]"]=wn["[object Symbol]"]=wn["[object Uint8Array]"]=wn["[object Uint8ClampedArray]"]=wn["[object Uint16Array]"]=wn["[object Uint32Array]"]=!0,wn["[object Error]"]=wn["[object Function]"]=wn["[object WeakMap]"]=!1;var IA=function e(n,t,r,i,o,a){var s,u=1&t,c=2&t,l=4&t;if(s!==void 0)return s;if(!Yr(n))return n;var h=Pn(n);if(h){if(s=function(v){var m=v.length,y=new v.constructor(m);return m&&typeof v[0]=="string"&&J8.call(v,"index")&&(y.index=v.index,y.input=v.input),y}(n),!u)return gA(n,s)}else{var d=bs(n),f=d=="[object Function]"||d=="[object GeneratorFunction]";if(vs(n))return pA(n,u);if(d=="[object Object]"||d=="[object Arguments]"||f&&!o){if(s=c||f?{}:kA(n),!u)return c?function(v,m){return Ol(v,bA(v),m)}(n,function(v,m){return v&&Ol(m,ms(m),v)}(s,n)):function(v,m){return Ol(v,Ay(v),m)}(n,function(v,m){return v&&Ol(m,_a(m),v)}(s,n))}else{if(!wn[d])return o?n:{};s=t9(n,d,u)}}a||(a=new Gu);var p=a.get(n);if(p)return p;a.set(n,s),r9(n)?n.forEach(function(v){s.add(e(v,t,r,v,n,a))}):n9(n)&&n.forEach(function(v,m){s.set(m,e(v,t,r,m,n,a))});var g=h?void 0:(l?c?H8:Ty:c?ms:_a)(n);return _y(g||n,function(v,m){g&&(v=n[m=v]),Zf(s,m,e(v,t,r,m,n,a))}),s},Ly=function(e){return function(){return e}},By=function(e,n,t){for(var r=-1,i=Object(e),o=t(e),a=o.length;a--;){var s=o[++r];if(n(i[s],s,i)===!1)break}return e},Ry=function(e,n){return e&&By(e,n,_a)},tp=function(e){return function(n,t){if(n==null)return n;if(!Fo(n))return e(n,t);for(var r=n.length,i=-1,o=Object(n);++i<r&&t(o[i],i,o)!==!1;);return n}}(Ry),xs=function(e){return e},TA=function(e){return typeof e=="function"?e:xs},OA=function(e,n){return(Pn(e)?_y:tp)(e,TA(n))},NA=OA,i9=function(e,n){var t=[];return tp(e,function(r,i,o){n(r,i,o)&&t.push(r)}),t};function np(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new Vf;++n<t;)this.add(e[n])}np.prototype.add=np.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},np.prototype.has=function(e){return this.__data__.has(e)};var PA=np,o9=function(e,n){for(var t=-1,r=e==null?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1},DA=function(e,n){return e.has(n)},LA=function(e,n,t,r,i,o){var a=1&t,s=e.length,u=n.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e),l=o.get(n);if(c&&l)return c==n&&l==e;var h=-1,d=!0,f=2&t?new PA:void 0;for(o.set(e,n),o.set(n,e);++h<s;){var p=e[h],g=n[h];if(r)var v=a?r(g,p,h,n,e,o):r(p,g,h,e,n,o);if(v!==void 0){if(v)continue;d=!1;break}if(f){if(!o9(n,function(m,y){if(!DA(f,y)&&(p===m||i(p,m,t,r,o)))return f.push(y)})){d=!1;break}}else if(p!==g&&!i(p,g,t,r,o)){d=!1;break}}return o.delete(e),o.delete(n),d},a9=function(e){var n=-1,t=Array(e.size);return e.forEach(function(r,i){t[++n]=[i,r]}),t},jy=function(e){var n=-1,t=Array(e.size);return e.forEach(function(r){t[++n]=r}),t},BA=hi?hi.prototype:void 0,zy=BA?BA.valueOf:void 0,s9=function(e,n,t,r,i,o,a){switch(t){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=n.byteLength||!o(new ep(e),new ep(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Bu(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var s=a9;case"[object Set]":var u=1&r;if(s||(s=jy),e.size!=n.size&&!u)return!1;var c=a.get(e);if(c)return c==n;r|=2,a.set(e,n);var l=LA(s(e),s(n),r,i,o,a);return a.delete(e),l;case"[object Symbol]":if(zy)return zy.call(e)==zy.call(n)}return!1},u9=Object.prototype.hasOwnProperty,RA=Object.prototype.hasOwnProperty,c9=function(e,n,t,r,i,o){var a=Pn(e),s=Pn(n),u=a?"[object Array]":bs(e),c=s?"[object Array]":bs(n),l=(u=u=="[object Arguments]"?"[object Object]":u)=="[object Object]",h=(c=c=="[object Arguments]"?"[object Object]":c)=="[object Object]",d=u==c;if(d&&vs(e)){if(!vs(n))return!1;a=!0,l=!1}if(d&&!l)return o||(o=new Gu),a||Nl(e)?LA(e,n,t,r,i,o):s9(e,n,u,t,r,i,o);if(!(1&t)){var f=l&&RA.call(e,"__wrapped__"),p=h&&RA.call(n,"__wrapped__");if(f||p){var g=f?e.value():e,v=p?n.value():n;return o||(o=new Gu),i(g,v,t,r,o)}}return!!d&&(o||(o=new Gu),function(m,y,b,x,w,E){var S=1&b,M=Ty(m),k=M.length;if(k!=Ty(y).length&&!S)return!1;for(var _=k;_--;){var C=M[_];if(!(S?C in y:u9.call(y,C)))return!1}var T=E.get(m),A=E.get(y);if(T&&A)return T==y&&A==m;var D=!0;E.set(m,y),E.set(y,m);for(var R=S;++_<k;){var B=m[C=M[_]],F=y[C];if(x)var N=S?x(F,B,C,y,m,E):x(B,F,C,m,y,E);if(!(N===void 0?B===F||w(B,F,b,x,E):N)){D=!1;break}R||(R=C=="constructor")}if(D&&!R){var L=m.constructor,z=y.constructor;L==z||!("constructor"in m)||!("constructor"in y)||typeof L=="function"&&L instanceof L&&typeof z=="function"&&z instanceof z||(D=!1)}return E.delete(m),E.delete(y),D}(e,n,t,r,i,o))},jA=function e(n,t,r,i,o){return n===t||(n==null||t==null||!Oi(n)&&!Oi(t)?n!=n&&t!=t:c9(n,t,r,i,e,o))},zA=function(e){return e==e&&!Yr(e)},FA=function(e,n){return function(t){return t!=null&&t[e]===n&&(n!==void 0||e in Object(t))}},l9=function(e){var n=function(t){for(var r=_a(t),i=r.length;i--;){var o=r[i],a=t[o];r[i]=[o,a,zA(a)]}return r}(e);return n.length==1&&n[0][2]?FA(n[0][0],n[0][1]):function(t){return t===e||function(r,i,o,a){var s=o.length,u=s;if(r==null)return!u;for(r=Object(r);s--;){var c=o[s];if(c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++s<u;){var l=(c=o[s])[0],h=r[l],d=c[1];if(c[2]){if(h===void 0&&!(l in r))return!1}else{var f=new Gu;if(!jA(d,h,3,a,f))return!1}}return!0}(t,0,n)}},ws=function(e){return typeof e=="symbol"||Oi(e)&&Ma(e)=="[object Symbol]"},h9=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d9=/^\w*$/,Fy=function(e,n){if(Pn(e))return!1;var t=typeof e;return!(t!="number"&&t!="symbol"&&t!="boolean"&&e!=null&&!ws(e))||d9.test(e)||!h9.test(e)||n!=null&&e in Object(n)};function Gy(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError("Expected a function");var t=function(){var r=arguments,i=n?n.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return t.cache=o.set(i,a)||o,a};return t.cache=new(Gy.Cache||Vf),t}Gy.Cache=Vf;var rp,f9=Gy,p9=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g9=/\\(\\)?/g,v9=function(){var e=f9(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(p9,function(i,o,a,s){r.push(a?s.replace(g9,"$1"):o||i)}),r},function(t){return n.size===500&&n.clear(),t}),n=e.cache;return e}(),Wu=function(e,n){for(var t=-1,r=e==null?0:e.length,i=Array(r);++t<r;)i[t]=n(e[t],t,e);return i},GA=hi?hi.prototype:void 0,YA=GA?GA.toString:void 0,m9=function e(n){if(typeof n=="string")return n;if(Pn(n))return Wu(n,e)+"";if(ws(n))return YA?YA.call(n):"";var t=n+"";return t=="0"&&1/n==-1/0?"-0":t},XA=function(e){return e==null?"":m9(e)},ip=function(e,n){return Pn(e)?e:Fy(e,n)?[e]:v9(XA(e))},Pl=function(e){if(typeof e=="string"||ws(e))return e;var n=e+"";return n=="0"&&1/e==-1/0?"-0":n},op=function(e,n){for(var t=0,r=(n=ip(n,e)).length;e!=null&&t<r;)e=e[Pl(n[t++])];return t&&t==r?e:void 0},y9=function(e,n){return e!=null&&n in Object(e)},UA=function(e,n,t){for(var r=-1,i=(n=ip(n,e)).length,o=!1;++r<i;){var a=Pl(n[r]);if(!(o=e!=null&&t(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=e==null?0:e.length)&&ky(i)&&Kf(a,i)&&(Pn(e)||Yu(e))},WA=function(e,n){return e!=null&&UA(e,n,y9)},b9=function(e,n){return Fy(e)&&zA(n)?FA(Pl(e),n):function(t){var r=function(i,o,a){var s=i==null?void 0:op(i,o);return s===void 0?a:s}(t,e);return r===void 0&&r===n?WA(t,e):jA(n,r,3)}},VA=function(e){return function(n){return n==null?void 0:n[e]}},x9=function(e){return Fy(e)?VA(Pl(e)):function(n){return function(t){return op(t,n)}}(e)},Go=function(e){return typeof e=="function"?e:e==null?xs:typeof e=="object"?Pn(e)?b9(e[0],e[1]):l9(e):x9(e)},HA=function(e,n){return(Pn(e)?vA:i9)(e,Go(n))},w9=Object.prototype.hasOwnProperty,E9=function(e,n){return e!=null&&w9.call(e,n)},qA=function(e,n){return e!=null&&UA(e,n,E9)},S9=Object.prototype.hasOwnProperty,ZA=function(e){return e===void 0},KA=function(e,n){var t=-1,r=Fo(e)?Array(e.length):[];return tp(e,function(i,o,a){r[++t]=n(i,o,a)}),r},$A=function(e,n){return(Pn(e)?Wu:KA)(e,Go(n))},M9=function(e,n,t,r){var i=-1,o=e==null?0:e.length;for(r&&o&&(t=e[++i]);++i<o;)t=n(t,e[i],i,e);return t},_9=function(e,n,t,r,i){return i(e,function(o,a,s){t=r?(r=!1,o):n(t,o,a,s)}),t},QA=function(e,n,t){var r=Pn(e)?M9:_9,i=arguments.length<3;return r(e,Go(n),t,i,tp)},k9=VA("length"),C9=RegExp("[\\u200d\uD800-\uDFFF\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Yy="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Xy="\uD83C[\uDFFB-\uDFFF]",JA="[^\uD800-\uDFFF]",eI="(?:\uD83C[\uDDE6-\uDDFF]){2}",tI="[\uD800-\uDBFF][\uDC00-\uDFFF]",nI="(?:"+Yy+"|"+Xy+")?",A9="[\\ufe0e\\ufe0f]?"+nI+"(?:\\u200d(?:"+[JA,eI,tI].join("|")+")[\\ufe0e\\ufe0f]?"+nI+")*",I9="(?:"+[JA+Yy+"?",Yy,eI,tI,"[\uD800-\uDFFF]"].join("|")+")",rI=RegExp(Xy+"(?="+Xy+")|"+I9+A9,"g"),T9=function(e){return function(n){return C9.test(n)}(e)?function(n){for(var t=rI.lastIndex=0;rI.test(n);)++t;return t}(e):k9(e)},iI=hi?hi.isConcatSpreadable:void 0,O9=function(e){return Pn(e)||Yu(e)||!!(iI&&e&&e[iI])},Uy=function(e,n,t,r,i){var o=-1,a=e.length;for(t||(t=O9),i||(i=[]);++o<a;){var s=e[o];t(s)?Iy(i,s):r||(i[i.length]=s)}return i},oI=Math.max,aI=function(e,n,t){return n=oI(n===void 0?e.length-1:n,0),function(){for(var r=arguments,i=-1,o=oI(r.length-n,0),a=Array(o);++i<o;)a[i]=r[n+i];i=-1;for(var s=Array(n+1);++i<n;)s[i]=r[i];return s[n]=t(a),function(u,c,l){switch(l.length){case 0:return u.call(c);case 1:return u.call(c,l[0]);case 2:return u.call(c,l[0],l[1]);case 3:return u.call(c,l[0],l[1],l[2])}return u.apply(c,l)}(e,this,s)}},N9=Hf?function(e,n){return Hf(e,"toString",{configurable:!0,enumerable:!1,value:Ly(n),writable:!0})}:xs,P9=Date.now,sI=function(e){var n=0,t=0;return function(){var r=P9(),i=16-(r-t);if(t=r,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(N9),ap=function(e,n){return sI(aI(e,n,xs),e+"")},uI=function(e,n,t,r){for(var i=e.length,o=t+-1;++o<i;)if(n(e[o],o,e))return o;return-1},D9=function(e){return e!=e},L9=function(e,n){return!(e==null||!e.length)&&function(t,r,i){return r==r?function(o,a,s){for(var u=s-1,c=o.length;++u<c;)if(o[u]===a)return u;return-1}(t,r,i):uI(t,D9,i)}(e,n,0)>-1},B9=Uu&&1/jy(new Uu([,-0]))[1]==1/0?function(e){return new Uu(e)}:function(){},cI=function(e){return Oi(e)&&Fo(e)},R9=ap(function(e){return function(n,t,r){var i=-1,o=L9,a=n.length,s=!0,u=[],c=u;if(a>=200){var l=B9(n);if(l)return jy(l);s=!1,o=DA,c=new PA}else c=u;e:for(;++i<a;){var h=n[i],d=h;if(h=h!==0?h:0,s&&d==d){for(var f=c.length;f--;)if(c[f]===d)continue e;u.push(h)}else o(c,d,r)||(c!==u&&c.push(d),u.push(h))}return u}(Uy(e,0,cI,!0))}),lI=function(e){return e==null?[]:function(n,t){return Wu(t,function(r){return n[r]})}(e,_a(e))};try{rp={clone:function(e){return IA(e,4)},constant:Ly,each:NA,filter:HA,has:qA,isArray:Pn,isEmpty:function(e){if(e==null)return!0;if(Fo(e)&&(Pn(e)||typeof e=="string"||typeof e.splice=="function"||vs(e)||Nl(e)||Yu(e)))return!e.length;var n=bs(e);if(n=="[object Map]"||n=="[object Set]")return!e.size;if(Qf(e))return!Cy(e).length;for(var t in e)if(S9.call(e,t))return!1;return!0},isFunction:Al,isUndefined:ZA,keys:_a,map:$A,reduce:QA,size:function(e){if(e==null)return 0;if(Fo(e))return function(t){return typeof t=="string"||!Pn(t)&&Oi(t)&&Ma(t)=="[object String]"}(e)?T9(e):e.length;var n=bs(e);return n=="[object Map]"||n=="[object Set]"?e.size:Cy(e).length},transform:function(e,n,t){var r=Pn(e),i=r||vs(e)||Nl(e);if(n=Go(n),t==null){var o=e&&e.constructor;t=i?r?new o:[]:Yr(e)&&Al(o)?_A(Jf(e)):{}}return(i?_y:Ry)(e,function(a,s,u){return n(t,a,s,u)}),t},union:R9,values:lI}}catch(e){}rp||(rp=window._);var pt=rp,Wy=rn;function rn(e){this._isDirected=!pt.has(e,"directed")||e.directed,this._isMultigraph=!!pt.has(e,"multigraph")&&e.multigraph,this._isCompound=!!pt.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=pt.constant(void 0),this._defaultEdgeLabelFn=pt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function hI(e,n){e[n]?e[n]++:e[n]=1}function dI(e,n){--e[n]||delete e[n]}function Dl(e,n,t,r){var i=""+n,o=""+t;if(!e&&i>o){var a=i;i=o,o=a}return i+""+o+""+(pt.isUndefined(r)?"\0":r)}function Vy(e,n){return Dl(e,n.v,n.w,n.name)}rn.prototype._nodeCount=0,rn.prototype._edgeCount=0,rn.prototype.isDirected=function(){return this._isDirected},rn.prototype.isMultigraph=function(){return this._isMultigraph},rn.prototype.isCompound=function(){return this._isCompound},rn.prototype.setGraph=function(e){return this._label=e,this},rn.prototype.graph=function(){return this._label},rn.prototype.setDefaultNodeLabel=function(e){return pt.isFunction(e)||(e=pt.constant(e)),this._defaultNodeLabelFn=e,this},rn.prototype.nodeCount=function(){return this._nodeCount},rn.prototype.nodes=function(){return pt.keys(this._nodes)},rn.prototype.sources=function(){var e=this;return pt.filter(this.nodes(),function(n){return pt.isEmpty(e._in[n])})},rn.prototype.sinks=function(){var e=this;return pt.filter(this.nodes(),function(n){return pt.isEmpty(e._out[n])})},rn.prototype.setNodes=function(e,n){var t=arguments,r=this;return pt.each(e,function(i){t.length>1?r.setNode(i,n):r.setNode(i)}),this},rn.prototype.setNode=function(e,n){return pt.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=n),this):(this._nodes[e]=arguments.length>1?n:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},rn.prototype.node=function(e){return this._nodes[e]},rn.prototype.hasNode=function(e){return pt.has(this._nodes,e)},rn.prototype.removeNode=function(e){var n=this;if(pt.has(this._nodes,e)){var t=function(r){n.removeEdge(n._edgeObjs[r])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],pt.each(this.children(e),function(r){n.setParent(r)}),delete this._children[e]),pt.each(pt.keys(this._in[e]),t),delete this._in[e],delete this._preds[e],pt.each(pt.keys(this._out[e]),t),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},rn.prototype.setParent=function(e,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(pt.isUndefined(n))n="\0";else{for(var t=n+="";!pt.isUndefined(t);t=this.parent(t))if(t===e)throw new Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=n,this._children[n][e]=!0,this},rn.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},rn.prototype.parent=function(e){if(this._isCompound){var n=this._parent[e];if(n!=="\0")return n}},rn.prototype.children=function(e){if(pt.isUndefined(e)&&(e="\0"),this._isCompound){var n=this._children[e];if(n)return pt.keys(n)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},rn.prototype.predecessors=function(e){var n=this._preds[e];if(n)return pt.keys(n)},rn.prototype.successors=function(e){var n=this._sucs[e];if(n)return pt.keys(n)},rn.prototype.neighbors=function(e){var n=this.predecessors(e);if(n)return pt.union(n,this.successors(e))},rn.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},rn.prototype.filterNodes=function(e){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var t=this;pt.each(this._nodes,function(o,a){e(a)&&n.setNode(a,o)}),pt.each(this._edgeObjs,function(o){n.hasNode(o.v)&&n.hasNode(o.w)&&n.setEdge(o,t.edge(o))});var r={};function i(o){var a=t.parent(o);return a===void 0||n.hasNode(a)?(r[o]=a,a):a in r?r[a]:i(a)}return this._isCompound&&pt.each(n.nodes(),function(o){n.setParent(o,i(o))}),n},rn.prototype.setDefaultEdgeLabel=function(e){return pt.isFunction(e)||(e=pt.constant(e)),this._defaultEdgeLabelFn=e,this},rn.prototype.edgeCount=function(){return this._edgeCount},rn.prototype.edges=function(){return pt.values(this._edgeObjs)},rn.prototype.setPath=function(e,n){var t=this,r=arguments;return pt.reduce(e,function(i,o){return r.length>1?t.setEdge(i,o,n):t.setEdge(i,o),o}),this},rn.prototype.setEdge=function(){var e,n,t,r,i=!1,o=arguments[0];typeof o=="object"&&o!==null&&"v"in o?(e=o.v,n=o.w,t=o.name,arguments.length===2&&(r=arguments[1],i=!0)):(e=o,n=arguments[1],t=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),e=""+e,n=""+n,pt.isUndefined(t)||(t=""+t);var a=Dl(this._isDirected,e,n,t);if(pt.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(!pt.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(n),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(e,n,t);var s=function(u,c,l,h){var d=""+c,f=""+l;if(!u&&d>f){var p=d;d=f,f=p}var g={v:d,w:f};return h&&(g.name=h),g}(this._isDirected,e,n,t);return e=s.v,n=s.w,Object.freeze(s),this._edgeObjs[a]=s,hI(this._preds[n],e),hI(this._sucs[e],n),this._in[n][a]=s,this._out[e][a]=s,this._edgeCount++,this},rn.prototype.edge=function(e,n,t){var r=arguments.length===1?Vy(this._isDirected,arguments[0]):Dl(this._isDirected,e,n,t);return this._edgeLabels[r]},rn.prototype.hasEdge=function(e,n,t){var r=arguments.length===1?Vy(this._isDirected,arguments[0]):Dl(this._isDirected,e,n,t);return pt.has(this._edgeLabels,r)},rn.prototype.removeEdge=function(e,n,t){var r=arguments.length===1?Vy(this._isDirected,arguments[0]):Dl(this._isDirected,e,n,t),i=this._edgeObjs[r];return i&&(e=i.v,n=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],dI(this._preds[n],e),dI(this._sucs[e],n),delete this._in[n][r],delete this._out[e][r],this._edgeCount--),this},rn.prototype.inEdges=function(e,n){var t=this._in[e];if(t){var r=pt.values(t);return n?pt.filter(r,function(i){return i.v===n}):r}},rn.prototype.outEdges=function(e,n){var t=this._out[e];if(t){var r=pt.values(t);return n?pt.filter(r,function(i){return i.w===n}):r}},rn.prototype.nodeEdges=function(e,n){var t=this.inEdges(e,n);if(t)return t.concat(this.outEdges(e,n))};var fI={Graph:Wy,version:"2.1.8"},j9={write:function(e){var n={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:z9(e),edges:F9(e)};return pt.isUndefined(e.graph())||(n.value=pt.clone(e.graph())),n},read:function(e){var n=new Wy(e.options).setGraph(e.value);return pt.each(e.nodes,function(t){n.setNode(t.v,t.value),t.parent&&n.setParent(t.v,t.parent)}),pt.each(e.edges,function(t){n.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),n}};function z9(e){return pt.map(e.nodes(),function(n){var t=e.node(n),r=e.parent(n),i={v:n};return pt.isUndefined(t)||(i.value=t),pt.isUndefined(r)||(i.parent=r),i})}function F9(e){return pt.map(e.edges(),function(n){var t=e.edge(n),r={v:n.v,w:n.w};return pt.isUndefined(n.name)||(r.name=n.name),pt.isUndefined(t)||(r.value=t),r})}var pI=di;function di(){this._arr=[],this._keyIndices={}}di.prototype.size=function(){return this._arr.length},di.prototype.keys=function(){return this._arr.map(function(e){return e.key})},di.prototype.has=function(e){return pt.has(this._keyIndices,e)},di.prototype.priority=function(e){var n=this._keyIndices[e];if(n!==void 0)return this._arr[n].priority},di.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},di.prototype.add=function(e,n){var t=this._keyIndices;if(e=String(e),!pt.has(t,e)){var r=this._arr,i=r.length;return t[e]=i,r.push({key:e,priority:n}),this._decrease(i),!0}return!1},di.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},di.prototype.decrease=function(e,n){var t=this._keyIndices[e];if(n>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[t].priority+" New: "+n);this._arr[t].priority=n,this._decrease(t)},di.prototype._heapify=function(e){var n=this._arr,t=2*e,r=t+1,i=e;t<n.length&&(i=n[t].priority<n[i].priority?t:i,r<n.length&&(i=n[r].priority<n[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},di.prototype._decrease=function(e){for(var n,t=this._arr,r=t[e].priority;e!==0&&!(t[n=e>>1].priority<r);)this._swap(e,n),e=n},di.prototype._swap=function(e,n){var t=this._arr,r=this._keyIndices,i=t[e],o=t[n];t[e]=o,t[n]=i,r[o.key]=e,r[i.key]=n};var gI=function(e,n,t,r){return function(i,o,a,s){var u,c,l={},h=new pI,d=function(f){var p=f.v!==u?f.v:f.w,g=l[p],v=a(f),m=c.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+f+" Weight: "+v);m<g.distance&&(g.distance=m,g.predecessor=u,h.decrease(p,m))};for(i.nodes().forEach(function(f){var p=f===o?0:Number.POSITIVE_INFINITY;l[f]={distance:p},h.add(f,p)});h.size()>0&&(u=h.removeMin(),(c=l[u]).distance!==Number.POSITIVE_INFINITY);)s(u).forEach(d);return l}(e,String(n),t||G9,r||function(i){return e.outEdges(i)})},G9=pt.constant(1),vI=function(e){var n=0,t=[],r={},i=[];function o(a){var s=r[a]={onStack:!0,lowlink:n,index:n++};if(t.push(a),e.successors(a).forEach(function(l){pt.has(r,l)?r[l].onStack&&(s.lowlink=Math.min(s.lowlink,r[l].index)):(o(l),s.lowlink=Math.min(s.lowlink,r[l].lowlink))}),s.lowlink===s.index){var u,c=[];do u=t.pop(),r[u].onStack=!1,c.push(u);while(a!==u);i.push(c)}}return e.nodes().forEach(function(a){pt.has(r,a)||o(a)}),i},Y9=pt.constant(1),Hy=mI;function mI(e){var n={},t={},r=[];if(pt.each(e.sinks(),function i(o){if(pt.has(t,o))throw new sp;pt.has(n,o)||(t[o]=!0,n[o]=!0,pt.each(e.predecessors(o),i),delete t[o],r.push(o))}),pt.size(n)!==e.nodeCount())throw new sp;return r}function sp(){}mI.CycleException=sp,sp.prototype=new Error;var yI=function(e,n,t){pt.isArray(n)||(n=[n]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),i=[],o={};return pt.each(n,function(a){if(!e.hasNode(a))throw new Error("Graph does not have node: "+a);bI(e,a,t==="post",o,r,i)}),i};function bI(e,n,t,r,i,o){pt.has(r,n)||(r[n]=!0,t||o.push(n),pt.each(i(n),function(a){bI(e,a,t,r,i,o)}),t&&o.push(n))}var up,X9={Graph:fI.Graph,json:j9,alg:{components:function(e){var n,t={},r=[];function i(o){pt.has(t,o)||(t[o]=!0,n.push(o),pt.each(e.successors(o),i),pt.each(e.predecessors(o),i))}return pt.each(e.nodes(),function(o){n=[],i(o),n.length&&r.push(n)}),r},dijkstra:gI,dijkstraAll:function(e,n,t){return pt.transform(e.nodes(),function(r,i){r[i]=gI(e,i,n,t)},{})},findCycles:function(e){return pt.filter(vI(e),function(n){return n.length>1||n.length===1&&e.hasEdge(n[0],n[0])})},floydWarshall:function(e,n,t){return function(r,i,o){var a={},s=r.nodes();return s.forEach(function(u){a[u]={},a[u][u]={distance:0},s.forEach(function(c){u!==c&&(a[u][c]={distance:Number.POSITIVE_INFINITY})}),o(u).forEach(function(c){var l=c.v===u?c.w:c.v,h=i(c);a[u][l]={distance:h,predecessor:u}})}),s.forEach(function(u){var c=a[u];s.forEach(function(l){var h=a[l];s.forEach(function(d){var f=h[u],p=c[d],g=h[d],v=f.distance+p.distance;v<g.distance&&(g.distance=v,g.predecessor=p.predecessor)})})}),a}(e,n||Y9,t||function(r){return e.outEdges(r)})},isAcyclic:function(e){try{Hy(e)}catch(n){if(n instanceof Hy.CycleException)return!1;throw n}return!0},postorder:function(e,n){return yI(e,n,"post")},preorder:function(e,n){return yI(e,n,"pre")},prim:function(e,n){var t,r=new Wy,i={},o=new pI;function a(u){var c=u.v===t?u.w:u.v,l=o.priority(c);if(l!==void 0){var h=n(u);h<l&&(i[c]=t,o.decrease(c,h))}}if(e.nodeCount()===0)return r;pt.each(e.nodes(),function(u){o.add(u,Number.POSITIVE_INFINITY),r.setNode(u)}),o.decrease(e.nodes()[0],0);for(var s=!1;o.size()>0;){if(t=o.removeMin(),pt.has(i,t))r.setEdge(t,i[t]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(t).forEach(a)}return r},tarjan:vI,topsort:Hy},version:fI.version};try{up=X9}catch(e){}up||(up=window.graphlib);var cp,Ni=up,Ll=function(e,n,t){if(!Yr(t))return!1;var r=typeof n;return!!(r=="number"?Fo(t)&&Kf(n,t.length):r=="string"&&n in t)&&Bu(t[n],e)},xI=Object.prototype,U9=xI.hasOwnProperty,W9=ap(function(e,n){e=Object(e);var t=-1,r=n.length,i=r>2?n[2]:void 0;for(i&&Ll(n[0],n[1],i)&&(r=1);++t<r;)for(var o=n[t],a=ms(o),s=-1,u=a.length;++s<u;){var c=a[s],l=e[c];(l===void 0||Bu(l,xI[c])&&!U9.call(e,c))&&(e[c]=o[c])}return e}),V9=/^\s+|\s+$/g,H9=/^[-+]0x[0-9a-f]+$/i,q9=/^0b[01]+$/i,Z9=/^0o[0-7]+$/i,K9=parseInt,lp=function(e){return e?(e=function(n){if(typeof n=="number")return n;if(ws(n))return NaN;if(Yr(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=Yr(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=n.replace(V9,"");var r=q9.test(n);return r||Z9.test(n)?K9(n.slice(2),r?2:8):H9.test(n)?NaN:+n}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},$9=Math.max,Q9=function(e){return function(n,t,r){var i=Object(n);if(!Fo(n)){var o=Go(t);n=_a(n),t=function(s){return o(i[s],s,i)}}var a=e(n,t,r);return a>-1?i[o?n[a]:a]:void 0}}(function(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=t==null?0:function(o){var a=lp(o),s=a%1;return a==a?s?a-s:a:0}(t);return i<0&&(i=$9(r+i,0)),uI(e,Go(n),i)}),wI=function(e){return e!=null&&e.length?Uy(e):[]},qy=function(e,n,t){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=n(o);if(a!=null&&(s===void 0?a==a&&!ws(a):t(a,s)))var s=a,u=o}return u},J9=function(e,n){return e>n},Zy=function(e,n,t){(t!==void 0&&!Bu(e[n],t)||t===void 0&&!(n in e))&&qf(e,n,t)},eG=Function.prototype,tG=Object.prototype,EI=eG.toString,nG=tG.hasOwnProperty,rG=EI.call(Object),SI=function(e,n){if((n!=="constructor"||typeof e[n]!="function")&&n!="__proto__")return e[n]},iG=function(e,n,t,r,i,o,a){var s=SI(e,t),u=SI(n,t),c=a.get(u);if(c)Zy(e,t,c);else{var l=void 0,h=l===void 0;if(h){var d=Pn(u),f=!d&&vs(u),p=!d&&!f&&Nl(u);l=u,d||f||p?Pn(s)?l=s:cI(s)?l=gA(s):f?(h=!1,l=pA(u,!0)):p?(h=!1,l=SA(u,!0)):l=[]:function(g){if(!Oi(g)||Ma(g)!="[object Object]")return!1;var v=Jf(g);if(v===null)return!0;var m=nG.call(v,"constructor")&&v.constructor;return typeof m=="function"&&m instanceof m&&EI.call(m)==rG}(u)||Yu(u)?(l=s,Yu(s)?l=function(g){return Ol(g,ms(g))}(s):Yr(s)&&!Al(s)||(l=kA(u))):h=!1}h&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),Zy(e,t,l)}},oG=function e(n,t,r,i,o){n!==t&&By(t,function(a,s){if(o||(o=new Gu),Yr(a))iG(n,t,s,r,e,i,o);else{var u=void 0;u===void 0&&(u=a),Zy(n,s,u)}},ms)},aG=function(e){return ap(function(n,t){var r=-1,i=t.length,o=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&Ll(t[0],t[1],a)&&(o=i<3?void 0:o,i=1),n=Object(n);++r<i;){var s=t[r];s&&e(n,s,r)}return n})}(function(e,n,t){oG(e,n,t)}),MI=function(e,n){return e<n},sG=function(e,n,t,r){if(!Yr(e))return e;for(var i=-1,o=(n=ip(n,e)).length,a=o-1,s=e;s!=null&&++i<o;){var u=Pl(n[i]),c=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(i!=a){var l=s[u];(c=void 0)==void 0&&(c=Yr(l)?l:Kf(n[i+1])?[]:{})}Zf(s,u,c),s=s[u]}return e},uG=function(e,n){return function(t,r,i){for(var o=-1,a=r.length,s={};++o<a;){var u=r[o],c=op(t,u);i(c,u)&&sG(s,ip(u,t),c)}return s}(e,n,function(t,r){return WA(e,r)})},cG=function(e){return sI(aI(e,void 0,wI),e+"")}(function(e,n){return e==null?{}:uG(e,n)}),lG=Math.ceil,hG=Math.max,dG=function(e,n,t){return t&&typeof t!="number"&&Ll(e,n,t)&&(n=t=void 0),e=lp(e),n===void 0?(n=e,e=0):n=lp(n),function(r,i,o){for(var a=-1,s=hG(lG((i-r)/(o||1)),0),u=Array(s);s--;)u[++a]=r,r+=o;return u}(e,n,t=t===void 0?e<n?1:-1:lp(t))},fG=function(e,n){if(e!==n){var t=e!==void 0,r=e===null,i=e==e,o=ws(e),a=n!==void 0,s=n===null,u=n==n,c=ws(n);if(!s&&!c&&!o&&e>n||o&&a&&u&&!s&&!c||r&&a&&u||!t&&u||!i)return 1;if(!r&&!o&&!c&&e<n||c&&t&&i&&!r&&!o||s&&t&&i||!a&&i||!u)return-1}return 0},pG=function(e,n,t){n=n.length?Wu(n,function(o){return Pn(o)?function(a){return op(a,o.length===1?o[0]:o)}:o}):[xs];var r=-1;n=Wu(n,$f(Go));var i=KA(e,function(o,a,s){return{criteria:Wu(n,function(u){return u(o)}),index:++r,value:o}});return function(o,a){var s=o.length;for(o.sort(a);s--;)o[s]=o[s].value;return o}(i,function(o,a){return function(s,u,c){for(var l=-1,h=s.criteria,d=u.criteria,f=h.length,p=c.length;++l<f;){var g=fG(h[l],d[l]);if(g)return l>=p?g:g*(c[l]=="desc"?-1:1)}return s.index-u.index}(o,a,t)})},gG=ap(function(e,n){if(e==null)return[];var t=n.length;return t>1&&Ll(e,n[0],n[1])?n=[]:t>2&&Ll(n[0],n[1],n[2])&&(n=[n[0]]),pG(e,Uy(n),[])}),vG=0;try{cp={cloneDeep:function(e){return IA(e,5)},constant:Ly,defaults:W9,each:NA,filter:HA,find:Q9,flatten:wI,forEach:OA,forIn:function(e,n){return e==null?e:By(e,TA(n),ms)},has:qA,isUndefined:ZA,last:function(e){var n=e==null?0:e.length;return n?e[n-1]:void 0},map:$A,mapValues:function(e,n){var t={};return n=Go(n),Ry(e,function(r,i,o){qf(t,i,n(r,i,o))}),t},max:function(e){return e&&e.length?qy(e,xs,J9):void 0},merge:aG,min:function(e){return e&&e.length?qy(e,xs,MI):void 0},minBy:function(e,n){return e&&e.length?qy(e,Go(n),MI):void 0},now:function(){return Ti.Date.now()},pick:cG,range:dG,reduce:QA,sortBy:gG,uniqueId:function(e){var n=++vG;return XA(e)+n},values:lI,zipObject:function(e,n){return function(t,r,i){for(var o=-1,a=t.length,s=r.length,u={};++o<a;){var c=o<s?r[o]:void 0;i(u,t[o],c)}return u}(e||[],n||[],Zf)}}}catch(e){}cp||(cp=window._);var Q=cp,mG=hp;function hp(){var e={};e._next=e._prev=e,this._sentinel=e}function _I(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function yG(e,n){if(e!=="_next"&&e!=="_prev")return n}hp.prototype.dequeue=function(){var e=this._sentinel,n=e._prev;if(n!==e)return _I(n),n},hp.prototype.enqueue=function(e){var n=this._sentinel;e._prev&&e._next&&_I(e),e._next=n._next,n._next._prev=e,n._next=e,e._prev=n},hp.prototype.toString=function(){for(var e=[],n=this._sentinel,t=n._prev;t!==n;)e.push(JSON.stringify(t,yG)),t=t._prev;return"["+e.join(", ")+"]"};var bG=Ni.Graph,xG=Q.constant(1);function Ky(e,n,t,r,i){var o=i?[]:void 0;return Q.forEach(e.inEdges(r.v),function(a){var s=e.edge(a),u=e.node(a.v);i&&o.push({v:a.v,w:a.w}),u.out-=s,$y(n,t,u)}),Q.forEach(e.outEdges(r.v),function(a){var s=e.edge(a),u=a.w,c=e.node(u);c.in-=s,$y(n,t,c)}),e.removeNode(r.v),o}function $y(e,n,t){t.out?t.in?e[t.out-t.in+n].enqueue(t):e[e.length-1].enqueue(t):e[0].enqueue(t)}var wG=function(e){var n=e.graph().acyclicer==="greedy"?function(t,r){if(t.nodeCount()<=1)return[];var i=function(a,s){var u=new bG,c=0,l=0;Q.forEach(a.nodes(),function(f){u.setNode(f,{v:f,in:0,out:0})}),Q.forEach(a.edges(),function(f){var p=u.edge(f.v,f.w)||0,g=s(f),v=p+g;u.setEdge(f.v,f.w,v),l=Math.max(l,u.node(f.v).out+=g),c=Math.max(c,u.node(f.w).in+=g)});var h=Q.range(l+c+3).map(function(){return new mG}),d=c+1;return Q.forEach(u.nodes(),function(f){$y(h,d,u.node(f))}),{graph:u,buckets:h,zeroIdx:d}}(t,r||xG),o=function(a,s,u){for(var c,l=[],h=s[s.length-1],d=s[0];a.nodeCount();){for(;c=d.dequeue();)Ky(a,s,u,c);for(;c=h.dequeue();)Ky(a,s,u,c);if(a.nodeCount()){for(var f=s.length-2;f>0;--f)if(c=s[f].dequeue()){l=l.concat(Ky(a,s,u,c,!0));break}}}return l}(i.graph,i.buckets,i.zeroIdx);return Q.flatten(Q.map(o,function(a){return t.outEdges(a.v,a.w)}),!0)}(e,function(t){return function(r){return t.edge(r).weight}}(e)):function(t){var r=[],i={},o={};return Q.forEach(t.nodes(),function a(s){Q.has(o,s)||(o[s]=!0,i[s]=!0,Q.forEach(t.outEdges(s),function(u){Q.has(i,u.w)?r.push(u):a(u.w)}),delete i[s])}),r}(e);Q.forEach(n,function(t){var r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,Q.uniqueId("rev"))})},EG=function(e){Q.forEach(e.edges(),function(n){var t=e.edge(n);if(t.reversed){e.removeEdge(n);var r=t.forwardName;delete t.reversed,delete t.forwardName,e.setEdge(n.w,n.v,t,r)}})},kI=Ni.Graph,sr={addDummyNode:CI,simplify:function(e){var n=new kI().setGraph(e.graph());return Q.forEach(e.nodes(),function(t){n.setNode(t,e.node(t))}),Q.forEach(e.edges(),function(t){var r=n.edge(t.v,t.w)||{weight:0,minlen:1},i=e.edge(t);n.setEdge(t.v,t.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),n},asNonCompoundGraph:function(e){var n=new kI({multigraph:e.isMultigraph()}).setGraph(e.graph());return Q.forEach(e.nodes(),function(t){e.children(t).length||n.setNode(t,e.node(t))}),Q.forEach(e.edges(),function(t){n.setEdge(t,e.edge(t))}),n},successorWeights:function(e){var n=Q.map(e.nodes(),function(t){var r={};return Q.forEach(e.outEdges(t),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return Q.zipObject(e.nodes(),n)},predecessorWeights:function(e){var n=Q.map(e.nodes(),function(t){var r={};return Q.forEach(e.inEdges(t),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return Q.zipObject(e.nodes(),n)},intersectRect:function(e,n){var t,r,i=e.x,o=e.y,a=n.x-i,s=n.y-o,u=e.width/2,c=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),t=c*a/s,r=c):(a<0&&(u=-u),t=u,r=u*s/a),{x:i+t,y:o+r}},buildLayerMatrix:function(e){var n=Q.map(Q.range(AI(e)+1),function(){return[]});return Q.forEach(e.nodes(),function(t){var r=e.node(t),i=r.rank;Q.isUndefined(i)||(n[i][r.order]=t)}),n},normalizeRanks:function(e){var n=Q.min(Q.map(e.nodes(),function(t){return e.node(t).rank}));Q.forEach(e.nodes(),function(t){var r=e.node(t);Q.has(r,"rank")&&(r.rank-=n)})},removeEmptyRanks:function(e){var n=Q.min(Q.map(e.nodes(),function(o){return e.node(o).rank})),t=[];Q.forEach(e.nodes(),function(o){var a=e.node(o).rank-n;t[a]||(t[a]=[]),t[a].push(o)});var r=0,i=e.graph().nodeRankFactor;Q.forEach(t,function(o,a){Q.isUndefined(o)&&a%i!=0?--r:r&&Q.forEach(o,function(s){e.node(s).rank+=r})})},addBorderNode:function(e,n,t,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=r),CI(e,"border",i,n)},maxRank:AI,partition:function(e,n){var t={lhs:[],rhs:[]};return Q.forEach(e,function(r){n(r)?t.lhs.push(r):t.rhs.push(r)}),t},time:function(e,n){Q.now();try{return n()}finally{}},notime:function(e,n){return n()}};function CI(e,n,t,r){var i;do i=Q.uniqueId(r);while(e.hasNode(i));return t.dummy=n,e.setNode(i,t),i}function AI(e){return Q.max(Q.map(e.nodes(),function(n){var t=e.node(n).rank;if(!Q.isUndefined(t))return t}))}var SG=function(e){e.graph().dummyChains=[],Q.forEach(e.edges(),function(n){(function(t,r){var i,o,a,s=r.v,u=t.node(s).rank,c=r.w,l=t.node(c).rank,h=r.name,d=t.edge(r),f=d.labelRank;if(l!==u+1){for(t.removeEdge(r),a=0,++u;u<l;++a,++u)d.points=[],o={width:0,height:0,edgeLabel:d,edgeObj:r,rank:u},i=sr.addDummyNode(t,"edge",o,"_d"),u===f&&(o.width=d.width,o.height=d.height,o.dummy="edge-label",o.labelpos=d.labelpos),t.setEdge(s,i,{weight:d.weight},h),a===0&&t.graph().dummyChains.push(i),s=i;t.setEdge(s,c,{weight:d.weight},h)}})(e,n)})},MG=function(e){Q.forEach(e.graph().dummyChains,function(n){var t,r=e.node(n),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)t=e.successors(n)[0],e.removeNode(n),i.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),n=t,r=e.node(n)})},II=function(e){var n={};Q.forEach(e.sources(),function t(r){var i=e.node(r);if(Q.has(n,r))return i.rank;n[r]=!0;var o=Q.min(Q.map(e.outEdges(r),function(a){return t(a.w)-e.edge(a).minlen}));return o!==Number.POSITIVE_INFINITY&&o!=null||(o=0),i.rank=o})},TI=function(e,n){return e.node(n.w).rank-e.node(n.v).rank-e.edge(n).minlen},_G=Ni.Graph,dp=TI,OI=function(e){var n,t,r=new _G({directed:!1}),i=e.nodes()[0],o=e.nodeCount();for(r.setNode(i,{});kG(r,e)<o;)n=CG(r,e),t=r.hasNode(n.v)?dp(e,n):-dp(e,n),AG(r,e,t);return r};function kG(e,n){return Q.forEach(e.nodes(),function t(r){Q.forEach(n.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;e.hasNode(a)||dp(n,i)||(e.setNode(a,{}),e.setEdge(r,a,{}),t(a))})}),e.nodeCount()}function CG(e,n){return Q.minBy(n.edges(),function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return dp(n,t)})}function AG(e,n,t){Q.forEach(e.nodes(),function(r){n.node(r).rank+=t})}var IG=TI,TG=II,OG=Ni.alg.preorder,NG=Ni.alg.postorder,PG=sr.simplify,DG=Es;function Es(e){e=PG(e),TG(e);var n,t=OI(e);for(Jy(t),Qy(t,e);n=DI(t);)BI(t,e,n,LI(t,e,n))}function Qy(e,n){var t=NG(e,e.nodes());t=t.slice(0,t.length-1),Q.forEach(t,function(r){(function(i,o,a){var s=i.node(a).parent;i.edge(a,s).cutvalue=NI(i,o,a)})(e,n,r)})}function NI(e,n,t){var r=e.node(t).parent,i=!0,o=n.edge(t,r),a=0;return o||(i=!1,o=n.edge(r,t)),a=o.weight,Q.forEach(n.nodeEdges(t),function(s){var u,c,l=s.v===t,h=l?s.w:s.v;if(h!==r){var d=l===i,f=n.edge(s).weight;if(a+=d?f:-f,u=t,c=h,e.hasEdge(u,c)){var p=e.edge(t,h).cutvalue;a+=d?-p:p}}}),a}function Jy(e,n){arguments.length<2&&(n=e.nodes()[0]),PI(e,{},1,n)}function PI(e,n,t,r,i){var o=t,a=e.node(r);return n[r]=!0,Q.forEach(e.neighbors(r),function(s){Q.has(n,s)||(t=PI(e,n,t,s,r))}),a.low=o,a.lim=t++,i?a.parent=i:delete a.parent,t}function DI(e){return Q.find(e.edges(),function(n){return e.edge(n).cutvalue<0})}function LI(e,n,t){var r=t.v,i=t.w;n.hasEdge(r,i)||(r=t.w,i=t.v);var o=e.node(r),a=e.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var c=Q.filter(n.edges(),function(l){return u===RI(e,e.node(l.v),s)&&u!==RI(e,e.node(l.w),s)});return Q.minBy(c,function(l){return IG(n,l)})}function BI(e,n,t,r){var i=t.v,o=t.w;e.removeEdge(i,o),e.setEdge(r.v,r.w,{}),Jy(e),Qy(e,n),function(a,s){var u=Q.find(a.nodes(),function(l){return!s.node(l).parent}),c=OG(a,u);c=c.slice(1),Q.forEach(c,function(l){var h=a.node(l).parent,d=s.edge(l,h),f=!1;d||(d=s.edge(h,l),f=!0),s.node(l).rank=s.node(h).rank+(f?d.minlen:-d.minlen)})}(e,n)}function RI(e,n,t){return t.low<=n.lim&&n.lim<=t.lim}Es.initLowLimValues=Jy,Es.initCutValues=Qy,Es.calcCutValue=NI,Es.leaveEdge=DI,Es.enterEdge=LI,Es.exchangeEdges=BI;var jI=II,LG=jI;function BG(e){DG(e)}var RG=function(e){var n=sr.addDummyNode(e,"root",{},"_root"),t=function(a){var s={};function u(c,l){var h=a.children(c);h&&h.length&&Q.forEach(h,function(d){u(d,l+1)}),s[c]=l}return Q.forEach(a.children(),function(c){u(c,1)}),s}(e),r=Q.max(Q.values(t))-1,i=2*r+1;e.graph().nestingRoot=n,Q.forEach(e.edges(),function(a){e.edge(a).minlen*=i});var o=function(a){return Q.reduce(a.edges(),function(s,u){return s+a.edge(u).weight},0)}(e)+1;Q.forEach(e.children(),function(a){zI(e,n,i,o,r,t,a)}),e.graph().nodeRankFactor=i},jG=function(e){var n=e.graph();e.removeNode(n.nestingRoot),delete n.nestingRoot,Q.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})};function zI(e,n,t,r,i,o,a){var s=e.children(a);if(s.length){var u=sr.addBorderNode(e,"_bt"),c=sr.addBorderNode(e,"_bb"),l=e.node(a);e.setParent(u,a),l.borderTop=u,e.setParent(c,a),l.borderBottom=c,Q.forEach(s,function(h){zI(e,n,t,r,i,o,h);var d=e.node(h),f=d.borderTop?d.borderTop:h,p=d.borderBottom?d.borderBottom:h,g=d.borderTop?r:2*r,v=f!==p?1:i-o[a]+1;e.setEdge(u,f,{weight:g,minlen:v,nestingEdge:!0}),e.setEdge(p,c,{weight:g,minlen:v,nestingEdge:!0})}),e.parent(a)||e.setEdge(n,u,{weight:0,minlen:i+o[a]})}else a!==n&&e.setEdge(n,a,{weight:0,minlen:t})}function FI(e,n,t,r,i,o){var a={width:0,height:0,rank:o,borderType:n},s=i[n][o-1],u=sr.addDummyNode(e,"border",a,t);i[n][o]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})}var zG=function(e){var n=e.graph().rankdir.toLowerCase();n!=="lr"&&n!=="rl"||GI(e)},FG=function(e){var n=e.graph().rankdir.toLowerCase();n!=="bt"&&n!=="rl"||function(t){Q.forEach(t.nodes(),function(r){e1(t.node(r))}),Q.forEach(t.edges(),function(r){var i=t.edge(r);Q.forEach(i.points,e1),Q.has(i,"y")&&e1(i)})}(e),n!=="lr"&&n!=="rl"||(function(t){Q.forEach(t.nodes(),function(r){t1(t.node(r))}),Q.forEach(t.edges(),function(r){var i=t.edge(r);Q.forEach(i.points,t1),Q.has(i,"x")&&t1(i)})}(e),GI(e))};function GI(e){Q.forEach(e.nodes(),function(n){YI(e.node(n))}),Q.forEach(e.edges(),function(n){YI(e.edge(n))})}function YI(e){var n=e.width;e.width=e.height,e.height=n}function e1(e){e.y=-e.y}function t1(e){var n=e.x;e.x=e.y,e.y=n}var GG=function(e,n){for(var t=0,r=1;r<n.length;++r)t+=YG(e,n[r-1],n[r]);return t};function YG(e,n,t){for(var r=Q.zipObject(t,Q.map(t,function(c,l){return l})),i=Q.flatten(Q.map(n,function(c){return Q.sortBy(Q.map(e.outEdges(c),function(l){return{pos:r[l.w],weight:e.edge(l).weight}}),"pos")}),!0),o=1;o<t.length;)o<<=1;var a=2*o-1;o-=1;var s=Q.map(new Array(a),function(){return 0}),u=0;return Q.forEach(i.forEach(function(c){var l=c.pos+o;s[l]+=c.weight;for(var h=0;l>0;)l%2&&(h+=s[l+1]),s[l=l-1>>1]+=c.weight;u+=c.weight*h})),u}function XI(e,n,t){for(var r;n.length&&(r=Q.last(n)).i<=t;)n.pop(),e.push(r.vs),t++;return t}var XG=function e(n,t,r,i){var o=n.children(t),a=n.node(t),s=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,c={};s&&(o=Q.filter(o,function(g){return g!==s&&g!==u}));var l=function(g,v){return Q.map(v,function(m){var y=g.inEdges(m);if(y.length){var b=Q.reduce(y,function(x,w){var E=g.edge(w),S=g.node(w.v);return{sum:x.sum+E.weight*S.order,weight:x.weight+E.weight}},{sum:0,weight:0});return{v:m,barycenter:b.sum/b.weight,weight:b.weight}}return{v:m}})}(n,o);Q.forEach(l,function(g){if(n.children(g.v).length){var v=e(n,g.v,r,i);c[g.v]=v,Q.has(v,"barycenter")&&(m=g,y=v,Q.isUndefined(m.barycenter)?(m.barycenter=y.barycenter,m.weight=y.weight):(m.barycenter=(m.barycenter*m.weight+y.barycenter*y.weight)/(m.weight+y.weight),m.weight+=y.weight))}var m,y});var h=function(g,v){var m={};return Q.forEach(g,function(y,b){var x=m[y.v]={indegree:0,in:[],out:[],vs:[y.v],i:b};Q.isUndefined(y.barycenter)||(x.barycenter=y.barycenter,x.weight=y.weight)}),Q.forEach(v.edges(),function(y){var b=m[y.v],x=m[y.w];Q.isUndefined(b)||Q.isUndefined(x)||(x.indegree++,b.out.push(m[y.w]))}),function(y){var b=[];function x(S){return function(M){M.merged||(Q.isUndefined(M.barycenter)||Q.isUndefined(S.barycenter)||M.barycenter>=S.barycenter)&&function(k,_){var C=0,T=0;k.weight&&(C+=k.barycenter*k.weight,T+=k.weight),_.weight&&(C+=_.barycenter*_.weight,T+=_.weight),k.vs=_.vs.concat(k.vs),k.barycenter=C/T,k.weight=T,k.i=Math.min(_.i,k.i),_.merged=!0}(S,M)}}function w(S){return function(M){M.in.push(S),--M.indegree==0&&y.push(M)}}for(;y.length;){var E=y.pop();b.push(E),Q.forEach(E.in.reverse(),x(E)),Q.forEach(E.out,w(E))}return Q.map(Q.filter(b,function(S){return!S.merged}),function(S){return Q.pick(S,["vs","i","barycenter","weight"])})}(Q.filter(m,function(y){return!y.indegree}))}(l,r);(function(g,v){Q.forEach(g,function(m){m.vs=Q.flatten(m.vs.map(function(y){return v[y]?v[y].vs:y}),!0)})})(h,c);var d=function(g,v){var m,y=sr.partition(g,function(_){return Q.has(_,"barycenter")}),b=y.lhs,x=Q.sortBy(y.rhs,function(_){return-_.i}),w=[],E=0,S=0,M=0;b.sort((m=!!v,function(_,C){return _.barycenter<C.barycenter?-1:_.barycenter>C.barycenter?1:m?C.i-_.i:_.i-C.i})),M=XI(w,x,M),Q.forEach(b,function(_){M+=_.vs.length,w.push(_.vs),E+=_.barycenter*_.weight,S+=_.weight,M=XI(w,x,M)});var k={vs:Q.flatten(w,!0)};return S&&(k.barycenter=E/S,k.weight=S),k}(h,i);if(s&&(d.vs=Q.flatten([s,d.vs,u],!0),n.predecessors(s).length)){var f=n.node(n.predecessors(s)[0]),p=n.node(n.predecessors(u)[0]);Q.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+p.order)/(d.weight+2),d.weight+=2}return d},UG=Ni.Graph,WG=Ni.Graph,VG=function(e){var n=sr.maxRank(e),t=UI(e,Q.range(1,n+1),"inEdges"),r=UI(e,Q.range(n-1,-1,-1),"outEdges"),i=function(l){var h={},d=Q.filter(l.nodes(),function(v){return!l.children(v).length}),f=Q.max(Q.map(d,function(v){return l.node(v).rank})),p=Q.map(Q.range(f+1),function(){return[]}),g=Q.sortBy(d,function(v){return l.node(v).rank});return Q.forEach(g,function v(m){if(!Q.has(h,m)){h[m]=!0;var y=l.node(m);p[y.rank].push(m),Q.forEach(l.successors(m),v)}}),p}(e);WI(e,i);for(var o,a=Number.POSITIVE_INFINITY,s=0,u=0;u<4;++s,++u){HG(s%2?t:r,s%4>=2),i=sr.buildLayerMatrix(e);var c=GG(e,i);c<a&&(u=0,o=Q.cloneDeep(i),a=c)}WI(e,o)};function UI(e,n,t){return Q.map(n,function(r){return function(i,o,a){var s=function(c){for(var l;c.hasNode(l=Q.uniqueId("_root")););return l}(i),u=new UG({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(c){return i.node(c)});return Q.forEach(i.nodes(),function(c){var l=i.node(c),h=i.parent(c);(l.rank===o||l.minRank<=o&&o<=l.maxRank)&&(u.setNode(c),u.setParent(c,h||s),Q.forEach(i[a](c),function(d){var f=d.v===c?d.w:d.v,p=u.edge(f,c),g=Q.isUndefined(p)?0:p.weight;u.setEdge(f,c,{weight:i.edge(d).weight+g})}),Q.has(l,"minRank")&&u.setNode(c,{borderLeft:l.borderLeft[o],borderRight:l.borderRight[o]}))}),u}(e,r,t)})}function HG(e,n){var t=new WG;Q.forEach(e,function(r){var i=r.graph().root,o=XG(r,i,t,n);Q.forEach(o.vs,function(a,s){r.node(a).order=s}),function(a,s,u){var c,l={};Q.forEach(u,function(h){for(var d,f,p=a.parent(h);p;){if((d=a.parent(p))?(f=l[d],l[d]=p):(f=c,c=p),f&&f!==p)return void s.setEdge(f,p);p=d}})}(r,t,o.vs)})}function WI(e,n){Q.forEach(n,function(t){Q.forEach(t,function(r,i){e.node(r).order=i})})}var qG=Ni.Graph;function VI(e,n,t){if(n>t){var r=n;n=t,t=r}var i=e[n];i||(e[n]=i={}),i[t]=!0}function ZG(e,n,t){if(n>t){var r=n;n=t,t=r}return Q.has(e[n],t)}var KG=function(e){var n,t=sr.buildLayerMatrix(e),r=Q.merge(function(a,s){var u={};return Q.reduce(s,function(c,l){var h=0,d=0,f=c.length,p=Q.last(l);return Q.forEach(l,function(g,v){var m=function(b,x){if(b.node(x).dummy)return Q.find(b.predecessors(x),function(w){return b.node(w).dummy})}(a,g),y=m?a.node(m).order:f;(m||g===p)&&(Q.forEach(l.slice(d,v+1),function(b){Q.forEach(a.predecessors(b),function(x){var w=a.node(x),E=w.order;!(E<h||y<E)||w.dummy&&a.node(b).dummy||VI(u,x,b)})}),d=v+1,h=y)}),l}),u}(e,t),function(a,s){var u={};function c(l,h,d,f,p){var g;Q.forEach(Q.range(h,d),function(v){g=l[v],a.node(g).dummy&&Q.forEach(a.predecessors(g),function(m){var y=a.node(m);y.dummy&&(y.order<f||y.order>p)&&VI(u,m,g)})})}return Q.reduce(s,function(l,h){var d,f=-1,p=0;return Q.forEach(h,function(g,v){if(a.node(g).dummy==="border"){var m=a.predecessors(g);m.length&&(d=a.node(m[0]).order,c(h,p,v,f,d),p=v,f=d)}c(h,p,h.length,d,l.length)}),h}),u}(e,t)),i={};Q.forEach(["u","d"],function(a){n=a==="u"?t:Q.values(t).reverse(),Q.forEach(["l","r"],function(s){s==="r"&&(n=Q.map(n,function(h){return Q.values(h).reverse()}));var u=(a==="u"?e.predecessors:e.successors).bind(e),c=function(h,d,f,p){var g={},v={},m={};return Q.forEach(d,function(y){Q.forEach(y,function(b,x){g[b]=b,v[b]=b,m[b]=x})}),Q.forEach(d,function(y){var b=-1;Q.forEach(y,function(x){var w=p(x);if(w.length)for(var E=((w=Q.sortBy(w,function(_){return m[_]})).length-1)/2,S=Math.floor(E),M=Math.ceil(E);S<=M;++S){var k=w[S];v[x]===x&&b<m[k]&&!ZG(f,x,k)&&(v[k]=x,v[x]=g[x]=g[k],b=m[k])}})}),{root:g,align:v}}(0,n,r,u),l=function(h,d,f,p,g){var v={},m=function(x,w,E,S){var M=new qG,k=x.graph(),_=function(C,T,A){return function(D,R,B){var F,N=D.node(R),L=D.node(B),z=0;if(z+=N.width/2,Q.has(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":F=-N.width/2;break;case"r":F=N.width/2}if(F&&(z+=A?F:-F),F=0,z+=(N.dummy?T:C)/2,z+=(L.dummy?T:C)/2,z+=L.width/2,Q.has(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":F=L.width/2;break;case"r":F=-L.width/2}return F&&(z+=A?F:-F),F=0,z}}(k.nodesep,k.edgesep,S);return Q.forEach(w,function(C){var T;Q.forEach(C,function(A){var D=E[A];if(M.setNode(D),T){var R=E[T],B=M.edge(R,D);M.setEdge(R,D,Math.max(_(x,A,T),B||0))}T=A})}),M}(h,d,f,g),y=g?"borderLeft":"borderRight";function b(x,w){for(var E=m.nodes(),S=E.pop(),M={};S;)M[S]?x(S):(M[S]=!0,E.push(S),E=E.concat(w(S))),S=E.pop()}return b(function(x){v[x]=m.inEdges(x).reduce(function(w,E){return Math.max(w,v[E.v]+m.edge(E))},0)},m.predecessors.bind(m)),b(function(x){var w=m.outEdges(x).reduce(function(S,M){return Math.min(S,v[M.w]-m.edge(M))},Number.POSITIVE_INFINITY),E=h.node(x);w!==Number.POSITIVE_INFINITY&&E.borderType!==y&&(v[x]=Math.max(v[x],w))},m.successors.bind(m)),Q.forEach(p,function(x){v[x]=v[f[x]]}),v}(e,n,c.root,c.align,s==="r");s==="r"&&(l=Q.mapValues(l,function(h){return-h})),i[a+s]=l})});var o=function(a,s){return Q.minBy(Q.values(s),function(u){var c=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;return Q.forIn(u,function(h,d){var f=function(p,g){return p.node(g).width}(a,d)/2;c=Math.max(h+f,c),l=Math.min(h-f,l)}),c-l})}(e,i);return function(a,s){var u=Q.values(s),c=Q.min(u),l=Q.max(u);Q.forEach(["u","d"],function(h){Q.forEach(["l","r"],function(d){var f,p=h+d,g=a[p];if(g!==s){var v=Q.values(g);(f=d==="l"?c-Q.min(v):l-Q.max(v))&&(a[p]=Q.mapValues(g,function(m){return m+f}))}})})}(i,o),function(a,s){return Q.mapValues(a.ul,function(u,c){if(s)return a[s.toLowerCase()][c];var l=Q.sortBy(Q.map(a,c));return(l[1]+l[2])/2})}(i,e.graph().align)},$G=sr.normalizeRanks,QG=sr.removeEmptyRanks,ka=sr,JG=Ni.Graph,e7=["nodesep","edgesep","ranksep","marginx","marginy"],t7={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},n7=["acyclicer","ranker","rankdir","align"],r7=["width","height"],i7={width:0,height:0},o7=["minlen","weight","width","height","labeloffset"],a7={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},s7=["labelpos"];function n1(e,n){return Q.mapValues(Q.pick(e,n),Number)}function r1(e){var n={};return Q.forEach(e,function(t,r){n[r.toLowerCase()]=t}),n}var u7=Ni.Graph,HI={graphlib:Ni,layout:function(e,n){var t=n&&n.debugTiming?ka.time:ka.notime;t("layout",function(){var r=t("  buildLayoutGraph",function(){return function(i){var o=new JG({multigraph:!0,compound:!0}),a=r1(i.graph());return o.setGraph(Q.merge({},t7,n1(a,e7),Q.pick(a,n7))),Q.forEach(i.nodes(),function(s){var u=r1(i.node(s));o.setNode(s,Q.defaults(n1(u,r7),i7)),o.setParent(s,i.parent(s))}),Q.forEach(i.edges(),function(s){var u=r1(i.edge(s));o.setEdge(s,Q.merge({},a7,n1(u,o7),Q.pick(u,s7)))}),o}(e)});t("  runLayout",function(){(function(i,o){o("    makeSpaceForEdgeLabels",function(){(function(a){var s=a.graph();s.ranksep/=2,Q.forEach(a.edges(),function(u){var c=a.edge(u);c.minlen*=2,c.labelpos.toLowerCase()!=="c"&&(s.rankdir==="TB"||s.rankdir==="BT"?c.width+=c.labeloffset:c.height+=c.labeloffset)})})(i)}),o("    removeSelfEdges",function(){(function(a){Q.forEach(a.edges(),function(s){if(s.v===s.w){var u=a.node(s.v);u.selfEdges||(u.selfEdges=[]),u.selfEdges.push({e:s,label:a.edge(s)}),a.removeEdge(s)}})})(i)}),o("    acyclic",function(){wG(i)}),o("    nestingGraph.run",function(){RG(i)}),o("    rank",function(){(function(a){switch(a.graph().ranker){case"network-simplex":default:BG(a);break;case"tight-tree":(function(s){jI(s),OI(s)})(a);break;case"longest-path":LG(a)}})(ka.asNonCompoundGraph(i))}),o("    injectEdgeLabelProxies",function(){(function(a){Q.forEach(a.edges(),function(s){var u=a.edge(s);if(u.width&&u.height){var c=a.node(s.v),l={rank:(a.node(s.w).rank-c.rank)/2+c.rank,e:s};ka.addDummyNode(a,"edge-proxy",l,"_ep")}})})(i)}),o("    removeEmptyRanks",function(){QG(i)}),o("    nestingGraph.cleanup",function(){jG(i)}),o("    normalizeRanks",function(){$G(i)}),o("    assignRankMinMax",function(){(function(a){var s=0;Q.forEach(a.nodes(),function(u){var c=a.node(u);c.borderTop&&(c.minRank=a.node(c.borderTop).rank,c.maxRank=a.node(c.borderBottom).rank,s=Q.max(s,c.maxRank))}),a.graph().maxRank=s})(i)}),o("    removeEdgeLabelProxies",function(){(function(a){Q.forEach(a.nodes(),function(s){var u=a.node(s);u.dummy==="edge-proxy"&&(a.edge(u.e).labelRank=u.rank,a.removeNode(s))})})(i)}),o("    normalize.run",function(){SG(i)}),o("    parentDummyChains",function(){(function(a){var s=function(u){var c={},l=0;return Q.forEach(u.children(),function h(d){var f=l;Q.forEach(u.children(d),h),c[d]={low:f,lim:l++}}),c}(a);Q.forEach(a.graph().dummyChains,function(u){for(var c=a.node(u),l=c.edgeObj,h=function(m,y,b,x){var w,E,S=[],M=[],k=Math.min(y[b].low,y[x].low),_=Math.max(y[b].lim,y[x].lim);w=b;do w=m.parent(w),S.push(w);while(w&&(y[w].low>k||_>y[w].lim));for(E=w,w=x;(w=m.parent(w))!==E;)M.push(w);return{path:S.concat(M.reverse()),lca:E}}(a,s,l.v,l.w),d=h.path,f=h.lca,p=0,g=d[p],v=!0;u!==l.w;){if(c=a.node(u),v){for(;(g=d[p])!==f&&a.node(g).maxRank<c.rank;)p++;g===f&&(v=!1)}if(!v){for(;p<d.length-1&&a.node(g=d[p+1]).minRank<=c.rank;)p++;g=d[p]}a.setParent(u,g),u=a.successors(u)[0]}})})(i)}),o("    addBorderSegments",function(){(function(a){Q.forEach(a.children(),function s(u){var c=a.children(u),l=a.node(u);if(c.length&&Q.forEach(c,s),Q.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var h=l.minRank,d=l.maxRank+1;h<d;++h)FI(a,"borderLeft","_bl",u,l,h),FI(a,"borderRight","_br",u,l,h)}})})(i)}),o("    order",function(){VG(i)}),o("    insertSelfEdges",function(){(function(a){var s=ka.buildLayerMatrix(a);Q.forEach(s,function(u){var c=0;Q.forEach(u,function(l,h){var d=a.node(l);d.order=h+c,Q.forEach(d.selfEdges,function(f){ka.addDummyNode(a,"selfedge",{width:f.label.width,height:f.label.height,rank:d.rank,order:h+ ++c,e:f.e,label:f.label},"_se")}),delete d.selfEdges})})})(i)}),o("    adjustCoordinateSystem",function(){zG(i)}),o("    position",function(){(function(a){(function(s){var u=sr.buildLayerMatrix(s),c=s.graph().ranksep,l=0;Q.forEach(u,function(h){var d=Q.max(Q.map(h,function(f){return s.node(f).height}));Q.forEach(h,function(f){s.node(f).y=l+d/2}),l+=d+c})})(a=sr.asNonCompoundGraph(a)),Q.forEach(KG(a),function(s,u){a.node(u).x=s})})(i)}),o("    positionSelfEdges",function(){(function(a){Q.forEach(a.nodes(),function(s){var u=a.node(s);if(u.dummy==="selfedge"){var c=a.node(u.e.v),l=c.x+c.width/2,h=c.y,d=u.x-l,f=c.height/2;a.setEdge(u.e,u.label),a.removeNode(s),u.label.points=[{x:l+2*d/3,y:h-f},{x:l+5*d/6,y:h-f},{x:l+d,y:h},{x:l+5*d/6,y:h+f},{x:l+2*d/3,y:h+f}],u.label.x=u.x,u.label.y=u.y}})})(i)}),o("    removeBorderNodes",function(){(function(a){Q.forEach(a.nodes(),function(s){if(a.children(s).length){var u=a.node(s),c=a.node(u.borderTop),l=a.node(u.borderBottom),h=a.node(Q.last(u.borderLeft)),d=a.node(Q.last(u.borderRight));u.width=Math.abs(d.x-h.x),u.height=Math.abs(l.y-c.y),u.x=h.x+u.width/2,u.y=c.y+u.height/2}}),Q.forEach(a.nodes(),function(s){a.node(s).dummy==="border"&&a.removeNode(s)})})(i)}),o("    normalize.undo",function(){MG(i)}),o("    fixupEdgeLabelCoords",function(){(function(a){Q.forEach(a.edges(),function(s){var u=a.edge(s);if(Q.has(u,"x"))switch(u.labelpos!=="l"&&u.labelpos!=="r"||(u.width-=u.labeloffset),u.labelpos){case"l":u.x-=u.width/2+u.labeloffset;break;case"r":u.x+=u.width/2+u.labeloffset}})})(i)}),o("    undoCoordinateSystem",function(){FG(i)}),o("    translateGraph",function(){(function(a){var s=Number.POSITIVE_INFINITY,u=0,c=Number.POSITIVE_INFINITY,l=0,h=a.graph(),d=h.marginx||0,f=h.marginy||0;function p(g){var v=g.x,m=g.y,y=g.width,b=g.height;s=Math.min(s,v-y/2),u=Math.max(u,v+y/2),c=Math.min(c,m-b/2),l=Math.max(l,m+b/2)}Q.forEach(a.nodes(),function(g){p(a.node(g))}),Q.forEach(a.edges(),function(g){var v=a.edge(g);Q.has(v,"x")&&p(v)}),s-=d,c-=f,Q.forEach(a.nodes(),function(g){var v=a.node(g);v.x-=s,v.y-=c}),Q.forEach(a.edges(),function(g){var v=a.edge(g);Q.forEach(v.points,function(m){m.x-=s,m.y-=c}),Q.has(v,"x")&&(v.x-=s),Q.has(v,"y")&&(v.y-=c)}),h.width=u-s+d,h.height=l-c+f})(i)}),o("    assignNodeIntersects",function(){(function(a){Q.forEach(a.edges(),function(s){var u,c,l=a.edge(s),h=a.node(s.v),d=a.node(s.w);l.points?(u=l.points[0],c=l.points[l.points.length-1]):(l.points=[],u=d,c=h),l.points.unshift(ka.intersectRect(h,u)),l.points.push(ka.intersectRect(d,c))})})(i)}),o("    reversePoints",function(){(function(a){Q.forEach(a.edges(),function(s){var u=a.edge(s);u.reversed&&u.points.reverse()})})(i)}),o("    acyclic.undo",function(){EG(i)})})(r,t)}),t("  updateInputGraph",function(){(function(i,o){Q.forEach(i.nodes(),function(a){var s=i.node(a),u=o.node(a);s&&(s.x=u.x,s.y=u.y,o.children(a).length&&(s.width=u.width,s.height=u.height))}),Q.forEach(i.edges(),function(a){var s=i.edge(a),u=o.edge(a);s.points=u.points,Q.has(u,"x")&&(s.x=u.x,s.y=u.y)}),i.graph().width=o.graph().width,i.graph().height=o.graph().height})(e,r)})})},debug:{debugOrdering:function(e){var n=sr.buildLayerMatrix(e),t=new u7({compound:!0,multigraph:!0}).setGraph({});return Q.forEach(e.nodes(),function(r){t.setNode(r,{label:r}),t.setParent(r,"layer"+e.node(r).rank)}),Q.forEach(e.edges(),function(r){t.setEdge(r.v,r.w,{},r.name)}),Q.forEach(n,function(r,i){var o="layer"+i;t.setNode(o,{rank:"same"}),Q.reduce(r,function(a,s){return t.setEdge(a,s,{style:"invis"}),s})}),t}},util:{time:sr.time,notime:sr.notime},version:"0.8.5"},c7=HI.graphlib,l7=HI.layout;class h7{constructor(n){this.cardinality=1,this.include=fs.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=Gr.NODE,this.name=n.name,this.attr=n.attr||{},this.inputs=n.inputs,this.path=n.path||[],this.width=n.width,this.height=n.height}}class d7{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}class f7{constructor(n,t={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=fs.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=Gr.META,this.path=[],this.name=n,this.metaGraph=i1(n,Lu.META,t)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(n=>this.metaGraph.node(n))}leaves(){let n,t=[],r=[this];for(;r.length;){let i=r.shift();i.isGroupNode?(n=i.metaGraph,n.nodes().forEach(o=>r.push(n.node(o)))):t.push(i.name)}return t}}class p7{constructor(n,t){this.v=n,this.w=t,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(n,t){this.baseEdgeList.push(n)}}function qI(e,n={}){return new f7(e,n)}function ZI(e,n){return new p7(e,n)}function i1(e,n,t){const r=t||{},i=new c7.Graph(r);return i.setGraph({name:e,rankdir:r.rankdir,type:n,align:r.align}),i}class g7{constructor(n={}){this.graphOptions=n,this.index={},this.graphOptions.compound=!0,this.root=qI(Du,this.graphOptions),this.index[Du]=this.root}getNodeMap(){return this.index}node(n){return this.index[n]}setNode(n,t){this.index[n]=t}getBridgeGraph(n){const t=this.index[n];if(!t)throw Error("Could not find node in hierarchy: "+n);if(!("metaGraph"in t))return null;const r=t;if(r.bridgeGraph)return r.bridgeGraph;const i=i1(nA,Lu.BRIDGE,this.graphOptions);if(r.bridgeGraph=i,!t.parentNode||!("metaGraph"in t.parentNode))return i;const o=t.parentNode;return[o.metaGraph,this.getBridgeGraph(o.name)].forEach(a=>{a.edges().filter(s=>s.v===n||s.w===n).forEach(s=>{const u=s.w===n;a.edge(s).baseEdgeList.forEach(c=>{const[l,h]=u?[c.w,s.v]:[c.v,s.w],d=this.getChildName(n,l),f={v:u?h:d,w:u?d:h};let p=i.edge(f);p||(p=ZI(f.v,f.w),p.inbound=u,i.setEdge(f.v,f.w,p)),p.addBaseEdge(c,this)})})}),i}getChildName(n,t){let r=this.index[t];for(;r;){if(r.parentNode&&r.parentNode.name===n)return r.name;r=r.parentNode}throw Error("Could not find immediate child for descendant: "+t)}getPredecessors(n){const t=this.index[n];if(!t)throw Error("Could not find node with name: "+n);return this.getOneWayEdges(t,!0)}getSuccessors(n){const t=this.index[n];if(!t)throw Error("Could not find node with name: "+n);return this.getOneWayEdges(t,!1)}getOneWayEdges(n,t){const r=[];if(!n.parentNode||!n.parentNode.isGroupNode)return r;const i=n.parentNode,o=i.metaGraph,a=this.getBridgeGraph(i.name);return KI(o,n,t,r),KI(a,n,t,r),r}}function KI(e,n,t,r){(t?e.inEdges(n.name):e.outEdges(n.name)).forEach(i=>{const o=e.edge(i);r.push(o)})}class v7{constructor(n){this.hierarchy=n,this.index={},this.hasSubHierarchy={},this.root=new QI(this.hierarchy.root,this.hierarchy.graphOptions),this.index[n.root.name]=this.root,this.buildSubHierarchy(n.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(n){if(n in this.hasSubHierarchy)return;this.hasSubHierarchy[n]=!0;const t=this.index[n];if(t.node.type!==Gr.META)return;const r=t,i=r.node.metaGraph,o=r.coreGraph;i.nodes().forEach(l=>{const h=this.getOrCreateRenderNodeByName(l);o.setNode(l,h)}),i.edges().forEach(l=>{const h=i.edge(l),d=new $I(h);o.setEdge(l.v,l.w,d)});const a=r.node.parentNode;if(!a)return;const s=this.getRenderNodeByName(a.name),u=(l,...h)=>h.concat([l?"IN":"OUT"]).join("~~"),c=this.hierarchy.getBridgeGraph(n);c.edges().forEach(l=>{const h=c.edge(l),d=!!i.node(l.w),[f,p]=d?[l.w,l.v]:[l.v,l.w],g=w=>{const E=d?{v:w,w:n}:{v:n,w};return s.coreGraph.edge(E)};let v=g(p);v||(v=g(u(d,p,a.name)));const m=u(d,n),y=u(d,p,n);let b=o.node(y);if(!b){let w=o.node(m);if(!w){const S={name:m,type:Gr.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:fs.UNSPECIFIED,inbound:d,attr:{}};w=new fp(S),this.index[m]=w,o.setNode(m,w)}const E={name:y,type:Gr.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:fs.UNSPECIFIED,inbound:d,attr:{}};b=new fp(E),this.index[y]=b,o.setNode(y,b),o.setParent(y,m),w.node.cardinality++}const x=new $I(h);x.adjoiningMetaEdge=v,d?o.setEdge(y,f,x):o.setEdge(f,y,x)})}getOrCreateRenderNodeByName(n){if(!n)return null;if(n in this.index)return this.index[n];const t=this.getNodeByName(n);return t?(this.index[n]=t.isGroupNode?new QI(t,this.hierarchy.graphOptions):new fp(t),this.index[n]):null}getRenderNodeByName(n){return this.index[n]}getNodeByName(n){return this.hierarchy.node(n)}}class fp{constructor(n){this.node=n,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=n.width||0,this.height=n.height||0,this.displayName=n.name,this.attr=n.attr}}class $I{constructor(n){this.metaEdge=n,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class QI extends fp{constructor(n,t){super(n);const r=n.metaGraph.graph();t.compound=!0,this.coreGraph=i1(r.name,Lu.CORE,t)}}function JI(e,n){e.node.isGroupNode&&function(t,r){const i=wy(r);t.coreGraph.nodes().map(o=>t.coreGraph.node(o)).forEach(o=>{var a,s,u,c,l,h;const{height:d,width:f}=o;switch(o.node.type){case Gr.NODE:Object.assign(o,i.nodeSize.node),o.height=d||i.nodeSize.node.height,o.width=f||i.nodeSize.node.width;break;case Gr.BRIDGE:Object.assign(o,i.nodeSize.bridge);break;case Gr.META:o.expanded?JI(o,r):(Object.assign(o,i.nodeSize.meta),o.height=i.nodeSize.meta.height,o.width=i.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+o.node.type)}if(!o.expanded){const p=o.attr;(function(g,v=!1){if(g.coreBox.width=g.width,g.coreBox.height=g.height,!v){const m=`${g.displayName}`.length,y=3;g.width=Math.max(g.coreBox.width,m*y)}})(o,r&&(o.node.type===0&&!!(!((s=(a=r==null?void 0:r.nodeSize)===null||a===void 0?void 0:a.meta)===null||s===void 0)&&s.width)||o.node.type===1&&(!!(!((c=(u=r==null?void 0:r.nodeSize)===null||u===void 0?void 0:u.node)===null||c===void 0)&&c.width)||!!p.width)||o.node.type===2&&!!(!((h=(l=r==null?void 0:r.nodeSize)===null||l===void 0?void 0:l.bridge)===null||h===void 0)&&h.width)))}})}(e,n),e.node.type===Gr.META&&function(t,r){const i=wy(r),o=i.subScene.meta;Object.assign(t,o);const{nodeSep:a,rankSep:s,edgeSep:u,align:c}=i.graph.meta,l={nodesep:a,ranksep:s,edgesep:u,align:c};Object.assign(t.coreBox,function(f,p){const{ranksep:g,nodesep:v,edgesep:m,align:y}=p;Object.assign(f.graph(),{ranksep:g,nodesep:v,edgesep:m,align:y});const b=[];if(f.nodes().forEach(M=>{f.node(M).node.type!==Gr.BRIDGE&&b.push(M)}),!b.length)return{width:0,height:0};l7(f);let x=1/0,w=1/0,E=-1/0,S=-1/0;return b.forEach(M=>{const k=f.node(M),_=.5*k.width,C=k.x-_,T=k.x+_;x=C<x?C:x,E=T>E?T:E;const A=.5*k.height,D=k.y-A,R=k.y+A;w=D<w?D:w,S=R>S?R:S}),f.edges().forEach(M=>{const k=f.edge(M),_=f.node(k.metaEdge.v),C=f.node(k.metaEdge.w);if(k.points.length===3&&function(D){let R=eT(D[0],D[1]);for(let B=1;B<D.length-1;B++){const F=eT(D[B],D[B+1]);if(Math.abs(F-R)>1)return!1;R=F}return!0}(k.points)){if(_!=null){const D=_.expanded?_.x:o1(_);k.points[0].x=D}if(C!=null){const D=C.expanded?C.x:o1(C);k.points[2].x=D}k.points=[k.points[0],k.points[1]]}const T=k.points[k.points.length-2];C!=null&&(k.points[k.points.length-1]=tT(T,C));const A=k.points[1];_!=null&&(k.points[0]=tT(A,_)),k.points.forEach(D=>{x=D.x<x?D.x:x,E=D.x>E?D.x:E,w=D.y<w?D.y:w,S=D.y>S?D.y:S})}),f.nodes().forEach(M=>{const k=f.node(M);k.x-=x,k.y-=w}),f.edges().forEach(M=>{f.edge(M).points.forEach(k=>{k.x-=x,k.y-=w})}),{width:E-x,height:S-w}}(t.coreGraph,l));let h=0;t.coreGraph.nodeCount()>0&&h++;const d=h<=1?0:h;t.coreBox.width+=d+d,t.coreBox.height=o.labelHeight+t.coreBox.height,t.width=t.coreBox.width+o.paddingLeft+o.paddingRight,t.height=t.paddingTop+t.coreBox.height+t.paddingBottom}(e,n)}function eT(e,n){const t=n.x-e.x,r=n.y-e.y;return 180*Math.atan(r/t)/Math.PI}function o1(e){return e.expanded?e.x:e.x-e.width/2+0+e.coreBox.width/2}function tT(e,n){const t=n.expanded?n.x:o1(n),r=n.y,i=e.x-t,o=e.y-r;let a,s,u=n.expanded?n.width:n.coreBox.width,c=n.expanded?n.height:n.coreBox.height;return Math.abs(o)*u/2>Math.abs(i)*c/2?(o<0&&(c=-c),a=o===0?0:c/2*i/o,s=c/2):(i<0&&(u=-u),a=u/2,s=i===0?0:u/2*o/i),{x:t+a,y:r+s}}function nT(e){const n=e.coreGraph.nodes().map(r=>e.coreGraph.node(r));return Object.assign(Object.assign({},rT(e)),{expanded:e.expanded,nodes:e.expanded?(t=n,t.map(r=>r.node.type===Gr.META?nT(r):rT(r))):[],edges:e.expanded?m7(e):[]});var t}function rT(e){return{id:e.node.name,name:e.node.name,type:e.node.type,cardinality:e.node.cardinality,attr:e.attr,parentNodeName:e.node.parentNode?e.node.parentNode.name:null,coreBox:Object.assign({},e.coreBox),x:e.x,y:e.y,width:e.width,height:e.height,radius:e.radius,labelHeight:e.labelHeight,labelOffset:e.labelOffset,outboxWidth:e.outboxWidth,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,paddingRight:e.paddingRight,paddingBottom:e.paddingBottom,path:e.node.path}}function m7(e){return e.coreGraph.edges().map(n=>({renderInfoEdge:e.coreGraph.edge(n),edge:n})).filter(({renderInfoEdge:n})=>n.metaEdge).map(({edge:n,renderInfoEdge:t})=>{const r=function(i,o){const a=o.points.map(s=>Object.assign({},s));if(o.adjoiningMetaEdge){const s=o.adjoiningMetaEdge.points,u=o.metaEdge.inbound,c=u?s[s.length-1]:s[0],l=a[u?0:a.length-1],h=i.x-i.width/2,d=i.y-i.height/2,f=c.x-h,p=c.y-d,g=-i.paddingLeft,v=-(i.paddingTop+i.labelHeight);l.x=f+g,l.y=p+v}return a}(e,t);return{adjoiningEdge:t.adjoiningMetaEdge?{w:t.adjoiningMetaEdge.metaEdge.w,v:t.adjoiningMetaEdge.metaEdge.v}:null,inbound:t.metaEdge.inbound,w:n.w,v:n.v,points:r,weight:t.weight,baseEdgeList:t.metaEdge.baseEdgeList,parentNodeName:e.node.name}})}const y7=Object.freeze(Object.defineProperty({__proto__:null,BRIDGE_GRAPH_NAME:nA,get GraphType(){return Lu},get HierarchyNodeType(){return Ey},get InclusionType(){return fs},LAYOUT_CONFIG:Gf,get NodeType(){return Gr},ROOT_NAME:Du,buildGraph:function(e,n,t){var r,i,o,a;const s=e.nodes.filter((h,d,f)=>f.findIndex(p=>p.id===h.id)!==d).map(h=>h.id);if(s.length)throw new Error(`Duplicated ids found: ${s.join(", ")}`);const u=function(h){const d={nodes:[]},f=h.compound,p=Object.keys(f||{}),g=new Map,v=(y,b=[])=>{if(g.has(y))return g.get(y);for(let x=0;x<p.length;x++){let w=p[x];if(f&&f[w].indexOf(y)!==-1)return b.unshift(w),v(w,b)}return b.length===0&&g.set(y,b),b},m=y=>h.edges.filter(b=>b.w===y).map(b=>({name:b.v}));return h.nodes.forEach(y=>{const b=y.id,x=[...v(b),b];let w=m(b);d.nodes.push({name:b,path:x,inputs:w,width:y.width,height:y.height,attr:Object.assign({},y)})}),d}(e),c=function(h,d){const f=(g,v)=>{for(let m of v.values())if(m.includes(g))return!0;return!1},p=(g,v=[])=>{if(Object.keys(g).length===0)return[...new Set(v)];const m=new Map(Object.keys(g).map(b=>[b,g[b]])),y={};for(let[b,x]of m)f(b,m)?y[b]=x:v=v.concat(b,x);return p(y,v)};return p(h).filter(g=>d.includes(g))}(e.compound||{},(n==null?void 0:n.expanded)||[]),l=function(h,d){return function(f){return new v7(f)}(function(f,p){const{rankDirection:g,align:v}=p,m=new g7({rankdir:g,align:v});return function(y,b){Object.keys(b.nodes).forEach(x=>{const w=b.nodes[x],E=w.path;let S=y.root;S.depth=Math.max(E.length,S.depth);for(let M=0;M<E.length&&(S.depth=Math.max(S.depth,E.length-M),S.cardinality+=w.cardinality,M!==E.length-1);M++){const k=E[M];let _=y.node(k);_||(_=qI(k,y.graphOptions),_.path=w.path.slice(0,M+1),_.parentNode=S,y.setNode(k,_),S.metaGraph.setNode(k,_)),S=_}y.setNode(w.name,w),w.parentNode=S,S.metaGraph.setNode(w.name,w)})}(m,f),function(y,b){const x=y.getNodeMap();let w=[],E=[];const S=(M,k)=>{let _=0;for(;M;)k[_++]=M.name,M=M.parentNode;return _-1};b.edges.forEach(M=>{w=[],E=[];let k=S(b.nodes[M.v],w),_=S(b.nodes[M.w],E);for(;w[k]===E[_];)if(k--,_--,k<0||_<0)throw Error("No difference found between ancestor paths.");const C=x[w[k+1]],T=w[k],A=E[_];let D=C.metaGraph.edge(T,A);D||(D=ZI(T,A),C.metaGraph.setEdge(T,A,D)),D.addBaseEdge(M,y)})}(m,f),m}(function(f){const p=new d7;return f.nodes.map(g=>new h7(g)).forEach(g=>{p.nodes[g.name]=g,g.inputs.forEach(v=>{(function(m,y,b){b.name!==y.name&&m.edges.push(Object.assign(Object.assign({},b.attr),{v:b.name,w:y.name}))})(p,g,v)})}),p}(h),d))}(u,{rankDirection:((i=(r=t==null?void 0:t.graph)===null||r===void 0?void 0:r.meta)===null||i===void 0?void 0:i.rankDir)||(n==null?void 0:n.rankDirection)||Gf.graph.meta.rankDir,align:((a=(o=t==null?void 0:t.graph)===null||o===void 0?void 0:o.meta)===null||a===void 0?void 0:a.align)||Gf.graph.meta.align});return function(h,d){d.forEach(f=>{const p=h.getRenderInfoNodes().find(m=>m.displayName===f);let g=p&&p.node&&p.node.name||"";const v=h.getRenderNodeByName(g);if(!v)throw new Error(`No nodes found: ${g}`);v.expanded=!0,h.buildSubHierarchy(g)})}(l,c),JI(l.root,t),nT(l.root)},flatGraph:function(e,n=!1){const t=JSON.parse(JSON.stringify(e)),r={nodes:[t],edges:[...t.edges]};return t.nodes.forEach(function i(o){(o.type===0||o.type===1)&&r.nodes.push(o),o.type===0&&(r.edges=r.edges.concat(o.edges)),Array.isArray(o.nodes)&&o.nodes.forEach(i)}),n&&r.nodes.forEach(i=>{const o=r.nodes.find(a=>a.id===i.parentNodeName);if(o){const a=o.x-o.width/2+o.paddingLeft,s=o.y-o.height/2+o.labelHeight+o.paddingTop;o.id!==Du&&(i.x+=a,i.y+=s),i.type===0&&i.edges.forEach(u=>{u.points.forEach(c=>{c.x+=i.x-i.width/2+i.paddingLeft,c.y+=i.y-i.height/2+i.labelHeight+i.paddingTop})})}}),r},getEdges:function(e,n,t,r){var i,o;let a=[];const s=((i=t.find(h=>h.id===e))===null||i===void 0?void 0:i.path)||[],u=((o=t.find(h=>h.id===n))===null||o===void 0?void 0:o.path)||[],c=[Du,...s].slice(0,s.length).reverse(),l=[Du,...u].slice(0,u.length);return c.forEach(h=>{const d=t.find(f=>f.id===h);a=a.concat(d.edges.filter(f=>f.baseEdgeList.some(p=>p.v===((r==null?void 0:r.v)||e)&&p.w===((r==null?void 0:r.w)||n))))}),l.filter(h=>!c.includes(h)).forEach(h=>{const d=t.find(f=>f.id===h);a=a.concat(d.edges.filter(f=>f.baseEdgeList.some(p=>p.v===((r==null?void 0:r.v)||e)&&p.w===((r==null?void 0:r.w)||n))))}),a},mergeConfig:wy},Symbol.toStringTag,{value:"Module"})),b7=Ao(y7);var x7=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pi=Ee&&Ee.__assign||function(){return Pi=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Pi.apply(this,arguments)},Vu=Ee&&Ee.__spreadArray||function(e,n,t){if(t||arguments.length===2)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(kl,"__esModule",{value:!0}),kl.DagreCompoundLayout=void 0;var w7=Nn,fi=b7,pp=Cn(),E7=function(e){function n(t){var r=e.call(this)||this;return r.rankdir="TB",r.nodesep=50,r.edgesep=5,r.ranksep=50,r.controlPoints=!0,r.anchorPoint=!0,r.nodes=[],r.edges=[],r.combos=[],r.onLayoutEnd=function(){},r.updateCfg(t),r}return x7(n,e),n.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},n.prototype.init=function(t){var r=t.hiddenNodes||[],i=t.hiddenEdges||[],o=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(r)),this.edges=this.getDataByOrder((t.edges||[]).concat(i)),this.combos=(t.combos||[]).concat(o.map(function(a){return Pi(Pi({},a),{collapsed:!0})}))},n.prototype.execute=function(){var t=this,r=t.nodes,i=t.edges;if(r){var o=t.getLayoutConfig(),a=o.graphDef,s=o.graphOption,u=o.graphSettings,c=(0,fi.buildGraph)(a,s,u),l=(0,fi.flatGraph)(c,!0);return this.updatePosition(l),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:r,edges:i}}},n.prototype.getNodePath=function(t){var r=this.nodes,i=this.combos,o=r.find(function(s){return s.id===t}),a=function(s,u){u===void 0&&(u=[]);var c=i.find(function(l){return l.id===s});return c?(u.unshift(s),c.parentId?a(c.parentId,u):u):u};return o&&o.comboId?a(o.comboId,[t]):[t]},n.prototype.getLayoutConfig=function(){var t,r,i,o,a=this,s=a.nodes,u=a.edges,c=a.combos,l=a.nodeSize,h=a.rankdir,d=a.align,f=a.edgesep,p=a.nodesep,g=a.ranksep,v=a.settings,m=(c||[]).reduce(function(R,B){var F=s.filter(function(L){return L.comboId===B.id}).map(function(L){return L.id}),N=(c||[]).filter(function(L){return L.parentId===B.id}).map(function(L){return L.id});return(F.length||N.length)&&(R[B.id]=Vu(Vu([],F,!0),N,!0)),R},{});o=l?(0,pp.isArray)(l)?function(){return l}:function(){return[l,l]}:function(R){return R&&R.size?(0,pp.isArray)(R.size)?R.size:(0,pp.isObject)(R.size)?[R.size.width||40,R.size.height||40]:[R.size,R.size]:[40,40]};var y=function(R){return R&&R.size?(0,pp.isArray)(R.size)?R.size:[R.size,R.size]:[80,40]}(c==null?void 0:c[0]),b=y[0],x=y[1],w=(r=(t=a.graphSettings)===null||t===void 0?void 0:t.subScene)===null||r===void 0?void 0:r.meta,E=((i=c.find(function(R){return!R.collapsed}))===null||i===void 0?void 0:i.padding)||[20,20,20,20],S=E[0],M=E[1],k=E[2],_=E[3],C={compound:m,nodes:Vu([],(s||[]).map(function(R){var B=o(R),F=B[0],N=B[1];return Pi(Pi({},R),{width:F,height:N})}),!0),edges:Vu([],(u||[]).map(function(R){return Pi(Pi({},R),{v:R.source,w:R.target})}),!0)},T={expanded:(c||[]).filter(function(R){return!R.collapsed}).map(function(R){return R.id})},A={graph:{meta:{align:d,rankDir:h,nodeSep:p,edgeSep:f,rankSep:g}},subScene:{meta:{paddingTop:S||(w==null?void 0:w.paddingTop)||20,paddingRight:M||(w==null?void 0:w.paddingRight)||20,paddingBottom:k||(w==null?void 0:w.paddingBottom)||20,paddingLeft:_||(w==null?void 0:w.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:b,height:x}}},D=(0,fi.mergeConfig)(v,Pi({},(0,fi.mergeConfig)(A,fi.LAYOUT_CONFIG)));return a.graphSettings=D,{graphDef:C,graphOption:T,graphSettings:D}},n.prototype.updatePosition=function(t){var r=t.nodes,i=t.edges;this.updateNodePosition(r,i),this.updateEdgePosition(r,i)},n.prototype.getBegin=function(t,r){var i=this.begin,o=[0,0];if(i){var a=1/0,s=1/0;t.forEach(function(u){a>u.x&&(a=u.x),s>u.y&&(s=u.y)}),r.forEach(function(u){u.points.forEach(function(c){a>c.x&&(a=c.x),s>c.y&&(s=c.y)})}),o[0]=i[0]-a,o[1]=i[1]-s}return o},n.prototype.updateNodePosition=function(t,r){var i=this,o=i.combos,a=i.nodes,s=i.edges,u=i.anchorPoint,c=i.graphSettings,l=this.getBegin(t,r);t.forEach(function(h){var d,f=h.x,p=h.y,g=h.id,v=h.type,m=h.coreBox;if(v===fi.HierarchyNodeType.META&&g!==fi.ROOT_NAME){var y=o.findIndex(function(S){return S.id===g}),b=(d=c==null?void 0:c.subScene)===null||d===void 0?void 0:d.meta;o[y].offsetX=f+l[0],o[y].offsetY=p+l[1],o[y].fixSize=[m.width,m.height],o[y].fixCollapseSize=[m.width,m.height],h.expanded?o[y].padding=[b==null?void 0:b.paddingTop,b==null?void 0:b.paddingRight,b==null?void 0:b.paddingBottom,b==null?void 0:b.paddingLeft]:o[y].padding=[0,0,0,0]}else if(v===fi.HierarchyNodeType.OP&&(y=a.findIndex(function(S){return S.id===g}),a[y].x=f+l[0],a[y].y=p+l[1],u)){var x=[],w=r.filter(function(S){return S.v===g}),E=r.filter(function(S){return S.w===g});w.length>0&&w.forEach(function(S){var M=S.points[0],k=(M.x-f)/h.width+.5,_=(M.y-p)/h.height+.5;x.push([k,_]),S.baseEdgeList.forEach(function(C){var T=s.find(function(A){return A.source===C.v&&A.target===C.w});T&&(T.sourceAnchor=x.length-1)})}),E.length>0&&E.forEach(function(S){var M=S.points[S.points.length-1],k=(M.x-f)/h.width+.5,_=(M.y-p)/h.height+.5;x.push([k,_]),S.baseEdgeList.forEach(function(C){var T=s.find(function(A){return A.source===C.v&&A.target===C.w});T&&(T.targetAnchor=x.length-1)})}),a[y].anchorPoints=x.length>0?x:a[y].anchorPoints||[]}})},n.prototype.updateEdgePosition=function(t,r){var i=this,o=i.combos,a=i.edges,s=i.controlPoints,u=this.getBegin(t,r);s&&(o.forEach(function(c){c.inEdges=[],c.outEdges=[]}),a.forEach(function(c){var l,h,d,f,p=t.find(function(S){return S.id===c.source}),g=t.find(function(S){return S.id===c.target}),v=[],m=[];if(p&&g)m=(0,fi.getEdges)(p==null?void 0:p.id,g==null?void 0:g.id,t);else if(!p||!g){var y=i.getNodePath(c.source),b=i.getNodePath(c.target),x=y.reverse().slice(p?0:1).find(function(S){return t.find(function(M){return M.id===S})}),w=b.reverse().slice(g?0:1).find(function(S){return t.find(function(M){return M.id===S})});p=t.find(function(S){return S.id===x}),g=t.find(function(S){return S.id===w}),m=(0,fi.getEdges)(p==null?void 0:p.id,g==null?void 0:g.id,t,{v:c.source,w:c.target})}if(v=m.reduce(function(S,M){return Vu(Vu([],S,!0),M.points.map(function(k){return Pi(Pi({},k),{x:k.x+u[0],y:k.y+u[1]})}),!0)},[]),v=v.slice(1,-1),c.controlPoints=v,(g==null?void 0:g.type)===fi.NodeType.META){var E=o.findIndex(function(S){return S.id===(g==null?void 0:g.id)});if(!o[E]||!((l=o[E].inEdges)===null||l===void 0)&&l.some(function(S){return S.source===p.id&&S.target===g.id}))return;(h=o[E].inEdges)===null||h===void 0||h.push({source:p.id,target:g.id,controlPoints:v})}if((p==null?void 0:p.type)===fi.NodeType.META){if(E=o.findIndex(function(S){return S.id===(p==null?void 0:p.id)}),!o[E]||!((d=o[E].outEdges)===null||d===void 0)&&d.some(function(S){return S.source===p.id&&S.target===g.id}))return;(f=o[E].outEdges)===null||f===void 0||f.push({source:p.id,target:g.id,controlPoints:v})}}))},n.prototype.getType=function(){return"dagreCompound"},n.prototype.getDataByOrder=function(t){return t.every(function(r){return r.layoutOrder!==void 0})||t.forEach(function(r,i){r.layoutOrder=i}),t.sort(function(r,i){return r.layoutOrder-i.layoutOrder})},n}(w7.Base);kl.DagreCompoundLayout=E7;var a1={},gp={},s1={};const S7=Object.prototype.toString;function vp(e){const n=S7.call(e);return n.endsWith("Array]")&&!n.includes("Big")}function iT(e){var n,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!vp(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");if(t.output!==void 0){if(!vp(t.output))throw new TypeError("output option must be an array if specified");n=t.output}else n=new Array(e.length);var r=function(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!vp(h))throw new TypeError("input must be an array");if(h.length===0)throw new TypeError("input must not be empty");var f=d.fromIndex,p=f===void 0?0:f,g=d.toIndex,v=g===void 0?h.length:g;if(p<0||p>=h.length||!Number.isInteger(p))throw new Error("fromIndex must be a positive integer smaller than length");if(v<=p||v>h.length||!Number.isInteger(v))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var m=h[p],y=p+1;y<v;y++)h[y]<m&&(m=h[y]);return m}(e),i=function(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!vp(h))throw new TypeError("input must be an array");if(h.length===0)throw new TypeError("input must not be empty");var f=d.fromIndex,p=f===void 0?0:f,g=d.toIndex,v=g===void 0?h.length:g;if(p<0||p>=h.length||!Number.isInteger(p))throw new Error("fromIndex must be a positive integer smaller than length");if(v<=p||v>h.length||!Number.isInteger(v))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var m=h[p],y=p+1;y<v;y++)h[y]>m&&(m=h[y]);return m}(e);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=t.min,a=o===void 0?t.autoMinMax?r:0:o,s=t.max,u=s===void 0?t.autoMinMax?i:1:s;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var c=(u-a)/(i-r),l=0;l<e.length;l++)n[l]=(e[l]-r)*c+a;return n}const mp=" ".repeat(2),oT=" ".repeat(4);function aT(e,n={}){const{maxRows:t=15,maxColumns:r=10,maxNumSize:i=8}=n;return`${e.constructor.name} {
${mp}[
${oT}${function(o,a,s,u){const{rows:c,columns:l}=o,h=Math.min(c,a),d=Math.min(l,s),f=[];for(let p=0;p<h;p++){let g=[];for(let v=0;v<d;v++)g.push(M7(o.get(p,v),u));f.push(`${g.join(" ")}`)}return d!==l&&(f[f.length-1]+=` ... ${l-s} more columns`),h!==c&&f.push(`... ${c-a} more rows`),f.join(`
${oT}`)}(e,t,r,i)}
${mp}]
${mp}rows: ${e.rows}
${mp}columns: ${e.columns}
}`}function M7(e,n){const t=String(e);if(t.length<=n)return t.padEnd(n," ");const r=e.toPrecision(n-2);if(r.length<=n)return r;const i=e.toExponential(n-2),o=i.indexOf("e"),a=i.slice(o);return i.slice(0,n-a.length)+a}function pi(e,n,t){let r=t?e.rows:e.rows-1;if(n<0||n>r)throw new RangeError("Row index out of range")}function gi(e,n,t){let r=t?e.columns:e.columns-1;if(n<0||n>r)throw new RangeError("Column index out of range")}function Hu(e,n){if(n.to1DArray&&(n=n.to1DArray()),n.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return n}function qu(e,n){if(n.to1DArray&&(n=n.to1DArray()),n.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return n}function sT(e,n,t){return{row:uT(e,n),column:cT(e,t)}}function uT(e,n){if(typeof n!="object")throw new TypeError("unexpected type for row indices");if(n.some(r=>r<0||r>=e.rows))throw new RangeError("row indices are out of range");return Array.isArray(n)||(n=Array.from(n)),n}function cT(e,n){if(typeof n!="object")throw new TypeError("unexpected type for column indices");if(n.some(r=>r<0||r>=e.columns))throw new RangeError("column indices are out of range");return Array.isArray(n)||(n=Array.from(n)),n}function u1(e,n,t,r,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(bp("startRow",n),bp("endRow",t),bp("startColumn",r),bp("endColumn",i),n>t||r>i||n<0||n>=e.rows||t<0||t>=e.rows||r<0||r>=e.columns||i<0||i>=e.columns)throw new RangeError("Submatrix indices are out of range")}function yp(e,n=0){let t=[];for(let r=0;r<e;r++)t.push(n);return t}function bp(e,n){if(typeof n!="number")throw new TypeError(`${e} must be a number`)}class Qt{static from1DArray(n,t,r){if(n*t!==r.length)throw new RangeError("data length does not match given dimensions");let i=new St(n,t);for(let o=0;o<n;o++)for(let a=0;a<t;a++)i.set(o,a,r[o*t+a]);return i}static rowVector(n){let t=new St(1,n.length);for(let r=0;r<n.length;r++)t.set(0,r,n[r]);return t}static columnVector(n){let t=new St(n.length,1);for(let r=0;r<n.length;r++)t.set(r,0,n[r]);return t}static zeros(n,t){return new St(n,t)}static ones(n,t){return new St(n,t).fill(1)}static rand(n,t,r={}){if(typeof r!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=r;let o=new St(n,t);for(let a=0;a<n;a++)for(let s=0;s<t;s++)o.set(a,s,i());return o}static randInt(n,t,r={}){if(typeof r!="object")throw new TypeError("options must be an object");const{min:i=0,max:o=1e3,random:a=Math.random}=r;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(o))throw new TypeError("max must be an integer");if(i>=o)throw new RangeError("min must be smaller than max");let s=o-i,u=new St(n,t);for(let c=0;c<n;c++)for(let l=0;l<t;l++){let h=i+Math.round(a()*s);u.set(c,l,h)}return u}static eye(n,t,r){t===void 0&&(t=n),r===void 0&&(r=1);let i=Math.min(n,t),o=this.zeros(n,t);for(let a=0;a<i;a++)o.set(a,a,r);return o}static diag(n,t,r){let i=n.length;t===void 0&&(t=i),r===void 0&&(r=t);let o=Math.min(i,t,r),a=this.zeros(t,r);for(let s=0;s<o;s++)a.set(s,s,n[s]);return a}static min(n,t){n=this.checkMatrix(n),t=this.checkMatrix(t);let r=n.rows,i=n.columns,o=new St(r,i);for(let a=0;a<r;a++)for(let s=0;s<i;s++)o.set(a,s,Math.min(n.get(a,s),t.get(a,s)));return o}static max(n,t){n=this.checkMatrix(n),t=this.checkMatrix(t);let r=n.rows,i=n.columns,o=new this(r,i);for(let a=0;a<r;a++)for(let s=0;s<i;s++)o.set(a,s,Math.max(n.get(a,s),t.get(a,s)));return o}static checkMatrix(n){return Qt.isMatrix(n)?n:new St(n)}static isMatrix(n){return n!=null&&n.klass==="Matrix"}get size(){return this.rows*this.columns}apply(n){if(typeof n!="function")throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)n.call(this,t,r);return this}to1DArray(){let n=[];for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)n.push(this.get(t,r));return n}to2DArray(){let n=[];for(let t=0;t<this.rows;t++){n.push([]);for(let r=0;r<this.columns;r++)n[t].push(this.get(t,r))}return n}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(let n=0;n<this.rows;n++)for(let t=0;t<=n;t++)if(this.get(n,t)!==this.get(t,n))return!1;return!0}return!1}isEchelonForm(){let n=0,t=0,r=-1,i=!0,o=!1;for(;n<this.rows&&i;){for(t=0,o=!1;t<this.columns&&o===!1;)this.get(n,t)===0?t++:this.get(n,t)===1&&t>r?(o=!0,r=t):(i=!1,o=!0);n++}return i}isReducedEchelonForm(){let n=0,t=0,r=-1,i=!0,o=!1;for(;n<this.rows&&i;){for(t=0,o=!1;t<this.columns&&o===!1;)this.get(n,t)===0?t++:this.get(n,t)===1&&t>r?(o=!0,r=t):(i=!1,o=!0);for(let a=t+1;a<this.rows;a++)this.get(n,a)!==0&&(i=!1);n++}return i}echelonForm(){let n=this.clone(),t=0,r=0;for(;t<n.rows&&r<n.columns;){let i=t;for(let o=t;o<n.rows;o++)n.get(o,r)>n.get(i,r)&&(i=o);if(n.get(i,r)===0)r++;else{n.swapRows(t,i);let o=n.get(t,r);for(let a=r;a<n.columns;a++)n.set(t,a,n.get(t,a)/o);for(let a=t+1;a<n.rows;a++){let s=n.get(a,r)/n.get(t,r);n.set(a,r,0);for(let u=r+1;u<n.columns;u++)n.set(a,u,n.get(a,u)-n.get(t,u)*s)}t++,r++}}return n}reducedEchelonForm(){let n=this.echelonForm(),t=n.columns,r=n.rows,i=r-1;for(;i>=0;)if(n.maxRow(i)===0)i--;else{let o=0,a=!1;for(;o<r&&a===!1;)n.get(i,o)===1?a=!0:o++;for(let s=0;s<i;s++){let u=n.get(s,o);for(let c=o;c<t;c++){let l=n.get(s,c)-u*n.get(i,c);n.set(s,c,l)}}i--}return n}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{rows:t=1,columns:r=1}=n;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");let i=new St(this.rows*t,this.columns*r);for(let o=0;o<t;o++)for(let a=0;a<r;a++)i.setSubMatrix(this,this.rows*o,this.columns*a);return i}fill(n){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,n);return this}neg(){return this.mulS(-1)}getRow(n){pi(this,n);let t=[];for(let r=0;r<this.columns;r++)t.push(this.get(n,r));return t}getRowVector(n){return St.rowVector(this.getRow(n))}setRow(n,t){pi(this,n),t=Hu(this,t);for(let r=0;r<this.columns;r++)this.set(n,r,t[r]);return this}swapRows(n,t){pi(this,n),pi(this,t);for(let r=0;r<this.columns;r++){let i=this.get(n,r);this.set(n,r,this.get(t,r)),this.set(t,r,i)}return this}getColumn(n){gi(this,n);let t=[];for(let r=0;r<this.rows;r++)t.push(this.get(r,n));return t}getColumnVector(n){return St.columnVector(this.getColumn(n))}setColumn(n,t){gi(this,n),t=qu(this,t);for(let r=0;r<this.rows;r++)this.set(r,n,t[r]);return this}swapColumns(n,t){gi(this,n),gi(this,t);for(let r=0;r<this.rows;r++){let i=this.get(r,n);this.set(r,n,this.get(r,t)),this.set(r,t,i)}return this}addRowVector(n){n=Hu(this,n);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)+n[r]);return this}subRowVector(n){n=Hu(this,n);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)-n[r]);return this}mulRowVector(n){n=Hu(this,n);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*n[r]);return this}divRowVector(n){n=Hu(this,n);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)/n[r]);return this}addColumnVector(n){n=qu(this,n);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)+n[t]);return this}subColumnVector(n){n=qu(this,n);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)-n[t]);return this}mulColumnVector(n){n=qu(this,n);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*n[t]);return this}divColumnVector(n){n=qu(this,n);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)/n[t]);return this}mulRow(n,t){pi(this,n);for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*t);return this}mulColumn(n,t){gi(this,n);for(let r=0;r<this.rows;r++)this.set(r,n,this.get(r,n)*t);return this}max(){let n=this.get(0,0);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.get(t,r)>n&&(n=this.get(t,r));return n}maxIndex(){let n=this.get(0,0),t=[0,0];for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)>n&&(n=this.get(r,i),t[0]=r,t[1]=i);return t}min(){let n=this.get(0,0);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.get(t,r)<n&&(n=this.get(t,r));return n}minIndex(){let n=this.get(0,0),t=[0,0];for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)<n&&(n=this.get(r,i),t[0]=r,t[1]=i);return t}maxRow(n){pi(this,n);let t=this.get(n,0);for(let r=1;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r));return t}maxRowIndex(n){pi(this,n);let t=this.get(n,0),r=[n,0];for(let i=1;i<this.columns;i++)this.get(n,i)>t&&(t=this.get(n,i),r[1]=i);return r}minRow(n){pi(this,n);let t=this.get(n,0);for(let r=1;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r));return t}minRowIndex(n){pi(this,n);let t=this.get(n,0),r=[n,0];for(let i=1;i<this.columns;i++)this.get(n,i)<t&&(t=this.get(n,i),r[1]=i);return r}maxColumn(n){gi(this,n);let t=this.get(0,n);for(let r=1;r<this.rows;r++)this.get(r,n)>t&&(t=this.get(r,n));return t}maxColumnIndex(n){gi(this,n);let t=this.get(0,n),r=[0,n];for(let i=1;i<this.rows;i++)this.get(i,n)>t&&(t=this.get(i,n),r[0]=i);return r}minColumn(n){gi(this,n);let t=this.get(0,n);for(let r=1;r<this.rows;r++)this.get(r,n)<t&&(t=this.get(r,n));return t}minColumnIndex(n){gi(this,n);let t=this.get(0,n),r=[0,n];for(let i=1;i<this.rows;i++)this.get(i,n)<t&&(t=this.get(i,n),r[0]=i);return r}diag(){let n=Math.min(this.rows,this.columns),t=[];for(let r=0;r<n;r++)t.push(this.get(r,r));return t}norm(n="frobenius"){let t=0;if(n==="max")return this.max();if(n==="frobenius"){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)t+=this.get(r,i)*this.get(r,i);return Math.sqrt(t)}throw new RangeError(`unknown norm type: ${n}`)}cumulativeSum(){let n=0;for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)n+=this.get(t,r),this.set(t,r,n);return this}dot(n){Qt.isMatrix(n)&&(n=n.to1DArray());let t=this.to1DArray();if(t.length!==n.length)throw new RangeError("vectors do not have the same size");let r=0;for(let i=0;i<t.length;i++)r+=t[i]*n[i];return r}mmul(n){n=St.checkMatrix(n);let t=this.rows,r=this.columns,i=n.columns,o=new St(t,i),a=new Float64Array(r);for(let s=0;s<i;s++){for(let u=0;u<r;u++)a[u]=n.get(u,s);for(let u=0;u<t;u++){let c=0;for(let l=0;l<r;l++)c+=this.get(u,l)*a[l];o.set(u,s,c)}}return o}strassen2x2(n){n=St.checkMatrix(n);let t=new St(2,2);const r=this.get(0,0),i=n.get(0,0),o=this.get(0,1),a=n.get(0,1),s=this.get(1,0),u=n.get(1,0),c=this.get(1,1),l=n.get(1,1),h=(r+c)*(i+l),d=(s+c)*i,f=r*(a-l),p=c*(u-i),g=(r+o)*l,v=h+p-g+(o-c)*(u+l),m=f+g,y=d+p,b=h-d+f+(s-r)*(i+a);return t.set(0,0,v),t.set(0,1,m),t.set(1,0,y),t.set(1,1,b),t}strassen3x3(n){n=St.checkMatrix(n);let t=new St(3,3);const r=this.get(0,0),i=this.get(0,1),o=this.get(0,2),a=this.get(1,0),s=this.get(1,1),u=this.get(1,2),c=this.get(2,0),l=this.get(2,1),h=this.get(2,2),d=n.get(0,0),f=n.get(0,1),p=n.get(0,2),g=n.get(1,0),v=n.get(1,1),m=n.get(1,2),y=n.get(2,0),b=n.get(2,1),x=n.get(2,2),w=(r-a)*(-f+v),E=(-r+a+s)*(d-f+v),S=(a+s)*(-d+f),M=r*d,k=(-r+c+l)*(d-p+m),_=(-r+c)*(p-m),C=(c+l)*(-d+p),T=(-o+l+h)*(v+y-b),A=(o-h)*(v-b),D=o*y,R=(l+h)*(-y+b),B=(-o+s+u)*(m+y-x),F=(o-u)*(m-x),N=(s+u)*(-y+x),L=M+D+i*g,z=(r+i+o-a-s-l-h)*v+E+S+M+T+D+R,Z=M+k+C+(r+i+o-s-u-c-l)*m+D+B+N,ne=w+s*(-d+f+g-v-m-y+x)+E+M+D+B+F,J=w+E+S+M+u*b,q=D+B+F+N+a*p,ie=M+k+_+l*(-d+p+g-v-m-y+b)+T+A+D,Me=T+A+D+R+c*f,me=M+k+_+C+h*x;return t.set(0,0,L),t.set(0,1,z),t.set(0,2,Z),t.set(1,0,ne),t.set(1,1,J),t.set(1,2,q),t.set(2,0,ie),t.set(2,1,Me),t.set(2,2,me),t}mmulStrassen(n){n=St.checkMatrix(n);let t=this.clone(),r=t.rows,i=t.columns,o=n.rows,a=n.columns;function s(l,h,d){let f=l.rows,p=l.columns;if(f===h&&p===d)return l;{let g=Qt.zeros(h,d);return g=g.setSubMatrix(l,0,0),g}}let u=Math.max(r,o),c=Math.max(i,a);return t=s(t,u,c),function l(h,d,f,p){if(f<=512||p<=512)return h.mmul(d);f%2==1&&p%2==1?(h=s(h,f+1,p+1),d=s(d,f+1,p+1)):f%2==1?(h=s(h,f+1,p),d=s(d,f+1,p)):p%2==1&&(h=s(h,f,p+1),d=s(d,f,p+1));let g=parseInt(h.rows/2,10),v=parseInt(h.columns/2,10),m=h.subMatrix(0,g-1,0,v-1),y=d.subMatrix(0,g-1,0,v-1),b=h.subMatrix(0,g-1,v,h.columns-1),x=d.subMatrix(0,g-1,v,d.columns-1),w=h.subMatrix(g,h.rows-1,0,v-1),E=d.subMatrix(g,d.rows-1,0,v-1),S=h.subMatrix(g,h.rows-1,v,h.columns-1),M=d.subMatrix(g,d.rows-1,v,d.columns-1),k=l(Qt.add(m,S),Qt.add(y,M),g,v),_=l(Qt.add(w,S),y,g,v),C=l(m,Qt.sub(x,M),g,v),T=l(S,Qt.sub(E,y),g,v),A=l(Qt.add(m,b),M,g,v),D=l(Qt.sub(w,m),Qt.add(y,x),g,v),R=l(Qt.sub(b,S),Qt.add(E,M),g,v),B=Qt.add(k,T);B.sub(A),B.add(R);let F=Qt.add(C,A),N=Qt.add(_,T),L=Qt.sub(k,_);L.add(C),L.add(D);let z=Qt.zeros(2*B.rows,2*B.columns);return z=z.setSubMatrix(B,0,0),z=z.setSubMatrix(F,B.rows,0),z=z.setSubMatrix(N,0,B.columns),z=z.setSubMatrix(L,B.rows,B.columns),z.subMatrix(0,f-1,0,p-1)}(t,n=s(n,u,c),u,c)}scaleRows(n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:t=0,max:r=1}=n;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(t>=r)throw new RangeError("min must be smaller than max");let i=new St(this.rows,this.columns);for(let o=0;o<this.rows;o++){const a=this.getRow(o);iT(a,{min:t,max:r,output:a}),i.setRow(o,a)}return i}scaleColumns(n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:t=0,max:r=1}=n;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(t>=r)throw new RangeError("min must be smaller than max");let i=new St(this.rows,this.columns);for(let o=0;o<this.columns;o++){const a=this.getColumn(o);iT(a,{min:t,max:r,output:a}),i.setColumn(o,a)}return i}flipRows(){const n=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let r=0;r<n;r++){let i=this.get(t,r),o=this.get(t,this.columns-1-r);this.set(t,r,o),this.set(t,this.columns-1-r,i)}return this}flipColumns(){const n=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let r=0;r<n;r++){let i=this.get(r,t),o=this.get(this.rows-1-r,t);this.set(r,t,o),this.set(this.rows-1-r,t,i)}return this}kroneckerProduct(n){n=St.checkMatrix(n);let t=this.rows,r=this.columns,i=n.rows,o=n.columns,a=new St(t*i,r*o);for(let s=0;s<t;s++)for(let u=0;u<r;u++)for(let c=0;c<i;c++)for(let l=0;l<o;l++)a.set(i*s+c,o*u+l,this.get(s,u)*n.get(c,l));return a}transpose(){let n=new St(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)n.set(r,t,this.get(t,r));return n}sortRows(n=lT){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(n));return this}sortColumns(n=lT){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(n));return this}subMatrix(n,t,r,i){u1(this,n,t,r,i);let o=new St(t-n+1,i-r+1);for(let a=n;a<=t;a++)for(let s=r;s<=i;s++)o.set(a-n,s-r,this.get(a,s));return o}subMatrixRow(n,t,r){if(t===void 0&&(t=0),r===void 0&&(r=this.columns-1),t>r||t<0||t>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");let i=new St(n.length,r-t+1);for(let o=0;o<n.length;o++)for(let a=t;a<=r;a++){if(n[o]<0||n[o]>=this.rows)throw new RangeError(`Row index out of range: ${n[o]}`);i.set(o,a-t,this.get(n[o],a))}return i}subMatrixColumn(n,t,r){if(t===void 0&&(t=0),r===void 0&&(r=this.rows-1),t>r||t<0||t>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");let i=new St(r-t+1,n.length);for(let o=0;o<n.length;o++)for(let a=t;a<=r;a++){if(n[o]<0||n[o]>=this.columns)throw new RangeError(`Column index out of range: ${n[o]}`);i.set(a-t,o,this.get(a,n[o]))}return i}setSubMatrix(n,t,r){u1(this,t,t+(n=St.checkMatrix(n)).rows-1,r,r+n.columns-1);for(let i=0;i<n.rows;i++)for(let o=0;o<n.columns;o++)this.set(t+i,r+o,n.get(i,o));return this}selection(n,t){let r=sT(this,n,t),i=new St(n.length,t.length);for(let o=0;o<r.row.length;o++){let a=r.row[o];for(let s=0;s<r.column.length;s++){let u=r.column[s];i.set(o,s,this.get(a,u))}}return i}trace(){let n=Math.min(this.rows,this.columns),t=0;for(let r=0;r<n;r++)t+=this.get(r,r);return t}clone(){let n=new St(this.rows,this.columns);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)n.set(t,r,this.get(t,r));return n}sum(n){switch(n){case"row":return function(t){let r=yp(t.rows);for(let i=0;i<t.rows;++i)for(let o=0;o<t.columns;++o)r[i]+=t.get(i,o);return r}(this);case"column":return function(t){let r=yp(t.columns);for(let i=0;i<t.rows;++i)for(let o=0;o<t.columns;++o)r[o]+=t.get(i,o);return r}(this);case void 0:return function(t){let r=0;for(let i=0;i<t.rows;i++)for(let o=0;o<t.columns;o++)r+=t.get(i,o);return r}(this);default:throw new Error(`invalid option: ${n}`)}}product(n){switch(n){case"row":return function(t){let r=yp(t.rows,1);for(let i=0;i<t.rows;++i)for(let o=0;o<t.columns;++o)r[i]*=t.get(i,o);return r}(this);case"column":return function(t){let r=yp(t.columns,1);for(let i=0;i<t.rows;++i)for(let o=0;o<t.columns;++o)r[o]*=t.get(i,o);return r}(this);case void 0:return function(t){let r=1;for(let i=0;i<t.rows;i++)for(let o=0;o<t.columns;o++)r*=t.get(i,o);return r}(this);default:throw new Error(`invalid option: ${n}`)}}mean(n){const t=this.sum(n);switch(n){case"row":for(let r=0;r<this.rows;r++)t[r]/=this.columns;return t;case"column":for(let r=0;r<this.columns;r++)t[r]/=this.rows;return t;case void 0:return t/this.size;default:throw new Error(`invalid option: ${n}`)}}variance(n,t={}){if(typeof n=="object"&&(t=n,n=void 0),typeof t!="object")throw new TypeError("options must be an object");const{unbiased:r=!0,mean:i=this.mean(n)}=t;if(typeof r!="boolean")throw new TypeError("unbiased must be a boolean");switch(n){case"row":if(!Array.isArray(i))throw new TypeError("mean must be an array");return function(o,a,s){const u=o.rows,c=o.columns,l=[];for(let h=0;h<u;h++){let d=0,f=0,p=0;for(let g=0;g<c;g++)p=o.get(h,g)-s[h],d+=p,f+=p*p;a?l.push((f-d*d/c)/(c-1)):l.push((f-d*d/c)/c)}return l}(this,r,i);case"column":if(!Array.isArray(i))throw new TypeError("mean must be an array");return function(o,a,s){const u=o.rows,c=o.columns,l=[];for(let h=0;h<c;h++){let d=0,f=0,p=0;for(let g=0;g<u;g++)p=o.get(g,h)-s[h],d+=p,f+=p*p;a?l.push((f-d*d/u)/(u-1)):l.push((f-d*d/u)/u)}return l}(this,r,i);case void 0:if(typeof i!="number")throw new TypeError("mean must be a number");return function(o,a,s){const u=o.rows,c=o.columns,l=u*c;let h=0,d=0,f=0;for(let p=0;p<u;p++)for(let g=0;g<c;g++)f=o.get(p,g)-s,h+=f,d+=f*f;return a?(d-h*h/l)/(l-1):(d-h*h/l)/l}(this,r,i);default:throw new Error(`invalid option: ${n}`)}}standardDeviation(n,t){typeof n=="object"&&(t=n,n=void 0);const r=this.variance(n,t);if(n===void 0)return Math.sqrt(r);for(let i=0;i<r.length;i++)r[i]=Math.sqrt(r[i]);return r}center(n,t={}){if(typeof n=="object"&&(t=n,n=void 0),typeof t!="object")throw new TypeError("options must be an object");const{center:r=this.mean(n)}=t;switch(n){case"row":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(i,o){for(let a=0;a<i.rows;a++)for(let s=0;s<i.columns;s++)i.set(a,s,i.get(a,s)-o[a])}(this,r),this;case"column":if(!Array.isArray(r))throw new TypeError("center must be an array");return function(i,o){for(let a=0;a<i.rows;a++)for(let s=0;s<i.columns;s++)i.set(a,s,i.get(a,s)-o[s])}(this,r),this;case void 0:if(typeof r!="number")throw new TypeError("center must be a number");return function(i,o){for(let a=0;a<i.rows;a++)for(let s=0;s<i.columns;s++)i.set(a,s,i.get(a,s)-o)}(this,r),this;default:throw new Error(`invalid option: ${n}`)}}scale(n,t={}){if(typeof n=="object"&&(t=n,n=void 0),typeof t!="object")throw new TypeError("options must be an object");let r=t.scale;switch(n){case"row":if(r===void 0)r=function(i){const o=[];for(let a=0;a<i.rows;a++){let s=0;for(let u=0;u<i.columns;u++)s+=Math.pow(i.get(a,u),2)/(i.columns-1);o.push(Math.sqrt(s))}return o}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(i,o){for(let a=0;a<i.rows;a++)for(let s=0;s<i.columns;s++)i.set(a,s,i.get(a,s)/o[a])}(this,r),this;case"column":if(r===void 0)r=function(i){const o=[];for(let a=0;a<i.columns;a++){let s=0;for(let u=0;u<i.rows;u++)s+=Math.pow(i.get(u,a),2)/(i.rows-1);o.push(Math.sqrt(s))}return o}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(i,o){for(let a=0;a<i.rows;a++)for(let s=0;s<i.columns;s++)i.set(a,s,i.get(a,s)/o[s])}(this,r),this;case void 0:if(r===void 0)r=function(i){const o=i.size-1;let a=0;for(let s=0;s<i.columns;s++)for(let u=0;u<i.rows;u++)a+=Math.pow(i.get(u,s),2)/o;return Math.sqrt(a)}(this);else if(typeof r!="number")throw new TypeError("scale must be a number");return function(i,o){for(let a=0;a<i.rows;a++)for(let s=0;s<i.columns;s++)i.set(a,s,i.get(a,s)/o)}(this,r),this;default:throw new Error(`invalid option: ${n}`)}}toString(n){return aT(this,n)}}function lT(e,n){return e-n}Qt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Qt.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return aT(this)}),Qt.random=Qt.rand,Qt.randomInt=Qt.randInt,Qt.diagonal=Qt.diag,Qt.prototype.diagonal=Qt.prototype.diag,Qt.identity=Qt.eye,Qt.prototype.negate=Qt.prototype.neg,Qt.prototype.tensorProduct=Qt.prototype.kroneckerProduct;class St extends Qt{constructor(n,t){if(super(),St.isMatrix(n))return n.clone();if(Number.isInteger(n)&&n>0){if(this.data=[],!(Number.isInteger(t)&&t>0))throw new TypeError("nColumns must be a positive integer");for(let r=0;r<n;r++)this.data.push(new Float64Array(t))}else{if(!Array.isArray(n))throw new TypeError("First argument must be a positive number or an array");{const r=n;if(n=r.length,typeof(t=r[0].length)!="number"||t===0)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<n;i++){if(r[i].length!==t)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(r[i]))}}}return this.rows=n,this.columns=t,this}set(n,t,r){return this.data[n][t]=r,this}get(n,t){return this.data[n][t]}removeRow(n){if(pi(this,n),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(n,1),this.rows-=1,this}addRow(n,t){return t===void 0&&(t=n,n=this.rows),pi(this,n,!0),t=Float64Array.from(Hu(this,t)),this.data.splice(n,0,t),this.rows+=1,this}removeColumn(n){if(gi(this,n),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(let t=0;t<this.rows;t++){const r=new Float64Array(this.columns-1);for(let i=0;i<n;i++)r[i]=this.data[t][i];for(let i=n+1;i<this.columns;i++)r[i-1]=this.data[t][i];this.data[t]=r}return this.columns-=1,this}addColumn(n,t){t===void 0&&(t=n,n=this.columns),gi(this,n,!0),t=qu(this,t);for(let r=0;r<this.rows;r++){const i=new Float64Array(this.columns+1);let o=0;for(;o<n;o++)i[o]=this.data[r][o];for(i[o++]=t[r];o<this.columns+1;o++)i[o]=this.data[r][o-1];this.data[r]=i}return this.columns+=1,this}}(function(e,n){e.prototype.add=function(t){return typeof t=="number"?this.addS(t):this.addM(t)},e.prototype.addS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)+t);return this},e.prototype.addM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)+t.get(r,i));return this},e.add=function(t,r){return new n(t).add(r)},e.prototype.sub=function(t){return typeof t=="number"?this.subS(t):this.subM(t)},e.prototype.subS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)-t);return this},e.prototype.subM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)-t.get(r,i));return this},e.sub=function(t,r){return new n(t).sub(r)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(t){return typeof t=="number"?this.mulS(t):this.mulM(t)},e.prototype.mulS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)*t);return this},e.prototype.mulM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)*t.get(r,i));return this},e.mul=function(t,r){return new n(t).mul(r)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(t){return typeof t=="number"?this.divS(t):this.divM(t)},e.prototype.divS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)/t);return this},e.prototype.divM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)/t.get(r,i));return this},e.div=function(t,r){return new n(t).div(r)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(t){return typeof t=="number"?this.modS(t):this.modM(t)},e.prototype.modS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)%t);return this},e.prototype.modM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)%t.get(r,i));return this},e.mod=function(t,r){return new n(t).mod(r)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(t){return typeof t=="number"?this.andS(t):this.andM(t)},e.prototype.andS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)&t);return this},e.prototype.andM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)&t.get(r,i));return this},e.and=function(t,r){return new n(t).and(r)},e.prototype.or=function(t){return typeof t=="number"?this.orS(t):this.orM(t)},e.prototype.orS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)|t);return this},e.prototype.orM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)|t.get(r,i));return this},e.or=function(t,r){return new n(t).or(r)},e.prototype.xor=function(t){return typeof t=="number"?this.xorS(t):this.xorM(t)},e.prototype.xorS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)^t);return this},e.prototype.xorM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)^t.get(r,i));return this},e.xor=function(t,r){return new n(t).xor(r)},e.prototype.leftShift=function(t){return typeof t=="number"?this.leftShiftS(t):this.leftShiftM(t)},e.prototype.leftShiftS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)<<t);return this},e.prototype.leftShiftM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)<<t.get(r,i));return this},e.leftShift=function(t,r){return new n(t).leftShift(r)},e.prototype.signPropagatingRightShift=function(t){return typeof t=="number"?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},e.prototype.signPropagatingRightShiftS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)>>t);return this},e.prototype.signPropagatingRightShiftM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)>>t.get(r,i));return this},e.signPropagatingRightShift=function(t,r){return new n(t).signPropagatingRightShift(r)},e.prototype.rightShift=function(t){return typeof t=="number"?this.rightShiftS(t):this.rightShiftM(t)},e.prototype.rightShiftS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)>>>t);return this},e.prototype.rightShiftM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)>>>t.get(r,i));return this},e.rightShift=function(t,r){return new n(t).rightShift(r)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,~this.get(t,r));return this},e.not=function(t){return new n(t).not()},e.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.abs(this.get(t,r)));return this},e.abs=function(t){return new n(t).abs()},e.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.acos(this.get(t,r)));return this},e.acos=function(t){return new n(t).acos()},e.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.acosh(this.get(t,r)));return this},e.acosh=function(t){return new n(t).acosh()},e.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.asin(this.get(t,r)));return this},e.asin=function(t){return new n(t).asin()},e.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.asinh(this.get(t,r)));return this},e.asinh=function(t){return new n(t).asinh()},e.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.atan(this.get(t,r)));return this},e.atan=function(t){return new n(t).atan()},e.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.atanh(this.get(t,r)));return this},e.atanh=function(t){return new n(t).atanh()},e.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.cbrt(this.get(t,r)));return this},e.cbrt=function(t){return new n(t).cbrt()},e.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.ceil(this.get(t,r)));return this},e.ceil=function(t){return new n(t).ceil()},e.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.clz32(this.get(t,r)));return this},e.clz32=function(t){return new n(t).clz32()},e.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.cos(this.get(t,r)));return this},e.cos=function(t){return new n(t).cos()},e.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.cosh(this.get(t,r)));return this},e.cosh=function(t){return new n(t).cosh()},e.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.exp(this.get(t,r)));return this},e.exp=function(t){return new n(t).exp()},e.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.expm1(this.get(t,r)));return this},e.expm1=function(t){return new n(t).expm1()},e.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.floor(this.get(t,r)));return this},e.floor=function(t){return new n(t).floor()},e.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.fround(this.get(t,r)));return this},e.fround=function(t){return new n(t).fround()},e.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.log(this.get(t,r)));return this},e.log=function(t){return new n(t).log()},e.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.log1p(this.get(t,r)));return this},e.log1p=function(t){return new n(t).log1p()},e.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.log10(this.get(t,r)));return this},e.log10=function(t){return new n(t).log10()},e.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.log2(this.get(t,r)));return this},e.log2=function(t){return new n(t).log2()},e.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.round(this.get(t,r)));return this},e.round=function(t){return new n(t).round()},e.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.sign(this.get(t,r)));return this},e.sign=function(t){return new n(t).sign()},e.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.sin(this.get(t,r)));return this},e.sin=function(t){return new n(t).sin()},e.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.sinh(this.get(t,r)));return this},e.sinh=function(t){return new n(t).sinh()},e.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.sqrt(this.get(t,r)));return this},e.sqrt=function(t){return new n(t).sqrt()},e.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.tan(this.get(t,r)));return this},e.tan=function(t){return new n(t).tan()},e.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.tanh(this.get(t,r)));return this},e.tanh=function(t){return new n(t).tanh()},e.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,Math.trunc(this.get(t,r)));return this},e.trunc=function(t){return new n(t).trunc()},e.pow=function(t,r){return new n(t).pow(r)},e.prototype.pow=function(t){return typeof t=="number"?this.powS(t):this.powM(t)},e.prototype.powS=function(t){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.pow(this.get(r,i),t));return this},e.prototype.powM=function(t){if(t=n.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.pow(this.get(r,i),t.get(r,i)));return this}})(Qt,St);class Yo extends Qt{constructor(n,t,r){super(),this.matrix=n,this.rows=t,this.columns=r}}class xp extends Yo{constructor(n,t,r){let i=sT(n,t,r);super(n,i.row.length,i.column.length),this.rowIndices=i.row,this.columnIndices=i.column}set(n,t,r){return this.matrix.set(this.rowIndices[n],this.columnIndices[t],r),this}get(n,t){return this.matrix.get(this.rowIndices[n],this.columnIndices[t])}}class hT extends Qt{constructor(n,t={}){const{rows:r=1}=t;if(n.length%r!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=n.length/r,this.data=n}set(n,t,r){let i=this._calculateIndex(n,t);return this.data[i]=r,this}get(n,t){let r=this._calculateIndex(n,t);return this.data[r]}_calculateIndex(n,t){return n*this.columns+t}}class ei extends Qt{constructor(n){super(),this.data=n,this.rows=n.length,this.columns=n[0].length}set(n,t,r){return this.data[n][t]=r,this}get(n,t){return this.data[n][t]}}class wp{constructor(n){let t,r,i,o,a,s,u,c,l,h=(n=ei.checkMatrix(n)).clone(),d=h.rows,f=h.columns,p=new Float64Array(d),g=1;for(t=0;t<d;t++)p[t]=t;for(c=new Float64Array(d),r=0;r<f;r++){for(t=0;t<d;t++)c[t]=h.get(t,r);for(t=0;t<d;t++){for(l=Math.min(t,r),a=0,i=0;i<l;i++)a+=h.get(t,i)*c[i];c[t]-=a,h.set(t,r,c[t])}for(o=r,t=r+1;t<d;t++)Math.abs(c[t])>Math.abs(c[o])&&(o=t);if(o!==r){for(i=0;i<f;i++)s=h.get(o,i),h.set(o,i,h.get(r,i)),h.set(r,i,s);u=p[o],p[o]=p[r],p[r]=u,g=-g}if(r<d&&h.get(r,r)!==0)for(t=r+1;t<d;t++)h.set(t,r,h.get(t,r)/h.get(r,r))}this.LU=h,this.pivotVector=p,this.pivotSign=g}isSingular(){let n=this.LU,t=n.columns;for(let r=0;r<t;r++)if(n.get(r,r)===0)return!0;return!1}solve(n){n=St.checkMatrix(n);let t=this.LU;if(t.rows!==n.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r,i,o,a=n.columns,s=n.subMatrixRow(this.pivotVector,0,a-1),u=t.columns;for(o=0;o<u;o++)for(r=o+1;r<u;r++)for(i=0;i<a;i++)s.set(r,i,s.get(r,i)-s.get(o,i)*t.get(r,o));for(o=u-1;o>=0;o--){for(i=0;i<a;i++)s.set(o,i,s.get(o,i)/t.get(o,o));for(r=0;r<o;r++)for(i=0;i<a;i++)s.set(r,i,s.get(r,i)-s.get(o,i)*t.get(r,o))}return s}get determinant(){let n=this.LU;if(!n.isSquare())throw new Error("Matrix must be square");let t=this.pivotSign,r=n.columns;for(let i=0;i<r;i++)t*=n.get(i,i);return t}get lowerTriangularMatrix(){let n=this.LU,t=n.rows,r=n.columns,i=new St(t,r);for(let o=0;o<t;o++)for(let a=0;a<r;a++)o>a?i.set(o,a,n.get(o,a)):o===a?i.set(o,a,1):i.set(o,a,0);return i}get upperTriangularMatrix(){let n=this.LU,t=n.rows,r=n.columns,i=new St(t,r);for(let o=0;o<t;o++)for(let a=0;a<r;a++)o<=a?i.set(o,a,n.get(o,a)):i.set(o,a,0);return i}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Xo(e,n){let t=0;return Math.abs(e)>Math.abs(n)?(t=n/e,Math.abs(e)*Math.sqrt(1+t*t)):n!==0?(t=e/n,Math.abs(n)*Math.sqrt(1+t*t)):0}class c1{constructor(n){let t,r,i,o,a=(n=ei.checkMatrix(n)).clone(),s=n.rows,u=n.columns,c=new Float64Array(u);for(i=0;i<u;i++){let l=0;for(t=i;t<s;t++)l=Xo(l,a.get(t,i));if(l!==0){for(a.get(i,i)<0&&(l=-l),t=i;t<s;t++)a.set(t,i,a.get(t,i)/l);for(a.set(i,i,a.get(i,i)+1),r=i+1;r<u;r++){for(o=0,t=i;t<s;t++)o+=a.get(t,i)*a.get(t,r);for(o=-o/a.get(i,i),t=i;t<s;t++)a.set(t,r,a.get(t,r)+o*a.get(t,i))}}c[i]=-l}this.QR=a,this.Rdiag=c}solve(n){n=St.checkMatrix(n);let t=this.QR,r=t.rows;if(n.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let i,o,a,s,u=n.columns,c=n.clone(),l=t.columns;for(a=0;a<l;a++)for(o=0;o<u;o++){for(s=0,i=a;i<r;i++)s+=t.get(i,a)*c.get(i,o);for(s=-s/t.get(a,a),i=a;i<r;i++)c.set(i,o,c.get(i,o)+s*t.get(i,a))}for(a=l-1;a>=0;a--){for(o=0;o<u;o++)c.set(a,o,c.get(a,o)/this.Rdiag[a]);for(i=0;i<a;i++)for(o=0;o<u;o++)c.set(i,o,c.get(i,o)-c.get(a,o)*t.get(i,a))}return c.subMatrix(0,l-1,0,u-1)}isFullRank(){let n=this.QR.columns;for(let t=0;t<n;t++)if(this.Rdiag[t]===0)return!1;return!0}get upperTriangularMatrix(){let n,t,r=this.QR,i=r.columns,o=new St(i,i);for(n=0;n<i;n++)for(t=0;t<i;t++)n<t?o.set(n,t,r.get(n,t)):n===t?o.set(n,t,this.Rdiag[n]):o.set(n,t,0);return o}get orthogonalMatrix(){let n,t,r,i,o=this.QR,a=o.rows,s=o.columns,u=new St(a,s);for(r=s-1;r>=0;r--){for(n=0;n<a;n++)u.set(n,r,0);for(u.set(r,r,1),t=r;t<s;t++)if(o.get(r,r)!==0){for(i=0,n=r;n<a;n++)i+=o.get(n,r)*u.get(n,t);for(i=-i/o.get(r,r),n=r;n<a;n++)u.set(n,t,u.get(n,t)+i*o.get(n,r))}}return u}}class Zu{constructor(n,t={}){let r=(n=ei.checkMatrix(n)).rows,i=n.columns;const{computeLeftSingularVectors:o=!0,computeRightSingularVectors:a=!0,autoTranspose:s=!1}=t;let u,c=!!o,l=!!a,h=!1;if(r<i)if(s){u=n.transpose(),r=u.rows,i=u.columns,h=!0;let _=c;c=l,l=_}else u=n.clone();else u=n.clone();let d=Math.min(r,i),f=Math.min(r+1,i),p=new Float64Array(f),g=new St(r,d),v=new St(i,i),m=new Float64Array(i),y=new Float64Array(r),b=new Float64Array(f);for(let _=0;_<f;_++)b[_]=_;let x=Math.min(r-1,i),w=Math.max(0,Math.min(i-2,r)),E=Math.max(x,w);for(let _=0;_<E;_++){if(_<x){p[_]=0;for(let C=_;C<r;C++)p[_]=Xo(p[_],u.get(C,_));if(p[_]!==0){u.get(_,_)<0&&(p[_]=-p[_]);for(let C=_;C<r;C++)u.set(C,_,u.get(C,_)/p[_]);u.set(_,_,u.get(_,_)+1)}p[_]=-p[_]}for(let C=_+1;C<i;C++){if(_<x&&p[_]!==0){let T=0;for(let A=_;A<r;A++)T+=u.get(A,_)*u.get(A,C);T=-T/u.get(_,_);for(let A=_;A<r;A++)u.set(A,C,u.get(A,C)+T*u.get(A,_))}m[C]=u.get(_,C)}if(c&&_<x)for(let C=_;C<r;C++)g.set(C,_,u.get(C,_));if(_<w){m[_]=0;for(let C=_+1;C<i;C++)m[_]=Xo(m[_],m[C]);if(m[_]!==0){m[_+1]<0&&(m[_]=0-m[_]);for(let C=_+1;C<i;C++)m[C]/=m[_];m[_+1]+=1}if(m[_]=-m[_],_+1<r&&m[_]!==0){for(let C=_+1;C<r;C++)y[C]=0;for(let C=_+1;C<r;C++)for(let T=_+1;T<i;T++)y[C]+=m[T]*u.get(C,T);for(let C=_+1;C<i;C++){let T=-m[C]/m[_+1];for(let A=_+1;A<r;A++)u.set(A,C,u.get(A,C)+T*y[A])}}if(l)for(let C=_+1;C<i;C++)v.set(C,_,m[C])}}let S=Math.min(i,r+1);if(x<i&&(p[x]=u.get(x,x)),r<S&&(p[S-1]=0),w+1<S&&(m[w]=u.get(w,S-1)),m[S-1]=0,c){for(let _=x;_<d;_++){for(let C=0;C<r;C++)g.set(C,_,0);g.set(_,_,1)}for(let _=x-1;_>=0;_--)if(p[_]!==0){for(let C=_+1;C<d;C++){let T=0;for(let A=_;A<r;A++)T+=g.get(A,_)*g.get(A,C);T=-T/g.get(_,_);for(let A=_;A<r;A++)g.set(A,C,g.get(A,C)+T*g.get(A,_))}for(let C=_;C<r;C++)g.set(C,_,-g.get(C,_));g.set(_,_,1+g.get(_,_));for(let C=0;C<_-1;C++)g.set(C,_,0)}else{for(let C=0;C<r;C++)g.set(C,_,0);g.set(_,_,1)}}if(l)for(let _=i-1;_>=0;_--){if(_<w&&m[_]!==0)for(let C=_+1;C<i;C++){let T=0;for(let A=_+1;A<i;A++)T+=v.get(A,_)*v.get(A,C);T=-T/v.get(_+1,_);for(let A=_+1;A<i;A++)v.set(A,C,v.get(A,C)+T*v.get(A,_))}for(let C=0;C<i;C++)v.set(C,_,0);v.set(_,_,1)}let M=S-1,k=Number.EPSILON;for(;S>0;){let _,C;for(_=S-2;_>=-1&&_!==-1;_--){const T=Number.MIN_VALUE+k*Math.abs(p[_]+Math.abs(p[_+1]));if(Math.abs(m[_])<=T||Number.isNaN(m[_])){m[_]=0;break}}if(_===S-2)C=4;else{let T;for(T=S-1;T>=_&&T!==_;T--){let A=(T!==S?Math.abs(m[T]):0)+(T!==_+1?Math.abs(m[T-1]):0);if(Math.abs(p[T])<=k*A){p[T]=0;break}}T===_?C=3:T===S-1?C=1:(C=2,_=T)}switch(_++,C){case 1:{let T=m[S-2];m[S-2]=0;for(let A=S-2;A>=_;A--){let D=Xo(p[A],T),R=p[A]/D,B=T/D;if(p[A]=D,A!==_&&(T=-B*m[A-1],m[A-1]=R*m[A-1]),l)for(let F=0;F<i;F++)D=R*v.get(F,A)+B*v.get(F,S-1),v.set(F,S-1,-B*v.get(F,A)+R*v.get(F,S-1)),v.set(F,A,D)}break}case 2:{let T=m[_-1];m[_-1]=0;for(let A=_;A<S;A++){let D=Xo(p[A],T),R=p[A]/D,B=T/D;if(p[A]=D,T=-B*m[A],m[A]=R*m[A],c)for(let F=0;F<r;F++)D=R*g.get(F,A)+B*g.get(F,_-1),g.set(F,_-1,-B*g.get(F,A)+R*g.get(F,_-1)),g.set(F,A,D)}break}case 3:{const T=Math.max(Math.abs(p[S-1]),Math.abs(p[S-2]),Math.abs(m[S-2]),Math.abs(p[_]),Math.abs(m[_])),A=p[S-1]/T,D=p[S-2]/T,R=m[S-2]/T,B=p[_]/T,F=m[_]/T,N=((D+A)*(D-A)+R*R)/2,L=A*R*(A*R);let z=0;N===0&&L===0||(z=N<0?0-Math.sqrt(N*N+L):Math.sqrt(N*N+L),z=L/(N+z));let Z=(B+A)*(B-A)+z,ne=B*F;for(let J=_;J<S-1;J++){let q=Xo(Z,ne);q===0&&(q=Number.MIN_VALUE);let ie=Z/q,Me=ne/q;if(J!==_&&(m[J-1]=q),Z=ie*p[J]+Me*m[J],m[J]=ie*m[J]-Me*p[J],ne=Me*p[J+1],p[J+1]=ie*p[J+1],l)for(let me=0;me<i;me++)q=ie*v.get(me,J)+Me*v.get(me,J+1),v.set(me,J+1,-Me*v.get(me,J)+ie*v.get(me,J+1)),v.set(me,J,q);if(q=Xo(Z,ne),q===0&&(q=Number.MIN_VALUE),ie=Z/q,Me=ne/q,p[J]=q,Z=ie*m[J]+Me*p[J+1],p[J+1]=-Me*m[J]+ie*p[J+1],ne=Me*m[J+1],m[J+1]=ie*m[J+1],c&&J<r-1)for(let me=0;me<r;me++)q=ie*g.get(me,J)+Me*g.get(me,J+1),g.set(me,J+1,-Me*g.get(me,J)+ie*g.get(me,J+1)),g.set(me,J,q)}m[S-2]=Z;break}case 4:if(p[_]<=0&&(p[_]=p[_]<0?-p[_]:0,l))for(let T=0;T<=M;T++)v.set(T,_,-v.get(T,_));for(;_<M&&!(p[_]>=p[_+1]);){let T=p[_];if(p[_]=p[_+1],p[_+1]=T,l&&_<i-1)for(let A=0;A<i;A++)T=v.get(A,_+1),v.set(A,_+1,v.get(A,_)),v.set(A,_,T);if(c&&_<r-1)for(let A=0;A<r;A++)T=g.get(A,_+1),g.set(A,_+1,g.get(A,_)),g.set(A,_,T);_++}S--}}if(h){let _=v;v=g,g=_}this.m=r,this.n=i,this.s=p,this.U=g,this.V=v}solve(n){let t=n,r=this.threshold,i=this.s.length,o=St.zeros(i,i);for(let d=0;d<i;d++)Math.abs(this.s[d])<=r?o.set(d,d,0):o.set(d,d,1/this.s[d]);let a=this.U,s=this.rightSingularVectors,u=s.mmul(o),c=s.rows,l=a.rows,h=St.zeros(c,l);for(let d=0;d<c;d++)for(let f=0;f<l;f++){let p=0;for(let g=0;g<i;g++)p+=u.get(d,g)*a.get(f,g);h.set(d,f,p)}return h.mmul(t)}solveForDiagonal(n){return this.solve(St.diag(n))}inverse(){let n=this.V,t=this.threshold,r=n.rows,i=n.columns,o=new St(r,this.s.length);for(let l=0;l<r;l++)for(let h=0;h<i;h++)Math.abs(this.s[h])>t&&o.set(l,h,n.get(l,h)/this.s[h]);let a=this.U,s=a.rows,u=a.columns,c=new St(r,s);for(let l=0;l<r;l++)for(let h=0;h<s;h++){let d=0;for(let f=0;f<u;f++)d+=o.get(l,f)*a.get(h,f);c.set(l,h,d)}return c}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let n=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,r=this.s;for(let i=0,o=r.length;i<o;i++)r[i]>n&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return St.diag(this.s)}}function dT(e,n,t=!1){return e=ei.checkMatrix(e),n=ei.checkMatrix(n),t?new Zu(e).solve(n):e.isSquare()?new wp(e).solve(n):new c1(e).solve(n)}function _7(e,n){let t=[];for(let r=0;r<e;r++)r!==n&&t.push(r);return t}function k7(e,n,t,r=1e-9,i=1e-9){if(e>i)return new Array(n.rows+1).fill(0);{let o=n.addRow(t,[0]);for(let a=0;a<o.rows;a++)Math.abs(o.get(a,0))<r&&o.set(a,0,0);return o.to1DArray()}}class fT{constructor(n,t={}){const{assumeSymmetric:r=!1}=t;if(!(n=ei.checkMatrix(n)).isSquare())throw new Error("Matrix is not a square matrix");let i,o,a=n.columns,s=new St(a,a),u=new Float64Array(a),c=new Float64Array(a),l=n,h=!1;if(h=!!r||n.isSymmetric(),h){for(i=0;i<a;i++)for(o=0;o<a;o++)s.set(i,o,l.get(i,o));(function(d,f,p,g){let v,m,y,b,x,w,E,S;for(x=0;x<d;x++)p[x]=g.get(d-1,x);for(b=d-1;b>0;b--){for(S=0,y=0,w=0;w<b;w++)S+=Math.abs(p[w]);if(S===0)for(f[b]=p[b-1],x=0;x<b;x++)p[x]=g.get(b-1,x),g.set(b,x,0),g.set(x,b,0);else{for(w=0;w<b;w++)p[w]/=S,y+=p[w]*p[w];for(v=p[b-1],m=Math.sqrt(y),v>0&&(m=-m),f[b]=S*m,y-=v*m,p[b-1]=v-m,x=0;x<b;x++)f[x]=0;for(x=0;x<b;x++){for(v=p[x],g.set(x,b,v),m=f[x]+g.get(x,x)*v,w=x+1;w<=b-1;w++)m+=g.get(w,x)*p[w],f[w]+=g.get(w,x)*v;f[x]=m}for(v=0,x=0;x<b;x++)f[x]/=y,v+=f[x]*p[x];for(E=v/(y+y),x=0;x<b;x++)f[x]-=E*p[x];for(x=0;x<b;x++){for(v=p[x],m=f[x],w=x;w<=b-1;w++)g.set(w,x,g.get(w,x)-(v*f[w]+m*p[w]));p[x]=g.get(b-1,x),g.set(b,x,0)}}p[b]=y}for(b=0;b<d-1;b++){if(g.set(d-1,b,g.get(b,b)),g.set(b,b,1),y=p[b+1],y!==0){for(w=0;w<=b;w++)p[w]=g.get(w,b+1)/y;for(x=0;x<=b;x++){for(m=0,w=0;w<=b;w++)m+=g.get(w,b+1)*g.get(w,x);for(w=0;w<=b;w++)g.set(w,x,g.get(w,x)-m*p[w])}}for(w=0;w<=b;w++)g.set(w,b+1,0)}for(x=0;x<d;x++)p[x]=g.get(d-1,x),g.set(d-1,x,0);g.set(d-1,d-1,1),f[0]=0})(a,c,u,s),function(d,f,p,g){let v,m,y,b,x,w,E,S,M,k,_,C,T,A,D,R;for(y=1;y<d;y++)f[y-1]=f[y];f[d-1]=0;let B=0,F=0,N=Number.EPSILON;for(w=0;w<d;w++){for(F=Math.max(F,Math.abs(p[w])+Math.abs(f[w])),E=w;E<d&&!(Math.abs(f[E])<=N*F);)E++;if(E>w)do{for(v=p[w],S=(p[w+1]-v)/(2*f[w]),M=Xo(S,1),S<0&&(M=-M),p[w]=f[w]/(S+M),p[w+1]=f[w]*(S+M),k=p[w+1],m=v-p[w],y=w+2;y<d;y++)p[y]-=m;for(B+=m,S=p[E],_=1,C=_,T=_,A=f[w+1],D=0,R=0,y=E-1;y>=w;y--)for(T=C,C=_,R=D,v=_*f[y],m=_*S,M=Xo(S,f[y]),f[y+1]=D*M,D=f[y]/M,_=S/M,S=_*p[y]-D*v,p[y+1]=m+D*(_*v+D*p[y]),x=0;x<d;x++)m=g.get(x,y+1),g.set(x,y+1,D*g.get(x,y)+_*m),g.set(x,y,_*g.get(x,y)-D*m);S=-D*R*T*A*f[w]/k,f[w]=D*S,p[w]=_*S}while(Math.abs(f[w])>N*F);p[w]=p[w]+B,f[w]=0}for(y=0;y<d-1;y++){for(x=y,S=p[y],b=y+1;b<d;b++)p[b]<S&&(x=b,S=p[b]);if(x!==y)for(p[x]=p[y],p[y]=S,b=0;b<d;b++)S=g.get(b,y),g.set(b,y,g.get(b,x)),g.set(b,x,S)}}(a,c,u,s)}else{let d=new St(a,a),f=new Float64Array(a);for(o=0;o<a;o++)for(i=0;i<a;i++)d.set(i,o,l.get(i,o));(function(p,g,v,m){let y,b,x,w,E,S,M,k=0,_=p-1;for(S=k+1;S<=_-1;S++){for(M=0,w=S;w<=_;w++)M+=Math.abs(g.get(w,S-1));if(M!==0){for(x=0,w=_;w>=S;w--)v[w]=g.get(w,S-1)/M,x+=v[w]*v[w];for(b=Math.sqrt(x),v[S]>0&&(b=-b),x-=v[S]*b,v[S]=v[S]-b,E=S;E<p;E++){for(y=0,w=_;w>=S;w--)y+=v[w]*g.get(w,E);for(y/=x,w=S;w<=_;w++)g.set(w,E,g.get(w,E)-y*v[w])}for(w=0;w<=_;w++){for(y=0,E=_;E>=S;E--)y+=v[E]*g.get(w,E);for(y/=x,E=S;E<=_;E++)g.set(w,E,g.get(w,E)-y*v[E])}v[S]=M*v[S],g.set(S,S-1,M*b)}}for(w=0;w<p;w++)for(E=0;E<p;E++)m.set(w,E,w===E?1:0);for(S=_-1;S>=k+1;S--)if(g.get(S,S-1)!==0){for(w=S+1;w<=_;w++)v[w]=g.get(w,S-1);for(E=S;E<=_;E++){for(b=0,w=S;w<=_;w++)b+=v[w]*m.get(w,E);for(b=b/v[S]/g.get(S,S-1),w=S;w<=_;w++)m.set(w,E,m.get(w,E)+b*v[w])}}})(a,d,f,s),function(p,g,v,m,y){let b,x,w,E,S,M,k,_,C,T,A,D,R,B,F,N=p-1,L=0,z=p-1,Z=Number.EPSILON,ne=0,J=0,q=0,ie=0,Me=0,me=0,ke=0,yt=0;for(b=0;b<p;b++)for((b<L||b>z)&&(v[b]=y.get(b,b),g[b]=0),x=Math.max(b-1,0);x<p;x++)J+=Math.abs(y.get(b,x));for(;N>=L;){for(E=N;E>L&&(me=Math.abs(y.get(E-1,E-1))+Math.abs(y.get(E,E)),me===0&&(me=J),!(Math.abs(y.get(E,E-1))<Z*me));)E--;if(E===N)y.set(N,N,y.get(N,N)+ne),v[N]=y.get(N,N),g[N]=0,N--,yt=0;else if(E===N-1){if(k=y.get(N,N-1)*y.get(N-1,N),q=(y.get(N-1,N-1)-y.get(N,N))/2,ie=q*q+k,ke=Math.sqrt(Math.abs(ie)),y.set(N,N,y.get(N,N)+ne),y.set(N-1,N-1,y.get(N-1,N-1)+ne),_=y.get(N,N),ie>=0){for(ke=q>=0?q+ke:q-ke,v[N-1]=_+ke,v[N]=v[N-1],ke!==0&&(v[N]=_-k/ke),g[N-1]=0,g[N]=0,_=y.get(N,N-1),me=Math.abs(_)+Math.abs(ke),q=_/me,ie=ke/me,Me=Math.sqrt(q*q+ie*ie),q/=Me,ie/=Me,x=N-1;x<p;x++)ke=y.get(N-1,x),y.set(N-1,x,ie*ke+q*y.get(N,x)),y.set(N,x,ie*y.get(N,x)-q*ke);for(b=0;b<=N;b++)ke=y.get(b,N-1),y.set(b,N-1,ie*ke+q*y.get(b,N)),y.set(b,N,ie*y.get(b,N)-q*ke);for(b=L;b<=z;b++)ke=m.get(b,N-1),m.set(b,N-1,ie*ke+q*m.get(b,N)),m.set(b,N,ie*m.get(b,N)-q*ke)}else v[N-1]=_+q,v[N]=_+q,g[N-1]=ke,g[N]=-ke;N-=2,yt=0}else{if(_=y.get(N,N),C=0,k=0,E<N&&(C=y.get(N-1,N-1),k=y.get(N,N-1)*y.get(N-1,N)),yt===10){for(ne+=_,b=L;b<=N;b++)y.set(b,b,y.get(b,b)-_);me=Math.abs(y.get(N,N-1))+Math.abs(y.get(N-1,N-2)),_=C=.75*me,k=-.4375*me*me}if(yt===30&&(me=(C-_)/2,me=me*me+k,me>0)){for(me=Math.sqrt(me),C<_&&(me=-me),me=_-k/((C-_)/2+me),b=L;b<=N;b++)y.set(b,b,y.get(b,b)-me);ne+=me,_=C=k=.964}for(yt+=1,S=N-2;S>=E&&(ke=y.get(S,S),Me=_-ke,me=C-ke,q=(Me*me-k)/y.get(S+1,S)+y.get(S,S+1),ie=y.get(S+1,S+1)-ke-Me-me,Me=y.get(S+2,S+1),me=Math.abs(q)+Math.abs(ie)+Math.abs(Me),q/=me,ie/=me,Me/=me,S!==E)&&!(Math.abs(y.get(S,S-1))*(Math.abs(ie)+Math.abs(Me))<Z*(Math.abs(q)*(Math.abs(y.get(S-1,S-1))+Math.abs(ke)+Math.abs(y.get(S+1,S+1)))));)S--;for(b=S+2;b<=N;b++)y.set(b,b-2,0),b>S+2&&y.set(b,b-3,0);for(w=S;w<=N-1&&(B=w!==N-1,w!==S&&(q=y.get(w,w-1),ie=y.get(w+1,w-1),Me=B?y.get(w+2,w-1):0,_=Math.abs(q)+Math.abs(ie)+Math.abs(Me),_!==0&&(q/=_,ie/=_,Me/=_)),_!==0);w++)if(me=Math.sqrt(q*q+ie*ie+Me*Me),q<0&&(me=-me),me!==0){for(w!==S?y.set(w,w-1,-me*_):E!==S&&y.set(w,w-1,-y.get(w,w-1)),q+=me,_=q/me,C=ie/me,ke=Me/me,ie/=q,Me/=q,x=w;x<p;x++)q=y.get(w,x)+ie*y.get(w+1,x),B&&(q+=Me*y.get(w+2,x),y.set(w+2,x,y.get(w+2,x)-q*ke)),y.set(w,x,y.get(w,x)-q*_),y.set(w+1,x,y.get(w+1,x)-q*C);for(b=0;b<=Math.min(N,w+3);b++)q=_*y.get(b,w)+C*y.get(b,w+1),B&&(q+=ke*y.get(b,w+2),y.set(b,w+2,y.get(b,w+2)-q*Me)),y.set(b,w,y.get(b,w)-q),y.set(b,w+1,y.get(b,w+1)-q*ie);for(b=L;b<=z;b++)q=_*m.get(b,w)+C*m.get(b,w+1),B&&(q+=ke*m.get(b,w+2),m.set(b,w+2,m.get(b,w+2)-q*Me)),m.set(b,w,m.get(b,w)-q),m.set(b,w+1,m.get(b,w+1)-q*ie)}}}if(J!==0){for(N=p-1;N>=0;N--)if(q=v[N],ie=g[N],ie===0)for(E=N,y.set(N,N,1),b=N-1;b>=0;b--){for(k=y.get(b,b)-q,Me=0,x=E;x<=N;x++)Me+=y.get(b,x)*y.get(x,N);if(g[b]<0)ke=k,me=Me;else if(E=b,g[b]===0?y.set(b,N,k!==0?-Me/k:-Me/(Z*J)):(_=y.get(b,b+1),C=y.get(b+1,b),ie=(v[b]-q)*(v[b]-q)+g[b]*g[b],M=(_*me-ke*Me)/ie,y.set(b,N,M),y.set(b+1,N,Math.abs(_)>Math.abs(ke)?(-Me-k*M)/_:(-me-C*M)/ke)),M=Math.abs(y.get(b,N)),Z*M*M>1)for(x=b;x<=N;x++)y.set(x,N,y.get(x,N)/M)}else if(ie<0)for(E=N-1,Math.abs(y.get(N,N-1))>Math.abs(y.get(N-1,N))?(y.set(N-1,N-1,ie/y.get(N,N-1)),y.set(N-1,N,-(y.get(N,N)-q)/y.get(N,N-1))):(F=Ep(0,-y.get(N-1,N),y.get(N-1,N-1)-q,ie),y.set(N-1,N-1,F[0]),y.set(N-1,N,F[1])),y.set(N,N-1,0),y.set(N,N,1),b=N-2;b>=0;b--){for(T=0,A=0,x=E;x<=N;x++)T+=y.get(b,x)*y.get(x,N-1),A+=y.get(b,x)*y.get(x,N);if(k=y.get(b,b)-q,g[b]<0)ke=k,Me=T,me=A;else if(E=b,g[b]===0?(F=Ep(-T,-A,k,ie),y.set(b,N-1,F[0]),y.set(b,N,F[1])):(_=y.get(b,b+1),C=y.get(b+1,b),D=(v[b]-q)*(v[b]-q)+g[b]*g[b]-ie*ie,R=2*(v[b]-q)*ie,D===0&&R===0&&(D=Z*J*(Math.abs(k)+Math.abs(ie)+Math.abs(_)+Math.abs(C)+Math.abs(ke))),F=Ep(_*Me-ke*T+ie*A,_*me-ke*A-ie*T,D,R),y.set(b,N-1,F[0]),y.set(b,N,F[1]),Math.abs(_)>Math.abs(ke)+Math.abs(ie)?(y.set(b+1,N-1,(-T-k*y.get(b,N-1)+ie*y.get(b,N))/_),y.set(b+1,N,(-A-k*y.get(b,N)-ie*y.get(b,N-1))/_)):(F=Ep(-Me-C*y.get(b,N-1),-me-C*y.get(b,N),ke,ie),y.set(b+1,N-1,F[0]),y.set(b+1,N,F[1]))),M=Math.max(Math.abs(y.get(b,N-1)),Math.abs(y.get(b,N))),Z*M*M>1)for(x=b;x<=N;x++)y.set(x,N-1,y.get(x,N-1)/M),y.set(x,N,y.get(x,N)/M)}for(b=0;b<p;b++)if(b<L||b>z)for(x=b;x<p;x++)m.set(b,x,y.get(b,x));for(x=p-1;x>=L;x--)for(b=L;b<=z;b++){for(ke=0,w=L;w<=Math.min(x,z);w++)ke+=m.get(b,w)*y.get(w,x);m.set(b,x,ke)}}}(a,c,u,s,d)}this.n=a,this.e=c,this.d=u,this.V=s}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let n,t,r=this.n,i=this.e,o=this.d,a=new St(r,r);for(n=0;n<r;n++){for(t=0;t<r;t++)a.set(n,t,0);a.set(n,n,o[n]),i[n]>0?a.set(n,n+1,i[n]):i[n]<0&&a.set(n,n-1,i[n])}return a}}function Ep(e,n,t,r){let i,o;return Math.abs(t)>Math.abs(r)?(i=r/t,o=t+i*r,[(e+i*n)/o,(n-i*e)/o]):(i=t/r,o=r+i*t,[(i*e+n)/o,(i*n-e)/o])}class pT{constructor(n){if(!(n=ei.checkMatrix(n)).isSymmetric())throw new Error("Matrix is not symmetric");let t,r,i,o=n,a=o.rows,s=new St(a,a),u=!0;for(r=0;r<a;r++){let c=0;for(i=0;i<r;i++){let l=0;for(t=0;t<i;t++)l+=s.get(i,t)*s.get(r,t);l=(o.get(r,i)-l)/s.get(i,i),s.set(r,i,l),c+=l*l}for(c=o.get(r,r)-c,u&=c>0,s.set(r,r,Math.sqrt(Math.max(c,0))),i=r+1;i<a;i++)s.set(r,i,0)}this.L=s,this.positiveDefinite=!!u}isPositiveDefinite(){return this.positiveDefinite}solve(n){n=ei.checkMatrix(n);let t=this.L,r=t.rows;if(n.rows!==r)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let i,o,a,s=n.columns,u=n.clone();for(a=0;a<r;a++)for(o=0;o<s;o++){for(i=0;i<a;i++)u.set(a,o,u.get(a,o)-u.get(i,o)*t.get(a,i));u.set(a,o,u.get(a,o)/t.get(a,a))}for(a=r-1;a>=0;a--)for(o=0;o<s;o++){for(i=a+1;i<r;i++)u.set(a,o,u.get(a,o)-u.get(i,o)*t.get(i,a));u.set(a,o,u.get(a,o)/t.get(a,a))}return u}get lowerTriangularMatrix(){return this.L}}class gT{constructor(n,t={}){n=ei.checkMatrix(n);let{Y:r}=t;const{scaleScores:i=!1,maxIterations:o=1e3,terminationCriteria:a=1e-10}=t;let s;if(r){if(r=Array.isArray(r)&&typeof r[0]=="number"?St.columnVector(r):ei.checkMatrix(r),!r.isColumnVector()||r.rows!==n.rows)throw new Error("Y must be a column vector of length X.rows");s=r}else s=n.getColumnVector(0);let u,c,l,h,d=1;for(let f=0;f<o&&d>a;f++)l=n.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),l=l.div(l.norm()),u=n.mmul(l).div(l.transpose().mmul(l).get(0,0)),f>0&&(d=u.clone().sub(h).pow(2).sum()),h=u.clone(),r?(c=r.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),c=c.div(c.norm()),s=r.mmul(c).div(c.transpose().mmul(c).get(0,0))):s=u;if(r){let f=n.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));f=f.div(f.norm());let p=n.clone().sub(u.clone().mmul(f.transpose())),g=s.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),v=r.clone().sub(u.clone().mulS(g.get(0,0)).mmul(c.transpose()));this.t=u,this.p=f.transpose(),this.w=l.transpose(),this.q=c,this.u=s,this.s=u.transpose().mmul(u),this.xResidual=p,this.yResidual=v,this.betas=g}else this.w=l.transpose(),this.s=u.transpose().mmul(u).sqrt(),this.t=i?u.clone().div(this.s.get(0,0)):u,this.xResidual=n.sub(u.mmul(l.transpose()))}}const C7=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix:Qt,CHO:pT,CholeskyDecomposition:pT,EVD:fT,EigenvalueDecomposition:fT,LU:wp,LuDecomposition:wp,Matrix:St,MatrixColumnSelectionView:class extends Yo{constructor(e,n){n=cT(e,n),super(e,e.rows,n.length),this.columnIndices=n}set(e,n,t){return this.matrix.set(e,this.columnIndices[n],t),this}get(e,n){return this.matrix.get(e,this.columnIndices[n])}},MatrixColumnView:class extends Yo{constructor(e,n){gi(e,n),super(e,e.rows,1),this.column=n}set(e,n,t){return this.matrix.set(e,this.column,t),this}get(e){return this.matrix.get(e,this.column)}},MatrixFlipColumnView:class extends Yo{constructor(e){super(e,e.rows,e.columns)}set(e,n,t){return this.matrix.set(e,this.columns-n-1,t),this}get(e,n){return this.matrix.get(e,this.columns-n-1)}},MatrixFlipRowView:class extends Yo{constructor(e){super(e,e.rows,e.columns)}set(e,n,t){return this.matrix.set(this.rows-e-1,n,t),this}get(e,n){return this.matrix.get(this.rows-e-1,n)}},MatrixRowSelectionView:class extends Yo{constructor(e,n){super(e,(n=uT(e,n)).length,e.columns),this.rowIndices=n}set(e,n,t){return this.matrix.set(this.rowIndices[e],n,t),this}get(e,n){return this.matrix.get(this.rowIndices[e],n)}},MatrixRowView:class extends Yo{constructor(e,n){pi(e,n),super(e,1,e.columns),this.row=n}set(e,n,t){return this.matrix.set(this.row,n,t),this}get(e,n){return this.matrix.get(this.row,n)}},MatrixSelectionView:xp,MatrixSubView:class extends Yo{constructor(e,n,t,r,i){u1(e,n,t,r,i),super(e,t-n+1,i-r+1),this.startRow=n,this.startColumn=r}set(e,n,t){return this.matrix.set(this.startRow+e,this.startColumn+n,t),this}get(e,n){return this.matrix.get(this.startRow+e,this.startColumn+n)}},MatrixTransposeView:class extends Yo{constructor(e){super(e,e.columns,e.rows)}set(e,n,t){return this.matrix.set(n,e,t),this}get(e,n){return this.matrix.get(n,e)}},NIPALS:gT,Nipals:gT,QR:c1,QrDecomposition:c1,SVD:Zu,SingularValueDecomposition:Zu,WrapperMatrix1D:hT,WrapperMatrix2D:ei,correlation:function(e,n=e,t={}){e=new St(e);let r=!1;if(typeof n!="object"||St.isMatrix(n)||Array.isArray(n)?n=new St(n):(t=n,n=e,r=!0),e.rows!==n.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:o=!0}=t;i&&(e.center("column"),r||n.center("column")),o&&(e.scale("column"),r||n.scale("column"));const a=e.standardDeviation("column",{unbiased:!0}),s=r?a:n.standardDeviation("column",{unbiased:!0}),u=e.transpose().mmul(n);for(let c=0;c<u.rows;c++)for(let l=0;l<u.columns;l++)u.set(c,l,u.get(c,l)*(1/(a[c]*s[l]))*(1/(e.rows-1)));return u},covariance:function(e,n=e,t={}){e=new St(e);let r=!1;if(typeof n!="object"||St.isMatrix(n)||Array.isArray(n)?n=new St(n):(t=n,n=e,r=!0),e.rows!==n.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=t;i&&(e=e.center("column"),r||(n=n.center("column")));const o=e.transpose().mmul(n);for(let a=0;a<o.rows;a++)for(let s=0;s<o.columns;s++)o.set(a,s,o.get(a,s)*(1/(e.rows-1)));return o},default:St,determinant:function e(n){if((n=St.checkMatrix(n)).isSquare()){let t,r,i,o;if(n.columns===2)return t=n.get(0,0),r=n.get(0,1),i=n.get(1,0),o=n.get(1,1),t*o-r*i;if(n.columns===3){let a,s,u;return a=new xp(n,[1,2],[1,2]),s=new xp(n,[1,2],[0,2]),u=new xp(n,[1,2],[0,1]),t=n.get(0,0),r=n.get(0,1),i=n.get(0,2),t*e(a)-r*e(s)+i*e(u)}return new wp(n).determinant}throw Error("determinant can only be calculated for a square matrix")},inverse:function(e,n=!1){return e=ei.checkMatrix(e),n?new Zu(e).inverse():dT(e,St.eye(e.rows))},linearDependencies:function(e,n={}){const{thresholdValue:t=1e-9,thresholdError:r=1e-9}=n;let i=(e=St.checkMatrix(e)).rows,o=new St(i,i);for(let a=0;a<i;a++){let s=St.columnVector(e.getRow(a)),u=e.subMatrixRow(_7(i,a)).transpose(),c=new Zu(u).solve(s),l=St.sub(s,u.mmul(c)).abs().max();o.setRow(a,k7(l,c,a,t,r))}return o},pseudoInverse:function(e,n=Number.EPSILON){e=St.checkMatrix(e);let t=new Zu(e,{autoTranspose:!0}),r=t.leftSingularVectors,i=t.rightSingularVectors,o=t.diagonal;for(let a=0;a<o.length;a++)Math.abs(o[a])>n?o[a]=1/o[a]:o[a]=0;return i.mmul(St.diag(o).mmul(r.transpose()))},solve:dT,wrap:function(e,n){if(Array.isArray(e))return e[0]&&Array.isArray(e[0])?new ei(e):new hT(e,n);throw new Error("the argument is not an array")}},Symbol.toStringTag,{value:"Module"})),vT=Ao(C7);Object.defineProperty(s1,"__esModule",{value:!0});var Bl=vT,A7=function(){function e(n){this.distances=n.distances,this.dimension=n.dimension||2,this.linkDistance=n.linkDistance}return e.prototype.layout=function(){var n=this,t=n.dimension,r=n.distances,i=n.linkDistance;try{var o=Bl.Matrix.mul(Bl.Matrix.pow(r,2),-.5),a=o.mean("row"),s=o.mean("column"),u=o.mean();o.add(u).subRowVector(a).subColumnVector(s);var c=new Bl.SingularValueDecomposition(o),l=Bl.Matrix.sqrt(c.diagonalMatrix).diagonal();return c.leftSingularVectors.toJSON().map(function(g){return Bl.Matrix.mul([g],[l]).toJSON()[0].splice(0,t)})}catch(g){for(var h=[],d=0;d<r.length;d++){var f=Math.random()*i,p=Math.random()*i;h.push([f,p])}return h}},e}();s1.default=A7;var l1={};Object.defineProperty(l1,"__esModule",{value:!0});var I7=function(){function e(n){this.disp=[],this.positions=n.positions,this.adjMatrix=n.adjMatrix,this.focusID=n.focusID,this.radii=n.radii,this.iterations=n.iterations||10,this.height=n.height||10,this.width=n.width||10,this.speed=n.speed||100,this.gravity=n.gravity||10,this.nodeSizeFunc=n.nodeSizeFunc,this.k=n.k||5,this.strictRadial=n.strictRadial,this.nodes=n.nodes}return e.prototype.layout=function(){var n=this,t=n.positions,r=[],i=n.iterations,o=n.width/10;n.maxDisplace=o,n.disp=r;for(var a=0;a<i;a++)t.forEach(function(s,u){r[u]={x:0,y:0}}),n.getRepulsion(),n.updatePositions();return t},e.prototype.getRepulsion=function(){var n=this,t=n.positions,r=n.nodes,i=n.disp,o=n.k,a=n.radii||[];t.forEach(function(s,u){i[u]={x:0,y:0},t.forEach(function(c,l){if(u!==l&&a[u]===a[l]){var h=s[0]-c[0],d=s[1]-c[1],f=Math.sqrt(h*h+d*d);if(f===0){f=1;var p=u>l?1:-1;h=.01*p,d=.01*p}if(f<n.nodeSizeFunc(r[u])/2+n.nodeSizeFunc(r[l])/2){var g=o*o/f;i[u].x+=h/f*g,i[u].y+=d/f*g}}})})},e.prototype.updatePositions=function(){var n=this,t=n.positions,r=n.disp,i=n.speed,o=n.strictRadial,a=n.focusID,s=n.maxDisplace||n.width/10;o&&r.forEach(function(c,l){var h=t[l][0]-t[a][0],d=t[l][1]-t[a][1],f=Math.sqrt(h*h+d*d),p=d/f,g=-h/f,v=Math.sqrt(c.x*c.x+c.y*c.y),m=Math.acos((p*c.x+g*c.y)/v);m>Math.PI/2&&(m-=Math.PI/2,p*=-1,g*=-1);var y=Math.cos(m)*v;c.x=p*y,c.y=g*y});var u=n.radii;t.forEach(function(c,l){if(l!==a){var h=Math.sqrt(r[l].x*r[l].x+r[l].y*r[l].y);if(h>0&&l!==a){var d=Math.min(s*(i/800),h);if(c[0]+=r[l].x/h*d,c[1]+=r[l].y/h*d,o){var f=c[0]-t[a][0],p=c[1]-t[a][1],g=Math.sqrt(f*f+p*p);f=f/g*u[l],p=p/g*u[l],c[0]=t[a][0]+f,c[1]=t[a][1]+p}}}})},e}();l1.default=I7;var T7=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mT=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gp,"__esModule",{value:!0}),gp.RadialLayout=void 0;var vi=Cn(),O7=Nn,N7=mT(s1),P7=mT(l1);function yT(e,n){return Math.sqrt((e[0]-n[0])*(e[0]-n[0])+(e[1]-n[1])*(e[1]-n[1]))}var D7=function(e){function n(t){var r=e.call(this)||this;return r.maxIteration=1e3,r.focusNode=null,r.unitRadius=null,r.linkDistance=50,r.preventOverlap=!1,r.strictRadial=!0,r.maxPreventOverlapIteration=200,r.sortStrength=10,r.nodes=[],r.edges=[],r.updateCfg(t),r}return T7(n,e),n.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},n.prototype.execute=function(){var t=this,r=t.nodes,i=t.edges||[];if(r&&r.length!==0){t.width||typeof window=="undefined"||(t.width=window.innerWidth),t.height||typeof window=="undefined"||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(r.length===1)return r[0].x=o[0],r[0].y=o[1],void(t.onLayoutEnd&&t.onLayoutEnd());var a=t.linkDistance,s=null;if((0,vi.isString)(t.focusNode)){for(var u=!1,c=0;c<r.length;c++)r[c].id===t.focusNode&&(s=r[c],t.focusNode=s,u=!0,c=r.length);u||(s=null)}else s=t.focusNode;s||(s=r[0],t.focusNode=s);var l=function(F,N){var L=-1;return F.forEach(function(z,Z){z.id===N&&(L=Z)}),L}(r,s.id);l<0&&(l=0),t.focusIndex=l;var h=(0,vi.getAdjMatrix)({nodes:r,edges:i},!1),d=(0,vi.floydWarshall)(h),f=t.maxToFocus(d,l);t.handleInfinity(d,l,f+1),t.distances=d;var p=d[l],g=t.width||500,v=t.height||500,m=g-o[0]>o[0]?o[0]:g-o[0],y=v-o[1]>o[1]?o[1]:v-o[1];m===0&&(m=g/2),y===0&&(y=v/2);var b=y>m?m:y,x=Math.max.apply(Math,p),w=[];p.forEach(function(F,N){t.unitRadius||(t.unitRadius=b/x),w[N]=F*t.unitRadius}),t.radii=w;var E=t.eIdealDisMatrix();t.eIdealDistances=E;var S=function(F){for(var N=F.length,L=F[0].length,z=[],Z=0;Z<N;Z++){for(var ne=[],J=0;J<L;J++)F[Z][J]!==0?ne.push(1/(F[Z][J]*F[Z][J])):ne.push(0);z.push(ne)}return z}(E);t.weights=S;var M=new N7.default({linkDistance:a,distances:E}).layout();M.forEach(function(F){(0,vi.isNaN)(F[0])&&(F[0]=Math.random()*a),(0,vi.isNaN)(F[1])&&(F[1]=Math.random()*a)}),t.positions=M,M.forEach(function(F,N){r[N].x=F[0]+o[0],r[N].y=F[1]+o[1]}),M.forEach(function(F){F[0]-=M[l][0],F[1]-=M[l][1]}),t.run();var k,_=t.preventOverlap,C=t.nodeSize,T=t.strictRadial;if(_){var A,D=t.nodeSpacing;A=(0,vi.isNumber)(D)?function(){return D}:(0,vi.isFunction)(D)?D:function(){return 0},k=C?(0,vi.isArray)(C)?function(F){return(C[0]>C[1]?C[0]:C[1])+A(F)}:function(F){return C+A(F)}:function(F){return F.size?(0,vi.isArray)(F.size)?(F.size[0]>F.size[1]?F.size[0]:F.size[1])+A(F):(0,vi.isObject)(F.size)?(F.size.width>F.size.height?F.size.width:F.size.height)+A(F):F.size+A(F):10+A(F)};var R={nodes:r,nodeSizeFunc:k,adjMatrix:h,positions:M,radii:w,height:v,width:g,strictRadial:T,focusID:l,iterations:t.maxPreventOverlapIteration||200,k:M.length/4.5},B=new P7.default(R);M=B.layout()}return M.forEach(function(F,N){r[N].x=F[0]+o[0],r[N].y=F[1]+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:r,edges:i}}t.onLayoutEnd&&t.onLayoutEnd()},n.prototype.run=function(){for(var t=this,r=t.maxIteration,i=t.positions||[],o=t.weights||[],a=t.eIdealDistances||[],s=t.radii||[],u=0;u<=r;u++){var c=u/r;t.oneIteration(c,i,s,a,o)}},n.prototype.oneIteration=function(t,r,i,o,a){var s=1-t,u=this.focusIndex;r.forEach(function(c,l){var h=yT(c,[0,0]),d=h===0?0:1/h;if(l!==u){var f=0,p=0,g=0;r.forEach(function(m,y){if(l!==y){var b=yT(c,m),x=b===0?0:1/b,w=o[y][l];g+=a[l][y],f+=a[l][y]*(m[0]+w*(c[0]-m[0])*x),p+=a[l][y]*(m[1]+w*(c[1]-m[1])*x)}});var v=i[l]===0?0:1/i[l];g*=s,g+=t*v*v,f*=s,f+=t*v*c[0]*d,c[0]=f/g,p*=s,p+=t*v*c[1]*d,c[1]=p/g}})},n.prototype.eIdealDisMatrix=function(){var t=this,r=t.nodes;if(!r)return[];var i=t.distances,o=t.linkDistance,a=t.radii||[],s=t.unitRadius||50,u=[];return i&&i.forEach(function(c,l){var h=[];c.forEach(function(d,f){if(l===f)h.push(0);else if(a[l]===a[f])if(t.sortBy==="data")h.push(d*(Math.abs(l-f)*t.sortStrength)/(a[l]/s));else if(t.sortBy){var p=r[l][t.sortBy]||0,g=r[f][t.sortBy]||0;(0,vi.isString)(p)&&(p=p.charCodeAt(0)),(0,vi.isString)(g)&&(g=g.charCodeAt(0)),h.push(d*(Math.abs(p-g)*t.sortStrength)/(a[l]/s))}else h.push(d*o/(a[l]/s));else{var v=(o+s)/2;h.push(d*v)}}),u.push(h)}),u},n.prototype.handleInfinity=function(t,r,i){for(var o=t.length,a=0;a<o;a++)if(t[r][a]===1/0){t[r][a]=i,t[a][r]=i;for(var s=0;s<o;s++)t[a][s]!==1/0&&t[r][s]===1/0&&(t[r][s]=i+t[a][s],t[s][r]=i+t[a][s])}for(a=0;a<o;a++)if(a!==r){for(s=0;s<o;s++)if(t[a][s]===1/0){var u=Math.abs(t[r][a]-t[r][s]);u=u===0?1:u,t[a][s]=u}}},n.prototype.maxToFocus=function(t,r){for(var i=0,o=0;o<t[r].length;o++)t[r][o]!==1/0&&(i=t[r][o]>i?t[r][o]:i);return i},n.prototype.getType=function(){return"radial"},n}(O7.Base);gp.RadialLayout=D7,function(e){var n=Ee&&Ee.__createBinding||(Object.create?function(r,i,o,a){a===void 0&&(a=o);var s=Object.getOwnPropertyDescriptor(i,o);s&&!("get"in s?!i.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(r,a,s)}:function(r,i,o,a){a===void 0&&(a=o),r[a]=i[o]}),t=Ee&&Ee.__exportStar||function(r,i){for(var o in r)o==="default"||Object.prototype.hasOwnProperty.call(i,o)||n(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),t(gp,e)}(a1);var Rl={},L7=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.ConcentricLayout=void 0;var ho=Cn(),B7=function(e){function n(t){var r=e.call(this)||this;return r.nodeSize=30,r.minNodeSpacing=10,r.nodeSpacing=10,r.preventOverlap=!1,r.equidistant=!1,r.startAngle=1.5*Math.PI,r.clockwise=!0,r.sortBy="degree",r.nodes=[],r.edges=[],r.width=300,r.height=300,r.onLayoutEnd=function(){},r.updateCfg(t),r}return L7(n,e),n.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},n.prototype.execute=function(){var t,r,i=this,o=i.nodes,a=i.edges,s=o.length;if(s!==0){i.width||typeof window=="undefined"||(i.width=window.innerWidth),i.height||typeof window=="undefined"||(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var u=i.center;if(s===1)return o[0].x=u[0],o[0].y=u[1],void((r=i.onLayoutEnd)===null||r===void 0||r.call(i));var c,l=i.nodeSize,h=i.nodeSpacing,d=[],f=0;c=(0,ho.isArray)(l)?Math.max(l[0],l[1]):l,(0,ho.isArray)(h)?f=Math.max(h[0],h[1]):(0,ho.isNumber)(h)&&(f=h),o.forEach(function(C){d.push(C);var T=c;(0,ho.isArray)(C.size)?T=Math.max(C.size[0],C.size[1]):(0,ho.isNumber)(C.size)?T=C.size:(0,ho.isObject)(C.size)&&(T=Math.max(C.size.width,C.size.height)),c=Math.max(c,T),(0,ho.isFunction)(h)&&(f=Math.max(h(C),f))}),i.clockwise=i.counterclockwise!==void 0?!i.counterclockwise:i.clockwise;var p={},g={};if(d.forEach(function(C,T){p[C.id]=C,g[C.id]=T}),!(i.sortBy!=="degree"&&(0,ho.isString)(i.sortBy)&&d[0][i.sortBy]!==void 0||(i.sortBy="degree",(0,ho.isNumber)(o[0].degree)))){var v=(0,ho.getDegree)(o.length,g,a);d.forEach(function(C,T){C.degree=v[T].all})}d.sort(function(C,T){return T[i.sortBy]-C[i.sortBy]}),i.maxValueNode=d[0],i.maxLevelDiff=i.maxLevelDiff||i.maxValueNode[i.sortBy]/4;var m=[[]],y=m[0];d.forEach(function(C){if(y.length>0){var T=Math.abs(y[0][i.sortBy]-C[i.sortBy]);i.maxLevelDiff&&T>=i.maxLevelDiff&&(y=[],m.push(y))}y.push(C)});var b=c+(f||i.minNodeSpacing);if(!i.preventOverlap){var x=m.length>0&&m[0].length>1,w=(Math.min(i.width,i.height)/2-b)/(m.length+(x?1:0));b=Math.min(b,w)}var E=0;if(m.forEach(function(C){var T=i.sweep;T===void 0&&(T=2*Math.PI-2*Math.PI/C.length);var A=C.dTheta=T/Math.max(1,C.length-1);if(C.length>1&&i.preventOverlap){var D=Math.cos(A)-Math.cos(0),R=Math.sin(A)-Math.sin(0),B=Math.sqrt(b*b/(D*D+R*R));E=Math.max(B,E)}C.r=E,E+=b}),i.equidistant){for(var S=0,M=0,k=0;k<m.length;k++){var _=m[k].r-M;S=Math.max(S,_)}M=0,m.forEach(function(C,T){T===0&&(M=C.r),C.r=M,M+=S})}return m.forEach(function(C){var T=C.dTheta,A=C.r;C.forEach(function(D,R){var B=i.startAngle+(i.clockwise?1:-1)*T*R;D.x=u[0]+A*Math.cos(B),D.y=u[1]+A*Math.sin(B)})}),i.onLayoutEnd&&i.onLayoutEnd(),{nodes:o,edges:a}}(t=i.onLayoutEnd)===null||t===void 0||t.call(i)},n.prototype.getType=function(){return"concentric"},n}(Nn.Base);Rl.ConcentricLayout=B7;var jl={},R7=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(jl,"__esModule",{value:!0}),jl.MDSLayout=void 0;var zl=vT,h1=Cn(),j7=function(e){function n(t){var r=e.call(this)||this;return r.center=[0,0],r.linkDistance=50,r.nodes=[],r.edges=[],r.onLayoutEnd=function(){},r.updateCfg(t),r}return R7(n,e),n.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},n.prototype.execute=function(){var t=this,r=t.nodes,i=t.edges,o=i===void 0?[]:i,a=t.center;if(r&&r.length!==0){if(r.length===1)return r[0].x=a[0],r[0].y=a[1],void(t.onLayoutEnd&&t.onLayoutEnd());var s=t.linkDistance,u=(0,h1.getAdjMatrix)({nodes:r,edges:o},!1),c=(0,h1.floydWarshall)(u);t.handleInfinity(c);var l=(0,h1.scaleMatrix)(c,s);t.scaledDistances=l;var h=t.runMDS();return t.positions=h,h.forEach(function(d,f){r[f].x=d[0]+a[0],r[f].y=d[1]+a[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:r,edges:o}}t.onLayoutEnd&&t.onLayoutEnd()},n.prototype.runMDS=function(){var t=this.scaledDistances,r=zl.Matrix.mul(zl.Matrix.pow(t,2),-.5),i=r.mean("row"),o=r.mean("column"),a=r.mean();r.add(a).subRowVector(i).subColumnVector(o);var s=new zl.SingularValueDecomposition(r),u=zl.Matrix.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map(function(c){return zl.Matrix.mul([c],[u]).toJSON()[0].splice(0,2)})},n.prototype.handleInfinity=function(t){var r=-999999;t.forEach(function(i){i.forEach(function(o){o!==1/0&&r<o&&(r=o)})}),t.forEach(function(i,o){i.forEach(function(a,s){a===1/0&&(t[o][s]=r)})})},n.prototype.getType=function(){return"mds"},n}(Nn.Base);jl.MDSLayout=j7;var Fl={},z7=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.FruchtermanLayout=void 0;var F7=Nn,Dn=Cn(),G7=function(e){function n(t){var r=e.call(this)||this;return r.maxIteration=1e3,r.workerEnabled=!1,r.gravity=10,r.speed=5,r.clustering=!1,r.clusterGravity=10,r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.onLayoutEnd=function(){},r.tick=function(){},r.animate=!0,r.updateCfg(t),r}return z7(n,e),n.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},n.prototype.execute=function(){var t,r,i=this,o=this,a=o.nodes;if(o.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(o.timeInterval),a&&a.length!==0){o.width||typeof window=="undefined"||(o.width=window.innerWidth),o.height||typeof window=="undefined"||(o.height=window.innerHeight),o.center||(o.center=[o.width/2,o.height/2]);var s=o.center;if(a.length===1)return a[0].x=s[0],a[0].y=s[1],void((r=o.onLayoutEnd)===null||r===void 0||r.call(o));var u={},c={};return a.forEach(function(l,h){(0,Dn.isNumber)(l.x)||(l.x=Math.random()*i.width),(0,Dn.isNumber)(l.y)||(l.y=Math.random()*i.height),u[l.id]=l,c[l.id]=h}),o.nodeMap=u,o.nodeIdxMap=c,o.run()}(t=o.onLayoutEnd)===null||t===void 0||t.call(o)},n.prototype.run=function(){var t,r=this,i=r.nodes;if(i){var o=r.edges,a=r.maxIteration,s=r.workerEnabled,u=r.clustering,c=r.animate,l={};if(u&&i.forEach(function(f){l[f.cluster]===void 0&&(l[f.cluster]={name:f.cluster,cx:0,cy:0,count:0})}),s||!c){for(var h=0;h<a;h++)r.runOneStep(l);(t=r.onLayoutEnd)===null||t===void 0||t.call(r)}else{if(typeof window=="undefined")return;var d=0;this.timeInterval=window.setInterval(function(){var f;r.runOneStep(l),++d>=a&&((f=r.onLayoutEnd)===null||f===void 0||f.call(r),window.clearInterval(r.timeInterval))},0)}return{nodes:i,edges:o}}},n.prototype.runOneStep=function(t){var r,i=this,o=i.nodes;if(o){var a=i.edges,s=i.center,u=i.gravity,c=i.speed,l=i.clustering,h=i.height*i.width,d=Math.sqrt(h)/10,f=h/(o.length+1),p=Math.sqrt(f),g=[];if(o.forEach(function(y,b){g[b]={x:0,y:0}}),i.applyCalculate(o,a,g,p,f),l){for(var v in t)t[v].cx=0,t[v].cy=0,t[v].count=0;for(var v in o.forEach(function(b){var x=t[b.cluster];(0,Dn.isNumber)(b.x)&&(x.cx+=b.x),(0,Dn.isNumber)(b.y)&&(x.cy+=b.y),x.count++}),t)t[v].cx/=t[v].count,t[v].cy/=t[v].count;var m=i.clusterGravity||u;o.forEach(function(y,b){if((0,Dn.isNumber)(y.x)&&(0,Dn.isNumber)(y.y)){var x=t[y.cluster],w=Math.sqrt((y.x-x.cx)*(y.x-x.cx)+(y.y-x.cy)*(y.y-x.cy)),E=p*m;g[b].x-=E*(y.x-x.cx)/w,g[b].y-=E*(y.y-x.cy)/w}})}o.forEach(function(y,b){if((0,Dn.isNumber)(y.x)&&(0,Dn.isNumber)(y.y)){var x=.01*p*u;g[b].x-=x*(y.x-s[0]),g[b].y-=x*(y.y-s[1])}}),o.forEach(function(y,b){if((0,Dn.isNumber)(y.fx)&&(0,Dn.isNumber)(y.fy))return y.x=y.fx,void(y.y=y.fy);if((0,Dn.isNumber)(y.x)&&(0,Dn.isNumber)(y.y)){var x=Math.sqrt(g[b].x*g[b].x+g[b].y*g[b].y);if(x>0){var w=Math.min(d*(c/800),x);y.x+=g[b].x/x*w,y.y+=g[b].y/x*w}}}),(r=i.tick)===null||r===void 0||r.call(i)}},n.prototype.applyCalculate=function(t,r,i,o,a){this.calRepulsive(t,i,a),r&&this.calAttractive(r,i,o)},n.prototype.calRepulsive=function(t,r,i){t.forEach(function(o,a){r[a]={x:0,y:0},t.forEach(function(s,u){if(a!==u&&(0,Dn.isNumber)(o.x)&&(0,Dn.isNumber)(s.x)&&(0,Dn.isNumber)(o.y)&&(0,Dn.isNumber)(s.y)){var c=o.x-s.x,l=o.y-s.y,h=c*c+l*l;if(h===0){h=1;var d=a>u?1:-1;c=.01*d,l=.01*d}var f=i/h;r[a].x+=c*f,r[a].y+=l*f}})})},n.prototype.calAttractive=function(t,r,i){var o=this;t.forEach(function(a){var s=(0,Dn.getEdgeTerminal)(a,"source"),u=(0,Dn.getEdgeTerminal)(a,"target");if(s&&u){var c=o.nodeIdxMap[s],l=o.nodeIdxMap[u];if(c!==l){var h=o.nodeMap[s],d=o.nodeMap[u];if((0,Dn.isNumber)(d.x)&&(0,Dn.isNumber)(h.x)&&(0,Dn.isNumber)(d.y)&&(0,Dn.isNumber)(h.y)){var f=d.x-h.x,p=d.y-h.y,g=Math.sqrt(f*f+p*p),v=g*g/i;r[l].x-=f/g*v,r[l].y-=p/g*v,r[c].x+=f/g*v,r[c].y+=p/g*v}}}})},n.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},n.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},n.prototype.getType=function(){return"fruchterman"},n}(F7.Base);Fl.FruchtermanLayout=G7;var Gl={};function bT(e,n,t,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,i)}function Ca(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var o=e.apply(n,t);function a(u){bT(o,r,i,a,s,"next",u)}function s(u){bT(o,r,i,a,s,"throw",u)}a(void 0)})}}function Di(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function xT(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aK(r.key),r)}}function Li(e,n,t){return n&&xT(e.prototype,n),t&&xT(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var Y7=sK,X7=uK;const U7=qs(function(e){return typeof e=="number"||X7(e)&&Y7(e)=="[object Number]"});var wT={exports:{}},ET={exports:{}};(function(e){function n(t){return e.exports=n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(ET);var W7=ET.exports;(function(e){var n=W7.default;function t(){e.exports=t=function(){return i},e.exports.__esModule=!0,e.exports.default=e.exports;var r,i={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(L,z,Z){L[z]=Z.value},u=typeof Symbol=="function"?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function d(L,z,Z){return Object.defineProperty(L,z,{value:Z,enumerable:!0,configurable:!0,writable:!0}),L[z]}try{d({},"")}catch(L){d=function(z,Z,ne){return z[Z]=ne}}function f(L,z,Z,ne){var J=z&&z.prototype instanceof x?z:x,q=Object.create(J.prototype),ie=new F(ne||[]);return s(q,"_invoke",{value:A(L,Z,ie)}),q}function p(L,z,Z){try{return{type:"normal",arg:L.call(z,Z)}}catch(ne){return{type:"throw",arg:ne}}}i.wrap=f;var g="suspendedStart",v="suspendedYield",m="executing",y="completed",b={};function x(){}function w(){}function E(){}var S={};d(S,c,function(){return this});var M=Object.getPrototypeOf,k=M&&M(M(N([])));k&&k!==o&&a.call(k,c)&&(S=k);var _=E.prototype=x.prototype=Object.create(S);function C(L){["next","throw","return"].forEach(function(z){d(L,z,function(Z){return this._invoke(z,Z)})})}function T(L,z){function Z(J,q,ie,Me){var me=p(L[J],L,q);if(me.type!=="throw"){var ke=me.arg,yt=ke.value;return yt&&n(yt)=="object"&&a.call(yt,"__await")?z.resolve(yt.__await).then(function(Tt){Z("next",Tt,ie,Me)},function(Tt){Z("throw",Tt,ie,Me)}):z.resolve(yt).then(function(Tt){ke.value=Tt,ie(ke)},function(Tt){return Z("throw",Tt,ie,Me)})}Me(me.arg)}var ne;s(this,"_invoke",{value:function(J,q){function ie(){return new z(function(Me,me){Z(J,q,Me,me)})}return ne=ne?ne.then(ie,ie):ie()}})}function A(L,z,Z){var ne=g;return function(J,q){if(ne===m)throw Error("Generator is already running");if(ne===y){if(J==="throw")throw q;return{value:r,done:!0}}for(Z.method=J,Z.arg=q;;){var ie=Z.delegate;if(ie){var Me=D(ie,Z);if(Me){if(Me===b)continue;return Me}}if(Z.method==="next")Z.sent=Z._sent=Z.arg;else if(Z.method==="throw"){if(ne===g)throw ne=y,Z.arg;Z.dispatchException(Z.arg)}else Z.method==="return"&&Z.abrupt("return",Z.arg);ne=m;var me=p(L,z,Z);if(me.type==="normal"){if(ne=Z.done?y:v,me.arg===b)continue;return{value:me.arg,done:Z.done}}me.type==="throw"&&(ne=y,Z.method="throw",Z.arg=me.arg)}}}function D(L,z){var Z=z.method,ne=L.iterator[Z];if(ne===r)return z.delegate=null,Z==="throw"&&L.iterator.return&&(z.method="return",z.arg=r,D(L,z),z.method==="throw")||Z!=="return"&&(z.method="throw",z.arg=new TypeError("The iterator does not provide a '"+Z+"' method")),b;var J=p(ne,L.iterator,z.arg);if(J.type==="throw")return z.method="throw",z.arg=J.arg,z.delegate=null,b;var q=J.arg;return q?q.done?(z[L.resultName]=q.value,z.next=L.nextLoc,z.method!=="return"&&(z.method="next",z.arg=r),z.delegate=null,b):q:(z.method="throw",z.arg=new TypeError("iterator result is not an object"),z.delegate=null,b)}function R(L){var z={tryLoc:L[0]};1 in L&&(z.catchLoc=L[1]),2 in L&&(z.finallyLoc=L[2],z.afterLoc=L[3]),this.tryEntries.push(z)}function B(L){var z=L.completion||{};z.type="normal",delete z.arg,L.completion=z}function F(L){this.tryEntries=[{tryLoc:"root"}],L.forEach(R,this),this.reset(!0)}function N(L){if(L||L===""){var z=L[c];if(z)return z.call(L);if(typeof L.next=="function")return L;if(!isNaN(L.length)){var Z=-1,ne=function J(){for(;++Z<L.length;)if(a.call(L,Z))return J.value=L[Z],J.done=!1,J;return J.value=r,J.done=!0,J};return ne.next=ne}}throw new TypeError(n(L)+" is not iterable")}return w.prototype=E,s(_,"constructor",{value:E,configurable:!0}),s(E,"constructor",{value:w,configurable:!0}),w.displayName=d(E,h,"GeneratorFunction"),i.isGeneratorFunction=function(L){var z=typeof L=="function"&&L.constructor;return!!z&&(z===w||(z.displayName||z.name)==="GeneratorFunction")},i.mark=function(L){return Object.setPrototypeOf?Object.setPrototypeOf(L,E):(L.__proto__=E,d(L,h,"GeneratorFunction")),L.prototype=Object.create(_),L},i.awrap=function(L){return{__await:L}},C(T.prototype),d(T.prototype,l,function(){return this}),i.AsyncIterator=T,i.async=function(L,z,Z,ne,J){J===void 0&&(J=Promise);var q=new T(f(L,z,Z,ne),J);return i.isGeneratorFunction(z)?q:q.next().then(function(ie){return ie.done?ie.value:q.next()})},C(_),d(_,h,"Generator"),d(_,c,function(){return this}),d(_,"toString",function(){return"[object Generator]"}),i.keys=function(L){var z=Object(L),Z=[];for(var ne in z)Z.push(ne);return Z.reverse(),function J(){for(;Z.length;){var q=Z.pop();if(q in z)return J.value=q,J.done=!1,J}return J.done=!0,J}},i.values=N,F.prototype={constructor:F,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(B),!L)for(var z in this)z.charAt(0)==="t"&&a.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=r)},stop:function(){this.done=!0;var L=this.tryEntries[0].completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var z=this;function Z(me,ke){return q.type="throw",q.arg=L,z.next=me,ke&&(z.method="next",z.arg=r),!!ke}for(var ne=this.tryEntries.length-1;ne>=0;--ne){var J=this.tryEntries[ne],q=J.completion;if(J.tryLoc==="root")return Z("end");if(J.tryLoc<=this.prev){var ie=a.call(J,"catchLoc"),Me=a.call(J,"finallyLoc");if(ie&&Me){if(this.prev<J.catchLoc)return Z(J.catchLoc,!0);if(this.prev<J.finallyLoc)return Z(J.finallyLoc)}else if(ie){if(this.prev<J.catchLoc)return Z(J.catchLoc,!0)}else{if(!Me)throw Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return Z(J.finallyLoc)}}}},abrupt:function(L,z){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var ne=this.tryEntries[Z];if(ne.tryLoc<=this.prev&&a.call(ne,"finallyLoc")&&this.prev<ne.finallyLoc){var J=ne;break}}J&&(L==="break"||L==="continue")&&J.tryLoc<=z&&z<=J.finallyLoc&&(J=null);var q=J?J.completion:{};return q.type=L,q.arg=z,J?(this.method="next",this.next=J.finallyLoc,b):this.complete(q)},complete:function(L,z){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&z&&(this.next=z),b},finish:function(L){for(var z=this.tryEntries.length-1;z>=0;--z){var Z=this.tryEntries[z];if(Z.finallyLoc===L)return this.complete(Z.completion,Z.afterLoc),B(Z),b}},catch:function(L){for(var z=this.tryEntries.length-1;z>=0;--z){var Z=this.tryEntries[z];if(Z.tryLoc===L){var ne=Z.completion;if(ne.type==="throw"){var J=ne.arg;B(Z)}return J}}throw Error("illegal catch attempt")},delegateYield:function(L,z,Z){return this.delegate={iterator:N(L),resultName:z,nextLoc:Z},this.method==="next"&&(this.arg=r),b}},i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(wT);var Sp=(0,wT.exports)(),V7=Sp;try{regeneratorRuntime=Sp}catch(e){typeof globalThis=="object"?globalThis.regeneratorRuntime=Sp:Function("r","regeneratorRuntime = r")(Sp)}const Sr=qs(V7);var Ne,H7=1;function ST(){return H7++}(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Ne||(Ne={}));var Yl,MT,Ku,Xl,q7=function(){function e(){Di(this,e),this.config=void 0}return Li(e,[{key:"get",value:function(){return this.config}},{key:"set",value:function(n){this.config=n}}]),e}();(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(Yl||(Yl={})),function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"}(MT||(MT={})),function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"}(Ku||(Ku={})),function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"}(Xl||(Xl={}));function Z7(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function _T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function kT(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?_T(Object(t),!0).forEach(function(r){ot(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_T(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var CT=function(){function e(i,o){Di(this,e),this.engine=i,this.configService=o,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var n,t,r;return Li(e,[{key:"init",value:function(){var i=this.configService.get(),o=i.canvas,a=i.engineOptions;this.initPromise=this.engine.init(kT({canvas:o||Z7(),antialiasing:!1},a))}},{key:"setBundle",value:function(i){this.compiledBundle=JSON.parse(JSON.stringify(i))}},{key:"setDispatch",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=i),this}},{key:"setMaxIteration",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=i),this}},{key:"setBinding",value:function(i,o){var a=this;if(typeof i=="string"){var s=U7(o)||Hg(o)||cK(o);if(this.compiledBundle&&this.compiledBundle.context){var u=this.compiledBundle.context.defines.find(function(l){return l.name===i});if(u)return u.value=o,this;var c=this.compiledBundle.context.uniforms.find(function(l){return l.name===i});c&&(s?(c.data=o,c.isReferer=!1,c.storageClass===Ku.Uniform?this.model&&this.model.updateUniform(i,o):this.model&&this.model.updateBuffer(i,o)):(c.isReferer=!0,c.data=o))}}else Object.keys(i).forEach(function(l){a.setBinding(l,i[l])});return this}},{key:"execute",value:(r=Ca(Sr.mark(function i(){var o,a,s=this,u=arguments;return Sr.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(o=u.length>0&&u[0]!==void 0?u[0]:1,!this.dirty){c.next=6;break}return this.compiledBundle.context&&(o>1?this.compiledBundle.context.maxIteration=o:this.compiledBundle.context.maxIteration++),c.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(l){return l.isReferer}).forEach(function(l){var h=l.data,d=l.name;s.model.confirmInput(h.model,d)}),a=0;a<o;a++)this.model.run();return this.engine.endFrame(),c.abrupt("return",this);case 12:case"end":return c.stop()}},i,this)})),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(t=Ca(Sr.mark(function i(){return Sr.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.model.readData());case 1:case"end":return o.stop()}},i,this)})),function(){return t.apply(this,arguments)})},{key:"compile",value:(n=Ca(Sr.mark(function i(){var o,a,s;return Sr.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.initPromise;case 2:return o=kT({},this.compiledBundle.context),a=this.engine.supportWebGPU?this.engine.useWGSL?Xl.WGSL:Xl.GLSL450:Xl.GLSL100,s=this.compiledBundle.shaders[a],o.defines.filter(function(c){return c.runtime}).forEach(function(c){var l="".concat("__DefineValuePlaceholder__").concat(c.name);s=s.replace(l,"".concat(c.value))}),o.shader=s,o.uniforms.forEach(function(c){if(!c.data&&c.storageClass===Ku.StorageBuffer){var l=1;c.type===Yl.FloatArray?l=1:c.type===Yl.Vector4FloatArray&&(l=4),c.data=new Float32Array(o.output.length*l).fill(0)}}),this.compiledBundle.context=o,u.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=u.sent;case 12:case"end":return u.stop()}},i,this)})),function(){return n.apply(this,arguments)})}]),e}(),AT={exports:{}};AT.exports=function(){var e=function(I){return I instanceof Uint8Array||I instanceof Uint16Array||I instanceof Uint32Array||I instanceof Int8Array||I instanceof Int16Array||I instanceof Int32Array||I instanceof Float32Array||I instanceof Float64Array||I instanceof Uint8ClampedArray},n=function(I,Y){for(var H=Object.keys(Y),pe=0;pe<H.length;++pe)I[H[pe]]=Y[H[pe]];return I},t=`
`;function r(I){return typeof atob!="undefined"?atob(I):"base64:"+I}function i(I){throw new Error("(regl) "+I)}function o(I,Y){I||i(Y)}function a(I){return I?": "+I:""}function s(I,Y,H){I in Y||i("unknown parameter ("+I+")"+a(H)+". possible values: "+Object.keys(Y).join())}function u(I,Y){e(I)||i("invalid parameter type"+a(Y)+". must be a typed array")}function c(I,Y){switch(Y){case"number":return typeof I=="number";case"object":return typeof I=="object";case"string":return typeof I=="string";case"boolean":return typeof I=="boolean";case"function":return typeof I=="function";case"undefined":return I===void 0;case"symbol":return typeof I=="symbol"}}function l(I,Y,H){c(I,Y)||i("invalid parameter type"+a(H)+". expected "+Y+", got "+typeof I)}function h(I,Y){I>=0&&(0|I)===I||i("invalid parameter type, ("+I+")"+a(Y)+". must be a nonnegative integer")}function d(I,Y,H){Y.indexOf(I)<0&&i("invalid value"+a(H)+". must be one of: "+Y)}var f=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(I){Object.keys(I).forEach(function(Y){f.indexOf(Y)<0&&i('invalid regl constructor argument "'+Y+'". must be one of '+f)})}function g(I,Y){for(I+="";I.length<Y;)I=" "+I;return I}function v(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function m(I,Y){this.number=I,this.line=Y,this.errors=[]}function y(I,Y,H){this.file=I,this.line=Y,this.message=H}function b(){var I=new Error,Y=(I.stack||I).toString(),H=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Y);if(H)return H[1];var pe=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Y);return pe?pe[1]:"unknown"}function x(){var I=new Error,Y=(I.stack||I).toString(),H=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Y);if(H)return H[1];var pe=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Y);return pe?pe[1]:"unknown"}function w(I,Y){var H=I.split(`
`),pe=1,xe=0,ue={unknown:new v,0:new v};ue.unknown.name=ue[0].name=Y||b(),ue.unknown.lines.push(new m(0,""));for(var ye=0;ye<H.length;++ye){var Le=H[ye],ze=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Le);if(ze)switch(ze[1]){case"line":var Re=/(\d+)(\s+\d+)?/.exec(ze[2]);Re&&(pe=0|Re[1],Re[2]&&((xe=0|Re[2])in ue||(ue[xe]=new v)));break;case"define":var Be=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ze[2]);Be&&(ue[xe].name=Be[1]?r(Be[2]):Be[2])}ue[xe].lines.push(new m(pe++,Le))}return Object.keys(ue).forEach(function(Xe){var et=ue[Xe];et.lines.forEach(function(De){et.index[De.number]=De})}),ue}function E(I){var Y=[];return I.split(`
`).forEach(function(H){if(!(H.length<5)){var pe=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(H);pe?Y.push(new y(0|pe[1],0|pe[2],pe[3].trim())):H.length>0&&Y.push(new y("unknown",0,H))}}),Y}function S(I,Y){Y.forEach(function(H){var pe=I[H.file];if(pe){var xe=pe.index[H.line];if(xe)return xe.errors.push(H),void(pe.hasErrors=!0)}I.unknown.hasErrors=!0,I.unknown.lines[0].errors.push(H)})}function M(I,Y,H,pe,xe){if(!I.getShaderParameter(Y,I.COMPILE_STATUS)){var ue=I.getShaderInfoLog(Y),ye=pe===I.FRAGMENT_SHADER?"fragment":"vertex";R(H,"string",ye+" shader source must be a string",xe);var Le=w(H,xe),ze=E(ue);S(Le,ze),Object.keys(Le).forEach(function(Re){var Be=Le[Re];if(Be.hasErrors){var Xe=[""],et=[""];De("file number "+Re+": "+Be.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Be.lines.forEach(function(Qe){if(Qe.errors.length>0){De(g(Qe.number,4)+"|  ","background-color:yellow; font-weight:bold"),De(Qe.line+t,"color:red; background-color:yellow; font-weight:bold");var ae=0;Qe.errors.forEach(function(be){var je=be.message,rt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(je);if(rt){var Ie=rt[1];je=rt[2],Ie==="assign"&&(Ie="="),ae=Math.max(Qe.line.indexOf(Ie,ae),0)}else ae=0;De(g("| ",6)),De(g("^^^",ae+3)+t,"font-weight:bold"),De(g("| ",6)),De(je+t,"font-weight:bold")}),De(g("| ",6)+t)}else De(g(Qe.number,4)+"|  "),De(Qe.line+t,"color:red")}),typeof document=="undefined"||window.chrome||(et[0]=Xe.join("%c"))}function De(Qe,ae){Xe.push(Qe),et.push(ae||"")}}),o.raise("Error compiling "+ye+" shader, "+Le[0].name)}}function k(I,Y,H,pe,xe){if(!I.getProgramParameter(Y,I.LINK_STATUS)){I.getProgramInfoLog(Y);var ue=w(H,xe),ye='Error linking program with vertex shader, "'+w(pe,xe)[0].name+'", and fragment shader "'+ue[0].name+'"';o.raise(ye)}}function _(I){I._commandRef=b()}function C(I,Y,H,pe){function xe(ze){return ze?pe.id(ze):0}function ue(ze,Re){Object.keys(Re).forEach(function(Be){ze[pe.id(Be)]=!0})}_(I),I._fragId=xe(I.static.frag),I._vertId=xe(I.static.vert);var ye=I._uniformSet={};ue(ye,Y.static),ue(ye,Y.dynamic);var Le=I._attributeSet={};ue(Le,H.static),ue(Le,H.dynamic),I._hasCount="count"in I.static||"count"in I.dynamic||"elements"in I.static||"elements"in I.dynamic}function T(I,Y){var H=x();i(I+" in command "+(Y||b())+(H==="unknown"?"":" called from "+H))}function A(I,Y,H){I||T(Y,H||b())}function D(I,Y,H,pe){I in Y||T("unknown parameter ("+I+")"+a(H)+". possible values: "+Object.keys(Y).join(),pe||b())}function R(I,Y,H,pe){c(I,Y)||T("invalid parameter type"+a(H)+". expected "+Y+", got "+typeof I,pe||b())}function B(I){I()}function F(I,Y,H){I.texture?d(I.texture._texture.internalformat,Y,"unsupported texture format for attachment"):d(I.renderbuffer._renderbuffer.format,H,"unsupported renderbuffer format for attachment")}var N=33071,L=9728,z=9984,Z=9985,ne=9986,J=9987,q=5121,ie=5122,Me=5123,me=5124,ke=5125,yt=5126,Tt=32819,cn=32820,ct=33635,Ge=34042,Oe=36193,Ye={};function Pe(I,Y){return I===cn||I===Tt||I===ct?2:I===Ge?4:Ye[I]*Y}function Se(I){return!(I&I-1||!I)}function We(I,Y,H){var pe,xe=Y.width,ue=Y.height,ye=Y.channels;o(xe>0&&xe<=H.maxTextureSize&&ue>0&&ue<=H.maxTextureSize,"invalid texture shape"),I.wrapS===N&&I.wrapT===N||o(Se(xe)&&Se(ue),"incompatible wrap mode for texture, both width and height must be power of 2"),Y.mipmask===1?xe!==1&&ue!==1&&o(I.minFilter!==z&&I.minFilter!==ne&&I.minFilter!==Z&&I.minFilter!==J,"min filter requires mipmap"):(o(Se(xe)&&Se(ue),"texture must be a square power of 2 to support mipmapping"),o(Y.mipmask===(xe<<1)-1,"missing or incomplete mipmap data")),Y.type===yt&&(H.extensions.indexOf("oes_texture_float_linear")<0&&o(I.minFilter===L&&I.magFilter===L,"filter not supported, must enable oes_texture_float_linear"),o(!I.genMipmaps,"mipmap generation not supported with float textures"));var Le=Y.images;for(pe=0;pe<16;++pe)if(Le[pe]){var ze=xe>>pe,Re=ue>>pe;o(Y.mipmask&1<<pe,"missing mipmap data");var Be=Le[pe];if(o(Be.width===ze&&Be.height===Re,"invalid shape for mip images"),o(Be.format===Y.format&&Be.internalformat===Y.internalformat&&Be.type===Y.type,"incompatible type for mip image"),!Be.compressed)if(Be.data){var Xe=Math.ceil(Pe(Be.type,ye)*ze/Be.unpackAlignment)*Be.unpackAlignment;o(Be.data.byteLength===Xe*Re,"invalid data for image, buffer size is inconsistent with image format")}else Be.element||Be.copy}else I.genMipmaps||o(!(Y.mipmask&1<<pe),"extra mipmap data");Y.compressed&&o(!I.genMipmaps,"mipmap generation for compressed images not supported")}function Ve(I,Y,H,pe){var xe=I.width,ue=I.height,ye=I.channels;o(xe>0&&xe<=pe.maxTextureSize&&ue>0&&ue<=pe.maxTextureSize,"invalid texture shape"),o(xe===ue,"cube map must be square"),o(Y.wrapS===N&&Y.wrapT===N,"wrap mode not supported by cube map");for(var Le=0;Le<H.length;++Le){var ze=H[Le];o(ze.width===xe&&ze.height===ue,"inconsistent cube map face shape"),Y.genMipmaps&&(o(!ze.compressed,"can not generate mipmap for compressed textures"),o(ze.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Re=ze.images,Be=0;Be<16;++Be){var Xe=Re[Be];if(Xe){var et=xe>>Be,De=ue>>Be;o(ze.mipmask&1<<Be,"missing mipmap data"),o(Xe.width===et&&Xe.height===De,"invalid shape for mip images"),o(Xe.format===I.format&&Xe.internalformat===I.internalformat&&Xe.type===I.type,"incompatible type for mip image"),Xe.compressed||(Xe.data?o(Xe.data.byteLength===et*De*Math.max(Pe(Xe.type,ye),Xe.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Xe.element||Xe.copy)}}}}Ye[5120]=Ye[q]=1,Ye[ie]=Ye[Me]=Ye[Oe]=Ye[ct]=Ye[Tt]=Ye[cn]=2,Ye[me]=Ye[ke]=Ye[yt]=Ye[Ge]=4;var O=n(o,{optional:B,raise:i,commandRaise:T,command:A,parameter:s,commandParameter:D,constructor:p,type:l,commandType:R,isTypedArray:u,nni:h,oneOf:d,shaderError:M,linkError:k,callSite:x,saveCommandRef:_,saveDrawInfo:C,framebufferFormat:F,guessCommand:b,texture2D:We,textureCube:Ve}),fe=0,_e=0,Ze=5,Je=6;function qe(I,Y){this.id=fe++,this.type=I,this.data=Y}function bt(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function vt(I){if(I.length===0)return[];var Y=I.charAt(0),H=I.charAt(I.length-1);if(I.length>1&&Y===H&&(Y==='"'||Y==="'"))return['"'+bt(I.substr(1,I.length-2))+'"'];var pe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(I);if(pe)return vt(I.substr(0,pe.index)).concat(vt(pe[1])).concat(vt(I.substr(pe.index+pe[0].length)));var xe=I.split(".");if(xe.length===1)return['"'+bt(I)+'"'];for(var ue=[],ye=0;ye<xe.length;++ye)ue=ue.concat(vt(xe[ye]));return ue}function Mt(I){return"["+vt(I).join("][")+"]"}function Ot(I,Y){return new qe(I,Mt(Y+""))}function Bt(I){return typeof I=="function"&&!I._reglType||I instanceof qe}function fn(I,Y){return typeof I=="function"?new qe(_e,I):typeof I=="number"||typeof I=="boolean"?new qe(Ze,I):Array.isArray(I)?new qe(Je,I.map((H,pe)=>fn(H,Y+"["+pe+"]"))):I instanceof qe?I:void O(!1,"invalid option type in uniform "+Y)}var kn={DynamicVariable:qe,define:Ot,isDynamic:Bt,unbox:fn,accessor:Mt},gr={next:typeof requestAnimationFrame=="function"?function(I){return requestAnimationFrame(I)}:function(I){return setTimeout(I,16)},cancel:typeof cancelAnimationFrame=="function"?function(I){return cancelAnimationFrame(I)}:clearTimeout},Vr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function kr(){var I={"":0},Y=[""];return{id:function(H){var pe=I[H];return pe||(pe=I[H]=Y.length,Y.push(H),pe)},str:function(H){return Y[H]}}}function Mo(I,Y,H){var pe,xe=document.createElement("canvas");function ue(){var Le=window.innerWidth,ze=window.innerHeight;if(I!==document.body){var Re=I.getBoundingClientRect();Le=Re.right-Re.left,ze=Re.bottom-Re.top}xe.width=H*Le,xe.height=H*ze,n(xe.style,{width:Le+"px",height:ze+"px"})}function ye(){pe?pe.disconnect():window.removeEventListener("resize",ue),I.removeChild(xe)}return n(xe.style,{border:0,margin:0,padding:0,top:0,left:0}),I.appendChild(xe),I===document.body&&(xe.style.position="absolute",n(I.style,{margin:0,padding:0})),I!==document.body&&typeof ResizeObserver=="function"?(pe=new ResizeObserver(function(){setTimeout(ue)})).observe(I):window.addEventListener("resize",ue,!1),ue(),{canvas:xe,onDestroy:ye}}function sc(I,Y){function H(pe){try{return I.getContext(pe,Y)}catch(xe){return null}}return H("webgl")||H("experimental-webgl")||H("webgl-experimental")}function vh(I){return typeof I.nodeName=="string"&&typeof I.appendChild=="function"&&typeof I.getBoundingClientRect=="function"}function Fa(I){return typeof I.drawArrays=="function"||typeof I.drawElements=="function"}function vr(I){return typeof I=="string"?I.split():(O(Array.isArray(I),"invalid extension array"),I)}function mr(I){return typeof I=="string"?(O(typeof document!="undefined","not supported outside of DOM"),document.querySelector(I)):I}function sn(I){var Y,H,pe,xe,ue=I||{},ye={},Le=[],ze=[],Re=typeof window=="undefined"?1:window.devicePixelRatio,Be=!1,Xe=function(Qe){Qe&&O.raise(Qe)},et=function(){};if(typeof ue=="string"?(O(typeof document!="undefined","selector queries only supported in DOM enviroments"),Y=document.querySelector(ue),O(Y,"invalid query string for element")):typeof ue=="object"?vh(ue)?Y=ue:Fa(ue)?pe=(xe=ue).canvas:(O.constructor(ue),"gl"in ue?xe=ue.gl:"canvas"in ue?pe=mr(ue.canvas):"container"in ue&&(H=mr(ue.container)),"attributes"in ue&&(ye=ue.attributes,O.type(ye,"object","invalid context attributes")),"extensions"in ue&&(Le=vr(ue.extensions)),"optionalExtensions"in ue&&(ze=vr(ue.optionalExtensions)),"onDone"in ue&&(O.type(ue.onDone,"function","invalid or missing onDone callback"),Xe=ue.onDone),"profile"in ue&&(Be=!!ue.profile),"pixelRatio"in ue&&(Re=+ue.pixelRatio,O(Re>0,"invalid pixel ratio"))):O.raise("invalid arguments to regl"),Y&&(Y.nodeName.toLowerCase()==="canvas"?pe=Y:H=Y),!xe){if(!pe){O(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var De=Mo(H||document.body,Xe,Re);if(!De)return null;pe=De.canvas,et=De.onDestroy}ye.premultipliedAlpha===void 0&&(ye.premultipliedAlpha=!0),xe=sc(pe,ye)}return xe?{gl:xe,canvas:pe,container:H,extensions:Le,optionalExtensions:ze,pixelRatio:Re,profile:Be,onDone:Xe,onDestroy:et}:(et(),Xe("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Pt(I,Y){var H={};function pe(ye){O.type(ye,"string","extension name must be string");var Le,ze=ye.toLowerCase();try{Le=H[ze]=I.getExtension(ze)}catch(Re){}return!!Le}for(var xe=0;xe<Y.extensions.length;++xe){var ue=Y.extensions[xe];if(!pe(ue))return Y.onDestroy(),Y.onDone('"'+ue+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Y.optionalExtensions.forEach(pe),{extensions:H,restore:function(){Object.keys(H).forEach(function(ye){if(H[ye]&&!pe(ye))throw new Error("(regl): error restoring extension "+ye)})}}}function zt(I,Y){for(var H=Array(I),pe=0;pe<I;++pe)H[pe]=Y(pe);return H}var pn=5120,yr=5121,Ns=5122,Ga=5123,Ya=5124,Ps=5125,Ds=5126;function vg(I){for(var Y=16;Y<=1<<28;Y*=16)if(I<=Y)return Y;return 0}function YP(I){var Y,H;return Y=(I>65535)<<4,Y|=H=((I>>>=Y)>255)<<3,Y|=H=((I>>>=H)>15)<<2,(Y|=H=((I>>>=H)>3)<<1)|(I>>>=H)>>1}function XP(){var I=zt(8,function(){return[]});function Y(ue){var ye=vg(ue),Le=I[YP(ye)>>2];return Le.length>0?Le.pop():new ArrayBuffer(ye)}function H(ue){I[YP(ue.byteLength)>>2].push(ue)}function pe(ue,ye){var Le=null;switch(ue){case pn:Le=new Int8Array(Y(ye),0,ye);break;case yr:Le=new Uint8Array(Y(ye),0,ye);break;case Ns:Le=new Int16Array(Y(2*ye),0,ye);break;case Ga:Le=new Uint16Array(Y(2*ye),0,ye);break;case Ya:Le=new Int32Array(Y(4*ye),0,ye);break;case Ps:Le=new Uint32Array(Y(4*ye),0,ye);break;case Ds:Le=new Float32Array(Y(4*ye),0,ye);break;default:return null}return Le.length!==ye?Le.subarray(0,ye):Le}function xe(ue){H(ue.buffer)}return{alloc:Y,free:H,allocType:pe,freeType:xe}}var Ln=XP();Ln.zero=XP();var OH=3408,NH=3410,PH=3411,DH=3412,LH=3413,BH=3414,RH=3415,jH=33901,zH=33902,FH=3379,GH=3386,YH=34921,XH=36347,UH=36348,WH=35661,VH=35660,HH=34930,qH=36349,ZH=34076,KH=34024,$H=7936,QH=7937,JH=7938,eq=35724,tq=34047,nq=36063,rq=34852,mg=3553,UP=34067,iq=34069,oq=33984,mh=6408,Ob=5126,WP=5121,Nb=36160,aq=36053,sq=36064,uq=16384,cq=function(I,Y){var H=1;Y.ext_texture_filter_anisotropic&&(H=I.getParameter(tq));var pe=1,xe=1;Y.webgl_draw_buffers&&(pe=I.getParameter(rq),xe=I.getParameter(nq));var ue=!!Y.oes_texture_float;if(ue){var ye=I.createTexture();I.bindTexture(mg,ye),I.texImage2D(mg,0,mh,1,1,0,mh,Ob,null);var Le=I.createFramebuffer();if(I.bindFramebuffer(Nb,Le),I.framebufferTexture2D(Nb,sq,mg,ye,0),I.bindTexture(mg,null),I.checkFramebufferStatus(Nb)!==aq)ue=!1;else{I.viewport(0,0,1,1),I.clearColor(1,0,0,1),I.clear(uq);var ze=Ln.allocType(Ob,4);I.readPixels(0,0,1,1,mh,Ob,ze),I.getError()?ue=!1:(I.deleteFramebuffer(Le),I.deleteTexture(ye),ue=ze[0]===1),Ln.freeType(ze)}}var Re=!0;if(typeof navigator=="undefined"||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var Be=I.createTexture(),Xe=Ln.allocType(WP,36);I.activeTexture(oq),I.bindTexture(UP,Be),I.texImage2D(iq,0,mh,3,3,0,mh,WP,Xe),Ln.freeType(Xe),I.bindTexture(UP,null),I.deleteTexture(Be),Re=!I.getError()}return{colorBits:[I.getParameter(NH),I.getParameter(PH),I.getParameter(DH),I.getParameter(LH)],depthBits:I.getParameter(BH),stencilBits:I.getParameter(RH),subpixelBits:I.getParameter(OH),extensions:Object.keys(Y).filter(function(et){return!!Y[et]}),maxAnisotropic:H,maxDrawbuffers:pe,maxColorAttachments:xe,pointSizeDims:I.getParameter(jH),lineWidthDims:I.getParameter(zH),maxViewportDims:I.getParameter(GH),maxCombinedTextureUnits:I.getParameter(WH),maxCubeMapSize:I.getParameter(ZH),maxRenderbufferSize:I.getParameter(KH),maxTextureUnits:I.getParameter(HH),maxTextureSize:I.getParameter(FH),maxAttributes:I.getParameter(YH),maxVertexUniforms:I.getParameter(XH),maxVertexTextureUnits:I.getParameter(VH),maxVaryingVectors:I.getParameter(UH),maxFragmentUniforms:I.getParameter(qH),glsl:I.getParameter(eq),renderer:I.getParameter(QH),vendor:I.getParameter($H),version:I.getParameter(JH),readFloat:ue,npotTextureCube:Re}};function Ri(I){return!!I&&typeof I=="object"&&Array.isArray(I.shape)&&Array.isArray(I.stride)&&typeof I.offset=="number"&&I.shape.length===I.stride.length&&(Array.isArray(I.data)||e(I.data))}var ri=function(I){return Object.keys(I).map(function(Y){return I[Y]})},yg={shape:fq,flatten:dq};function lq(I,Y,H){for(var pe=0;pe<Y;++pe)H[pe]=I[pe]}function hq(I,Y,H,pe){for(var xe=0,ue=0;ue<Y;++ue)for(var ye=I[ue],Le=0;Le<H;++Le)pe[xe++]=ye[Le]}function VP(I,Y,H,pe,xe,ue){for(var ye=ue,Le=0;Le<Y;++Le)for(var ze=I[Le],Re=0;Re<H;++Re)for(var Be=ze[Re],Xe=0;Xe<pe;++Xe)xe[ye++]=Be[Xe]}function HP(I,Y,H,pe,xe){for(var ue=1,ye=H+1;ye<Y.length;++ye)ue*=Y[ye];var Le=Y[H];if(Y.length-H==4){var ze=Y[H+1],Re=Y[H+2],Be=Y[H+3];for(ye=0;ye<Le;++ye)VP(I[ye],ze,Re,Be,pe,xe),xe+=ue}else for(ye=0;ye<Le;++ye)HP(I[ye],Y,H+1,pe,xe),xe+=ue}function dq(I,Y,H,pe){var xe=1;if(Y.length)for(var ue=0;ue<Y.length;++ue)xe*=Y[ue];else xe=0;var ye=pe||Ln.allocType(H,xe);switch(Y.length){case 0:break;case 1:lq(I,Y[0],ye);break;case 2:hq(I,Y[0],Y[1],ye);break;case 3:VP(I,Y[0],Y[1],Y[2],ye,0);break;default:HP(I,Y,0,ye,0)}return ye}function fq(I){for(var Y=[],H=I;H.length;H=H[0])Y.push(H.length);return Y}var Pb={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ls={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},bg={dynamic:35048,stream:35040,static:35044},Db=yg.flatten,qP=yg.shape,ZP=35044,pq=35040,Lb=5121,Bb=5126,Xa=[];function xg(I){return 0|Pb[Object.prototype.toString.call(I)]}function KP(I,Y){for(var H=0;H<Y.length;++H)I[H]=Y[H]}function $P(I,Y,H,pe,xe,ue,ye){for(var Le=0,ze=0;ze<H;++ze)for(var Re=0;Re<pe;++Re)I[Le++]=Y[xe*ze+ue*Re+ye]}function gq(I,Y,H,pe){var xe=0,ue={};function ye(ae){this.id=xe++,this.buffer=I.createBuffer(),this.type=ae,this.usage=ZP,this.byteLength=0,this.dimension=1,this.dtype=Lb,this.persistentData=null,H.profile&&(this.stats={size:0})}ye.prototype.bind=function(){I.bindBuffer(this.type,this.buffer)},ye.prototype.destroy=function(){et(this)};var Le=[];function ze(ae,be){var je=Le.pop();return je||(je=new ye(ae)),je.bind(),Xe(je,be,pq,0,1,!1),je}function Re(ae){Le.push(ae)}function Be(ae,be,je){ae.byteLength=be.byteLength,I.bufferData(ae.type,be,je)}function Xe(ae,be,je,rt,Ie,st){var Te,Ke;if(ae.usage=je,Array.isArray(be)){if(ae.dtype=rt||Bb,be.length>0)if(Array.isArray(be[0])){Te=qP(be);for(var Ae=1,He=1;He<Te.length;++He)Ae*=Te[He];ae.dimension=Ae,Be(ae,Ke=Db(be,Te,ae.dtype),je),st?ae.persistentData=Ke:Ln.freeType(Ke)}else if(typeof be[0]=="number"){ae.dimension=Ie;var xt=Ln.allocType(ae.dtype,be.length);KP(xt,be),Be(ae,xt,je),st?ae.persistentData=xt:Ln.freeType(xt)}else e(be[0])?(ae.dimension=be[0].length,ae.dtype=rt||xg(be[0])||Bb,Be(ae,Ke=Db(be,[be.length,be[0].length],ae.dtype),je),st?ae.persistentData=Ke:Ln.freeType(Ke)):O.raise("invalid buffer data")}else if(e(be))ae.dtype=rt||xg(be),ae.dimension=Ie,Be(ae,be,je),st&&(ae.persistentData=new Uint8Array(new Uint8Array(be.buffer)));else if(Ri(be)){Te=be.shape;var Rt=be.stride,$e=be.offset,tt=0,Fe=0,nt=0,Ft=0;Te.length===1?(tt=Te[0],Fe=1,nt=Rt[0],Ft=0):Te.length===2?(tt=Te[0],Fe=Te[1],nt=Rt[0],Ft=Rt[1]):O.raise("invalid shape"),ae.dtype=rt||xg(be.data)||Bb,ae.dimension=Fe;var ft=Ln.allocType(ae.dtype,tt*Fe);$P(ft,be.data,tt,Fe,nt,Ft,$e),Be(ae,ft,je),st?ae.persistentData=ft:Ln.freeType(ft)}else be instanceof ArrayBuffer?(ae.dtype=Lb,ae.dimension=Ie,Be(ae,be,je),st&&(ae.persistentData=new Uint8Array(new Uint8Array(be)))):O.raise("invalid buffer data")}function et(ae){Y.bufferCount--,pe(ae);var be=ae.buffer;O(be,"buffer must not be deleted already"),I.deleteBuffer(be),ae.buffer=null,delete ue[ae.id]}function De(ae,be,je,rt){Y.bufferCount++;var Ie=new ye(be);function st(Ae){var He=ZP,xt=null,Rt=0,$e=0,tt=1;return Array.isArray(Ae)||e(Ae)||Ri(Ae)||Ae instanceof ArrayBuffer?xt=Ae:typeof Ae=="number"?Rt=0|Ae:Ae&&(O.type(Ae,"object","buffer arguments must be an object, a number or an array"),"data"in Ae&&(O(xt===null||Array.isArray(xt)||e(xt)||Ri(xt),"invalid data for buffer"),xt=Ae.data),"usage"in Ae&&(O.parameter(Ae.usage,bg,"invalid buffer usage"),He=bg[Ae.usage]),"type"in Ae&&(O.parameter(Ae.type,Ls,"invalid buffer type"),$e=Ls[Ae.type]),"dimension"in Ae&&(O.type(Ae.dimension,"number","invalid dimension"),tt=0|Ae.dimension),"length"in Ae&&(O.nni(Rt,"buffer length must be a nonnegative integer"),Rt=0|Ae.length)),Ie.bind(),xt?Xe(Ie,xt,He,$e,tt,rt):(Rt&&I.bufferData(Ie.type,Rt,He),Ie.dtype=$e||Lb,Ie.usage=He,Ie.dimension=tt,Ie.byteLength=Rt),H.profile&&(Ie.stats.size=Ie.byteLength*Xa[Ie.dtype]),st}function Te(Ae,He){O(He+Ae.byteLength<=Ie.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ae.byteLength+" starting from offset "+He+" to a buffer of size "+Ie.byteLength),I.bufferSubData(Ie.type,He,Ae)}function Ke(Ae,He){var xt,Rt=0|(He||0);if(Ie.bind(),e(Ae)||Ae instanceof ArrayBuffer)Te(Ae,Rt);else if(Array.isArray(Ae)){if(Ae.length>0)if(typeof Ae[0]=="number"){var $e=Ln.allocType(Ie.dtype,Ae.length);KP($e,Ae),Te($e,Rt),Ln.freeType($e)}else if(Array.isArray(Ae[0])||e(Ae[0])){xt=qP(Ae);var tt=Db(Ae,xt,Ie.dtype);Te(tt,Rt),Ln.freeType(tt)}else O.raise("invalid buffer data")}else if(Ri(Ae)){xt=Ae.shape;var Fe=Ae.stride,nt=0,Ft=0,ft=0,Xt=0;xt.length===1?(nt=xt[0],Ft=1,ft=Fe[0],Xt=0):xt.length===2?(nt=xt[0],Ft=xt[1],ft=Fe[0],Xt=Fe[1]):O.raise("invalid shape");var jt=Array.isArray(Ae.data)?Ie.dtype:xg(Ae.data),Lt=Ln.allocType(jt,nt*Ft);$P(Lt,Ae.data,nt,Ft,ft,Xt,Ae.offset),Te(Lt,Rt),Ln.freeType(Lt)}else O.raise("invalid data for buffer subdata");return st}return ue[Ie.id]=Ie,je||st(ae),st._reglType="buffer",st._buffer=Ie,st.subdata=Ke,H.profile&&(st.stats=Ie.stats),st.destroy=function(){et(Ie)},st}function Qe(){ri(ue).forEach(function(ae){ae.buffer=I.createBuffer(),I.bindBuffer(ae.type,ae.buffer),I.bufferData(ae.type,ae.persistentData||ae.byteLength,ae.usage)})}return H.profile&&(Y.getTotalBufferSize=function(){var ae=0;return Object.keys(ue).forEach(function(be){ae+=ue[be].stats.size}),ae}),{create:De,createStream:ze,destroyStream:Re,clear:function(){ri(ue).forEach(et),Le.forEach(et)},getBuffer:function(ae){return ae&&ae._buffer instanceof ye?ae._buffer:null},restore:Qe,_initBuffer:Xe}}Xa[5120]=1,Xa[5122]=2,Xa[5124]=4,Xa[5121]=1,Xa[5123]=2,Xa[5125]=4,Xa[5126]=4;var vq=1,uc={points:0,point:0,lines:1,line:vq,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},mq=0,yq=1,yh=4,bq=5120,cc=5121,QP=5122,lc=5123,JP=5124,Bs=5125,Rb=34963,xq=35040,wq=35044;function Eq(I,Y,H,pe){var xe={},ue=0,ye={uint8:cc,uint16:lc};function Le(Qe){this.id=ue++,xe[this.id]=this,this.buffer=Qe,this.primType=yh,this.vertCount=0,this.type=0}Y.oes_element_index_uint&&(ye.uint32=Bs),Le.prototype.bind=function(){this.buffer.bind()};var ze=[];function Re(Qe){var ae=ze.pop();return ae||(ae=new Le(H.create(null,Rb,!0,!1)._buffer)),Xe(ae,Qe,xq,-1,-1,0,0),ae}function Be(Qe){ze.push(Qe)}function Xe(Qe,ae,be,je,rt,Ie,st){var Te;if(Qe.buffer.bind(),ae){var Ke=st;st||e(ae)&&(!Ri(ae)||e(ae.data))||(Ke=Y.oes_element_index_uint?Bs:lc),H._initBuffer(Qe.buffer,ae,be,Ke,3)}else I.bufferData(Rb,Ie,be),Qe.buffer.dtype=Te||cc,Qe.buffer.usage=be,Qe.buffer.dimension=3,Qe.buffer.byteLength=Ie;if(Te=st,!st){switch(Qe.buffer.dtype){case cc:case bq:Te=cc;break;case lc:case QP:Te=lc;break;case Bs:case JP:Te=Bs;break;default:O.raise("unsupported type for element array")}Qe.buffer.dtype=Te}Qe.type=Te,O(Te!==Bs||!!Y.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ae=rt;Ae<0&&(Ae=Qe.buffer.byteLength,Te===lc?Ae>>=1:Te===Bs&&(Ae>>=2)),Qe.vertCount=Ae;var He=je;if(je<0){He=yh;var xt=Qe.buffer.dimension;xt===1&&(He=mq),xt===2&&(He=yq),xt===3&&(He=yh)}Qe.primType=He}function et(Qe){pe.elementsCount--,O(Qe.buffer!==null,"must not double destroy elements"),delete xe[Qe.id],Qe.buffer.destroy(),Qe.buffer=null}function De(Qe,ae){var be=H.create(null,Rb,!0),je=new Le(be._buffer);function rt(Ie){if(Ie)if(typeof Ie=="number")be(Ie),je.primType=yh,je.vertCount=0|Ie,je.type=cc;else{var st=null,Te=wq,Ke=-1,Ae=-1,He=0,xt=0;Array.isArray(Ie)||e(Ie)||Ri(Ie)?st=Ie:(O.type(Ie,"object","invalid arguments for elements"),"data"in Ie&&(st=Ie.data,O(Array.isArray(st)||e(st)||Ri(st),"invalid data for element buffer")),"usage"in Ie&&(O.parameter(Ie.usage,bg,"invalid element buffer usage"),Te=bg[Ie.usage]),"primitive"in Ie&&(O.parameter(Ie.primitive,uc,"invalid element buffer primitive"),Ke=uc[Ie.primitive]),"count"in Ie&&(O(typeof Ie.count=="number"&&Ie.count>=0,"invalid vertex count for elements"),Ae=0|Ie.count),"type"in Ie&&(O.parameter(Ie.type,ye,"invalid buffer type"),xt=ye[Ie.type]),"length"in Ie?He=0|Ie.length:(He=Ae,xt===lc||xt===QP?He*=2:xt!==Bs&&xt!==JP||(He*=4))),Xe(je,st,Te,Ke,Ae,He,xt)}else be(),je.primType=yh,je.vertCount=0,je.type=cc;return rt}return pe.elementsCount++,rt(Qe),rt._reglType="elements",rt._elements=je,rt.subdata=function(Ie,st){return be.subdata(Ie,st),rt},rt.destroy=function(){et(je)},rt}return{create:De,createStream:Re,destroyStream:Be,getElements:function(Qe){return typeof Qe=="function"&&Qe._elements instanceof Le?Qe._elements:null},clear:function(){ri(xe).forEach(et)}}}var eD=new Float32Array(1),Sq=new Uint32Array(eD.buffer),Mq=5123;function tD(I){for(var Y=Ln.allocType(Mq,I.length),H=0;H<I.length;++H)if(isNaN(I[H]))Y[H]=65535;else if(I[H]===1/0)Y[H]=31744;else if(I[H]===-1/0)Y[H]=64512;else{eD[0]=I[H];var pe=Sq[0],xe=pe>>>31<<15,ue=(pe<<1>>>24)-127,ye=pe>>13&1023;if(ue<-24)Y[H]=xe;else if(ue<-14){var Le=-14-ue;Y[H]=xe+(ye+1024>>Le)}else Y[H]=ue>15?xe+31744:xe+(ue+15<<10)+ye}return Y}function Vn(I){return Array.isArray(I)||e(I)}var nD=function(I){return!(I&I-1||!I)},_q=34467,_o=3553,jb=34067,wg=34069,Rs=6408,zb=6406,Eg=6407,bh=6409,Sg=6410,rD=32854,Fb=32855,iD=36194,kq=32819,Cq=32820,Aq=33635,Iq=34042,Gb=6402,Mg=34041,Yb=35904,Xb=35906,hc=36193,Ub=33776,Wb=33777,Vb=33778,Hb=33779,oD=35986,aD=35987,sD=34798,uD=35840,cD=35841,lD=35842,hD=35843,dD=36196,dc=5121,qb=5123,Zb=5125,xh=5126,Tq=10242,Oq=10243,Nq=10497,Kb=33071,Pq=33648,Dq=10240,Lq=10241,$b=9728,Bq=9729,Qb=9984,fD=9985,pD=9986,Jb=9987,Rq=33170,_g=4352,jq=4353,zq=4354,Fq=34046,Gq=3317,Yq=37440,Xq=37441,Uq=37443,gD=37444,wh=33984,Wq=[Qb,pD,fD,Jb],kg=[0,bh,Sg,Eg,Rs],bi={};function fc(I){return"[object "+I+"]"}bi[bh]=bi[zb]=bi[Gb]=1,bi[Mg]=bi[Sg]=2,bi[Eg]=bi[Yb]=3,bi[Rs]=bi[Xb]=4;var vD=fc("HTMLCanvasElement"),mD=fc("OffscreenCanvas"),yD=fc("CanvasRenderingContext2D"),bD=fc("ImageBitmap"),xD=fc("HTMLImageElement"),wD=fc("HTMLVideoElement"),Vq=Object.keys(Pb).concat([vD,mD,yD,bD,xD,wD]),pc=[];pc[dc]=1,pc[xh]=4,pc[hc]=2,pc[qb]=2,pc[Zb]=4;var lr=[];function ED(I){return Array.isArray(I)&&(I.length===0||typeof I[0]=="number")}function SD(I){return!!Array.isArray(I)&&!(I.length===0||!Vn(I[0]))}function js(I){return Object.prototype.toString.call(I)}function MD(I){return js(I)===vD}function _D(I){return js(I)===mD}function Hq(I){return js(I)===yD}function qq(I){return js(I)===bD}function Zq(I){return js(I)===xD}function Kq(I){return js(I)===wD}function ex(I){if(!I)return!1;var Y=js(I);return Vq.indexOf(Y)>=0||ED(I)||SD(I)||Ri(I)}function kD(I){return 0|Pb[Object.prototype.toString.call(I)]}function $q(I,Y){var H=Y.length;switch(I.type){case dc:case qb:case Zb:case xh:var pe=Ln.allocType(I.type,H);pe.set(Y),I.data=pe;break;case hc:I.data=tD(Y);break;default:O.raise("unsupported texture type, must specify a typed array")}}function CD(I,Y){return Ln.allocType(I.type===hc?xh:I.type,Y)}function AD(I,Y){I.type===hc?(I.data=tD(Y),Ln.freeType(Y)):I.data=Y}function Qq(I,Y,H,pe,xe,ue){for(var ye=I.width,Le=I.height,ze=I.channels,Re=CD(I,ye*Le*ze),Be=0,Xe=0;Xe<Le;++Xe)for(var et=0;et<ye;++et)for(var De=0;De<ze;++De)Re[Be++]=Y[H*et+pe*Xe+xe*De+ue];AD(I,Re)}function Cg(I,Y,H,pe,xe,ue){var ye;if(ye=lr[I]!==void 0?lr[I]:bi[I]*pc[Y],ue&&(ye*=6),xe){for(var Le=0,ze=H;ze>=1;)Le+=ye*ze*ze,ze/=2;return Le}return ye*H*pe}function Jq(I,Y,H,pe,xe,ue,ye){var Le={"don't care":_g,"dont care":_g,nice:zq,fast:jq},ze={repeat:Nq,clamp:Kb,mirror:Pq},Re={nearest:$b,linear:Bq},Be=n({mipmap:Jb,"nearest mipmap nearest":Qb,"linear mipmap nearest":fD,"nearest mipmap linear":pD,"linear mipmap linear":Jb},Re),Xe={none:0,browser:gD},et={uint8:dc,rgba4:kq,rgb565:Aq,"rgb5 a1":Cq},De={alpha:zb,luminance:bh,"luminance alpha":Sg,rgb:Eg,rgba:Rs,rgba4:rD,"rgb5 a1":Fb,rgb565:iD},Qe={};Y.ext_srgb&&(De.srgb=Yb,De.srgba=Xb),Y.oes_texture_float&&(et.float32=et.float=xh),Y.oes_texture_half_float&&(et.float16=et["half float"]=hc),Y.webgl_depth_texture&&(n(De,{depth:Gb,"depth stencil":Mg}),n(et,{uint16:qb,uint32:Zb,"depth stencil":Iq})),Y.webgl_compressed_texture_s3tc&&n(Qe,{"rgb s3tc dxt1":Ub,"rgba s3tc dxt1":Wb,"rgba s3tc dxt3":Vb,"rgba s3tc dxt5":Hb}),Y.webgl_compressed_texture_atc&&n(Qe,{"rgb atc":oD,"rgba atc explicit alpha":aD,"rgba atc interpolated alpha":sD}),Y.webgl_compressed_texture_pvrtc&&n(Qe,{"rgb pvrtc 4bppv1":uD,"rgb pvrtc 2bppv1":cD,"rgba pvrtc 4bppv1":lD,"rgba pvrtc 2bppv1":hD}),Y.webgl_compressed_texture_etc1&&(Qe["rgb etc1"]=dD);var ae=Array.prototype.slice.call(I.getParameter(_q));Object.keys(Qe).forEach(function(W){var ge=Qe[W];ae.indexOf(ge)>=0&&(De[W]=ge)});var be=Object.keys(De);H.textureFormats=be;var je=[];Object.keys(De).forEach(function(W){var ge=De[W];je[ge]=W});var rt=[];Object.keys(et).forEach(function(W){var ge=et[W];rt[ge]=W});var Ie=[];Object.keys(Re).forEach(function(W){var ge=Re[W];Ie[ge]=W});var st=[];Object.keys(Be).forEach(function(W){var ge=Be[W];st[ge]=W});var Te=[];Object.keys(ze).forEach(function(W){var ge=ze[W];Te[ge]=W});var Ke=be.reduce(function(W,ge){var de=De[ge];return de===bh||de===zb||de===bh||de===Sg||de===Gb||de===Mg||Y.ext_srgb&&(de===Yb||de===Xb)?W[de]=de:de===Fb||ge.indexOf("rgba")>=0?W[de]=Rs:W[de]=Eg,W},{});function Ae(){this.internalformat=Rs,this.format=Rs,this.type=dc,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=gD,this.width=0,this.height=0,this.channels=0}function He(W,ge){W.internalformat=ge.internalformat,W.format=ge.format,W.type=ge.type,W.compressed=ge.compressed,W.premultiplyAlpha=ge.premultiplyAlpha,W.flipY=ge.flipY,W.unpackAlignment=ge.unpackAlignment,W.colorSpace=ge.colorSpace,W.width=ge.width,W.height=ge.height,W.channels=ge.channels}function xt(W,ge){if(typeof ge=="object"&&ge){if("premultiplyAlpha"in ge&&(O.type(ge.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),W.premultiplyAlpha=ge.premultiplyAlpha),"flipY"in ge&&(O.type(ge.flipY,"boolean","invalid texture flip"),W.flipY=ge.flipY),"alignment"in ge&&(O.oneOf(ge.alignment,[1,2,4,8],"invalid texture unpack alignment"),W.unpackAlignment=ge.alignment),"colorSpace"in ge&&(O.parameter(ge.colorSpace,Xe,"invalid colorSpace"),W.colorSpace=Xe[ge.colorSpace]),"type"in ge){var de=ge.type;O(Y.oes_texture_float||!(de==="float"||de==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),O(Y.oes_texture_half_float||!(de==="half float"||de==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),O(Y.webgl_depth_texture||!(de==="uint16"||de==="uint32"||de==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),O.parameter(de,et,"invalid texture type"),W.type=et[de]}var lt=W.width,Ut=W.height,X=W.channels,j=!1;"shape"in ge?(O(Array.isArray(ge.shape)&&ge.shape.length>=2,"shape must be an array"),lt=ge.shape[0],Ut=ge.shape[1],ge.shape.length===3&&(X=ge.shape[2],O(X>0&&X<=4,"invalid number of channels"),j=!0),O(lt>=0&&lt<=H.maxTextureSize,"invalid width"),O(Ut>=0&&Ut<=H.maxTextureSize,"invalid height")):("radius"in ge&&(lt=Ut=ge.radius,O(lt>=0&&lt<=H.maxTextureSize,"invalid radius")),"width"in ge&&(lt=ge.width,O(lt>=0&&lt<=H.maxTextureSize,"invalid width")),"height"in ge&&(Ut=ge.height,O(Ut>=0&&Ut<=H.maxTextureSize,"invalid height")),"channels"in ge&&(X=ge.channels,O(X>0&&X<=4,"invalid number of channels"),j=!0)),W.width=0|lt,W.height=0|Ut,W.channels=0|X;var $=!1;if("format"in ge){var te=ge.format;O(Y.webgl_depth_texture||!(te==="depth"||te==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),O.parameter(te,De,"invalid texture format");var ce=W.internalformat=De[te];W.format=Ke[ce],te in et&&("type"in ge||(W.type=et[te])),te in Qe&&(W.compressed=!0),$=!0}!j&&$?W.channels=bi[W.format]:j&&!$?W.channels!==kg[W.format]&&(W.format=W.internalformat=kg[W.channels]):$&&j&&O(W.channels===bi[W.format],"number of channels inconsistent with specified format")}}function Rt(W){I.pixelStorei(Yq,W.flipY),I.pixelStorei(Xq,W.premultiplyAlpha),I.pixelStorei(Uq,W.colorSpace),I.pixelStorei(Gq,W.unpackAlignment)}function $e(){Ae.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function tt(W,ge){var de=null;if(ex(ge)?de=ge:ge&&(O.type(ge,"object","invalid pixel data type"),xt(W,ge),"x"in ge&&(W.xOffset=0|ge.x),"y"in ge&&(W.yOffset=0|ge.y),ex(ge.data)&&(de=ge.data)),O(!W.compressed||de instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ge.copy){O(!de,"can not specify copy and data field for the same texture");var lt=xe.viewportWidth,Ut=xe.viewportHeight;W.width=W.width||lt-W.xOffset,W.height=W.height||Ut-W.yOffset,W.needsCopy=!0,O(W.xOffset>=0&&W.xOffset<lt&&W.yOffset>=0&&W.yOffset<Ut&&W.width>0&&W.width<=lt&&W.height>0&&W.height<=Ut,"copy texture read out of bounds")}else if(de){if(e(de))W.channels=W.channels||4,W.data=de,"type"in ge||W.type!==dc||(W.type=kD(de));else if(ED(de))W.channels=W.channels||4,$q(W,de),W.alignment=1,W.needsFree=!0;else if(Ri(de)){var X=de.data;Array.isArray(X)||W.type!==dc||(W.type=kD(X));var j,$,te,ce,K,ee,se=de.shape,G=de.stride;se.length===3?(te=se[2],ee=G[2]):(O(se.length===2,"invalid ndarray pixel data, must be 2 or 3D"),te=1,ee=1),j=se[0],$=se[1],ce=G[0],K=G[1],W.alignment=1,W.width=j,W.height=$,W.channels=te,W.format=W.internalformat=kg[te],W.needsFree=!0,Qq(W,X,ce,K,ee,de.offset)}else if(MD(de)||_D(de)||Hq(de))MD(de)||_D(de)?W.element=de:W.element=de.canvas,W.width=W.element.width,W.height=W.element.height,W.channels=4;else if(qq(de))W.element=de,W.width=de.width,W.height=de.height,W.channels=4;else if(Zq(de))W.element=de,W.width=de.naturalWidth,W.height=de.naturalHeight,W.channels=4;else if(Kq(de))W.element=de,W.width=de.videoWidth,W.height=de.videoHeight,W.channels=4;else if(SD(de)){var V=W.width||de[0].length,U=W.height||de.length,le=W.channels;le=Vn(de[0][0])?le||de[0][0].length:le||1;for(var oe=yg.shape(de),ve=1,we=0;we<oe.length;++we)ve*=oe[we];var Ce=CD(W,ve);yg.flatten(de,oe,"",Ce),AD(W,Ce),W.alignment=1,W.width=V,W.height=U,W.channels=le,W.format=W.internalformat=kg[le],W.needsFree=!0}}else W.width=W.width||1,W.height=W.height||1,W.channels=W.channels||4;W.type===xh?O(H.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):W.type===hc&&O(H.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Fe(W,ge,de){var lt=W.element,Ut=W.data,X=W.internalformat,j=W.format,$=W.type,te=W.width,ce=W.height;Rt(W),lt?I.texImage2D(ge,de,j,j,$,lt):W.compressed?I.compressedTexImage2D(ge,de,X,te,ce,0,Ut):W.needsCopy?(pe(),I.copyTexImage2D(ge,de,j,W.xOffset,W.yOffset,te,ce,0)):I.texImage2D(ge,de,j,te,ce,0,j,$,Ut||null)}function nt(W,ge,de,lt,Ut){var X=W.element,j=W.data,$=W.internalformat,te=W.format,ce=W.type,K=W.width,ee=W.height;Rt(W),X?I.texSubImage2D(ge,Ut,de,lt,te,ce,X):W.compressed?I.compressedTexSubImage2D(ge,Ut,de,lt,$,K,ee,j):W.needsCopy?(pe(),I.copyTexSubImage2D(ge,Ut,de,lt,W.xOffset,W.yOffset,K,ee)):I.texSubImage2D(ge,Ut,de,lt,K,ee,te,ce,j)}var Ft=[];function ft(){return Ft.pop()||new $e}function Xt(W){W.needsFree&&Ln.freeType(W.data),$e.call(W),Ft.push(W)}function jt(){Ae.call(this),this.genMipmaps=!1,this.mipmapHint=_g,this.mipmask=0,this.images=Array(16)}function Lt(W,ge,de){var lt=W.images[0]=ft();W.mipmask=1,lt.width=W.width=ge,lt.height=W.height=de,lt.channels=W.channels=4}function Wt(W,ge){var de=null;if(ex(ge))He(de=W.images[0]=ft(),W),tt(de,ge),W.mipmask=1;else if(xt(W,ge),Array.isArray(ge.mipmap))for(var lt=ge.mipmap,Ut=0;Ut<lt.length;++Ut)He(de=W.images[Ut]=ft(),W),de.width>>=Ut,de.height>>=Ut,tt(de,lt[Ut]),W.mipmask|=1<<Ut;else He(de=W.images[0]=ft(),W),tt(de,ge),W.mipmask=1;He(W,W.images[0]),!W.compressed||W.internalformat!==Ub&&W.internalformat!==Wb&&W.internalformat!==Vb&&W.internalformat!==Hb||O(W.width%4==0&&W.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Rn(W,ge){for(var de=W.images,lt=0;lt<de.length;++lt){if(!de[lt])return;Fe(de[lt],ge,lt)}}var hr=[];function Hn(){var W=hr.pop()||new jt;Ae.call(W),W.mipmask=0;for(var ge=0;ge<16;++ge)W.images[ge]=null;return W}function qt(W){for(var ge=W.images,de=0;de<ge.length;++de)ge[de]&&Xt(ge[de]),ge[de]=null;hr.push(W)}function jn(){this.minFilter=$b,this.magFilter=$b,this.wrapS=Kb,this.wrapT=Kb,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=_g}function zn(W,ge){if("min"in ge){var de=ge.min;O.parameter(de,Be),W.minFilter=Be[de],Wq.indexOf(W.minFilter)>=0&&!("faces"in ge)&&(W.genMipmaps=!0)}if("mag"in ge){var lt=ge.mag;O.parameter(lt,Re),W.magFilter=Re[lt]}var Ut=W.wrapS,X=W.wrapT;if("wrap"in ge){var j=ge.wrap;typeof j=="string"?(O.parameter(j,ze),Ut=X=ze[j]):Array.isArray(j)&&(O.parameter(j[0],ze),O.parameter(j[1],ze),Ut=ze[j[0]],X=ze[j[1]])}else{if("wrapS"in ge){var $=ge.wrapS;O.parameter($,ze),Ut=ze[$]}if("wrapT"in ge){var te=ge.wrapT;O.parameter(te,ze),X=ze[te]}}if(W.wrapS=Ut,W.wrapT=X,"anisotropic"in ge){var ce=ge.anisotropic;O(typeof ce=="number"&&ce>=1&&ce<=H.maxAnisotropic,"aniso samples must be between 1 and "),W.anisotropic=ge.anisotropic}if("mipmap"in ge){var K=!1;switch(typeof ge.mipmap){case"string":O.parameter(ge.mipmap,Le,"invalid mipmap hint"),W.mipmapHint=Le[ge.mipmap],W.genMipmaps=!0,K=!0;break;case"boolean":K=W.genMipmaps=ge.mipmap;break;case"object":O(Array.isArray(ge.mipmap),"invalid mipmap type"),W.genMipmaps=!1,K=!0;break;default:O.raise("invalid mipmap type")}K&&!("min"in ge)&&(W.minFilter=Qb)}}function Gn(W,ge){I.texParameteri(ge,Lq,W.minFilter),I.texParameteri(ge,Dq,W.magFilter),I.texParameteri(ge,Tq,W.wrapS),I.texParameteri(ge,Oq,W.wrapT),Y.ext_texture_filter_anisotropic&&I.texParameteri(ge,Fq,W.anisotropic),W.genMipmaps&&(I.hint(Rq,W.mipmapHint),I.generateMipmap(ge))}var Yn=0,nr={},dr=H.maxTextureUnits,An=Array(dr).map(function(){return null});function Gt(W){Ae.call(this),this.mipmask=0,this.internalformat=Rs,this.id=Yn++,this.refCount=1,this.target=W,this.texture=I.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new jn,ye.profile&&(this.stats={size:0})}function fr(W){I.activeTexture(wh),I.bindTexture(W.target,W.texture)}function un(){var W=An[0];W?I.bindTexture(W.target,W.texture):I.bindTexture(_o,null)}function kt(W){var ge=W.texture;O(ge,"must not double destroy texture");var de=W.unit,lt=W.target;de>=0&&(I.activeTexture(wh+de),I.bindTexture(lt,null),An[de]=null),I.deleteTexture(ge),W.texture=null,W.params=null,W.pixels=null,W.refCount=0,delete nr[W.id],ue.textureCount--}function Vt(W,ge){var de=new Gt(_o);function lt(j,$){var te=de.texInfo;jn.call(te);var ce=Hn();return typeof j=="number"?Lt(ce,0|j,typeof $=="number"?0|$:0|j):j?(O.type(j,"object","invalid arguments to regl.texture"),zn(te,j),Wt(ce,j)):Lt(ce,1,1),te.genMipmaps&&(ce.mipmask=(ce.width<<1)-1),de.mipmask=ce.mipmask,He(de,ce),O.texture2D(te,ce,H),de.internalformat=ce.internalformat,lt.width=ce.width,lt.height=ce.height,fr(de),Rn(ce,_o),Gn(te,_o),un(),qt(ce),ye.profile&&(de.stats.size=Cg(de.internalformat,de.type,ce.width,ce.height,te.genMipmaps,!1)),lt.format=je[de.internalformat],lt.type=rt[de.type],lt.mag=Ie[te.magFilter],lt.min=st[te.minFilter],lt.wrapS=Te[te.wrapS],lt.wrapT=Te[te.wrapT],lt}function Ut(j,$,te,ce){O(!!j,"must specify image data");var K=0|$,ee=0|te,se=0|ce,G=ft();return He(G,de),G.width=0,G.height=0,tt(G,j),G.width=G.width||(de.width>>se)-K,G.height=G.height||(de.height>>se)-ee,O(de.type===G.type&&de.format===G.format&&de.internalformat===G.internalformat,"incompatible format for texture.subimage"),O(K>=0&&ee>=0&&K+G.width<=de.width&&ee+G.height<=de.height,"texture.subimage write out of bounds"),O(de.mipmask&1<<se,"missing mipmap data"),O(G.data||G.element||G.needsCopy,"missing image data"),fr(de),nt(G,_o,K,ee,se),un(),Xt(G),lt}function X(j,$){var te=0|j,ce=0|$||te;if(te===de.width&&ce===de.height)return lt;lt.width=de.width=te,lt.height=de.height=ce,fr(de);for(var K=0;de.mipmask>>K;++K){var ee=te>>K,se=ce>>K;if(!ee||!se)break;I.texImage2D(_o,K,de.format,ee,se,0,de.format,de.type,null)}return un(),ye.profile&&(de.stats.size=Cg(de.internalformat,de.type,te,ce,!1,!1)),lt}return nr[de.id]=de,ue.textureCount++,lt(W,ge),lt.subimage=Ut,lt.resize=X,lt._reglType="texture2d",lt._texture=de,ye.profile&&(lt.stats=de.stats),lt.destroy=function(){de.decRef()},lt}function tn(W,ge,de,lt,Ut,X){var j=new Gt(jb);nr[j.id]=j,ue.cubeCount++;var $=new Array(6);function te(ee,se,G,V,U,le){var oe,ve=j.texInfo;for(jn.call(ve),oe=0;oe<6;++oe)$[oe]=Hn();if(typeof ee!="number"&&ee)if(typeof ee=="object")if(se)Wt($[0],ee),Wt($[1],se),Wt($[2],G),Wt($[3],V),Wt($[4],U),Wt($[5],le);else if(zn(ve,ee),xt(j,ee),"faces"in ee){var we=ee.faces;for(O(Array.isArray(we)&&we.length===6,"cube faces must be a length 6 array"),oe=0;oe<6;++oe)O(typeof we[oe]=="object"&&!!we[oe],"invalid input for cube map face"),He($[oe],j),Wt($[oe],we[oe])}else for(oe=0;oe<6;++oe)Wt($[oe],ee);else O.raise("invalid arguments to cube map");else{var Ce=0|ee||1;for(oe=0;oe<6;++oe)Lt($[oe],Ce,Ce)}for(He(j,$[0]),H.npotTextureCube||O(nD(j.width)&&nD(j.height),"your browser does not support non power or two texture dimensions"),ve.genMipmaps?j.mipmask=($[0].width<<1)-1:j.mipmask=$[0].mipmask,O.textureCube(j,ve,$,H),j.internalformat=$[0].internalformat,te.width=$[0].width,te.height=$[0].height,fr(j),oe=0;oe<6;++oe)Rn($[oe],wg+oe);for(Gn(ve,jb),un(),ye.profile&&(j.stats.size=Cg(j.internalformat,j.type,te.width,te.height,ve.genMipmaps,!0)),te.format=je[j.internalformat],te.type=rt[j.type],te.mag=Ie[ve.magFilter],te.min=st[ve.minFilter],te.wrapS=Te[ve.wrapS],te.wrapT=Te[ve.wrapT],oe=0;oe<6;++oe)qt($[oe]);return te}function ce(ee,se,G,V,U){O(!!se,"must specify image data"),O(typeof ee=="number"&&ee===(0|ee)&&ee>=0&&ee<6,"invalid face");var le=0|G,oe=0|V,ve=0|U,we=ft();return He(we,j),we.width=0,we.height=0,tt(we,se),we.width=we.width||(j.width>>ve)-le,we.height=we.height||(j.height>>ve)-oe,O(j.type===we.type&&j.format===we.format&&j.internalformat===we.internalformat,"incompatible format for texture.subimage"),O(le>=0&&oe>=0&&le+we.width<=j.width&&oe+we.height<=j.height,"texture.subimage write out of bounds"),O(j.mipmask&1<<ve,"missing mipmap data"),O(we.data||we.element||we.needsCopy,"missing image data"),fr(j),nt(we,wg+ee,le,oe,ve),un(),Xt(we),te}function K(ee){var se=0|ee;if(se!==j.width){te.width=j.width=se,te.height=j.height=se,fr(j);for(var G=0;G<6;++G)for(var V=0;j.mipmask>>V;++V)I.texImage2D(wg+G,V,j.format,se>>V,se>>V,0,j.format,j.type,null);return un(),ye.profile&&(j.stats.size=Cg(j.internalformat,j.type,te.width,te.height,!1,!0)),te}}return te(W,ge,de,lt,Ut,X),te.subimage=ce,te.resize=K,te._reglType="textureCube",te._texture=j,ye.profile&&(te.stats=j.stats),te.destroy=function(){j.decRef()},te}function In(){for(var W=0;W<dr;++W)I.activeTexture(wh+W),I.bindTexture(_o,null),An[W]=null;ri(nr).forEach(kt),ue.cubeCount=0,ue.textureCount=0}function Co(){for(var W=0;W<dr;++W){var ge=An[W];ge&&(ge.bindCount=0,ge.unit=-1,An[W]=null)}ri(nr).forEach(function(de){de.texture=I.createTexture(),I.bindTexture(de.target,de.texture);for(var lt=0;lt<32;++lt)if(de.mipmask&1<<lt)if(de.target===_o)I.texImage2D(_o,lt,de.internalformat,de.width>>lt,de.height>>lt,0,de.internalformat,de.type,null);else for(var Ut=0;Ut<6;++Ut)I.texImage2D(wg+Ut,lt,de.internalformat,de.width>>lt,de.height>>lt,0,de.internalformat,de.type,null);Gn(de.texInfo,de.target)})}function Ws(){for(var W=0;W<dr;++W){var ge=An[W];ge&&(ge.bindCount=0,ge.unit=-1,An[W]=null),I.activeTexture(wh+W),I.bindTexture(_o,null),I.bindTexture(jb,null)}}return n(Gt.prototype,{bind:function(){var W=this;W.bindCount+=1;var ge=W.unit;if(ge<0){for(var de=0;de<dr;++de){var lt=An[de];if(lt){if(lt.bindCount>0)continue;lt.unit=-1}An[de]=W,ge=de;break}ge>=dr&&O.raise("insufficient number of texture units"),ye.profile&&ue.maxTextureUnits<ge+1&&(ue.maxTextureUnits=ge+1),W.unit=ge,I.activeTexture(wh+ge),I.bindTexture(W.target,W.texture)}return ge},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&kt(this)}}),ye.profile&&(ue.getTotalTextureSize=function(){var W=0;return Object.keys(nr).forEach(function(ge){W+=nr[ge].stats.size}),W}),{create2D:Vt,createCube:tn,clear:In,getTexture:function(W){return null},restore:Co,refresh:Ws}}lr[rD]=2,lr[Fb]=2,lr[iD]=2,lr[Mg]=4,lr[Ub]=.5,lr[Wb]=.5,lr[Vb]=1,lr[Hb]=1,lr[oD]=.5,lr[aD]=1,lr[sD]=1,lr[uD]=.5,lr[cD]=.25,lr[lD]=.5,lr[hD]=.25,lr[dD]=.5;var Ua=36161,Ag=32854,ID=32855,TD=36194,OD=33189,ND=36168,PD=34041,DD=35907,LD=34836,BD=34842,RD=34843,ji=[];function jD(I,Y,H){return ji[I]*Y*H}ji[Ag]=2,ji[ID]=2,ji[TD]=2,ji[OD]=2,ji[ND]=1,ji[PD]=4,ji[DD]=4,ji[LD]=16,ji[BD]=8,ji[RD]=6;var eZ=function(I,Y,H,pe,xe){var ue={rgba4:Ag,rgb565:TD,"rgb5 a1":ID,depth:OD,stencil:ND,"depth stencil":PD};Y.ext_srgb&&(ue.srgba=DD),Y.ext_color_buffer_half_float&&(ue.rgba16f=BD,ue.rgb16f=RD),Y.webgl_color_buffer_float&&(ue.rgba32f=LD);var ye=[];Object.keys(ue).forEach(function(De){var Qe=ue[De];ye[Qe]=De});var Le=0,ze={};function Re(De){this.id=Le++,this.refCount=1,this.renderbuffer=De,this.format=Ag,this.width=0,this.height=0,xe.profile&&(this.stats={size:0})}function Be(De){var Qe=De.renderbuffer;O(Qe,"must not double destroy renderbuffer"),I.bindRenderbuffer(Ua,null),I.deleteRenderbuffer(Qe),De.renderbuffer=null,De.refCount=0,delete ze[De.id],pe.renderbufferCount--}function Xe(De,Qe){var ae=new Re(I.createRenderbuffer());function be(rt,Ie){var st=0,Te=0,Ke=Ag;if(typeof rt=="object"&&rt){var Ae=rt;if("shape"in Ae){var He=Ae.shape;O(Array.isArray(He)&&He.length>=2,"invalid renderbuffer shape"),st=0|He[0],Te=0|He[1]}else"radius"in Ae&&(st=Te=0|Ae.radius),"width"in Ae&&(st=0|Ae.width),"height"in Ae&&(Te=0|Ae.height);"format"in Ae&&(O.parameter(Ae.format,ue,"invalid renderbuffer format"),Ke=ue[Ae.format])}else typeof rt=="number"?(st=0|rt,Te=typeof Ie=="number"?0|Ie:st):rt?O.raise("invalid arguments to renderbuffer constructor"):st=Te=1;if(O(st>0&&Te>0&&st<=H.maxRenderbufferSize&&Te<=H.maxRenderbufferSize,"invalid renderbuffer size"),st!==ae.width||Te!==ae.height||Ke!==ae.format)return be.width=ae.width=st,be.height=ae.height=Te,ae.format=Ke,I.bindRenderbuffer(Ua,ae.renderbuffer),I.renderbufferStorage(Ua,Ke,st,Te),O(I.getError()===0,"invalid render buffer format"),xe.profile&&(ae.stats.size=jD(ae.format,ae.width,ae.height)),be.format=ye[ae.format],be}function je(rt,Ie){var st=0|rt,Te=0|Ie||st;return st===ae.width&&Te===ae.height||(O(st>0&&Te>0&&st<=H.maxRenderbufferSize&&Te<=H.maxRenderbufferSize,"invalid renderbuffer size"),be.width=ae.width=st,be.height=ae.height=Te,I.bindRenderbuffer(Ua,ae.renderbuffer),I.renderbufferStorage(Ua,ae.format,st,Te),O(I.getError()===0,"invalid render buffer format"),xe.profile&&(ae.stats.size=jD(ae.format,ae.width,ae.height))),be}return ze[ae.id]=ae,pe.renderbufferCount++,be(De,Qe),be.resize=je,be._reglType="renderbuffer",be._renderbuffer=ae,xe.profile&&(be.stats=ae.stats),be.destroy=function(){ae.decRef()},be}function et(){ri(ze).forEach(function(De){De.renderbuffer=I.createRenderbuffer(),I.bindRenderbuffer(Ua,De.renderbuffer),I.renderbufferStorage(Ua,De.format,De.width,De.height)}),I.bindRenderbuffer(Ua,null)}return Re.prototype.decRef=function(){--this.refCount<=0&&Be(this)},xe.profile&&(pe.getTotalRenderbufferSize=function(){var De=0;return Object.keys(ze).forEach(function(Qe){De+=ze[Qe].stats.size}),De}),{create:Xe,clear:function(){ri(ze).forEach(Be)},restore:et}},na=36160,tx=36161,zs=3553,Ig=34069,zD=36064,FD=36096,GD=36128,YD=33306,XD=36053,tZ=36054,nZ=36055,rZ=36057,iZ=36061,oZ=36193,aZ=5121,sZ=5126,UD=6407,WD=6408,uZ=6402,cZ=[UD,WD],nx=[];nx[WD]=4,nx[UD]=3;var Tg=[];Tg[aZ]=1,Tg[sZ]=4,Tg[oZ]=2;var lZ=33189,hZ=36168,VD=34041,dZ=[32854,32855,36194,35907,34842,34843,34836],gc={};function fZ(I,Y,H,pe,xe,ue){var ye={cur:null,next:null,dirty:!1,setFBO:null},Le=["rgba"],ze=["rgba4","rgb565","rgb5 a1"];Y.ext_srgb&&ze.push("srgba"),Y.ext_color_buffer_half_float&&ze.push("rgba16f","rgb16f"),Y.webgl_color_buffer_float&&ze.push("rgba32f");var Re=["uint8"];function Be($e,tt,Fe){this.target=$e,this.texture=tt,this.renderbuffer=Fe;var nt=0,Ft=0;tt?(nt=tt.width,Ft=tt.height):Fe&&(nt=Fe.width,Ft=Fe.height),this.width=nt,this.height=Ft}function Xe($e){$e&&($e.texture&&$e.texture._texture.decRef(),$e.renderbuffer&&$e.renderbuffer._renderbuffer.decRef())}function et($e,tt,Fe){if($e)if($e.texture){var nt=$e.texture._texture,Ft=Math.max(1,nt.width),ft=Math.max(1,nt.height);O(Ft===tt&&ft===Fe,"inconsistent width/height for supplied texture"),nt.refCount+=1}else{var Xt=$e.renderbuffer._renderbuffer;O(Xt.width===tt&&Xt.height===Fe,"inconsistent width/height for renderbuffer"),Xt.refCount+=1}}function De($e,tt){tt&&(tt.texture?I.framebufferTexture2D(na,$e,tt.target,tt.texture._texture.texture,0):I.framebufferRenderbuffer(na,$e,tx,tt.renderbuffer._renderbuffer.renderbuffer))}function Qe($e){var tt=zs,Fe=null,nt=null,Ft=$e;typeof $e=="object"&&(Ft=$e.data,"target"in $e&&(tt=0|$e.target)),O.type(Ft,"function","invalid attachment data");var ft=Ft._reglType;return ft==="texture2d"?(Fe=Ft,O(tt===zs)):ft==="textureCube"?(Fe=Ft,O(tt>=Ig&&tt<Ig+6,"invalid cube map target")):ft==="renderbuffer"?(nt=Ft,tt=tx):O.raise("invalid regl object for attachment"),new Be(tt,Fe,nt)}function ae($e,tt,Fe,nt,Ft){if(Fe){var ft=pe.create2D({width:$e,height:tt,format:nt,type:Ft});return ft._texture.refCount=0,new Be(zs,ft,null)}var Xt=xe.create({width:$e,height:tt,format:nt});return Xt._renderbuffer.refCount=0,new Be(tx,null,Xt)}function be($e){return $e&&($e.texture||$e.renderbuffer)}function je($e,tt,Fe){$e&&($e.texture?$e.texture.resize(tt,Fe):$e.renderbuffer&&$e.renderbuffer.resize(tt,Fe),$e.width=tt,$e.height=Fe)}Y.oes_texture_half_float&&Re.push("half float","float16"),Y.oes_texture_float&&Re.push("float","float32");var rt=0,Ie={};function st(){this.id=rt++,Ie[this.id]=this,this.framebuffer=I.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Te($e){$e.colorAttachments.forEach(Xe),Xe($e.depthAttachment),Xe($e.stencilAttachment),Xe($e.depthStencilAttachment)}function Ke($e){var tt=$e.framebuffer;O(tt,"must not double destroy framebuffer"),I.deleteFramebuffer(tt),$e.framebuffer=null,ue.framebufferCount--,delete Ie[$e.id]}function Ae($e){var tt;I.bindFramebuffer(na,$e.framebuffer);var Fe=$e.colorAttachments;for(tt=0;tt<Fe.length;++tt)De(zD+tt,Fe[tt]);for(tt=Fe.length;tt<H.maxColorAttachments;++tt)I.framebufferTexture2D(na,zD+tt,zs,null,0);I.framebufferTexture2D(na,YD,zs,null,0),I.framebufferTexture2D(na,FD,zs,null,0),I.framebufferTexture2D(na,GD,zs,null,0),De(FD,$e.depthAttachment),De(GD,$e.stencilAttachment),De(YD,$e.depthStencilAttachment);var nt=I.checkFramebufferStatus(na);I.isContextLost()||nt===XD||O.raise("framebuffer configuration not supported, status = "+gc[nt]),I.bindFramebuffer(na,ye.next?ye.next.framebuffer:null),ye.cur=ye.next,I.getError()}function He($e,tt){var Fe=new st;function nt(ft,Xt){var jt;O(ye.next!==Fe,"can not update framebuffer which is currently in use");var Lt=0,Wt=0,Rn=!0,hr=!0,Hn=null,qt=!0,jn="rgba",zn="uint8",Gn=1,Yn=null,nr=null,dr=null,An=!1;if(typeof ft=="number")Lt=0|ft,Wt=0|Xt||Lt;else if(ft){O.type(ft,"object","invalid arguments for framebuffer");var Gt=ft;if("shape"in Gt){var fr=Gt.shape;O(Array.isArray(fr)&&fr.length>=2,"invalid shape for framebuffer"),Lt=fr[0],Wt=fr[1]}else"radius"in Gt&&(Lt=Wt=Gt.radius),"width"in Gt&&(Lt=Gt.width),"height"in Gt&&(Wt=Gt.height);("color"in Gt||"colors"in Gt)&&(Hn=Gt.color||Gt.colors,Array.isArray(Hn)&&O(Hn.length===1||Y.webgl_draw_buffers,"multiple render targets not supported")),Hn||("colorCount"in Gt&&(Gn=0|Gt.colorCount,O(Gn>0,"invalid color buffer count")),"colorTexture"in Gt&&(qt=!!Gt.colorTexture,jn="rgba4"),"colorType"in Gt&&(zn=Gt.colorType,qt?(O(Y.oes_texture_float||!(zn==="float"||zn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),O(Y.oes_texture_half_float||!(zn==="half float"||zn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):zn==="half float"||zn==="float16"?(O(Y.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),jn="rgba16f"):zn!=="float"&&zn!=="float32"||(O(Y.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),jn="rgba32f"),O.oneOf(zn,Re,"invalid color type")),"colorFormat"in Gt&&(jn=Gt.colorFormat,Le.indexOf(jn)>=0?qt=!0:ze.indexOf(jn)>=0?qt=!1:qt?O.oneOf(Gt.colorFormat,Le,"invalid color format for texture"):O.oneOf(Gt.colorFormat,ze,"invalid color format for renderbuffer"))),("depthTexture"in Gt||"depthStencilTexture"in Gt)&&(An=!(!Gt.depthTexture&&!Gt.depthStencilTexture),O(!An||Y.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Gt&&(typeof Gt.depth=="boolean"?Rn=Gt.depth:(Yn=Gt.depth,hr=!1)),"stencil"in Gt&&(typeof Gt.stencil=="boolean"?hr=Gt.stencil:(nr=Gt.stencil,Rn=!1)),"depthStencil"in Gt&&(typeof Gt.depthStencil=="boolean"?Rn=hr=Gt.depthStencil:(dr=Gt.depthStencil,Rn=!1,hr=!1))}else Lt=Wt=1;var un=null,kt=null,Vt=null,tn=null;if(Array.isArray(Hn))un=Hn.map(Qe);else if(Hn)un=[Qe(Hn)];else for(un=new Array(Gn),jt=0;jt<Gn;++jt)un[jt]=ae(Lt,Wt,qt,jn,zn);O(Y.webgl_draw_buffers||un.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),O(un.length<=H.maxColorAttachments,"too many color attachments, not supported"),Lt=Lt||un[0].width,Wt=Wt||un[0].height,Yn?kt=Qe(Yn):Rn&&!hr&&(kt=ae(Lt,Wt,An,"depth","uint32")),nr?Vt=Qe(nr):hr&&!Rn&&(Vt=ae(Lt,Wt,!1,"stencil","uint8")),dr?tn=Qe(dr):!Yn&&!nr&&hr&&Rn&&(tn=ae(Lt,Wt,An,"depth stencil","depth stencil")),O(!!Yn+!!nr+!!dr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var In=null;for(jt=0;jt<un.length;++jt)if(et(un[jt],Lt,Wt),O(!un[jt]||un[jt].texture&&cZ.indexOf(un[jt].texture._texture.format)>=0||un[jt].renderbuffer&&dZ.indexOf(un[jt].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+jt+" is invalid"),un[jt]&&un[jt].texture){var Co=nx[un[jt].texture._texture.format]*Tg[un[jt].texture._texture.type];In===null?In=Co:O(In===Co,"all color attachments much have the same number of bits per pixel.")}return et(kt,Lt,Wt),O(!kt||kt.texture&&kt.texture._texture.format===uZ||kt.renderbuffer&&kt.renderbuffer._renderbuffer.format===lZ,"invalid depth attachment for framebuffer object"),et(Vt,Lt,Wt),O(!Vt||Vt.renderbuffer&&Vt.renderbuffer._renderbuffer.format===hZ,"invalid stencil attachment for framebuffer object"),et(tn,Lt,Wt),O(!tn||tn.texture&&tn.texture._texture.format===VD||tn.renderbuffer&&tn.renderbuffer._renderbuffer.format===VD,"invalid depth-stencil attachment for framebuffer object"),Te(Fe),Fe.width=Lt,Fe.height=Wt,Fe.colorAttachments=un,Fe.depthAttachment=kt,Fe.stencilAttachment=Vt,Fe.depthStencilAttachment=tn,nt.color=un.map(be),nt.depth=be(kt),nt.stencil=be(Vt),nt.depthStencil=be(tn),nt.width=Fe.width,nt.height=Fe.height,Ae(Fe),nt}function Ft(ft,Xt){O(ye.next!==Fe,"can not resize a framebuffer which is currently in use");var jt=Math.max(0|ft,1),Lt=Math.max(0|Xt||jt,1);if(jt===Fe.width&&Lt===Fe.height)return nt;for(var Wt=Fe.colorAttachments,Rn=0;Rn<Wt.length;++Rn)je(Wt[Rn],jt,Lt);return je(Fe.depthAttachment,jt,Lt),je(Fe.stencilAttachment,jt,Lt),je(Fe.depthStencilAttachment,jt,Lt),Fe.width=nt.width=jt,Fe.height=nt.height=Lt,Ae(Fe),nt}return ue.framebufferCount++,nt($e,tt),n(nt,{resize:Ft,_reglType:"framebuffer",_framebuffer:Fe,destroy:function(){Ke(Fe),Te(Fe)},use:function(ft){ye.setFBO({framebuffer:nt},ft)}})}function xt($e){var tt=Array(6);function Fe(Ft){var ft;O(tt.indexOf(ye.next)<0,"can not update framebuffer which is currently in use");var Xt,jt={color:null},Lt=0,Wt=null,Rn="rgba",hr="uint8",Hn=1;if(typeof Ft=="number")Lt=0|Ft;else if(Ft){O.type(Ft,"object","invalid arguments for framebuffer");var qt=Ft;if("shape"in qt){var jn=qt.shape;O(Array.isArray(jn)&&jn.length>=2,"invalid shape for framebuffer"),O(jn[0]===jn[1],"cube framebuffer must be square"),Lt=jn[0]}else"radius"in qt&&(Lt=0|qt.radius),"width"in qt?(Lt=0|qt.width,"height"in qt&&O(qt.height===Lt,"must be square")):"height"in qt&&(Lt=0|qt.height);("color"in qt||"colors"in qt)&&(Wt=qt.color||qt.colors,Array.isArray(Wt)&&O(Wt.length===1||Y.webgl_draw_buffers,"multiple render targets not supported")),Wt||("colorCount"in qt&&(Hn=0|qt.colorCount,O(Hn>0,"invalid color buffer count")),"colorType"in qt&&(O.oneOf(qt.colorType,Re,"invalid color type"),hr=qt.colorType),"colorFormat"in qt&&(Rn=qt.colorFormat,O.oneOf(qt.colorFormat,Le,"invalid color format for texture"))),"depth"in qt&&(jt.depth=qt.depth),"stencil"in qt&&(jt.stencil=qt.stencil),"depthStencil"in qt&&(jt.depthStencil=qt.depthStencil)}else Lt=1;if(Wt)if(Array.isArray(Wt))for(Xt=[],ft=0;ft<Wt.length;++ft)Xt[ft]=Wt[ft];else Xt=[Wt];else{Xt=Array(Hn);var zn={radius:Lt,format:Rn,type:hr};for(ft=0;ft<Hn;++ft)Xt[ft]=pe.createCube(zn)}for(jt.color=Array(Xt.length),ft=0;ft<Xt.length;++ft){var Gn=Xt[ft];O(typeof Gn=="function"&&Gn._reglType==="textureCube","invalid cube map"),Lt=Lt||Gn.width,O(Gn.width===Lt&&Gn.height===Lt,"invalid cube map shape"),jt.color[ft]={target:Ig,data:Xt[ft]}}for(ft=0;ft<6;++ft){for(var Yn=0;Yn<Xt.length;++Yn)jt.color[Yn].target=Ig+ft;ft>0&&(jt.depth=tt[0].depth,jt.stencil=tt[0].stencil,jt.depthStencil=tt[0].depthStencil),tt[ft]?tt[ft](jt):tt[ft]=He(jt)}return n(Fe,{width:Lt,height:Lt,color:Xt})}function nt(Ft){var ft,Xt=0|Ft;if(O(Xt>0&&Xt<=H.maxCubeMapSize,"invalid radius for cube fbo"),Xt===Fe.width)return Fe;var jt=Fe.color;for(ft=0;ft<jt.length;++ft)jt[ft].resize(Xt);for(ft=0;ft<6;++ft)tt[ft].resize(Xt);return Fe.width=Fe.height=Xt,Fe}return Fe($e),n(Fe,{faces:tt,resize:nt,_reglType:"framebufferCube",destroy:function(){tt.forEach(function(Ft){Ft.destroy()})}})}function Rt(){ye.cur=null,ye.next=null,ye.dirty=!0,ri(Ie).forEach(function($e){$e.framebuffer=I.createFramebuffer(),Ae($e)})}return n(ye,{getFramebuffer:function($e){if(typeof $e=="function"&&$e._reglType==="framebuffer"){var tt=$e._framebuffer;if(tt instanceof st)return tt}return null},create:He,createCube:xt,clear:function(){ri(Ie).forEach(Ke)},restore:Rt})}gc[XD]="complete",gc[tZ]="incomplete attachment",gc[rZ]="incomplete dimensions",gc[nZ]="incomplete, missing attachment",gc[iZ]="unsupported";var pZ=5126,HD=34962;function rx(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=pZ,this.offset=0,this.stride=0,this.divisor=0}function gZ(I,Y,H,pe,xe){for(var ue=H.maxAttributes,ye=new Array(ue),Le=0;Le<ue;++Le)ye[Le]=new rx;var ze=0,Re={},Be={Record:rx,scope:{},state:ye,currentVAO:null,targetVAO:null,restore:et()?Ie:function(){},createVAO:st,getVAO:Qe,destroyBuffer:Xe,setVAO:et()?ae:be,clear:et()?je:function(){}};function Xe(Te){for(var Ke=0;Ke<ye.length;++Ke){var Ae=ye[Ke];Ae.buffer===Te&&(I.disableVertexAttribArray(Ke),Ae.buffer=null)}}function et(){return Y.oes_vertex_array_object}function De(){return Y.angle_instanced_arrays}function Qe(Te){return typeof Te=="function"&&Te._vao?Te._vao:null}function ae(Te){if(Te!==Be.currentVAO){var Ke=et();Te?Ke.bindVertexArrayOES(Te.vao):Ke.bindVertexArrayOES(null),Be.currentVAO=Te}}function be(Te){if(Te!==Be.currentVAO){if(Te)Te.bindAttrs();else for(var Ke=De(),Ae=0;Ae<ye.length;++Ae){var He=ye[Ae];He.buffer?(I.enableVertexAttribArray(Ae),I.vertexAttribPointer(Ae,He.size,He.type,He.normalized,He.stride,He.offfset),Ke&&He.divisor&&Ke.vertexAttribDivisorANGLE(Ae,He.divisor)):(I.disableVertexAttribArray(Ae),I.vertexAttrib4f(Ae,He.x,He.y,He.z,He.w))}Be.currentVAO=Te}}function je(){ri(Re).forEach(function(Te){Te.destroy()})}function rt(){this.id=++ze,this.attributes=[];var Te=et();this.vao=Te?Te.createVertexArrayOES():null,Re[this.id]=this,this.buffers=[]}function Ie(){et()&&ri(Re).forEach(function(Te){Te.refresh()})}function st(Te){var Ke=new rt;function Ae(He){O(Array.isArray(He),"arguments to vertex array constructor must be an array"),O(He.length<ue,"too many attributes"),O(He.length>0,"must specify at least one attribute");var xt={},Rt=Ke.attributes;Rt.length=He.length;for(var $e=0;$e<He.length;++$e){var tt,Fe=He[$e],nt=Rt[$e]=new rx,Ft=Fe.data||Fe;Array.isArray(Ft)||e(Ft)||Ri(Ft)?(Ke.buffers[$e]&&(tt=Ke.buffers[$e],e(Ft)&&tt._buffer.byteLength>=Ft.byteLength?tt.subdata(Ft):(tt.destroy(),Ke.buffers[$e]=null)),Ke.buffers[$e]||(tt=Ke.buffers[$e]=xe.create(Fe,HD,!1,!0)),nt.buffer=xe.getBuffer(tt),nt.size=0|nt.buffer.dimension,nt.normalized=!1,nt.type=nt.buffer.dtype,nt.offset=0,nt.stride=0,nt.divisor=0,nt.state=1,xt[$e]=1):xe.getBuffer(Fe)?(nt.buffer=xe.getBuffer(Fe),nt.size=0|nt.buffer.dimension,nt.normalized=!1,nt.type=nt.buffer.dtype,nt.offset=0,nt.stride=0,nt.divisor=0,nt.state=1):xe.getBuffer(Fe.buffer)?(nt.buffer=xe.getBuffer(Fe.buffer),nt.size=0|(+Fe.size||nt.buffer.dimension),nt.normalized=!!Fe.normalized||!1,"type"in Fe?(O.parameter(Fe.type,Ls,"invalid buffer type"),nt.type=Ls[Fe.type]):nt.type=nt.buffer.dtype,nt.offset=0|(Fe.offset||0),nt.stride=0|(Fe.stride||0),nt.divisor=0|(Fe.divisor||0),nt.state=1,O(nt.size>=1&&nt.size<=4,"size must be between 1 and 4"),O(nt.offset>=0,"invalid offset"),O(nt.stride>=0&&nt.stride<=255,"stride must be between 0 and 255"),O(nt.divisor>=0,"divisor must be positive"),O(!nt.divisor||!!Y.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Fe?(O($e>0,"first attribute must not be a constant"),nt.x=+Fe.x||0,nt.y=+Fe.y||0,nt.z=+Fe.z||0,nt.w=+Fe.w||0,nt.state=2):O(!1,"invalid attribute spec for location "+$e)}for(var ft=0;ft<Ke.buffers.length;++ft)!xt[ft]&&Ke.buffers[ft]&&(Ke.buffers[ft].destroy(),Ke.buffers[ft]=null);return Ke.refresh(),Ae}return pe.vaoCount+=1,Ae.destroy=function(){for(var He=0;He<Ke.buffers.length;++He)Ke.buffers[He]&&Ke.buffers[He].destroy();Ke.buffers.length=0,Ke.destroy()},Ae._vao=Ke,Ae._reglType="vao",Ae(Te)}return rt.prototype.bindAttrs=function(){for(var Te=De(),Ke=this.attributes,Ae=0;Ae<Ke.length;++Ae){var He=Ke[Ae];He.buffer?(I.enableVertexAttribArray(Ae),I.bindBuffer(HD,He.buffer.buffer),I.vertexAttribPointer(Ae,He.size,He.type,He.normalized,He.stride,He.offset),Te&&He.divisor&&Te.vertexAttribDivisorANGLE(Ae,He.divisor)):(I.disableVertexAttribArray(Ae),I.vertexAttrib4f(Ae,He.x,He.y,He.z,He.w))}for(var xt=Ke.length;xt<ue;++xt)I.disableVertexAttribArray(xt)},rt.prototype.refresh=function(){var Te=et();Te&&(Te.bindVertexArrayOES(this.vao),this.bindAttrs(),Be.currentVAO=this)},rt.prototype.destroy=function(){if(this.vao){var Te=et();this===Be.currentVAO&&(Be.currentVAO=null,Te.bindVertexArrayOES(null)),Te.deleteVertexArrayOES(this.vao),this.vao=null}Re[this.id]&&(delete Re[this.id],pe.vaoCount-=1)},Be}var qD=35632,vZ=35633,mZ=35718,yZ=35721;function bZ(I,Y,H,pe){var xe={},ue={};function ye(ae,be,je,rt){this.name=ae,this.id=be,this.location=je,this.info=rt}function Le(ae,be){for(var je=0;je<ae.length;++je)if(ae[je].id===be.id)return void(ae[je].location=be.location);ae.push(be)}function ze(ae,be,je){var rt=ae===qD?xe:ue,Ie=rt[be];if(!Ie){var st=Y.str(be);Ie=I.createShader(ae),I.shaderSource(Ie,st),I.compileShader(Ie),O.shaderError(I,Ie,st,ae,je),rt[be]=Ie}return Ie}var Re={},Be=[],Xe=0;function et(ae,be){this.id=Xe++,this.fragId=ae,this.vertId=be,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,pe.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function De(ae,be,je){var rt,Ie,st=ze(qD,ae.fragId),Te=ze(vZ,ae.vertId),Ke=ae.program=I.createProgram();if(I.attachShader(Ke,st),I.attachShader(Ke,Te),je)for(rt=0;rt<je.length;++rt){var Ae=je[rt];I.bindAttribLocation(Ke,Ae[0],Ae[1])}I.linkProgram(Ke),O.linkError(I,Ke,Y.str(ae.fragId),Y.str(ae.vertId),be);var He=I.getProgramParameter(Ke,mZ);pe.profile&&(ae.stats.uniformsCount=He);var xt=ae.uniforms;for(rt=0;rt<He;++rt)if(Ie=I.getActiveUniform(Ke,rt))if(Ie.size>1)for(var Rt=0;Rt<Ie.size;++Rt){var $e=Ie.name.replace("[0]","["+Rt+"]");Le(xt,new ye($e,Y.id($e),I.getUniformLocation(Ke,$e),Ie))}else Le(xt,new ye(Ie.name,Y.id(Ie.name),I.getUniformLocation(Ke,Ie.name),Ie));var tt=I.getProgramParameter(Ke,yZ);pe.profile&&(ae.stats.attributesCount=tt);var Fe=ae.attributes;for(rt=0;rt<tt;++rt)(Ie=I.getActiveAttrib(Ke,rt))&&Le(Fe,new ye(Ie.name,Y.id(Ie.name),I.getAttribLocation(Ke,Ie.name),Ie))}function Qe(){xe={},ue={};for(var ae=0;ae<Be.length;++ae)De(Be[ae],null,Be[ae].attributes.map(function(be){return[be.location,be.name]}))}return pe.profile&&(H.getMaxUniformsCount=function(){var ae=0;return Be.forEach(function(be){be.stats.uniformsCount>ae&&(ae=be.stats.uniformsCount)}),ae},H.getMaxAttributesCount=function(){var ae=0;return Be.forEach(function(be){be.stats.attributesCount>ae&&(ae=be.stats.attributesCount)}),ae}),{clear:function(){var ae=I.deleteShader.bind(I);ri(xe).forEach(ae),xe={},ri(ue).forEach(ae),ue={},Be.forEach(function(be){I.deleteProgram(be.program)}),Be.length=0,Re={},H.shaderCount=0},program:function(ae,be,je,rt){O.command(ae>=0,"missing vertex shader",je),O.command(be>=0,"missing fragment shader",je);var Ie=Re[be];Ie||(Ie=Re[be]={});var st=Ie[ae];if(st&&(st.refCount++,!rt))return st;var Te=new et(be,ae);return H.shaderCount++,De(Te,je,rt),st||(Ie[ae]=Te),Be.push(Te),n(Te,{destroy:function(){if(Te.refCount--,Te.refCount<=0){I.deleteProgram(Te.program);var Ke=Be.indexOf(Te);Be.splice(Ke,1),H.shaderCount--}Ie[Te.vertId].refCount<=0&&(I.deleteShader(ue[Te.vertId]),delete ue[Te.vertId],delete Re[Te.fragId][Te.vertId]),Object.keys(Re[Te.fragId]).length||(I.deleteShader(xe[Te.fragId]),delete xe[Te.fragId],delete Re[Te.fragId])}})},restore:Qe,shader:ze,frag:-1,vert:-1}}var xZ=6408,Eh=5121,wZ=3333,Og=5126;function EZ(I,Y,H,pe,xe,ue,ye){function Le(Be){var Xe;Y.next===null?(O(xe.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Xe=Eh):(O(Y.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Xe=Y.next.colorAttachments[0].texture._texture.type,ue.oes_texture_float?(O(Xe===Eh||Xe===Og,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Xe===Og&&O(ye.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):O(Xe===Eh,"Reading from a framebuffer is only allowed for the type 'uint8'"));var et=0,De=0,Qe=pe.framebufferWidth,ae=pe.framebufferHeight,be=null;e(Be)?be=Be:Be&&(O.type(Be,"object","invalid arguments to regl.read()"),et=0|Be.x,De=0|Be.y,O(et>=0&&et<pe.framebufferWidth,"invalid x offset for regl.read"),O(De>=0&&De<pe.framebufferHeight,"invalid y offset for regl.read"),Qe=0|(Be.width||pe.framebufferWidth-et),ae=0|(Be.height||pe.framebufferHeight-De),be=Be.data||null),be&&(Xe===Eh?O(be instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Xe===Og&&O(be instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),O(Qe>0&&Qe+et<=pe.framebufferWidth,"invalid width for read pixels"),O(ae>0&&ae+De<=pe.framebufferHeight,"invalid height for read pixels"),H();var je=Qe*ae*4;return be||(Xe===Eh?be=new Uint8Array(je):Xe===Og&&(be=be||new Float32Array(je))),O.isTypedArray(be,"data buffer for regl.read() must be a typedarray"),O(be.byteLength>=je,"data buffer for regl.read() too small"),I.pixelStorei(wZ,4),I.readPixels(et,De,Qe,ae,xZ,Xe,be),be}function ze(Be){var Xe;return Y.setFBO({framebuffer:Be.framebuffer},function(){Xe=Le(Be)}),Xe}function Re(Be){return Be&&"framebuffer"in Be?ze(Be):Le(Be)}return Re}function vc(I){return Array.prototype.slice.call(I)}function mc(I){return vc(I).join("")}function SZ(){var I=0,Y=[],H=[];function pe(Xe){for(var et=0;et<H.length;++et)if(H[et]===Xe)return Y[et];var De="g"+I++;return Y.push(De),H.push(Xe),De}function xe(){var Xe=[];function et(){Xe.push.apply(Xe,vc(arguments))}var De=[];function Qe(){var ae="v"+I++;return De.push(ae),arguments.length>0&&(Xe.push(ae,"="),Xe.push.apply(Xe,vc(arguments)),Xe.push(";")),ae}return n(et,{def:Qe,toString:function(){return mc([De.length>0?"var "+De.join(",")+";":"",mc(Xe)])}})}function ue(){var Xe=xe(),et=xe(),De=Xe.toString,Qe=et.toString;function ae(be,je){et(be,je,"=",Xe.def(be,je),";")}return n(function(){Xe.apply(Xe,vc(arguments))},{def:Xe.def,entry:Xe,exit:et,save:ae,set:function(be,je,rt){ae(be,je),Xe(be,je,"=",rt,";")},toString:function(){return De()+Qe()}})}function ye(){var Xe=mc(arguments),et=ue(),De=ue(),Qe=et.toString,ae=De.toString;return n(et,{then:function(){return et.apply(et,vc(arguments)),this},else:function(){return De.apply(De,vc(arguments)),this},toString:function(){var be=ae();return be&&(be="else{"+be+"}"),mc(["if(",Xe,"){",Qe(),"}",be])}})}var Le=xe(),ze={};function Re(Xe,et){var De=[];function Qe(){var rt="a"+De.length;return De.push(rt),rt}et=et||0;for(var ae=0;ae<et;++ae)Qe();var be=ue(),je=be.toString;return ze[Xe]=n(be,{arg:Qe,toString:function(){return mc(["function(",De.join(),"){",je(),"}"])}})}function Be(){var Xe=['"use strict";',Le,"return {"];Object.keys(ze).forEach(function(De){Xe.push('"',De,'":',ze[De].toString(),",")}),Xe.push("}");var et=mc(Xe).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,Y.concat(et)).apply(null,H)}return{global:Le,link:pe,block:xe,proc:Re,scope:ue,cond:ye,compile:Be}}var yc="xyzw".split(""),ZD=5121,bc=1,ix=2,ox=0,ax=1,sx=2,ux=3,Ng=4,KD=5,$D=6,QD="dither",JD="blend.enable",e3="blend.color",cx="blend.equation",lx="blend.func",t3="depth.enable",n3="depth.func",r3="depth.range",i3="depth.mask",hx="colorMask",o3="cull.enable",a3="cull.face",dx="frontFace",fx="lineWidth",s3="polygonOffset.enable",px="polygonOffset.offset",u3="sample.alpha",c3="sample.enable",gx="sample.coverage",l3="stencil.enable",h3="stencil.mask",vx="stencil.func",mx="stencil.opFront",Sh="stencil.opBack",d3="scissor.enable",Pg="scissor.box",ra="viewport",Mh="profile",Fs="framebuffer",_h="vert",kh="frag",Gs="elements",Ys="primitive",Xs="count",Dg="offset",Lg="instances",Ch="vao",yx="Width",bx="Height",xc=Fs+yx,wc=Fs+bx,MZ=ra+yx,_Z=ra+bx,f3="drawingBuffer",p3=f3+yx,g3=f3+bx,kZ=[lx,cx,vx,mx,Sh,gx,ra,Pg,px],Ec=34962,CZ=34963,v3=3553,AZ=34067,IZ=2884,TZ=3042,OZ=3024,NZ=2960,PZ=2929,DZ=3089,LZ=32823,BZ=32926,RZ=32928,xx=5126,Bg=35664,Rg=35665,jg=35666,wx=5124,zg=35667,Fg=35668,Gg=35669,Ex=35670,Yg=35671,Xg=35672,Ug=35673,Ah=35674,Ih=35675,Th=35676,Oh=35678,Nh=35680,m3=4,Ph=1028,Us=1029,y3=2304,Sx=2305,jZ=32775,zZ=32776,FZ=519,Wa=7680,b3=0,x3=1,w3=32774,GZ=513,E3=36160,YZ=36064,ko={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},S3=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Sc={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Va={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},M3={frag:35632,vert:35633},Mx={cw:y3,ccw:Sx};function Wg(I){return Array.isArray(I)||e(I)||Ri(I)}function _3(I){return I.sort(function(Y,H){return Y===ra?-1:H===ra?1:Y<H?-1:1})}function Tr(I,Y,H,pe){this.thisDep=I,this.contextDep=Y,this.propDep=H,this.append=pe}function Ha(I){return I&&!(I.thisDep||I.contextDep||I.propDep)}function Bn(I){return new Tr(!1,!1,!1,I)}function Hr(I,Y){var H=I.type;if(H===ox){var pe=I.data.length;return new Tr(!0,pe>=1,pe>=2,Y)}if(H===Ng){var xe=I.data;return new Tr(xe.thisDep,xe.contextDep,xe.propDep,Y)}if(H===KD)return new Tr(!1,!1,!1,Y);if(H===$D){for(var ue=!1,ye=!1,Le=!1,ze=0;ze<I.data.length;++ze){var Re=I.data[ze];if(Re.type===ax)Le=!0;else if(Re.type===sx)ye=!0;else if(Re.type===ux)ue=!0;else if(Re.type===ox){ue=!0;var Be=Re.data;Be>=1&&(ye=!0),Be>=2&&(Le=!0)}else Re.type===Ng&&(ue=ue||Re.data.thisDep,ye=ye||Re.data.contextDep,Le=Le||Re.data.propDep)}return new Tr(ue,ye,Le,Y)}return new Tr(H===ux,H===sx,H===ax,Y)}var k3=new Tr(!1,!1,!1,function(){});function XZ(I,Y,H,pe,xe,ue,ye,Le,ze,Re,Be,Xe,et,De,Qe){var ae=Re.Record,be={add:32774,subtract:32778,"reverse subtract":32779};H.ext_blend_minmax&&(be.min=jZ,be.max=zZ);var je=H.angle_instanced_arrays,rt=H.webgl_draw_buffers,Ie={dirty:!0,profile:Qe.profile},st={},Te=[],Ke={},Ae={};function He(X){return X.replace(".","_")}function xt(X,j,$){var te=He(X);Te.push(X),st[te]=Ie[te]=!!$,Ke[te]=j}function Rt(X,j,$){var te=He(X);Te.push(X),Array.isArray($)?(Ie[te]=$.slice(),st[te]=$.slice()):Ie[te]=st[te]=$,Ae[te]=j}xt(QD,OZ),xt(JD,TZ),Rt(e3,"blendColor",[0,0,0,0]),Rt(cx,"blendEquationSeparate",[w3,w3]),Rt(lx,"blendFuncSeparate",[x3,b3,x3,b3]),xt(t3,PZ,!0),Rt(n3,"depthFunc",GZ),Rt(r3,"depthRange",[0,1]),Rt(i3,"depthMask",!0),Rt(hx,hx,[!0,!0,!0,!0]),xt(o3,IZ),Rt(a3,"cullFace",Us),Rt(dx,dx,Sx),Rt(fx,fx,1),xt(s3,LZ),Rt(px,"polygonOffset",[0,0]),xt(u3,BZ),xt(c3,RZ),Rt(gx,"sampleCoverage",[1,!1]),xt(l3,NZ),Rt(h3,"stencilMask",-1),Rt(vx,"stencilFunc",[FZ,0,-1]),Rt(mx,"stencilOpSeparate",[Ph,Wa,Wa,Wa]),Rt(Sh,"stencilOpSeparate",[Us,Wa,Wa,Wa]),xt(d3,DZ),Rt(Pg,"scissor",[0,0,I.drawingBufferWidth,I.drawingBufferHeight]),Rt(ra,ra,[0,0,I.drawingBufferWidth,I.drawingBufferHeight]);var $e={gl:I,context:et,strings:Y,next:st,current:Ie,draw:Xe,elements:ue,buffer:xe,shader:Be,attributes:Re.state,vao:Re,uniforms:ze,framebuffer:Le,extensions:H,timer:De,isBufferArgs:Wg},tt={primTypes:uc,compareFuncs:Sc,blendFuncs:ko,blendEquations:be,stencilOps:Va,glTypes:Ls,orientationType:Mx};O.optional(function(){$e.isArrayLike=Vn}),rt&&(tt.backBuffer=[Us],tt.drawBuffer=zt(pe.maxDrawbuffers,function(X){return X===0?[0]:zt(X,function(j){return YZ+j})}));var Fe=0;function nt(){var X=SZ(),j=X.link,$=X.global;X.id=Fe++,X.batchId="0";var te=j($e),ce=X.shared={props:"a0"};Object.keys($e).forEach(function(V){ce[V]=$.def(te,".",V)}),O.optional(function(){X.CHECK=j(O),X.commandStr=O.guessCommand(),X.command=j(X.commandStr),X.assert=function(V,U,le){V("if(!(",U,"))",this.CHECK,".commandRaise(",j(le),",",this.command,");")},tt.invalidBlendCombinations=S3});var K=X.next={},ee=X.current={};Object.keys(Ae).forEach(function(V){Array.isArray(Ie[V])&&(K[V]=$.def(ce.next,".",V),ee[V]=$.def(ce.current,".",V))});var se=X.constants={};Object.keys(tt).forEach(function(V){se[V]=$.def(JSON.stringify(tt[V]))}),X.invoke=function(V,U){switch(U.type){case ox:var le=["this",ce.context,ce.props,X.batchId];return V.def(j(U.data),".call(",le.slice(0,Math.max(U.data.length+1,4)),")");case ax:return V.def(ce.props,U.data);case sx:return V.def(ce.context,U.data);case ux:return V.def("this",U.data);case Ng:return U.data.append(X,V),U.data.ref;case KD:return U.data.toString();case $D:return U.data.map(function(oe){return X.invoke(V,oe)})}},X.attribCache={};var G={};return X.scopeAttrib=function(V){var U=Y.id(V);if(U in G)return G[U];var le=Re.scope[U];return le||(le=Re.scope[U]=new ae),G[U]=j(le)},X}function Ft(X){var j,$=X.static,te=X.dynamic;if(Mh in $){var ce=!!$[Mh];(j=Bn(function(ee,se){return ce})).enable=ce}else if(Mh in te){var K=te[Mh];j=Hr(K,function(ee,se){return ee.invoke(se,K)})}return j}function ft(X,j){var $=X.static,te=X.dynamic;if(Fs in $){var ce=$[Fs];return ce?(ce=Le.getFramebuffer(ce),O.command(ce,"invalid framebuffer object"),Bn(function(ee,se){var G=ee.link(ce),V=ee.shared;se.set(V.framebuffer,".next",G);var U=V.context;return se.set(U,"."+xc,G+".width"),se.set(U,"."+wc,G+".height"),G})):Bn(function(ee,se){var G=ee.shared;se.set(G.framebuffer,".next","null");var V=G.context;return se.set(V,"."+xc,V+"."+p3),se.set(V,"."+wc,V+"."+g3),"null"})}if(Fs in te){var K=te[Fs];return Hr(K,function(ee,se){var G=ee.invoke(se,K),V=ee.shared,U=V.framebuffer,le=se.def(U,".getFramebuffer(",G,")");O.optional(function(){ee.assert(se,"!"+G+"||"+le,"invalid framebuffer object")}),se.set(U,".next",le);var oe=V.context;return se.set(oe,"."+xc,le+"?"+le+".width:"+oe+"."+p3),se.set(oe,"."+wc,le+"?"+le+".height:"+oe+"."+g3),le})}return null}function Xt(X,j,$){var te=X.static,ce=X.dynamic;function K(G){if(G in te){var V=te[G];O.commandType(V,"object","invalid "+G,$.commandStr);var U,le,oe=!0,ve=0|V.x,we=0|V.y;return"width"in V?(U=0|V.width,O.command(U>=0,"invalid "+G,$.commandStr)):oe=!1,"height"in V?(le=0|V.height,O.command(le>=0,"invalid "+G,$.commandStr)):oe=!1,new Tr(!oe&&j&&j.thisDep,!oe&&j&&j.contextDep,!oe&&j&&j.propDep,function(mt,Nt){var dt=mt.shared.context,Dt=U;"width"in V||(Dt=Nt.def(dt,".",xc,"-",ve));var Yt=le;return"height"in V||(Yt=Nt.def(dt,".",wc,"-",we)),[ve,we,Dt,Yt]})}if(G in ce){var Ce=ce[G],gt=Hr(Ce,function(mt,Nt){var dt=mt.invoke(Nt,Ce);O.optional(function(){mt.assert(Nt,dt+"&&typeof "+dt+'==="object"',"invalid "+G)});var Dt=mt.shared.context,Yt=Nt.def(dt,".x|0"),on=Nt.def(dt,".y|0"),ln=Nt.def('"width" in ',dt,"?",dt,".width|0:","(",Dt,".",xc,"-",Yt,")"),Mc=Nt.def('"height" in ',dt,"?",dt,".height|0:","(",Dt,".",wc,"-",on,")");return O.optional(function(){mt.assert(Nt,ln+">=0&&"+Mc+">=0","invalid "+G)}),[Yt,on,ln,Mc]});return j&&(gt.thisDep=gt.thisDep||j.thisDep,gt.contextDep=gt.contextDep||j.contextDep,gt.propDep=gt.propDep||j.propDep),gt}return j?new Tr(j.thisDep,j.contextDep,j.propDep,function(mt,Nt){var dt=mt.shared.context;return[0,0,Nt.def(dt,".",xc),Nt.def(dt,".",wc)]}):null}var ee=K(ra);if(ee){var se=ee;ee=new Tr(ee.thisDep,ee.contextDep,ee.propDep,function(G,V){var U=se.append(G,V),le=G.shared.context;return V.set(le,"."+MZ,U[2]),V.set(le,"."+_Z,U[3]),U})}return{viewport:ee,scissor_box:K(Pg)}}function jt(X,j){var $=X.static;if(typeof $[kh]=="string"&&typeof $[_h]=="string"){if(Object.keys(j.dynamic).length>0)return null;var te=j.static,ce=Object.keys(te);if(ce.length>0&&typeof te[ce[0]]=="number"){for(var K=[],ee=0;ee<ce.length;++ee)O(typeof te[ce[ee]]=="number","must specify all vertex attribute locations when using vaos"),K.push([0|te[ce[ee]],ce[ee]]);return K}}return null}function Lt(X,j,$){var te=X.static,ce=X.dynamic;function K(U){if(U in te){var le=Y.id(te[U]);O.optional(function(){Be.shader(M3[U],le,O.guessCommand())});var oe=Bn(function(){return le});return oe.id=le,oe}if(U in ce){var ve=ce[U];return Hr(ve,function(we,Ce){var gt=we.invoke(Ce,ve),mt=Ce.def(we.shared.strings,".id(",gt,")");return O.optional(function(){Ce(we.shared.shader,".shader(",M3[U],",",mt,",",we.command,");")}),mt})}return null}var ee,se=K(kh),G=K(_h),V=null;return Ha(se)&&Ha(G)?(V=Be.program(G.id,se.id,null,$),ee=Bn(function(U,le){return U.link(V)})):ee=new Tr(se&&se.thisDep||G&&G.thisDep,se&&se.contextDep||G&&G.contextDep,se&&se.propDep||G&&G.propDep,function(U,le){var oe,ve=U.shared.shader;oe=se?se.append(U,le):le.def(ve,".",kh);var we=ve+".program("+(G?G.append(U,le):le.def(ve,".",_h))+","+oe;return O.optional(function(){we+=","+U.command}),le.def(we+")")}),{frag:se,vert:G,progVar:ee,program:V}}function Wt(X,j){var $=X.static,te=X.dynamic;function ce(){if(Gs in $){var U=$[Gs];Wg(U)?U=ue.getElements(ue.create(U,!0)):U&&(U=ue.getElements(U),O.command(U,"invalid elements",j.commandStr));var le=Bn(function(ve,we){if(U){var Ce=ve.link(U);return ve.ELEMENTS=Ce,Ce}return ve.ELEMENTS=null,null});return le.value=U,le}if(Gs in te){var oe=te[Gs];return Hr(oe,function(ve,we){var Ce=ve.shared,gt=Ce.isBufferArgs,mt=Ce.elements,Nt=ve.invoke(we,oe),dt=we.def("null"),Dt=we.def(gt,"(",Nt,")"),Yt=ve.cond(Dt).then(dt,"=",mt,".createStream(",Nt,");").else(dt,"=",mt,".getElements(",Nt,");");return O.optional(function(){ve.assert(Yt.else,"!"+Nt+"||"+dt,"invalid elements")}),we.entry(Yt),we.exit(ve.cond(Dt).then(mt,".destroyStream(",dt,");")),ve.ELEMENTS=dt,dt})}return null}var K=ce();function ee(){if(Ys in $){var U=$[Ys];return O.commandParameter(U,uc,"invalid primitve",j.commandStr),Bn(function(oe,ve){return uc[U]})}if(Ys in te){var le=te[Ys];return Hr(le,function(oe,ve){var we=oe.constants.primTypes,Ce=oe.invoke(ve,le);return O.optional(function(){oe.assert(ve,Ce+" in "+we,"invalid primitive, must be one of "+Object.keys(uc))}),ve.def(we,"[",Ce,"]")})}return K?Ha(K)?K.value?Bn(function(oe,ve){return ve.def(oe.ELEMENTS,".primType")}):Bn(function(){return m3}):new Tr(K.thisDep,K.contextDep,K.propDep,function(oe,ve){var we=oe.ELEMENTS;return ve.def(we,"?",we,".primType:",m3)}):null}function se(U,le){if(U in $){var oe=0|$[U];return O.command(!le||oe>=0,"invalid "+U,j.commandStr),Bn(function(we,Ce){return le&&(we.OFFSET=oe),oe})}if(U in te){var ve=te[U];return Hr(ve,function(we,Ce){var gt=we.invoke(Ce,ve);return le&&(we.OFFSET=gt,O.optional(function(){we.assert(Ce,gt+">=0","invalid "+U)})),gt})}return le&&K?Bn(function(we,Ce){return we.OFFSET="0",0}):null}var G=se(Dg,!0);function V(){if(Xs in $){var U=0|$[Xs];return O.command(typeof U=="number"&&U>=0,"invalid vertex count",j.commandStr),Bn(function(){return U})}if(Xs in te){var le=te[Xs];return Hr(le,function(we,Ce){var gt=we.invoke(Ce,le);return O.optional(function(){we.assert(Ce,"typeof "+gt+'==="number"&&'+gt+">=0&&"+gt+"===("+gt+"|0)","invalid vertex count")}),gt})}if(K){if(Ha(K)){if(K)return G?new Tr(G.thisDep,G.contextDep,G.propDep,function(we,Ce){var gt=Ce.def(we.ELEMENTS,".vertCount-",we.OFFSET);return O.optional(function(){we.assert(Ce,gt+">=0","invalid vertex offset/element buffer too small")}),gt}):Bn(function(we,Ce){return Ce.def(we.ELEMENTS,".vertCount")});var oe=Bn(function(){return-1});return O.optional(function(){oe.MISSING=!0}),oe}var ve=new Tr(K.thisDep||G.thisDep,K.contextDep||G.contextDep,K.propDep||G.propDep,function(we,Ce){var gt=we.ELEMENTS;return we.OFFSET?Ce.def(gt,"?",gt,".vertCount-",we.OFFSET,":-1"):Ce.def(gt,"?",gt,".vertCount:-1")});return O.optional(function(){ve.DYNAMIC=!0}),ve}return null}return{elements:K,primitive:ee(),count:V(),instances:se(Lg,!1),offset:G}}function Rn(X,j){var $=X.static,te=X.dynamic,ce={};return Te.forEach(function(K){var ee=He(K);function se(G,V){if(K in $){var U=G($[K]);ce[ee]=Bn(function(){return U})}else if(K in te){var le=te[K];ce[ee]=Hr(le,function(oe,ve){return V(oe,ve,oe.invoke(ve,le))})}}switch(K){case o3:case JD:case QD:case l3:case t3:case d3:case s3:case u3:case c3:case i3:return se(function(G){return O.commandType(G,"boolean",K,j.commandStr),G},function(G,V,U){return O.optional(function(){G.assert(V,"typeof "+U+'==="boolean"',"invalid flag "+K,G.commandStr)}),U});case n3:return se(function(G){return O.commandParameter(G,Sc,"invalid "+K,j.commandStr),Sc[G]},function(G,V,U){var le=G.constants.compareFuncs;return O.optional(function(){G.assert(V,U+" in "+le,"invalid "+K+", must be one of "+Object.keys(Sc))}),V.def(le,"[",U,"]")});case r3:return se(function(G){return O.command(Vn(G)&&G.length===2&&typeof G[0]=="number"&&typeof G[1]=="number"&&G[0]<=G[1],"depth range is 2d array",j.commandStr),G},function(G,V,U){return O.optional(function(){G.assert(V,G.shared.isArrayLike+"("+U+")&&"+U+".length===2&&typeof "+U+'[0]==="number"&&typeof '+U+'[1]==="number"&&'+U+"[0]<="+U+"[1]","depth range must be a 2d array")}),[V.def("+",U,"[0]"),V.def("+",U,"[1]")]});case lx:return se(function(G){O.commandType(G,"object","blend.func",j.commandStr);var V="srcRGB"in G?G.srcRGB:G.src,U="srcAlpha"in G?G.srcAlpha:G.src,le="dstRGB"in G?G.dstRGB:G.dst,oe="dstAlpha"in G?G.dstAlpha:G.dst;return O.commandParameter(V,ko,ee+".srcRGB",j.commandStr),O.commandParameter(U,ko,ee+".srcAlpha",j.commandStr),O.commandParameter(le,ko,ee+".dstRGB",j.commandStr),O.commandParameter(oe,ko,ee+".dstAlpha",j.commandStr),O.command(S3.indexOf(V+", "+le)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+V+", "+le+")",j.commandStr),[ko[V],ko[le],ko[U],ko[oe]]},function(G,V,U){var le=G.constants.blendFuncs;function oe(mt,Nt){var dt=V.def('"',mt,Nt,'" in ',U,"?",U,".",mt,Nt,":",U,".",mt);return O.optional(function(){G.assert(V,dt+" in "+le,"invalid "+K+"."+mt+Nt+", must be one of "+Object.keys(ko))}),dt}O.optional(function(){G.assert(V,U+"&&typeof "+U+'==="object"',"invalid blend func, must be an object")});var ve=oe("src","RGB"),we=oe("dst","RGB");O.optional(function(){var mt=G.constants.invalidBlendCombinations;G.assert(V,mt+".indexOf("+ve+'+", "+'+we+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ce=V.def(le,"[",ve,"]"),gt=V.def(le,"[",oe("src","Alpha"),"]");return[Ce,V.def(le,"[",we,"]"),gt,V.def(le,"[",oe("dst","Alpha"),"]")]});case cx:return se(function(G){return typeof G=="string"?(O.commandParameter(G,be,"invalid "+K,j.commandStr),[be[G],be[G]]):typeof G=="object"?(O.commandParameter(G.rgb,be,K+".rgb",j.commandStr),O.commandParameter(G.alpha,be,K+".alpha",j.commandStr),[be[G.rgb],be[G.alpha]]):void O.commandRaise("invalid blend.equation",j.commandStr)},function(G,V,U){var le=G.constants.blendEquations,oe=V.def(),ve=V.def(),we=G.cond("typeof ",U,'==="string"');return O.optional(function(){function Ce(gt,mt,Nt){G.assert(gt,Nt+" in "+le,"invalid "+mt+", must be one of "+Object.keys(be))}Ce(we.then,K,U),G.assert(we.else,U+"&&typeof "+U+'==="object"',"invalid "+K),Ce(we.else,K+".rgb",U+".rgb"),Ce(we.else,K+".alpha",U+".alpha")}),we.then(oe,"=",ve,"=",le,"[",U,"];"),we.else(oe,"=",le,"[",U,".rgb];",ve,"=",le,"[",U,".alpha];"),V(we),[oe,ve]});case e3:return se(function(G){return O.command(Vn(G)&&G.length===4,"blend.color must be a 4d array",j.commandStr),zt(4,function(V){return+G[V]})},function(G,V,U){return O.optional(function(){G.assert(V,G.shared.isArrayLike+"("+U+")&&"+U+".length===4","blend.color must be a 4d array")}),zt(4,function(le){return V.def("+",U,"[",le,"]")})});case h3:return se(function(G){return O.commandType(G,"number",ee,j.commandStr),0|G},function(G,V,U){return O.optional(function(){G.assert(V,"typeof "+U+'==="number"',"invalid stencil.mask")}),V.def(U,"|0")});case vx:return se(function(G){O.commandType(G,"object",ee,j.commandStr);var V=G.cmp||"keep",U=G.ref||0,le="mask"in G?G.mask:-1;return O.commandParameter(V,Sc,K+".cmp",j.commandStr),O.commandType(U,"number",K+".ref",j.commandStr),O.commandType(le,"number",K+".mask",j.commandStr),[Sc[V],U,le]},function(G,V,U){var le=G.constants.compareFuncs;return O.optional(function(){function oe(){G.assert(V,Array.prototype.join.call(arguments,""),"invalid stencil.func")}oe(U+"&&typeof ",U,'==="object"'),oe('!("cmp" in ',U,")||(",U,".cmp in ",le,")")}),[V.def('"cmp" in ',U,"?",le,"[",U,".cmp]",":",Wa),V.def(U,".ref|0"),V.def('"mask" in ',U,"?",U,".mask|0:-1")]});case mx:case Sh:return se(function(G){O.commandType(G,"object",ee,j.commandStr);var V=G.fail||"keep",U=G.zfail||"keep",le=G.zpass||"keep";return O.commandParameter(V,Va,K+".fail",j.commandStr),O.commandParameter(U,Va,K+".zfail",j.commandStr),O.commandParameter(le,Va,K+".zpass",j.commandStr),[K===Sh?Us:Ph,Va[V],Va[U],Va[le]]},function(G,V,U){var le=G.constants.stencilOps;function oe(ve){return O.optional(function(){G.assert(V,'!("'+ve+'" in '+U+")||("+U+"."+ve+" in "+le+")","invalid "+K+"."+ve+", must be one of "+Object.keys(Va))}),V.def('"',ve,'" in ',U,"?",le,"[",U,".",ve,"]:",Wa)}return O.optional(function(){G.assert(V,U+"&&typeof "+U+'==="object"',"invalid "+K)}),[K===Sh?Us:Ph,oe("fail"),oe("zfail"),oe("zpass")]});case px:return se(function(G){O.commandType(G,"object",ee,j.commandStr);var V=0|G.factor,U=0|G.units;return O.commandType(V,"number",ee+".factor",j.commandStr),O.commandType(U,"number",ee+".units",j.commandStr),[V,U]},function(G,V,U){return O.optional(function(){G.assert(V,U+"&&typeof "+U+'==="object"',"invalid "+K)}),[V.def(U,".factor|0"),V.def(U,".units|0")]});case a3:return se(function(G){var V=0;return G==="front"?V=Ph:G==="back"&&(V=Us),O.command(!!V,ee,j.commandStr),V},function(G,V,U){return O.optional(function(){G.assert(V,U+'==="front"||'+U+'==="back"',"invalid cull.face")}),V.def(U,'==="front"?',Ph,":",Us)});case fx:return se(function(G){return O.command(typeof G=="number"&&G>=pe.lineWidthDims[0]&&G<=pe.lineWidthDims[1],"invalid line width, must be a positive number between "+pe.lineWidthDims[0]+" and "+pe.lineWidthDims[1],j.commandStr),G},function(G,V,U){return O.optional(function(){G.assert(V,"typeof "+U+'==="number"&&'+U+">="+pe.lineWidthDims[0]+"&&"+U+"<="+pe.lineWidthDims[1],"invalid line width")}),U});case dx:return se(function(G){return O.commandParameter(G,Mx,ee,j.commandStr),Mx[G]},function(G,V,U){return O.optional(function(){G.assert(V,U+'==="cw"||'+U+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),V.def(U+'==="cw"?'+y3+":"+Sx)});case hx:return se(function(G){return O.command(Vn(G)&&G.length===4,"color.mask must be length 4 array",j.commandStr),G.map(function(V){return!!V})},function(G,V,U){return O.optional(function(){G.assert(V,G.shared.isArrayLike+"("+U+")&&"+U+".length===4","invalid color.mask")}),zt(4,function(le){return"!!"+U+"["+le+"]"})});case gx:return se(function(G){O.command(typeof G=="object"&&G,ee,j.commandStr);var V="value"in G?G.value:1,U=!!G.invert;return O.command(typeof V=="number"&&V>=0&&V<=1,"sample.coverage.value must be a number between 0 and 1",j.commandStr),[V,U]},function(G,V,U){return O.optional(function(){G.assert(V,U+"&&typeof "+U+'==="object"',"invalid sample.coverage")}),[V.def('"value" in ',U,"?+",U,".value:1"),V.def("!!",U,".invert")]})}}),ce}function hr(X,j){var $=X.static,te=X.dynamic,ce={};return Object.keys($).forEach(function(K){var ee,se=$[K];if(typeof se=="number"||typeof se=="boolean")ee=Bn(function(){return se});else if(typeof se=="function"){var G=se._reglType;G==="texture2d"||G==="textureCube"?ee=Bn(function(V){return V.link(se)}):G==="framebuffer"||G==="framebufferCube"?(O.command(se.color.length>0,'missing color attachment for framebuffer sent to uniform "'+K+'"',j.commandStr),ee=Bn(function(V){return V.link(se.color[0])})):O.commandRaise('invalid data for uniform "'+K+'"',j.commandStr)}else Vn(se)?ee=Bn(function(V){var U=V.global.def("[",zt(se.length,function(le){return O.command(typeof se[le]=="number"||typeof se[le]=="boolean","invalid uniform "+K,V.commandStr),se[le]}),"]");return U}):O.commandRaise('invalid or missing data for uniform "'+K+'"',j.commandStr);ee.value=se,ce[K]=ee}),Object.keys(te).forEach(function(K){var ee=te[K];ce[K]=Hr(ee,function(se,G){return se.invoke(G,ee)})}),ce}function Hn(X,j){var $=X.static,te=X.dynamic,ce={};return Object.keys($).forEach(function(K){var ee=$[K],se=Y.id(K),G=new ae;if(Wg(ee))G.state=bc,G.buffer=xe.getBuffer(xe.create(ee,Ec,!1,!0)),G.type=0;else{var V=xe.getBuffer(ee);if(V)G.state=bc,G.buffer=V,G.type=0;else if(O.command(typeof ee=="object"&&ee,"invalid data for attribute "+K,j.commandStr),"constant"in ee){var U=ee.constant;G.buffer="null",G.state=ix,typeof U=="number"?G.x=U:(O.command(Vn(U)&&U.length>0&&U.length<=4,"invalid constant for attribute "+K,j.commandStr),yc.forEach(function(mt,Nt){Nt<U.length&&(G[mt]=U[Nt])}))}else{V=Wg(ee.buffer)?xe.getBuffer(xe.create(ee.buffer,Ec,!1,!0)):xe.getBuffer(ee.buffer),O.command(!!V,'missing buffer for attribute "'+K+'"',j.commandStr);var le=0|ee.offset;O.command(le>=0,'invalid offset for attribute "'+K+'"',j.commandStr);var oe=0|ee.stride;O.command(oe>=0&&oe<256,'invalid stride for attribute "'+K+'", must be integer betweeen [0, 255]',j.commandStr);var ve=0|ee.size;O.command(!("size"in ee)||ve>0&&ve<=4,'invalid size for attribute "'+K+'", must be 1,2,3,4',j.commandStr);var we=!!ee.normalized,Ce=0;"type"in ee&&(O.commandParameter(ee.type,Ls,"invalid type for attribute "+K,j.commandStr),Ce=Ls[ee.type]);var gt=0|ee.divisor;"divisor"in ee&&(O.command(gt===0||je,'cannot specify divisor for attribute "'+K+'", instancing not supported',j.commandStr),O.command(gt>=0,'invalid divisor for attribute "'+K+'"',j.commandStr)),O.optional(function(){var mt=j.commandStr,Nt=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ee).forEach(function(dt){O.command(Nt.indexOf(dt)>=0,'unknown parameter "'+dt+'" for attribute pointer "'+K+'" (valid parameters are '+Nt+")",mt)})}),G.buffer=V,G.state=bc,G.size=ve,G.normalized=we,G.type=Ce||V.dtype,G.offset=le,G.stride=oe,G.divisor=gt}}ce[K]=Bn(function(mt,Nt){var dt=mt.attribCache;if(se in dt)return dt[se];var Dt={isStream:!1};return Object.keys(G).forEach(function(Yt){Dt[Yt]=G[Yt]}),G.buffer&&(Dt.buffer=mt.link(G.buffer),Dt.type=Dt.type||Dt.buffer+".dtype"),dt[se]=Dt,Dt})}),Object.keys(te).forEach(function(K){var ee=te[K];function se(G,V){var U=G.invoke(V,ee),le=G.shared,oe=G.constants,ve=le.isBufferArgs,we=le.buffer;O.optional(function(){G.assert(V,U+"&&(typeof "+U+'==="object"||typeof '+U+'==="function")&&('+ve+"("+U+")||"+we+".getBuffer("+U+")||"+we+".getBuffer("+U+".buffer)||"+ve+"("+U+'.buffer)||("constant" in '+U+"&&(typeof "+U+'.constant==="number"||'+le.isArrayLike+"("+U+".constant))))",'invalid dynamic attribute "'+K+'"')});var Ce={isStream:V.def(!1)},gt=new ae;gt.state=bc,Object.keys(gt).forEach(function(Dt){Ce[Dt]=V.def(""+gt[Dt])});var mt=Ce.buffer,Nt=Ce.type;function dt(Dt){V(Ce[Dt],"=",U,".",Dt,"|0;")}return V("if(",ve,"(",U,")){",Ce.isStream,"=true;",mt,"=",we,".createStream(",Ec,",",U,");",Nt,"=",mt,".dtype;","}else{",mt,"=",we,".getBuffer(",U,");","if(",mt,"){",Nt,"=",mt,".dtype;",'}else if("constant" in ',U,"){",Ce.state,"=",ix,";","if(typeof "+U+'.constant === "number"){',Ce[yc[0]],"=",U,".constant;",yc.slice(1).map(function(Dt){return Ce[Dt]}).join("="),"=0;","}else{",yc.map(function(Dt,Yt){return Ce[Dt]+"="+U+".constant.length>"+Yt+"?"+U+".constant["+Yt+"]:0;"}).join(""),"}}else{","if(",ve,"(",U,".buffer)){",mt,"=",we,".createStream(",Ec,",",U,".buffer);","}else{",mt,"=",we,".getBuffer(",U,".buffer);","}",Nt,'="type" in ',U,"?",oe.glTypes,"[",U,".type]:",mt,".dtype;",Ce.normalized,"=!!",U,".normalized;"),dt("size"),dt("offset"),dt("stride"),dt("divisor"),V("}}"),V.exit("if(",Ce.isStream,"){",we,".destroyStream(",mt,");","}"),Ce}ce[K]=Hr(ee,se)}),ce}function qt(X,j){var $=X.static,te=X.dynamic;if(Ch in $){var ce=$[Ch];return ce!==null&&Re.getVAO(ce)===null&&(ce=Re.createVAO(ce)),Bn(function(ee){return ee.link(Re.getVAO(ce))})}if(Ch in te){var K=te[Ch];return Hr(K,function(ee,se){var G=ee.invoke(se,K);return se.def(ee.shared.vao+".getVAO("+G+")")})}return null}function jn(X){var j=X.static,$=X.dynamic,te={};return Object.keys(j).forEach(function(ce){var K=j[ce];te[ce]=Bn(function(ee,se){return typeof K=="number"||typeof K=="boolean"?""+K:ee.link(K)})}),Object.keys($).forEach(function(ce){var K=$[ce];te[ce]=Hr(K,function(ee,se){return ee.invoke(se,K)})}),te}function zn(X,j,$,te,ce){var K=X.static,ee=X.dynamic;O.optional(function(){var dt=[Fs,_h,kh,Gs,Ys,Dg,Xs,Lg,Mh,Ch].concat(Te);function Dt(Yt){Object.keys(Yt).forEach(function(on){O.command(dt.indexOf(on)>=0,'unknown parameter "'+on+'"',ce.commandStr)})}Dt(K),Dt(ee)});var se=jt(X,j),G=ft(X),V=Xt(X,G,ce),U=Wt(X,ce),le=Rn(X,ce),oe=Lt(X,ce,se);function ve(dt){var Dt=V[dt];Dt&&(le[dt]=Dt)}ve(ra),ve(He(Pg));var we=Object.keys(le).length>0,Ce={framebuffer:G,draw:U,shader:oe,state:le,dirty:we,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ce.profile=Ft(X),Ce.uniforms=hr($,ce),Ce.drawVAO=Ce.scopeVAO=qt(X),!Ce.drawVAO&&oe.program&&!se&&H.angle_instanced_arrays){var gt=!0,mt=oe.program.attributes.map(function(dt){var Dt=j.static[dt];return gt=gt&&!!Dt,Dt});if(gt&&mt.length>0){var Nt=Re.getVAO(Re.createVAO(mt));Ce.drawVAO=new Tr(null,null,null,function(dt,Dt){return dt.link(Nt)}),Ce.useVAO=!0}}return se?Ce.useVAO=!0:Ce.attributes=Hn(j,ce),Ce.context=jn(te),Ce}function Gn(X,j,$){var te=X.shared.context,ce=X.scope();Object.keys($).forEach(function(K){j.save(te,"."+K);var ee=$[K].append(X,j);Array.isArray(ee)?ce(te,".",K,"=[",ee.join(),"];"):ce(te,".",K,"=",ee,";")}),j(ce)}function Yn(X,j,$,te){var ce,K=X.shared,ee=K.gl,se=K.framebuffer;rt&&(ce=j.def(K.extensions,".webgl_draw_buffers"));var G,V=X.constants,U=V.drawBuffer,le=V.backBuffer;G=$?$.append(X,j):j.def(se,".next"),te||j("if(",G,"!==",se,".cur){"),j("if(",G,"){",ee,".bindFramebuffer(",E3,",",G,".framebuffer);"),rt&&j(ce,".drawBuffersWEBGL(",U,"[",G,".colorAttachments.length]);"),j("}else{",ee,".bindFramebuffer(",E3,",null);"),rt&&j(ce,".drawBuffersWEBGL(",le,");"),j("}",se,".cur=",G,";"),te||j("}")}function nr(X,j,$){var te=X.shared,ce=te.gl,K=X.current,ee=X.next,se=te.current,G=te.next,V=X.cond(se,".dirty");Te.forEach(function(U){var le,oe,ve=He(U);if(!(ve in $.state))if(ve in ee){le=ee[ve],oe=K[ve];var we=zt(Ie[ve].length,function(gt){return V.def(le,"[",gt,"]")});V(X.cond(we.map(function(gt,mt){return gt+"!=="+oe+"["+mt+"]"}).join("||")).then(ce,".",Ae[ve],"(",we,");",we.map(function(gt,mt){return oe+"["+mt+"]="+gt}).join(";"),";"))}else{le=V.def(G,".",ve);var Ce=X.cond(le,"!==",se,".",ve);V(Ce),ve in Ke?Ce(X.cond(le).then(ce,".enable(",Ke[ve],");").else(ce,".disable(",Ke[ve],");"),se,".",ve,"=",le,";"):Ce(ce,".",Ae[ve],"(",le,");",se,".",ve,"=",le,";")}}),Object.keys($.state).length===0&&V(se,".dirty=false;"),j(V)}function dr(X,j,$,te){var ce=X.shared,K=X.current,ee=ce.current,se=ce.gl;_3(Object.keys($)).forEach(function(G){var V=$[G];if(!te||te(V)){var U=V.append(X,j);if(Ke[G]){var le=Ke[G];Ha(V)?j(se,U?".enable(":".disable(",le,");"):j(X.cond(U).then(se,".enable(",le,");").else(se,".disable(",le,");")),j(ee,".",G,"=",U,";")}else if(Vn(U)){var oe=K[G];j(se,".",Ae[G],"(",U,");",U.map(function(ve,we){return oe+"["+we+"]="+ve}).join(";"),";")}else j(se,".",Ae[G],"(",U,");",ee,".",G,"=",U,";")}})}function An(X,j){je&&(X.instancing=j.def(X.shared.extensions,".angle_instanced_arrays"))}function Gt(X,j,$,te,ce){var K,ee,se,G=X.shared,V=X.stats,U=G.current,le=G.timer,oe=$.profile;function ve(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function we(dt){dt(K=j.def(),"=",ve(),";"),typeof ce=="string"?dt(V,".count+=",ce,";"):dt(V,".count++;"),De&&(te?dt(ee=j.def(),"=",le,".getNumPendingQueries();"):dt(le,".beginQuery(",V,");"))}function Ce(dt){dt(V,".cpuTime+=",ve(),"-",K,";"),De&&(te?dt(le,".pushScopeStats(",ee,",",le,".getNumPendingQueries(),",V,");"):dt(le,".endQuery();"))}function gt(dt){var Dt=j.def(U,".profile");j(U,".profile=",dt,";"),j.exit(U,".profile=",Dt,";")}if(oe){if(Ha(oe))return void(oe.enable?(we(j),Ce(j.exit),gt("true")):gt("false"));gt(se=oe.append(X,j))}else se=j.def(U,".profile");var mt=X.block();we(mt),j("if(",se,"){",mt,"}");var Nt=X.block();Ce(Nt),j.exit("if(",se,"){",Nt,"}")}function fr(X,j,$,te,ce){var K=X.shared;function ee(G){switch(G){case Bg:case zg:case Yg:return 2;case Rg:case Fg:case Xg:return 3;case jg:case Gg:case Ug:return 4;default:return 1}}function se(G,V,U){var le=K.gl,oe=j.def(G,".location"),ve=j.def(K.attributes,"[",oe,"]"),we=U.state,Ce=U.buffer,gt=[U.x,U.y,U.z,U.w],mt=["buffer","normalized","offset","stride"];function Nt(){j("if(!",ve,".buffer){",le,".enableVertexAttribArray(",oe,");}");var Dt,Yt=U.type;if(Dt=U.size?j.def(U.size,"||",V):V,j("if(",ve,".type!==",Yt,"||",ve,".size!==",Dt,"||",mt.map(function(ln){return ve+"."+ln+"!=="+U[ln]}).join("||"),"){",le,".bindBuffer(",Ec,",",Ce,".buffer);",le,".vertexAttribPointer(",[oe,Dt,Yt,U.normalized,U.stride,U.offset],");",ve,".type=",Yt,";",ve,".size=",Dt,";",mt.map(function(ln){return ve+"."+ln+"="+U[ln]+";"}).join(""),"}"),je){var on=U.divisor;j("if(",ve,".divisor!==",on,"){",X.instancing,".vertexAttribDivisorANGLE(",[oe,on],");",ve,".divisor=",on,";}")}}function dt(){j("if(",ve,".buffer){",le,".disableVertexAttribArray(",oe,");",ve,".buffer=null;","}if(",yc.map(function(Dt,Yt){return ve+"."+Dt+"!=="+gt[Yt]}).join("||"),"){",le,".vertexAttrib4f(",oe,",",gt,");",yc.map(function(Dt,Yt){return ve+"."+Dt+"="+gt[Yt]+";"}).join(""),"}")}we===bc?Nt():we===ix?dt():(j("if(",we,"===",bc,"){"),Nt(),j("}else{"),dt(),j("}"))}te.forEach(function(G){var V,U=G.name,le=$.attributes[U];if(le){if(!ce(le))return;V=le.append(X,j)}else{if(!ce(k3))return;var oe=X.scopeAttrib(U);O.optional(function(){X.assert(j,oe+".state","missing attribute "+U)}),V={},Object.keys(new ae).forEach(function(ve){V[ve]=j.def(oe,".",ve)})}se(X.link(G),ee(G.info.type),V)})}function un(X,j,$,te,ce){for(var K,ee=X.shared,se=ee.gl,G=0;G<te.length;++G){var V,U=te[G],le=U.name,oe=U.info.type,ve=$.uniforms[le],we=X.link(U)+".location";if(ve){if(!ce(ve))continue;if(Ha(ve)){var Ce=ve.value;if(O.command(Ce!=null,'missing uniform "'+le+'"',X.commandStr),oe===Oh||oe===Nh){O.command(typeof Ce=="function"&&(oe===Oh&&(Ce._reglType==="texture2d"||Ce._reglType==="framebuffer")||oe===Nh&&(Ce._reglType==="textureCube"||Ce._reglType==="framebufferCube")),"invalid texture for uniform "+le,X.commandStr);var gt=X.link(Ce._texture||Ce.color[0]._texture);j(se,".uniform1i(",we,",",gt+".bind());"),j.exit(gt,".unbind();")}else if(oe===Ah||oe===Ih||oe===Th){O.optional(function(){O.command(Vn(Ce),"invalid matrix for uniform "+le,X.commandStr),O.command(oe===Ah&&Ce.length===4||oe===Ih&&Ce.length===9||oe===Th&&Ce.length===16,"invalid length for matrix uniform "+le,X.commandStr)});var mt=X.global.def("new Float32Array(["+Array.prototype.slice.call(Ce)+"])"),Nt=2;oe===Ih?Nt=3:oe===Th&&(Nt=4),j(se,".uniformMatrix",Nt,"fv(",we,",false,",mt,");")}else{switch(oe){case xx:O.commandType(Ce,"number","uniform "+le,X.commandStr),K="1f";break;case Bg:O.command(Vn(Ce)&&Ce.length===2,"uniform "+le,X.commandStr),K="2f";break;case Rg:O.command(Vn(Ce)&&Ce.length===3,"uniform "+le,X.commandStr),K="3f";break;case jg:O.command(Vn(Ce)&&Ce.length===4,"uniform "+le,X.commandStr),K="4f";break;case Ex:O.commandType(Ce,"boolean","uniform "+le,X.commandStr),K="1i";break;case wx:O.commandType(Ce,"number","uniform "+le,X.commandStr),K="1i";break;case Yg:case zg:O.command(Vn(Ce)&&Ce.length===2,"uniform "+le,X.commandStr),K="2i";break;case Xg:case Fg:O.command(Vn(Ce)&&Ce.length===3,"uniform "+le,X.commandStr),K="3i";break;case Ug:case Gg:O.command(Vn(Ce)&&Ce.length===4,"uniform "+le,X.commandStr),K="4i"}j(se,".uniform",K,"(",we,",",Vn(Ce)?Array.prototype.slice.call(Ce):Ce,");")}continue}V=ve.append(X,j)}else{if(!ce(k3))continue;V=j.def(ee.uniforms,"[",Y.id(le),"]")}oe===Oh?(O(!Array.isArray(V),"must specify a scalar prop for textures"),j("if(",V,"&&",V,'._reglType==="framebuffer"){',V,"=",V,".color[0];","}")):oe===Nh&&(O(!Array.isArray(V),"must specify a scalar prop for cube maps"),j("if(",V,"&&",V,'._reglType==="framebufferCube"){',V,"=",V,".color[0];","}")),O.optional(function(){function ln(Fi,P3){X.assert(j,Fi,'bad data or missing for uniform "'+le+'".  '+P3)}function Mc(Fi){O(!Array.isArray(V),"must not specify an array type for uniform"),ln("typeof "+V+'==="'+Fi+'"',"invalid type, expected "+Fi)}function zi(Fi,P3){Array.isArray(V)?O(V.length===Fi,"must have length "+Fi):ln(ee.isArrayLike+"("+V+")&&"+V+".length==="+Fi,"invalid vector, should have length "+Fi,X.commandStr)}function N3(Fi){O(!Array.isArray(V),"must not specify a value type"),ln("typeof "+V+'==="function"&&'+V+'._reglType==="texture'+(Fi===v3?"2d":"Cube")+'"',"invalid texture type",X.commandStr)}switch(oe){case wx:Mc("number");break;case zg:zi(2);break;case Fg:zi(3);break;case Gg:zi(4);break;case xx:Mc("number");break;case Bg:zi(2);break;case Rg:zi(3);break;case jg:zi(4);break;case Ex:Mc("boolean");break;case Yg:zi(2);break;case Xg:zi(3);break;case Ug:case Ah:zi(4);break;case Ih:zi(9);break;case Th:zi(16);break;case Oh:N3(v3);break;case Nh:N3(AZ)}});var dt=1;switch(oe){case Oh:case Nh:var Dt=j.def(V,"._texture");j(se,".uniform1i(",we,",",Dt,".bind());"),j.exit(Dt,".unbind();");continue;case wx:case Ex:K="1i";break;case zg:case Yg:K="2i",dt=2;break;case Fg:case Xg:K="3i",dt=3;break;case Gg:case Ug:K="4i",dt=4;break;case xx:K="1f";break;case Bg:K="2f",dt=2;break;case Rg:K="3f",dt=3;break;case jg:K="4f",dt=4;break;case Ah:K="Matrix2fv";break;case Ih:K="Matrix3fv";break;case Th:K="Matrix4fv"}if(j(se,".uniform",K,"(",we,","),K.charAt(0)==="M"){var Yt=Math.pow(oe-Ah+2,2),on=X.global.def("new Float32Array(",Yt,")");Array.isArray(V)?j("false,(",zt(Yt,function(ln){return on+"["+ln+"]="+V[ln]}),",",on,")"):j("false,(Array.isArray(",V,")||",V," instanceof Float32Array)?",V,":(",zt(Yt,function(ln){return on+"["+ln+"]="+V+"["+ln+"]"}),",",on,")")}else dt>1?j(zt(dt,function(ln){return Array.isArray(V)?V[ln]:V+"["+ln+"]"})):(O(!Array.isArray(V),"uniform value must not be an array"),j(V));j(");")}}function kt(X,j,$,te){var ce=X.shared,K=ce.gl,ee=ce.draw,se=te.draw;function G(){var Yt,on=se.elements,ln=j;return on?((on.contextDep&&te.contextDynamic||on.propDep)&&(ln=$),Yt=on.append(X,ln)):Yt=ln.def(ee,".",Gs),Yt&&ln("if("+Yt+")"+K+".bindBuffer("+CZ+","+Yt+".buffer.buffer);"),Yt}function V(){var Yt,on=se.count,ln=j;return on?((on.contextDep&&te.contextDynamic||on.propDep)&&(ln=$),Yt=on.append(X,ln),O.optional(function(){on.MISSING&&X.assert(j,"false","missing vertex count"),on.DYNAMIC&&X.assert(ln,Yt+">=0","missing vertex count")})):(Yt=ln.def(ee,".",Xs),O.optional(function(){X.assert(ln,Yt+">=0","missing vertex count")})),Yt}var U=G();function le(Yt){var on=se[Yt];return on?on.contextDep&&te.contextDynamic||on.propDep?on.append(X,$):on.append(X,j):j.def(ee,".",Yt)}var oe,ve,we=le(Ys),Ce=le(Dg),gt=V();if(typeof gt=="number"){if(gt===0)return}else $("if(",gt,"){"),$.exit("}");je&&(oe=le(Lg),ve=X.instancing);var mt=U+".type",Nt=se.elements&&Ha(se.elements);function dt(){function Yt(){$(ve,".drawElementsInstancedANGLE(",[we,gt,mt,Ce+"<<(("+mt+"-"+ZD+")>>1)",oe],");")}function on(){$(ve,".drawArraysInstancedANGLE(",[we,Ce,gt,oe],");")}U?Nt?Yt():($("if(",U,"){"),Yt(),$("}else{"),on(),$("}")):on()}function Dt(){function Yt(){$(K+".drawElements("+[we,gt,mt,Ce+"<<(("+mt+"-"+ZD+")>>1)"]+");")}function on(){$(K+".drawArrays("+[we,Ce,gt]+");")}U?Nt?Yt():($("if(",U,"){"),Yt(),$("}else{"),on(),$("}")):on()}je&&(typeof oe!="number"||oe>=0)?typeof oe=="string"?($("if(",oe,">0){"),dt(),$("}else if(",oe,"<0){"),Dt(),$("}")):dt():Dt()}function Vt(X,j,$,te,ce){var K=nt(),ee=K.proc("body",ce);return O.optional(function(){K.commandStr=j.commandStr,K.command=K.link(j.commandStr)}),je&&(K.instancing=ee.def(K.shared.extensions,".angle_instanced_arrays")),X(K,ee,$,te),K.compile().body}function tn(X,j,$,te){An(X,j),$.useVAO?$.drawVAO?j(X.shared.vao,".setVAO(",$.drawVAO.append(X,j),");"):j(X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"):(j(X.shared.vao,".setVAO(null);"),fr(X,j,$,te.attributes,function(){return!0})),un(X,j,$,te.uniforms,function(){return!0}),kt(X,j,j,$)}function In(X,j){var $=X.proc("draw",1);An(X,$),Gn(X,$,j.context),Yn(X,$,j.framebuffer),nr(X,$,j),dr(X,$,j.state),Gt(X,$,j,!1,!0);var te=j.shader.progVar.append(X,$);if($(X.shared.gl,".useProgram(",te,".program);"),j.shader.program)tn(X,$,j,j.shader.program);else{$(X.shared.vao,".setVAO(null);");var ce=X.global.def("{}"),K=$.def(te,".id"),ee=$.def(ce,"[",K,"]");$(X.cond(ee).then(ee,".call(this,a0);").else(ee,"=",ce,"[",K,"]=",X.link(function(se){return Vt(tn,X,j,se,1)}),"(",te,");",ee,".call(this,a0);"))}Object.keys(j.state).length>0&&$(X.shared.current,".dirty=true;")}function Co(X,j,$,te){function ce(){return!0}X.batchId="a1",An(X,j),fr(X,j,$,te.attributes,ce),un(X,j,$,te.uniforms,ce),kt(X,j,j,$)}function Ws(X,j,$,te){An(X,j);var ce=$.contextDep,K=j.def(),ee="a0",se="a1",G=j.def();X.shared.props=G,X.batchId=K;var V=X.scope(),U=X.scope();function le(mt){return mt.contextDep&&ce||mt.propDep}function oe(mt){return!le(mt)}if(j(V.entry,"for(",K,"=0;",K,"<",se,";++",K,"){",G,"=",ee,"[",K,"];",U,"}",V.exit),$.needsContext&&Gn(X,U,$.context),$.needsFramebuffer&&Yn(X,U,$.framebuffer),dr(X,U,$.state,le),$.profile&&le($.profile)&&Gt(X,U,$,!1,!0),te)$.useVAO?$.drawVAO?le($.drawVAO)?U(X.shared.vao,".setVAO(",$.drawVAO.append(X,U),");"):V(X.shared.vao,".setVAO(",$.drawVAO.append(X,V),");"):V(X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"):(V(X.shared.vao,".setVAO(null);"),fr(X,V,$,te.attributes,oe),fr(X,U,$,te.attributes,le)),un(X,V,$,te.uniforms,oe),un(X,U,$,te.uniforms,le),kt(X,V,U,$);else{var ve=X.global.def("{}"),we=$.shader.progVar.append(X,U),Ce=U.def(we,".id"),gt=U.def(ve,"[",Ce,"]");U(X.shared.gl,".useProgram(",we,".program);","if(!",gt,"){",gt,"=",ve,"[",Ce,"]=",X.link(function(mt){return Vt(Co,X,$,mt,2)}),"(",we,");}",gt,".call(this,a0[",K,"],",K,");")}}function W(X,j){var $=X.proc("batch",2);X.batchId="0",An(X,$);var te=!1,ce=!0;Object.keys(j.context).forEach(function(ve){te=te||j.context[ve].propDep}),te||(Gn(X,$,j.context),ce=!1);var K=j.framebuffer,ee=!1;function se(ve){return ve.contextDep&&te||ve.propDep}K?(K.propDep?te=ee=!0:K.contextDep&&te&&(ee=!0),ee||Yn(X,$,K)):Yn(X,$,null),j.state.viewport&&j.state.viewport.propDep&&(te=!0),nr(X,$,j),dr(X,$,j.state,function(ve){return!se(ve)}),j.profile&&se(j.profile)||Gt(X,$,j,!1,"a1"),j.contextDep=te,j.needsContext=ce,j.needsFramebuffer=ee;var G=j.shader.progVar;if(G.contextDep&&te||G.propDep)Ws(X,$,j,null);else{var V=G.append(X,$);if($(X.shared.gl,".useProgram(",V,".program);"),j.shader.program)Ws(X,$,j,j.shader.program);else{$(X.shared.vao,".setVAO(null);");var U=X.global.def("{}"),le=$.def(V,".id"),oe=$.def(U,"[",le,"]");$(X.cond(oe).then(oe,".call(this,a0,a1);").else(oe,"=",U,"[",le,"]=",X.link(function(ve){return Vt(Ws,X,j,ve,2)}),"(",V,");",oe,".call(this,a0,a1);"))}}Object.keys(j.state).length>0&&$(X.shared.current,".dirty=true;")}function ge(X,j){var $=X.proc("scope",3);X.batchId="a2";var te=X.shared,ce=te.current;function K(ee){var se=j.shader[ee];se&&$.set(te.shader,"."+ee,se.append(X,$))}Gn(X,$,j.context),j.framebuffer&&j.framebuffer.append(X,$),_3(Object.keys(j.state)).forEach(function(ee){var se=j.state[ee].append(X,$);Vn(se)?se.forEach(function(G,V){$.set(X.next[ee],"["+V+"]",G)}):$.set(te.next,"."+ee,se)}),Gt(X,$,j,!0,!0),[Gs,Dg,Xs,Lg,Ys].forEach(function(ee){var se=j.draw[ee];se&&$.set(te.draw,"."+ee,""+se.append(X,$))}),Object.keys(j.uniforms).forEach(function(ee){var se=j.uniforms[ee].append(X,$);Array.isArray(se)&&(se="["+se.join()+"]"),$.set(te.uniforms,"["+Y.id(ee)+"]",se)}),Object.keys(j.attributes).forEach(function(ee){var se=j.attributes[ee].append(X,$),G=X.scopeAttrib(ee);Object.keys(new ae).forEach(function(V){$.set(G,"."+V,se[V])})}),j.scopeVAO&&$.set(te.vao,".targetVAO",j.scopeVAO.append(X,$)),K(_h),K(kh),Object.keys(j.state).length>0&&($(ce,".dirty=true;"),$.exit(ce,".dirty=true;")),$("a1(",X.shared.context,",a0,",X.batchId,");")}function de(X){if(typeof X=="object"&&!Vn(X)){for(var j=Object.keys(X),$=0;$<j.length;++$)if(kn.isDynamic(X[j[$]]))return!0;return!1}}function lt(X,j,$){var te=j.static[$];if(te&&de(te)){var ce=X.global,K=Object.keys(te),ee=!1,se=!1,G=!1,V=X.global.def("{}");K.forEach(function(le){var oe=te[le];if(kn.isDynamic(oe)){typeof oe=="function"&&(oe=te[le]=kn.unbox(oe));var ve=Hr(oe,null);ee=ee||ve.thisDep,G=G||ve.propDep,se=se||ve.contextDep}else{switch(ce(V,".",le,"="),typeof oe){case"number":ce(oe);break;case"string":ce('"',oe,'"');break;case"object":Array.isArray(oe)&&ce("[",oe.join(),"]");break;default:ce(X.link(oe))}ce(";")}}),j.dynamic[$]=new kn.DynamicVariable(Ng,{thisDep:ee,contextDep:se,propDep:G,ref:V,append:U}),delete j.static[$]}function U(le,oe){K.forEach(function(ve){var we=te[ve];if(kn.isDynamic(we)){var Ce=le.invoke(oe,we);oe(V,".",ve,"=",Ce,";")}})}}function Ut(X,j,$,te,ce){var K=nt();K.stats=K.link(ce),Object.keys(j.static).forEach(function(se){lt(K,j,se)}),kZ.forEach(function(se){lt(K,X,se)});var ee=zn(X,j,$,te,K);return In(K,ee),ge(K,ee),W(K,ee),n(K.compile(),{destroy:function(){ee.shader.program.destroy()}})}return{next:st,current:Ie,procs:function(){var X=nt(),j=X.proc("poll"),$=X.proc("refresh"),te=X.block();j(te),$(te);var ce,K=X.shared,ee=K.gl,se=K.next,G=K.current;te(G,".dirty=false;"),Yn(X,j),Yn(X,$,null,!0),je&&(ce=X.link(je)),H.oes_vertex_array_object&&$(X.link(H.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var V=0;V<pe.maxAttributes;++V){var U=$.def(K.attributes,"[",V,"]"),le=X.cond(U,".buffer");le.then(ee,".enableVertexAttribArray(",V,");",ee,".bindBuffer(",Ec,",",U,".buffer.buffer);",ee,".vertexAttribPointer(",V,",",U,".size,",U,".type,",U,".normalized,",U,".stride,",U,".offset);").else(ee,".disableVertexAttribArray(",V,");",ee,".vertexAttrib4f(",V,",",U,".x,",U,".y,",U,".z,",U,".w);",U,".buffer=null;"),$(le),je&&$(ce,".vertexAttribDivisorANGLE(",V,",",U,".divisor);")}return $(X.shared.vao,".currentVAO=null;",X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"),Object.keys(Ke).forEach(function(oe){var ve=Ke[oe],we=te.def(se,".",oe),Ce=X.block();Ce("if(",we,"){",ee,".enable(",ve,")}else{",ee,".disable(",ve,")}",G,".",oe,"=",we,";"),$(Ce),j("if(",we,"!==",G,".",oe,"){",Ce,"}")}),Object.keys(Ae).forEach(function(oe){var ve,we,Ce=Ae[oe],gt=Ie[oe],mt=X.block();if(mt(ee,".",Ce,"("),Vn(gt)){var Nt=gt.length;ve=X.global.def(se,".",oe),we=X.global.def(G,".",oe),mt(zt(Nt,function(dt){return ve+"["+dt+"]"}),");",zt(Nt,function(dt){return we+"["+dt+"]="+ve+"["+dt+"];"}).join("")),j("if(",zt(Nt,function(dt){return ve+"["+dt+"]!=="+we+"["+dt+"]"}).join("||"),"){",mt,"}")}else ve=te.def(se,".",oe),we=te.def(G,".",oe),mt(ve,");",G,".",oe,"=",ve,";"),j("if(",ve,"!==",we,"){",mt,"}");$(mt)}),X.compile()}(),compile:Ut}}function UZ(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var WZ=34918,VZ=34919,C3=35007,HZ=function(I,Y){if(!Y.ext_disjoint_timer_query)return null;var H=[];function pe(){return H.pop()||Y.ext_disjoint_timer_query.createQueryEXT()}function xe(je){H.push(je)}var ue=[];function ye(je){var rt=pe();Y.ext_disjoint_timer_query.beginQueryEXT(C3,rt),ue.push(rt),De(ue.length-1,ue.length,je)}function Le(){Y.ext_disjoint_timer_query.endQueryEXT(C3)}function ze(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Re=[];function Be(){return Re.pop()||new ze}function Xe(je){Re.push(je)}var et=[];function De(je,rt,Ie){var st=Be();st.startQueryIndex=je,st.endQueryIndex=rt,st.sum=0,st.stats=Ie,et.push(st)}var Qe=[],ae=[];function be(){var je,rt,Ie=ue.length;if(Ie!==0){ae.length=Math.max(ae.length,Ie+1),Qe.length=Math.max(Qe.length,Ie+1),Qe[0]=0,ae[0]=0;var st=0;for(je=0,rt=0;rt<ue.length;++rt){var Te=ue[rt];Y.ext_disjoint_timer_query.getQueryObjectEXT(Te,VZ)?(st+=Y.ext_disjoint_timer_query.getQueryObjectEXT(Te,WZ),xe(Te)):ue[je++]=Te,Qe[rt+1]=st,ae[rt+1]=je}for(ue.length=je,je=0,rt=0;rt<et.length;++rt){var Ke=et[rt],Ae=Ke.startQueryIndex,He=Ke.endQueryIndex;Ke.sum+=Qe[He]-Qe[Ae];var xt=ae[Ae],Rt=ae[He];Rt===xt?(Ke.stats.gpuTime+=Ke.sum/1e6,Xe(Ke)):(Ke.startQueryIndex=xt,Ke.endQueryIndex=Rt,et[je++]=Ke)}et.length=je}}return{beginQuery:ye,endQuery:Le,pushScopeStats:De,update:be,getNumPendingQueries:function(){return ue.length},clear:function(){H.push.apply(H,ue);for(var je=0;je<H.length;je++)Y.ext_disjoint_timer_query.deleteQueryEXT(H[je]);ue.length=0,H.length=0},restore:function(){ue.length=0,H.length=0}}},qZ=16384,ZZ=256,KZ=1024,$Z=34962,A3="webglcontextlost",I3="webglcontextrestored",T3=1,QZ=2,JZ=3;function O3(I,Y){for(var H=0;H<I.length;++H)if(I[H]===Y)return H;return-1}function eK(I){var Y=sn(I);if(!Y)return null;var H=Y.gl,pe=H.getContextAttributes(),xe=H.isContextLost(),ue=Pt(H,Y);if(!ue)return null;var ye=kr(),Le=UZ(),ze=ue.extensions,Re=HZ(H,ze),Be=Vr(),Xe=H.drawingBufferWidth,et=H.drawingBufferHeight,De={tick:0,time:0,viewportWidth:Xe,viewportHeight:et,framebufferWidth:Xe,framebufferHeight:et,drawingBufferWidth:Xe,drawingBufferHeight:et,pixelRatio:Y.pixelRatio},Qe={},ae={elements:null,primitive:4,count:-1,offset:0,instances:-1},be=cq(H,ze),je=gq(H,Le,Y,Ie),rt=gZ(H,ze,be,Le,je);function Ie(kt){return rt.destroyBuffer(kt)}var st=Eq(H,ze,je,Le),Te=bZ(H,ye,Le,Y),Ke=Jq(H,ze,be,function(){xt.procs.poll()},De,Le,Y),Ae=eZ(H,ze,be,Le,Y),He=fZ(H,ze,be,Ke,Ae,Le),xt=XZ(H,ye,ze,be,je,st,Ke,He,Qe,rt,Te,ae,De,Re,Y),Rt=EZ(H,He,xt.procs.poll,De,pe,ze,be),$e=xt.next,tt=H.canvas,Fe=[],nt=[],Ft=[],ft=[Y.onDestroy],Xt=null;function jt(){if(Fe.length===0)return Re&&Re.update(),void(Xt=null);Xt=gr.next(jt),dr();for(var kt=Fe.length-1;kt>=0;--kt){var Vt=Fe[kt];Vt&&Vt(De,null,0)}H.flush(),Re&&Re.update()}function Lt(){!Xt&&Fe.length>0&&(Xt=gr.next(jt))}function Wt(){Xt&&(gr.cancel(jt),Xt=null)}function Rn(kt){kt.preventDefault(),xe=!0,Wt(),nt.forEach(function(Vt){Vt()})}function hr(kt){H.getError(),xe=!1,ue.restore(),Te.restore(),je.restore(),Ke.restore(),Ae.restore(),He.restore(),rt.restore(),Re&&Re.restore(),xt.procs.refresh(),Lt(),Ft.forEach(function(Vt){Vt()})}function Hn(){Fe.length=0,Wt(),tt&&(tt.removeEventListener(A3,Rn),tt.removeEventListener(I3,hr)),Te.clear(),He.clear(),Ae.clear(),Ke.clear(),st.clear(),je.clear(),rt.clear(),Re&&Re.clear(),ft.forEach(function(kt){kt()})}function qt(kt){function Vt(ce){var K=n({},ce);function ee(se){if(se in K){var G=K[se];delete K[se],Object.keys(G).forEach(function(V){K[se+"."+V]=G[V]})}}return delete K.uniforms,delete K.attributes,delete K.context,delete K.vao,"stencil"in K&&K.stencil.op&&(K.stencil.opBack=K.stencil.opFront=K.stencil.op,delete K.stencil.op),ee("blend"),ee("depth"),ee("cull"),ee("stencil"),ee("polygonOffset"),ee("scissor"),ee("sample"),"vao"in ce&&(K.vao=ce.vao),K}function tn(ce,K){var ee={},se={};return Object.keys(ce).forEach(function(G){var V=ce[G];if(kn.isDynamic(V))se[G]=kn.unbox(V,G);else{if(K&&Array.isArray(V)){for(var U=0;U<V.length;++U)if(kn.isDynamic(V[U]))return void(se[G]=kn.unbox(V,G))}ee[G]=V}}),{dynamic:se,static:ee}}O(!!kt,"invalid args to regl({...})"),O.type(kt,"object","invalid args to regl({...})");var In=tn(kt.context||{},!0),Co=tn(kt.uniforms||{},!0),Ws=tn(kt.attributes||{},!1),W=tn(Vt(kt),!1),ge={gpuTime:0,cpuTime:0,count:0},de=xt.compile(W,Ws,Co,In,ge),lt=de.draw,Ut=de.batch,X=de.scope,j=[];function $(ce){for(;j.length<ce;)j.push(null);return j}function te(ce,K){var ee;if(xe&&O.raise("context lost"),typeof ce=="function")return X.call(this,null,ce,0);if(typeof K=="function")if(typeof ce=="number")for(ee=0;ee<ce;++ee)X.call(this,null,K,ee);else{if(!Array.isArray(ce))return X.call(this,ce,K,0);for(ee=0;ee<ce.length;++ee)X.call(this,ce[ee],K,ee)}else if(typeof ce=="number"){if(ce>0)return Ut.call(this,$(0|ce),0|ce)}else{if(!Array.isArray(ce))return lt.call(this,ce);if(ce.length)return Ut.call(this,ce,ce.length)}}return n(te,{stats:ge,destroy:function(){de.destroy()}})}tt&&(tt.addEventListener(A3,Rn,!1),tt.addEventListener(I3,hr,!1));var jn=He.setFBO=qt({framebuffer:kn.define.call(null,T3,"framebuffer")});function zn(kt,Vt){var tn=0;xt.procs.poll();var In=Vt.color;In&&(H.clearColor(+In[0]||0,+In[1]||0,+In[2]||0,+In[3]||0),tn|=qZ),"depth"in Vt&&(H.clearDepth(+Vt.depth),tn|=ZZ),"stencil"in Vt&&(H.clearStencil(0|Vt.stencil),tn|=KZ),O(!!tn,"called regl.clear with no buffer specified"),H.clear(tn)}function Gn(kt){if(O(typeof kt=="object"&&kt,"regl.clear() takes an object as input"),"framebuffer"in kt)if(kt.framebuffer&&kt.framebuffer_reglType==="framebufferCube")for(var Vt=0;Vt<6;++Vt)jn(n({framebuffer:kt.framebuffer.faces[Vt]},kt),zn);else jn(kt,zn);else zn(null,kt)}function Yn(kt){function Vt(){var tn=O3(Fe,kt);function In(){var Co=O3(Fe,In);Fe[Co]=Fe[Fe.length-1],Fe.length-=1,Fe.length<=0&&Wt()}O(tn>=0,"cannot cancel a frame twice"),Fe[tn]=In}return O.type(kt,"function","regl.frame() callback must be a function"),Fe.push(kt),Lt(),{cancel:Vt}}function nr(){var kt=$e.viewport,Vt=$e.scissor_box;kt[0]=kt[1]=Vt[0]=Vt[1]=0,De.viewportWidth=De.framebufferWidth=De.drawingBufferWidth=kt[2]=Vt[2]=H.drawingBufferWidth,De.viewportHeight=De.framebufferHeight=De.drawingBufferHeight=kt[3]=Vt[3]=H.drawingBufferHeight}function dr(){De.tick+=1,De.time=Gt(),nr(),xt.procs.poll()}function An(){Ke.refresh(),nr(),xt.procs.refresh(),Re&&Re.update()}function Gt(){return(Vr()-Be)/1e3}function fr(kt,Vt){var tn;switch(O.type(Vt,"function","listener callback must be a function"),kt){case"frame":return Yn(Vt);case"lost":tn=nt;break;case"restore":tn=Ft;break;case"destroy":tn=ft;break;default:O.raise("invalid event, must be one of frame,lost,restore,destroy")}return tn.push(Vt),{cancel:function(){for(var In=0;In<tn.length;++In)if(tn[In]===Vt)return tn[In]=tn[tn.length-1],void tn.pop()}}}An();var un=n(qt,{clear:Gn,prop:kn.define.bind(null,T3),context:kn.define.bind(null,QZ),this:kn.define.bind(null,JZ),draw:qt({}),buffer:function(kt){return je.create(kt,$Z,!1,!1)},elements:function(kt){return st.create(kt,!1)},texture:Ke.create2D,cube:Ke.createCube,renderbuffer:Ae.create,framebuffer:He.create,framebufferCube:He.createCube,vao:rt.createVAO,attributes:pe,frame:Yn,on:fr,limits:be,hasExtension:function(kt){return be.extensions.indexOf(kt.toLowerCase())>=0},read:Rt,destroy:Hn,_gl:H,_refresh:An,poll:function(){dr(),Re&&Re.update()},now:Gt,stats:Le});return Y.onDone(null,un),un}return eK}();const K7=qs(AT.exports);var Aa,Mp,Ia,Bi,_p,Ss,kp,d1,Uo,$u,Mr,Wo,Vo,f1,$7=function(){function e(n,t){Di(this,e),this.attribute=void 0,this.buffer=void 0;var r=t.buffer,i=t.offset,o=t.stride,a=t.normalized,s=t.size,u=t.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:o||0,normalized:a||!1,divisor:u||0},s&&(this.attribute.size=s)}return Li(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),Q7=(ot(Aa={},Ne.POINTS,"points"),ot(Aa,Ne.LINES,"lines"),ot(Aa,Ne.LINE_LOOP,"line loop"),ot(Aa,Ne.LINE_STRIP,"line strip"),ot(Aa,Ne.TRIANGLES,"triangles"),ot(Aa,Ne.TRIANGLE_FAN,"triangle fan"),ot(Aa,Ne.TRIANGLE_STRIP,"triangle strip"),Aa),IT=(ot(Mp={},Ne.STATIC_DRAW,"static"),ot(Mp,Ne.DYNAMIC_DRAW,"dynamic"),ot(Mp,Ne.STREAM_DRAW,"stream"),Mp),p1=(ot(Ia={},Ne.BYTE,"int8"),ot(Ia,Ne.UNSIGNED_INT,"int16"),ot(Ia,Ne.INT,"int32"),ot(Ia,Ne.UNSIGNED_BYTE,"uint8"),ot(Ia,Ne.UNSIGNED_SHORT,"uint16"),ot(Ia,Ne.UNSIGNED_INT,"uint32"),ot(Ia,Ne.FLOAT,"float"),Ia),J7=(ot(Bi={},Ne.ALPHA,"alpha"),ot(Bi,Ne.LUMINANCE,"luminance"),ot(Bi,Ne.LUMINANCE_ALPHA,"luminance alpha"),ot(Bi,Ne.RGB,"rgb"),ot(Bi,Ne.RGBA,"rgba"),ot(Bi,Ne.RGBA4,"rgba4"),ot(Bi,Ne.RGB5_A1,"rgb5 a1"),ot(Bi,Ne.RGB565,"rgb565"),ot(Bi,Ne.DEPTH_COMPONENT,"depth"),ot(Bi,Ne.DEPTH_STENCIL,"depth stencil"),Bi),eY=(ot(_p={},Ne.DONT_CARE,"dont care"),ot(_p,Ne.NICEST,"nice"),ot(_p,Ne.FASTEST,"fast"),_p),TT=(ot(Ss={},Ne.NEAREST,"nearest"),ot(Ss,Ne.LINEAR,"linear"),ot(Ss,Ne.LINEAR_MIPMAP_LINEAR,"mipmap"),ot(Ss,Ne.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),ot(Ss,Ne.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),ot(Ss,Ne.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Ss),OT=(ot(kp={},Ne.REPEAT,"repeat"),ot(kp,Ne.CLAMP_TO_EDGE,"clamp"),ot(kp,Ne.MIRRORED_REPEAT,"mirror"),kp),tY=(ot(d1={},Ne.NONE,"none"),ot(d1,Ne.BROWSER_DEFAULT_WEBGL,"browser"),d1),nY=(ot(Uo={},Ne.NEVER,"never"),ot(Uo,Ne.ALWAYS,"always"),ot(Uo,Ne.LESS,"less"),ot(Uo,Ne.LEQUAL,"lequal"),ot(Uo,Ne.GREATER,"greater"),ot(Uo,Ne.GEQUAL,"gequal"),ot(Uo,Ne.EQUAL,"equal"),ot(Uo,Ne.NOTEQUAL,"notequal"),Uo),NT=(ot($u={},Ne.FUNC_ADD,"add"),ot($u,Ne.MIN_EXT,"min"),ot($u,Ne.MAX_EXT,"max"),ot($u,Ne.FUNC_SUBTRACT,"subtract"),ot($u,Ne.FUNC_REVERSE_SUBTRACT,"reverse subtract"),$u),Cp=(ot(Mr={},Ne.ZERO,"zero"),ot(Mr,Ne.ONE,"one"),ot(Mr,Ne.SRC_COLOR,"src color"),ot(Mr,Ne.ONE_MINUS_SRC_COLOR,"one minus src color"),ot(Mr,Ne.SRC_ALPHA,"src alpha"),ot(Mr,Ne.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),ot(Mr,Ne.DST_COLOR,"dst color"),ot(Mr,Ne.ONE_MINUS_DST_COLOR,"one minus dst color"),ot(Mr,Ne.DST_ALPHA,"dst alpha"),ot(Mr,Ne.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),ot(Mr,Ne.CONSTANT_COLOR,"constant color"),ot(Mr,Ne.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),ot(Mr,Ne.CONSTANT_ALPHA,"constant alpha"),ot(Mr,Ne.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),ot(Mr,Ne.SRC_ALPHA_SATURATE,"src alpha saturate"),Mr),rY=(ot(Wo={},Ne.NEVER,"never"),ot(Wo,Ne.ALWAYS,"always"),ot(Wo,Ne.LESS,"less"),ot(Wo,Ne.LEQUAL,"lequal"),ot(Wo,Ne.GREATER,"greater"),ot(Wo,Ne.GEQUAL,"gequal"),ot(Wo,Ne.EQUAL,"equal"),ot(Wo,Ne.NOTEQUAL,"notequal"),Wo),Qu=(ot(Vo={},Ne.ZERO,"zero"),ot(Vo,Ne.KEEP,"keep"),ot(Vo,Ne.REPLACE,"replace"),ot(Vo,Ne.INVERT,"invert"),ot(Vo,Ne.INCR,"increment"),ot(Vo,Ne.DECR,"decrement"),ot(Vo,Ne.INCR_WRAP,"increment wrap"),ot(Vo,Ne.DECR_WRAP,"decrement wrap"),Vo),iY=(ot(f1={},Ne.FRONT,"front"),ot(f1,Ne.BACK,"back"),f1),oY=function(){function e(n,t){Di(this,e),this.buffer=void 0;var r=t.data,i=t.usage,o=t.type;this.buffer=n.buffer({data:r,usage:IT[i||Ne.STATIC_DRAW],type:p1[o||Ne.UNSIGNED_BYTE]})}return Li(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(n){var t=n.data,r=n.offset;this.buffer.subdata(t,r)}}]),e}();function g1(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function aY(e){return function(n){if(Array.isArray(n))return g1(n)}(e)||function(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}(e)||function(n,t){if(n){if(typeof n=="string")return g1(n,t);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g1(n,t):void 0}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function PT(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function DT(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?PT(Object(t),!0).forEach(function(r){ot(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):PT(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var LT=0,sY=function(){function e(t,r){var i=this;Di(this,e),this.reGl=t,this.context=r,this.entity=ST(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach(function(l){var h=l.name,d=l.type,f=l.data,p=l.isReferer,g=l.storageClass;if(g===Ku.StorageBuffer){if(p)i.textureCache[h]={data:void 0},o["".concat(h,"Size")]=function(){return f.compiledBundle.context.output.textureSize};else{i.textureCache[h]=i.calcDataTexture(h,d,f);var v=i.textureCache[h],m=v.textureWidth,y=v.isOutput;o["".concat(h,"Size")]=[m,m],y&&(i.outputTextureName=h,i.context.needPingpong&&(i.outputTextureName="".concat(h,"Output"),i.textureCache[i.outputTextureName]=i.calcDataTexture(h,d,f)))}o[h]=function(){return i.textureCache[h].texture}}else if(g===Ku.Uniform){if(f&&(Array.isArray(f)||Hg(f))&&f.length>16)throw new Error("invalid data type ".concat(d));o[h]=function(){return l.data}}});var a=this.getOuputDataTexture(),s=a.textureWidth,u=a.texelCount;o.u_OutputTextureSize=[s,s],o.u_OutputTexelCount=u,this.context.output.textureSize=[s,s];var c={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:o,vert:`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(c)}var n;return Li(e,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){t.computeCommand()})}},{key:"readData",value:(n=Ca(Sr.mark(function t(){var r,i,o,a,s,u,c,l,h=this;return Sr.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){r=h.reGl.read()}),!r){d.next=6;break}if(i=this.getOuputDataTexture(),o=i.originalDataLength,a=i.elementsPerTexel,s=i.typedArrayConstructor,u=s===void 0?Float32Array:s,c=[],a!==4)for(l=0;l<r.length;l+=4)a===1?c.push(r[l]):a===2?c.push(r[l],r[l+1]):c.push(r[l],r[l+1],r[l+2]);else c=r;return d.abrupt("return",new u(c.slice(0,o)));case 6:return d.abrupt("return",new Float32Array);case 7:case"end":return d.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"confirmInput",value:function(t,r){var i;this.entity===t.entity?(this.dynamicPingpong=!0,i=this):i=t,this.textureCache[r].id=i.getOuputDataTexture().id,this.textureCache[r].texture=i.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,r){var i=this.context.uniforms.find(function(u){return u.name===t});if(i){var o=this.calcDataTexture(t,i.type,r),a=o.texture,s=o.data;this.textureCache[t].data=s,this.textureCache[t].texture=a}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var r=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=r}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var r=t.data,i=t.textureWidth;return DT(DT({},t),{},{id:LT++,texture:this.reGl.texture({width:i,height:i,data:r,type:"float"})})}},{key:"calcDataTexture",value:function(t,r,i){var o=1;r===Yl.Vector4FloatArray&&(o=4);for(var a=[],s=0;s<i.length;s+=o)o===1?a.push(i[s],0,0,0):o===2?a.push(i[s],i[s+1],0,0):o===3?a.push(i[s],i[s+1],i[s+2],0):o===4&&a.push(i[s],i[s+1],i[s+2],i[s+3]);var u=i.length,c=Math.ceil(u/o),l=Math.ceil(Math.sqrt(c)),h=l*l;c<h&&a.push.apply(a,aY(new Array(4*(h-c)).fill(0)));var d=this.reGl.texture({width:l,height:l,data:a,type:"float"});return{id:LT++,data:a,originalDataLength:u,typedArrayConstructor:Hg(i)?i.constructor:void 0,textureWidth:l,texture:d,texelCount:c,elementsPerTexel:o,isOutput:t===this.context.output.name}}}]),e}(),uY=function(){function e(n,t){Di(this,e),this.elements=void 0;var r=t.data,i=t.usage,o=t.type,a=t.count;this.elements=n.elements({data:r,usage:IT[i||Ne.STATIC_DRAW],type:p1[o||Ne.UNSIGNED_BYTE],count:a})}return Li(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(n){var t=n.data;this.elements.subdata(t)}},{key:"destroy",value:function(){this.elements.destroy()}}]),e}(),cY=function(){function e(n,t){Di(this,e),this.framebuffer=void 0;var r=t.width,i=t.height,o=t.color,a=t.colors;t.depth,t.stencil;var s={width:r,height:i};Array.isArray(a)&&(s.colors=a.map(function(u){return u.get()})),o&&typeof o!="boolean"&&(s.color=o.get()),this.framebuffer=n.framebuffer(s)}return Li(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(n){var t=n.width,r=n.height;this.framebuffer.resize(t,r)}}]),e}();function v1(e){var n={};return Object.keys(e).forEach(function(t){m1(t,e[t],n,"")}),n}function m1(e,n,t,r){n===null||typeof n=="number"||typeof n=="boolean"||Array.isArray(n)&&typeof n[0]=="number"||Hg(n)||n===""||n.resize!==void 0?t["".concat(r&&r+".").concat(e)]=n:(lK(n)&&Object.keys(n).forEach(function(i){m1(i,n[i],t,"".concat(r&&r+".").concat(e))}),Array.isArray(n)&&n.forEach(function(i,o){Object.keys(i).forEach(function(a){m1(a,i[a],t,"".concat(r&&r+".").concat(e,"[").concat(o,"]"))})}))}function BT(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function Ju(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?BT(Object(t),!0).forEach(function(r){ot(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):BT(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var lY=function(){function e(n,t){Di(this,e),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=n;var r=t.vs,i=t.fs,o=t.defines,a=t.attributes,s=t.uniforms,u=t.primitive,c=t.count,l=t.elements,h=t.depth,d=t.blend,f=t.stencil,p=t.cull,g=t.instances,v=t.scissor,m=t.viewport,y={};s&&(this.uniforms=v1(s),Object.keys(s).forEach(function(E){y[E]=n.prop(E)}));var b={};Object.keys(a).forEach(function(E){b[E]=a[E].get()});var x=o&&this.generateDefines(o)||"",w={attributes:b,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(x,`
`).concat(i),uniforms:y,vert:`
`.concat(x,`
`).concat(r),primitive:Q7[u===void 0?Ne.TRIANGLES:u]};g&&(w.instances=g),c&&(w.count=c),l&&(w.elements=l.get()),v&&(w.scissor=v),m&&(w.viewport=m),this.initDepthDrawParams({depth:h},w),this.initBlendDrawParams({blend:d},w),this.initStencilDrawParams({stencil:f},w),this.initCullDrawParams({cull:p},w),this.drawCommand=n(w)}return Li(e,[{key:"addUniforms",value:function(n){this.uniforms=Ju(Ju({},this.uniforms),v1(n))}},{key:"draw",value:function(n){var t=Ju(Ju({},this.uniforms),v1(n.uniforms||{})),r={};Object.keys(t).forEach(function(i){var o=hK(t[i]);o==="boolean"||o==="number"||Array.isArray(t[i])||t[i].BYTES_PER_ELEMENT?r[i]=t[i]:o==="string"||(r[i]=t[i].get())}),this.drawCommand(r)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(n,t){var r=n.depth;r&&(t.depth={enable:r.enable===void 0||!!r.enable,mask:r.mask===void 0||!!r.mask,func:nY[r.func||Ne.LESS],range:r.range||[0,1]})}},{key:"initBlendDrawParams",value:function(n,t){var r=n.blend;if(r){var i=r.enable,o=r.func,a=r.equation,s=r.color,u=s===void 0?[0,0,0,0]:s;t.blend={enable:!!i,func:{srcRGB:Cp[o&&o.srcRGB||Ne.SRC_ALPHA],srcAlpha:Cp[o&&o.srcAlpha||Ne.SRC_ALPHA],dstRGB:Cp[o&&o.dstRGB||Ne.ONE_MINUS_SRC_ALPHA],dstAlpha:Cp[o&&o.dstAlpha||Ne.ONE_MINUS_SRC_ALPHA]},equation:{rgb:NT[a&&a.rgb||Ne.FUNC_ADD],alpha:NT[a&&a.alpha||Ne.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(n,t){var r=n.stencil;if(r){var i=r.enable,o=r.mask,a=o===void 0?-1:o,s=r.func,u=s===void 0?{cmp:Ne.ALWAYS,ref:0,mask:-1}:s,c=r.opFront,l=c===void 0?{fail:Ne.KEEP,zfail:Ne.KEEP,zpass:Ne.KEEP}:c,h=r.opBack,d=h===void 0?{fail:Ne.KEEP,zfail:Ne.KEEP,zpass:Ne.KEEP}:h;t.stencil={enable:!!i,mask:a,func:Ju(Ju({},u),{},{cmp:rY[u.cmp]}),opFront:{fail:Qu[l.fail],zfail:Qu[l.zfail],zpass:Qu[l.zpass]},opBack:{fail:Qu[d.fail],zfail:Qu[d.zfail],zpass:Qu[d.zpass]}}}}},{key:"initCullDrawParams",value:function(n,t){var r=n.cull;if(r){var i=r.enable,o=r.face,a=o===void 0?Ne.BACK:o;t.cull={enable:!!i,face:iY[a]}}}},{key:"generateDefines",value:function(n){return Object.keys(n).map(function(t){return"#define ".concat(t," ").concat(Number(n[t]))}).join(`
`)}}]),e}(),hY=function(){function e(n,t){Di(this,e),this.texture=void 0,this.width=void 0,this.height=void 0;var r=t.data,i=t.type,o=i===void 0?Ne.UNSIGNED_BYTE:i,a=t.width,s=t.height,u=t.flipY,c=u!==void 0&&u,l=t.format,h=l===void 0?Ne.RGBA:l,d=t.mipmap,f=d!==void 0&&d,p=t.wrapS,g=p===void 0?Ne.CLAMP_TO_EDGE:p,v=t.wrapT,m=v===void 0?Ne.CLAMP_TO_EDGE:v,y=t.aniso,b=y===void 0?0:y,x=t.alignment,w=x===void 0?1:x,E=t.premultiplyAlpha,S=E!==void 0&&E,M=t.mag,k=M===void 0?Ne.NEAREST:M,_=t.min,C=_===void 0?Ne.NEAREST:_,T=t.colorSpace,A=T===void 0?Ne.BROWSER_DEFAULT_WEBGL:T;this.width=a,this.height=s;var D={width:a,height:s,type:p1[o],format:J7[h],wrapS:OT[g],wrapT:OT[m],mag:TT[k],min:TT[C],alignment:w,flipY:c,colorSpace:tY[A],premultiplyAlpha:S,aniso:b};r&&(D.data=r),typeof f=="number"?D.mipmap=eY[f]:typeof f=="boolean"&&(D.mipmap=f),this.texture=n.texture(D)}return Li(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(n){var t=n.width,r=n.height;this.texture.resize(t,r),this.width=t,this.height=r}},{key:"destroy",value:function(){this.texture.destroy()}}]),e}(),dY=function(){function e(){var t=this;Di(this,e),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var r=Ca(Sr.mark(function i(o){return Sr.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!o.uniforms){a.next=3;break}return a.next=3,Promise.all(Object.keys(o.uniforms).map(function(){var s=Ca(Sr.mark(function u(c){var l;return Sr.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!o.uniforms[c]||o.uniforms[c].load===void 0){h.next=5;break}return h.next=3,o.uniforms[c].load();case 3:l=h.sent,o.uniforms[c]=l;case 5:case"end":return h.stop()}},u)}));return function(u){return s.apply(this,arguments)}}()));case 3:return a.abrupt("return",new lY(t.gl,o));case 4:case"end":return a.stop()}},i)}));return function(i){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new $7(t.gl,r)},this.createBuffer=function(r){return new oY(t.gl,r)},this.createElements=function(r){return new uY(t.gl,r)},this.createTexture2D=function(r){return new hY(t.gl,r)},this.createFramebuffer=function(r){return new cY(t.gl,r)},this.useFramebuffer=function(r,i){t.gl({framebuffer:r?r.get():null})(i)},this.createComputeModel=function(){var r=Ca(Sr.mark(function i(o){return Sr.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new sY(t.gl,o));case 1:case"end":return a.stop()}},i)}));return function(i){return r.apply(this,arguments)}}(),this.clear=function(r){var i=r.color,o=r.depth,a=r.stencil,s=r.framebuffer,u=s===void 0?null:s,c={color:i,depth:o,stencil:a};c.framebuffer=u===null?u:u.get(),t.gl.clear(c)},this.setScissor=function(r){t.gl&&t.gl._gl&&(r.enable&&r.box?(t.gl._gl.enable(Ne.SCISSOR_TEST),t.gl._gl.scissor(r.box.x,r.box.y,r.box.width,r.box.height)):t.gl._gl.disable(Ne.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(r){var i=r.x,o=r.y,a=r.width,s=r.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(i,o,a,s),t.gl._refresh())},this.readPixels=function(r){var i=r.framebuffer,o={x:r.x,y:r.y,width:r.width,height:r.height};return i&&(o.framebuffer=i.get()),t.gl.read(o)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}var n;return Li(e,[{key:"init",value:(n=Ca(Sr.mark(function t(r){return Sr.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.inited){i.next=2;break}return i.abrupt("return");case 2:return this.$canvas=r.canvas,i.next=5,new Promise(function(o,a){K7({canvas:r.canvas,attributes:{alpha:!0,antialias:r.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(s,u){!s&&u||a(s),o(u)}})});case 5:this.gl=i.sent,this.inited=!0;case 7:case"end":return i.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}(),fY=function(){function e(){Di(this,e),this.engine=void 0,this.configService=new q7}return Li(e,[{key:"setConfig",value:function(n){this.configService.set(n)}},{key:"setEngine",value:function(n){this.engine=n}},{key:"createEntity",value:function(){return ST()}},{key:"createKernel",value:function(n){var t=new CT(this.engine,this.configService);return typeof n=="string"?t.setBundle(JSON.parse(n)):t.setBundle(n),t.init(),t}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=new e;return t.setConfig(n),t.setEngine(new dY),t}}]),e}();const RT=Ao(Object.freeze(Object.defineProperty({__proto__:null,Kernel:CT,World:fY},Symbol.toStringTag,{value:"Module"})));var ti={};Object.defineProperty(ti,"__esModule",{value:!0}),ti.arrayToTextureData=ti.attributesToTextureData=ti.buildTextureDataWithTwoEdgeAttr=ti.buildTextureData=ti.proccessToFunc=void 0;var pY=Cn(),Ap=mf;ti.proccessToFunc=function(e,n){return e?(0,pY.isNumber)(e)?function(){return e}:e:function(){return n||1}},ti.buildTextureData=function(e,n){var t=[],r=[],i={},o=0;for(o=0;o<e.length;o++){var a=e[o];i[a.id]=o,t.push(a.x),t.push(a.y),t.push(0),t.push(0),r.push([])}for(o=0;o<n.length;o++){var s=n[o],u=(0,Ap.getEdgeTerminal)(s,"source"),c=(0,Ap.getEdgeTerminal)(s,"target");isNaN(i[u])||isNaN(i[c])||(r[i[u]].push(i[c]),r[i[c]].push(i[u]))}var l=0;for(o=0;o<e.length;o++){var h=t.length,d=r[o],f=d.length;t[4*o+2]=h,t[4*o+3]=f,l=Math.max(l,f);for(var p=0;p<f;++p){var g=d[p];t.push(+g)}}for(;t.length%4!=0;)t.push(0);return{maxEdgePerVetex:l,array:new Float32Array(t)}},ti.buildTextureDataWithTwoEdgeAttr=function(e,n,t,r){var i=[],o=[],a={},s=0;for(s=0;s<e.length;s++){var u=e[s];a[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),o.push([])}for(s=0;s<n.length;s++){var c=n[s],l=(0,Ap.getEdgeTerminal)(c,"source"),h=(0,Ap.getEdgeTerminal)(c,"target");o[a[l]].push(a[h]),o[a[l]].push(t(c)),o[a[l]].push(r(c)),o[a[l]].push(0),o[a[h]].push(a[l]),o[a[h]].push(t(c)),o[a[h]].push(r(c)),o[a[h]].push(0)}var d=0;for(s=0;s<e.length;s++){var f=i.length,p=o[s],g=p.length;i[4*s+2]=f+1048576*g/4,i[4*s+3]=0,d=Math.max(d,g/4);for(var v=0;v<g;++v){var m=p[v];i.push(+m)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:d,array:new Float32Array(i)}},ti.attributesToTextureData=function(e,n){var t=[],r=e.length,i={};return n.forEach(function(o){e.forEach(function(a,s){if(i[o[a]]===void 0&&(i[o[a]]=Object.keys(i).length),t.push(i[o[a]]),s===r-1)for(;t.length%4!=0;)t.push(0)})}),{array:new Float32Array(t),count:Object.keys(i).length}},ti.arrayToTextureData=function(e){for(var n=[],t=e.length,r=e[0].length,i=function(a){e.forEach(function(s,u){if(n.push(s[a]),u===t-1)for(;n.length%4!=0;)n.push(0)})},o=0;o<r;o++)i(o);return new Float32Array(n)};var fo={};Object.defineProperty(fo,"__esModule",{value:!0}),fo.clusterBundle=fo.clusterCode=fo.fruchtermanBundle=fo.fruchtermanCode=void 0,fo.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,fo.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',fo.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,fo.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var gY=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ip=Ee&&Ee.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(l){o(l)}}function s(c){try{u(r.throw(c))}catch(l){o(l)}}function u(c){var l;c.done?i(c.value):(l=c.value,l instanceof t?l:new t(function(h){h(l)})).then(a,s)}u((r=r.apply(e,n||[])).next())})},Tp=Ee&&Ee.__generator||function(e,n){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||l[0]!==6&&l[0]!==2)){a=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(l[0]===6&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=n.call(e,a)}catch(h){l=[6,h],r=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.FruchtermanGPULayout=void 0;var vY=Nn,ec=Cn(),jT=RT,zT=ti,FT=fo,mY=Bo,yY=function(e){function n(t){var r=e.call(this)||this;return r.maxIteration=1e3,r.gravity=10,r.speed=1,r.clustering=!1,r.clusterField="cluster",r.clusterGravity=10,r.workerEnabled=!1,r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.updateCfg(t),r}return gY(n,e),n.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},n.prototype.execute=function(){return Ip(this,void 0,void 0,function(){var t,r,i,o,a,s=this;return Tp(this,function(u){switch(u.label){case 0:return(r=(t=this).nodes)&&r.length!==0?(t.width||typeof window=="undefined"||(t.width=window.innerWidth),t.height||typeof window=="undefined"||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),i=t.center,r.length===1?(r[0].x=i[0],r[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(o={},a={},r.forEach(function(c,l){(0,ec.isNumber)(c.x)||(c.x=Math.random()*s.width),(0,ec.isNumber)(c.y)||(c.y=Math.random()*s.height),o[c.id]=c,a[c.id]=l}),t.nodeMap=o,t.nodeIdxMap=a,[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return u.sent(),[2]}})})},n.prototype.executeWithWorker=function(t,r){return Ip(this,void 0,void 0,function(){var i,o,a,s,u,c=this;return Tp(this,function(l){switch(l.label){case 0:return o=(i=this).nodes,a=i.center,o&&o.length!==0?o.length===1?(o[0].x=a[0],o[0].y=a[1],[2]):(s={},u={},o.forEach(function(h,d){(0,ec.isNumber)(h.x)||(h.x=Math.random()*c.width),(0,ec.isNumber)(h.y)||(h.y=Math.random()*c.height),s[h.id]=h,u[h.id]=d}),i.nodeMap=s,i.nodeIdxMap=u,[4,i.run(t,r)]):[2];case 1:return l.sent(),[2]}})})},n.prototype.run=function(t,r){return Ip(this,void 0,void 0,function(){var i,o,a,s,u,c,l,h,d,f,p,g,v,m,y,b,x,w,E,S,M,k,_,C,T,A,D=this;return Tp(this,function(R){switch(R.label){case 0:for(o=(i=this).nodes,a=i.edges,s=i.maxIteration,u=i.center,c=i.height*i.width,l=Math.sqrt(c)/10,h=c/(o.length+1),d=Math.sqrt(h),f=i.speed,p=i.clustering,g=(0,zT.attributesToTextureData)([i.clusterField],o),v=g.array,m=g.count,o.forEach(function(B,F){var N=0,L=0;(0,ec.isNumber)(B.fx)&&(0,ec.isNumber)(B.fy)&&(N=B.fx||.001,L=B.fy||.001),v[4*F+1]=N,v[4*F+2]=L}),y=o.length,b=(0,zT.buildTextureData)(o,a),x=b.maxEdgePerVetex,w=b.array,E=i.workerEnabled,S=E?jT.World.create({canvas:t,engineOptions:{supportCompute:!0}}):jT.World.create({engineOptions:{supportCompute:!0}}),M=i.onLayoutEnd,k=[],_=0;_<m;_++)k.push(0,0,0,0);return C=S.createKernel(FT.fruchtermanBundle).setDispatch([y,1,1]).setBinding({u_Data:w,u_K:d,u_K2:h,u_Gravity:i.gravity,u_ClusterGravity:i.clusterGravity||i.gravity||1,u_Speed:f,u_MaxDisplace:l,u_Clustering:p?1:0,u_Center:u,u_AttributeArray:v,u_ClusterCenters:k,MAX_EDGE_PER_VERTEX:x,VERTEX_COUNT:y}),p&&(T=S.createKernel(FT.clusterBundle).setDispatch([m,1,1]).setBinding({u_Data:w,u_NodeAttributes:v,u_ClusterCenters:k,VERTEX_COUNT:y,CLUSTER_COUNT:m})),A=function(){return Ip(D,void 0,void 0,function(){var B,F;return Tp(this,function(N){switch(N.label){case 0:B=0,N.label=1;case 1:return B<s?[4,C.execute()]:[3,6];case 2:return N.sent(),p?(T.setBinding({u_Data:C}),[4,T.execute()]):[3,4];case 3:N.sent(),C.setBinding({u_ClusterCenters:T}),N.label=4;case 4:C.setBinding({u_MaxDisplace:l*=.99}),N.label=5;case 5:return B++,[3,1];case 6:return[4,C.getOutput()];case 7:return F=N.sent(),t?r.postMessage({type:mY.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:F}):o.forEach(function(L,z){var Z=F[4*z],ne=F[4*z+1];L.x=Z,L.y=ne}),M&&M(),[2]}})})},[4,A()];case 1:return R.sent(),[2]}})})},n.prototype.getType=function(){return"fruchterman-gpu"},n}(vY.Base);Gl.FruchtermanGPULayout=yY;var Ul={},po={};Object.defineProperty(po,"__esModule",{value:!0}),po.aveMovementBundle=po.aveMovementCode=po.gForceBundle=po.gForceCode=void 0,po.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,po.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',po.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,po.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var bY=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),y1=Ee&&Ee.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(l){o(l)}}function s(c){try{u(r.throw(c))}catch(l){o(l)}}function u(c){var l;c.done?i(c.value):(l=c.value,l instanceof t?l:new t(function(h){h(l)})).then(a,s)}u((r=r.apply(e,n||[])).next())})},b1=Ee&&Ee.__generator||function(e,n){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||l[0]!==6&&l[0]!==2)){a=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(l[0]===6&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=n.call(e,a)}catch(h){l=[6,h],r=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.GForceGPULayout=void 0;var xY=Nn,Ho=Cn(),GT=RT,qo=ti,wY=mf,YT=po,EY=Bo,SY=function(e){function n(t){var r=e.call(this)||this;return r.maxIteration=1e3,r.edgeStrength=200,r.nodeStrength=1e3,r.coulombDisScale=.005,r.damping=.9,r.maxSpeed=1e3,r.minMovement=.5,r.interval=.02,r.factor=1,r.linkDistance=1,r.gravity=10,r.workerEnabled=!1,r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.updateCfg(t),r}return bY(n,e),n.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},n.prototype.execute=function(){return y1(this,void 0,void 0,function(){var t,r,i,o,a;return b1(this,function(s){switch(s.label){case 0:return(r=(t=this).nodes)&&r.length!==0?(t.width||typeof window=="undefined"||(t.width=window.innerWidth),t.height||typeof window=="undefined"||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),i=t.center,r.length===1?(r[0].x=i[0],r[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(o={},a={},r.forEach(function(u,c){(0,Ho.isNumber)(u.x)||(u.x=Math.random()*t.width),(0,Ho.isNumber)(u.y)||(u.y=Math.random()*t.height),o[u.id]=u,a[u.id]=c}),t.nodeMap=o,t.nodeIdxMap=a,t.nodeStrength=(0,qo.proccessToFunc)(t.nodeStrength,1),t.edgeStrength=(0,qo.proccessToFunc)(t.edgeStrength,1),[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return s.sent(),[2]}})})},n.prototype.executeWithWorker=function(t,r){var i=this,o=i.nodes,a=i.center;if(o&&o.length!==0){if(o.length===1)return o[0].x=a[0],void(o[0].y=a[1]);var s={},u={};o.forEach(function(c,l){(0,Ho.isNumber)(c.x)||(c.x=Math.random()*i.width),(0,Ho.isNumber)(c.y)||(c.y=Math.random()*i.height),s[c.id]=c,u[c.id]=l}),i.nodeMap=s,i.nodeIdxMap=u,i.nodeStrength=(0,qo.proccessToFunc)(i.nodeStrength,1),i.edgeStrength=(0,qo.proccessToFunc)(i.edgeStrength,1),i.run(t,r)}},n.prototype.run=function(t,r){return y1(this,void 0,void 0,function(){var i,o,a,s,u,c,l,h,d,f,p,g,v,m,y,b,x,w,E,S,M,k,_,C,T,A,D,R=this;return b1(this,function(B){switch(B.label){case 0:for(o=(i=this).nodes,a=i.edges,s=i.maxIteration,i.width||typeof window=="undefined"||(i.width=window.innerWidth),i.height||typeof window=="undefined"||(i.height=window.innerHeight),u=o.length,i.linkDistance=(0,qo.proccessToFunc)(i.linkDistance),i.edgeStrength=(0,qo.proccessToFunc)(i.edgeStrength),c=(0,qo.buildTextureDataWithTwoEdgeAttr)(o,a,i.linkDistance,i.edgeStrength),l=c.maxEdgePerVetex,h=c.array,i.degrees=(0,wY.getDegree)(o.length,i.nodeIdxMap,a).map(function(F){return F.all}),d=[],f=[],p=[],g=[],v=[],m=[],y=[],i.getMass||(i.getMass=function(F){return i.degrees[i.nodeIdxMap[F.id]]||1}),b=i.gravity,x=i.center,o.forEach(function(F,N){d.push(i.getMass(F)),f.push(i.nodeStrength(F)),i.degrees[N]||(i.degrees[N]=0);var L=[x[0],x[1],b];if(i.getCenter){var z=i.getCenter(F,i.degrees[N]);z&&(0,Ho.isNumber)(z[0])&&(0,Ho.isNumber)(z[1])&&(0,Ho.isNumber)(z[2])&&(L=z)}p.push(L[0]),g.push(L[1]),v.push(L[2]),(0,Ho.isNumber)(F.fx)&&(0,Ho.isNumber)(F.fy)?(m.push(F.fx||.001),y.push(F.fy||.001)):(m.push(0),y.push(0))}),w=(0,qo.arrayToTextureData)([d,i.degrees,f,m]),E=(0,qo.arrayToTextureData)([p,g,v,y]),S=i.workerEnabled,M=S?GT.World.create({canvas:t,engineOptions:{supportCompute:!0}}):GT.World.create({engineOptions:{supportCompute:!0}}),k=i.onLayoutEnd,_=[],h.forEach(function(F){_.push(F)}),C=0;C<4;C++)_.push(0);return T=M.createKernel(YT.gForceBundle).setDispatch([u,1,1]).setBinding({u_Data:h,u_damping:i.damping,u_maxSpeed:i.maxSpeed,u_minMovement:i.minMovement,u_coulombDisScale:i.coulombDisScale,u_factor:i.factor,u_NodeAttributeArray1:w,u_NodeAttributeArray2:E,MAX_EDGE_PER_VERTEX:l,VERTEX_COUNT:u,u_AveMovement:_,u_interval:i.interval}),A=M.createKernel(YT.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:h,VERTEX_COUNT:u,u_AveMovement:[0,0,0,0]}),D=function(){return y1(R,void 0,void 0,function(){var F,N,L;return b1(this,function(z){switch(z.label){case 0:F=0,z.label=1;case 1:return F<s?[4,T.execute()]:[3,5];case 2:return z.sent(),A.setBinding({u_Data:T}),[4,A.execute()];case 3:z.sent(),N=Math.max(.02,i.interval-.002*F),T.setBinding({u_interval:N,u_AveMovement:A}),z.label=4;case 4:return F++,[3,1];case 5:return[4,T.getOutput()];case 6:return L=z.sent(),t?r.postMessage({type:EY.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:L}):o.forEach(function(Z,ne){var J=L[4*ne],q=L[4*ne+1];Z.x=J,Z.y=q}),k&&k(),[2]}})})},[4,D()];case 1:return B.sent(),[2]}})})},n.prototype.getType=function(){return"gForce-gpu"},n}(xY.Base);Ul.GForceGPULayout=SY;var Wl={},MY=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.ComboForceLayout=void 0;var _Y=Nn,Kt=Cn(),kY=function(e){function n(t){var r=e.call(this)||this;return r.center=[0,0],r.maxIteration=100,r.gravity=10,r.comboGravity=10,r.linkDistance=10,r.alpha=1,r.alphaMin=.001,r.alphaDecay=1-Math.pow(r.alphaMin,1/300),r.alphaTarget=0,r.velocityDecay=.6,r.edgeStrength=.6,r.nodeStrength=30,r.preventOverlap=!1,r.preventNodeOverlap=!1,r.preventComboOverlap=!1,r.collideStrength=void 0,r.nodeCollideStrength=.5,r.comboCollideStrength=.5,r.comboSpacing=20,r.comboPadding=10,r.optimizeRangeFactor=1,r.onTick=function(){},r.onLayoutEnd=function(){},r.depthAttractiveForceScale=1,r.depthRepulsiveForceScale=2,r.nodes=[],r.edges=[],r.combos=[],r.comboTrees=[],r.width=300,r.height=300,r.bias=[],r.nodeMap={},r.oriComboMap={},r.indexMap={},r.comboMap={},r.previousLayouted=!1,r.updateCfg(t),r}return MY(n,e),n.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},n.prototype.execute=function(){var t=this,r=t.nodes,i=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},r&&r.length!==0){if(r.length===1)return r[0].x=i[0],r[0].y=i[1],void(t.onLayoutEnd&&t.onLayoutEnd());t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}else t.onLayoutEnd&&t.onLayoutEnd()},n.prototype.run=function(){var t=this,r=t.nodes,i=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||typeof window=="undefined"||(t.width=window.innerWidth),t.height||typeof window=="undefined"||(t.height=window.innerHeight);var o=t.center,a=t.velocityDecay,s=t.comboMap;t.previousLayouted||t.initPos(s);for(var u=function(d){var f=[];r.forEach(function(p,g){f[g]={x:0,y:0}}),t.applyCalculate(f),t.applyComboCenterForce(f),r.forEach(function(p,g){(0,Kt.isNumber)(p.x)&&(0,Kt.isNumber)(p.y)&&(p.x+=f[g].x*a,p.y+=f[g].y*a)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},c=0;c<i;c++)u();var l=[0,0];r.forEach(function(d){(0,Kt.isNumber)(d.x)&&(0,Kt.isNumber)(d.y)&&(l[0]+=d.x,l[1]+=d.y)}),l[0]/=r.length,l[1]/=r.length;var h=[o[0]-l[0],o[1]-l[1]];r.forEach(function(d,f){(0,Kt.isNumber)(d.x)&&(0,Kt.isNumber)(d.y)&&(d.x+=h[0],d.y+=h[1])}),t.combos.forEach(function(d){var f=s[d.id];f&&f.empty&&(d.x=f.cx||d.x,d.y=f.cy||d.y)}),t.previousLayouted=!0},n.prototype.initVals=function(){var t=this,r=t.edges,i=t.nodes,o=t.combos,a={},s={},u={};i.forEach(function(B,F){s[B.id]=B,u[B.id]=F}),t.nodeMap=s,t.indexMap=u;var c={};o.forEach(function(B){c[B.id]=B}),t.oriComboMap=c,t.comboMap=t.getComboMap();var l=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||l,t.preventNodeOverlap=t.preventNodeOverlap||l;var h=t.collideStrength;h&&(t.comboCollideStrength=h,t.nodeCollideStrength=h),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(var d=0;d<r.length;++d){var f=(0,Kt.getEdgeTerminal)(r[d],"source"),p=(0,Kt.getEdgeTerminal)(r[d],"target");a[f]?a[f]++:a[f]=1,a[p]?a[p]++:a[p]=1}var g=[];for(d=0;d<r.length;++d)f=(0,Kt.getEdgeTerminal)(r[d],"source"),p=(0,Kt.getEdgeTerminal)(r[d],"target"),g[d]=a[f]/(a[f]+a[p]);this.bias=g;var v,m,y=t.nodeSize,b=t.nodeSpacing;if(m=(0,Kt.isNumber)(b)?function(){return b}:(0,Kt.isFunction)(b)?b:function(){return 0},this.nodeSpacing=m,y)if((0,Kt.isFunction)(y))v=function(B){return y(B)};else if((0,Kt.isArray)(y)){var x=(y[0]>y[1]?y[0]:y[1])/2;v=function(B){return x}}else{var w=y/2;v=function(B){return w}}else v=function(B){return B.size?(0,Kt.isArray)(B.size)?(B.size[0]>B.size[1]?B.size[0]:B.size[1])/2:(0,Kt.isObject)(B.size)?(B.size.width>B.size.height?B.size.width:B.size.height)/2:B.size/2:10};this.nodeSize=v;var E,S=t.comboSpacing;E=(0,Kt.isNumber)(S)?function(){return S}:(0,Kt.isFunction)(S)?S:function(){return 0},this.comboSpacing=E;var M,k=t.comboPadding;M=(0,Kt.isNumber)(k)?function(){return k}:(0,Kt.isArray)(k)?function(){return Math.max.apply(null,k)}:(0,Kt.isFunction)(k)?k:function(){return 0},this.comboPadding=M;var _,C=this.linkDistance;C||(C=10),_=(0,Kt.isNumber)(C)?function(B){return C}:C,this.linkDistance=_;var T,A=this.edgeStrength;A||(A=1),T=(0,Kt.isNumber)(A)?function(B){return A}:A,this.edgeStrength=T;var D,R=this.nodeStrength;R||(R=30),D=(0,Kt.isNumber)(R)?function(B){return R}:R,this.nodeStrength=D},n.prototype.initPos=function(t){this.nodes.forEach(function(r,i){var o=r.comboId,a=t[o];o&&a?(r.x=a.cx+100/(i+1),r.y=a.cy+100/(i+1)):(r.x=100/(i+1),r.y=100/(i+1))})},n.prototype.getComboMap=function(){var t=this,r=t.nodeMap,i=t.comboTrees,o=t.oriComboMap,a={};return(i||[]).forEach(function(s){var u=[];(0,Kt.traverseTreeUp)(s,function(c){if(c.itemType==="node"||!o[c.id])return!0;if(a[c.id]===void 0){var l={id:c.id,name:c.id,cx:0,cy:0,count:0,depth:t.oriComboMap[c.id].depth||0,children:[]};a[c.id]=l}var h=c.children;h&&h.forEach(function(p){if(!a[p.id]&&!r[p.id])return!0;u.push(p)});var d=a[c.id];if(d.cx=0,d.cy=0,u.length===0){d.empty=!0;var f=o[c.id];d.cx=f.x,d.cy=f.y}return u.forEach(function(p){if(d.count++,p.itemType!=="node"){var g=a[p.id];return(0,Kt.isNumber)(g.cx)&&(d.cx+=g.cx),void((0,Kt.isNumber)(g.cy)&&(d.cy+=g.cy))}var v=r[p.id];v&&((0,Kt.isNumber)(v.x)&&(d.cx+=v.x),(0,Kt.isNumber)(v.y)&&(d.cy+=v.y))}),d.cx/=d.count||1,d.cy/=d.count||1,d.children=u,!0})}),a},n.prototype.applyComboCenterForce=function(t){var r=this,i=r.gravity,o=r.comboGravity||i,a=this.alpha,s=r.comboTrees,u=r.indexMap,c=r.nodeMap,l=r.comboMap;(s||[]).forEach(function(h){(0,Kt.traverseTreeUp)(h,function(d){if(d.itemType==="node"||!l[d.id])return!0;var f=l[d.id],p=(f.depth+1)/10*.5,g=f.cx,v=f.cy;return f.cx=0,f.cy=0,f.children.forEach(function(m){if(m.itemType!=="node"){var y=l[m.id];return y&&(0,Kt.isNumber)(y.cx)&&(f.cx+=y.cx),void(y&&(0,Kt.isNumber)(y.cy)&&(f.cy+=y.cy))}var b=c[m.id],x=b.x-g||.005,w=b.y-v||.005,E=Math.sqrt(x*x+w*w),S=u[b.id],M=o*a/E*p;t[S].x-=x*M,t[S].y-=w*M,(0,Kt.isNumber)(b.x)&&(f.cx+=b.x),(0,Kt.isNumber)(b.y)&&(f.cy+=b.y)}),f.cx/=f.count||1,f.cy/=f.count||1,!0})})},n.prototype.applyCalculate=function(t){var r=this,i=r.comboMap,o=r.nodes,a={};o.forEach(function(s,u){o.forEach(function(c,l){if(!(u<l)){var h=s.x-c.x||.005,d=s.y-c.y||.005,f=h*h+d*d,p=Math.sqrt(f);f<1&&(f=p),a["".concat(s.id,"-").concat(c.id)]={vx:h,vy:d,vl2:f,vl:p},a["".concat(c.id,"-").concat(s.id)]={vl2:f,vl:p,vx:-h,vy:-d}}})}),r.updateComboSizes(i),r.calRepulsive(t,a),r.calAttractive(t,a),r.preventComboOverlap&&r.comboNonOverlapping(t,i)},n.prototype.updateComboSizes=function(t){var r=this,i=r.comboTrees,o=r.nodeMap,a=r.nodeSize,s=r.comboSpacing,u=r.comboPadding;(i||[]).forEach(function(c){var l=[];(0,Kt.traverseTreeUp)(c,function(h){if(h.itemType==="node")return!0;var d=t[h.id];if(!d)return!1;var f=h.children;f&&f.forEach(function(v){(t[v.id]||o[v.id])&&l.push(v)}),d.minX=1/0,d.minY=1/0,d.maxX=-1/0,d.maxY=-1/0,l.forEach(function(v){if(v.itemType!=="node")return!0;var m=o[v.id];if(!m)return!0;var y=a(m),b=m.x-y,x=m.y-y,w=m.x+y,E=m.y+y;d.minX>b&&(d.minX=b),d.minY>x&&(d.minY=x),d.maxX<w&&(d.maxX=w),d.maxY<E&&(d.maxY=E)});var p=r.oriComboMap[h.id].size||10;(0,Kt.isArray)(p)&&(p=p[0]);var g=Math.max(d.maxX-d.minX,d.maxY-d.minY,p);return d.r=g/2+s(d)/2+u(d),!0})})},n.prototype.comboNonOverlapping=function(t,r){var i=this,o=i.comboTree,a=i.comboCollideStrength,s=i.indexMap,u=i.nodeMap;(0,Kt.traverseTreeUp)(o,function(c){if(!r[c.id]&&!u[c.id]&&c.id!=="comboTreeRoot")return!1;var l=c.children;return l&&l.length>1&&l.forEach(function(h,d){if(h.itemType==="node")return!1;var f=r[h.id];f&&l.forEach(function(p,g){if(d<=g||p.itemType==="node")return!1;var v=r[p.id];if(!v)return!1;var m=f.cx-v.cx||.005,y=f.cy-v.cy||.005,b=m*m+y*y,x=f.r||1,w=v.r||1,E=x+w,S=w*w,M=x*x;if(b<E*E){var k=h.children;if(!k||k.length===0)return!1;var _=p.children;if(!_||_.length===0)return!1;var C=Math.sqrt(b),T=(E-C)/C*a,A=m*T,D=y*T,R=S/(M+S),B=1-R;k.forEach(function(F){if(F.itemType!=="node")return!1;if(u[F.id]){var N=s[F.id];_.forEach(function(L){if(L.itemType!=="node"||!u[L.id])return!1;var z=s[L.id];t[N].x+=A*R,t[N].y+=D*R,t[z].x-=A*B,t[z].y-=D*B})}})}})}),!0})},n.prototype.calRepulsive=function(t,r){var i=this,o=i.nodes,a=i.width*i.optimizeRangeFactor,s=i.nodeStrength,u=i.alpha,c=i.nodeCollideStrength,l=i.preventNodeOverlap,h=i.nodeSize,d=i.nodeSpacing,f=i.depthRepulsiveForceScale,p=i.center;o.forEach(function(g,v){if(g.x&&g.y){if(p){var m=i.gravity,y=g.x-p[0]||.005,b=g.y-p[1]||.005,x=Math.sqrt(y*y+b*b);t[v].x-=y*m*u/x,t[v].y-=b*m*u/x}o.forEach(function(w,E){if(v!==E&&w.x&&w.y){var S=r["".concat(g.id,"-").concat(w.id)],M=S.vl2,k=S.vl;if(!(k>a)){var _=r["".concat(g.id,"-").concat(w.id)],C=_.vx,T=_.vy,A=Math.log(Math.abs(w.depth-g.depth)/10)+1||1;A=A<1?1:A,w.comboId!==g.comboId&&(A+=1);var D=A?Math.pow(f,A):1,R=s(w)*u/M*D;if(t[v].x+=C*R,t[v].y+=T*R,v<E&&l){var B=h(g)+d(g)||1,F=h(w)+d(w)||1,N=B+F;if(M<N*N){var L=(N-k)/k*c,z=F*F,Z=z/(B*B+z),ne=C*L,J=T*L;t[v].x+=ne*Z,t[v].y+=J*Z,Z=1-Z,t[E].x-=ne*Z,t[E].y-=J*Z}}}}})}})},n.prototype.calAttractive=function(t,r){var i=this,o=i.edges,a=i.linkDistance,s=i.alpha,u=i.edgeStrength,c=i.bias,l=i.depthAttractiveForceScale;o.forEach(function(h,d){var f=(0,Kt.getEdgeTerminal)(h,"source"),p=(0,Kt.getEdgeTerminal)(h,"target");if(f&&p&&f!==p){var g=i.indexMap[f],v=i.indexMap[p],m=i.nodeMap[f],y=i.nodeMap[p];if(m&&y){var b=m.depth===y.depth?0:Math.log(Math.abs(m.depth-y.depth)/10);m.comboId===y.comboId&&(b/=2);var x=b?Math.pow(l,b):1;if(m.comboId!==y.comboId&&x===1?x=l/2:m.comboId===y.comboId&&(x=2),(0,Kt.isNumber)(y.x)&&(0,Kt.isNumber)(m.x)&&(0,Kt.isNumber)(y.y)&&(0,Kt.isNumber)(m.y)){var w=r["".concat(p,"-").concat(f)],E=w.vl,S=w.vx,M=w.vy,k=(E-a(h))/E*s*u(h)*x,_=S*k,C=M*k,T=c[d];t[v].x-=_*T,t[v].y-=C*T,t[g].x+=_*(1-T),t[g].y+=C*(1-T)}}}})},n.prototype.getType=function(){return"comboForce"},n}(_Y.Base);Wl.ComboForceLayout=kY;var XT,Vl={};function UT(){if(XT)return Vl;XT=1;var e=Ee&&Ee.__extends||function(){var s=function(u,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(l[d]=h[d])},s(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function l(){this.constructor=u}s(u,c),u.prototype=c===null?Object.create(c):(l.prototype=c.prototype,new l)}}(),n=Ee&&Ee.__assign||function(){return n=Object.assign||function(s){for(var u,c=1,l=arguments.length;c<l;c++)for(var h in u=arguments[c])Object.prototype.hasOwnProperty.call(u,h)&&(s[h]=u[h]);return s},n.apply(this,arguments)};Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.ComboCombinedLayout=void 0;var t=Bo,r=Nn,i=Cn(),o=eO(),a=function(s){function u(c){var l=s.call(this)||this;return l.center=[0,0],l.nodes=[],l.edges=[],l.combos=[],l.comboEdges=[],l.comboPadding=10,l.comboTrees=[],l.updateCfg(c),l}return e(u,s),u.prototype.getDefaultCfg=function(){return{}},u.prototype.execute=function(){var c=this,l=c.nodes,h=c.center;if(l&&l.length!==0){if(l.length===1)return l[0].x=h[0],l[0].y=h[1],void(c.onLayoutEnd&&c.onLayoutEnd());c.initVals(),c.run(),c.onLayoutEnd&&c.onLayoutEnd()}else c.onLayoutEnd&&c.onLayoutEnd()},u.prototype.run=function(){var c,l=this,h=l.nodes,d=l.edges,f=l.combos,p=l.comboEdges,g=l.center,v={};h.forEach(function(D){v[D.id]=D});var m={};f.forEach(function(D){m[D.id]=D});var y=l.getInnerGraphs(v),b=[],x=[],w={},E=!0;this.comboTrees.forEach(function(D){var R=y[D.id];if(R){var B=n(n({},D),{x:R.x||m[D.id].x,y:R.y||m[D.id].y,fx:R.fx||m[D.id].fx,fy:R.fy||m[D.id].fy,mass:R.mass||m[D.id].mass,size:R.size});x.push(B),isNaN(B.x)||B.x===0||isNaN(B.y)||B.y===0?(B.x=100*Math.random(),B.y=100*Math.random()):E=!1,b.push(D.id),(0,i.traverseTreeUp)(D,function(F){return F.id!==D.id&&(w[F.id]=D.id),!0})}}),h.forEach(function(D){if(!D.comboId||!m[D.comboId]){var R=n({},D);x.push(R),isNaN(R.x)||R.x===0||isNaN(R.y)||R.y===0?(R.x=100*Math.random(),R.y=100*Math.random()):E=!1,b.push(D.id)}});var S=[];if(d.concat(p).forEach(function(D){var R=w[D.source]||D.source,B=w[D.target]||D.target;R!==B&&b.includes(R)&&b.includes(B)&&S.push({source:R,target:B})}),x==null?void 0:x.length){if(x.length===1)x[0].x=g[0],x[0].y=g[1];else{var M={nodes:x,edges:S},k=this.outerLayout||new o.GForceLayout({gravity:1,factor:4,linkDistance:function(D,R,B){var F,N,L=((((F=R.size)===null||F===void 0?void 0:F[0])||30)+(((N=B.size)===null||N===void 0?void 0:N[0])||30))/2;return Math.min(1.5*L,700)}}),_=(c=k.getType)===null||c===void 0?void 0:c.call(k);k.updateCfg({center:g,kg:5,preventOverlap:!0,animate:!1}),E&&t.FORCE_LAYOUT_TYPE_MAP[_]&&(x.length<100?new o.MDSLayout:new o.GridLayout).layout(M),k.layout(M)}x.forEach(function(D){var R=y[D.id];if(R)R.visited=!0,R.x=D.x,R.y=D.y,R.nodes.forEach(function(F){F.x+=D.x,F.y+=D.y});else{var B=v[D.id];B&&(B.x=D.x,B.y=D.y)}})}for(var C=Object.keys(y),T=function(D){var R=C[D],B=y[R];if(!B)return"continue";B.nodes.forEach(function(F){B.visited||(F.x+=B.x||0,F.y+=B.y||0),v[F.id]&&(v[F.id].x=F.x,v[F.id].y=F.y)}),m[R]&&(m[R].x=B.x,m[R].y=B.y)},A=C.length-1;A>=0;A--)T(A);return{nodes:h,edges:d,combos:f,comboEdges:p}},u.prototype.getInnerGraphs=function(c){var l=this,h=l.comboTrees,d=l.nodeSize,f=l.edges,p=l.comboPadding,g=l.spacing,v={},m=this.innerLayout||new o.ConcentricLayout({type:"concentric",sortBy:"id"});return m.center=[0,0],m.preventOverlap=!0,m.nodeSpacing=g,(h||[]).forEach(function(y){(0,i.traverseTreeUp)(y,function(b){var x,w=(p==null?void 0:p(b))||10;if((0,i.isArray)(w)&&(w=Math.max.apply(Math,w)),(x=b.children)===null||x===void 0?void 0:x.length){var E=b.children.map(function(L){if(L.itemType==="combo")return v[L.id];var z=c[L.id]||{};return n(n({},z),L)}),S=E.map(function(L){return L.id}),M={nodes:E,edges:f.filter(function(L){return S.includes(L.source)&&S.includes(L.target)})},k=1/0;E.forEach(function(L){var z;L.size||(L.size=((z=v[L.id])===null||z===void 0?void 0:z.size)||(d==null?void 0:d(L))||[30,30]),(0,i.isNumber)(L.size)&&(L.size=[L.size,L.size]),k>L.size[0]&&(k=L.size[0]),k>L.size[1]&&(k=L.size[1])}),m.layout(M);var _=(0,i.getLayoutBBox)(E),C=_.minX,T=_.minY,A=_.maxX,D=_.maxY,R={x:(A+C)/2,y:(D+T)/2};M.nodes.forEach(function(L){L.x-=R.x,L.y-=R.y});var B=Math.max(A-C,k)+2*w,F=Math.max(D-T,k)+2*w;v[b.id]={id:b.id,nodes:E,size:[B,F]}}else if(b.itemType==="combo"){var N=w?[2*w,2*w]:[30,30];v[b.id]={id:b.id,nodes:[],size:N}}return!0})}),v},u.prototype.initVals=function(){var c,l,h=this,d=h.nodeSize,f=h.spacing;if(l=(0,i.isNumber)(f)?function(){return f}:(0,i.isFunction)(f)?f:function(){return 0},this.spacing=l,d)if((0,i.isFunction)(d))c=function(y){var b=d(y),x=l(y);return(0,i.isArray)(y.size)?((y.size[0]>y.size[1]?y.size[0]:y.size[1])+x)/2:((b||10)+x)/2};else if((0,i.isArray)(d)){var p=(d[0]>d[1]?d[0]:d[1])/2;c=function(y){return p+l(y)/2}}else{var g=d/2;c=function(y){return g+l(y)/2}}else c=function(y){var b=l(y);return y.size?(0,i.isArray)(y.size)?((y.size[0]>y.size[1]?y.size[0]:y.size[1])+b)/2:(0,i.isObject)(y.size)?((y.size.width>y.size.height?y.size.width:y.size.height)+b)/2:(y.size+b)/2:10+b/2};this.nodeSize=c;var v,m=h.comboPadding;v=(0,i.isNumber)(m)?function(){return m}:(0,i.isArray)(m)?function(){return Math.max.apply(null,m)}:(0,i.isFunction)(m)?m:function(){return 0},this.comboPadding=v},u.prototype.getType=function(){return"comboCombined"},u}(r.Base);return Vl.ComboCombinedLayout=a,Vl}var Hl={},x1={};Object.defineProperty(x1,"__esModule",{value:!0});var CY=function(){function e(n){this.id=n.id||0,this.rx=n.rx,this.ry=n.ry,this.fx=0,this.fy=0,this.mass=n.mass,this.degree=n.degree,this.g=n.g||0}return e.prototype.distanceTo=function(n){var t=this.rx-n.rx,r=this.ry-n.ry;return Math.hypot(t,r)},e.prototype.setPos=function(n,t){this.rx=n,this.ry=t},e.prototype.resetForce=function(){this.fx=0,this.fy=0},e.prototype.addForce=function(n){var t=n.rx-this.rx,r=n.ry-this.ry,i=Math.hypot(t,r);i=i<1e-4?1e-4:i;var o=this.g*(this.degree+1)*(n.degree+1)/i;this.fx+=o*t/i,this.fy+=o*r/i},e.prototype.in=function(n){return n.contains(this.rx,this.ry)},e.prototype.add=function(n){var t=this.mass+n.mass;return new e({rx:(this.rx*this.mass+n.rx*n.mass)/t,ry:(this.ry*this.mass+n.ry*n.mass)/t,mass:t,degree:this.degree+n.degree})},e}();x1.default=CY;var w1={};Object.defineProperty(w1,"__esModule",{value:!0});var AY=function(){function e(n){this.xmid=n.xmid,this.ymid=n.ymid,this.length=n.length,this.massCenter=n.massCenter||[0,0],this.mass=n.mass||1}return e.prototype.getLength=function(){return this.length},e.prototype.contains=function(n,t){var r=this.length/2;return n<=this.xmid+r&&n>=this.xmid-r&&t<=this.ymid+r&&t>=this.ymid-r},e.prototype.NW=function(){return new e({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},e.prototype.NE=function(){return new e({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},e.prototype.SW=function(){return new e({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},e.prototype.SE=function(){return new e({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},e}();w1.default=AY;var E1={};Object.defineProperty(E1,"__esModule",{value:!0});var IY=function(){function e(n){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,n!=null&&(this.quad=n)}return e.prototype.insert=function(n){this.body!=null?this._isExternal()?(this.quad&&(this.NW=new e(this.quad.NW()),this.NE=new e(this.quad.NE()),this.SW=new e(this.quad.SW()),this.SE=new e(this.quad.SE())),this._putBody(this.body),this._putBody(n),this.body=this.body.add(n)):(this.body=this.body.add(n),this._putBody(n)):this.body=n},e.prototype._putBody=function(n){this.quad&&(n.in(this.quad.NW())&&this.NW?this.NW.insert(n):n.in(this.quad.NE())&&this.NE?this.NE.insert(n):n.in(this.quad.SW())&&this.SW?this.SW.insert(n):n.in(this.quad.SE())&&this.SE&&this.SE.insert(n))},e.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},e.prototype.updateForce=function(n){this.body!=null&&n!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(n)<this.theta?n.addForce(this.body):(this.NW&&this.NW.updateForce(n),this.NE&&this.NE.updateForce(n),this.SW&&this.SW.updateForce(n),this.SE&&this.SE.updateForce(n)))},e}();E1.default=IY;var TY=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),S1=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.ForceAtlas2Layout=void 0;var OY=Nn,Zo=Cn(),NY=S1(x1),PY=S1(w1),DY=S1(E1),LY=function(e){function n(t){var r=e.call(this)||this;return r.center=[0,0],r.width=300,r.height=300,r.nodes=[],r.edges=[],r.kr=5,r.kg=1,r.mode="normal",r.preventOverlap=!1,r.dissuadeHubs=!1,r.barnesHut=void 0,r.maxIteration=0,r.ks=.1,r.ksmax=10,r.tao=.1,r.onLayoutEnd=function(){},r.prune=void 0,r.updateCfg(t),r}return TY(n,e),n.prototype.getDefaultCfg=function(){return{}},n.prototype.execute=function(){var t=this,r=t.nodes,i=t.onLayoutEnd,o=t.prune,a=t.maxIteration;t.width||typeof window=="undefined"||(t.width=window.innerWidth),t.height||typeof window=="undefined"||(t.height=window.innerHeight);for(var s=[],u=r.length,c=0;c<u;c+=1){var l=r[c],h=10,d=10;(0,Zo.isNumber)(l.size)&&(h=l.size,d=l.size),(0,Zo.isArray)(l.size)?(isNaN(l.size[0])||(h=l.size[0]),isNaN(l.size[1])||(d=l.size[1])):(0,Zo.isObject)(l.size)&&(h=l.size.width,d=l.size.height),t.getWidth&&!isNaN(t.getWidth(l))&&(d=t.getWidth(l)),t.getHeight&&!isNaN(t.getHeight(l))&&(h=t.getHeight(l));var f=Math.max(h,d);s.push(f)}t.barnesHut===void 0&&u>250&&(t.barnesHut=!0),t.prune===void 0&&u>100&&(t.prune=!0),this.maxIteration!==0||t.prune?this.maxIteration===0&&o&&(a=100,u<=200&&u>100?a=500:u>200&&(a=950),this.maxIteration=a):(a=250,u<=200&&u>100?a=1e3:u>200&&(a=1200),this.maxIteration=a),t.kr||(t.kr=50,u>100&&u<=500?t.kr=20:u>500&&(t.kr=1)),t.kg||(t.kg=20,u>100&&u<=500?t.kg=10:u>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(s),i()},n.prototype.updateNodesByForces=function(t){for(var r=this,i=r.edges,o=r.maxIteration,a=r.nodes,s=i.filter(function(S){return(0,Zo.getEdgeTerminal)(S,"source")!==(0,Zo.getEdgeTerminal)(S,"target")}),u=a.length,c=s.length,l=[],h={},d={},f=[],p=0;p<u;p+=1)h[a[p].id]=p,l[p]=0,(a[p].x===void 0||isNaN(a[p].x))&&(a[p].x=1e3*Math.random()),(a[p].y===void 0||isNaN(a[p].y))&&(a[p].y=1e3*Math.random()),f.push({x:a[p].x,y:a[p].y});for(p=0;p<c;p+=1){for(var g=void 0,v=void 0,m=0,y=0,b=0;b<u;b+=1){var x=(0,Zo.getEdgeTerminal)(s[p],"source"),w=(0,Zo.getEdgeTerminal)(s[p],"target");a[b].id===x?(g=a[b],m=b):a[b].id===w&&(v=a[b],y=b),d[p]={sourceIdx:m,targetIdx:y}}g&&(l[h[g.id]]+=1),v&&(l[h[v.id]]+=1)}var E=o;if(a=this.iterate(E,h,d,c,l,t),r.prune){for(b=0;b<c;b+=1)l[d[b].sourceIdx]<=1?(a[d[b].sourceIdx].x=a[d[b].targetIdx].x,a[d[b].sourceIdx].y=a[d[b].targetIdx].y):l[d[b].targetIdx]<=1&&(a[d[b].targetIdx].x=a[d[b].sourceIdx].x,a[d[b].targetIdx].y=a[d[b].sourceIdx].y);r.prune=!1,r.barnesHut=!1,E=100,a=this.iterate(E,h,d,c,l,t)}return a},n.prototype.iterate=function(t,r,i,o,a,s){for(var u=this,c=u.nodes,l=u.kr,h=u.preventOverlap,d=u.barnesHut,f=c.length,p=0,g=t,v=[],m=[],y=[],b=0;b<f;b+=1)if(v[2*b]=0,v[2*b+1]=0,d){var x={id:b,rx:c[b].x,ry:c[b].y,mass:1,g:l,degree:a[b]};y[b]=new NY.default(x)}for(;g>0;){for(b=0;b<f;b+=1)m[2*b]=v[2*b],m[2*b+1]=v[2*b+1],v[2*b]=0,v[2*b+1]=0;v=this.getAttrForces(g,50,o,r,i,a,s,v),v=d&&(h&&g>50||!h)?this.getOptRepGraForces(v,y,a):this.getRepGraForces(g,50,v,100,s,a);var w=this.updatePos(v,m,p,a);c=w.nodes,p=w.sg,g--,u.tick&&u.tick()}return c},n.prototype.getAttrForces=function(t,r,i,o,a,s,u,c){for(var l=this,h=l.nodes,d=l.preventOverlap,f=l.dissuadeHubs,p=l.mode,g=l.prune,v=0;v<i;v+=1){var m=h[a[v].sourceIdx],y=a[v].sourceIdx,b=h[a[v].targetIdx],x=a[v].targetIdx;if(!g||!(s[y]<=1||s[x]<=1)){var w=[b.x-m.x,b.y-m.y],E=Math.hypot(w[0],w[1]);E=E<1e-4?1e-4:E,w[0]=w[0]/E,w[1]=w[1]/E,d&&t<r&&(E=E-u[y]-u[x]);var S=E,M=S;p==="linlog"&&(M=S=Math.log(1+E)),f&&(S=E/s[y],M=E/s[x]),d&&t<r&&E<=0?(S=0,M=0):d&&t<r&&E>0&&(S=E,M=E),c[2*o[m.id]]+=S*w[0],c[2*o[b.id]]-=M*w[0],c[2*o[m.id]+1]+=S*w[1],c[2*o[b.id]+1]-=M*w[1]}}return c},n.prototype.getRepGraForces=function(t,r,i,o,a,s){for(var u=this,c=u.nodes,l=u.preventOverlap,h=u.kr,d=u.kg,f=u.center,p=u.prune,g=c.length,v=0;v<g;v+=1){for(var m=v+1;m<g;m+=1)if(!p||!(s[v]<=1||s[m]<=1)){var y=[c[m].x-c[v].x,c[m].y-c[v].y],b=Math.hypot(y[0],y[1]);b=b<1e-4?1e-4:b,y[0]=y[0]/b,y[1]=y[1]/b,l&&t<r&&(b=b-a[v]-a[m]);var x=h*(s[v]+1)*(s[m]+1)/b;l&&t<r&&b<0?x=o*(s[v]+1)*(s[m]+1):l&&t<r&&b===0?x=0:l&&t<r&&b>0&&(x=h*(s[v]+1)*(s[m]+1)/b),i[2*v]-=x*y[0],i[2*m]+=x*y[0],i[2*v+1]-=x*y[1],i[2*m+1]+=x*y[1]}var w=[c[v].x-f[0],c[v].y-f[1]],E=Math.hypot(w[0],w[1]);w[0]=w[0]/E,w[1]=w[1]/E;var S=d*(s[v]+1);i[2*v]-=S*w[0],i[2*v+1]-=S*w[1]}return i},n.prototype.getOptRepGraForces=function(t,r,i){for(var o=this,a=o.nodes,s=o.kg,u=o.center,c=o.prune,l=a.length,h=9e10,d=-9e10,f=9e10,p=-9e10,g=0;g<l;g+=1)c&&i[g]<=1||(r[g].setPos(a[g].x,a[g].y),a[g].x>=d&&(d=a[g].x),a[g].x<=h&&(h=a[g].x),a[g].y>=p&&(p=a[g].y),a[g].y<=f&&(f=a[g].y));var v={xmid:(d+h)/2,ymid:(p+f)/2,length:Math.max(d-h,p-f),massCenter:u,mass:l},m=new PY.default(v),y=new DY.default(m);for(g=0;g<l;g+=1)c&&i[g]<=1||r[g].in(m)&&y.insert(r[g]);for(g=0;g<l;g+=1)if(!(c&&i[g]<=1)){r[g].resetForce(),y.updateForce(r[g]),t[2*g]-=r[g].fx,t[2*g+1]-=r[g].fy;var b=[a[g].x-u[0],a[g].y-u[1]],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x;var w=s*(i[g]+1);t[2*g]-=w*b[0],t[2*g+1]-=w*b[1]}return t},n.prototype.updatePos=function(t,r,i,o){for(var a=this,s=a.nodes,u=a.ks,c=a.tao,l=a.prune,h=a.ksmax,d=s.length,f=[],p=[],g=0,v=0,m=0;m<d;m+=1)if(!(l&&o[m]<=1)){var y=[t[2*m]-r[2*m],t[2*m+1]-r[2*m+1]],b=Math.hypot(y[0],y[1]),x=[t[2*m]+r[2*m],t[2*m+1]+r[2*m+1]],w=Math.hypot(x[0],x[1]);f[m]=b,p[m]=w/2,g+=(o[m]+1)*f[m],v+=(o[m]+1)*p[m]}var E=i;for(i=c*v/g,E!==0&&(i=i>1.5*E?1.5*E:i),m=0;m<d;m+=1)if(!(l&&o[m]<=1||(0,Zo.isNumber)(s[m].fx)&&(0,Zo.isNumber)(s[m].fy))){var S=u*i/(1+i*Math.sqrt(f[m])),M=Math.hypot(t[2*m],t[2*m+1]),k=h/(M=M<1e-4?1e-4:M),_=(S=S>k?k:S)*t[2*m],C=S*t[2*m+1];s[m].x+=_,s[m].y+=C}return{nodes:s,sg:i}},n}(OY.Base);Hl.ForceAtlas2Layout=LY;var ql={},M1={},_1={},k1={},tc=Ee&&Ee.__assign||function(){return tc=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},tc.apply(this,arguments)};Object.defineProperty(k1,"__esModule",{value:!0});var BY=function(){function e(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return e.prototype.init=function(n,t,r){this.cells=[],this.CELL_W=r.CELL_W||e.DEFAULT_CELL_W,this.CELL_H=r.CELL_H||e.DEFAULT_CELL_H,this.columnNum=Math.ceil(n/this.CELL_W),this.rowNum=Math.ceil(t/this.CELL_H),e.MIN_DIST=Math.pow(n,2)+Math.pow(t,2);for(var i=0;i<this.columnNum;i++){for(var o=[],a=0;a<this.rowNum;a++){var s={dx:i,dy:a,x:i*this.CELL_W,y:a*this.CELL_H,occupied:!1};o.push(s)}this.cells.push(o)}},e.prototype.findGridByNodeId=function(n){for(var t,r,i=0;i<this.columnNum;i++)for(var o=0;o<this.rowNum;o++)if(this.cells[i][o].node&&((r=(t=this.cells[i][o])===null||t===void 0?void 0:t.node)===null||r===void 0?void 0:r.id)===n)return{column:i,row:o};return null},e.prototype.sqdist=function(n,t){return Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)},e.prototype.occupyNearest=function(n){for(var t,r=e.MIN_DIST,i=null,o=0;o<this.columnNum;o++)for(var a=0;a<this.rowNum;a++)!this.cells[o][a].occupied&&(t=this.sqdist(n,this.cells[o][a]))<r&&(r=t,i=this.cells[o][a]);return i&&(i.occupied=!0),i},e.prototype.insertColumn=function(n,t){if(!(t<=0)){for(var r=0;r<t;r++){this.cells[r+this.columnNum]=[];for(var i=0;i<this.rowNum;i++)this.cells[r+this.columnNum][i]={dx:r,dy:i,x:r*this.CELL_W,y:i*this.CELL_H,occupied:!1,node:null}}for(r=this.columnNum-1;r>n;r--)for(i=0;i<this.rowNum;i++)this.cells[r+t][i]=tc(tc({},this.cells[r][i]),{x:(r+t)*this.CELL_W,y:i*this.CELL_H}),this.cells[r][i]={x:r*this.CELL_W,y:i*this.CELL_H,occupied:!0,node:null};for(i=0;i<this.additionColumn.length;i++)this.additionColumn[i]>=n&&(this.additionColumn[i]+=t);for(r=0;r<t;r++)this.additionColumn.push(n+r+1);this.columnNum+=t}},e.prototype.insertRow=function(n,t){if(!(t<=0)){for(var r=0;r<t;r++)for(var i=0;i<this.columnNum;i++)this.cells[i][r+this.rowNum]={dx:i,dy:r,x:i*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(i=0;i<this.columnNum;i++)for(r=this.rowNum-1;r>n;r--)this.cells[i][r+t]=tc(tc({},this.cells[i][r]),{dx:i,dy:r+t,x:i*this.CELL_W,y:(r+t)*this.CELL_H}),this.cells[i][r]={dx:i,dy:r,x:i*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(r=0;r<this.additionRow.length;r++)this.additionRow[r]>=n&&(this.additionRow[r]+=t);for(i=0;i<t;i++)this.additionRow.push(n+i+1);this.rowNum+=t}},e.prototype.getNodes=function(){for(var n=[],t=0;t<this.columnNum;t++)for(var r=0;r<this.rowNum;r++)this.cells[t][r].node&&n.push(this.cells[t][r]);return n},e.MIN_DIST=50,e.DEFAULT_CELL_W=80,e.DEFAULT_CELL_H=80,e}();k1.default=BY;var RY=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_1,"__esModule",{value:!0});var jY=RY(k1);_1.default=function(e,n){if(!e.nodes||e.nodes.length===0)return e;var t=n.width,r=n.height,i=n.nodeMinGap,o=1e4,a=1e4;e.nodes.forEach(function(m){var y=m.size[0]||50,b=m.size[1]||50;o=Math.min(y,o),a=Math.min(b,a)});var s=new jY.default;s.init(t,r,{CELL_H:a,CELL_W:o}),e.nodes.forEach(function(m){var y=s.occupyNearest(m);y&&(y.node={id:m.id,size:m.size},m.x=y.x,m.y=y.y,m.dx=y.dx,m.dy=y.dy)});for(var u=0;u<e.nodes.length;u++){var c=e.nodes[u],l=s.findGridByNodeId(c.id);if(!l)throw new Error("can not find node cell");var h=l.column,d=l.row;if(c.size[0]+i>o){for(var f=g=Math.ceil((c.size[0]+i)/o)-1,p=0;p<g&&!(!(s.additionColumn.indexOf(h+p+1)>-1)||s.cells[h+p+1][d].node);p++)f--;s.insertColumn(h,f)}if(c.size[1]+i>a){var g;for(f=g=Math.ceil((c.size[1]+i)/a)-1,p=0;p<g&&!(!(s.additionRow.indexOf(d+p+1)>-1)||s.cells[h][d+p+1].node);p++)f--;s.insertRow(d,f)}}for(u=0;u<s.columnNum;u++){var v=function(m){var y=s.cells[u][m];if(y.node){var b=e.nodes.find(function(x){var w;return x.id===((w=y==null?void 0:y.node)===null||w===void 0?void 0:w.id)});b&&(b.x=y.x+b.size[0]/2,b.y=y.y+b.size[1]/2)}};for(p=0;p<s.rowNum;p++)v(p)}};var C1={};Object.defineProperty(C1,"__esModule",{value:!0});var WT=1e7,VT=3.141592653589793,A1=1.5707963267948966,zY=.375*VT,FY=.625*VT,Op=new Map,I1=.8;function HT(e,n){var t=(Op.get(e.id)||[]).find(function(S){return S.source===n.id||S.target===n.id}),r=e.size[0]*e.size[1],i=n.size[0]*n.size[1],o=r>i?n:e,a=r>i?e:n,s=o.x-o.size[0]/2,u=o.y-o.size[1]/2,c=o.x+o.size[0]/2,l=o.y+o.size[1]/2,h=a.x-a.size[0]/2,d=a.y-a.size[1]/2,f=a.x+a.size[0]/2,p=a.y+a.size[1]/2,g=o.x,v=o.y,m=a.x,y=a.y,b=0,x=0;if(c>=h&&f>=s&&l>=d&&p>=u)(x=Math.sqrt(Math.pow(m-g,2)+Math.pow(y-v,2)))===0&&(x=1e-7),b=10/x*100+((c<f?c:f)-(s>h?s:h))*((l<p?l:p)-(u>d?u:d)),b*=WT;else{var w=!1,E=function(S,M,k){var _=S.x-S.size[0]/2,C=S.y-S.size[1]/2,T=S.x+S.size[0]/2,A=S.y+S.size[1]/2,D=M.x-M.size[0]/2,R=M.y-M.size[1]/2,B=M.x+M.size[0]/2,F=M.y+M.size[1]/2,N=S.x,L=S.y,z=M.x,Z=M.y,ne=z-N,J=Math.atan2(ne,Z-L),q=0,ie=0,Me=0,me=0;J>A1?(ie=C-F,q=D-T,Me=parseFloat(ie?(ie/Math.cos(J)).toFixed(2):q.toFixed(2)),me=parseFloat(q?(q/Math.sin(J)).toFixed(2):ie.toFixed(2))):Me=me=0<J&&J<=A1?(ie=R-A)>(q=D-T)?parseFloat(ie?(ie/Math.cos(J)).toFixed(2):q.toFixed(2)):parseFloat(q?(q/Math.sin(J)).toFixed(2):ie.toFixed(2)):J<-A1?(ie=C-F)>(q=-(B-_))?parseFloat(ie?(ie/Math.cos(J)).toFixed(2):q.toFixed(2)):parseFloat(q?(q/Math.sin(J)).toFixed(2):ie.toFixed(2)):(ie=R-A)>(q=Math.abs(ne)>(T-_)/2?_-B:ne)?parseFloat(ie?(ie/Math.cos(J)).toFixed(2):q.toFixed(2)):parseFloat(q&&J!==0?(q/Math.sin(J)).toFixed(2):ie.toFixed(2));var ke=parseFloat(J.toFixed(2)),yt=k;return k&&(yt=zY<ke&&ke<FY),{distance:Math.abs(Me<me?Me:me),isHoriz:yt}}(o,a,w);x=E.distance,w=E.isHoriz,x<=10?b+=x!==0?t?10+1e7/x:10+1e8/x:WT:(b+=x,t&&(b+=x*x))}return b}function qT(e){for(var n=0,t=0;t<e.length;t++){var r=e[t];(r.x<0||r.y<0||r.x>1200||r.y>800)&&(n+=1e12);for(var i=t+1;i<e.length;i++)n+=HT(r,e[i])}return n}function GY(e,n,t,r){var i=new Map;t.forEach(function(p,g){i.set(p.id,p)});var o=r.filter(function(p){return p.source===e.id||p.target===e.id})||[],a=[];o.forEach(function(p){var g=p.source===e.id?p.target:p.source,v=i.get(g);v&&a.push(v)});for(var s=!0,u=0;u<a.length;u++){var c=a[u],l=180*Math.atan((e.y-c.y)/(c.x-e.y)),h=180*Math.atan((n.y-c.y)/(c.x-n.y)),d=l>70&&l<110,f=h>70&&h<110;if((l<30||l>150)&&!(h<30||h>150)||l*h<0){s=!1;break}if(d&&!f||l*h<0){s=!1;break}if((c.x-e.x)*(c.x-n.x)<0){s=!1;break}if((c.y-e.y)*(c.y-n.y)<0){s=!1;break}}return s}function YY(e,n){for(var t=!1,r=[10,-10,0,0],i=[0,0,10,-10],o=0;o<e.length;++o)for(var a=e[o],s=ZT(a,e),u=0;u<r.length;u++)if(GY(a,{x:a.x+r[u],y:a.y+i[u]},e,n)){a.x+=r[u],a.y+=i[u];var c=ZT(a,e),l=Math.random();c<s||l<I1&&l>.1?(s=c,t=!0):(a.x-=r[u],a.y-=i[u])}return I1>.1&&(I1*=.5),t?qT(e):0}function ZT(e,n){var t=0;(e.x<0||e.y<0||e.x+e.size[0]+20>1200||e.y+e.size[1]+20>800)&&(t+=1e12);for(var r=0;r<n.length;++r)e.id!==n[r].id&&(t+=HT(e,n[r]));return t}C1.default=function(e,n){if(e.length===0)return{nodes:e,edges:n};e.forEach(function(u){var c=n.filter(function(l){return l.source===u.id||l.target===u.id});Op.set(u,c)}),e.sort(function(u,c){var l,h;return((l=Op.get(u.id))===null||l===void 0?void 0:l.length)-((h=Op.get(c.id))===null||h===void 0?void 0:h.length)});for(var t=qT(e),r=20,i=1,o=0,a=0;r>0&&!(++a>=50);){var s=YY(e,n);s!==0&&(o=s),i=o-t,t=o,i===0?--r:r=20}return e.forEach(function(u){u.x=u.x-u.size[0]/2,u.y=u.y-u.size[1]/2}),{nodes:e,edges:n}};var T1=Ee&&Ee.__assign||function(){return T1=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},T1.apply(this,arguments)},XY=Ee&&Ee.__createBinding||(Object.create?function(e,n,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(n,t);i&&!("get"in i?!n.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,i)}:function(e,n,t,r){r===void 0&&(r=t),e[r]=n[t]}),UY=Ee&&Ee.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),WY=Ee&&Ee.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&XY(n,e,t);return UY(n,e),n},KT=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(M1,"__esModule",{value:!0});var nc=WY(Em),VY=KT(_1),HY=KT(C1),qY=_u;M1.default=function(e,n){var t=e.nodes,r=e.edges,i=n.width,o=n.height;if(!(t!=null&&t.length))return Promise.resolve();var a=[];t.forEach(function(d){if(r.filter(function(p){return p.source===d.id||p.target===d.id}).length>1){var f=T1({},d);delete f.size,a.push(f)}});var s=[];r.forEach(function(d){var f=a.find(function(g){return g.id===d.source}),p=a.find(function(g){return g.id===d.target});f&&p&&s.push(d)});var u=new qY.DagreLayout({type:"dagre",ranksep:n.nodeMinGap,nodesep:n.nodeMinGap}).layout({nodes:a,edges:s}).nodes;t.forEach(function(d){var f=(u||[]).find(function(p){return p.id===d.id});d.x=(f==null?void 0:f.x)||i/2,d.y=(f==null?void 0:f.y)||o/2});var c=JSON.parse(JSON.stringify(t)),l=JSON.parse(JSON.stringify(r)),h=nc.forceSimulation().nodes(c).force("link",nc.forceLink(l).id(function(d){return d.id}).distance(function(d){return s.find(function(f){return f.source===d.source&&f.target===d.target})?30:20})).force("charge",nc.forceManyBody()).force("center",nc.forceCenter(i/2,o/2)).force("x",nc.forceX(i/2)).force("y",nc.forceY(o/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(function(d){h.on("end",function(){t.forEach(function(b){var x=c.find(function(w){return w.id===b.id});x&&(b.x=x.x,b.y=x.y)});var f=Math.min.apply(Math,t.map(function(b){return b.x})),p=Math.max.apply(Math,t.map(function(b){return b.x})),g=Math.min.apply(Math,t.map(function(b){return b.y})),v=Math.max.apply(Math,t.map(function(b){return b.y})),m=i/(p-f),y=o/(v-g);t.forEach(function(b){b.x!==void 0&&m<1&&(b.x=(b.x-f)*m),b.y!==void 0&&y<1&&(b.y=(b.y-g)*y)}),t.forEach(function(b){b.sizeTemp=b.size,b.size=[10,10]}),(0,HY.default)(t,r),t.forEach(function(b){b.size=b.sizeTemp||[],delete b.sizeTemp}),(0,VY.default)({nodes:t,edges:r},n),d()})})};var ZY=Ee&&Ee.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KY=Ee&&Ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ql,"__esModule",{value:!0}),ql.ERLayout=void 0;var $Y=Nn,QY=KY(M1),JY=function(e){function n(t){var r=e.call(this)||this;return r.width=300,r.height=300,r.nodeMinGap=50,r.onLayoutEnd=function(){},t&&r.updateCfg(t),r}return ZY(n,e),n.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},n.prototype.execute=function(){var t=this,r=t.nodes,i=t.edges;return r==null||r.forEach(function(o){o.size||(o.size=[50,50])}),(0,QY.default)({nodes:r,edges:i},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){t.onLayoutEnd&&t.onLayoutEnd()})},n.prototype.getType=function(){return"er"},n}($Y.Base);ql.ERLayout=JY;var $T,Ms={},QT,JT={};function eO(){return QT||(QT=1,function(e){var n=Ee&&Ee.__createBinding||(Object.create?function(E,S,M,k){k===void 0&&(k=M);var _=Object.getOwnPropertyDescriptor(S,M);_&&!("get"in _?!S.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return S[M]}}),Object.defineProperty(E,k,_)}:function(E,S,M,k){k===void 0&&(k=M),E[k]=S[M]}),t=Ee&&Ee.__exportStar||function(E,S){for(var M in E)M==="default"||Object.prototype.hasOwnProperty.call(S,M)||n(S,E,M)};Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=e.ForceAtlas2Layout=e.ComboCombinedLayout=e.ComboForceLayout=e.GForceGPULayout=e.FruchtermanGPULayout=e.FruchtermanLayout=e.MDSLayout=e.ConcentricLayout=e.RadialLayout=e.DagreCompoundLayout=e.DagreLayout=e.CircularLayout=e.ForceLayout=e.Force2Layout=e.GForceLayout=e.RandomLayout=e.GridLayout=e.Layouts=e.Layout=void 0;var r=hl;Object.defineProperty(e,"GridLayout",{enumerable:!0,get:function(){return r.GridLayout}});var i=dl;Object.defineProperty(e,"RandomLayout",{enumerable:!0,get:function(){return i.RandomLayout}});var o=fl;Object.defineProperty(e,"GForceLayout",{enumerable:!0,get:function(){return o.GForceLayout}});var a=pl;Object.defineProperty(e,"Force2Layout",{enumerable:!0,get:function(){return a.Force2Layout}});var s=bm;Object.defineProperty(e,"ForceLayout",{enumerable:!0,get:function(){return s.ForceLayout}});var u=bl;Object.defineProperty(e,"CircularLayout",{enumerable:!0,get:function(){return u.CircularLayout}});var c=_u;Object.defineProperty(e,"DagreLayout",{enumerable:!0,get:function(){return c.DagreLayout}});var l=kl;Object.defineProperty(e,"DagreCompoundLayout",{enumerable:!0,get:function(){return l.DagreCompoundLayout}});var h=a1;Object.defineProperty(e,"RadialLayout",{enumerable:!0,get:function(){return h.RadialLayout}});var d=Rl;Object.defineProperty(e,"ConcentricLayout",{enumerable:!0,get:function(){return d.ConcentricLayout}});var f=jl;Object.defineProperty(e,"MDSLayout",{enumerable:!0,get:function(){return f.MDSLayout}});var p=Fl;Object.defineProperty(e,"FruchtermanLayout",{enumerable:!0,get:function(){return p.FruchtermanLayout}});var g=Gl;Object.defineProperty(e,"FruchtermanGPULayout",{enumerable:!0,get:function(){return g.FruchtermanGPULayout}});var v=Ul;Object.defineProperty(e,"GForceGPULayout",{enumerable:!0,get:function(){return v.GForceGPULayout}});var m=Wl;Object.defineProperty(e,"ComboForceLayout",{enumerable:!0,get:function(){return m.ComboForceLayout}});var y=UT();Object.defineProperty(e,"ComboCombinedLayout",{enumerable:!0,get:function(){return y.ComboCombinedLayout}});var b=Hl;Object.defineProperty(e,"ForceAtlas2Layout",{enumerable:!0,get:function(){return b.ForceAtlas2Layout}});var x=ql;Object.defineProperty(e,"ERLayout",{enumerable:!0,get:function(){return x.ERLayout}});var w=function(){if($T)return Ms;$T=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.Layouts=Ms.Layout=void 0;var E=Lo,S=hl,M=dl,k=pl,_=fl,C=bm,T=bl,A=_u,D=a1,R=Rl,B=jl,F=Fl,N=Gl,L=Ul,z=Wl,Z=UT(),ne=Hl,J=ql,q=kl,ie=Cn(),Me=function(){function me(ke){var yt=(0,E.getLayoutByName)(ke.type);this.layoutInstance=new yt(ke)}return me.prototype.layout=function(ke){return this.layoutInstance.layout(ke)},me.prototype.updateCfg=function(ke){this.layoutInstance.updateCfg(ke)},me.prototype.init=function(ke){this.correctLayers(ke.nodes),this.layoutInstance.init(ke)},me.prototype.correctLayers=function(ke){if(ke!=null&&ke.length){var yt=1/0,Tt=[];if(ke.forEach(function(ct){(0,ie.isString)(ct.layer)&&(ct.layer=parseInt(ct.layer,10)),ct.layer===void 0||isNaN(ct.layer)||(Tt.push(ct),ct.layer<yt&&(yt=ct.layer))}),yt<=0){var cn=Math.abs(yt)+1;Tt.forEach(function(ct){return ct.layer+=cn})}}},me.prototype.execute=function(){this.layoutInstance.execute()},me.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},me.prototype.destroy=function(){return this.layoutInstance.destroy()},me}();return Ms.Layout=Me,Ms.Layouts={force:C.ForceLayout,fruchterman:F.FruchtermanLayout,forceAtlas2:ne.ForceAtlas2Layout,gForce:_.GForceLayout,force2:k.Force2Layout,dagre:A.DagreLayout,dagreCompound:q.DagreCompoundLayout,circular:T.CircularLayout,radial:D.RadialLayout,concentric:R.ConcentricLayout,grid:S.GridLayout,mds:B.MDSLayout,comboForce:z.ComboForceLayout,comboCombined:Z.ComboCombinedLayout,random:M.RandomLayout,"gForce-gpu":L.GForceGPULayout,"fruchterman-gpu":N.FruchtermanGPULayout,er:J.ERLayout},Ms}();Object.defineProperty(e,"Layout",{enumerable:!0,get:function(){return w.Layout}}),Object.defineProperty(e,"Layouts",{enumerable:!0,get:function(){return w.Layouts}}),t(JT,e)}(uk)),uk}Object.defineProperty(JT,"__esModule",{value:!0}),function(e){var n=Ee&&Ee.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a);var u=Object.getOwnPropertyDescriptor(o,a);u&&!("get"in u?!o.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(i,s,u)}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),t=Ee&&Ee.__exportStar||function(i,o){for(var a in i)a==="default"||Object.prototype.hasOwnProperty.call(o,a)||n(o,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0;var r=Lo;Object.defineProperty(e,"registerLayout",{enumerable:!0,get:function(){return r.registerLayout}}),Object.defineProperty(e,"unRegisterLayout",{enumerable:!0,get:function(){return r.unRegisterLayout}}),Object.defineProperty(e,"getLayoutByName",{enumerable:!0,get:function(){return r.getLayoutByName}}),t(eO(),e)}($t);var Ta={assign:Object.assign,getHeight:function(e,n,t,r){return r===void 0&&(r="height"),t==="center"?(e[r]+n[r])/2:e.height}},tO=Ta,eX={getId:function(e){return e.id||e.name},getPreH:function(e){return e.preH||0},getPreV:function(e){return e.preV||0},getHGap:function(e){return e.hgap||18},getVGap:function(e){return e.vgap||18},getChildren:function(e){return e.children},getHeight:function(e){return e.height||36},getWidth:function(e){var n=e.label||" ";return e.width||18*n.split("").length}};function Np(e,n){var t=this;if(t.vgap=t.hgap=0,e instanceof Np)return e;t.data=e;var r=n.getHGap(e),i=n.getVGap(e);return t.preH=n.getPreH(e),t.preV=n.getPreV(e),t.width=n.getWidth(e),t.height=n.getHeight(e),t.width+=t.preH,t.height+=t.preV,t.id=n.getId(e),t.x=t.y=0,t.depth=0,t.children||(t.children=[]),t.addGap(r,i),t}tO.assign(Np.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(e,n){var t=this;t.hgap+=e,t.vgap+=n,t.width+=2*e,t.height+=2*n},eachNode:function(e){for(var n,t=[this];n=t.shift();)e(n),t=n.children.concat(t)},DFTraverse:function(e){this.eachNode(e)},BFTraverse:function(e){for(var n,t=[this];n=t.shift();)e(n),t=t.concat(n.children)},getBoundingBox:function(){var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(n){e.left=Math.min(e.left,n.x),e.top=Math.min(e.top,n.y),e.width=Math.max(e.width,n.x+n.width),e.height=Math.max(e.height,n.y+n.height)}),e},translate:function(e,n){e===void 0&&(e=0),n===void 0&&(n=0),this.eachNode(function(t){t.x+=e,t.y+=n,t.x+=t.preH,t.y+=t.preV})},right2left:function(){var e=this,n=e.getBoundingBox();e.eachNode(function(t){t.x=t.x-2*(t.x-n.left)-t.width}),e.translate(n.width,0)},bottom2top:function(){var e=this,n=e.getBoundingBox();e.eachNode(function(t){t.y=t.y-2*(t.y-n.top)-t.height}),e.translate(0,n.height)}});var nO=function(e,n,t){n===void 0&&(n={});var r,i=new Np(e,n=tO.assign({},eX,n)),o=[i];if(!t&&!e.collapsed){for(;r=o.shift();)if(!r.data.collapsed){var a=n.getChildren(r.data),s=a?a.length:0;if(r.children=new Array(s),a&&s)for(var u=0;u<s;u++){var c=new Np(a[u],n);r.children[u]=c,o.push(c),c.parent=r,c.depth=r.depth+1}}}return i},tX=nO,Pp=function(){function e(n,t){t===void 0&&(t={}),this.options=t,this.rootNode=tX(n,t)}return e.prototype.execute=function(){throw new Error("please override this method")},e}();function Zl(e,n,t,r){r===void 0&&(r=[]);var i=this;i.w=e||0,i.h=n||0,i.y=t||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function rO(e,n,t){t?e.y+=n:e.x+=n,e.children.forEach(function(r){rO(r,n,t)})}function iO(e,n){var t=n?e.y:e.x;return e.children.forEach(function(r){t=Math.min(iO(r,n),t)}),t}function nX(e,n){rO(e,-iO(e,n),n)}function oO(e,n,t){t?n.y=e.x:n.x=e.x,e.c.forEach(function(r,i){oO(r,n.children[i],t)})}function aO(e,n,t){t===void 0&&(t=0),n?(e.x=t,t+=e.width):(e.y=t,t+=e.height),e.children.forEach(function(r){aO(r,n,t)})}Zl.fromNode=function(e,n){if(!e)return null;var t=[];return e.children.forEach(function(r){t.push(Zl.fromNode(r,n))}),n?new Zl(e.height,e.width,e.x,t):new Zl(e.width,e.height,e.y,t)};var sO=nO,uO=function(e,n){for(var t=sO(e.data,n,!0),r=sO(e.data,n,!0),i=e.children.length,o=Math.round(i/2),a=n.getSide||function(c,l){return l<o?"right":"left"},s=0;s<i;s++){var u=e.children[s];a(u,s)==="right"?r.children.push(u):t.children.push(u)}return t.eachNode(function(c){c.isRoot()||(c.side="left")}),r.eachNode(function(c){c.isRoot()||(c.side="right")}),{left:t,right:r}},rX=uO,Oa=["LR","RL","TB","BT","H","V"],iX=["LR","RL","H"],oX=Oa[0],O1=function(e,n,t){var r=n.direction||oX;if(n.isHorizontal=function(c){return iX.indexOf(c)>-1}(r),r&&Oa.indexOf(r)===-1)throw new TypeError("Invalid direction: "+r);if(r===Oa[0])t(e,n);else if(r===Oa[1])t(e,n),e.right2left();else if(r===Oa[2])t(e,n);else if(r===Oa[3])t(e,n),e.bottom2top();else if(r===Oa[4]||r===Oa[5]){var i=rX(e,n),o=i.left,a=i.right;t(o,n),t(a,n),n.isHorizontal?o.right2left():o.bottom2top(),a.translate(o.x-a.x,o.y-a.y),e.x=o.x,e.y=a.y;var s=e.getBoundingBox();n.isHorizontal?s.top<0&&e.translate(0,-s.top):s.left<0&&e.translate(-s.left,0)}var u=n.fixedRoot;return u===void 0&&(u=!0),u&&e.translate(-(e.x+e.width/2+e.hgap),-(e.y+e.height/2+e.vgap)),function(c,l){if(l.radial){var h=l.isHorizontal?["x","y"]:["y","x"],d=h[0],f=h[1],p={x:1/0,y:1/0},g={x:-1/0,y:-1/0},v=0;c.DFTraverse(function(b){v++;var x=b.x,w=b.y;p.x=Math.min(p.x,x),p.y=Math.min(p.y,w),g.x=Math.max(g.x,x),g.y=Math.max(g.y,w)});var m=g[f]-p[f];if(m===0)return;var y=2*Math.PI/v;c.DFTraverse(function(b){var x=(b[f]-p[f])/m*(2*Math.PI-y)+y,w=b[d]-c[d];b.x=Math.cos(x)*w,b.y=Math.sin(x)*w})}}(e,n),e};function N1(e,n){return N1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},N1(e,n)}var aX=function(e,n){n===void 0&&(n={});var t=n.isHorizontal;function r(h){h.cs===0?(h.el=h,h.er=h,h.msel=h.mser=0):(h.el=h.c[0].el,h.msel=h.c[0].msel,h.er=h.c[h.cs-1].er,h.mser=h.c[h.cs-1].mser)}function i(h,d,f){for(var p=h.c[d-1],g=p.mod,v=h.c[d],m=v.mod;p!==null&&v!==null;){u(p)>f.low&&(f=f.nxt);var y=g+p.prelim+p.w-(m+v.prelim);y>0&&(m+=y,o(h,d,f.index,y));var b=u(p),x=u(v);b<=x&&(p=s(p))!==null&&(g+=p.mod),b>=x&&(v=a(v))!==null&&(m+=v.mod)}!p&&v?function(w,E,S,M){var k=w.c[0].el;k.tl=S;var _=M-S.mod-w.c[0].msel;k.mod+=_,k.prelim-=_,w.c[0].el=w.c[E].el,w.c[0].msel=w.c[E].msel}(h,d,v,m):p&&!v&&function(w,E,S,M){var k=w.c[E].er;k.tr=S;var _=M-S.mod-w.c[E].mser;k.mod+=_,k.prelim-=_,w.c[E].er=w.c[E-1].er,w.c[E].mser=w.c[E-1].mser}(h,d,p,g)}function o(h,d,f,p){h.c[d].mod+=p,h.c[d].msel+=p,h.c[d].mser+=p,function(g,v,m,y){if(m!==v-1){var b=v-m;g.c[m+1].shift+=y/b,g.c[v].shift-=y/b,g.c[v].change-=y-y/b}}(h,d,f,p)}function a(h){return h.cs===0?h.tl:h.c[0]}function s(h){return h.cs===0?h.tr:h.c[h.cs-1]}function u(h){return h.y+h.h}function c(h,d,f){for(;f!==null&&h>=f.low;)f=f.nxt;return{low:h,index:d,nxt:f}}aO(e,t);var l=Zl.fromNode(e,t);return function h(d){if(d.cs!==0){h(d.c[0]);for(var f=c(u(d.c[0].el),0,null),p=1;p<d.cs;++p){h(d.c[p]);var g=u(d.c[p].er);i(d,p,f),f=c(g,p,f)}(function(v){v.prelim=(v.c[0].prelim+v.c[0].mod+v.c[v.cs-1].mod+v.c[v.cs-1].prelim+v.c[v.cs-1].w)/2-v.w/2})(d),r(d)}else r(d)}(l),function h(d,f){f+=d.mod,d.x=d.prelim+f,function(g){for(var v=0,m=0,y=0;y<g.cs;y++)m+=(v+=g.c[y].shift)+g.c[y].change,g.c[y].mod+=m}(d);for(var p=0;p<d.cs;p++)h(d.c[p],f)}(l,0),oO(l,e,t),nX(e,t),e},sX=O1,uX=Ta,cX=function(e){function n(){return e.apply(this,arguments)||this}return function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,N1(t,r)}(n,e),n.prototype.execute=function(){return sX(this.rootNode,this.options,aX)},n}(Pp),lX={},hX=function(e,n){return n=uX.assign({},lX,n),new cX(e,n).execute()},dX=Ta;function fX(e,n){n===void 0&&(n=[]);var t=this;t.x=t.y=0,t.leftChild=t.rightChild=null,t.height=0,t.children=n}var pX={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function cO(e,n,t){t?(n.x=e.x,n.y=e.y):(n.x=e.y,n.y=e.x),e.children.forEach(function(r,i){cO(r,n.children[i],t)})}function P1(e,n){return P1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},P1(e,n)}var gX=function(e,n){n===void 0&&(n={}),n=dX.assign({},pX,n);var t,r=0,i=function o(a){if(!a)return null;a.width=0,a.depth&&a.depth>r&&(r=a.depth);var s=a.children,u=s.length,c=new fX(a.height,[]);return s.forEach(function(l,h){var d=o(l);c.children.push(d),h===0&&(c.leftChild=d),h===u-1&&(c.rightChild=d)}),c.originNode=a,c.isLeaf=a.isLeaf(),c}(e);return function o(a){if(a.isLeaf||a.children.length===0)a.drawingDepth=r;else{var s=a.children.map(function(c){return o(c)}),u=Math.min.apply(null,s);a.drawingDepth=u-1}return a.drawingDepth}(i),function o(a){a.x=a.drawingDepth*n.rankSep,a.isLeaf?(a.y=0,t&&(a.y=t.y+t.height+n.nodeSep,a.originNode.parent!==t.originNode.parent&&(a.y+=n.subTreeSep)),t=a):(a.children.forEach(function(s){o(s)}),a.y=(a.leftChild.y+a.rightChild.y)/2)}(i),cO(i,e,n.isHorizontal),e},vX=O1,mX=Ta,yX=function(e){function n(){return e.apply(this,arguments)||this}return function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,P1(t,r)}(n,e),n.prototype.execute=function(){var t=this;return t.rootNode.width=0,vX(t.rootNode,t.options,gX)},n}(Pp),bX={},xX=function(e,n){return n=mX.assign({},bX,n),new yX(e,n).execute()},lO=Ta;function D1(e,n){return D1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},D1(e,n)}var wX=Pp,Dp=function(e,n,t,r){var i=null;e.eachNode(function(o){(function(a,s,u,c,l){var h=(typeof u=="function"?u(a):u)*a.depth;if(!c)try{if(a.id===a.parent.children[0].id)return a.x+=h,void(a.y=s?s.y:0)}catch(p){}if(a.x+=h,s){if(a.y=s.y+lO.getHeight(s,a,l),s.parent&&a.parent.id!==s.parent.id){var d=s.parent,f=d.y+lO.getHeight(d,a,l);a.y=f>a.y?f:a.y}}else a.y=0})(o,i,n,t,r),i=o})},EX=uO,SX=Ta,Kl=["LR","RL","H"],MX=Kl[0],_X=function(e){function n(){return e.apply(this,arguments)||this}return function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,D1(t,r)}(n,e),n.prototype.execute=function(){var t=this.options,r=this.rootNode;t.isHorizontal=!0;var i=t.indent,o=i===void 0?20:i,a=t.dropCap,s=a===void 0||a,u=t.direction,c=u===void 0?MX:u,l=t.align;if(c&&Kl.indexOf(c)===-1)throw new TypeError("Invalid direction: "+c);if(c===Kl[0])Dp(r,o,s,l);else if(c===Kl[1])Dp(r,o,s,l),r.right2left();else if(c===Kl[2]){var h=EX(r,t),d=h.left,f=h.right;Dp(d,o,s,l),d.right2left(),Dp(f,o,s,l);var p=d.getBoundingBox();f.translate(p.width,0),r.x=f.x-r.width/2}return r},n}(wX),kX={},CX=function(e,n){return n=SX.assign({},kX,n),new _X(e,n).execute()},AX=Ta;function hO(e,n){var t=0;return e.children.length?e.children.forEach(function(r){t+=hO(r,n)}):t=e.height,e._subTreeSep=n.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,t)+2*e._subTreeSep,e.totalHeight}function dO(e){var n=e.children,t=n.length;if(t){n.forEach(function(u){dO(u)});var r=n[0],i=n[t-1],o=i.y-r.y+i.height,a=0;if(n.forEach(function(u){a+=u.totalHeight}),o>e.height)e.y=r.y+o/2-e.height/2;else if(n.length!==1||e.height>a){var s=e.y+(e.height-o)/2-r.y;n.forEach(function(u){u.translate(0,s)})}else e.y=(r.y+r.height/2+i.y+i.height/2)/2-e.height/2}}var IX={getSubTreeSep:function(){return 0}};function L1(e,n){return L1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},L1(e,n)}var TX=function(e,n){n===void 0&&(n={}),n=AX.assign({},IX,n),e.parent={x:0,width:0,height:0,y:0},e.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),e.parent=null,hO(e,n),e.startY=0,e.y=e.totalHeight/2-e.height/2,e.eachNode(function(t){var r=t.children,i=r.length;if(i){var o=r[0];if(o.startY=t.startY+t._subTreeSep,i===1)o.y=t.y+t.height/2-o.height/2;else{o.y=o.startY+o.totalHeight/2-o.height/2;for(var a=1;a<i;a++){var s=r[a];s.startY=r[a-1].startY+r[a-1].totalHeight,s.y=s.startY+s.totalHeight/2-s.height/2}}}}),dO(e)},OX=O1,NX=Ta,PX=function(e){function n(){return e.apply(this,arguments)||this}return function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,L1(t,r)}(n,e),n.prototype.execute=function(){return OX(this.rootNode,this.options,TX)},n}(Pp),DX={};const Lp=qs({compactBox:hX,dendrogram:xX,indented:CX,mindmap:function(e,n){return n=NX.assign({},DX,n),new PX(e,n).execute()}});var fO=fu.traverseTree;const LX=Object.freeze(Object.defineProperty({__proto__:null,arrayToTextureData:function(e){for(var n=[],t=e.length,r=e[0].length,i=function(a){e.forEach(function(s,u){if(n.push(s[a]),u===t-1)for(;n.length%4!=0;)n.push(0)})},o=0;o<r;o++)i(o);return new Float32Array(n)},attributesToTextureData:function(e,n){var t=[],r=e.length,i={};return n.forEach(function(o){e.forEach(function(a,s){if(i[o[a]]===void 0&&(i[o[a]]=Object.keys(i).length),t.push(i[o[a]]),s===r-1)for(;t.length%4!=0;)t.push(0)})}),{array:new Float32Array(t),count:Object.keys(i).length}},buildTextureData:function(e,n){var t=[],r=[],i={},o=0;for(o=0;o<e.length;o++){var a=e[o];i[a.id]=o,t.push(a.x),t.push(a.y),t.push(0),t.push(0),r.push([])}for(o=0;o<n.length;o++){var s=n[o];r[i[s.source]].push(i[s.target]),r[i[s.target]].push(i[s.source])}var u=0;for(o=0;o<e.length;o++){var c=t.length,l=r[o],h=l.length;t[4*o+2]=c,t[4*o+3]=l.length,u=Math.max(u,l.length);for(var d=0;d<h;++d){var f=l[d];t.push(+f)}}for(;t.length%4!=0;)t.push(0);return{array:new Float32Array(t),maxEdgePerVetex:u}},buildTextureDataWithOneEdgeAttr:function(e,n,t){var r=[],i=[],o={},a=0;for(a=0;a<e.length;a++){var s=e[a];o[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),i.push([])}for(a=0;a<n.length;a++){var u=n[a];i[o[u.source]].push(o[u.target]),i[o[u.source]].push(t(u)),i[o[u.target]].push(o[u.source]),i[o[u.target]].push(t(u))}var c=0;for(a=0;a<e.length;a++){var l=r.length,h=i[a],d=h.length;r[4*a+2]=l,r[4*a+3]=d/2,c=Math.max(c,d/2);for(var f=0;f<d;++f){var p=h[f];r.push(+p)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:c}},buildTextureDataWithTwoEdgeAttr:function(e,n,t,r){var i=[],o=[],a={},s=0;for(s=0;s<e.length;s++){var u=e[s];a[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),o.push([])}for(s=0;s<n.length;s++){var c=n[s];o[a[c.source]].push(a[c.target]),o[a[c.source]].push(t(c)),o[a[c.source]].push(r(c)),o[a[c.source]].push(0),o[a[c.target]].push(a[c.source]),o[a[c.target]].push(t(c)),o[a[c.target]].push(r(c)),o[a[c.target]].push(0)}var l=0;for(s=0;s<e.length;s++){var h=i.length,d=o[s],f=d.length;i[4*s+2]=h+1048576*f/4,i[4*s+3]=0,l=Math.max(l,f/4);for(var p=0;p<f;++p){var g=d[p];i.push(+g)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:l}},proccessToFunc:function(e,n){return e?Ue(e)?function(t){return e}:e:function(t){return n||1}},radialLayout:function(e,n){var t={x:1/0,y:1/0},r={x:-1/0,y:-1/0},i="x",o="y";n&&["V","TB","BT"].indexOf(n)>=0&&(o="x",i="y");var a=0;fO(e,function(c){return a++,c.x>r.x&&(r.x=c.x),c.x<t.x&&(t.x=c.x),c.y>r.y&&(r.y=c.y),c.y<t.y&&(t.y=c.y),!0});var s=2*Math.PI/a,u=r[o]-t[o];return u===0||fO(e,function(c){var l=(c[o]-t[o])/u*(2*Math.PI-s)+s,h=Math.abs(i==="x"?c.x-e.x:c.y-e.y);return c.x=h*Math.cos(l),c.y=h*Math.sin(l),!0}),e}},Symbol.toStringTag,{value:"Module"}));var pO=function e(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var n=document.createElement("canvas");return!(!window.WebGLRenderingContext||!n.getContext("webgl")&&!n.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var n=document.createElement("div");return n.id="webgl-error-message",n.style.fontFamily="monospace",n.style.fontSize="13px",n.style.fontWeight="normal",n.style.textAlign="center",n.style.background="#fff",n.style.color="#000",n.style.padding="1.5em",n.style.width="400px",n.style.margin="5em auto 0",this.webgl||(n.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),n},addGetWebGLMessage:function(n){var t=(n=n||{}).parent!==void 0?n.parent:document.body,r=n.id!==void 0?n.id:"oldie",i=e().getWebGLErrorMessage();i.id=r,t.appendChild(i)}}};const BX=Object.freeze(Object.defineProperty({__proto__:null,gpuDetector:pO},Symbol.toStringTag,{value:"Module"}));var gO=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"};const RX=Object.freeze(Object.defineProperty({__proto__:null,getBrowserName:gO},Symbol.toStringTag,{value:"Module"}));var Ko=P(P(P(P(P({},fu),R6),LX),BX),RX),jX=Ko.radialLayout,zX=function(){function e(n){this.type=n.type,this.radial=n.radial,this.config=n}return e.prototype.init=function(n){var t=this;this.data=n,this.radial?this.layoutMethod=function(r){var i=Lp[t.type](r,t.config);return jX(i),i}:this.layoutMethod=function(r){return Lp[t.type](r,t.config)}},e.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},e.prototype.layout=function(n){return this.init(n),this.execute()},e}();$t.registerLayout("grid",$t.GridLayout),$t.registerLayout("random",$t.RandomLayout),$t.registerLayout("force",$t.ForceLayout),$t.registerLayout("circular",$t.CircularLayout),$t.registerLayout("dagre",$t.DagreLayout),$t.registerLayout("dagreCompound",$t.DagreCompoundLayout),$t.registerLayout("radial",$t.RadialLayout),$t.registerLayout("concentric",$t.ConcentricLayout),$t.registerLayout("mds",$t.MDSLayout),$t.registerLayout("fruchterman",$t.FruchtermanLayout),$t.registerLayout("fruchterman-gpu",$t.FruchtermanGPULayout),$t.registerLayout("gForce",$t.GForceLayout),$t.registerLayout("force2",$t.Force2Layout),$t.registerLayout("gForce-gpu",$t.GForceGPULayout),$t.registerLayout("comboForce",$t.ComboForceLayout),$t.registerLayout("comboCombined",$t.ComboCombinedLayout),$t.registerLayout("forceAtlas2",$t.ForceAtlas2Layout);var FX=function(e,n){var t=e.toString(),r=new Blob(["importScripts('".concat(n,"');(").concat(t,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(r))},GX=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");var n=new FX(function(){var t="LAYOUT_RUN",r="LAYOUT_END",i="LAYOUT_ERROR",o="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(a){(function(s){var u=s.data.type;return u===t||u===o})(a)&&function(s){var u=this;switch(s.data.type){case t:var c,l=s.data,h=l.nodes,d=l.edges,f=l.layoutCfg,p=(b=f===void 0?{}:f).type;if(!(g=layout.getLayoutByName(p))){this.postMessage({type:i,message:"layout ".concat(p," not found")});break}b.onLayoutEnd=function(){u.postMessage({type:r,nodes:h}),c==null||c.destroy()},(c=new g(b)).init({nodes:h,edges:d}),c.execute();break;case o:var g,v=s.data,m=v.nodes,y=(d=v.edges,v.layoutCfg),b=y===void 0?{}:y,x=v.canvas;if(p=b.type,!(g=layout.getLayoutByName(p))){this.postMessage({type:i,message:"layout ".concat(p," not found")});break}if(p.split("-")[1]!=="gpu"){this.postMessage({type:i,message:"layout ".concat(p," does not support GPU")});break}var w=new g(b);w.init({nodes:m,edges:d}),w.executeWithWorker(x,this)}}(a)}},e);return n},YX="LAYOUT_RUN",XX="LAYOUT_END",UX="LAYOUT_TICK",WX="GPU_LAYOUT_RUN",VX="GPU_LAYOUT_END";function B1(e){return B1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},B1(e)}var HX=function(e){return setTimeout(e,16)},qX=function(e){return clearTimeout(e)},vO=function(e){return(typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||HX)(e)},mO=function(e){return(typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||qX)(e)},ZX=["fruchterman","gForce"],KX=["force","grid","circular"],$X=function(e){function n(t){var r=e.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return At(n,e),n.prototype.initLayout=function(){},n.prototype.getWorker=function(){return this.worker||(typeof Worker=="undefined"?this.worker=null:this.worker=GX(this.layoutCfg.workerScriptURL)),this.worker},n.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(mO(t.requestId),t.requestId=null),t.requestId2&&(mO(t.requestId2),t.requestId2=null))},n.prototype.execLayoutMethod=function(t,r){var i=this;return new Promise(function(o,a){return Nr(i,void 0,void 0,function(){var s,u,c,l,h,d,f,p,g;return Pr(this,function(v){switch(v.label){case 0:if(!(s=this.graph)||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),o()},u&&this.isGPU&&yO(u)&&(u="".concat(u,"-gpu")),fu.isForce(u)?(c=t.onTick,l=t.animate,h=l===void 0&&(u==="force"||u==="force2"),p=function(){c&&c(),(l||h)&&s.refreshPositions()},t.tick=p):u!=="comboForce"&&u!=="comboCombined"||(t.comboTrees=s.get("comboTrees"));try{d=new $t.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=d}catch(m){a()}return d.enableTick&&(f=t.onTick,p=function(){f&&f(),s.refreshPositions()},d.tick=p),function(m,y){var b;if(!((b=m==null?void 0:m.nodes)===null||b===void 0)&&b.length){var x=m.nodes;x.forEach(function(w){w.layoutOrder=y})}}(g=this.filterLayoutData(this.data,t),r),d.init(g),s.emit("beforesublayout",{type:u}),[4,d.execute()];case 1:return v.sent(),d.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},n.prototype.updateLayoutMethod=function(t,r){var i=this;return new Promise(function(o,a){return Nr(i,void 0,void 0,function(){var s,u,c,l,h,d,f;return Pr(this,function(p){switch(p.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),o()},fu.isForce(u)&&(c=r.onTick,l=r.animate,h=l===void 0&&(u==="force"||u==="force2"),d=function(){c==null||c(),(l||h)&&s.refreshPositions()},r.tick=d),f=this.filterLayoutData(this.data,r),t.init(f),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return p.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},n.prototype.layout=function(t){var r,i=this,o=this.graph;if(o&&!o.get("destroyed")){this.data=this.setDataFromGraph();var a=this.data,s=a.nodes,u=a.hiddenNodes;if(!s)return!1;var c=o.get("width"),l=o.get("height"),h={};Object.assign(h,{width:c,height:l,center:[c/2,l/2]},this.layoutCfg),this.layoutCfg=h;var d=h.type,f=!1;(r=this.layoutMethods)===null||r===void 0||r.forEach(function(x){var w;return f=!!(!((w=x.nodes)===null||w===void 0)&&w.length)||f});var p=this.destoryLayoutMethods();o.emit("beforelayout");var g=Promise.resolve();f&&d&&(p==null?void 0:p.length)===1&&p[0]===d?this.tweakInit():g=this.initPositions(h.center,s),this.initPositions(h.center,u).then(),this.isGPU=bO(h,d);var v=h.onLayoutEnd,m=h.layoutEndFormatted,y=h.adjust;if(m||(h.layoutEndFormatted=!0,h.onAllLayoutEnd=function(){return Nr(i,void 0,void 0,function(){return Pr(this,function(x){switch(x.label){case 0:return v&&v(s),this.refreshLayout(),y&&h.pipes?[4,this.adjustPipesBox(this.data,y)]:[3,2];case 1:x.sent(),this.refreshLayout(),x.label=2;case 2:return o.emit("afterlayout"),[2]}})})}),this.stopWorker(),h.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var b=!1;return h.type?(b=!0,g=g.then(function(){return Nr(i,void 0,void 0,function(){return Pr(this,function(x){switch(x.label){case 0:return[4,this.execLayoutMethod(h,0)];case 1:return[2,x.sent()]}})})})):h.pipes&&(b=!0,h.pipes.forEach(function(x,w){g=g.then(function(){return Nr(i,void 0,void 0,function(){return Pr(this,function(E){switch(E.label){case 0:return[4,this.execLayoutMethod(x,w)];case 1:return[2,E.sent()]}})})})})),b?g.then(function(){h.onAllLayoutEnd&&h.onAllLayoutEnd(),t&&t()}).catch(function(x){}):(o.refreshPositions(),t==null||t()),!1}},n.prototype.tweakInit=function(){var t=this.data,r=this.graph,i=t.nodes,o=t.edges;if(i!=null&&i.length){var a={};i.forEach(function(c){var l=c.x,h=c.y;isNaN(l)||isNaN(h)||(a[c.id]={x:l,y:h},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,h=c.target,d=a[l],f=a[h];!d&&f?a[l]={x:f.x+80*(Math.random()-.5),y:f.y+80*(Math.random()-.5)}:!f&&d&&(a[h]={x:d.x+80*(Math.random()-.5),y:d.y+80*(Math.random()-.5)})});var s=r.get("width"),u=r.get("height");i.forEach(function(c){var l=a[c.id]||{x:s/2+20*(Math.random()-.5),y:u/2+20*(Math.random()-.5)};c.x=l.x,c.y=l.y})}},n.prototype.initWithPreset=function(t,r){var i=this;return new Promise(function(o,a){return Nr(i,void 0,void 0,function(){var s,u,c,l,h,d,f;return Pr(this,function(p){switch(p.label){case 0:return u=(s=this).layoutCfg,c=s.data,(l=u.preset)!=null&&l.type&&$t.Layouts[l==null?void 0:l.type]?(h=bO(l,l.type),d=h?"".concat(l.type,"-gpu"):l.type,f=new $t.Layouts[d](l),delete u.preset,f.init(c),[4,f.execute()]):(r==null||r(),o(),[2,!1]);case 1:return p.sent(),t==null||t(),o(),[2,!0]}})})})},n.prototype.layoutWithWorker=function(t,r){var i=this,o=this.layoutCfg,a=this.graph,s=this.getWorker(),u=this.workerData;if(!s)return!1;u.requestId=null,u.requestId2=null,u.currentTick=null,u.currentTickData=null,a.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return i.runWebworker(s,t,o)});else if(o.pipes){l=!0;for(var h=function(p){c=c.then(function(){return i.runWebworker(s,t,p)})},d=0,f=o.pipes;d<f.length;d++)h(f[d])}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(p){}),!0},n.prototype.runWebworker=function(t,r,i){var o=this,a=this.isGPU,s=this.filterLayoutData(r,i),u=s.nodes,c=s.edges,l=document.createElement("canvas"),h=a&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in l,d=function(p,g){var v={};return p&&B1(p)==="object"?(Object.keys(p).forEach(function(m){p.hasOwnProperty(m)&&g(p[m])&&(v[m]=p[m])}),v):p}(i,function(p){return typeof p!="function"});if(h){var f=l.transferControlToOffscreen();d.type="".concat(d.type,"-gpu"),t.postMessage({type:WX,nodes:u,edges:c,layoutCfg:d,canvas:f},[f])}else t.postMessage({type:YX,nodes:u,edges:c,layoutCfg:d});return new Promise(function(p,g){t.onmessage=function(v){o.handleWorkerMessage(p,g,v,s,i)}})},n.prototype.handleWorkerMessage=function(t,r,i,o,a){var s=this.graph,u=this.workerData,c=i.data,l=c.type,h=function(){a.onTick&&a.onTick()};switch(l){case UX:u.currentTick=c.currentTick,u.currentTickData=c,u.requestId||(u.requestId=vO(function(){R1(o,c),s.refreshPositions(),h(),c.currentTick===c.totalTicks?t():u.currentTick===c.totalTicks&&(u.requestId2=vO(function(){R1(o,u.currentTickData),s.refreshPositions(),u.requestId2=null,h(),t()})),u.requestId=null}));break;case XX:u.currentTick==null&&(R1(o,c),t());break;case VX:u.currentTick==null&&(function(d,f){for(var p=d.nodes,g=f.vertexEdgeData,v=p.length,m=0;m<v;m++){var y=p[m],b=g[4*m],x=g[4*m+1];y.x=b,y.y=x}}(o,c),t());break;default:r()}},n.prototype.updateLayoutCfg=function(t){var r=this,i=this.graph,o=this.layoutMethods;if(i&&!i.get("destroyed")){var a=t.disableTriggerLayout,s=yn(t,["disableTriggerLayout"]),u=ut({},this.layoutCfg,s);if(this.layoutCfg=u,!a)if(o!=null&&o.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!s.workerEnabled||!this.layoutWithWorker(this.data,null)){i.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return Nr(r,void 0,void 0,function(){return Pr(this,function(h){switch(h.label){case 0:return[4,this.updateLayoutMethod(o[0],u)];case 1:return[2,h.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(h,d){var f=u.pipes[d];c=c.then(function(){return Nr(r,void 0,void 0,function(){return Pr(this,function(p){switch(p.label){case 0:return[4,this.updateLayoutMethod(h,f)];case 1:return[2,p.sent()]}})})})})),l&&c.then(function(){u.onAllLayoutEnd&&u.onAllLayoutEnd()}).catch(function(h){})}}else this.layout()}},n.prototype.adjustPipesBox=function(t,r){var i=this;return new Promise(function(o){var a=t.nodes;a!=null&&a.length||o(),KX.includes(r)||o();var s={center:i.layoutCfg.center,nodeSize:function(d){return Math.max(d.height,d.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=i.getLayoutBBox(a),c=u.groupNodes,l=u.layoutNodes,h=_t(l);s.onLayoutEnd=function(){l==null||l.forEach(function(d,f){var p,g,v,m=d.x-((p=h[f])===null||p===void 0?void 0:p.x),y=d.y-((g=h[f])===null||g===void 0?void 0:g.y);(v=c[f])===null||v===void 0||v.forEach(function(b){b.x+=m,b.y+=y})}),o()},new $t.Layouts[r](s).layout({nodes:l})})},n.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},n}(CR);function R1(e,n){for(var t=e.nodes,r=n.nodes,i=t.length,o=0;o<i;o++){var a=t[o];a.x=r[o].x,a.y=r[o].y}}function yO(e){return ZX.includes(e)}function bO(e,n){var t=n;n&&n.split("-")[1]==="gpu"&&(t=n.split("-")[0],e.gpuEnabled=!0);var r=!1;return e.gpuEnabled&&(r=!0,pO().webgl||(r=!1)),r&&!yO(t)&&(r=!1),r}var xO=br,wO=function(e){function n(t){var r=e.call(this,t)||this,i=r.get("defaultNode");return i||r.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",r.set("defaultNode",i)),r.destroyed=!1,r}return At(n,e),n.prototype.initLayoutController=function(){var t=new $X(this);this.set({layoutController:t})},n.prototype.initEventController=function(){var t=new G6(this);this.set({eventController:t})},n.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r,i=t.clientWidth,o=t.clientHeight,a=this.get("width")||i,s=this.get("height")||o;if(this.get("width")||this.get("height")||(this.set("width",i),this.set("height",o)),this.get("renderer")==="svg")r=new ol({container:t,width:a,height:s});else{var u={container:t,width:a,height:s},c=this.get("pixelRatio");c&&(u.pixelRatio=c,window.devicePixelRatio=c),r=new Do(u)}this.set("canvas",r)},n.prototype.initPlugins=function(){var t=this;re(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},n.prototype.downloadImageWatermark=function(t,r,i,o){return Nr(this,void 0,void 0,function(){var a,s,u;return Pr(this,function(c){switch(c.label){case 0:return a=t.style.backgroundImage,s=a.slice(5,a.length-2),(u=new Image).src=s,[4,new Promise(function(l){u.onload=function(){var h=r.createPattern(u,"repeat");r.rect(0,0,i,o),r.fillStyle=h,r.fill(),l("")}})];case 1:return c.sent(),[2]}})})},n.prototype.asyncToDataUrl=function(t,r,i,o,a,s){var u=this,c=document.querySelector(".g6-graph-watermarker"),l=this.get("canvas"),h=l.getRenderer(),d=s||l.get("el"),f="";t||(t="image/png"),setTimeout(function(){return Nr(u,void 0,void 0,function(){var p,g,v,m,y,b,x,w,E,S;return Pr(this,function(M){switch(M.label){case 0:return h!=="svg"?[3,1]:(p=d.cloneNode(!0),g=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(v=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",g)).replaceChild(p,v.documentElement),m=new XMLSerializer().serializeToString(v),f="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(m)),[3,4]);case 1:return y=void 0,b=d.getContext("2d"),x=o||this.get("width"),w=a||this.get("height"),E=void 0,c?[4,this.downloadImageWatermark(c,b,x,w)]:[3,3];case 2:M.sent(),M.label=3;case 3:if(r){S=typeof window!="undefined"?window.devicePixelRatio:1;try{y=b.getImageData(0,0,x*S,w*S),E=b.globalCompositeOperation,b.globalCompositeOperation="destination-over",b.fillStyle=r,b.fillRect(0,0,x,w)}catch(k){}}f=d.toDataURL(t),r&&(b.clearRect(0,0,x,w),b.putImageData(y,0,0),b.globalCompositeOperation=E),M.label=4;case 4:return i&&i(f),[2]}})})},16)},n.prototype.toDataURL=function(t,r){var i=this.get("canvas"),o=i.getRenderer(),a=i.get("el");t||(t="image/png");var s="";if(o==="svg"){var u=a.cloneNode(!0),c=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",c);l.replaceChild(u,l.documentElement);var h=new XMLSerializer().serializeToString(l);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(h))}else{var d=void 0,f=a.getContext("2d"),p=Math.max(this.get("width"),500),g=Math.max(this.get("height"),500),v=void 0;if(r){var m=typeof window!="undefined"&&window.devicePixelRatio||1;try{d=f.getImageData(0,0,p*m,g*m),v=f.globalCompositeOperation,f.globalCompositeOperation="destination-over",f.fillStyle=r,f.fillRect(0,0,p,g)}catch(y){}}s=a.toDataURL(t),r&&(f.clearRect(0,0,p,g),f.putImageData(d,0,0),f.globalCompositeOperation=v)}return s},n.prototype.toFullDataURL=function(t,r,i){var o=this.get("group").getCanvasBBox(),a=o.height,s=o.width,u=this.get("renderer"),c=xn('<div id="virtual-image"></div>'),l=i?i.backgroundColor:void 0,h=i?i.padding:void 0;h?Ue(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var d=a+h[0]+h[2],f=s+h[1]+h[3],p={container:c,height:d,width:f,quickHit:!0},g=u==="svg"?new ol(p):new Do(p),v=this.get("group").clone(),m=_t(v.getMatrix());m||(m=[1,0,0,0,1,0,0,0,1]);var y=(o.maxX+o.minX)/2,b=(o.maxY+o.minY)/2;m=xO(m,[["t",-y,-b],["t",s/2+h[3],a/2+h[0]]]),v.resetMatrix(),v.setMatrix(m),g.add(v);var x=g.get("el"),w="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var E=x.cloneNode(!0),S=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),M=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",S);M.replaceChild(E,M.documentElement);var k=new XMLSerializer().serializeToString(M);w="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(k))}else{var _=void 0,C=x.getContext("2d"),T=void 0;if(l){var A=typeof window!="undefined"?window.devicePixelRatio:1;try{_=C.getImageData(0,0,f*A,d*A),T=C.globalCompositeOperation,C.globalCompositeOperation="destination-over",C.fillStyle=l,C.fillRect(0,0,f,d)}catch(D){}}w=x.toDataURL(r),l&&(C.clearRect(0,0,f,d),C.putImageData(_,0,0),C.globalCompositeOperation=T)}t&&t(w)},16)},n.prototype.downloadFullImage=function(t,r,i){var o=this,a=this.get("group").getCanvasBBox(),s=a.height,u=a.width,c=this.get("renderer"),l=xn('<div id="virtual-image"></div>'),h=document.querySelector(".g6-graph-watermarker"),d=i?i.backgroundColor:void 0,f=i?i.padding:void 0;f?Ue(f)&&(f=[f,f,f,f]):f=[0,0,0,0];var p=s+f[0]+f[2],g=u+f[1]+f[3];if(h){var v=this.get("graphWaterMarker").cfg||{},m=v.width,y=v.height;p=Math.ceil(p/y)*y,g=Math.ceil(g/m)*m}var b,x,w={container:l,height:p,width:g},E=c==="svg"?new ol(w):new Do(w),S=this.get("group"),M=(x=(b=S).clone(),j6(b,x),x),k=_t(M.getMatrix());k||(k=[1,0,0,0,1,0,0,0,1]);var _=(a.maxX+a.minX)/2,C=(a.maxY+a.minY)/2;k=xO(k,[["t",-_,-C],["t",u/2+f[3],s/2+f[0]]]),M.resetMatrix(),M.setMatrix(k),E.add(M);var T=E.get("el");r||(r="image/png"),this.asyncToDataUrl(r,d,function(A){var D=document.createElement("a"),R=(t||"graph")+(c==="svg"?".svg":".".concat(r.split("/")[1]));o.dataURLToImage(A,c,D,R);var B=document.createEvent("MouseEvents");B.initEvent("click",!1,!1),D.dispatchEvent(B)},g,p,T)},n.prototype.downloadImage=function(t,r,i){var o=this,a=this;a.stopAnimate();var s=a.get("canvas").getRenderer();r||(r="image/png");var u=(t||"graph")+(s==="svg"?".svg":".".concat(r.split("/")[1])),c=document.createElement("a");a.asyncToDataUrl(r,i,function(l){o.dataURLToImage(l,s,c,u);var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),c.dispatchEvent(h)})},n.prototype.dataURLToImage=function(t,r,i,o){if(t&&t!=="data:"&&typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var a=t.split(","),s="";if(a&&a.length>0){var u=a[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var c=atob(a[1]),l=c.length,h=new Uint8Array(l);l--;)h[l]=c.charCodeAt(l);var d=new Blob([h],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(d,o):i.addEventListener("click",function(){i.download=o,i.href=window.URL.createObjectURL(d)})}else i.addEventListener("click",function(){i.download=o,i.href=t})},n.prototype.addPlugin=function(t){t.destroyed||(this.get("plugins").push(t),t.initPlugin(this))},n.prototype.removePlugin=function(t){var r=this.get("plugins"),i=r.indexOf(t);i>=0&&(t.destroyPlugin(),r.splice(i,1))},n.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=ss.waterMarkerImage);var i=this.get("container");he(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var o=this.get("graphWaterMarker"),a=Zt({},ss.imageWaterMarkerConfig,r),s=a.width,u=a.height,c=a.compatible,l=a.image;if(!t){var h=c?i:document.querySelector(".g6-graph-watermarker");return h&&(h.style.cssText=void 0),void(o&&o.clear())}if(o)o.clear();else{var d={container:i,width:s,height:u,capture:!1},f=this.get("pixelRatio");f&&(d.pixelRatio=f,window.devicePixelRatio=f),o=new Do(d),this.set("graphWaterMarker",o)}o.get("el").style.display="none";var p=o.get("context"),g=l.rotate,v=l.x,m=l.y;p.rotate(-g*Math.PI/180);var y=new Image;y.crossOrigin="anonymous",y.src=t,y.onload=function(){if(p.drawImage(y,v,m,l.width,l.height),p.rotate(g*Math.PI/180),c)i.style.cssText="background-image: url(".concat(o.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var b=document.querySelector(".g6-graph-watermarker");b||((b=document.createElement("div")).className="g6-graph-watermarker"),b.className="g6-graph-watermarker",o.destroyed||(b.style.cssText="background-image: url(".concat(o.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),i.appendChild(b))}}},n.prototype.setTextWaterMarker=function(t,r){var i=this.get("container");he(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var o=this.get("graphWaterMarker"),a=Zt({},ss.textWaterMarkerConfig,r),s=a.width,u=a.height,c=a.compatible,l=a.text;if(!(t!=null&&t.length)){var h=c?i:document.querySelector(".g6-graph-watermarker");return h&&(h.style.cssText=void 0),void(o&&o.clear())}if(o)o.clear();else{var d={container:i,width:s,height:u,capture:!1},f=this.get("pixelRatio");f&&(d.pixelRatio=f,window.devicePixelRatio=f),o=new Do(d),this.set("graphWaterMarker",o)}o.get("el").style.display="none";var p=o.get("context"),g=l.rotate,v=l.fill,m=l.fontFamily,y=l.fontSize,b=l.baseline,x=l.x,w=l.y,E=l.lineHeight;p.rotate(-g*Math.PI/180),p.font="".concat(y,"px ").concat(m),p.fillStyle=v,p.textBaseline=b;for(var S=he(t)?[t]:t,M=S.length-1;M>=0;M--)p.fillText(S[M],x,w+M*E);if(p.rotate(g*Math.PI/180),c)i.style.cssText="background-image: url(".concat(o.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var k=document.querySelector(".g6-graph-watermarker");k||((k=document.createElement("div")).className="g6-graph-watermarker"),k.style.cssText="background-image: url(".concat(o.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),i.appendChild(k)}},n.prototype.destroy=function(){var t,r,i,o;re(this.get("plugins"),function(l){l.destroyPlugin()});var a=this.get("tooltips");if(a)for(var s=0;s<a.length;s++){var u=a[s];if(u){var c=u.parentElement;c&&c.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(i=this.get("graphWaterMarker"))===null||i===void 0||i.destroy(),(o=document.querySelector(".g6-graph-watermarker"))===null||o===void 0||o.remove(),e.prototype.destroy.call(this)},n}(gR);function j1(e){return j1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},j1(e)}function EO(e,n){if(n===void 0&&(n=new WeakMap),e===null)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(j1(e)!=="object")return e;if(n.get(e))return n.get(e);var t=Array.isArray(e)?[]:{};for(var r in n.set(e,t),e)e.hasOwnProperty(r)&&e[r]!==void 0&&(t[r]=EO(e[r],n));return t}function QX(e){try{return structuredClone(e)}catch(n){return EO(e)}}var Bp,JX=Ko.radialLayout,z1=Ko.traverseTree,eU=function(e){function n(t){var r=e.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return At(n,e),n.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var i=Lp[t.type](r,t);return JX(i),i}:function(r){return Lp[t.type](r,t)}):null},n.indexOfChild=function(t,r){var i=-1;return re(t,function(o,a){if(r===o.id)return i=a,!1}),i},n.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.animate=!0,t},n.prototype.innerAddChild=function(t,r,i){var o=this,a=t.data;a&&(a.x=t.x,a.y=t.y,a.depth=t.depth);var s=o.addItem("node",a,!1);if(r){if(s.set("parent",r),i){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var c=r.getModel();s.set("originAttrs",{x:c.x,y:c.y})}}var l=r.get("children");l?l.push(s):r.set("children",[s]),o.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return re(t.children||[],function(h){o.innerAddChild(h,s,i)}),o.emit("afteraddchild",{item:s,parent:r}),s},n.prototype.innerUpdateChild=function(t,r,i){var o=this,a=o.findById(t.id);if(a){re(t.children||[],function(f){o.innerUpdateChild(f,a,i)});var s,u,c=a.get("children");if(c&&c.length>0)for(var l=c.length-1;l>=0;l--){var h=c[l].getModel();n.indexOfChild(t.children||[],h.id)===-1&&(o.innerRemoveChild(h.id,{x:t.x,y:t.y},i),c.splice(l,1))}a.get("originAttrs")&&(s=a.get("originAttrs").x,u=a.get("originAttrs").y);var d=a.getModel();i&&a.set("originAttrs",{x:d.x,y:d.y}),a.set("model",Object.assign(d,t.data)),s===t.x&&u===t.y||a.updatePosition({x:t.x,y:t.y})}else o.innerAddChild(t,r,i)},n.prototype.innerRemoveChild=function(t,r,i){var o=this,a=o.findById(t);if(a)if(re(a.get("children"),function(u){o.innerRemoveChild(u.getModel().id,r,i)}),i){var s=a.getModel();a.set("to",r),a.set("originAttrs",{x:s.x,y:s.y}),o.get("removeList").push(a)}else o.removeItem(a,!1)},n.prototype.changeData=function(t,r){r===void 0&&(r=!0);var i=this;this.getNodes().map(function(o){return i.clearItemStates(o)}),this.getEdges().map(function(o){return i.clearItemStates(o)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.get("originData"),after:t||i.get("data")}),t?(i.data(t),i.render(!1)):i.layout(this.get("fitView"))},n.prototype.changeLayout=function(t){this.updateLayout(t)},n.prototype.updateLayout=function(t,r,i,o){o===void 0&&(o=!0);var a=this;if(t&&(o&&this.get("enabledStack")&&this.pushStack("layout",{before:a.get("layout"),after:t}),a.set("layout",t),a.set("layoutMethod",a.getLayout()),a.layout(),r)){var s=i;s||(s=r==="begin"?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var c=this.getGroup().getCanvasBBox(),l=c.minX,h=c.maxX,d=c.minY,f={x:(l+h)/2,y:(d+c.maxY)/2};r==="begin"&&(f.x=l,f.y=d),this.translate(s.x-f.x,s.y-f.y)}},n.prototype.refreshLayout=function(t){this.layout(t)},n.prototype.layout=function(t){var r=this,i=this,o=i.get("data"),a=i.get("layoutMethod"),s=i.get("layout"),u=o;if(s!=null&&s.excludeInvisibles){o=_t(i.get("data"));var c={};z1(o,function(h){var d=h.children;if(!(d!=null&&d.length))return!0;for(var f=d.length-1;f>=0;f--){var p=r.findById(d[f].id);(p?!p.isVisible():d[f].visible===!1)&&(c[h.id]=c[h.id]||[],c[h.id].push({idx:f,child:d.splice(f,1)[0]}))}}),u=a?a(o,i.get("layout")):o,z1(u,function(h){var d=c[h.id];if(d!=null&&d.length)for(var f=d.length-1;f>=0;f--){var p=d[f],g=p.idx,v=p.child;h.children.splice(g,0,v)}})}else u=a?a(o,i.get("layout")):o;var l=i.get("animate");i.emit("beforerefreshlayout",{data:o,layoutData:u}),i.emit("beforelayout"),i.innerUpdateChild(u,void 0,l),t&&i.get("viewController").fitView(),l?i.layoutAnimate(u):(i.refresh(),i.paint()),i.emit("afterrefreshlayout",{data:o,layoutData:u}),i.emit("afterlayout")},n.prototype.addChild=function(t,r,i){i===void 0&&(i=!0);var o=this;o.emit("beforeaddchild",{model:t,parent:r}),he(r)||(r=r.get("id"));var a=o.findDataById(r);a&&(a.children||(a.children=[]),a.children.push(t),o.findById(r).refresh(),o.changeData(void 0,i))},n.prototype.updateChildren=function(t,r,i){i===void 0&&(i=!0);var o=this,a=o.findById(r);r&&a&&(o.findDataById(r).children=t,a.refresh(),o.changeData(void 0,i))},n.prototype.updateChild=function(t,r,i){i===void 0&&(i=!0);var o=this;if(r&&o.findById(r)){var a=o.findDataById(r),s=o.findById(t.id);if(a.children||(a.children=[]),s){var u=n.indexOfChild(a.children,t.id);u>-1&&(a.children[u]=t)}else a.children.push(t);var c=o.findById(r);c==null||c.refresh(),o.changeData(void 0,i)}else o.changeData(t,i)},n.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var i,o=this,a=o.findById(t);if((i=a?a==null?void 0:a.get("parent"):o.getNodes().find(function(h){return!!(h.getModel().children||[]).find(function(d){return d.id===t})}))&&!i.destroyed){var s=i.get("id"),u=o.findDataById(s),c=u&&u.children||[],l=n.indexOfChild(c,t);c.splice(l,1),i.refresh()}o.changeData(void 0,r)},n.prototype.findDataById=function(t,r){var i=this;if(r||(r=i.get("data")),t===r.id)return r;var o=null;return re(r.children||[],function(a){return a.id===t?(o=a,!1):!(o=i.findDataById(t,a))&&void 0}),o},n.prototype.layoutAnimate=function(t,r){var i=this,o=this.get("animateCfg");i.emit("beforeanimate",{data:t}),i.getEdges().forEach(function(a){var s=a.get("model");s.sourceAnchor||(s.sourceAnchor=a.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(a){z1(t,function(s){var u=i.findById(s.id);if(u){var c=u.get("originAttrs"),l=u.get("model");if(c||(c={x:l.x,y:l.y},u.set("originAttrs",c)),r){var h=r(u,a,c,t);u.set("model",Object.assign(l,h))}else l.x=c.x+(s.x-c.x)*a,l.y=c.y+(s.y-c.y)*a}return!0}),re(i.get("removeList"),function(s){var u=s.getModel(),c=s.get("originAttrs"),l=s.get("to");u.x=c.x+(l.x-c.x)*a,u.y=c.y+(l.y-c.y)*a}),i.refreshPositions()},{duration:o.duration,easing:o.ease,callback:function(){re(i.getNodes(),function(a){a.set("originAttrs",null)}),re(i.get("removeList"),function(a){i.removeItem(a,!1)}),i.set("removeList",[]),o.callback&&o.callback(),i.emit("afteranimate",{data:t})},delay:o.delay})},n.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},n.prototype.isLayoutAnimating=function(){return this.layoutAnimating},n.prototype.render=function(t){t===void 0&&(t=!0);var r=this,i=r.get("data");if(!i||!Tn(i)||!Object.keys(i).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},n.prototype.save=function(){return this.get("data")},n.prototype.data=function(t){e.prototype.data.call(this,t),this.set("originData",QX(t))},n}(wO),Xr=function(){function e(n){this._cfgs=Zt(this.getDefaultCfgs(),n),this._events={},this.destroyed=!1}return e.prototype.getDefaultCfgs=function(){return{}},e.prototype.initPlugin=function(n){var t=this;t.set("graph",n);var r=t.getEvents(),i={};re(r,function(o,a){var s=ia(t,o);i[a]=s,n.on(a,s)}),this._events=i,this.init()},e.prototype.getEvents=function(){return{}},e.prototype.get=function(n){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[n]},e.prototype.set=function(n,t){this._cfgs[n]=t},e.prototype.destroy=function(){},e.prototype.destroyPlugin=function(){this.destroy();var n=this.get("graph");re(this._events,function(t,r){n.off(r,t)}),this._events=null,this._cfgs=null,this.destroyed=!0},e}(),tU=(Bp=function(e,n){return Bp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Bp(e,n)},function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}Bp(e,n),e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}),SO="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",nU=function(e){function n(t){return e.call(this,t)||this}return tU(n,e),n.prototype.getDefaultCfgs=function(){return{img:SO,follow:!0}},n.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),i=t.get("canvas").get("el"),o=this.get("img")||SO;o.includes("url(")||(o='url("'.concat(o,'")'));var a=xn(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=xn(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(o,`;
        user-select: none
        '></div>`));this.set("container",a),this.set("gridContainer",s),this.positionInit(),a.appendChild(s),r.insertBefore(a,i)},n.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),i=t.get("width"),o=t.get("height");Ht(this.get("container"),{width:"".concat(i,"px"),height:"".concat(o,"px")});var a=80*i/r,s=80*o/r;Ht(this.get("gridContainer"),{width:"".concat(a,"px"),height:"".concat(s,"px"),left:"-".concat(a/2,"px"),top:"-".concat(s/2,"px")})},n.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},n.prototype.updateGrid=function(t){var r=this.get("gridContainer"),i=t.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var o=this.get("follow");Ht(r,{transform:"matrix(".concat(i[0],", ").concat(i[1],", ").concat(i[3],", ").concat(i[4],", ").concat(o?i[6]:"0",", ").concat(o?i[7]:"0",")")})},n.prototype.getContainer=function(){return this.get("container")},n.prototype.destroy=function(){var t=this.get("graph").get("container"),r=this.get("container");t.removeChild(r)},n}(Xr),F1={exports:{}},MO=[],$l=[];function _O(e,n){if(n=n||{},e===void 0)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var t,r=n.prepend===!0?"prepend":"append",i=n.container!==void 0?n.container:document.querySelector("head"),o=MO.indexOf(i);return o===-1&&(o=MO.push(i)-1,$l[o]={}),$l[o]!==void 0&&$l[o][r]!==void 0?t=$l[o][r]:(t=$l[o][r]=function(){var a=document.createElement("style");return a.setAttribute("type","text/css"),a}(),r==="prepend"?i.insertBefore(t,i.childNodes[0]):i.appendChild(t)),e.charCodeAt(0)===65279&&(e=e.substr(1,e.length)),t.styleSheet?t.styleSheet.cssText+=e:t.textContent+=e,t}F1.exports=_O,F1.exports.insertCss=_O;const Rp=qs(F1.exports);var rU=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&Rp(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var iU=function(e){function n(t){return e.call(this,t)||this}return rU(n,e),n.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},n.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},n.prototype.init=function(){var t=this.get("className"),r=xn("<div class=".concat(t||"g6-component-contextmenu","></div>"));Ht(r,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),he(i)&&(i=document.getElementById(i)),i.appendChild(r),this.set("menu",r)},n.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var i=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&i.indexOf(t.item.getType())===-1)return void r.onMenuHide()}else if(i.indexOf("canvas")===-1)return void r.onMenuHide();if(this.get("shouldBegin")(t)){var o=this.get("menu"),a=this.get("getContent"),s=this.get("graph"),u=a(t,s);he(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(E){c(E.target,t.item,s)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var h=s.get("width"),d=s.get("height"),f=o.getBoundingClientRect(),p=this.get("offsetX")||0,g=this.get("offsetY")||0,v=s.getContainer().offsetTop,m=s.getContainer().offsetLeft,y=t.canvasX+m+p,b=t.canvasY+v+g;y+f.width>h&&(y=t.canvasX-f.width-p+m),b+f.height>d&&(b=t.canvasY-f.height-g+v),b<0&&(b=0),Ht(o,{top:"".concat(b,"px"),left:"".concat(y,"px"),visibility:"visible"});var x=this.get("trigger")==="click",w=function(E){x?x=!1:r.onMenuHide()};document.body.addEventListener("click",w),this.set("handler",w)}},n.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null)),r&&document.body.removeEventListener("click",r)},n.prototype.onMenuHide=function(){var t=this.get("menu");t&&Ht(t,{visibility:"hidden"}),this.removeMenuEventListener()},n.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),he(r)&&(r=document.getElementById(r)),r.removeChild(t)}},n}(Xr),oU=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),G1=function(){return G1=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},G1.apply(this,arguments)},kO=Math.max,aU=br,sU=function(e){function n(t){var r=e.call(this,t)||this;return r.handleUpdateCanvas=nu(function(i){var o=r;o.destroyed||o.updateCanvas()},100,!1),r}return oU(n,e),n.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},n.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},n.prototype.disableRefresh=function(){this.set("refresh",!1)},n.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},n.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},n.prototype.initViewport=function(){var t=this,r=this._cfgs,i=r.size,o=r.graph;if(!this.destroyed){var a=this.get("canvas").get("container"),s=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=xn(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!u&&!s,`
      </div>`)),l=0,h=0,d=!1,f=0,p=0,g=0,v=0,m=0,y=0,b=u||s?"mousedown":"dragstart";c.addEventListener(b,function(S){var M,k;if(S.dataTransfer){var _=new Image;_.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(k=(M=S.dataTransfer).setDragImage)===null||k===void 0||k.call(M,_,0,0);try{S.dataTransfer.setData("text/html","view-port-minimap")}catch(T){S.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,S.target===c){var C=c.style;f=parseInt(C.left,10),p=parseInt(C.top,10),g=parseInt(C.width,10),v=parseInt(C.height,10),g>i[0]||v>i[1]||(y=o.getZoom(),m=t.get("ratio"),d=!0,l=S.clientX,h=S.clientY)}},!1);var x=function(S){if(d&&!ht(S.clientX)&&!ht(S.clientY)){var M=l-S.clientX,k=h-S.clientY;(f-M<0||f-M+g>=i[0])&&(M=0),(p-k<0||p-k+v>=i[1])&&(k=0),p-=k,Ht(c,{left:"".concat(f-=M,"px"),top:"".concat(p,"px")}),o.translate(M*y/m,k*y/m),l=S.clientX,h=S.clientY}};u||s||c.addEventListener("drag",x,!1);var w=function(){d=!1,r.refresh=!0},E=u||s?"mouseup":"dragend";c.addEventListener(E,w,!1),a.addEventListener("mouseleave",w),a.addEventListener("mouseup",w),(u||s)&&a.addEventListener("mousemove",x,!1),this.set("viewport",c),a.appendChild(c)}},n.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),i=this.get("totaldy"),o=this.get("graph"),a=this.get("size"),s=o.get("canvas").get("el"),u=o.get("width")||s.scrollWidth||500,c=o.get("height")||s.scrollHeight||500,l=o.getPointByCanvas(0,0),h=o.getPointByCanvas(u,c),d=this.get("viewport");d||this.initViewport();var f=(h.x-l.x)*t,p=(h.y-l.y)*t,g=l.x*t+r,v=l.y*t+i,m=g+f,y=v+p;g<0&&(f+=g,g=0),m>a[0]&&(f-=m-a[0]),v<0&&(p+=v,v=0),y>a[1]&&(p-=y-a[1]),this.set("ratio",t),Ht(d,{left:"".concat(g,"px"),top:"".concat(v,"px"),width:"".concat(f,"px"),height:"".concat(p,"px")})}},n.prototype.updateGraphShapes=function(){var t,r=this._cfgs.graph,i=this.get("canvas"),o=r.get("group");o.destroyed||(i.clear(),this.get("hideEdge")?(t=i.addGroup(),o.get("children").forEach(function(a){a.get("id").includes("-edge")||t.add(a.clone())})):((t=o.clone()).resetMatrix(),i.add(t)),r.get("renderer")==="svg"&&this.updateVisible(t))},n.prototype.updateVisible=function(t){var r=this;if(t.isGroup()||t.get("visible")){var i=t.get("children");if(!i||!i.length)return;i.forEach(function(o){o.get("visible")||o.hide(),r.updateVisible(o)})}else t.hide()},n.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,i=this.get("canvas"),o=i.get("children")[0]||i.addGroup();this.get("hideEdge")||re(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,o)}),re(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,o)});var a=r.getCombos();if(a&&a.length){var s=o.find(function(u){return u.get("name")==="comboGroup"})||o.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||(re(a,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},n.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var i=this.get("itemMap")||{},o=i[t.get("id")],a=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),c={x:a.centerX,y:a.centerY};o?c=Object.assign(u,c):(o=s,r.add(o));var l=o.get("type");l!=="rect"&&l!=="image"||(c.x=a.minX,c.y=a.minY),o.attr(c),t.isVisible()?o.show():o.hide(),o.exist=!0;var h=t.getModel().depth;isNaN(h)||o.set("zIndex",h),i[t.get("id")]=o,this.set("itemMap",i)}},n.prototype.updateOneNodeKeyShape=function(t,r){var i=this.get("itemMap")||{},o=i[t.get("id")],a=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),c={x:a.centerX,y:a.centerY};o?(c=Object.assign(u,c),o.toFront()):(o=s,r.add(o));var l=o.get("type");l!=="rect"&&l!=="image"||(c.x=a.minX,c.y=a.minY),o.attr(c),t.isVisible()?o.show():o.hide(),o.exist=!0;var h=t.getModel().depth;isNaN(h)||o.set("zIndex",h),i[t.get("id")]=o,this.set("itemMap",i)},n.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,i=this.get("canvas"),o=i.get("children")[0]||i.addGroup();this.get("hideEdge")||re(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,o)}),re(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,o)});var a=r.getCombos();if(a&&a.length){var s=o.find(function(u){return u.get("name")==="comboGroup"})||o.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||(re(a,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},n.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(r&&r.length!==0)for(var i=r.length-1;i>=0;i--){var o=t[r[i]],a=o.exist;o.exist=!1,a||(o.remove(),delete t[r[i]])}},n.prototype.updateOneEdgeKeyShape=function(t,r){var i=this.get("itemMap")||{},o=i[t.get("id")];if(o){var a=t.get("keyShape").attr("path");o.attr("path",a)}else o=t.get("keyShape").clone(),r.add(o);t.isVisible()?o.show():o.hide(),o.exist=!0,i[t.get("id")]=o,this.set("itemMap",i)},n.prototype.updateOneNodeDelegateShape=function(t,r){var i=this.get("delegateStyle"),o=this.get("itemMap")||{},a=o[t.get("id")],s=t.getBBox();if(a){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};a.attr(u),a.toFront()}else a=r.addShape("rect",{attrs:G1({x:s.minX,y:s.minY,width:s.width,height:s.height},i),name:"minimap-node-shape"});t.isVisible()?a.show():a.hide(),a.exist=!0,o[t.get("id")]=a,this.set("itemMap",o)},n.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},n.prototype.initContainer=function(){var t=this,r=t.get("graph"),i=t.get("size"),o=t.get("className"),a=t.get("container"),s=xn("<div class='".concat(o,"' style='width: ").concat(i[0],"px; height: ").concat(i[1],"px; overflow: hidden'></div>"));he(a)&&(a=document.getElementById(a)),a?a.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u,c=xn('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(c),c.addEventListener("dragenter",function(l){l.preventDefault()}),c.addEventListener("dragover",function(l){l.preventDefault()}),u=r.get("renderer")==="svg"?new ol({container:c,width:i[0],height:i[1]}):new Do({container:c,width:i[0],height:i[1]}),t.set("canvas",u),t.updateCanvas()},n.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var r=this.get("size"),i=this.get("canvas"),o=this.get("type"),a=this.get("padding");if(!i.destroyed){switch(o){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var s=i.get("children")[0];if(s){s.resetMatrix();var u=s.getCanvasBBox(),c=t.get("canvas").getCanvasBBox(),l=t.getZoom()||1,h=c.width/l,d=c.height/l;Number.isFinite(u.width)&&(h=kO(u.width,h),d=kO(u.height,d)),h+=2*a,d+=2*a;var f=Math.min(r[0]/h,r[1]/d),p=[1,0,0,0,1,0,0,0,1],g=0,v=0;Number.isFinite(u.minX)&&(g=-u.minX),Number.isFinite(u.minY)&&(v=-u.minY);var m=(r[0]-(h-2*a)*f)/2,y=(r[1]-(d-2*a)*f)/2;p=aU(p,[["t",g,v],["s",f,f],["t",m,y]]),s.setMatrix(p),this.set("ratio",f),this.set("totaldx",m+g*f),this.set("totaldy",y+v*f),this.set("dx",m),this.set("dy",y),this.updateViewport()}}}}},n.prototype.getCanvas=function(){return this.get("canvas")},n.prototype.getViewport=function(){return this.get("viewport")},n.prototype.getContainer=function(){return this.get("container")},n.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},n}(Xr),uU=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function go(e,n,t){var r=e.x-n.x,i=e.y-n.y;return Math.sqrt(r*r+i*i)}function CO(e,n){var t=(n.source.y-n.target.y)/(n.source.x-n.target.x),r=(t*t*n.source.x+t*(e.y-n.source.y)+e.x)/(t*t+1);return{x:r,y:t*(r-n.source.x)+n.source.y}}var cU=function(e){function n(t){return e.call(this,t)||this}return uU(n,e),n.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},n.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick");this.set("tick",function(){r&&r(),t.refreshPositions()})},n.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var i=t.edges||[],o=t.nodes||[],a={},s=!1;if(o.forEach(function(b){b.x!==null&&!b.y!==null&&b.x!==void 0&&!b.y!==void 0||(s=!0),a[b.id]=b}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",a);var u=r.get("divisions"),c=r.get("divRate"),l=r.divideEdges(u);r.set("edgePoints",l);var h=r.getEdgeBundles();r.set("edgeBundles",h);for(var d=r.get("cycles"),f=r.get("iterations"),p=r.get("iterRate"),g=r.get("lambda"),v=0;v<d;v++){for(var m=function(b){var x=[];i.forEach(function(w,E){if(w.source!==w.target){var S=a[w.source],M=a[w.target];x[E]=r.getEdgeForces({source:S,target:M},E,u,g);for(var k=0;k<u+1;k++)l[E][k].x+=x[E][k].x,l[E][k].y+=x[E][k].y}})},y=0;y<f;y++)m();g/=2,u*=c,f*=p,l=r.divideEdges(u),r.set("edgePoints",l)}i.forEach(function(b,x){b.source!==b.target&&(b.type="polyline",b.controlPoints=l[x].slice(1,l[x].length-1))}),r.get("graph").refresh()}},n.prototype.updateBundling=function(t){var r=this,i=t.data;if(i&&r.set("data",i),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(a){r.set(a,t[a])}),t.onTick){var o=this.get("graph");r.set("tick",function(){t.onTick(),o.refresh()})}r.bundling(i)},n.prototype.divideEdges=function(t){var r=this,i=r.get("data").edges,o=r.get("nodeIdMap"),a=r.get("edgePoints");return a&&a!==void 0||(a=[]),i.forEach(function(s,u){var c;a[u]&&a[u]!==void 0||(a[u]=[]);var l=o[s.source],h=o[s.target];if(t===1)a[u].push({x:l.x,y:l.y}),a[u].push({x:.5*(l.x+h.x),y:.5*(l.y+h.y)}),a[u].push({x:h.x,y:h.y});else{var d=(!((c=a[u])===null||c===void 0)&&c.length?r.getEdgeLength(a[u]):go({x:l.x,y:l.y},{x:h.x,y:h.y}))/(t+1),f=d,p=[{x:l.x,y:l.y}];a[u].forEach(function(g,v){if(v!==0){for(var m=go(g,a[u][v-1]);m>f;){var y=f/m,b={x:a[u][v-1].x,y:a[u][v-1].y};b.x+=y*(g.x-a[u][v-1].x),b.y+=y*(g.y-a[u][v-1].y),p.push(b),m-=f,f=d}f-=m}}),p.push({x:h.x,y:h.y}),a[u]=p}}),a},n.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(i,o){o!==0&&(r+=go(i,t[o-1]))}),r},n.prototype.getEdgeBundles=function(){var t=this,r=t.get("data").edges||[],i=t.get("bundleThreshold"),o=t.get("nodeIdMap"),a=t.get("edgeBundles");return a||(a=[]),r.forEach(function(s,u){a[u]&&a[u]!==void 0||(a[u]=[])}),r.forEach(function(s,u){var c=o[s.source],l=o[s.target];r.forEach(function(h,d){if(!(d<=u)){var f=o[h.source],p=o[h.target];t.getBundleScore({source:c,target:l},{source:f,target:p})>=i&&(a[u].push(d),a[d].push(u))}})}),a},n.prototype.getBundleScore=function(t,r){var i=this;return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=go({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=go({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y}),i.getAngleScore(t,r)*i.getScaleScore(t,r)*i.getPositionScore(t,r)*i.getVisibilityScore(t,r)},n.prototype.getAngleScore=function(t,r){var i=function(o,a){return o.x*a.x+o.y*a.y}({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return i/(t.length*r.length)},n.prototype.getScaleScore=function(t,r){var i=(t.length+r.length)/2;return 2/(i/Math.min(t.length,r.length)+Math.max(t.length,r.length)/i)},n.prototype.getPositionScore=function(t,r){var i=(t.length+r.length)/2;return i/(i+go({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2}))},n.prototype.getVisibilityScore=function(t,r){var i=this.getEdgeVisibility(t,r),o=this.getEdgeVisibility(r,t);return i<o?i:o},n.prototype.getEdgeVisibility=function(t,r){var i=CO(r.source,t),o=CO(r.target,t),a={x:(i.x+o.x)/2,y:(i.y+o.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*go(a,s)/go(i,o))},n.prototype.getEdgeForces=function(t,r,i,o){for(var a=this,s=a.get("edgePoints"),u=a.get("K")/(go(t.source,t.target)*(i+1)),c=[{x:0,y:0}],l=1;l<i;l++){var h={x:0,y:0},d=a.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},u),f=a.getElectrostaticForce(l,r);h.x=o*(d.x+f.x),h.y=o*(d.y+f.y),c.push(h)}return c.push({x:0,y:0}),c},n.prototype.getSpringForce=function(t,r){var i=t.pre.x+t.next.x-2*t.cur.x,o=t.pre.y+t.next.y-2*t.cur.y;return{x:i*=r,y:o*=r}},n.prototype.getElectrostaticForce=function(t,r){var i=this,o=i.get("eps"),a=i.get("edgeBundles"),s=i.get("edgePoints"),u=a[r],c={x:0,y:0};return u.forEach(function(l){var h={x:s[l][t].x-s[r][t].x,y:s[l][t].y-s[r][t].y};if(Math.abs(h.x)>o||Math.abs(h.y)>o){var d=1/go(s[l][t],s[r][t]);c.x+=h.x*d,c.y+=h.y*d}}),c},n.prototype.isTicking=function(){return this.get("ticking")},n.prototype.getSimulation=function(){return this.get("forceSimulation")},n.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),e.prototype.destroy.call(this)},n}(Xr),lU=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Y1=function(){return Y1=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Y1.apply(this,arguments)},AO={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},hU=function(e){function n(t){return e.call(this,t)||this}return lU(n,e),n.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:_t(AO),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},n.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"}}return t},n.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var i=t.get("d");t.set("molecularParam",(i+1)*r)},n.prototype.createDelegate=function(t){var r=this,i=this,o=i.get("delegate");o&&!o.destroyed||(i.magnify(t),(o=i.get("delegate")).on("dragstart",function(a){i.set("delegateCenterDiff",{x:o.attr("x")-a.x,y:o.attr("y")-a.y})}),o.on("drag",function(a){i.magnify(a)}),this.get("scaleDBy")==="wheel"&&o.on("mousewheel",function(a){r.scaleDByWheel(a)}),this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(a){i.scaleRByWheel(a)}))},n.prototype.scaleRByWheel=function(t){var r=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var i,o=r.get("graph"),a=r.get("delegate"),s=(a?{x:a.attr("x"),y:a.attr("y")}:void 0)||o.getPointByClient(t.clientX,t.clientY);i=t.originalEvent.wheelDelta<0?.95:1/.95;var u=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(u||o.get("height"))&&i>1||l<(c||.05*o.get("height"))&&i<1)&&(i=1),l*=i,r.set("r",l),r.set("r2",l*l);var h=r.get("d");r.set("molecularParam",(h+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,s)}},n.prototype.scaleRByDrag=function(t){var r=this;if(t){var i,o=r.get("dragPrePos"),a=r.get("graph"),s=a.getPointByClient(t.clientX,t.clientY);i=t.x-o.x<0?.95:1/.95;var u=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(u||a.get("height"))&&i>1||l<(c||.05*a.get("height"))&&i<1)&&(i=1),l*=i,r.set("r",l),r.set("r2",l*l);var h=r.get("d");r.set("molecularParam",(h+1)*l),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},n.prototype.scaleDByWheel=function(t){var r=this;if(t||t.originalEvent){t.preventDefault&&t.preventDefault();var i=0;i=t.originalEvent.wheelDelta<0?-.1:.1;var o=r.get("d")+i,a=r.get("maxD"),s=r.get("minD");if(o<a&&o>s){r.set("d",o);var u=r.get("r");r.set("molecularParam",(o+1)*u);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},n.prototype.scaleDByDrag=function(t){var r=this,i=r.get("dragPrePos"),o=t.x-i.x>0?.1:-.1,a=r.get("d")+o,s=r.get("maxD"),u=r.get("minD");if(a<s&&a>u){r.set("d",a);var c=r.get("r");r.set("molecularParam",(a+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},n.prototype.magnify=function(t,r){var i=this;i.restoreCache();var o=i.get("graph"),a=i.get("cachedMagnifiedModels"),s=i.get("cachedOriginPositions"),u=i.get("showLabel"),c=i.get("r"),l=i.get("r2"),h=i.get("d"),d=i.get("molecularParam"),f=o.getNodes(),p=f.length,g=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};!i.get("dragging")||i.get("trigger")!=="mousemove"&&i.get("trigger")!=="click"||(g=i.get("cacheCenter"));var v=i.get("delegateCenterDiff");v&&(g.x+=v.x,g.y+=v.y),i.updateDelegate(g,c);for(var m=0;m<p;m++){var y=f[m].getModel(),b=y.x,x=y.y;if(!isNaN(b)&&!isNaN(x)){var w=(b-g.x)*(b-g.x)+(x-g.y)*(x-g.y);if(!isNaN(w)&&w<l&&w!==0){var E=Math.sqrt(w),S=d*E/(h*E+c),M=(b-g.x)/E,k=(x-g.y)/E;if(y.x=M*S+g.x,y.y=k*S+g.y,s[y.id]||(s[y.id]={x:b,y:x,texts:[]}),a.push(y),u&&2*E<c)for(var _=f[m].getContainer().getChildren(),C=_.length,T=0;T<C;T++){var A=_[T];A.get("type")==="text"&&(s[y.id].texts.push({visible:A.get("visible"),shape:A}),A.set("visible",!0))}}}}o.refreshPositions()},n.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),i=t.get("cachedOriginPositions"),o=r.length,a=0;a<o;a++){var s=r[a],u=i[s.id];s.x=u.x,s.y=u.y;for(var c=u.texts.length,l=0;l<c;l++){var h=u.texts[l];h.shape.set("visible",h.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},n.prototype.updateParams=function(t){var r=this,i=t.r,o=t.d,a=t.trigger,s=t.minD,u=t.maxD,c=t.minR,l=t.maxR,h=t.scaleDBy,d=t.scaleRBy;isNaN(t.r)||(r.set("r",i),r.set("r2",i*i)),isNaN(o)||r.set("d",o),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(l)||r.set("maxR",l),isNaN(c)||r.set("minR",c);var f,p=r.get("d"),g=r.get("r");r.set("molecularParam",(p+1)*g),a!=="mousemove"&&a!=="click"&&a!=="drag"||r.set("trigger",a),(h==="drag"||h==="wheel"||h==="unset")&&(r.set("scaleDBy",h),r.get("delegate").remove(),r.get("delegate").destroy(),(f=r.get("dPercentText"))&&(f.remove(),f.destroy())),d!=="drag"&&d!=="wheel"&&d!=="unset"||(r.set("scaleRBy",d),r.get("delegate").remove(),r.get("delegate").destroy(),(f=r.get("dPercentText"))&&(f.remove(),f.destroy()))},n.prototype.updateDelegate=function(t,r){var i=this,o=this,a=o.get("graph"),s=o.get("delegate");if(!s||s.destroyed){var u=a.get("group"),c=o.get("delegateStyle")||AO;s=u.addShape("circle",{attrs:Y1({r:r/1.5,x:t.x,y:t.y},c),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(f){o.scaleRByWheel(f)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(f){o.set("dragging",!0),o.set("cacheCenter",{x:f.x,y:f.y}),o.set("dragPrePos",{x:f.x,y:f.y})}),s.on("drag",function(f){o.scaleRByDrag(f)}),s.on("dragend",function(f){o.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(f){i.scaleDByWheel(f)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(f){o.set("dragging",!0),o.set("cacheCenter",{x:f.x,y:f.y}),o.set("dragPrePos",{x:f.x,y:f.y})}),s.on("drag",function(f){i.scaleDByDrag(f)}),s.on("dragend",function(f){o.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(o.get("showDPercent")){var l=Math.round((o.get("d")-o.get("minD"))/(o.get("maxD")-o.get("minD"))*100),h=o.get("dPercentText"),d=t.y+r/1.5+16;!h||h.destroyed?(h=a.get("group").addShape("text",{attrs:{text:"".concat(l,"%"),x:t.x,y:d,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),o.set("dPercentText",h)):h.attr({text:"".concat(l,"%"),x:t.x,y:d})}o.set("delegate",s)},n.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},n.prototype.destroy=function(){this.clear()},n}(Xr),dU=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&Rp(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var fU=function(e){function n(t){return e.call(this,t)||this}return dU(n,e),n.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},n.prototype.init=function(){var t=this,r=this.get("graph"),i=this.get("getContent")(r),o=i;he(i)&&(o=xn(i));var a=this.get("className");o.setAttribute("class",a||"g6-component-toolbar");var s=this.get("container");s||(s=this.get("graph").get("container")),he(s)&&(s=document.getElementById(s)),s.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(l){var h=function(f){if(!f)return[];if(f.composedPath)return f.composedPath();for(var p=[],g=f.target;g;){if(p.push(g),g.tagName==="HTML")return p.push(document,window),p;g=g.parentElement}return p}(l).filter(function(f){return f.nodeName==="LI"});if(h.length!==0){var d=h[0].getAttribute("code");d&&(u?u(d,r):t.handleDefaultOperator(d))}});var c=this.get("position");c&&Ht(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},n.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),o=document.querySelector('.g6-component-toolbar li[code="redo"]'),a=document.querySelector('.g6-component-toolbar li[code="redo"] svg');r&&i&&o&&a&&(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),o.setAttribute("style","cursor: not-allowed"),a.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,c=s.redoStack,l=u.length,h=c.length;l===0?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style")),h===0?(o.setAttribute("style","cursor: not-allowed"),a.setAttribute("style","opacity: 0.4")):(o.removeAttribute("style"),a.removeAttribute("style"))}))},n.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(r&&r.length!==0){var i=r.pop();if(i){var o=i.action;t.pushStack(o,_t(i.data),"redo");var a=i.data.before;if(o==="add"&&(a=i.data.after),!a)return;switch(o){case"visible":Object.keys(a).forEach(function(h){var d=a[h];d&&d.forEach(function(f){var p=t.findById(f.id);f.visible?t.showItem(p,!1):t.hideItem(p,!1)})});break;case"render":case"update":Object.keys(a).forEach(function(h){var d=a[h];d&&d.forEach(function(f){var p=t.findById(f.id);delete f.id,t.updateItem(p,f,!1),p.getType()==="combo"&&t.updateCombo(p)})});break;case"changedata":t.changeData(a,!1);break;case"delete":Object.keys(a).forEach(function(h){var d=a[h];d&&d.forEach(function(f){var p=f.itemType;delete f.itemType,t.addItem(p,f,!1)})});break;case"add":Object.keys(a).forEach(function(h){var d=a[h];d&&d.forEach(function(f){t.removeItem(f.id,!1)})});break;case"updateComboTree":Object.keys(a).forEach(function(h){var d=a[h];d&&d.forEach(function(f){t.updateComboTree(f.id,f.parentId,!1)})});break;case"createCombo":var s=i.data.after.combos,u=s[s.length-1];Object.keys(a).forEach(function(h){var d=a[h];d&&d.forEach(function(f){t.updateComboTree(f.id,f.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var c=a.combos[a.combos.length-1],l=a.nodes.concat(a.combos).map(function(h){return h.id}).filter(function(h){return h!==c.id});t.createCombo(c,l,!1);break;case"layout":t.updateLayout(a,void 0,void 0,!1)}}}},n.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(r&&r.length!==0){var i=r.pop();if(i){var o=i.action,a=i.data.after;if(t.pushStack(o,_t(i.data)),o==="delete"&&(a=i.data.before),!a)return;switch(o){case"visible":Object.keys(a).forEach(function(l){var h=a[l];h&&h.forEach(function(d){var f=t.findById(d.id);d.visible?t.showItem(f,!1):t.hideItem(f,!1)})});break;case"render":case"update":Object.keys(a).forEach(function(l){var h=a[l];h&&h.forEach(function(d){var f=t.findById(d.id);delete d.id,t.updateItem(f,d,!1),f.getType()==="combo"&&t.updateCombo(f)})});break;case"changedata":t.changeData(a,!1);break;case"delete":a.edges&&a.edges.forEach(function(l){t.removeItem(l.id,!1)}),a.nodes&&a.nodes.forEach(function(l){t.removeItem(l.id,!1)}),a.combos&&a.combos.forEach(function(l){t.removeItem(l.id,!1)});break;case"add":Object.keys(a).forEach(function(l){var h=a[l];h&&h.forEach(function(d){var f=d.itemType;delete d.itemType,t.addItem(f,d,!1)})});break;case"updateComboTree":Object.keys(a).forEach(function(l){var h=a[l];h&&h.forEach(function(d){t.updateComboTree(d.id,d.parentId,!1)})});break;case"createCombo":var s=a.combos[a.combos.length-1];t.createCombo(s,s.children.map(function(l){return l.id}),!1);break;case"uncombo":var u=i.data.before.combos,c=u[u.length-1];t.uncombo(c.id,!1);break;case"layout":t.updateLayout(a,void 0,void 0,!1)}}}},n.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),i=1/(1-.05*this.get("zoomSensitivity"));i*r>(this.get("maxZoom")||t.get("maxZoom"))||t.zoomTo(r*i)},n.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),i=1-.05*this.get("zoomSensitivity");i*r<(this.get("minZoom")||t.get("minZoom"))||t.zoomTo(r*i)},n.prototype.realZoom=function(){this.get("graph").zoomTo(1)},n.prototype.autoZoom=function(){this.get("graph").fitView([20,20])},n.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom()}},n.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),he(r)&&(r=document.getElementById(r)),r.removeChild(t)}var i=this.get("handleClick");i&&t.removeEventListener("click",i)},n}(Xr),pU=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&Rp(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var gU=function(e){function n(t){return e.call(this,t)||this}return pU(n,e),n.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(t.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(t.item.getID(),`</span>
        `)},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},n.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},n.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",i=xn("<div class='".concat(r,"'></div>")),o=t.get("container");o||(o=t.get("graph").get("container")),he(o)&&(o=document.getElementById(o)),Ht(i,{position:"absolute",visibility:"hidden",display:"none"}),o.appendChild(i),t.get("trigger")!=="click"&&(i.addEventListener("mouseenter",function(a){Ht(i,{visibility:"visible",display:"unset"})}),i.addEventListener("mouseleave",function(a){t.hideTooltip()})),t.set("tooltip",i)},n.prototype.onClick=function(t){var r=this.get("itemTypes");if(!t.item||!t.item.getType||r.indexOf(t.item.getType())!==-1){var i=t.item,o=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),o.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(t),o.emit("tooltipchange",{item:t.item,action:"show"}))}},n.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!t.item||!t.item.getType||r.indexOf(t.item.getType())!==-1){var i=t.item,o=this.get("graph");this.currentTarget=i,this.showTooltip(t),o.emit("tooltipchange",{item:t.item,action:"show"})}},n.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},n.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},n.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},n.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!t.item.getType||r.indexOf(t.item.getType())!==-1){var i=this.get("tooltip"),o=this.get("getContent")(t);he(o)?i.innerHTML=o:(this.clearContainer(),i.appendChild(o)),this.updatePosition(t)}}},n.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Ht(t,{visibility:"hidden",display:"none"})},n.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),i=this.get("tooltip");if(r(t)){var o=this.get("graph"),a=o.get("width"),s=o.get("height"),u=this.get("offsetX")||0,c=this.get("offsetY")||0,l=o.getPointByClient(t.clientX,t.clientY),h=this.get("fixToNode"),d=t.item;if(d.getType&&d.getType()==="node"&&h&&at(h)&&h.length>=2){var f=d.getBBox();l={x:f.minX+f.width*h[0],y:f.minY+f.height*h[1]}}var p=o.getCanvasByPoint(l.x,l.y),g=p.x,v=p.y,m=o.getContainer(),y={x:g+m.offsetLeft+u,y:v+m.offsetTop+c};Ht(i,{visibility:"visible",display:"unset"});var b=i.getBoundingClientRect();g+b.width+u>a&&(y.x-=b.width+u),v+b.height+c>s&&(y.y-=b.height+c,y.y<0&&(y.y=0)),Ht(i,{left:"".concat(y.x,"px"),top:"".concat(y.y,"px")})}else Ht(i,{visibility:"hidden",display:"none"})},n.prototype.hide=function(){this.onMouseLeave()},n.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),he(r)&&(r=document.getElementById(r)),r.removeChild(t)}},n}(Xr),IO="timebarstartplay",TO="timebarendplay",vo="valuechange",_s="timebarConfigChanged",Na="playPauseBtn",Ql="nextStepBtn",Jl="preStepBtn",vU=function(){function e(n){var t=n.x,r=t===void 0?0:t,i=n.y,o=i===void 0?0:i,a=n.container,s=n.text,u=n.padding,c=u===void 0?[4,4,4,4]:u,l=n.className,h=l===void 0?"g6-component-timebar-tooltip":l,d=n.backgroundColor,f=d===void 0?"#000":d,p=n.textColor,g=p===void 0?"#fff":p,v=n.opacity,m=v===void 0?.8:v,y=n.fontSize,b=y===void 0?12:y;this.container=a,this.className=h,this.backgroundColor=f,this.textColor=g,this.x=r,this.y=o,this.text=s,this.padding=c,this.opacity=m,this.fontSize=b,this.render()}return e.prototype.render=function(){var n=this,t=n.className;n.x,n.y;var r=n.backgroundColor,i=n.textColor,o=n.text,a=n.padding,s=n.opacity,u=n.fontSize,c=n.container,l=xn("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(s,'"></div>'));he(c)&&(c=document.getElementById(c)),c.appendChild(l),n.parentHeight=c.offsetHeight,n.parentWidth=c.offsetWidth,Ht(l,{visibility:"hidden",top:0,left:0});var h=xn(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(r,"; font-size: ").concat(u,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(i,"; padding: ").concat(a[0],"px ").concat(a[1],"px ").concat(a[2],"px ").concat(a[3],"px'></div>"));h.innerHTML=o,l.appendChild(h),n.backgroundDOM=h;var d=xn("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(r,"'></div>"));l.appendChild(d),n.arrowDOM=d,n.container=l},e.prototype.show=function(n){var t=this,r=n.text,i=n.x;n.y,n.clientX,n.clientY,t.backgroundDOM.innerHTML=r;var o=t.backgroundDOM.offsetWidth,a=t.backgroundDOM.offsetHeight,s=t.arrowDOM.offsetWidth,u=t.arrowDOM.offsetHeight;Ht(t.container,{top:"".concat(-a-u,"px"),left:"".concat(i,"px"),visibility:"visible"}),Ht(t.backgroundDOM,{marginLeft:"".concat(-o/2,"px")}),Ht(t.arrowDOM,{marginLeft:"".concat(-s/2,"px"),top:"".concat(a,"px")});var c=i-o/2,l=i+o/2;c<0?Ht(t.backgroundDOM,{marginLeft:"".concat(-o/2-c,"px")}):l>t.parentWidth&&Ht(t.backgroundDOM,{marginLeft:"".concat(-o/2-l+t.parentWidth+12,"px")})},e.prototype.hide=function(){Ht(this.container,{top:0,left:0,visibility:"hidden"})},e}(),X1=function(){return X1=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},X1.apply(this,arguments)},mU=function(){function e(n){this.config=Zt({},n),this.init()}return e.prototype.update=function(n){this.config=Zt({},this.config,n),this.updateElement(),this.renderMarker()},e.prototype.init=function(){this.initElement(),this.renderMarker()},e.prototype.initElement=function(){var n=this.config,t=n.group,r=n.style,i=r.scale,o=i===void 0?1:i,a=r.offsetX,s=a===void 0?0:a,u=r.offsetY,c=u===void 0?0:u,l=this.config.x+s,h=this.config.y+c,d=t.addGroup({name:Na});this.startMarkerGroup=d.addGroup({name:Na}),this.circle=t.addShape("circle",{attrs:X1({x:l,y:h,r:this.config.r*o},r),name:Na}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(l,h,o),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=d.addGroup({name:Na});var f=.25*this.config.r*o,p=.5*this.config.r*Math.sqrt(3)*o;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:l-.375*this.config.r*o,y:h-p/2,width:f,height:p,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:l+1/8*this.config.r*o,y:h-p/2,width:f,height:p,fill:r.stroke||"#aaa",lineWidth:0}})},e.prototype.updateElement=function(){var n=this.config.style,t=n.scale,r=t===void 0?1:t,i=n.offsetX,o=i===void 0?0:i,a=n.offsetY,s=a===void 0?0:a,u=this.config.x+o,c=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",c),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,c,r));var l=.25*this.config.r*r,h=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-.375*this.config.r*r),this.pauseLeftMarker.attr("y",c-h/2),this.pauseLeftMarker.attr("width",l),this.pauseLeftMarker.attr("height",h),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",c-h/2),this.pauseRightMarker.attr("width",l),this.pauseRightMarker.attr("height",h)},e.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},e.prototype.getStartMarkerPath=function(n,t,r){var i=.5*this.config.r*Math.sqrt(3)*r;return[["M",n-i/Math.sqrt(3)/2,t-i/2],["L",n+i/Math.sqrt(3),t],["L",n-i/Math.sqrt(3)/2,t+i/2]]},e}(),Fn=function(){return Fn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Fn.apply(this,arguments)},eh=br,yU={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},bU={fill:"#fff"},xU={fill:"green"},OO={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},NO={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},wU={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:OO,timeTypeControllerStyle:NO},Pa=50,th="single",nh="range",PO=function(){function e(n){this.controllerCfg=Zt({},wU,n),this.group=n.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||nh,this.fontFamily=n.fontFamily||"Arial, sans-serif",this.init()}return e.prototype.init=function(){this.renderPlayButton()},e.prototype.getNextMarkerPath=function(n,t,r){return[["M",n,t-r],["L",n+r,t],["L",n,t+r],["Z",n,t-r],["M",n,t],["L",n-r,t-r],["L",n-r,t+r],["Z"]]},e.prototype.getPreMarkerPath=function(n,t,r){return[["M",n,t-r],["L",n-r,t],["L",n,t+r],["L",n,t-r],["M",n,t],["L",n+r,t-r],["L",n+r,t+r],["Z"]]},e.prototype.renderPlayButton=function(){var n=this.controllerCfg,t=n.width,r=n.height,i=n.x,o=n.y,a=n.hideTimeTypeController,s=n.fill,u=s===void 0?"#aaa":s,c=n.stroke,l=c===void 0?"green":c,h=n.containerStyle,d=h===void 0?{}:h,f=Fn(Fn({},yU),n.playBtnStyle||{}),p=Fn(Fn({},bU),n.preBtnStyle||{}),g=Fn(Fn({},xU),n.nextBtnStyle||{}),v=r/2-5,m=o+10,y=this.controllerGroup.addShape("rect",{attrs:Fn({x:i,y:m,width:t,height:r,stroke:l,fill:u},d),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:m,r:v}):this.playButton=new mU({group:this.controllerGroup,x:t/2,y:m+v+5,r:v,isPlay:this.isPlay,style:f});var b=p.offsetX||0,x=p.offsetY||0,w=(p.scale||1)*v;this.controllerGroup.addShape("path",{attrs:Fn({path:this.getPreMarkerPath(t/2-5*v+b,m+v+5+x,.5*w)},p),name:Jl});var E=g.offsetX||0,S=g.offsetY||0,M=(g.scale||1)*v;this.controllerGroup.addShape("path",{attrs:Fn({path:this.getNextMarkerPath(t/2+5*v+E,m+v+5+S,.5*M)},g),name:Ql}),y.toBack(),this.renderSpeedBtn(),a||this.renderToggleTime(),this.bindEvent();var k=this.controllerCfg.scale,_=k===void 0?1:k,C=this.controllerGroup.getCanvasBBox(),T=(C.maxX+C.minX)/2,A=(C.maxY+C.minY)/2,D=eh([1,0,0,0,1,0,0,0,1],[["t",-T,-A],["s",_,_],["t",T,A]]);this.controllerGroup.setMatrix(D)},e.prototype.renderSpeedBtn=function(){var n=this.controllerCfg,t=n.y,r=n.width,i=n.hideTimeTypeController,o=Fn(Fn({},OO),this.controllerCfg.speedControllerStyle||{}),a=o.scroller,s=a===void 0?{}:a,u=o.text,c=u===void 0?{}:u,l=o.pointer,h=l===void 0?{}:l,d=o.scale,f=d===void 0?1:d,p=o.offsetX,g=p===void 0?0:p,v=o.offsetY,m=v===void 0?0:v,y=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=y;var b=5;this.speedAxisY=[19,22,26,32,39];for(var x=0;x<5;x++){var w=t+this.speedAxisY[x],E=r-(i?Pa:110);y.addShape("line",{attrs:Fn({x1:E,x2:E+15,y1:w,y2:w},s),speed:b,name:"speed-rect"}),this.speedAxisY[x]=w,b-=1}this.speedText=y.addShape("text",{attrs:Fn({x:r-(i?Pa:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},c),name:"speed-text"}),this.speedPoint=y.addShape("path",{attrs:Fn({path:this.getPointerPath(r-(i?Pa:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},h),name:"speed-pointer"});var S=this.speedGroup.getCanvasBBox(),M=(S.maxX+S.minX)/2,k=(S.maxY+S.minY)/2,_=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];_=eh(_,[["t",-M,-k],["s",f,f],["t",M+g*f,k+m*f]]),this.speedGroup.setMatrix(_)},e.prototype.getPointerPath=function(n,t){return[["M",n,t],["L",n-10,t-4],["L",n-10,t+4],["Z"]]},e.prototype.renderToggleTime=function(){var n,t,r=this.controllerCfg,i=r.width,o=r.defaultTimeType,a=Fn(Fn({},NO),this.controllerCfg.timeTypeControllerStyle||{}),s=a.scale,u=s===void 0?1:s,c=a.offsetX,l=c===void 0?0:c,h=a.offsetY,d=h===void 0?0:h,f=a.box,p=f===void 0?{}:f,g=a.check,v=g===void 0?{}:g,m=a.text,y=m===void 0?{}:m;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var b=o===th;this.toggleGroup.addShape("rect",{attrs:Fn({x:i-Pa,y:this.speedAxisY[0]+3.5},p),isChecked:b,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Fn({path:[["M",i-Pa+3,this.speedAxisY[1]+6],["L",i-Pa+7,this.speedAxisY[1]+10],["L",i-Pa+12,this.speedAxisY[1]+4]]},v),capture:!1,name:"check-icon"}),b||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Fn({text:b?((n=this.controllerCfg)===null||n===void 0?void 0:n.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:i-Pa+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},y),name:"checked-text"});var x=this.toggleGroup.getCanvasBBox(),w=(x.maxX+x.minX)/2,E=(x.maxY+x.minY)/2,S=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];S=eh(S,[["t",-w,-E],["s",u,u],["t",w+l*u,E+d*u]]),this.toggleGroup.setMatrix(S)},e.prototype.bindEvent=function(){var n=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),i=n.speedPoint.attr("matrix"),o=n.speedAxisY.indexOf(i[7]||0),a=n.speedAxisY.indexOf(r),s=n.speedAxisY[a]-n.speedAxisY[o];i=eh(i,[["t",0,s]]),n.speedPoint.setMatrix(i),n.currentSpeed=n.speedAxisY.length-a,n.speedText.attr("text","".concat(n.currentSpeed,".0X")),n.group.emit(_s,{speed:n.currentSpeed,type:n.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=n.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=r[7],o=n.speedAxisY.indexOf(i);if(o===-1){var a=1/0;n.speedAxisY.forEach(function(u,c){var l=Math.abs(u-i);a>l&&(a=l,o=c)})}o=t.originalEvent.deltaY>0?Math.max(0,o-1):Math.min(n.speedAxisY.length-1,o+1);var s=n.speedAxisY[o]-i;r=eh(r,[["t",0,s]]),n.speedPoint.setMatrix(r),n.currentSpeed=n.speedAxisY.length-o,n.speedText.attr("text","".concat(n.currentSpeed,".0X")),n.group.emit(_s,{speed:n.currentSpeed,type:n.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,i,o=t.target.get("isChecked");o?(n.checkedIcon.hide(),n.checkedText.attr("text",((i=n.controllerCfg)===null||i===void 0?void 0:i.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),n.currentType=nh):(n.checkedIcon.show(),n.checkedText.attr("text",((r=n.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),n.currentType=th),t.target.set("isChecked",!o),n.group.emit(_s,{type:n.currentType,speed:n.currentSpeed})})},e.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},e}(),rh=function(){return rh=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},rh.apply(this,arguments)},EU=br,SU={fill:"#5B8FF9"},MU={fill:"#e6e8e9"},_U=function(){function e(n){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=n.graph,r=n.canvas,i=n.group,o=n.width,a=n.height,s=n.padding,u=n.data,c=n.start,l=n.end,h=n.x,d=h===void 0?0:h,f=n.y,p=f===void 0?0:f,g=n.tickLabelFormatter,v=n.selectedTickStyle,m=v===void 0?SU:v,y=n.unselectedTickStyle,b=y===void 0?MU:y,x=n.tooltipBackgroundColor,w=n.tooltipFomatter,E=n.tickLabelStyle,S=n.controllerCfg,M=S===void 0?{speed:1}:S;this.graph=t,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=r,this.width=o,this.height=a,this.padding=s,this.data=u,this.start=c,this.end=l,this.tickLabelFormatter=g,this.tickLabelStyle=E||{},this.selectedTickStyle=m,this.unselectedTickStyle=b,this.controllerCfg=M,this.currentSpeed=M.speed||1,this.x=d,this.y=p,this.tooltipBackgroundColor=x,this.tooltipFomatter=w,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return e.prototype.renderSlices=function(){var n=this,t=this,r=t.width,i=t.height,o=t.padding,a=t.data,s=t.start,u=t.end,c=t.tickLabelFormatter,l=t.selectedTickStyle,h=t.unselectedTickStyle,d=t.tickLabelStyle,f=r-2*o,p=i-(3*o+4+10)-2*o,g=a.length,v=(f-2*(g-1))/g;this.tickWidth=v;var m=this.sliceGroup,y=[],b=[],x=Math.round(g*s),w=Math.round(g*u);this.startTickRectId=x,this.endTickRectId=w;var E=d.rotate;delete d.rotate,a.forEach(function(M,k){var _=k>=x&&k<=w?l:h,C=m.addShape("rect",{attrs:rh({x:o+k*(v+2),y:o,width:v,height:p},_),draggable:!0,name:"tick-rect-".concat(k)}),T=m.addShape("rect",{attrs:{x:o+k*v+2*(2*k-1)/2,y:o,width:k===0||k===g-1?v+1:v+2,height:p,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(k)});T.toFront();var A,D=C.getBBox(),R=(D.minX+D.maxX)/2;if(y.push({rect:C,pickRect:T,value:M.date,x:R,y:D.minY}),c?(A=c(M),!he(A)&&A&&(A=M.date)):k%Math.round(g/10)==0&&(A=M.date),A){b.push(A);var B=D.maxY+2*o;m.addShape("line",{attrs:{stroke:"#BFBFBF",x1:R,y1:B,x2:R,y2:B+4},name:"tick-line"});var F=B+4+o,N=m.addShape("text",{attrs:rh({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:R,y:F,textAlign:"center",text:A,textBaseline:"top",fontSize:10,fontFamily:n.fontFamily||"Arial, sans-serif"},d),capture:!1,name:"tick-label"}),L=N.getBBox();if(L.maxX>r?N.attr("textAlign","right"):L.minX<0&&N.attr("textAlign","left"),Ue(E)&&b.length!==10){var z=EU([1,0,0,0,1,0,0,0,1],[["t",-R,-F],["r",E],["t",R-5,F+2]]);N.attr({textAlign:"left",matrix:z})}b.length===1?N.attr({textAlign:"left"}):b.length===10&&N.attr({textAlign:"right"})}}),this.tickRects=y;var S=this.group;this.currentSpeed=1,this.controllerBtnGroup=new PO(rh({group:S,x:this.x,y:this.y+i+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},e.prototype.initEvent=function(){var n=this,t=this.sliceGroup;t.on("click",function(l){var h=l.target;if(h.get("type")==="rect"&&h.get("name")){var d=parseInt(h.get("name").split("-")[2],10);if(!isNaN(d)){var f=n.tickRects,p=n.unselectedTickStyle;f.forEach(function(m){m.rect.attr(p)});var g=n.selectedTickStyle;f[d].rect.attr(g),n.startTickRectId=d,n.endTickRectId=d;var v=d/f.length;n.graph.emit(vo,{value:[v,v]})}}}),t.on("dragstart",function(l){var h=n.tickRects,d=n.unselectedTickStyle;h.forEach(function(m){m.rect.attr(d)});var f=l.target,p=parseInt(f.get("name").split("-")[2],10),g=n.selectedTickStyle;h[p].rect.attr(g),n.startTickRectId=p;var v=p/h.length;n.graph.emit(vo,{value:[v,v]}),n.dragging=!0}),t.on("dragover",function(l){if(n.dragging&&l.target.get("type")==="rect"){for(var h=parseInt(l.target.get("name").split("-")[2],10),d=n.startTickRectId,f=n.tickRects,p=n.selectedTickStyle,g=n.unselectedTickStyle,v=0;v<f.length;v++){var m=v>=d&&v<=h?p:g;f[v].rect.attr(m)}var y=f.length;n.endTickRectId=h;var b=d/y,x=h/y;n.graph.emit(vo,{value:[b,x]})}}),t.on("drop",function(l){if(n.dragging&&(n.dragging=!1,l.target.get("type")==="rect")){var h=n.startTickRectId,d=parseInt(l.target.get("name").split("-")[2],10);if(!(d<h)){var f=n.selectedTickStyle,p=n.tickRects;p[d].rect.attr(f),n.endTickRectId=d;var g=p.length,v=h/g,m=d/g;n.graph.emit(vo,{value:[v,m]})}}});var r=this,i=r.tooltipBackgroundColor,o=r.tooltipFomatter,a=r.canvas,s=new vU({container:a.get("container"),backgroundColor:i}),u=this.tickRects;u.forEach(function(l){var h=l.pickRect;h.on("mouseenter",function(d){var f=d.target;if(f.get("type")==="rect"){var p=parseInt(f.get("name").split("-")[2],10),g=a.getClientByPoint(u[p].x,u[p].y);s.show({x:u[p].x,y:u[p].y,clientX:g.x,clientY:g.y,text:o?o(u[p].value):u[p].value})}}),h.on("mouseleave",function(d){s.hide()})});var c=this.group;c.on("".concat(Na,":click"),function(){n.isPlay=!n.isPlay,n.changePlayStatus()}),c.on("".concat(Ql,":click"),function(){n.updateStartEnd(1)}),c.on("".concat(Jl,":click"),function(){n.updateStartEnd(-1)}),c.on(_s,function(l){l.type;var h=l.speed;n.currentSpeed=h})},e.prototype.changePlayStatus=function(n){n===void 0&&(n=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(IO,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),n&&this.graph.emit(TO,null))},e.prototype.startPlay=function(){var n=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=n.currentSpeed;n.frameCount%(60/t)==0&&(n.frameCount=0,n.updateStartEnd(1)),n.frameCount++,n.isPlay&&(n.playHandler=n.startPlay())}):void 0},e.prototype.updateStartEnd=function(n){var t=this,r=this.tickRects,i=r.length,o=this.unselectedTickStyle,a=this.selectedTickStyle,s=t.endTickRectId;if(n>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(o),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(o);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(a);var c=t.startTickRectId/i,l=t.endTickRectId/i;this.graph.emit(vo,{value:[c,l]})}},e.prototype.destory=function(){var n=this.sliceGroup;n.off("click"),n.off("dragstart"),n.off("dragover"),n.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,n.off("".concat(Na,":click")),n.off("".concat(Ql,":click")),n.off("".concat(Jl,":click")),n.off(_s),this.sliceGroup.destroy()},e}(),DO={};function mo(e,n){DO[e]=n}var U1=function(){function e(n){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=n,this.initCfg(),this.init()}return e.prototype.translate=function(n){return n},e.prototype.change=function(n){ut(this.__cfg__,n),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var n=this;return Za(this.ticks,function(t,r){return Tn(t)?t:{text:n.getText(t,r),tickValue:t,value:n.scale(t)}})},e.prototype.getText=function(n,t){var r=this.formatter,i=r?r(n,t):n;return ht(i)||!gn(i.toString)?"":i.toString()},e.prototype.getConfig=function(n){return this.__cfg__[n]},e.prototype.init=function(){ut(this,this.__cfg__),this.setDomain(),cw(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var n=this.tickMethod,t=[];if(he(n)){var r=function(i){return DO[i]}(n);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else gn(n)&&(t=n(this));return t},e.prototype.rangeMin=function(){return this.range[0]},e.prototype.rangeMax=function(){return this.range[1]},e.prototype.calcPercent=function(n,t,r){return Ue(n)?(n-t)/(r-t):NaN},e.prototype.calcValue=function(n,t,r){return t+n*(r-t)},e}(),ih=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return At(n,e),n.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},n.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=Ue(t)?t:NaN),r},n.prototype.scale=function(t){var r=this.translate(t),i=this.calcPercent(r,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},n.prototype.invert=function(t){var r=this.max-this.min,i=this.calcPercent(t,this.rangeMin(),this.rangeMax()),o=Math.round(r*i)+this.min;return o<this.min||o>this.max?NaN:this.values[o]},n.prototype.getText=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=t;return Ue(t)&&!this.values.includes(t)&&(o=this.values[o]),e.prototype.getText.apply(this,jh([o],r))},n.prototype.initCfg=function(){this.tickMethod="cat"},n.prototype.setDomain=function(){if(ht(this.getConfig("min"))&&(this.min=0),ht(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},n}(U1),LO=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Da="\\d\\d?",La="\\d\\d",oh="[^\\s]+",BO=/\[([^]*?)\]/gm;function RO(e,n){for(var t=[],r=0,i=e.length;r<i;r++)t.push(e[r].substr(0,n));return t}var jO=function(e){return function(n,t){var r=t[e].map(function(o){return o.toLowerCase()}),i=r.indexOf(n.toLowerCase());return i>-1?i:null}};function Ba(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var r=0,i=n;r<i.length;r++){var o=i[r];for(var a in o)e[a]=o[a]}return e}var zO=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],FO=["January","February","March","April","May","June","July","August","September","October","November","December"],kU=RO(FO,3),W1={dayNamesShort:RO(zO,3),dayNames:zO,monthNamesShort:kU,monthNames:FO,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},jp=Ba({},W1),GO=function(e){return jp=Ba(jp,e)},YO=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Ur=function(e,n){for(n===void 0&&(n=2),e=String(e);e.length<n;)e="0"+e;return e},CU={D:function(e){return String(e.getDate())},DD:function(e){return Ur(e.getDate())},Do:function(e,n){return n.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Ur(e.getDay())},ddd:function(e,n){return n.dayNamesShort[e.getDay()]},dddd:function(e,n){return n.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Ur(e.getMonth()+1)},MMM:function(e,n){return n.monthNamesShort[e.getMonth()]},MMMM:function(e,n){return n.monthNames[e.getMonth()]},YY:function(e){return Ur(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Ur(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Ur(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Ur(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Ur(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Ur(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Ur(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Ur(e.getMilliseconds(),3)},a:function(e,n){return e.getHours()<12?n.amPm[0]:n.amPm[1]},A:function(e,n){return e.getHours()<12?n.amPm[0].toUpperCase():n.amPm[1].toUpperCase()},ZZ:function(e){var n=e.getTimezoneOffset();return(n>0?"-":"+")+Ur(100*Math.floor(Math.abs(n)/60)+Math.abs(n)%60,4)},Z:function(e){var n=e.getTimezoneOffset();return(n>0?"-":"+")+Ur(Math.floor(Math.abs(n)/60),2)+":"+Ur(Math.abs(n)%60,2)}},XO=function(e){return+e-1},UO=[null,Da],WO=[null,oh],VO=["isPm",oh,function(e,n){var t=e.toLowerCase();return t===n.amPm[0]?0:t===n.amPm[1]?1:null}],HO=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var n=(e+"").match(/([+-]|\d\d)/gi);if(n){var t=60*+n[1]+parseInt(n[2],10);return n[0]==="+"?t:-t}return 0}],AU={D:["day",Da],DD:["day",La],Do:["day",Da+oh,function(e){return parseInt(e,10)}],M:["month",Da,XO],MM:["month",La,XO],YY:["year",La,function(e){var n=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+e>68?n-1:n)+e)}],h:["hour",Da,void 0,"isPm"],hh:["hour",La,void 0,"isPm"],H:["hour",Da],HH:["hour",La],m:["minute",Da],mm:["minute",La],s:["second",Da],ss:["second",La],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond",La,function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:UO,dd:UO,ddd:WO,dddd:WO,MMM:["month",oh,jO("monthNamesShort")],MMMM:["month",oh,jO("monthNames")],a:VO,A:VO,ZZ:HO,Z:HO},zp={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},qO=function(e){return Ba(zp,e)},ZO=function(e,n,t){if(n===void 0&&(n=zp.default),t===void 0&&(t={}),typeof e=="number"&&(e=new Date(e)),Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var r=[];n=(n=zp[n]||n).replace(BO,function(o,a){return r.push(a),"@@@"});var i=Ba(Ba({},jp),t);return(n=n.replace(LO,function(o){return CU[o](e,i)})).replace(/@@@/g,function(){return r.shift()})};function KO(e,n,t){if(t===void 0&&(t={}),typeof n!="string")throw new Error("Invalid format in fecha parse");if(n=zp[n]||n,e.length>1e3)return null;var r={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],a=n.replace(BO,function(b,x){return o.push(YO(x)),"@@@"}),s={},u={};a=YO(a).replace(LO,function(b){var x=AU[b],w=x[0],E=x[1],S=x[3];if(s[w])throw new Error("Invalid format. "+w+" specified twice in format");return s[w]=!0,S&&(u[S]=!0),i.push(x),"("+E+")"}),Object.keys(u).forEach(function(b){if(!s[b])throw new Error("Invalid format. "+b+" is required in specified format")}),a=a.replace(/@@@/g,function(){return o.shift()});var c=e.match(new RegExp(a,"i"));if(!c)return null;for(var l,h=Ba(Ba({},jp),t),d=1;d<c.length;d++){var f=i[d-1],p=f[0],g=f[2],v=g?g(c[d],h):+c[d];if(v==null)return null;r[p]=v}if(r.isPm===1&&r.hour!=null&&+r.hour!=12?r.hour=+r.hour+12:r.isPm===0&&+r.hour==12&&(r.hour=0),r.timezoneOffset==null){l=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond);for(var m=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(d=0,m.length);d<y;d++)if(s[m[d][0]]&&r[m[d][0]]!==l[m[d][1]]())return null}else if(l=new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond)),r.month>11||r.month<0||r.day>31||r.day<1||r.hour>23||r.hour<0||r.minute>59||r.minute<0||r.second>59||r.second<0)return null;return l}var $O={format:ZO,parse:KO,defaultI18n:W1,setGlobalDateI18n:GO,setGlobalDateMasks:qO};const IU=Object.freeze(Object.defineProperty({__proto__:null,assign:Ba,default:$O,defaultI18n:W1,format:ZO,parse:KO,setGlobalDateI18n:GO,setGlobalDateMasks:qO},Symbol.toStringTag,{value:"Module"}));var QO="format";function JO(e,n){return(IU[QO]||$O[QO])(e,n)}function Fp(e){return he(e)&&(e=e.indexOf("T")>0?new Date(e).getTime():new Date(e.replace(/-/gi,"/")).getTime()),n0(e)&&(e=e.getTime()),e}var Ra=1e3,Gp=6e4,ks=36e5,$o=24*ks,ah=31*$o,eN=365*$o,sh=[["HH:mm:ss",Ra],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",Gp],["HH:mm",6e5],["HH:mm",18e5],["HH",ks],["HH",6*ks],["HH",12*ks],["YYYY-MM-DD",$o],["YYYY-MM-DD",4*$o],["YYYY-WW",7*$o],["YYYY-MM",ah],["YYYY-MM",4*ah],["YYYY-MM",6*ah],["YYYY",380*$o]];function TU(e,n,t){var r,i=(r=function(a){return a[1]},function(a,s,u,c){for(var l=ht(u)?0:u,h=ht(c)?a.length:c;l<h;){var d=l+h>>>1;r(a[d])>s?h=d:l=d+1}return l})(sh,(n-e)/t)-1,o=sh[i];return i<0?o=sh[0]:i>=sh.length&&(o=ai(sh)),o}var OU=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="timeCat",t}return At(n,e),n.prototype.translate=function(t){t=Fp(t);var r=this.values.indexOf(t);return r===-1&&(r=Ue(t)&&t<this.values.length?t:NaN),r},n.prototype.getText=function(t,r){var i=this.translate(t);if(i>-1){var o=this.values[i],a=this.formatter;return o=a?a(o,r):JO(o,this.mask)}return t},n.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},n.prototype.setDomain=function(){var t=this.values;re(t,function(r,i){t[i]=Fp(r)}),t.sort(function(r,i){return r-i}),e.prototype.setDomain.call(this)},n}(ih),Yp=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return At(n,e),n.prototype.scale=function(t){if(ht(t))return NaN;var r=this.rangeMin(),i=this.rangeMax();return this.max===this.min?r:r+this.getScalePercent(t)*(i-r)},n.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,r=Vi(t),i=ai(t);r<this.min&&(this.min=r),i>this.max&&(this.max=i),ht(this.minLimit)||(this.min=r),ht(this.maxLimit)||(this.max=i)},n.prototype.setDomain=function(){var t=Zx(this.values),r=t.min,i=t.max;ht(this.min)&&(this.min=r),ht(this.max)&&(this.max=i),this.min>this.max&&(this.min=r,this.max=i)},n.prototype.calculateTicks=function(){var t=this,r=e.prototype.calculateTicks.call(this);return this.nice||(r=Fh(r,function(i){return i>=t.min&&i<=t.max})),r},n.prototype.getScalePercent=function(t){var r=this.max,i=this.min;return(t-i)/(r-i)},n.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},n}(U1),uh=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return At(n,e),n.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},n.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},n}(Yp);function ja(e,n){var t=Math.E;return n>=0?Math.pow(t,Math.log(n)/e):-1*Math.pow(t,Math.log(-n)/e)}function mi(e,n){return e===1?1:Math.log(n)/Math.log(e)}function tN(e,n,t){ht(t)&&(t=Math.max.apply(null,e));var r=t;return re(e,function(i){i>0&&i<r&&(r=i)}),r===t&&(r=t/n),r>1&&(r=1),r}var NU=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="log",t}return At(n,e),n.prototype.invert=function(t){var r,i=this.base,o=mi(i,this.max),a=this.rangeMin(),s=this.rangeMax()-a,u=this.positiveMin;if(u){if(t===0)return 0;var c=1/(o-(r=mi(i,u/i)))*s;if(t<c)return t/c*u}else r=mi(i,this.min);var l=(t-a)/s*(o-r)+r;return Math.pow(i,l)},n.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},n.prototype.setDomain=function(){e.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=tN(this.values,this.base,this.max))},n.prototype.getScalePercent=function(t){var r=this.max,i=this.min;if(r===i||t<=0)return 0;var o=this.base,a=this.positiveMin;return a&&(i=1*a/o),t<a?t/a/(mi(o,r)-mi(o,i)):(mi(o,t)-mi(o,i))/(mi(o,r)-mi(o,i))},n}(Yp),PU=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="pow",t}return At(n,e),n.prototype.invert=function(t){var r=this.getInvertPercent(t),i=this.exponent,o=ja(i,this.max),a=ja(i,this.min),s=r*(o-a)+a,u=s>=0?1:-1;return Math.pow(s,i)*u},n.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},n.prototype.getScalePercent=function(t){var r=this.max,i=this.min;if(r===i)return 0;var o=this.exponent;return(ja(o,t)-ja(o,i))/(ja(o,r)-ja(o,i))},n}(Yp),DU=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="time",t}return At(n,e),n.prototype.getText=function(t,r){var i=this.translate(t),o=this.formatter;return o?o(i,r):JO(i,this.mask)},n.prototype.scale=function(t){var r=t;return(he(r)||n0(r))&&(r=this.translate(r)),e.prototype.scale.call(this,r)},n.prototype.translate=function(t){return Fp(t)},n.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},n.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),i=this.getConfig("max");if(ht(r)&&Ue(r)||(this.min=this.translate(this.min)),ht(i)&&Ue(i)||(this.max=this.translate(this.max)),t&&t.length){var o=[],a=1/0,s=a,u=0;re(t,function(c){var l=Fp(c);if(isNaN(l))throw new TypeError("Invalid Time: "+c+" in time scale!");a>l?(s=a,a=l):s>l&&(s=l),u<l&&(u=l),o.push(l)}),t.length>1&&(this.minTickInterval=s-a),ht(r)&&(this.min=a),ht(i)&&(this.max=u)}},n}(uh),nN=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="quantize",t}return At(n,e),n.prototype.invert=function(t){var r=this.ticks,i=r.length,o=this.getInvertPercent(t),a=Math.floor(o*(i-1));if(a>=i-1)return ai(r);if(a<0)return Vi(r);var s=r[a],u=a/(i-1);return s+(o-u)/((a+1)/(i-1)-u)*(r[a+1]-s)},n.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},n.prototype.calculateTicks=function(){var t=e.prototype.calculateTicks.call(this);return this.nice||(ai(t)!==this.max&&t.push(this.max),Vi(t)!==this.min&&t.unshift(this.min)),t},n.prototype.getScalePercent=function(t){var r=this.ticks;if(t<Vi(r))return 0;if(t>ai(r))return 1;var i=0;return re(r,function(o,a){if(!(t>=o))return!1;i=a}),i/(r.length-1)},n}(Yp),LU=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="quantile",t}return At(n,e),n.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},n}(nN),rN={};function yo(e,n){if(function(t){return rN[t]}(e))throw new Error("type '"+e+"' existed.");rN[e]=n}var BU=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return At(n,e),n.prototype.calculateTicks=function(){return this.values},n.prototype.scale=function(t){return this.values[0]!==t&&Ue(t)?t:this.range[0]},n.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},n}(U1);function iN(e){var n=e.values,t=e.tickInterval,r=e.tickCount,i=e.showLast;if(Ue(t)){var o=Fh(n,function(p,g){return g%t==0}),a=ai(n);return i&&ai(o)!==a&&o.push(a),o}var s=n.length,u=e.min,c=e.max;if(ht(u)&&(u=0),ht(c)&&(c=n.length-1),!Ue(r)||r>=s)return n.slice(u,c+1);if(r<=0||c<=0)return[];for(var l=r===1?s:Math.floor(s/(r-1)),h=[],d=u,f=0;f<r&&!(d>=c);f++)d=Math.min(u+f*l,c),f===r-1&&i?h.push(n[c]):h.push(n[d]);return h}var oN=Math.sqrt(50),aN=Math.sqrt(10),sN=Math.sqrt(2),RU=function(){function e(){this._domain=[0,1]}return e.prototype.domain=function(n){return n?(this._domain=Array.from(n,Number),this):this._domain.slice()},e.prototype.nice=function(n){var t,r;n===void 0&&(n=5);var i,o=this._domain.slice(),a=0,s=this._domain.length-1,u=this._domain[a],c=this._domain[s];return c<u&&(u=(t=[c,u])[0],c=t[1],a=(r=[s,a])[0],s=r[1]),(i=Xp(u,c,n))>0?i=Xp(u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i,n):i<0&&(i=Xp(u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i,n)),i>0?(o[a]=Math.floor(u/i)*i,o[s]=Math.ceil(c/i)*i,this.domain(o)):i<0&&(o[a]=Math.ceil(u*i)/i,o[s]=Math.floor(c*i)/i,this.domain(o)),this},e.prototype.ticks=function(n){return n===void 0&&(n=5),function(t,r,i){var o,a,s,u,c=-1;if(i=+i,(t=+t)==(r=+r)&&i>0)return[t];if((o=r<t)&&(a=t,t=r,r=a),(u=Xp(t,r,i))===0||!isFinite(u))return[];if(u>0)for(t=Math.ceil(t/u),r=Math.floor(r/u),s=new Array(a=Math.ceil(r-t+1));++c<a;)s[c]=(t+c)*u;else for(t=Math.floor(t*u),r=Math.ceil(r*u),s=new Array(a=Math.ceil(t-r+1));++c<a;)s[c]=(t-c)/u;return o&&s.reverse(),s}(this._domain[0],this._domain[this._domain.length-1],n||5)},e}();function Xp(e,n,t){var r=(n-e)/Math.max(0,t),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=oN?10:o>=aN?5:o>=sN?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=oN?10:o>=aN?5:o>=sN?2:1)}function uN(e,n,t){return(t==="ceil"?Math.ceil(e/n):t==="floor"?Math.floor(e/n):Math.round(e/n))*n}function V1(e,n,t){var r=uN(e,t,"floor"),i=uN(n,t,"ceil");r=Yh(r,t),i=Yh(i,t);for(var o=[],a=Math.max((i-r)/(Math.pow(2,12)-1),t),s=r;s<=i;s+=a){var u=Yh(s,a);o.push(u)}return{min:r,max:i,ticks:o}}function H1(e,n,t){var r,i=e.minLimit,o=e.maxLimit,a=e.min,s=e.max,u=e.tickCount,c=u===void 0?5:u,l=ht(i)?ht(n)?a:n:i,h=ht(o)?ht(t)?s:t:o;if(l>h&&(h=(r=[l,h])[0],l=r[1]),c<=2)return[l,h];for(var d=(h-l)/(c-1),f=[],p=0;p<c;p++)f.push(l+d*p);return f}function Cs(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}var jU=[1,5,2,2.5,4,3],cN=100*Number.EPSILON;function zU(e,n,t,r,i,o){var a=Vh(n),s=i0(n,e),u=0,c=function(l,h){return(l%h+h)%h}(r,o);return(c<cN||o-c<cN)&&r<=0&&i>=0&&(u=1),1-s/(a-1)-t+u}function FU(e,n,t){var r=Vh(n);return 1-i0(n,e)/(r-1)-t+1}function GU(e,n,t,r,i,o){var a=(e-1)/(o-i),s=(n-1)/(Math.max(o,r)-Math.min(t,i));return 2-Math.max(a/s,s/a)}function YU(e,n){return e>=n?2-(e-1)/(n-1):1}function XU(e,n,t,r){var i=n-e;return 1-.5*(Math.pow(n-r,2)+Math.pow(e-t,2))/Math.pow(.1*i,2)}function UU(e,n,t){var r=n-e;if(t>r){var i=(t-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function WU(e,n,t,r,i,o){t===void 0&&(t=5),r===void 0&&(r=!0),i===void 0&&(i=jU),o===void 0&&(o=[.25,.2,.5,.05]);var a=t<0?0:Math.round(t);if(Number.isNaN(e)||Number.isNaN(n)||typeof e!="number"||typeof n!="number"||!a)return{min:0,max:0,ticks:[]};if(n-e<1e-15||a===1)return{min:e,max:n,ticks:[e]};if(n-e>1e148){var s=(n-e)/(w=t||5);return{min:e,max:n,ticks:Array(w).fill(null).map(function(L,z){return Cs(e+s*z)})}}for(var u={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<i.length;l+=1){var h=i[l],d=FU(h,i,c);if(o[0]*d+o[1]+o[2]+o[3]<u.score){c=1/0;break}for(var f=2;f<1/0;){var p=YU(f,a);if(o[0]*d+o[1]+o[2]*p+o[3]<u.score)break;for(var g=(n-e)/(f+1)/c/h,v=Math.ceil(Math.log10(g));v<1/0;){var m=c*h*Math.pow(10,v),y=UU(e,n,m*(f-1));if(o[0]*d+o[1]*y+o[2]*p+o[3]<u.score)break;var b=Math.floor(n/m)*c-(f-1)*c,x=Math.ceil(e/m)*c;if(b<=x)for(var w=x-b,E=0;E<=w;E+=1){var S=(b+E)*(m/c),M=S+m*(f-1),k=m,_=zU(h,i,c,S,M,k),C=XU(e,n,S,M),T=GU(f,a,e,n,S,M),A=o[0]*_+o[1]*C+o[2]*T+1*o[3];A>u.score&&(!r||S<=e&&M>=n)&&(u.lmin=S,u.lmax=M,u.lstep=k,u.score=A)}v+=1}f+=1}}c+=1}var D=Cs(u.lmax),R=Cs(u.lmin),B=Cs(u.lstep),F=Math.floor(function(L){return Math.round(1e12*L)/1e12}((D-R)/B))+1,N=new Array(F);for(N[0]=Cs(R),l=1;l<F;l++)N[l]=Cs(N[l-1]+B);return{min:Math.min(e,Vi(N)),max:Math.max(n,ai(N)),ticks:N}}function lN(e,n,t){if(t===void 0&&(t=5),e===n)return{max:n,min:e,ticks:[e]};var r=t<0?0:Math.round(t);if(r===0)return{max:n,min:e,ticks:[]};var i=(n-e)/r,o=Math.pow(10,Math.floor(Math.log10(i))),a=o;2*o-i<1.5*(i-a)&&5*o-i<2.75*(i-(a=2*o))&&10*o-i<1.5*(i-(a=5*o))&&(a=10*o);for(var s=Math.ceil(n/a),u=Math.floor(e/a),c=Math.max(s*a,n),l=Math.min(u*a,e),h=Math.floor((c-l)/a)+1,d=new Array(h),f=0;f<h;f++)d[f]=Cs(l+f*a);return{min:l,max:c,ticks:d}}function VU(e,n){var t=e.length*n;return n===1?e[e.length-1]:n===0?e[0]:t%1!=0?e[Math.ceil(t)-1]:e.length%2==0?(e[t-1]+e[t])/2:e[t]}function Up(e){return new Date(e).getFullYear()}function HU(e){return new Date(e,0,1).getTime()}function q1(e){return new Date(e).getMonth()}function qU(e,n){return new Date(e,n,1).getTime()}mo("cat",iN),mo("time-cat",function(e){return iN(P({showLast:!0},e))}),mo("wilkinson-extended",function(e){var n=e.min,t=e.max,r=e.tickCount,i=e.nice,o=e.tickInterval,a=e.minLimit,s=e.maxLimit,u=WU(n,t,r,i).ticks;return ht(a)&&ht(s)?o?V1(n,t,o).ticks:u:H1(e,Vi(u),ai(u))}),mo("r-pretty",function(e){var n=e.min,t=e.max,r=e.tickCount,i=e.tickInterval,o=e.minLimit,a=e.maxLimit,s=lN(n,t,r).ticks;return ht(o)&&ht(a)?i?V1(n,t,i).ticks:s:H1(e,Vi(s),ai(s))}),mo("time",function(e){var n=e.min,t=e.max,r=e.minTickInterval,i=e.tickInterval,o=e.tickCount;if(i)o=Math.ceil((t-n)/i);else{var a=(t-n)/(i=TU(n,t,o)[1])/o;a>1&&(i*=Math.ceil(a)),r&&i<r&&(i=r)}i=Math.max(Math.floor((t-n)/(Math.pow(2,12)-1)),i);for(var s=[],u=n;u<t+i;u+=i)s.push(u);return s}),mo("time-pretty",function(e){var n=e.min,t=e.max,r=e.minTickInterval,i=e.tickCount,o=e.tickInterval,a=[];o||(o=(t-n)/i,r&&o<r&&(o=r)),o=Math.max(Math.floor((t-n)/(Math.pow(2,12)-1)),o);var s=Up(n);if(o>eN)for(var u=Up(t),c=Math.ceil(o/eN),l=s;l<=u+c;l+=c)a.push(HU(l));else if(o>ah){var h=Math.ceil(o/ah),d=q1(n),f=function(A,D){var R=Up(A),B=Up(D),F=q1(A);return 12*(B-R)+(q1(D)-F)%12}(n,t);for(l=0;l<=f+h;l+=h)a.push(qU(s,l+d))}else if(o>$o){var p=(b=new Date(n)).getFullYear(),g=b.getMonth(),v=b.getDate(),m=Math.ceil(o/$o),y=function(A,D){return Math.ceil((D-A)/$o)}(n,t);for(l=0;l<y+m;l+=m)a.push(new Date(p,g,v+l).getTime())}else if(o>ks){p=(b=new Date(n)).getFullYear(),g=b.getMonth(),m=b.getDate();var b,x=b.getHours(),w=Math.ceil(o/ks),E=function(A,D){return Math.ceil((D-A)/ks)}(n,t);for(l=0;l<=E+w;l+=w)a.push(new Date(p,g,m,x+l).getTime())}else if(o>Gp){var S=function(A,D){return Math.ceil((D-A)/6e4)}(n,t),M=Math.ceil(o/Gp);for(l=0;l<=S+M;l+=M)a.push(n+l*Gp)}else{var k=o;k<Ra&&(k=Ra);var _=Math.floor(n/Ra)*Ra,C=Math.ceil((t-n)/Ra),T=Math.ceil(k/Ra);for(l=0;l<C+T;l+=T)a.push(_+l*Ra)}return a.length,a}),mo("log",function(e){var n,t=e.base,r=e.tickCount,i=e.min,o=e.max,a=e.values,s=mi(t,o);if(i>0)n=Math.floor(mi(t,i));else{var u=tN(a,t,o);n=Math.floor(mi(t,u))}for(var c=s-n,l=Math.ceil(c/r),h=[],d=n;d<s+l;d+=l)h.push(Math.pow(t,d));return i<=0&&h.unshift(0),h}),mo("pow",function(e){var n=e.exponent,t=e.tickCount,r=Math.ceil(ja(n,e.max));return lN(Math.floor(ja(n,e.min)),r,t).ticks.map(function(i){var o=i>=0?1:-1;return Math.pow(i,n)*o})}),mo("quantile",function(e){var n=e.tickCount,t=e.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),i=[],o=0;o<n;o++){var a=o/(n-1);i.push(VU(r,a))}return i}),mo("d3-linear",function(e){var n=e.min,t=e.max,r=e.tickInterval,i=e.minLimit,o=e.maxLimit,a=function(s){var u=s.min,c=s.max,l=s.nice,h=s.tickCount,d=new RU;return d.domain([u,c]),l&&d.nice(h),d.ticks(h)}(e);return ht(i)&&ht(o)?r?V1(n,t,r).ticks:a:H1(e,Vi(a),ai(a))}),yo("cat",ih),yo("category",ih),yo("identity",BU),yo("linear",uh),yo("log",NU),yo("pow",PU),yo("time",DU),yo("timeCat",OU),yo("quantize",nN),yo("quantile",LU);var ZU=function(e,n,t){if(t||arguments.length===2)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function hN(e){return function(n){return Za(n,function(t,r){return[r===0?"M":"L",t[0],t[1]]})}(e)}function KU(e,n,t,r){r===void 0&&(r=!0);var i=new uh({values:e}),o=new ih({values:Za(e,function(s,u){return u})}),a=Za(e,function(s,u){return[o.scale(u)*n,t-i.scale(s)*t]});return r?function(s){if(s.length<=2)return hN(s);var u=[];re(s,function(f){oa(f,u.slice(u.length-2))||u.push(f[0],f[1])});var c=gv(u,!1),l=Vi(s),h=l[0],d=l[1];return c.unshift(["M",h,d]),c}(a):hN(a)}function $U(e,n,t,r){r===void 0&&(r=5);for(var i=new uh({values:e}),o=new ih({values:Za(e,function(h,d){return d})}),a=Za(e,function(h,d){return[o.scale(d)*n,t-i.scale(h)*t]}),s=[],u=0;u<a.length;u++){var c=a[u],l=JU({x:c[0],y:c[1],y0:t,size:r});s.push.apply(s,l)}return function(h,d){d===void 0&&(d=!0);var f=[],p=h[0];f.push(["M",p.x,p.y]);for(var g=1,v=h.length;g<v;g++)f.push(["L",h[g].x,h[g].y]);return d&&(f.push(["L",p.x,p.y]),f.push(["z"])),f}(s)}function QU(e,n,t,r){var i=ZU([],e,!0),o=function(a,s){var u=new uh({values:a}),c=Math.max(0,u.min);return s-u.scale(c)*s}(r,t);return i.push(["L",n,o]),i.push(["L",0,o]),i.push(["Z"]),i}function JU(e){var n,t,r,i,o=e.x,a=e.y,s=e.y0,u=e.size;at(a)?(n=a[0],t=a[1]):(n=s,t=a),at(o)?(r=o[0],i=o[1]):(r=o-u/2,i=o+u/2);var c=[{x:r,y:n},{x:r,y:t}];return c.push({x:i,y:t},{x:i,y:n}),c}var ch=function(){return ch=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},ch.apply(this,arguments)},eW={stroke:"#C5C5C5",strokeOpacity:.85},tW={fill:"#CACED4",opacity:.85},nW=function(){function e(n){var t=n.x,r=t===void 0?0:t,i=n.y,o=i===void 0?0:i,a=n.width,s=a===void 0?200:a,u=n.height,c=u===void 0?26:u,l=n.smooth,h=l===void 0||l,d=n.isArea,f=d!==void 0&&d,p=n.data,g=p===void 0?[]:p,v=n.lineStyle,m=n.areaStyle,y=n.group,b=n.interval,x=b===void 0?null:b;this.group=y,this.x=r,this.y=o,this.width=s,this.height=c,this.data=g,this.smooth=h,this.isArea=f,this.lineStyle=Object.assign({},eW,v),this.areaStyle=Object.assign({},tW,m),this.intervalConfig=x,this.renderLine()}return e.prototype.renderLine=function(){var n=this,t=n.x,r=n.y,i=n.width,o=n.height;n.barWidth;var a=n.data,s=n.smooth,u=n.isArea,c=n.lineStyle,l=n.areaStyle,h=this.group.addGroup({name:"trend-group"});if(a){var d=KU(a,i,o,s);if(h.addShape("path",{attrs:ch({path:d},c),name:"trend-line"}),u){var f=QU(d,i,o,a);h.addShape("path",{attrs:ch({path:f},l),name:"trend-area"})}}this.intervalConfig&&h.addShape("path",{attrs:ch({path:$U(this.intervalConfig.data,i,o,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),h.move(t,r)},e.prototype.destory=function(){this.group.destroy()},e}(),rc=function(){return rc=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},rc.apply(this,arguments)},rW={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},iW={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},dN=function(){function e(n){var t=n.group,r=n.name,i=n.type,o=n.x,a=o===void 0?0:o,s=n.y,u=s===void 0?0:s,c=n.width,l=c===void 0?2:c,h=n.height,d=h===void 0?24:h,f=n.style,p=f===void 0?{}:f;this.group=t,this.name=r,this.handleType=i,this.x=a,this.y=u,this.width=l,this.height=d,i==="trend"?this.style=rc(rc({},rW),p):i==="simple"&&(this.style=rc(rc({},iW),p)),this.renderHandle()}return e.prototype.setX=function(n){this.setXY(n,void 0)},e.prototype.setY=function(n){this.setXY(void 0,n)},e.prototype.setXY=function(n,t){Ue(n)&&(this.x=n),Ue(t)&&(this.y=t),this.updateXY()},e.prototype.renderHandle=function(){var n=this,t=n.width,r=n.height,i=n.style,o=n.name,a=i.fill,s=i.stroke,u=i.radius,c=i.opacity,l=i.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:a,stroke:s,radius:u,opacity:c,cursor:l},name:"".concat(o,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:a,stroke:s,radius:u,opacity:c,cursor:l,lineAppendWidth:12},name:"".concat(o,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:a,stroke:s,radius:u,opacity:c,cursor:l},name:"".concat(o,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:a,stroke:s,radius:u,opacity:c,cursor:l,lineWidth:2},name:"".concat(o,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},e.prototype.bindSimpleEvents=function(){var n=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=n.style.highLightFill;n.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=n.style.fill;n.topCircle.attr("fill",r)})},e.prototype.bindTrendEvents=function(){var n=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=n.style.highLightFill;n.verticalLine.attr("fill",r),n.topCircle.attr("fill",r),n.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=n.style.fill;n.verticalLine.attr("fill",r),n.topCircle.attr("fill",r),n.bottomCircle.attr("fill",r)})},e.prototype.show=function(){this.handleGroup.show()},e.prototype.hide=function(){this.handleGroup.hide()},e.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},e}(),mn=function(){return mn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},mn.apply(this,arguments)},oW=br,aW={fill:"#416180",opacity:.05},sW={fill:"#416180",opacity:.15,radius:5},uW={fill:"#5B8FF9",opacity:.3,cursor:"grab"},cW={width:2,height:24},lW={textBaseline:"middle",fill:"#000",opacity:.45},hW={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},dW={lineWidth:1,stroke:"#ccc"},fW=function(){function e(n){var t=this;this.prevX=0,this.onMouseDown=function(Z){return function(ne){t.currentHandler=Z;var J=ne.originalEvent;J.stopPropagation(),J.preventDefault(),t.prevX=Hi(J,"touches.0.pageX",J.pageX);var q=t.canvas.get("container");q.addEventListener("mousemove",t.onMouseMove),q.addEventListener("mouseup",t.onMouseUp),q.addEventListener("mouseleave",t.onMouseUp),q.addEventListener("touchmove",t.onMouseMove),q.addEventListener("touchend",t.onMouseUp),q.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(Z){Z.stopPropagation(),Z.preventDefault();var ne=Hi(Z,"touches.0.pageX",Z.pageX),J=ne-t.prevX,q=t.adjustOffsetRange(J/t.width);t.updateStartEnd(q),t.updateUI(),t.prevX=ne},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var Z=t.canvas.get("container");Z&&(Z.removeEventListener("mousemove",t.onMouseMove),Z.removeEventListener("mouseup",t.onMouseUp),Z.removeEventListener("mouseleave",t.onMouseUp),Z.removeEventListener("touchmove",t.onMouseMove),Z.removeEventListener("touchend",t.onMouseUp),Z.removeEventListener("touchcancel",t.onMouseUp))};var r=n.x,i=r===void 0?0:r,o=n.y,a=o===void 0?0:o,s=n.width,u=s===void 0?100:s,c=n.height,l=n.padding,h=l===void 0?10:l,d=n.trendCfg,f=n.controllerCfg,p=f===void 0?{speed:1}:f,g=n.backgroundStyle,v=g===void 0?{}:g,m=n.foregroundStyle,y=m===void 0?{}:m,b=n.handlerStyle,x=b===void 0?{}:b,w=n.textStyle,E=w===void 0?{}:w,S=n.start,M=S===void 0?0:S,k=n.end,_=k===void 0?1:k,C=n.minText,T=C===void 0?"":C,A=n.maxText,D=A===void 0?"":A,R=n.group,B=n.graph,F=n.canvas,N=n.tick,L=N===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Z){return Z},ticks:[]}:N,z=n.type;this.graph=B,this.canvas=F,this.group=R,this.timeBarType=z,this.x=i,this.y=a,this.width=u,this.height=c,this.padding=h,this.ticks=L.ticks,this.trendCfg=d,this.controllerCfg=p,this.currentSpeed=p.speed||1,this.tickLabelFormatter=L.tickLabelFormatter,z==="trend"?this.backgroundStyle=mn(mn({},aW),v):z==="simple"&&(this.backgroundStyle=mn(mn({},sW),v)),this.foregroundStyle=mn(mn({},uW),y),this.handlerStyle=mn(mn({},cW),x),this.textStyle=mn(mn({},lW),E),this.tickLabelStyle=mn(mn({},hW),L.tickLabelStyle),this.tickLineStyle=mn(mn({},dW),L.tickLineStyle),this.currentMode=p.defaultTimeType||nh,this.start=M,this.end=_,this.minText=T,this.maxText=D,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return e.prototype.update=function(n){var t=n.x,r=n.y,i=n.width,o=n.height,a=n.minText,s=n.maxText,u=n.start,c=n.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(c,0)),ut(this,{x:t,y:r,width:i,height:o,minText:a,maxText:s}),this.updateUI()},e.prototype.setText=function(n,t){this.minTextShape.attr("text",n),this.maxTextShape.attr("text",t)},e.prototype.renderSlider=function(){var n=this,t=this,r=t.width,i=t.height,o=t.timeBarType;if(o==="trend"&&Vh(Hi(this.trendCfg,"data"))){var a=new nW(mn(mn({x:this.x,y:this.y,width:r,height:i},this.trendCfg),{group:this.group}));this.trendComponent=a}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:mn({x:0,y:0,width:r,height:i},this.backgroundStyle),name:"background"});var u=this.group.addGroup();o==="trend"?(this.minTextShape=u.addShape("text",{attrs:mn({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:mn({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:mn({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:mn({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:mn({x:0,y:this.y,height:i},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(m){m.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(m){m.target.attr("cursor",n.foregroundStyle.cursor||"grab")});var c=Hi(this.handlerStyle,"width",2),l=Hi(this.handlerStyle,"height",24),h=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new dN({name:"minHandlerShape",group:h,type:o,x:this.x,y:this.y,width:c,height:l,style:this.handlerStyle});var d=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new dN({name:"maxHandlerShape",group:d,type:o,x:this.x,y:this.y,width:c,height:l,style:this.handlerStyle});var f=this.ticks,p=r/(f.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(m){m.destroy()});var g=-1/0,v=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=f.map(function(m,y){var b;n.tickPosList.push(n.x+y*p),n.tickLabelFormatter?(b=n.tickLabelFormatter(m),!he(b)&&b&&(b=m.date)):b=m.date;var x=n.x+y*p,w=n.y+i+5,E=n.group.addShape("text",{attrs:mn({x,y:w,text:b,fontFamily:n.fontFamily||"Arial, sans-serif"},n.tickLabelStyle),name:"tick-label"});if(Ue(v)&&y!==f.length-1){var S=oW([1,0,0,0,1,0,0,0,1],[["t",-x,-w],["r",v],["t",x-5,w+2]]);E.attr({textAlign:"left",matrix:S})}y===0?E.attr({textAlign:"left"}):y!==f.length-1&&E.attr({textAlign:"right"});var M=n.group.addShape("line",{attrs:mn({x1:n.x+y*p,y1:n.y+i+2,x2:n.x+y*p,y2:n.y+i+6},n.tickLineStyle),name:"tick-line"});M.toBack();var k=E.getBBox();return k.minX>g?(E.show(),M.show(),g=k.minX+k.width+10):(E.hide(),M.hide()),E}),this.controllerBtnGroup=new PO(mn({group:this.group,x:this.x,y:this.y+i+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===th&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},e.prototype.bindEvents=function(){var n=this,t=this.group.find(function(i){return i.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Na,":click"),function(){n.isPlay=!n.isPlay,n.currentHandler=n.maxHandlerShape,n.changePlayStatus()}),this.group.on("".concat(Ql,":click"),function(){n.currentHandler=n.maxHandlerShape,n.updateStartEnd(.01),n.updateUI()}),this.group.on("".concat(Jl,":click"),function(){n.currentHandler=n.maxHandlerShape,n.updateStartEnd(-.01),n.updateUI()}),this.group.on(_s,function(i){var o=i.type,a=i.speed;n.currentSpeed=a,n.currentMode=o,o===th?(n.minHandlerShape.hide(),n.foregroundShape.hide(),n.minTextShape.hide()):o===nh&&(n.minHandlerShape.show(),n.foregroundShape.show(),n.minTextShape.show())})},e.prototype.adjustTickIndex=function(n){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=n&&n<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-n)<Math.abs(n-this.tickPosList[t+1])?t:t+1;return 0},e.prototype.adjustOffsetRange=function(n){switch(this.currentHandler){case this.minHandlerShape:var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,n));case this.maxHandlerShape:return t=0-this.end,r=1-this.end,Math.min(r,Math.max(t,n));case this.foregroundShape:return t=0-this.start,r=1-this.end,Math.min(r,Math.max(t,n));default:return 0}},e.prototype.updateStartEnd=function(n){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=n,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=n,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=n,this.end+=n,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date}},e.prototype.updateUI=function(){var n=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var i=Hi(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var o=this.dodgeText([t,r]),a=o[0],s=o[1];this.minHandlerShape.setX(t-i/2),re(a,function(u,c){return n.minTextShape.attr(c,u)}),this.maxHandlerShape.setX(r-i/2),re(s,function(u,c){return n.maxTextShape.attr(c,u)}),this.currentMode===nh?this.graph.emit(vo,{value:[this.start,this.end].sort()}):this.currentMode===th&&this.graph.emit(vo,{value:[this.end,this.end]})},e.prototype.dodgeText=function(n){var t,r,i=Hi(this.handlerStyle,"width",2),o=this.minTextShape,a=this.maxTextShape,s=n[0],u=n[1],c=!1;s>u&&(s=(t=[u,s])[0],u=t[1],o=(r=[a,o])[0],a=r[1],c=!0);var l=o.getBBox(),h=a.getBBox(),d=null,f=null;return this.timeBarType==="trend"?(d=s-l.width<this.x+2?{x:s+i/2+2,textAlign:"left"}:{x:s-i/2-2,textAlign:"right"},f=u+h.width>this.x+this.width?{x:u-i/2-2,textAlign:"right"}:{x:u+i/2+2,textAlign:"left"}):this.timeBarType==="simple"&&(d=o.attr("x")>l.width?{x:s,textAlign:"center"}:{x:s,textAlign:"left"},f=a.attr("x")>this.width-h.width?{x:u,textAlign:"right"}:{x:u,textAlign:"center"}),c?[f,d]:[d,f]},e.prototype.startPlay=function(){var n=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=n,r=t.ticks,i=t.width,o=n.currentSpeed,a=i/r.length/(1e3*(10-o)/60),s=n.adjustOffsetRange(a/n.width);n.updateStartEnd(s),n.updateUI(),n.isPlay&&(n.playHandler=n.startPlay())}):void 0},e.prototype.changePlayStatus=function(n){n===void 0&&(n=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(IO,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),n&&this.graph.emit(TO,null))},e.prototype.destory=function(){this.graph.off(vo,function(){});var n=this.group,t=n.find(function(i){return i.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=n.find(function(i){return i.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),n.off("".concat(Na,":click")),n.off("".concat(Ql,":click")),n.off("".concat(Jl,":click")),n.off(_s),n.destroy(),this.trendComponent&&this.trendComponent.destory()},e}(),pW=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qo=function(){return Qo=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Qo.apply(this,arguments)},gW=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t},vW=function(e){function n(t){var r=e.call(this,t)||this;return r.afterrenderListener=function(i){return r.filterData({})},r.valueChangeListener=ru(function(i){return r.filterData(i)},200,{trailing:!0,leading:!0}),r.changeData=function(i){var o=r.get("graph");r.cacheGraphData=o.get("data"),r.filterData({})},r}return pW(n,e),n.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},n.prototype.initContainer=function(){var t,r,i=this.get("graph"),o=this._cfgs,a=o.width,s=o.height,u=o.putInGraphContainer,c=this.get("className")||"g6-component-timebar",l=this.get("container");l?(he(l)&&(l=document.getElementById(l)),t=l):Ht(t=xn("<div class='".concat(c,"'></div>")),{position:"relative"}),u&&this.get("graph").get("container").appendChild(t),this.set("timeBarContainer",t),r=i.get("renderer")==="SVG"?new ol({container:t,width:a,height:s}):new Do({container:t,width:a,height:s}),this.get("containerCSS")&&Ht(t,this.get("containerCSS")),this.set("canvas",r)},n.prototype.init=function(){this.initContainer();var t=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",t),this.renderTrend(),this.initEvent();var r=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",r)},n.prototype.play=function(){this.togglePlay(!0)},n.prototype.pause=function(){this.togglePlay(!1)},n.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},n.prototype.renderTrend=function(){var t=this,r=this._cfgs,i=r.width,o=r.x,a=r.y,s=r.padding,u=r.type,c=r.trend,l=r.slider,h=r.controllerCfg,d=r.textStyle,f=r.tick,p=r.backgroundStyle,g=r.foregroundStyle,v=c.data,m=gW(c,["data"]),y=i-2*s,b=u==="trend"?26:4,x=this.get("graph"),w=this.get("timeBarGroup"),E=this.get("canvas"),S=null;if(u==="trend"||u==="simple"){var M=this.get("getValue");S=new fW(Qo(Qo({graph:x,canvas:E,group:w,type:u,x:o+s,y:u==="trend"?a+s:a+s+15,width:y,height:b,padding:s,backgroundStyle:p,foregroundStyle:g,trendCfg:Qo(Qo({},m),{data:v.map(function(_){return(M==null?void 0:M(_))||_.value})})},l),{tick:{ticks:v,tickLabelFormatter:f.tickLabelFormatter,tickLabelStyle:f.tickLabelStyle,tickLineStyle:f.tickLineStyle},handlerStyle:Qo(Qo({},l.handlerStyle),{height:l.height||b}),controllerCfg:h,textStyle:d}))}else u==="tick"&&(S=new _U(Qo({graph:x,canvas:E,group:w,x:o+s,y:a+s,width:i,height:42,padding:2,controllerCfg:h},f)));var k=function _(){var C=t.get("timebar");C.draggingHandler=!1,C.isPlay&&(C.isPlay=!1,C.currentHandler=C.maxHandlerShape,C.changePlayStatus()),document.removeEventListener("mouseup",_)};E.on("mousedown",function(_){_.target.get("name")!=="maxHandlerShape-handler"&&_.target.get("name")!=="minHandlerShape-handler"&&_.target!==S.foregroundShape||document.addEventListener("mouseup",k)}),this.set("timebar",S)},n.prototype.filterData=function(t){var r,i=t.value;if(!i){i=[];var o=this._cfgs.type;o&&o!=="trend"&&o!=="simple"?o==="tick"&&(i[0]=this._cfgs.tick.start,i[1]=this._cfgs.tick.end):(i[0]=this._cfgs.slider.start,i[1]=this._cfgs.slider.end)}var a=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?a=this._cfgs.trend.data:s==="tick"&&(a=this._cfgs.tick.data),a&&a.length!==0){var u=this.get("rangeChange"),c=this.get("graph"),l=Math.round(a.length*i[0]),h=Math.round(a.length*i[1]);h=h>=a.length?a.length-1:h,l=l>=a.length?a.length-1:l;var d=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,f=d?d(a[l]):a[l].date,p=d?d(a[h]):a[h].date;if(s!=="tick"&&this.get("timebar").setText(f,p),u)u(c,f,p);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=c.get("data"));var g=this.get("filterItemTypes"),v=this.get("changeData"),m=this.get("getDate"),y=this.get("shouldIgnore"),b=a[l].date,x=a[h].date;if(v||v===void 0){var w=this.cacheGraphData.nodes,E=this.cacheGraphData.edges,S={},M={};c.getNodes().forEach(function(k){return S[k.getID()]=!0}),c.getEdges().forEach(function(k){return M[k.getID()]=!0}),g.includes("node")&&(w==null||w.forEach(function(k){var _=+((m==null?void 0:m(k))||k.date),C=_>=b&&_<=x||(y==null?void 0:y("node",k,{min:b,max:x})),T=S[k.id];T&&!C?(c.removeItem(k.id),S[k.id]=!1):!T&&C&&(c.addItem("node",k),S[k.id]=!0)}),E==null||E.forEach(function(k){var _=S[k.source]&&S[k.target]||(y==null?void 0:y("edge",k,{min:b,max:x})),C=!!c.findById(k.id);C&&!_?(c.removeItem(k.id),M[k.id]=!1):!C&&_?(c.addItem("edge",k),M[k.id]=!0):C||(M[k.id]=!1)})),(this.get("filterEdge")||g.includes("edge"))&&(E==null||E.filter(function(k){var _=+((m==null?void 0:m(k))||k.date),C=_>=b&&_<=x||(y==null?void 0:y("edge",k,{min:b,max:x})),T=S[k.source]&&S[k.target],A=C&&T,D=M[k.id];D&&!A?(M[k.id]=!1,c.removeItem(k.id)):!D&&A&&(M[k.id]=!0,c.addItem("edge",k))}))}else g.includes("node")&&c.getNodes().forEach(function(k){var _=k.getModel();if(!(y!=null&&y("node",_,{min:b,max:x}))){var C=+((m==null?void 0:m(_))||_.date);C<b||C>x?c.hideItem(k):c.showItem(k)}}),(this.get("filterEdge")||g.includes("edge"))&&c.getEdges().forEach(function(k){var _=k.getModel();if(!(y!=null&&y("edge",_,{min:a[l].date,max:a[h].date}))){var C=+((m==null?void 0:m(_))||_.date);if(C<a[l].date||C>a[h].date)c.hideItem(k);else{var T=k.getSource().isVisible(),A=k.getTarget().isVisible();T&&A&&c.showItem(k)}}})}}},n.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(vo,this.valueChangeListener)},n.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(vo,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),e.prototype.destroy.call(this);var i=this.get("timeBarContainer");if(i){var o=this.get("container");o||(o=this.get("graph").get("container")),he(o)&&(o=document.getElementById(o)),o===i&&(o=o.parentElement),o.removeChild(i)}},n}(Xr);const mW={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var n=this,t=this.events;this.graph=e,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||e.get("canvas").set("draggable",!0),re(t,function(r,i){e.on(i,r)}),document.addEventListener("visibilitychange",function(){n.keydown=!1})},unbind:function(e){var n=this.events,t=e.get("canvas").get("draggable");this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||e.get("canvas").set("draggable",!1),re(n,function(r,i){e.off(i,r)}),e.get("canvas").set("draggable",t)},get:function(e){return this[e]},set:function(e,n){return this[e]=n,this}};var fN=function(){function e(){}return e.registerBehavior=function(n,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(n));var r=_t(mW);Object.assign(r,t);var i=function(o){var a=this;Object.assign(this,this.getDefaultCfg(),o);var s=this.getEvents();this.events=null;var u={};s&&(re(s,function(c,l){u[l]=ia(a,c)}),this.events=u)};i.prototype=r,e.types[n]=i},e.hasBehavior=function(n){return!!e.types[n]},e.getBehavior=function(n){return e.types[n]},e.types={},e}(),Wp=br,pN=function(e,n,t){return e>=n&&e<=t},Vp=function(e,n,t,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,u=r.x-t.x,c=r.y-t.y,l=a*c-s*u,h=1/l;if(l*l>1e-4*(a*a+s*s)*(u*u+c*c)){var d=(i*c-o*u)*h,f=(i*s-o*a)*h;return pN(d,0,1)&&pN(f,0,1)?{x:e.x+d*a,y:e.y+d*s}:null}return null},gN=function(e,n){var t=e.x,r=e.y,i=e.width,o=e.height,a=[],s={x:t+i/2,y:r+o/2};a.push({x:t,y:r}),a.push({x:t+i,y:r}),a.push({x:t+i,y:r+o}),a.push({x:t,y:r+o}),a.push({x:t,y:r});for(var u=null,c=1;c<a.length&&!(u=Vp(a[c-1],a[c],s,n));c++);return u},vN=function(e,n){var t=e.x,r=e.y,i=e.r,o=n.x-t,a=n.y-r;if(o*o+a*a<i*i)return null;var s=Math.atan(a/o);return{x:t+Math.abs(i*Math.cos(s))*Math.sign(o),y:r+Math.abs(i*Math.sin(s))*Math.sign(a)}},mN=function(e,n){var t=e.rx,r=e.ry,i=e.x,o=e.y,a=n.x-i,s=n.y-o,u=Math.atan2(s/r,a/t);return u<0&&(u+=2*Math.PI),{x:i+t*Math.cos(u),y:o+r*Math.sin(u)}},ic=function(e,n,t){t===void 0&&(t=1);var r=[e.x,e.y,t];return n&&!isNaN(n[0])||(n=[1,0,0,0,1,0,0,0,1]),iu(r,r,n),{x:r[0],y:r[1]}},yN=function(e,n,t){t===void 0&&(t=1),n&&!isNaN(n[0])||(n=[1,0,0,0,1,0,0,0,1]);var r=qh([1,0,0,0,1,0,0,0,1],n);r||(r=[1,0,0,0,1,0,0,0,1]);var i=[e.x,e.y,t];return iu(i,i,r),{x:i[0],y:i[1]}},Z1=function(e,n,t){var r=e.x-n.x,i=e.y-n.y,o=e.x-t.x,a=e.y-t.y,s=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,c=i*o-r*a;return{x:-(a*s-i*u)/c,y:-(r*u-o*s)/c}},Hp=function(e,n){var t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)},bN=function(e,n){e.translate(n.x,n.y)},K1=function(e,n,t,r){r===void 0&&(r={duration:500});var i=e.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),a=n.x-o.minX,s=n.y-o.minY;if(t){var u=a*i[0],c=s*i[4],l=0,h=0,d=0,f=0;e.animate(function(g){return i=Wp(i,[["t",(d=u*g)-l,(f=c*g)-h]]),l=d,h=f,{matrix:i}},r)}else{var p=Wp(i,[["t",a,s]]);e.setMatrix(p)}};function yW(e,n,t){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])&&Math.min(e[0],n[0])<=t[0]&&t[0]<=Math.max(e[0],n[0])&&Math.min(e[1],n[1])<=t[1]&&t[1]<=Math.max(e[1],n[1])}var lh=function(e,n,t){var r=!1,i=e.length;function o(c){return Math.abs(c)<1e-6?0:c<0?-1:1}if(i<=2)return!1;for(var a=0;a<i;a++){var s=e[a],u=e[(a+1)%i];if(yW(s,u,[n,t]))return!0;o(s[1]-t)>0!=o(u[1]-t)>0&&o(n-(t-s[1])*(s[0]-u[0])/(s[1]-u[1])-s[0])<0&&(r=!r)}return r},xN=function(e,n){return!(n.minX>e.maxX||n.maxX<e.minX||n.minY>e.maxY||n.maxY<e.minY)},wN=function(e,n){var t=function(l){var h=l.map(function(f){return f[0]}),d=l.map(function(f){return f[1]});return{minX:Math.min.apply(null,h),maxX:Math.max.apply(null,h),minY:Math.min.apply(null,d),maxY:Math.max.apply(null,d)}},r=function(l){for(var h=[],d=l.length,f=0;f<d-1;f++){var p=l[f],g=l[f+1];h.push({from:{x:p[0],y:p[1]},to:{x:g[0],y:g[1]}})}if(h.length>1){var v=l[0],m=l[d-1];h.push({from:{x:m[0],y:m[1]},to:{x:v[0],y:v[1]}})}return h};if(e.length<2||n.length<2)return!1;var i=t(e),o=t(n);if(!xN(i,o))return!1;var a=!1;if(re(n,function(l){if(lh(e,l[0],l[1]))return a=!0,!1}),a||(re(e,function(l){if(lh(n,l[0],l[1]))return a=!0,!1}),a))return!0;var s=r(e),u=r(n),c=!1;return re(u,function(l){if(function(h,d){var f=!1;return re(h,function(p){if(Vp(p.from,p.to,d.from,d.to))return f=!0,!1}),f}(s,l))return c=!0,!1}),c},As=function(){function e(n,t,r,i){this.x1=n,this.y1=t,this.x2=r,this.y2=i}return e.prototype.getBBox=function(){var n=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2);return{x:n,y:t,minX:n,minY:t,maxX:r,maxY:i,width:r-n,height:i-t}},e}(),$1=function(e,n){return{top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]}[n]},bW=function(e,n){var t=(n.x2-n.x1)*(e.y1-n.y1)-(n.y2-n.y1)*(e.x1-n.x1),r=(e.x2-e.x1)*(e.y1-n.y1)-(e.y2-e.y1)*(e.x1-n.x1),i=(n.y2-n.y1)*(e.x2-e.x1)-(n.x2-n.x1)*(e.y2-e.y1);if(i){var o=t/i,a=r/i;if(o>=0&&o<=1&&a>=0&&a<=1)return o}return Number.POSITIVE_INFINITY},EN=function(e,n){for(var t=["top","left","bottom","right"],r=e.getBBox(),i=0,o=[],a=0;a<4;a++){var s=$1(r,t[a]),u=s[0],c=s[1],l=s[2],h=s[3];o[a]=Vp({x:n.x1,y:n.y1},{x:n.x2,y:n.y2},{x:u,y:c},{x:l,y:h}),o[a]&&(i+=1)}return[o,i]},Q1=function(e,n){for(var t=["top","left","bottom","right"],r=e.getBBox(),i=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=$1(r,t[a]),u=s[0],c=s[1],l=s[2],h=s[3],d=bW(n,new As(u,c,l,h));(d=Math.abs(d-.5))>=0&&d<=1&&(o+=1,i=d<i?d:i)}return o===0?-1:i},SN=function(e){var n=0,t=0;if(e.length>0){for(var r=0,i=e;r<i.length;r++){var o=i[r];n+=o.x,t+=o.y}n/=e.length,t/=e.length}return{x:n,y:t}},qp=function(e,n){return Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)},MN=function(e,n){var t,r=n.x1,i=n.y1,o=n.x2-r,a=n.y2-i,s=e.x-r,u=e.y-i,c=s*o+u*a;t=c<=0||(c=(s=o-s)*o+(u=a-u)*a)<=0?0:c*c/(o*o+a*a);var l=s*s+u*u-t;return l<0&&(l=0),l},J1=function(e,n,t){return t===void 0&&(t=.001),Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)<Math.pow(t,2)},_N=function(e,n){var t=e.x<n.x,r=e.x>n.x+n.width,i=e.y>n.y+n.height,o=e.y<n.y;if(!(t||r||i||o))return 0;if(i&&!t&&!r)return Math.pow(n.y+n.height-e.y,2);if(o&&!t&&!r)return Math.pow(e.y-n.y,2);if(t&&!i&&!o)return Math.pow(n.x-e.x,2);if(r&&!i&&!o)return Math.pow(n.x+n.width-e.x,2);var a=Math.min(Math.abs(n.x-e.x),Math.abs(n.x+n.width-e.x)),s=Math.min(Math.abs(n.y-e.y),Math.abs(n.y+n.height-e.y));return a*a+s*s},eb=function(e,n,t){return e+(n-e)*t},tb=function(e,n,t){for(var r=Math.min(e.length,n.length),i=new Array(r),o=0;o<r;o++)i[o]=eb(e[o],n[o],t);return i};const xW=Object.freeze(Object.defineProperty({__proto__:null,Line:As,applyMatrix:ic,compare:function(e){return function(n,t){return n[e]-t[e]}},distance:Hp,floydWarshall:function(e){for(var n=[],t=e.length,r=0;r<t;r+=1){n[r]=[];for(var i=0;i<t;i+=1)r===i?n[r][i]=0:e[r][i]!==0&&e[r][i]?n[r][i]=e[r][i]:n[r][i]=1/0}for(var o=0;o<t;o+=1)for(r=0;r<t;r+=1)for(i=0;i<t;i+=1)n[r][i]>n[r][o]+n[o][i]&&(n[r][i]=n[r][o]+n[o][i]);return n},fractionToLine:Q1,getAdjMatrix:function(e,n){var t=e.nodes,r=e.edges,i=[],o={};if(!t)throw new Error("invalid nodes data!");return t&&t.forEach(function(a,s){o[a.id]=s,i.push([])}),r&&r.forEach(function(a){var s=a.source,u=a.target,c=o[s],l=o[u];i[c][l]=1,n||(i[l][c]=1)}),i},getBBoxBoundLine:$1,getCircleCenterByPoints:Z1,getCircleIntersectByPoint:vN,getDegree:function(e,n,t){for(var r=[],i=0;i<e;i++)r[i]=0;return t.forEach(function(o){o.source&&(r[n[o.source]]+=1),o.target&&(r[n[o.target]]+=1)}),r},getEllipseIntersectByPoint:mN,getLineIntersect:Vp,getPointsCenter:SN,getRectIntersectByPoint:gN,intersectBBox:xN,invertMatrix:yN,isPointInPolygon:lh,isPointsOverlap:J1,isPolygonsIntersect:wN,itemIntersectByLine:EN,lerp:eb,lerpArray:tb,move:K1,pointLineDistance:function(e,n){var t=e[0],r=e[1],i=e[2],o=e[3],a=n.x,s=n.y,u=[i-t,o-r];if(td(u,[0,0]))return NaN;var c=[-u[1],u[0]];Lr(c,c);var l=[a-t,s-r];return Math.abs(ed(l,c))},pointLineSquareDist:MN,pointRectSquareDist:_N,rotate:function(e,n){var t=e.getMatrix();t||(t=[1,0,0,0,1,0,0,0,1]),t=Wp(t,[["r",n]]),e.setMatrix(t)},scale:function(e,n){var t=e.getMatrix();t||(t=[1,0,0,0,1,0,0,0,1]);var r=n;at(n)||(r=[n,n]),at(n)&&n.length===1&&(r=[n[0],n[0]]),t=Wp(t,[["s",r[0],r[1]]]),e.setMatrix(t)},scaleMatrix:function(e,n){var t=[];return e.forEach(function(r){var i=[];r.forEach(function(o){i.push(o*n)}),t.push(i)}),t},squareDist:qp,translate:bN},Symbol.toStringTag,{value:"Module"}));var Wr="rgb(95, 149, 255)",kN="rgb(0, 0, 0)",Zp="rgb(247, 250, 255)",wW="rgb(239, 244, 255)",Kp="rgb(253, 253, 253)",CN="rgb(250, 250, 250)",oc="rgb(224, 224, 224)",AN="rgb(234, 234, 234)",IN="#4572d9";const wt={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Wr,fill:wW},size:20,color:Wr,linkPoints:{size:8,lineWidth:1,fill:Zp,stroke:Wr}},nodeStateStyles:{active:{fill:Zp,stroke:Wr,lineWidth:2,shadowColor:Wr,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:Wr,lineWidth:4,shadowColor:Wr,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:IN,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Zp,stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:CN,stroke:oc,lineWidth:1}},edgeLabel:{style:{fill:kN,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:oc,lineAppendWidth:2},color:oc},edgeStateStyles:{active:{stroke:Wr,lineWidth:1},selected:{stroke:Wr,lineWidth:2,shadowColor:Wr,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Wr,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:AN,lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:kN,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Kp,lineWidth:1,stroke:oc,r:5,width:20,height:10},size:[20,5],color:oc,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Wr,lineWidth:1,fill:Zp},selected:{stroke:Wr,lineWidth:2,fill:Kp,shadowColor:Wr,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:IN,lineWidth:2,fill:Kp,"text-shape":{fontWeight:500}},inactive:{stroke:oc,fill:Kp,lineWidth:1},disable:{stroke:AN,fill:CN,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},EW={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.3729995727539062,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var bo=Math.PI,nb=Math.sin,rb=Math.cos,ur=nb(bo/8),cr=rb(bo/8),$p=function(e,n){var t=e.getBBox(),r={x:t.minX,y:t.minY},i={x:t.maxX,y:t.maxY};if(n){var o=n.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),r=ic(r,o),i=ic(i,o)}var a=r.x,s=r.y,u=i.x,c=i.y;return{x:a,y:s,minX:a,minY:s,maxX:u,maxY:c,width:u-a,height:c-s}},TN=function(e){var n=e.sourceNode||e.targetNode,t=n.get("group").getMatrix();t||(t=[1,0,0,0,1,0,0,0,1]);var r=n.getKeyShape(),i=r.getBBox(),o=e.loopCfg||{},a=o.dist||2*Math.max(i.width,i.height),s=o.position||wt.defaultLoopPosition,u=[(i.minX+i.maxX)/2+t[6],(i.minY+i.maxY)/2+t[7]],c=[e.startPoint.x,e.startPoint.y],l=[e.endPoint.x,e.endPoint.y],h=i.height/2,d=i.width/2,f=h,p=h,g=f*ur,v=f*cr,m=p*ur,y=p*cr,b=r.get("type"),x=Math.min(h/2,d/2),w=Math.min(h,d),E=o!=null&&o.pointPadding?Math.min(w,o==null?void 0:o.pointPadding):x;if(c[0]===l[0]&&c[1]===l[1]){switch(s){case"top":b==="circle"?(c=[u[0]-g,u[1]-v],l=[u[0]+m,u[1]-y]):(c=[u[0]-E,u[1]-h],l=[u[0]+E,u[1]-h]);break;case"top-right":f=h,p=d,b==="circle"?(c=[u[0]+(g=f*ur),u[1]-(v=f*cr)],l=[u[0]+(y=p*cr),u[1]-(m=p*ur)]):(c=[u[0]+d-E,u[1]-h],l=[u[0]+d,u[1]-h+E]);break;case"right":f=d,p=d,b==="circle"?(c=[u[0]+(v=f*cr),u[1]-(g=f*ur)],l=[u[0]+(y=p*cr),u[1]+(m=p*ur)]):(c=[u[0]+d,u[1]-E],l=[u[0]+d,u[1]+E]);break;case"bottom-right":f=d,p=h,b==="circle"?(c=[u[0]+(v=f*cr),u[1]+(g=f*ur)],l=[u[0]+(m=p*ur),u[1]+(y=p*cr)]):(c=[u[0]+d,u[1]+h-E],l=[u[0]+d-E,u[1]+h]);break;case"bottom":f=h,p=h,b==="circle"?(c=[u[0]+(g=f*ur),u[1]+(v=f*cr)],l=[u[0]-(m=p*ur),u[1]+(y=p*cr)]):(c=[u[0]-E,u[1]+h],l=[u[0]+E,u[1]+h]);break;case"bottom-left":f=h,p=d,b==="circle"?(c=[u[0]-(g=f*ur),u[1]+(v=f*cr)],l=[u[0]-(y=p*cr),u[1]+(m=p*ur)]):(c=[u[0]-d,u[1]+h-E],l=[u[0]-d+E,u[1]+h]);break;case"left":f=d,p=d,b==="circle"?(c=[u[0]-(v=f*cr),u[1]+(g=f*ur)],l=[u[0]-(y=p*cr),u[1]-(m=p*ur)]):(c=[u[0]-d,u[1]-E],l=[u[0]-d,u[1]+E]);break;case"top-left":f=d,p=h,b==="circle"?(c=[u[0]-(v=f*cr),u[1]-(g=f*ur)],l=[u[0]-(m=p*ur),u[1]-(y=p*cr)]):(c=[u[0]-d+E,u[1]-h],l=[u[0]-d,u[1]-h+E]);break;default:c=[u[0]-(g=(f=d)*ur),u[1]-(v=f*cr)],l=[u[0]+(m=(p=d)*ur),u[1]-(y=p*cr)]}if(o.clockwise===!1){var S=[c[0],c[1]];c=[l[0],l[1]],l=[S[0],S[1]]}}var M=[c[0]-u[0],c[1]-u[1]],k=(f+a)/f,_=(p+a)/p;o.clockwise===!1&&(k=(p+a)/p,_=(f+a)/f);var C=bn([0,0],M,k),T=[u[0]+C[0],u[1]+C[1]],A=bn([0,0],[l[0]-u[0],l[1]-u[1]],_),D=[u[0]+A[0],u[1]+A[1]];return e.startPoint={x:c[0],y:c[1]},e.endPoint={x:l[0],y:l[1]},e.controlPoints=[{x:T[0],y:T[1]},{x:D[0],y:D[1]}],e},ON=function(e,n,t,r,i){var o=1e-4,a=[],s=e==null?void 0:e.getPoint(n);if(!s)return{x:0,y:0,angle:0};if(n<o)a=e.getStartTangent().reverse();else if(n>.9999)a=e.getEndTangent();else{var u=e==null?void 0:e.getPoint(n+o);a.push([s.x,s.y]),a.push([u.x,u.y])}var c=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(c<0&&(c+=2*bo),t&&(s.x+=rb(c)*t,s.y+=nb(c)*t),r){var l=c-bo/2;c>.5*bo&&c<1.5*bo&&(l-=bo),s.x+=rb(l)*r,s.y+=nb(l)*r}var h={x:s.x,y:s.y,angle:c};return i?(c>.5*bo&&c<1.5*bo&&(c-=bo),P({rotate:c},h)):h},SW=function e(n,t,r,i){if(i(n,t,r)===!1)return!1;if(n&&n.children){for(var o=n.children.length-1;o>=0;o--)if(!e(n.children[o],n,o,i))return!1}return!0},MW=function e(n,t,r,i){if(n&&n.children){for(var o=n.children.length-1;o>=0;o--)if(!e(n.children[o],n,o,i))return}return i(n,t,r)!==!1},_r=function(e,n){typeof n=="function"&&SW(e,null,-1,n)},xo=function(e,n){typeof n=="function"&&MW(e,null,-1,n)},NN=function(e,n){return n*(EW[e]||1)},PN=function(e,n){var t=0,r=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(i){r.test(i)?t+=n:t+=NN(i,n)}),[t,n]},DN=function(e,n){return typeof n!="number"||n<=0||n>=e.length?e:e.substring(0,n)+"..."},ib=function(e,n){var t=[],r={},i={};e.forEach(function(s){i[s.id]=s}),e.forEach(function(s,u){var c=_t(s);c.itemType="combo",c.children=void 0,(c.parentId===c.id||c.parentId&&!i[c.parentId])&&delete c.parentId;var l=r[c.id];if(l){if(c.children=l.children,r[c.id]=c,!(l=c).parentId)return void t.push(l);var h=r[l.parentId];if(h)h.children?h.children.push(c):h.children=[c];else{var d={id:l.parentId,children:[l]};r[l.parentId]=d,r[c.id]=c}}else if(he(s.parentId)){var f=r[s.parentId];if(f)f.children?f.children.push(c):f.children=[c],r[c.id]=c;else{var p={id:s.parentId,children:[c]};r[p.id]=p,r[c.id]=c}}else t.push(c),r[c.id]=c});var o={};(n||[]).forEach(function(s){o[s.id]=s;var u=r[s.comboId];if(u){var c={id:s.id,comboId:s.comboId};u.children?u.children.push(c):u.children=[c],c.itemType="node",r[s.id]=c}});var a=0;return t.forEach(function(s){s.depth=a+10,_r(s,function(u){var c,l=r[u.id].itemType;c=l==="node"?r[u.comboId]:r[u.parentId],u.depth=c&&l==="node"?a+1:a+10,a<u.depth&&(a=u.depth);var h=o[u.id];return h&&(h.depth=u.depth),!0})}),t},ob=function(e,n,t){var r,i,o=e,a={root:{children:e}},s=!1,u="root";(e||[]).forEach(function(f){if(!s)return f.id===n?(i=f,f.itemType==="combo"?i.parentId=t:i.comboId=t,void(s=!0)):void _r(f,function(p){var g;return a[p.id]={children:(p==null?void 0:p.children)||[]},o=(g=a[p.parentId||p.comboId||"root"])===null||g===void 0?void 0:g.children,!p||!p.removed&&n!==p.id||!o||(u=p.parentId||p.comboId||"root",i=p,p.itemType==="combo"?i.parentId=t:i.comboId=t,s=!0,!1)})});var c=(o=(r=a[u])===null||r===void 0?void 0:r.children)?o.indexOf(i):-1;if(c>-1&&o.splice(c,1),s||(i={id:n,itemType:"node",comboId:t},a[n]={children:void 0}),n){var l=!1;if(t){var h=0;(e||[]).forEach(function(f){l||_r(f,function(p){return t!==p.id||(l=!0,p.children?p.children.push(i):p.children=[i],h=p.depth,i.itemType==="node"?i.depth=h+2:i.depth=h+1,!1)})})}else t&&l||i.itemType==="node"||e.push(i);var d=i.depth;_r(i,function(f){return f.itemType==="node"?d+=2:d+=1,f.depth=d,!0})}return e},Qp=function(e,n,t){var r={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var i=(t==null?void 0:t.getModel())||{},o=i.x,a=i.y,s=i.fixSize,u=i.collapsed,c=i.fixCollapseSize,l=u?c:s,h=at(l)?l:[l,l],d=h[0],f=h[1],p=[d/2,f/2];return{minX:o-p[0],minY:a-p[1],maxX:o+p[0],maxY:a+p[1],x:o,y:a,width:d,height:f}}return e.forEach(function(g){var v=n.findById(g.id);if(v&&v.isVisible()){v.set("bboxCanvasCache",void 0);var m=v.getCanvasBBox();m.x&&r.minX>m.minX&&(r.minX=m.minX),m.y&&r.minY>m.minY&&(r.minY=m.minY),m.x&&r.maxX<m.maxX&&(r.maxX=m.maxX),m.y&&r.maxY<m.maxY&&(r.maxY=m.maxY)}}),r.x=(r.minX+r.maxX)/2,r.y=(r.minY+r.maxY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,(t==null?void 0:t.getKeyShape().get("type"))==="circle"&&(r.width=Math.hypot(r.height,r.width),r.height=r.width),Object.keys(r).forEach(function(g){r[g]!==1/0&&r[g]!==-1/0||(r[g]=void 0)}),r},Jp=function(e){var n={};return Object.keys(e).forEach(function(t){var r=e[t];if(t!=="img"||he(r))if(Tn(r)&&!at(r)){var i={};Object.keys(r).forEach(function(o){var a=r[o];(o!=="img"||he(a))&&(i[o]=_t(a))}),n[t]=i}else n[t]=_t(r)}),n},hh=function(e){var n,t=e.animateCfg,r=e.callback;if(t)if(n=_t(t),t.callback){var i=t.callback;n.callback=function(){r(),i()}}else n.callback=r;else n={duration:500,callback:r};return n};const _W=Object.freeze(Object.defineProperty({__proto__:null,cloneBesidesImg:Jp,getAnimateCfgWithCallback:hh,getBBox:$p,getComboBBox:Qp,getLabelPosition:ON,getLetterWidth:NN,getLoopCfgs:TN,getTextSize:PN,plainCombosToTrees:ib,reconstructTree:ob,shouldRefreshEdge:function(e){var n=Ue(e.x)||Ue(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(n=n||Ue(e.style.r)||Ue(e.style.width)||Ue(e.style.height)||Ue(e.style.rx)||Ue(e.style.ry)),n},traverseTree:_r,traverseTreeUp:xo,truncateLabelByLength:DN},Symbol.toStringTag,{value:"Module"}));var LN=function(e){if(!e)return!1;var n=e.nodes,t=e.edges,r=e.combos,i=r===void 0?[]:r;if(!n&&!t){var o=!0;return _r(e,function(c){return!!he(c.id)||(o=!1,!1)}),o}if((n||[]).find(function(c){return!he(c.id)}))return!1;var a=(n||[]).map(function(c){return c.id}),s=i==null?void 0:i.map(function(c){return c.id}),u=ir(ir([],a,!0),s,!0);return!(t||[]).find(function(c){return!u.includes(c.source)||!u.includes(c.target)})},kW=function(){function e(n){this.graph=n,this.destroyed=!1,this.modes=n.get("modes")||{default:[]},this.formatModes(),this.mode=n.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return e.prototype.formatModes=function(){re(this.modes,function(n){re(n,function(t,r){he(t)&&(n[r]={type:t})})})},e.prototype.setBehaviors=function(n){var t,r=this.graph,i=this.modes[n],o=[];re(i||[],function(a){var s=fN.getBehavior(a.type||a);s&&(t=new s(a))&&(t.bind(r),o.push(t))}),this.currentBehaves=o},e.mergeBehaviors=function(n,t){return re(t,function(r){n.indexOf(r)<0&&(he(r)&&(r={type:r}),n.push(r))}),n},e.filterBehaviors=function(n,t){var r=[];return n.forEach(function(i){var o="";o=he(i)?i:i.type,t.indexOf(o)<0&&r.push(i)}),r},e.prototype.setMode=function(n){var t=this.modes,r=this.graph,i=n;t[i]&&(r.emit("beforemodechange",{mode:n}),re(this.currentBehaves,function(o){o.delegate&&o.delegate.remove(),o.unbind(r)}),this.setBehaviors(i),r.emit("aftermodechange",{mode:n}),this.mode=n)},e.prototype.getMode=function(){return this.mode},e.prototype.manipulateBehaviors=function(n,t,r){var i,o=this;if(i=at(n)?n:[n],at(t))return re(t,function(s){o.modes[s]?o.modes[s]=r?e.mergeBehaviors(o.modes[s]||[],i):e.filterBehaviors(o.modes[s]||[],i):r&&(o.modes[s]=i)}),this;var a=t;return t||(a=this.mode),this.modes[a]||r&&(this.modes[a]=i),this.modes[a]=r?e.mergeBehaviors(this.modes[a]||[],i):e.filterBehaviors(this.modes[a]||[],i),this.formatModes(),this.setMode(this.mode),this},e.prototype.updateBehavior=function(n,t,r){he(n)&&(n={type:n});var i=[];if(r&&r!==this.mode&&r!=="default"){if(!(i=this.modes[r])||!i.length)return this;var o=i.length;for(s=0;s<o;s++)if((u=i[s]).type===n.type||u===n.type)return u===n.type&&(u={type:u}),Object.assign(u,t),i[s]=u,this}else{if(!(i=this.currentBehaves)||!i.length)return this;for(var a=i.length,s=0;s<a;s++){var u;if((u=i[s]).type===n.type)return u.updateCfg(t),this}}return this},e.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},e}(),CW=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.item=r.item,i.canvasX=r.canvasX,i.canvasY=r.canvasY,i.wheelDelta=r.wheelDelta,i.detail=r.detail,i}return At(n,e),n}(K0),ab=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},sb=function(e){if(at(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if(Ue(e))return[e,e,e,e];if(he(e)){var n=parseInt(e,10);return[n,n,n,n]}return[0,0,0,0]},wo=function(e){return Number.isNaN(Number(e))},BN=function(e){for(var n=1/0,t=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++){var a=e[o].getBBox(),s=a.minX,u=a.minY,c=a.maxX,l=a.maxY;s<n&&(n=s),u<r&&(r=u),c>t&&(t=c),l>i&&(i=l)}return{x:Math.floor(n),y:Math.floor(r),width:Math.ceil(t)-Math.floor(n),height:Math.ceil(i)-Math.floor(r),minX:n,minY:r,maxX:t,maxY:i}};const AW=Object.freeze(Object.defineProperty({__proto__:null,calculationItemsBBox:BN,cloneEvent:function(e){var n=new CW(e.type,e);return n.clientX=e.clientX,n.clientY=e.clientY,n.x=e.x,n.y=e.y,n.target=e.target,n.currentTarget=e.currentTarget,n.bubbles=!0,n.item=e.item,n},formatPadding:sb,isNaN:wo,isViewportChanged:function(e){if(!e)return!1;for(var n=[1,0,0,0,1,0,0,0,1],t=0;t<9;t++)if(e[t]!==n[t])return!0;return!1},processParallelEdges:function(e,n,t,r,i){n===void 0&&(n=15),t===void 0&&(t="quadratic"),r===void 0&&(r=void 0),i===void 0&&(i=void 0);for(var o=e.length,a=2*n,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},c=[],l={},h=0;h<o;h++){var d=e[h],f=d.source,p=d.target,g="".concat(f,"-").concat(p);if(!c[h]){u[g]||(u[g]=[]),c[h]=!0,u[g].push(d);for(var v=0;v<o;v++)if(h!==v){var m=e[v],y=m.source,b=m.target;c[v]||(f===b&&p===y?(u[g].push(m),c[v]=!0,l["".concat(y,"|").concat(b,"|").concat(u[g].length-1)]=!0):f===y&&p===b&&(u[g].push(m),c[v]=!0))}}}for(var x in u)for(var w=u[x],E=w.length,S=0;S<E;S++){var M=w[S];if(M.source!==M.target)if(E===1&&r&&M.source!==M.target)M.type=r;else{M.type=t;var k=(S%2==0?1:-1)*(l["".concat(M.source,"|").concat(M.target,"|").concat(S)]?-1:1);M.curveOffset=E%2==1?k*Math.ceil(S/2)*a:k*(Math.floor(S/2)*a+n)}else i&&(M.type=i),M.loopCfg={position:s[S%8],dist:20*Math.floor(S/8)+50}}return e},uniqueId:ab},Symbol.toStringTag,{value:"Module"}));var IW=function(){function e(n){this.destroyed=!1,this.graph=n,this.destroyed=!1}return e.prototype.getViewCenter=function(){var n=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),i=t.get("height");return{x:(r-n[1]-n[3])/2+n[3],y:(i-n[0]-n[2])/2+n[0]}},e.prototype.fitCenter=function(n,t){var r,i=this.graph,o=i.get("group"),a=i.getNodes();if(a.length>i.get("optimizeThreshold")){var s=1/0,u=1/0,c=-1/0,l=-1/0;a.forEach(function(w){var E=w.getModel(),S=E.x,M=E.y;s>S&&(s=S),u>M&&(u=M),c<S&&(c=S),l<M&&(l=M)});var h=o.getMatrix()||[1,0,0,0,1,0,0,0,1],d=ic({x:s,y:u},h),f=d.x,p=d.y,g=ic({x:c,y:l},h),v=g.x,m=g.y;r={minX:f,maxX:v,minY:p,maxY:m,width:v-f,height:m-p,x:f,y:p}}else r=o.getCanvasBBox();if(r.width!==0&&r.height!==0){var y=this.getViewCenter(),b=r.x+r.width/2,x=r.y+r.height/2;i.translate(y.x-b,y.y-x,n,t)}},e.prototype.animatedFitView=function(n,t,r,i,o,a,s,u){var c=this.graph;r=r||{duration:500,easing:"easeCubic"};var l=i.x+o.x-a.x-i.minX,h=i.y+o.y-a.y-i.minY;if(!wo(l)&&!wo(h)){var d=Td([1,0,0,0,1,0,0,0,1],[["t",l,h]]);if(u){var f=c.get("minZoom"),p=c.get("maxZoom"),g=s;f&&s<f?g=f:p&&s>p&&(g=p);var v=Td(d,[["t",-o.x,-o.y],["s",g,g],["t",o.x,o.y]]),m=hh({animateCfg:r,callback:function(){n.setMatrix(v),c.emit("viewportchange",{action:"translate",matrix:d}),c.emit("viewportchange",{action:"zoom",matrix:v})}});n.stopAnimate(),n.setMatrix(t),n.animate(function(b){return{matrix:tb(t,v,b)}},m)}else{var y=hh({animateCfg:r,callback:function(){c.emit("viewportchange",{action:"translate",matrix:d})}});n.animate(function(b){return{matrix:tb(t,d,b)}},y)}}},e.prototype.fitView=function(n,t){var r,i=this.graph,o=this.getFormatPadding(),a=i.get("width"),s=i.get("height"),u=i.get("group"),c=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();var l=i.getNodes();if(l.length>i.get("optimizeThreshold")){var h=1/0,d=1/0,f=-1/0,p=-1/0;l.forEach(function(E){var S=E.getModel(),M=S.x,k=S.y;h>M&&(h=M),d>k&&(d=k),f<M&&(f=M),p<k&&(p=k)}),r={minX:h,maxX:f,minY:d,maxY:p,width:f-h,height:p-d,x:h,y:d}}else r=u.getCanvasBBox();if(r.width!==0&&r.height!==0){var g=this.getViewCenter(),v={x:r.x+r.width/2,y:r.y+r.height/2},m=(a-o[1]-o[3])/r.width,y=(s-o[0]-o[2])/r.height,b=m;if(m>y&&(b=y),n)this.animatedFitView(u,c,t,r,g,v,b,!0);else{var x=g.x-v.x,w=g.y-v.y;if(wo(x)||wo(w))return;i.translate(x,w),i.zoom(b,g)}}},e.prototype.fitViewByRules=function(n,t,r){var i,o=n.onlyOutOfViewPort,a=o!==void 0&&o,s=n.direction,u=s===void 0?"both":s,c=n.ratioRule,l=c===void 0?"min":c,h=this.graph,d=this.getFormatPadding(),f=h.get("width"),p=h.get("height"),g=h.get("group"),v=g.getMatrix()||[1,0,0,0,1,0,0,0,1];g.resetMatrix();var m=h.getNodes();if(m.length>h.get("optimizeThreshold")){var y=1/0,b=1/0,x=-1/0,w=-1/0;m.forEach(function(A){var D=A.getModel(),R=D.x,B=D.y;y>R&&(y=R),b>B&&(b=B),x<R&&(x=R),w<B&&(w=B)}),i={minX:y,maxX:x,minY:b,maxY:w,width:x-y,height:w-b,x:y,y:b}}else i=g.getCanvasBBox();if(i.width!==0&&i.height!==0){var E,S=this.getViewCenter(),M={x:i.x+i.width/2,y:i.y+i.height/2},k=(f-d[1]-d[3])/i.width,_=(p-d[0]-d[2])/i.height;if(E=u==="x"?k:u==="y"?_:l==="max"?Math.max(k,_):Math.min(k,_),a&&(E=E<1?E:1),t)this.animatedFitView(g,v,r,i,S,M,E,!0);else{var C=h.getZoom()*E,T=h.get("minZoom");C<T&&(C=T),h.translate(S.x-M.x,S.y-M.y),h.zoomTo(C,S)}}},e.prototype.getFormatPadding=function(){var n=this.graph.get("fitViewPadding");return sb(n)},e.prototype.focusPoint=function(n,t,r){var i=this,o=this.getViewCenter(),a=this.getPointByCanvas(o.x,o.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(a.x-n.x)*s[0],c=(a.y-n.y)*s[4],l=0,h=0,d=0,f=0;this.graph.get("canvas").animate(function(p){d=u*p,f=c*p,i.graph.translate(d-l,f-h),l=d,h=f},P({},r))}else this.graph.translate((a.x-n.x)*s[0],(a.y-n.y)*s[4])},e.prototype.getPointByCanvas=function(n,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),yN({x:n,y:t},r)},e.prototype.getPointByClient=function(n,t){var r=this.graph.get("canvas").getPointByClient(n,t);return this.getPointByCanvas(r.x,r.y)},e.prototype.getClientByPoint=function(n,t){var r=this.graph.get("canvas"),i=this.getCanvasByPoint(n,t),o=r.getClientByPoint(i.x,i.y);return{x:o.x,y:o.y}},e.prototype.getCanvasByPoint=function(n,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),ic({x:n,y:t},r)},e.prototype.focus=function(n,t,r){if(he(n)&&(n=this.graph.findById(n)),n){var i=0,o=0;if(n.getType&&n.getType()==="edge"){var a=n.getSource().get("group").getMatrix(),s=n.getTarget().get("group").getMatrix();a&&s?(i=(a[6]+s[6])/2,o=(a[7]+s[7])/2):(a||s)&&(i=a?a[6]:s[6],o=a?a[7]:s[7])}else{var u=n.get("group").getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),i=u[6],o=u[7]}this.focusPoint({x:i,y:o},t,r)}},e.prototype.focusItems=function(n,t,r,i){if(n.length){var o=this.graph,a=this.getFormatPadding(),s=o.get("width"),u=o.get("height"),c=o.get("group"),l=c.getMatrix()||[1,0,0,0,1,0,0,0,1];c.resetMatrix();for(var h={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},d=0,f=n;d<f.length;d++){var p=f[d].getBBox();p.minX<h.minX&&(h.minX=p.minX),p.minY<h.minY&&(h.minY=p.minY),p.maxX>h.maxX&&(h.maxX=p.maxX),p.maxY>h.maxY&&(h.maxY=p.maxY)}if(h.x=h.minX,h.y=h.minY,h.width=h.maxX-h.minX,h.height=h.maxY-h.minY,h.width!==0&&h.height!==0){var g=this.getViewCenter(),v={x:h.x+h.width/2,y:h.y+h.height/2},m=(s-a[1]-a[3])/h.width,y=(u-a[0]-a[2])/h.height,b=m;m>y&&(b=y),r?this.animatedFitView(c,l,i,h,g,v,b,t):(o.translate(g.x-v.x,g.y-v.y),t&&o.zoom(b,g))}}},e.prototype.changeSize=function(n,t){var r=this.graph;if(!Ue(n)||!Ue(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:n,height:t}),r.get("canvas").changeSize(n,t),r.get("plugins").forEach(function(i){i.get("gridContainer")&&i.positionInit()})},e.prototype.destroy=function(){this.graph=null,this.destroyed=!1},e}();function ub(e){return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ub(e)}function RN(e){if(typeof e!="string")return e;var n=function(w){if(typeof w!="string")return w;try{return JSON.parse(w.trim())}catch(E){return w.trim()}},t=n(e);if(typeof t!="string")return t;for(var r=function(w){return w[w.length-1]},i=e.trim(),o=[],a=[],s=function(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];return w.some(function(S){return r(a)===S})},u=null,c=0,l="";c<i.length;){var h=i[c],d=s('"',"'");if(d||h.trim()){var f=i[c-1]==="\\",p=s("}"),g=s("]"),v=s(","),m=r(o);if(d)if(r(a)!==h||f)l+=h;else{a.pop();var y=n(l);m.push(y),u=y,l=""}else if(g&&h===",")l&&(m.push(n(l)),l="");else if(p&&h===":")a.push(","),l&&(m.push(l),l="");else if(v&&h===",")l&&(m.push(n(l)),l=""),a.pop();else if(h==="}"&&(p||v)){l&&(m.push(n(l)),l=""),v&&a.pop();for(var b={},x=1;x<m.length;x+=2)b[m[x-1]]=m[x];o.pop(),o.length&&r(o).push(b),a.pop(),u=b}else h==="]"&&g?(l&&(m.push(n(l)),l=""),o.pop(),o.length&&r(o).push(m),a.pop(),u=m):h==="{"?(o.push([]),a.push("}")):h==="["?(o.push([]),a.push("]")):h==='"'?a.push('"'):h==="'"?a.push("'"):l+=h;c+=1}else c+=1}return u||l}function jN(e,n){var t={},r=e.getAttributeNames&&e.getAttributeNames()||[],i=e.children&&Array.from(e.children).map(function(s){return jN(s,n)}),o={},a=e.tagName?e.tagName.toLowerCase():"group";return a==="text"&&(t.text=e.innerText),o.type=a,a==="img"&&(o.type="image"),Array.from(r).forEach(function(s){var u=function(h){return h.split("-").reduce(function(d,f){return d+f.charAt(0).toUpperCase()+f.slice(1)})}(s),c=e.getAttribute(s);try{if(u==="style"||u==="attrs"){var l=RN(c);t=P(P({},t),l)}else o[u]=RN(c)}catch(h){if(u==="style")throw h;o[u]=c}}),o.attrs=t,n&&n.style&&o.name&&ub(n.style[o.name])==="object"&&(o.attrs=P(P({},o.attrs),n.style[o.name])),n&&n.style&&o.keyshape&&(o.attrs=P(P({},o.attrs),n.style)),i.length&&(o.children=i),o}function zN(e,n){var t;n===void 0&&(n={x:0,y:0});var r=P({x:0,y:0,width:0,height:0},n);if(!((t=e.children)===null||t===void 0)&&t.length){var i=e.attrs,o=i===void 0?{}:i,a=o.marginTop,s=P({},n);a&&(s.y+=a);for(var u=0;u<e.children.length;u++){e.children[u].attrs.key="".concat(o.key||"root"," -").concat(u," ");var c=zN(e.children[u],s);if(c.bbox){var l=c.bbox;c.attrs.next==="inline"?s.x+=c.bbox.width:s.y+=c.bbox.height,l.width+l.x>r.width&&(r.width=l.width+l.x),l.height+l.y>r.height&&(r.height=l.height+l.y)}}}return e.bbox=function(h,d,f){var p,g,v=h.attrs,m=v===void 0?{}:v,y={x:d.x||0,y:d.y||0,width:f.width||0,height:f.height||0};switch(h.type){case"maker":case"circle":m.r&&(g=2*m.r,p=2*m.r);break;case"text":m.text&&(g=PN(m.text,m.fontSize||12)[0],p=16,y.y+=p,y.height=p,y.width=g,h.attrs=P({fontSize:12,fill:"#000"},m));break;default:m.width&&(g=m.width),m.height&&(p=m.height)}return p>=0&&(y.height=p),g>=0&&(y.width=g),m.marginTop&&(y.y+=m.marginTop),m.marginLeft&&(y.x+=m.marginLeft),y}(e,n,r),e.attrs=P(P({},e.attrs),e.bbox),e}function FN(e,n){var t,r,i,o,a=(e||{}).type,s=((n==null?void 0:n.attrs)||{}).key;if(s&&e&&(e.attrs.key=s),!e&&n)return{action:"delete",val:n,type:a,key:s};if(e&&!n)return{action:"add",val:e,type:a};if(!e&&!n)return{action:"same",type:a};var u=[];if(((t=e.children)===null||t===void 0?void 0:t.length)>0||((r=n.children)===null||r===void 0?void 0:r.length)>0)for(var c=Math.max((i=e.children)===null||i===void 0?void 0:i.length,(o=n.children)===null||o===void 0?void 0:o.length),l=n.children||[],h=e.children||[],d=0;d<c;d+=1)u.push(FN(h[d],l[d]));var f=Object.keys(n.attrs),p=Object.keys(e.attrs);return n.type!==e.type?{action:"restructure",nowTarget:e,formerTarget:n,key:s,children:u}:f.filter(function(g){return g!=="children"}).some(function(g){return e.attrs[g]!==n.attrs[g]||!p.includes(g)})?{action:"change",val:e,children:u,type:a,key:s}:{action:"same",children:u,type:a,key:s}}function GN(e){var n={},t=function(r){var i=function(s){return function(u){for(var c=s.length,l=[],h=0,d="";h<c;)if(s[h]==="{"&&s[h+1]==="{")l.push(d),d="",h+=2;else if(s[h]==="}"&&s[h+1]==="}"){if(l.length){var f=l.pop();d=Hi(u,d,f.endsWith("=")?'"{'.concat(d,'}"'):d),l.push(f+d)}h+=2,d=""}else d+=s[h],h+=1;return l.push(d),l.map(function(p,g){return l[g-1]&&l[g-1].endsWith("=")?'"{'.concat(p,'}"'):p}).join("")}}(typeof e=="function"?e(r):e)(r),o=document.createElement("div");o.innerHTML=i;var a=zN(jN(o.children[0],r));return o.remove(),a};return{draw:function(r,i){var o=t(r),a=i;return function s(u){var c=u.attrs,l=c===void 0?{}:c,h=u.bbox,d=u.type,f=u.children,p=yn(u,["attrs","bbox","type","children"]);if(u.type!=="group"){var g=i.addShape(u.type,P({attrs:l,origin:{bbox:h,type:d,children:f}},p));u.keyshape&&(a=g)}u.children&&u.children.forEach(function(v){return s(v)})}(o),n[r.id]=[o],a},update:function(r,i){n[r.id]||(n[r.id]=[]);var o=i.getContainer(),a=o.get("children"),s=t(r),u=FN(s,n[r.id].pop()),c=function h(d){var f;d.type!=="group"&&o.addShape(d.type,{attrs:d.attrs}),!((f=d.children)===null||f===void 0)&&f.length&&d.children.map(function(p){return h(p)})},l=function h(d){var f,p=a.find(function(g){return g.attrs.key===d.attrs.key});p&&o.removeChild(p),!((f=d.children)===null||f===void 0)&&f.length&&d.children.map(function(g){return h(g)})};(function h(d){var f=d.key;if(d.type!=="group"){var p=a.find(function(v){return v.attrs.key===f});switch(d.action){case"change":if(p){var g=d.val.keyshape?i.getOriginStyle():{};p.attr(P(P({},g),d.val.attrs))}break;case"add":c(d.val);break;case"delete":l(d.val);break;case"restructure":l(d.formerTarget),c(d.nowTarget)}}d.children&&d.children.forEach(function(v){return h(v)})})(u),n[r.id].push(s)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var cb={};function YN(e){return cb[e]||(cb[e]=Io(e)),cb[e]}var TW={defaultShapeType:"defaultType",className:null,getShape:function(e){var n=this;return n[e]||n[n.defaultShapeType]||n["simple-circle"]},draw:function(e,n,t){var r=this.getShape(e);t.shapeMap={};var i=r.draw(n,t);return r.afterDraw&&r.afterDraw(n,t,i),i},baseUpdate:function(e,n,t,r){var i,o,a=this.getShape(e);a.update&&(a.mergeStyle=(i=a.getOptions)===null||i===void 0?void 0:i.call(a,n,r),(o=a.update)===null||o===void 0||o.call(a,n,t,r)),a.afterUpdate&&a.afterUpdate(n,t)},setState:function(e,n,t,r){this.getShape(e).setState(n,t,r)},shouldUpdate:function(e){return!!this.getShape(e).update},getControlPoints:function(e,n){return this.getShape(e).getControlPoints(n)},getAnchorPoints:function(e,n){return this.getShape(e).getAnchorPoints(n)}},lb={options:{},draw:function(e,n){return this.drawShape(e,n)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var n=this.options.anchorPoints;return e.anchorPoints||n}},En=function(){function e(){}return e.registerFactory=function(n,t){var r=YN(n),i=P(P({},TW),t);return e[r]=i,i.className=r,i},e.getFactory=function(n){return e[YN(n)]},e.registerNode=function(n,t,r){var i,o=e.Node;if(typeof t=="string"||typeof t=="function"){var a=GN(t);i=P(P({},o.getShape("single-node")),a)}else if(t.jsx)a=GN(t.jsx),i=P(P(P({},o.getShape("single-node")),a),t);else{o.getShape(r);var s=r?o.getShape(r):lb;i=P(P({},s),t)}return i.type=n,i.itemType="node",o[n]=i,i},e.registerEdge=function(n,t,r){var i=e.Edge,o=r?i.getShape(r):lb,a=P(P({},o),t);return a.type=n,a.itemType="edge",i[n]=a,a},e.registerCombo=function(n,t,r){var i=e.Combo,o=r?i.getShape(r):lb,a=P(P({},o),t);return a.type=n,a.itemType="combo",i[n]=a,a},e}();En.registerFactory("node",{defaultShapeType:"circle"}),En.registerFactory("edge",{defaultShapeType:"line"}),En.registerFactory("combo",{defaultShapeType:"circle"});var hb="bboxCache",db="bboxCanvasCache",XN=function(){function e(n){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),n);var r=this.get("model"),i=r.id,o=this.get("type");i===void 0?i=ab(o):typeof i!="string"&&(i=String(i)),this.get("model").id=i,this.set("id",i);var a=n.group;a&&(a.set("item",this),a.set("id",i)),this.init(),this.draw();var s=r.shape||r.type||(o==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var c=u[s].options;if(c&&c.stateStyles){var l=this.get("styles")||r.stateStyles;l=Zt({},c.stateStyles,l),this.set("styles",l)}}}return e.prototype.calculateBBox=function(){var n=this.get("keyShape"),t=this.get("group"),r=$p(n,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},e.prototype.calculateCanvasBBox=function(){var n=this.get("keyShape"),t=this.get("group"),r=$p(n,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},e.prototype.drawInner=function(){var n=this,t=n.get("shapeFactory"),r=n.get("group"),i=n.get("model");r.clear();var o=i.visible;if(o===void 0||o||n.changeVisibility(o),t){n.updatePosition(i);var a=n.getShapeCfg(i),s=a.type,u=t.draw(s,a,r);u&&(n.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},e.prototype.setOriginStyle=function(){var n=this.get("group"),t=n.get("children"),r=this.getKeyShape(),i=this,o=r.get("name");if(this.get("originStyle")){var a=this.get("originStyle");o&&!a[o]&&(a[o]={});var s=this.getCurrentStatesStyle(),u=function(v){var m=t[v],y=m.get("name"),b=m.attr();if(y&&y!==o){var x=s[y];a[y]||(a[y]={}),x?Object.keys(b).forEach(function(S){var M=b[S];M!==x[S]&&(a[y][S]=M)}):a[y]=m.get("type")!=="image"?_t(b):i.getShapeStyleByName(y)}else{var w=m.attr(),E={};Object.keys(s).forEach(function(S){var M=s[S];S!==o&&dn(M)||(E[S]=M)}),Object.keys(w).forEach(function(S){var M=w[S];E[S]!==M&&(o?a[o][S]=M:a[S]=M)})}};for(l=0;l<t.length;l++)u(l);delete a.path,delete a.matrix,delete a.x,delete a.y,a[o]&&(delete a[o].x,delete a[o].y,delete a[o].matrix,delete a[o].path),i.set("originStyle",a)}else{for(var c={},l=0;l<t.length;l++){var h=t[l],d=h.get("type"),f=h.get("name");if(f&&f!==o)c[f]=d!=="image"?_t(h.attr()):i.getShapeStyleByName(f),d==="text"&&c[f]&&(delete c[f].x,delete c[f].y,delete c[f].matrix);else{var p=i.getShapeStyleByName();if(delete p.path,delete p.matrix,o)if(f)c[o]=p;else{var g=ab("shape");h.set("name",g),n.shapeMap[g]=h,c[g]=d!=="image"?_t(h.attr()):i.getShapeStyleByName(f)}else Object.assign(c,p)}}i.set("originStyle",c)}},e.prototype.restoreStates=function(n,t){var r=this;re(r.get("states"),function(i){n.setState(t,i,!0,r)})},e.prototype.init=function(){var n=En.getFactory(this.get("type"));this.set("shapeFactory",n)},e.prototype.get=function(n){return this._cfg[n]},e.prototype.set=function(n,t){dn(n)?this._cfg=P(P({},this._cfg),n):this._cfg[n]=t},e.prototype.getDefaultCfg=function(){return{}},e.prototype.clearCache=function(){this.set(hb,null),this.set(db,null)},e.prototype.beforeDraw=function(){},e.prototype.afterDraw=function(){},e.prototype.afterUpdate=function(){},e.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},e.prototype.getShapeStyleByName=function(n){var t,r=this.get("group");if(t=n?r.shapeMap[n]||r.find(function(o){return o.get("name")===n}):this.getKeyShape()){var i={};return re(t.attr(),function(o,a){(a!=="img"||he(o))&&(i[a]=o)}),i}return{}},e.prototype.getShapeCfg=function(n,t){var r=this.get("styles");if(r){var i=n;return i.style=P(P({},r),n.style),i}return n},e.prototype.getStateStyle=function(n){var t=this.get("styles");return t&&t[n]},e.prototype.getOriginStyle=function(){return this.get("originStyle")},e.prototype.getCurrentStatesStyle=function(){var n=this,t={},r=n.getStates();return r&&r.length?(re(n.getStates(),function(i){t=Object.assign(t,n.getStateStyle(i))}),t):this.get("originStyle")},e.prototype.setState=function(n,t){var r=this.get("states"),i=this.get("shapeFactory"),o=n,a=n;he(t)&&(o="".concat(n,":").concat(t),a="".concat(n,":"));var s=r;if(qa(t)){var u=r.indexOf(a);if(t){if(u>-1)return;r.push(o)}else u>-1&&r.splice(u,1)}else if(he(t)){var c=r.filter(function(h){return h.includes(a)});c.length>0&&this.clearStates(c),s=s.filter(function(h){return!h.includes(a)}),s.push(o),this.set("states",s)}if(i){var l=this.get("model").type;i.setState(l,n,t,this)}},e.prototype.clearStates=function(n){var t=this,r=t.getStates(),i=t.get("shapeFactory"),o=t.get("model").type;n||(n=r),he(n)&&(n=[n]);var a=r.filter(function(s){return n.indexOf(s)===-1});t.set("states",a),n.forEach(function(s){i.setState(o,s,!1,t)})},e.prototype.setOptimize=function(n){this.optimize=n},e.prototype.getContainer=function(){return this.get("group")},e.prototype.getKeyShape=function(){return this.get("keyShape")},e.prototype.getModel=function(){return this.get("model")},e.prototype.getType=function(){return this.get("type")},e.prototype.getID=function(){return this.get("id")},e.prototype.isItem=function(){return!0},e.prototype.getStates=function(){return this.get("states")},e.prototype.hasState=function(n){return this.getStates().indexOf(n)>=0},e.prototype.refresh=function(n){var t=this.get("model");this.updatePosition(t),this.updateShape(n),this.afterUpdate(),this.clearCache()},e.prototype.getUpdateType=function(n){},e.prototype.update=function(n,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(n);else{var i=r.visible,o=n.visible;i!==o&&o!==void 0&&this.changeVisibility(o);var a={x:r.x,y:r.y};n.x=isNaN(+n.x)?r.x:+n.x,n.y=isNaN(+n.y)?r.y:+n.y;var s=this.get("styles");n.stateStyles&&(ut(s,n.stateStyles),delete n.stateStyles),Object.assign(r,n),a.x===n.x&&a.y===n.y||this.updatePosition(n),this.updateShape(t)}this.afterUpdate(),this.clearCache()},e.prototype.updateShape=function(n){var t=this.get("shapeFactory"),r=this.get("model"),i=r.type;if(t.shouldUpdate(i)&&i===this.get("currentShape")){var o=this.getShapeCfg(r,n);t.baseUpdate(i,o,this,n),n!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,i)},e.prototype.updatePosition=function(n){var t=this.get("model"),r=isNaN(+n.x)?+t.x:+n.x,i=isNaN(+n.y)?+t.y:+n.y,o=this.get("group");if(isNaN(r)||isNaN(i))return!1;t.x=r,t.y=i;var a=o.getMatrix();return(!a||a[6]!==r||a[7]!==i)&&(o.resetMatrix(),bN(o,{x:r,y:i}),this.clearCache(),!0)},e.prototype.getBBox=function(){var n=this.get(hb);return n||(n=this.calculateBBox(),this.set(hb,n)),n},e.prototype.getCanvasBBox=function(){var n=this.get(db);return n||(n=this.calculateCanvasBBox(),this.set(db,n)),n},e.prototype.toFront=function(){this.get("group").toFront()},e.prototype.toBack=function(){this.get("group").toBack()},e.prototype.show=function(){this.changeVisibility(!0)},e.prototype.hide=function(){this.changeVisibility(!1)},e.prototype.changeVisibility=function(n){var t=this.get("group");n?t.show():t.hide(),this.set("visible",n)},e.prototype.isVisible=function(){return this.get("visible")},e.prototype.enableCapture=function(n){var t=this.get("group");t&&t.set("capture",n)},e.prototype.destroy=function(){if(!this.destroyed){var n=this.get("animate"),t=this.get("group");n&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},e}(),eg={source:"start",target:"end"},Eo="Node",ac="Point",OW=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},n.prototype.setEnd=function(t,r){var i=eg[t]+ac,o=t+Eo,a=this.get(o);a&&!a.destroyed&&a.removeEdge(this),dn(r)?(this.set(i,r),this.set(o,null)):r&&(r.addEdge(this),this.set(o,r),this.set(i,null))},n.prototype.getLinkPoint=function(t,r,i){var o=eg[t]+ac,a=t+Eo,s=this.get(o);if(!s){var u=this.get(a),c=t+"Anchor",l=this.getPrePoint(t,i),h=r[c];ht(h)||(s=u.getLinkPointByAnchor(h)),s=s||u.getLinkPoint(l),ht(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},n.prototype.getPrePoint=function(t,r){if(r&&r.length)return r[t==="source"?0:r.length-1];var i=t==="source"?"target":"source";return this.getEndPoint(i)},n.prototype.getEndPoint=function(t){var r=t+Eo,i=eg[t]+ac,o=this.get(r);return o&&!o.destroyed?o.get("model"):this.get(i)},n.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),i=this.getEndPoint("target"),o=this.get("shapeFactory"),a=t.type;return o.getControlPoints(a,{startPoint:r,endPoint:i})},n.prototype.getEndCenter=function(t){var r=t+Eo,i=eg[t]+ac,o=this.get(r);if(o){var a=o.getBBox();return{x:a.centerX,y:a.centerY}}return this.get(i)},n.prototype.init=function(){e.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},n.prototype.getShapeCfg=function(t,r){var i=this,o=i.get("linkCenter"),a=r!=null&&r.includes("move")?t:e.prototype.getShapeCfg.call(this,t);if(o)a.startPoint=i.getEndCenter("source"),a.endPoint=i.getEndCenter("target");else{var s=a.controlPoints||i.getControlPointsByCenter(a);a.startPoint=i.getLinkPoint("source",t,s),a.endPoint=i.getLinkPoint("target",t,s)}return a.sourceNode=i.get("sourceNode"),a.targetNode=i.get("targetNode"),a},n.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(Eo)),i=this.get("target".concat(Eo));return r?delete t["source".concat(Eo)]:t.source=this.get("start".concat(ac)),i?delete t["target".concat(Eo)]:t.target=this.get("end".concat(ac)),he(t.source)||dn(t.source)||(t.source=t.source.getID()),he(t.target)||dn(t.target)||(t.target=t.target.getID()),t},n.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},n.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},n.prototype.getSource=function(){return this.get("source")},n.prototype.getTarget=function(){return this.get("target")},n.prototype.updatePosition=function(){return!1},n.prototype.update=function(t,r){r===void 0&&(r=void 0);var i=this.get("model"),o=i.visible,a=t.visible;o!==a&&a!==void 0&&this.changeVisibility(a);var s=this.get("source"),u=this.get("target");if(s&&!s.destroyed&&u&&!u.destroyed){var c=this.get("styles");t.stateStyles&&(ut(c,t.stateStyles),delete t.stateStyles),Object.assign(i,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},n.prototype.destroy=function(){var t=this.get("source".concat(Eo)),r=this.get("target".concat(Eo));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),e.prototype.destroy.call(this)},n}(XN),fb="anchorPointsCache",UN=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getNearestPoint=function(t,r){for(var i=0,o=t[0],a=Hp(t[0],r),s=0;s<t.length;s++){var u=t[s],c=Hp(u,r);c<a&&(o=u,a=c,i=s)}return o.anchorIndex=i,o},n.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},n.prototype.getEdges=function(){return this.get("edges")},n.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},n.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},n.prototype.getNeighbors=function(t){var r=this,i=this.get("edges");return t==="target"?i.filter(function(o){return o.getSource()===r}).map(function(o){return o.getTarget()}):t==="source"?i.filter(function(o){return o.getTarget()===r}).map(function(o){return o.getSource()}):i.map(function(o){return o.getSource()===r?o.getTarget():o.getSource()})},n.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},n.prototype.getLinkPoint=function(t){var r,i,o=this.get("keyShape").get("type"),a=this.get("type"),s=this.getBBox();a==="combo"?(r=s.centerX||(s.maxX+s.minX)/2,i=s.centerY||(s.maxY+s.minY)/2):(r=s.centerX,i=s.centerY);var u,c=this.getAnchorPoints();switch(o){case"circle":u=vN({x:r,y:i,r:s.width/2},t);break;case"ellipse":u=mN({x:r,y:i,rx:s.width/2,ry:s.height/2},t);break;default:u=gN(s,t)}var l=u;return c.length&&(l||(l=t),l=this.getNearestPoint(c,l)),l||(l={x:r,y:i}),l},n.prototype.getAnchorPoints=function(){var t=this.get(fb);if(!t){t=[];var r=this.get("shapeFactory"),i=this.getBBox(),o=this.get("model"),a=this.getShapeCfg(o),s=o.type;re(r.getAnchorPoints(s,a)||[],function(u,c){var l={x:i.minX+u[0]*i.width,y:i.minY+u[1]*i.height,anchorIndex:c};t.push(l)}),this.set(fb,t)}return t},n.prototype.addEdge=function(t){this.get("edges").push(t)},n.prototype.lock=function(){this.set("locked",!0)},n.prototype.unlock=function(){this.set("locked",!1)},n.prototype.hasLocked=function(){return this.get("locked")},n.prototype.removeEdge=function(t){var r=this.getEdges(),i=r.indexOf(t);i>-1&&r.splice(i,1)},n.prototype.clearCache=function(){this.set("bboxCache",null),this.set(fb,null)},n.prototype.getUpdateType=function(t){var r,i,o,a,s;if(t){var u=!ht(t.x),c=!ht(t.y),l=Object.keys(t);return l.length===1&&(u||c)||l.length===2&&u&&c?"move":Ue(t.x)||Ue(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((i=t==null?void 0:t.style)===null||i===void 0)&&i.width||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.height||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry)?"bbox|label":l.includes("label")||l.includes("labelCfg")?"style|label":"style"}},n.prototype.setState=function(t,r){var i=this;this.optimize?e.prototype.setState.call(this,t,r):this.runWithBBoxAffected(function(){return e.prototype.setState.call(i,t,r)})},n.prototype.clearStates=function(t){var r=this;this.optimize?e.prototype.clearStates.call(this,t):this.runWithBBoxAffected(function(){return e.prototype.clearStates.call(r,t)})},n.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],i=this.getKeyShape().attr(),o={};Object.keys(this.getKeyShape().attr()).forEach(function(c){r.includes(c)&&(o[c]=i[c])}),t();for(var a=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(a[u]!==o[u]){this.clearCache(),this.getEdges().forEach(function(c){return c.refresh()});break}}},n}(XN),WN="bboxCache",VN="bboxCanvasCache",tg="sizeCache",HN="anchorPointsCache",NW=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return At(n,e),n.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},n.prototype.getShapeCfg=function(t){var r=this.get("styles"),i=this.get("bbox");if(r&&i){var o=t,a=Ue(t.size)?[t.size,t.size]:t.size,s=Ue(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=a||s||wt.defaultCombo.size,c={r:(Math.max(i.width,i.height)||Math.max(u[0],u[1]))/2,width:i.width||u[0],height:i.height||u[1]};o.style=P(P(P({},r),t.style),c);var l=t.padding||wt.defaultCombo.padding;return Ue(l)?(c.r+=l,c.width+=2*l,c.height+=2*l):(c.r=c.r+Math.max.apply(Math,l),c.width+=l[1]+l[3]||2*l[1],c.height+=l[0]+l[2]||2*l[0]),this.set(tg,c),o}return t},n.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),i=this.get(WN)||{},o=i.x,a=i.x,s=this.get(tg),u=$p(t,r);return u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2,s?(s.width=Math.max(s.width,u.width),s.height=Math.max(s.height,u.height),this.set(tg,s),t.get("type")==="circle"?(u.width=2*s.r,u.height=2*s.r):(u.width=s.width,u.height=s.height),u.minX=u.centerX-u.width/2,u.minY=u.centerY-u.height/2,u.maxX=u.centerX+u.width/2,u.maxY=u.centerY+u.height/2):(u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2),u.x=u.minX,u.y=u.minY,u.x===o&&u.y===a||this.set(HN,null),u}},n.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},n.prototype.getNodes=function(){return this.get("nodes")},n.prototype.getCombos=function(){return this.get("combos")},n.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return!1}return!0},n.prototype.addCombo=function(t){return this.get("combos").push(t),!0},n.prototype.addNode=function(t){return this.get("nodes").push(t),!0},n.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return!1}return!0},n.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),i=r.indexOf(t);return i>-1&&(r.splice(i,1),!0)}},n.prototype.removeNode=function(t){if(t){var r=this.getNodes(),i=r.indexOf(t);return i>-1&&(r.splice(i,1),!0)}},n.prototype.getUpdateType=function(t){},n.prototype.getBBox=function(){return this.set(VN,null),this.calculateCanvasBBox()},n.prototype.clearCache=function(){this.set(WN,null),this.set(VN,null),this.set(HN,null)},n.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(tg,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},n}(UN),ng="node",rg="edge",qN="vedge",dh="combo",ZN="Mapper",Jo="stateStyles",PW=function(){function e(n){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=ru(function(r){var i=t.graph;if(i&&!i.get("destroyed")){var o=t.edgeToBeUpdateMap;if(o){var a=Object.values(o);a.length&&(a.forEach(function(s){var u=s.edge;if(u&&!u.destroyed){var c=u.getSource(),l=u.getTarget();c&&!c.destroyed&&l&&!l.destroyed&&u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=n,this.destroyed=!1}return e.prototype.addItem=function(n,t){var r=this.graph,i=n===qN?rg:n,o=r.get("".concat(i,"Group"))||r.get("group"),a=Io(i),s=null,u=r.get(i+Io(Jo))||{},c=r.get("default"+a);t[Jo]&&(u=t[Jo]),c&&re(c,function(E,S){Tn(E)&&!at(E)?t[S]=Zt({},E,t[S]):at(E)?t[S]=t[S]||_t(c[S]):t[S]=t[S]||c[S]});var l=r.get(i+ZN);if(l){var h=l(t);h[Jo]&&(u=h[Jo],delete h[Jo]),re(h,function(E,S){Tn(E)&&!at(E)?t[S]=Zt({},t[S],E):t[S]=h[S]||t[S]})}if(r.emit("beforeadditem",{type:n,model:t}),n===rg||n===qN){var d=void 0,f=void 0;if(d=t.source,f=t.target,d&&he(d)&&(d=r.findById(d)),f&&he(f)&&(f=r.findById(f)),!d||!f)return;d.getType&&d.getType()==="combo"&&(t.isComboEdge=!0),f.getType&&f.getType()==="combo"&&(t.isComboEdge=!0),s=new OW({model:t,source:d,target:f,styles:u,linkCenter:r.get("linkCenter"),group:o.addGroup()})}else if(n===ng)s=new UN({model:t,styles:u,group:o.addGroup()});else if(n===dh){var p=t.children,g=Qp(p,r),v=void 0,m=void 0;if(isNaN(g.x)?isNaN(t.x)&&(v=100*Math.random()):v=g.x,isNaN(g.y)?isNaN(t.y)&&(m=100*Math.random()):m=g.y,isNaN(t.x)||isNaN(t.y))t.x=v,t.y=m;else{var y=t.x-v,b=t.y-m;this.updateComboSucceeds(t.id,y,b,p)}var x=o.addGroup();x.setZIndex(t.depth),s=new NW({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?Qp([],r):g,group:x}),t.collapsed||s.getKeyShape().get("type")!=="circle"||(g.width=Math.hypot(g.height,g.width),g.height=g.width,s.set("bbox",g),s.refresh());var w=s.getModel();(p||[]).forEach(function(E){var S=r.findById(E.id);s.addChild(S),E.depth=w.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(n,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},e.prototype.updateItem=function(n,t){var r,i,o=this,a=this.graph;if(he(n)&&(n=a.findById(n)),n&&!n.destroyed){var s="";n.getType&&(s=n.getType());var u=a.get(s+ZN),c=n.getModel(),l=c.x,h=c.y,d=n.getUpdateType(t);if(u){var f=u(Zt({},c,t)),p=Zt({},c,f,t);f[Jo]&&(n.set("styles",p[Jo]),delete p[Jo]),re(p,function(S,M){t[M]=S})}else re(t,function(S,M){c[M]&&Tn(S)&&!at(S)&&(t[M]=P(P({},c[M]),t[M]))});if(a.emit("beforeupdateitem",{item:n,cfg:t}),s===rg){if(t.source){var g=t.source;he(g)&&(g=a.findById(g)),n.setSource(g)}if(t.target){var v=t.target;he(v)&&(v=a.findById(v)),n.setTarget(v)}n.update(t)}else if(s===ng){n.update(t,d);var m=n.getEdges();d==="move"?re(m,function(S){o.edgeToBeUpdateMap[S.getID()]={edge:S,updateType:d},o.throttleRefresh()}):d!=null&&d.includes("bbox")&&re(m,function(S){S.refresh(d)})}else if(s===dh){if(n.update(t,d),!isNaN(t.x)||!isNaN(t.y)){var y=t.x-l||0,b=t.y-h||0;this.updateComboSucceeds(c.id,y,b)}var x=n.getEdges();if((d!=null&&d.includes("bbox")||d==="move")&&s===dh){var w=n.get("shapeFactory"),E=c.type||"circle";(c.animate===void 0||t.animate===void 0?!((i=(r=w[E])===null||r===void 0?void 0:r.options)===null||i===void 0)&&i.animate:c.animate||t.animate)?setTimeout(function(){if(n&&!n.destroyed){var S=n.getKeyShape();S&&!S.destroyed&&re(x,function(M){M&&!M.destroyed&&M.refresh()})}},201):re(x,function(S){S.refresh()})}}n.setOptimize(a.getNodes().length>a.get("optimizeThreshold")),a.emit("afterupdateitem",{item:n,cfg:t})}},e.prototype.updateCombo=function(n,t,r){var i,o,a=this,s=this.graph;if(he(n)&&(n=s.findById(n)),n&&!n.destroyed){var u=n.getModel(),c=Qp(t,s,n),l=c.x,h=c.y;n.set("bbox",c);var d=l,f=h;r?(d=isNaN(u.x)?l:u.x,f=isNaN(u.y)?h:u.y):(d=isNaN(l)?u.x:l,f=isNaN(h)?u.y:h),n.update({x:d,y:f});var p=n.get("shapeFactory"),g=u.type||"circle";(u.animate===void 0?!((o=(i=p[g])===null||i===void 0?void 0:i.options)===null||o===void 0)&&o.animate:u.animate)?setTimeout(function(){if(n&&!n.destroyed){var v=n.getKeyShape();v&&!v.destroyed&&(n.getShapeCfg(u),a.updateComboEdges(n))}},201):this.updateComboEdges(n)}},e.prototype.updateComboEdges=function(n){for(var t,r,i=n.getEdges()||[],o=0;o<i.length;o++){var a=i[o];a!=null&&a.destroyed||!((t=a==null?void 0:a.getSource())===null||t===void 0)&&t.destroyed||!((r=a==null?void 0:a.getTarget())===null||r===void 0)&&r.destroyed||a.refresh()}},e.prototype.collapseCombo=function(n,t){t===void 0&&(t=!0);var r=this.graph;he(n)&&(n=r.findById(n));var i=n.getChildren();i.nodes.forEach(function(o){r.hideItem(o,t)}),i.combos.forEach(function(o){r.hideItem(o,t)})},e.prototype.updateComboSucceeds=function(n,t,r,i){var o=this;i===void 0&&(i=[]);var a=this.graph;if(t||r){var s=i;if(!(s!=null&&s.length)){var u=a.get("comboTrees");u==null||u.forEach(function(c){_r(c,function(l){return l.id!==n||(s=l.children,!1)})})}s==null||s.forEach(function(c){var l=a.findById(c.id);if(l){var h=l.getModel();o.updateItem(c.id,{x:(h.x||0)+t,y:(h.y||0)+r})}})}},e.prototype.expandCombo=function(n,t){t===void 0&&(t=!0);var r=this.graph;he(n)&&(n=r.findById(n));var i=n.getChildren(),o=new Set;i.nodes.forEach(function(a){r.showItem(a,t),a.getEdges().forEach(function(s){return o.add(s)})}),i.combos.forEach(function(a){a.getModel().collapsed?a.show():r.showItem(a,t),a.getEdges().forEach(function(s){return o.add(s)})}),o.forEach(function(a){return a.refresh()})},e.prototype.removeItem=function(n){var t=this,r=this.graph;if(he(n)&&(n=r.findById(n)),n&&!n.destroyed){var i=_t(n.getModel()),o="";n.getType&&(o=n.getType()),r.emit("beforeremoveitem",{item:i,type:o});var a=r.get("".concat(o,"s")),s=a.indexOf(n);if(s>-1&&a.splice(s,1),o===rg){var u=r.get("v".concat(o,"s")),c=u.indexOf(n);c>-1&&u.splice(c,1)}var l=n.get("id");delete r.get("itemMap")[l];var h=r.get("comboTrees"),d=n.get("id");if(o===ng){var f=n.getModel().comboId;if(h&&f){var p=h,g=!1;h.forEach(function(w){g||_r(w,function(E){if(E.id===d&&p){var S=p.indexOf(E);return p.splice(S,1),g=!0,!1}return p=E.children,!0})})}for(var v=(x=n.getEdges()).length-1;v>=0;v--)r.removeItem(x[v],!1);f&&r.updateCombo(f)}else if(o===dh){var m,y=n.getModel().parentId,b=!1;(h||[]).forEach(function(w){b||_r(w,function(E){return E.id!==d||(m=E,b=!0,!1)})}),m.removed=!0,m&&m.children&&m.children.forEach(function(w){t.removeItem(w.id)});var x;for(v=(x=n.getEdges()).length;v>=0;v--)r.removeItem(x[v],!1);y&&r.updateCombo(y)}n.destroy(),r.emit("afterremoveitem",{item:i,type:o})}},e.prototype.setItemState=function(n,t,r){var i=this.graph,o=t;he(r)&&(o="".concat(t,":").concat(r)),n.hasState(o)===r&&r||he(r)&&n.hasState(o)||(i.emit("beforeitemstatechange",{item:n,state:o,enabled:r}),n.setState(t,r),i.autoPaint(),i.emit("afteritemstatechange",{item:n,state:o,enabled:r}))},e.prototype.priorityState=function(n,t){var r=this.graph,i=n;he(n)&&(i=r.findById(n)),this.setItemState(i,t,!1),this.setItemState(i,t,!0)},e.prototype.clearItemStates=function(n,t){var r=this.graph;he(n)&&(n=r.findById(n)),r.emit("beforeitemstatesclear",{item:n,states:t}),n.clearStates(t),r.emit("afteritemstatesclear",{item:n,states:t})},e.prototype.refreshItem=function(n){var t=this.graph;he(n)&&(n=t.findById(n)),t.emit("beforeitemrefresh",{item:n}),n.refresh(),t.emit("afteritemrefresh",{item:n})},e.prototype.addCombos=function(n,t){var r=this,i=this.graph;(n||[]).forEach(function(a){xo(a,function(s){var u;return t.forEach(function(c){c.id===s.id&&(c.children=s.children,c.depth=s.depth,u=c)}),u&&r.addItem("combo",u),!0})});var o=i.get("comboGroup");o&&o.sort()},e.prototype.changeItemVisibility=function(n,t){var r=this,i=this.graph;if(he(n)&&(n=i.findById(n)),n){if(i.emit("beforeitemvisibilitychange",{item:n,visible:t}),n.changeVisibility(t),n.getType&&n.getType()===ng)re(n.getEdges(),function(c){(!t||c.get("source").isVisible()&&c.get("target").isVisible())&&r.changeItemVisibility(c,t)});else if(n.getType&&n.getType()===dh){var o=i.get("comboTrees"),a=n.get("id"),s=[],u=!1;(o||[]).forEach(function(c){u||c.children&&c.children.length!==0&&_r(c,function(l){return l.id!==a||(s=l.children,u=!0,!1)})}),s&&(!t||t&&!n.getModel().collapsed)&&s.forEach(function(c){var l=i.findById(c.id);r.changeItemVisibility(l,t)}),re(n.getEdges(),function(c){(!t||c.get("source").isVisible()&&c.get("target").isVisible())&&r.changeItemVisibility(c,t)})}return i.emit("afteritemvisibilitychange",{item:n,visible:t}),n}},e.prototype.destroy=function(){this.graph=null,this.destroyed=!0},e}(),DW=function(){function e(n){this.graph=n,this.destroyed=!1}return e.prototype.updateState=function(n,t,r){var i=this.graph.get("states"),o=t;he(r)&&(o="".concat(t,":").concat(r)),i[o]||(i[o]=[]),r?i[o].push(n):i[o]=i[o].filter(function(a){return a!==n}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:i})},e.prototype.updateStates=function(n,t,r){var i=this.graph.get("states");(he(t)?[t]:t).forEach(function(o){var a=o;i[a]||(i[a]=[]),he(r)&&(a="".concat(o,":").concat(r)),r?i[a].push(n):i[a]=i[a].filter(function(s){return s!==n})}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:t})},e.prototype.destroy=function(){this.graph=null,this.destroyed=!0},e}(),LW=function(e,n){return e&&n?e.replace(/\\?\{([^{}]+)\}/g,function(t,r){if(t.charAt(0)==="\\")return t.slice(1);var i=n[r];return i===0&&(i="0"),i||""}):e},KN=function(e){var n=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var t=0,r=e;t<r.length;t++){var i=r[t],o=i.x,a=i.y;n.push(o),n.push(a)}var s=gv(n);return s.unshift(["M",e[0].x,e[0].y]),s},ig=function(e,n,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var i={x:(1-t)*e.x+t*n.x,y:(1-t)*e.y+t*n.y},o=[0,0];Lr(o,[n.x-e.x,n.y-e.y]),o&&(o[0]||o[1])||(o=[0,0]);var a=[-o[1]*r,o[0]*r];return i.x+=a[0],i.y+=a[1],i},pb=function(e){var n=[];return e.forEach(function(t){if(t[0]!=="A")for(var r=1;r<t.length;r+=2)n.push([t[r],t[r+1]]);else{var i=t.length;n.push([t[i-2],t[i-1]])}}),n},gb=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var n=e[0],t=e[1],r=e[e.length-1],i=e[e.length-2];e.unshift(r),e.unshift(i),e.push(n),e.push(t);for(var o=[],a=1;a<e.length-2;a+=1){var s=e[a-1].x,u=e[a-1].y,c=e[a].x,l=e[a].y,h=e[a+1].x,d=e[a+1].y,f=c+(h-s)/6,p=l+(d-u)/6,g=h-((a!==e.length-2?e[a+2].x:h)-c)/6,v=d-((a!==e.length-2?e[a+2].y:d)-l)/6;o.push(["C",f,p,g,v,h,d])}return o.unshift(["M",r.x,r.y]),o},$N=function(e,n){return bn([0,0],Lr([0,0],e),n)},QN=function(e,n){var t=[e[1]-n[1],n[0]-e[0]],r=Math.sqrt(t[0]*t[0]+t[1]*t[1]);if(r===0)throw new Error("p0 should not be equal to p1");return[t[0]/r,t[1]/r]},JN=function(e,n){return[n[0]-e[0],n[1]-e[1]]};function vb(e,n){if(!e||e.length<1)return"";if(e.length===1)return function(u){var c=[u[0][0],u[0][1]-n],l=[u[0][0],u[0][1]+n];return"M ".concat(c," A ").concat(n,",").concat(n,",0,0,0,").concat(l," A ").concat(n,",").concat(n,",0,0,0,").concat(c)}(e);if(e.length===2)return function(u){var c=bn([0,0],QN(u[0],u[1]),n),l=bn([0,0],c,-1),h=hn([0,0],u[0],c),d=hn([0,0],u[1],c),f=hn([0,0],u[1],l),p=hn([0,0],u[0],l);return"M ".concat(h," L ").concat(d," A ").concat([n,n,"0,0,0",f].join(",")," L ").concat(p," A ").concat([n,n,"0,0,0",h].join(","))}(e);for(var t=new Array(e.length),r=0;r<t.length;++r){var i=r===0?e[e.length-1]:e[r-1],o=e[r],a=bn([0,0],QN(i,o),n);t[r]=[hn([0,0],i,a),hn([0,0],o,a)]}var s="A ".concat([n,n,"0,0,0,"].join(","));return t=t.map(function(u,c){var l="";return c===0&&(l="M ".concat(t[t.length-1][1]," ")),l+="".concat(s+u[0]," L ").concat(u[1])}),t.join(" ")}function eP(e,n){var t,r,i,o=e.length;if(!e||o<1)return"";if(o===1)return r=[(t=e)[0][0],t[0][1]-n],i=[t[0][0],t[0][1]+n],"M ".concat(r," A ").concat([n,n,"0,0,0",i].join(",")," A ").concat([n,n,"0,0,0",r].join(","));if(o===2)return function(c){var l=JN(c[0],c[1]),h=$N(l,n),d=hn([0,0],c[0],bn([0,0],h,-1)),f=hn([0,0],c[1],h),p=1.2*n,g=$N(Lr([0,0],l),p),v=bn([0,0],g,-1),m=hn([0,0],d,v),y=hn([0,0],f,v),b=hn([0,0],d,g);return"M ".concat(d," C ").concat([m,y,f].join(",")," S ").concat([b,d].join(",")," Z")}(e);for(var a=e.map(function(c,l){var h=e[(l+1)%o];return{p:c,v:Lr([0,0],JN(c,h))}}),s=0;s<a.length;++s){var u=Lr([0,0],hn([0,0],a[s>0?s-1:o-1].v,bn([0,0],a[s].v,-1)));a[s].p=hn([0,0],a[s].p,bn([0,0],u,n))}return a.map(function(c){var l=c.p;return{x:l[0],y:l[1]}})}const BW=Object.freeze(Object.defineProperty({__proto__:null,getClosedSpline:gb,getControlPoint:ig,getSpline:KN,getStarPath:function(e,n){for(var t=[],r=0;r<5;r++){var i=Math.cos((18+72*r)/180*Math.PI)*e,o=Math.sin((18+72*r)/180*Math.PI)*e,a=Math.cos((54+72*r)/180*Math.PI)*n,s=Math.sin((54+72*r)/180*Math.PI)*n;r===0?t.push(["M",i,-o]):t.push(["L",i,-o]),t.push(["L",a,-s])}return t.push(["Z"]),t},paddedHull:eP,pathToPoints:pb,pointsToPolygon:function(e,n){var t=e.length;if(!t)return"";for(var r="",i=0;i<t;i++){var o=e[i];r+=LW(i===0?"M{x} {y}":"L{x} {y}",o)}return n&&(r+="Z"),r},roundedHull:vb},Symbol.toStringTag,{value:"Module"}));var tP=function(e,n,t){return(e.y-t.y)*(n.x-t.x)-(e.x-t.x)*(n.y-t.y)},nP=function(e){var n=e.map(function(c){return{x:c.getModel().x,y:c.getModel().y}});n.sort(function(c,l){return c.x===l.x?c.y-l.y:c.x-l.x});for(var t={},r=n.length-1;r>=0;r--){var i=n[r],o=i.x,a=i.y;t["".concat(o,"-").concat(a)]&&n.splice(r,1),t["".concat(o,"-").concat(a)]=!0}if(n.length===1)return n;var s=[];for(r=0;r<n.length;r++){for(;s.length>=2&&tP(s[s.length-2],s[s.length-1],n[r])<=0;)s.pop();s.push(n[r])}var u=[];for(r=n.length-1;r>=0;r--){for(;u.length>=2&&tP(u[u.length-2],u[u.length-1],n[r])<=0;)u.pop();u.push(n[r])}return u.pop(),s.pop(),s.concat(u)},RW={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function jW(e,n,t){var r=!1,i=function(s,u){return n.cells[s+u*n.width]},o=function(s,u){var c=0;return i(s-1,u-1)>=t&&(c+=1),i(s,u-1)>t&&(c+=2),i(s-1,u)>t&&(c+=4),i(s,u)>t&&(c+=8),c},a=function(s,u){for(var c,l,h=s,d=u,f=0;f<n.width*n.height;f++){if(c=h,l=d,e.findIndex(function(p){return p.x===h&&p.y===d})>-1){if(e[0].x===h&&e[0].y===d)return!0}else e.push({x:h,y:d});switch(o(h,d)){case-1:return!0;case 0:case 3:case 2:case 7:h++;break;case 12:case 14:case 4:h--;break;case 6:c===0&&(l===-1?h-=1:h+=1);break;case 1:case 13:case 5:d--;break;case 9:c===1&&(l===0?d-=1:d+=1);break;case 10:case 8:case 11:d++;break;default:return!0}}};this.march=function(){for(var s=0;s<n.width&&!r;s+=1)for(var u=0;u<n.height&&!r;u+=1)i(s,u)>t&&o(s,u)!==15&&(r=a(s,u));return r}}var rP=function(e,n){var t=Number.POSITIVE_INFINITY,r=null;return e.forEach(function(i){var o=Q1(i,n);o>=0&&o<t&&(r=i,t=o)}),r};function zW(e,n,t,r,i){var o=function(u,c,l){var h=null,d=Number.POSITIVE_INFINITY;return c.forEach(function(f){var p={x:u.getModel().x,y:u.getModel().y},g={x:f.getModel().x,y:f.getModel().y},v=qp(p,g),m=new As(p.x,p.y,g.x,g.y),y=l.reduce(function(b,x){return Q1(x,m)>0?b+1:b},0);v*Math.pow(y+1,2)<d&&(h=f,d=v*Math.pow(y+1,2))}),h}(e,t,n);if(o===null)return[];var a=function(u,c,l,h){var d=[],f=[];f.push(u);for(var p=!0,g=0,v=function(b,x){var w=!1;return x.forEach(function(E){w||(J1(b,{x:E.x1,y:E.y1})||J1(b,{x:E.x2,y:E.y2}))&&(w=!0)}),w},m=function(b,x){for(var w=0,E=x;w<E.length;w++){var S=E[w].getBBox(),M=[[S.x,S.y],[S.x+S.width,S.y],[S.x,S.y+S.height],[S.x+S.width,S.y+S.height]];if(lh(M,b.x,b.y))return!0}return!1};p&&g<l;){p=!1;for(var y=function(){var b=f.pop(),x=rP(c,b);if(x){var w=EN(x,b),E=w[0];if(w[1]===2){var S=function(M){for(var k=h,_=iP(x,k,E,M),C=v(_,f)||v(_,d),T=m(_,c);!C&&T&&k>=1;)_=iP(x,k/=1.5,E,M),C=v(_,f)||v(_,d),T=m(_,c);!_||C||M&&T||(f.push(new As(b.x1,b.y1,_.x,_.y)),f.push(new As(_.x,_.y,b.x2,b.y2)),p=!0)};S(!0),p||S(!1)}}p||d.push(b),g+=1};!p&&f.length;)y()}for(;f.length;)d.push(f.pop());return d}(new As(e.getModel().x,e.getModel().y,o.getModel().x,o.getModel().y),n,r,i),s=function(u){for(var c=[];u.length>0;){var l=u.pop();if(u.length===0){c.push(l);break}var h=u.pop(),d=new As(l.x1,l.y1,h.x2,h.y2);rP(n,d)?(c.push(l),u.push(h)):u.push(d)}return c}(a);return s}var FW=function(e,n,t){var r=Object.assign(RW,t),i=SN(e.map(function(w){return{x:w.getModel().x,y:w.getModel().y}}));e=e.sort(function(w,E){return qp({x:w.getModel().x,y:w.getModel().y},i)-qp({x:E.getModel().x,y:E.getModel().y},i)});var o=[],a=[];e.forEach(function(w){zW(w,n,o,r.maxRoutingIterations,r.morphBuffer).forEach(function(E){a.push(E)}),o.push(w)});for(var s,u,c,l,h,d=function(w,E,S){var M={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},k=[];w.forEach(function(A){k.push(A.getBBox())}),E.forEach(function(A){k.push(A.getBBox())});for(var _=0,C=k;_<C.length;_++){var T=C[_];M.minX=(T.minX<M.minX?T.minX:M.minX)-S,M.minY=(T.minY<M.minY?T.minY:M.minY)-S,M.maxX=(T.maxX>M.maxX?T.maxX:M.maxX)+S,M.maxY=(T.maxY>M.maxY?T.maxY:M.maxY)+S}return M.width=M.maxX-M.minX,M.height=M.maxY-M.minY,M.x=M.minX,M.y=M.minY,M}(e,a,r.nodeR0),f=(s=d.width,u=d.height,c=r.pixelGroupSize,l=Math.ceil(s/c),h=Math.ceil(u/c),{cells:new Float32Array(Math.max(0,l*h)).fill(0),width:l,height:h}),p=[],g=[],v=0;v<r.maxMarchingIterations;v++)if(GW(e,n,a,d,f,r),g=[],new jW(p=[],f,r.threshold).march()){var m=p.map(function(w){return{x:Math.round(w.x*r.pixelGroupSize+d.minX),y:Math.round(w.y*r.pixelGroupSize+d.minY)}});if(m){var y=m.length;if(r.skip>1)for(y=Math.floor(m.length/r.skip);y<3&&r.skip>1;)r.skip-=1,y=Math.floor(m.length/r.skip);for(var b=0,x=0;x<y;x+=1,b+=r.skip)g.push({x:m[b].x,y:m[b].y})}if(g&&function(){for(var w=0,E=e;w<E.length;w++){var S=E[w],M=g.map(function(k){return[k.x,k.y]});if(!lh(M,S.getBBox().centerX,S.getBBox().centerY))return!1}return!0}())return g;if(r.threshold*=.9,v<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(r.nonMemberInfluenceFactor!==0&&n.length>0))break;r.nonMemberInfluenceFactor*=.8}}return g};function GW(e,n,t,r,i,o){function a(d,f){var p=Math.floor((d-f)/o.pixelGroupSize);return p<0?0:p}function s(d,f){return d*o.pixelGroupSize+f}var u=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),c=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),l=function(d,f){return[Math.min(a(d.minX,f+r.minX),i.width),Math.min(a(d.minY,f+r.minY),i.height),Math.min(a(d.maxX,-f+r.minX),i.width),Math.min(a(d.maxY,-f+r.minY),i.height)]},h=function(d,f){for(var p=d.getBBox(),g=l(p,o.nodeR1),v=g[0],m=g[1],y=g[2],b=g[3],x=m;x<b;x+=1)for(var w=v;w<y;w+=1)if(!(f<0&&i[w+x*i.width]<=0)){var E=s(w,r.minX),S=s(x,r.minY),M=_N({x:E,y:S},{x:p.minX,y:p.minY,width:p.width,height:p.height});if(M<Math.pow(o.nodeR1,2)){var k=Math.sqrt(M)-o.nodeR1;i.cells[w+x*i.width]+=f*k*k}}};o.nodeInfluenceFactor&&e.forEach(function(d){h(d,o.nodeInfluenceFactor/u)}),o.edgeInfluenceFactor&&t.forEach(function(d){(function(f,p){for(var g=f.getBBox(),v=l(g,o.edgeR1),m=v[0],y=v[1],b=v[2],x=v[3],w=y;w<x;w+=1)for(var E=m;E<b;E+=1)if(!(p<0&&i.cells[E+w*i.width]<=0)){var S=s(E,r.minX),M=s(w,r.minY),k=MN({x:S,y:M},f);if(k<Math.pow(o.edgeR1,2)){var _=Math.sqrt(k)-o.edgeR1;i.cells[E+w*i.width]+=p*_*_}}})(d,o.edgeInfluenceFactor/c)}),o.negativeNodeInfluenceFactor&&n.forEach(function(d){h(d,o.negativeNodeInfluenceFactor/u)})}function iP(e,n,t,r){var i=e.getBBox(),o=t[0],a=t[1],s=t[2],u=t[3],c={topLeft:{x:i.minX-n,y:i.minY-n},topRight:{x:i.maxX+n,y:i.minY-n},bottomLeft:{x:i.minX-n,y:i.maxY+n},bottomRight:{x:i.maxX+n,y:i.maxY+n}},l=i.height*i.width;function h(d,f){return i.width*(.5*(d.y-i.minY+(f.y-i.minY)))}if(a)return o?r?c.topLeft:c.bottomRight:s?r?c.bottomLeft:c.topRight:h(a,u)<.5*l?a.y>u.y?r?c.topLeft:c.bottomRight:r?c.topRight:c.bottomLeft:a.y<u.y?r?c.bottomLeft:c.topRight:r?c.bottomRight:c.topLeft;if(u){if(o)return r?c.topRight:c.bottomLeft;if(s)return r?c.bottomRight:c.topLeft}return h(o,s)<.5*l?o.x>s.x?r?c.topLeft:c.bottomRight:r?c.bottomLeft:c.topRight:o.x<s.x?r?c.topRight:c.bottomLeft:r?c.bottomRight:c.topLeft}var YW=function(){function e(n,t){this.cfg=Zt(this.getDefaultCfg(),t),this.graph=n,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return he(r)?n.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return he(r)?n.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return e.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},e.prototype.setPadding=function(){var n=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+n:10+n,this.cfg.bubbleCfg={nodeR0:this.padding-n,nodeR1:this.padding-n,morphBuffer:this.padding-n}},e.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(this.type="round-convex")},e.prototype.calcPath=function(n,t){var r,i,o;switch(this.type){case"round-convex":o=vb((r=nP(n)).map(function(a){return[a.x,a.y]}),this.padding),i=Wc(o);break;case"smooth-convex":(r=nP(n)).length===2?(o=vb(r.map(function(a){return[a.x,a.y]}),this.padding),i=Wc(o)):r.length>2&&(o=eP(r.map(function(a){return[a.x,a.y]}),this.padding),i=gb(o));break;case"bubble":i=(r=FW(n,t,this.cfg.bubbleCfg)).length>=2&&gb(r)}return i},e.prototype.render=function(){this.group.addShape("path",{attrs:P({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},e.prototype.addMember=function(n){if(n){he(n)&&(n=this.graph.findById(n)),this.members.push(n);var t=this.nonMembers.indexOf(n);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},e.prototype.addNonMember=function(n){if(n){he(n)&&(n=this.graph.findById(n)),this.nonMembers.push(n);var t=this.members.indexOf(n);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},e.prototype.removeMember=function(n){if(n){he(n)&&(n=this.graph.findById(n));var t=this.members.indexOf(n);return t>-1&&(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},e.prototype.removeNonMember=function(n){if(n){he(n)&&(n=this.graph.findById(n));var t=this.nonMembers.indexOf(n);return t>-1&&(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},e.prototype.updateData=function(n,t){var r=this;this.group.findById(this.id).remove(),n&&(this.members=n.map(function(i){return he(i)?r.graph.findById(i):i})),t&&(this.nonMembers=t.map(function(i){return he(i)?r.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},e.prototype.updateStyle=function(n){this.group.findById(this.id).attr(P({},n))},e.prototype.updateCfg=function(n){var t=this;this.cfg=Zt(this.cfg,n),this.id=this.cfg.id,this.group=this.cfg.group,n.members&&(this.members=this.cfg.members.map(function(r){return he(r)?t.graph.findById(r):r})),n.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return he(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},e.prototype.contain=function(n){var t,r,i=this,o=(t=he(n)?this.graph.findById(n):n).getKeyShape();if(t.get("type")==="path")r=pb(o.attr("path"));else{var a=o.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return r=r.map(function(s){var u=i.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),wN(r,pb(this.path))},e.prototype.destroy=function(){this.group.remove(),this.cfg=null},e}(),mb=br;(function(e){function n(t){var r=e.call(this)||this;return r.sortCombos=nu(function(){var i=r.get("comboSorted");if(r&&!r.destroyed&&!i){r.set("comboSorted",!0);var o=[],a={};(r.get("comboTrees")||[]).forEach(function(s){_r(s,function(u){return o[u.depth]?o[u.depth].push(u.id):o[u.depth]=[u.id],a[u.id]=u.depth,!0})}),(r.getEdges().concat(r.get("vedges"))||[]).forEach(function(s){var u=s.getModel(),c=a[u.source]||0,l=a[u.target]||0,h=Math.max(c,l);o[h]?o[h].push(u.id):o[h]=[u.id]}),o.forEach(function(s){if(s&&s.length)for(var u=s.length-1;u>=0;u--){var c=r.findById(s[u]);c&&c.toFront()}})}},500,!1),r.cfg=Zt(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Qi(r.cfg.maxStep),r.redoStack=new Qi(r.cfg.maxStep)),r}At(n,e),n.prototype.init=function(){this.initCanvas();var t=new IW(this),r=new kW(this),i=new PW(this),o=new DW(this);this.set({viewController:t,modeController:r,itemController:i,stateController:o}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},n.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=(t.get("el")||{}).id,i=r===void 0?"g6":r,o=t.addGroup({id:"".concat(i,"-root"),className:wt.rootContainerClassName});if(this.get("groupByTypes")){var a=o.addGroup({id:"".concat(i,"-edge"),className:wt.edgeContainerClassName}),s=o.addGroup({id:"".concat(i,"-node"),className:wt.nodeContainerClassName}),u=o.addGroup({id:"".concat(i,"-combo"),className:wt.comboContainerClassName});u.toBack(),this.set({nodeGroup:s,edgeGroup:a,comboGroup:u})}var c=o.addGroup({id:"".concat(i,"-delegate"),className:wt.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},n.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},n.prototype.set=function(t,r){return dn(t)?this.cfg=P(P({},this.cfg),t):this.cfg[t]=r,t!=="enabledStack"||!r||this.undoStack||this.redoStack||(this.undoStack=new Qi(this.cfg.maxStep),this.redoStack=new Qi(this.cfg.maxStep)),this},n.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},n.prototype.getGroup=function(){return this.get("group")},n.prototype.getContainer=function(){return this.get("container")},n.prototype.getMinZoom=function(){return this.get("minZoom")},n.prototype.setMinZoom=function(t){return this.set("minZoom",t)},n.prototype.getMaxZoom=function(){return this.get("maxZoom")},n.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},n.prototype.getWidth=function(){return this.get("width")},n.prototype.getHeight=function(){return this.get("height")},n.prototype.clearItemStates=function(t,r){he(t)&&(t=this.findById(t));var i=this.get("itemController");r||(r=t.get("states")),i.clearItemStates(t,r),this.get("stateController").updateStates(t,r,!1)},n.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},n.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},n.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},n.prototype.findById=function(t){return this.get("itemMap")[t]},n.prototype.find=function(t,r){var i;return re(this.get("".concat(t,"s")),function(o,a){if(r(o,a))return i=o}),i},n.prototype.findAll=function(t,r){var i=[];return re(this.get("".concat(t,"s")),function(o,a){r(o,a)&&i.push(o)}),i},n.prototype.findAllByState=function(t,r,i){return i?this.findAll(t,function(o){return o.hasState(r)&&i(o)}):this.findAll(t,function(o){return o.hasState(r)})},n.prototype.translate=function(t,r,i,o){var a=this,s=this.get("group"),u=_t(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),i){var c=hh({animateCfg:o,callback:function(){return a.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});K1(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},i,c||{duration:500,easing:"easeCubic"})}else u=mb(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},n.prototype.moveTo=function(t,r,i,o){var a=this.get("group");K1(a,{x:t,y:r},i,o||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:a.getMatrix()})},n.prototype.fitView=function(t,r,i,o){t&&this.set("fitViewPadding",t);var a=this.get("viewController");r?a.fitViewByRules(r,i,o):a.fitView(i,o),this.autoPaint()},n.prototype.fitCenter=function(t,r){this.get("viewController").fitCenter(t,r),this.autoPaint()},n.prototype.addBehaviors=function(t,r){return this.get("modeController").manipulateBehaviors(t,r,!0),this},n.prototype.removeBehaviors=function(t,r){return this.get("modeController").manipulateBehaviors(t,r,!1),this},n.prototype.updateBehavior=function(t,r,i){return this.get("modeController").updateBehavior(t,r,i),this},n.prototype.zoom=function(t,r,i,o){var a=this,s=this.get("group"),u=_t(s.getMatrix())||[1,0,0,0,1,0,0,0,1],c=this.get("minZoom"),l=this.get("maxZoom"),h=this.getZoom()||1,d=h*t,f=t,p=!1;if(c&&d<c?(f=c/h,p=!0):l&&d>l&&(f=l/h,p=!0),u=mb(u,r?[["t",-r.x,-r.y],["s",f,f],["t",r.x,r.y]]:[["s",f,f]]),i){var g=_t(s.getMatrix());g||(g=[1,0,0,0,1,0,0,0,1]);var v=g[0],m=v*f,y=hh({animateCfg:o,callback:function(){return a.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(b){if(b===1)g=u;else{var x=eb(v,m,b)/g[0];g=mb(g,r?[["t",-r.x,-r.y],["s",x,x],["t",r.x,r.y]]:[["s",x,x]])}return{matrix:g}},y)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!p},n.prototype.zoomTo=function(t,r,i,o){var a=t/this.getZoom();return this.zoom(a,r,i,o)},n.prototype.focusItem=function(t,r,i){var o=this.get("viewController"),a=!1;r?a=!0:r===void 0&&(a=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),o.focus(t,a,s),this.autoPaint()},n.prototype.focusItems=function(t,r,i,o){this.get("viewController").focusItems(t,r,i,o)},n.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},n.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},n.prototype.getPointByClient=function(t,r){return this.get("viewController").getPointByClient(t,r)},n.prototype.getClientByPoint=function(t,r){return this.get("viewController").getClientByPoint(t,r)},n.prototype.getPointByCanvas=function(t,r){return this.get("viewController").getPointByCanvas(t,r)},n.prototype.getCanvasByPoint=function(t,r){return this.get("viewController").getCanvasByPoint(t,r)},n.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},n.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},n.prototype.showItem=function(t,r){r===void 0&&(r=!0);var i=this.get("itemController").changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=i.getID(),a={},s={};switch(i.getType()){case"node":a.nodes=[{id:o,visible:!1}],s.nodes=[{id:o,visible:!0}];break;case"edge":a.nodes=[{id:o,visible:!1}],s.edges=[{id:o,visible:!0}];break;case"combo":a.nodes=[{id:o,visible:!1}],s.combos=[{id:o,visible:!0}]}this.pushStack("visible",{before:a,after:s})}},n.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var i=this.get("itemController").changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=i.getID(),a={},s={};switch(i.getType()){case"node":a.nodes=[{id:o,visible:!0}],s.nodes=[{id:o,visible:!1}];break;case"edge":a.nodes=[{id:o,visible:!0}],s.edges=[{id:o,visible:!1}];break;case"combo":a.nodes=[{id:o,visible:!0}],s.combos=[{id:o,visible:!1}]}this.pushStack("visible",{before:a,after:s})}},n.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},n.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},n.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},n.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var i=t;if(he(t)&&(i=this.findById(t)),!(!i&&he(t))){if(i){var o="";if(i.getType&&(o=i.getType()),r&&this.get("enabledStack")){var a=P(P({},i.getModel()),{itemType:o}),s={};switch(o){case"node":s.nodes=[a],s.edges=[];for(var u=i.getEdges(),c=u.length-1;c>=0;c--)s.edges.push(P(P({},u[c].getModel()),{itemType:"edge"}));break;case"edge":s.edges=[a];break;case"combo":s.combos=[a]}this.pushStack("delete",{before:s,after:{}})}if(o==="node"&&i.getModel().comboId&&this.updateComboTree(i,void 0,!1),this.get("itemController").removeItem(i),o==="combo"){var l=ob(this.get("comboTrees"));this.set("comboTrees",l)}}}},n.prototype.innerAddItem=function(t,r,i){if(!function(p,g){if(p==="node"||p==="combo"){if(g.id&&!he(g.id))return!1}else if(!(p!=="edge"||g.source&&g.target))return!1;return!0}(t,r))return!1;if(!r.id||!this.findById(r.id)){var o,a=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(a.forEach(function(p){u||xo(p,function(g){if(r.parentId===g.id){u=!0;var v=P({id:r.id,depth:g.depth+2},r);g.children?g.children.push(v):g.children=[v],r.depth=v.depth,o=i.addItem(t,r)}var m=s[g.id];return u&&m&&m.getType&&m.getType()==="combo"&&i.updateCombo(m,g.children),!0})}),!u){var c=P({id:r.id,depth:0},r);r.depth=c.depth,a.push(c),o=i.addItem(t,r)}this.set("comboTrees",a),r.collapsed&&(this.collapseCombo(o,!1),this.updateCombo(o))}else if(t==="node"&&he(r.comboId)&&a){var l;(l=this.findById(r.comboId))&&l.getType&&l.getType(),o=i.addItem(t,r);var h=this.get("itemMap"),d=!1,f=!1;a.forEach(function(p){f||d||xo(p,function(g){if(g.id===r.id)return f=!0,!1;if(r.comboId===g.id&&!f){d=!0;var v=_t(r);v.itemType="node",g.children?g.children.push(v):g.children=[v],v.depth=g.depth+1}return d&&h[g.id].getType&&h[g.id].getType()==="combo"&&i.updateCombo(h[g.id],g.children),!0})})}else o=i.addItem(t,r);return(t==="node"&&r.comboId||t==="combo"&&r.parentId)&&(l=this.findById(r.comboId||r.parentId))&&l.getType&&l.getType()==="combo"&&l.addChild(o),o}},n.prototype.addItem=function(t,r,i,o){i===void 0&&(i=!0),o===void 0&&(o=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!o);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var c=this.get("combos");if(c&&c.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var l=P(P({},u.getModel()),{itemType:t}),h={};switch(t){case"node":h.nodes=[l];break;case"edge":h.edges=[l];break;case"combo":h.combos=[l]}this.pushStack("add",{before:{},after:h})}return u},n.prototype.addItems=function(t,r,i){t===void 0&&(t=[]),r===void 0&&(r=!0),i===void 0&&(i=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!i);for(var a=this.get("itemController"),s=[],u=0;u<t.length;u++)(c=t[u]).type!=="edge"&&c.type!=="vedge"?s.push(this.innerAddItem(c.type,c.model,a)):s.push(void 0);for(u=0;u<t.length;u++){var c;(c=t[u]).type!=="edge"&&c.type!=="vedge"||(s[u]=this.innerAddItem(c.type,c.model,a))}if(i){var l=this.get("combos");l&&l.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){var h={nodes:[],edges:[],combos:[]};for(u=0;u<t.length;u++){var d=t[u].type,f=s[u];if(f&&f!==!0){var p=P(P({},f.getModel()),{itemType:d});switch(d){case"node":h.nodes.push(p);break;case"edge":h.edges.push(p);break;case"combo":h.combos.push(p)}}}this.pushStack("addItems",{before:{},after:h})}return s},n.prototype.add=function(t,r,i,o){return i===void 0&&(i=!0),o===void 0&&(o=!0),this.addItem(t,r,i,o)},n.prototype.updateItem=function(t,r,i){var o=this;i===void 0&&(i=!0);var a,s=this.get("itemController");a=he(t)?this.findById(t):t;var u,c=i&&this.get("enabledStack");c&&(u=_t(a.getModel()));var l="";a.getType&&(l=a.getType());var h=ir([],a.getStates(),!0);if(l==="combo"&&re(h,function(g){return o.setItemState(a,g,!1)}),s.updateItem(a,r),l==="combo"&&re(h,function(g){return o.setItemState(a,g,!0)}),c){var d={nodes:[],edges:[],combos:[]},f={nodes:[],edges:[],combos:[]},p=P({id:u.id},r);switch(l){case"node":d.nodes.push(u),f.nodes.push(p);break;case"edge":d.edges.push(u),f.edges.push(p);break;case"combo":d.combos.push(u),f.combos.push(p)}this.pushStack("update",{before:d,after:f})}},n.prototype.update=function(t,r,i){i===void 0&&(i=!0),this.updateItem(t,r,i)},n.prototype.setItemState=function(t,r,i){he(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,r,i),this.get("stateController").updateState(t,r,i)},n.prototype.priorityState=function(t,r){this.get("itemController").priorityState(t,r)},n.prototype.data=function(t){LN(t),this.set("data",t)},n.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var i=r.nodes,o=i===void 0?[]:i,a=r.edges,s=a===void 0?[]:a,u=r.combos,c=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(o.map(function(p){return{type:"node",model:p}}),!1,!1),(c==null?void 0:c.length)!==0){var l=ib(c,o);this.set("comboTrees",l),t.addCombos(c)}t.addItems(s.map(function(p){return{type:"edge",model:p}}),!1,!1);var h=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var d=t.get("layoutController");if(d){if(d.layout(f),this.destroyed)return}else f();function f(){(t.get("comboTrees")||[]).forEach(function(p){xo(p,function(g){var v=t.findById(g.id);return v.getType()==="combo"&&g.collapsed&&(t.collapseCombo(g.id,!1),t.updateCombo(v)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",h),setTimeout(function(){var p;(p=t.getCombos())===null||p===void 0||p.forEach(function(g){g.set("animate",!0)})},0)}this.get("groupByTypes")||(c&&c.length!==0?this.sortCombos():r.nodes&&r.edges&&r.nodes.length<r.edges.length?this.getNodes().forEach(function(p){p.toFront()}):this.getEdges().forEach(function(p){p.toBack()}))},n.prototype.read=function(t){this.data(t),this.render()},n.prototype.diffItems=function(t,r,i){var o,a=this,s=this.get("itemMap");re(i,function(u){if(o=s[u.id]){if(a.get("animate")&&t==="node"){var c=o.getContainer().getMatrix();c||(c=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:c[6],y:c[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},n.prototype.changeData=function(t,r){var i,o=this;r===void 0&&(r=!0);var a=this,s=t||a.get("data");if(!LN(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:a.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(b){return a.clearItemStates(b)}),this.getEdges().map(function(b){return a.clearItemStates(b)});var u=this.get("canvas"),c=u.get("localRefresh");u.set("localRefresh",!1),a.get("data")||(a.data(s),a.render());var l=this.get("itemMap"),h={nodes:[],edges:[]},d=s.combos;if(d){var f=ib(d,s.nodes);this.set("comboTrees",f)}else this.set("comboTrees",[]);this.diffItems("node",h,s.nodes),re(l,function(b,x){l[x].getModel().depth=0,b.getType&&b.getType()==="edge"||(b.getType&&b.getType()==="combo"?(delete l[x],b.destroy()):h.nodes.indexOf(b)<0&&(delete l[x],a.remove(b,!1)))});for(var p=this.getCombos(),g=p.length-1;g>=0;g--)p[g].destroyed&&p.splice(g,1);d&&(a.addCombos(d),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",h,s.edges),re(l,function(b,x){(!b.getType||b.getType()!=="node"&&b.getType()!=="combo")&&h.edges.indexOf(b)<0&&(delete l[x],a.remove(b,!1))}),(this.get("comboTrees")||[]).forEach(function(b){xo(b,function(x){return o.findById(x.id).getType()==="combo"&&x.collapsed&&o.collapseCombo(x.id,!1),!0})}),this.set({nodes:h.nodes,edges:h.edges});var v=(this.get("layout")||{}).relayoutAtChangeData,m=v===void 0||v,y=this.get("layoutController");return m&&y&&(y.changeData(function(){setTimeout(function(){var b;(b=a.getCombos())===null||b===void 0||b.forEach(function(x){x.set("animate",!0)})},0)}),a.get("animate")&&!y.getLayoutType()?(a.positionsAnimate(),(i=a.getCombos())===null||i===void 0||i.forEach(function(b){return b.set("animate",!0)})):a.autoPaint()),setTimeout(function(){u.set("localRefresh",c)},16),this.set("data",s),this.emit("afterchangedata"),this},n.prototype.addCombos=function(t){var r=this.get("comboTrees");this.get("itemController").addCombos(r,t)},n.prototype.createCombo=function(t,r,i){var o=this;i===void 0&&(i=!0);var a=this.get("itemController");this.set("comboSorted",!1);var s,u="";if(t){if(he(t))u=t,s={id:t};else{if(!(u=t.id))return;s=t}var c=i&&this.get("enabledStack"),l={nodes:[],combos:[]};c&&r.forEach(function(m){var y=o.findById(m),b=y.getType();if(b==="node"||b==="combo"){var x=y.getModel();l["".concat(b,"s")].push({id:m,parentId:b==="node"?x.comboId:x.parentId})}});var h=this.get("comboTrees"),d=new Set(r),f=new Map;h&&(h.forEach(function(m){xo(m,function(y,b,x){if(d.has(y.id)){if(b){var w=o.findById(b.id),E=o.findById(y.id);b.children.splice(x,1),w.removeChild(E),a.updateCombo(w,b.children)}y.itemType==="combo"&&f.set(y.id,y)}return!0})}),h=h.filter(function(m){return!d.has(m.id)}),this.set("comboTrees",h));var p={nodes:[],combos:[]},g=r.map(function(m){var y=o.findById(m),b=y.getModel(),x="";y.getType&&(x=y.getType());var w=f.get(m)||{id:y.getID(),itemType:x};return x==="combo"?(w.parentId=u,b.parentId=u):x==="node"&&(w.comboId=u,b.comboId=u),c&&p["".concat(x,"s")].push({id:b.id,parentId:u}),w});s.children=g,this.addItem("combo",s,!1),this.set("comboSorted",!1),h&&(h.forEach(function(m){_r(m,function(y){return y.id!==u||(y.itemType="combo",y.children=g,!1)})}),this.sortCombos()),c&&(p.combos.push(s),this.pushStack("createCombo",{before:l,after:p}));var v=this.findById(u);!v.getModel().parentId&&v.getChildren().combos.length&&this.updateComboTree(v,void 0,!1),setTimeout(function(){v.set("animate",!0)},0)}},n.prototype.uncombo=function(t,r){var i,o,a=this;r===void 0&&(r=!0);var s=t;if(he(t)&&(s=this.findById(t)),s&&(!s.getType||s.getType()==="combo")){var u=s.getModel(),c=s.getModel().parentId,l=this.get("comboTrees");l||(l=[]);var h,d=this.get("itemMap"),f=s.get("id"),p=[],g=this.get("combos"),v=this.findById(c),m=r&&this.get("enabledStack"),y={};if(m&&((y=_t(u)).children=[]),l.forEach(function(E){h||xo(E,function(S){var M;if(S.id===f){h=S,s.getEdges().map(function(C){return C.getID()}).forEach(function(C){a.removeItem(C,!1)});var k=g.indexOf(s);g.splice(k,1),delete d[f];var _=_t(s.getModel());s.destroy(),a.emit("afterremoveitem",{item:_,type:"combo"})}return!c||!h||S.id!==c||(v.removeCombo(s),(k=(p=S.children).indexOf(h))!==-1&&p.splice(k,1),(M=h.children)===null||M===void 0||M.forEach(function(C){var T=a.findById(C.id),A=T.getModel();T.getType&&T.getType()==="combo"?(C.parentId=c,delete C.comboId,A.parentId=c,delete A.comboId):T.getType&&T.getType()==="node"&&(C.comboId=c,A.comboId=c),v.addChild(T),p.push(C)}),a.updateCombo(v),!1)})}),!c&&h){var b=l.indexOf(h);l.splice(b,1),(i=h.children)===null||i===void 0||i.forEach(function(E){E.parentId=void 0;var S=a.findById(E.id).getModel();delete S.parentId,delete S.comboId,E.itemType!=="node"&&l.push(E)})}if(m){var x={nodes:[],combos:[]},w={nodes:[],combos:[]};(o=h.children)===null||o===void 0||o.forEach(function(E){var S=a.findById(E.id).getType();S!=="node"&&S!=="combo"||(x["".concat(S,"s")].push({id:E.id,parentId:f}),w["".concat(S,"s")].push({id:E.id,parentId:c}))}),x.combos.push(y),this.pushStack("uncombo",{before:x,after:w})}}},n.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var i=this,o=this.get("comboTrees"),a=i.get("itemController"),s=i.get("itemMap");(o||[]).forEach(function(u){xo(u,function(c){var l;if(!c)return!0;var h=s[c.id];if(((l=h==null?void 0:h.getType)===null||l===void 0?void 0:l.call(h))==="combo"){var d=ir([],h.getStates(),!0);re(d,function(f){return r.setItemState(h,f,!1)}),a.updateCombo(h,c.children,t),re(d,function(f){return r.setItemState(h,f,!0)})}return!0})}),i.sortCombos()},n.prototype.updateCombo=function(t){var r,i=this,o=t;if(he(t)&&(o=this.findById(t)),o&&(!o.getType||o.getType()==="combo")){r=o.get("id");var a=this.get("comboTrees"),s=this.get("itemController"),u=this.get("itemMap");(a||[]).forEach(function(c){xo(c,function(l){if(!l)return!0;var h=u[l.id];if(r===l.id&&h&&h.getType&&h.getType()==="combo"){var d=ir([],h.getStates(),!0);re(d,function(f){h.getStateStyle(f)&&i.setItemState(h,f,!1)}),s.updateCombo(h,l.children),re(d,function(f){h.getStateStyle(f)&&i.setItemState(h,f,!0)}),r&&(r=l.parentId)}return!0})})}},n.prototype.updateComboTree=function(t,r,i){i===void 0&&(i=!0);var o;this.set("comboSorted",!1);var a,s=(o=he(t)?this.findById(t):t).getModel(),u=s.comboId||s.parentId,c="";if(o.getType&&(c=o.getType()),r&&c==="combo"){var l,h=this.get("comboTrees"),d=!0;if((h||[]).forEach(function(m){l||_r(m,function(y){if(!l)return y.id===o.getID()&&(l=y),!0})}),_r(l,function(m){return m.id!==r||(d=!1,!1)}),!d)return}if(i&&this.get("enabledStack")){var f={},p={};c==="combo"?(f.combos=[{id:s.id,parentId:s.parentId}],p.combos=[{id:s.id,parentId:r}]):c==="node"&&(f.nodes=[{id:s.id,parentId:s.comboId}],p.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:f,after:p})}if(s.parentId||s.comboId){var g=this.findById(s.parentId||s.comboId);g&&g.removeChild(o)}c==="combo"?s.parentId=r:c==="node"&&(s.comboId=r),r&&(a=this.findById(r))&&a.addChild(o),u&&(a=this.findById(u))&&a.removeChild(o);var v=ob(this.get("comboTrees"),s.id,r);this.set("comboTrees",v),this.updateCombos()},n.prototype.save=function(){var t=[],r=[],i=[];return re(this.get("nodes"),function(o){t.push(o.getModel())}),re(this.get("edges"),function(o){r.push(o.getModel())}),re(this.get("combos"),function(o){i.push(o.getModel())}),{nodes:t,edges:r,combos:i}},n.prototype.changeSize=function(t,r){return this.get("viewController").changeSize(t,r),this},n.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),i=t.get("edges"),o=t.get("edges");re(r,function(a){a.refresh()}),re(i,function(a){a.refresh()}),re(o,function(a){a.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},n.prototype.getNodes=function(){return this.get("nodes")},n.prototype.getEdges=function(){return this.get("edges")},n.prototype.getCombos=function(){return this.get("combos")},n.prototype.getComboChildren=function(t){if(he(t)&&(t=this.findById(t)),t&&(!t.getType||t.getType()==="combo"))return t.getChildren()},n.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var i=r.get("animateCfg"),o=i.onFrame,a=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=a.map(function(c){var l=c.getModel();return{id:l.id,x:l.x,y:l.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(c){re(s,function(l){var h=r.findById(l.id);if(h&&!h.destroyed){var d=h.get("originAttrs"),f=h.get("model"),p=h.getContainer().getMatrix();if(d==null&&(p&&(d={x:p[6],y:p[7]}),h.set("originAttrs",d||0)),o){var g=o(h,c,l,d||{x:0,y:0});h.set("model",Object.assign(f,g))}else d?(f.x=d.x+(l.x-d.x)*c,f.y=d.y+(l.y-d.y)*c):(f.x=l.x,f.y=l.y)}}),r.refreshPositions(t)},{duration:i.duration,easing:i.easing,callback:function(){re(a,function(c){c.set("originAttrs",null)}),i.callback&&i.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},n.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var i,o=r.get("nodes"),a=r.get("edges"),s=r.get("vedges"),u=r.get("combos"),c={},l=function(h){re(h,function(d){i=d.getModel();var f=d.get("originAttrs");if(!f||i.x!==f.x||i.y!==f.y){var p=d.updatePosition({x:i.x,y:i.y});c[i.id]=p,i.comboId&&(c[i.comboId]=c[i.comboId]||p),i.parentId&&(c[i.parentId]=c[i.parentId]||p)}})};l(u),l(o),u&&u.length!==0&&(t&&l(u),r.updateCombos()),re(a,function(h){var d=h.getSource().getModel(),f=h.getTarget();if(!dn(f)){var p=f.getModel();(c[d.id]||c[p.id]||h.getModel().isComboEdge)&&h.refresh()}}),re(s,function(h){h.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},n.prototype.stopAnimate=function(){var t=this.get("canvas").cfg.timeline;t&&t.stopAllAnimations()},n.prototype.isAnimating=function(){return this.animating},n.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},n.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},n.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},n.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},n.prototype.updateLayout=function(t,r,i,o){var a=this;t===void 0&&(t={}),o===void 0&&(o=!0);var s=this.get("layoutController");if(he(t)&&(t={type:t}),r){var u=i;u||(u=r==="begin"?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var c=["force","gForce","fruchterman","force2"];c.includes(t.type)||!t.type&&c.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(d){var f=a.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*f[0]+f[6],u.y=u.y*f[0]+f[7];var p=a.getGroup().getCanvasBBox(),g=p.minX,v=p.maxX,m=p.minY,y={x:(g+v)/2,y:(m+p.maxY)/2};r==="begin"&&(y.x=g,y.y=m),a.translate(u.x-y.x,u.y-y.y)})}var l=P({},this.get("layout")),h={};Object.assign(h,l,t),t.pipes&&!t.type?delete h.type:!t.pipes&&h.type&&delete h.pipes,this.set("layout",h),s&&(s.isLayoutTypeSame(h)&&h.gpuEnabled===l.gpuEnabled?s.updateLayoutCfg(h):s.changeLayout(h),o&&this.get("enabledStack")&&this.pushStack("layout",{before:l,after:h}))},n.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},n.prototype.layout=function(){var t,r=this.get("layoutController"),i=this.get("layout");i&&r&&(i.workerEnabled?r.layout():!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout())},n.prototype.collapseCombo=function(t,r){var i=this;if(r===void 0&&(r=!0),!this.destroyed&&(he(t)&&(t=this.findById(t)),t)){this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var o=t.getModel();this.get("itemController").collapseCombo(t,r),o.collapsed=!0;var a=this.getEdges().concat(this.get("vedges")),s=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||_r(h,function(d){if(c&&d.depth<=o.depth)return!1;if(o.id===d.id&&(c=!0),c){var f=i.findById(d.id);f&&f.getType&&f.getType()==="combo"&&(s=(s=s.concat(f.getNodes())).concat(f.getCombos()))}return!0})});var l={};a.forEach(function(h){var d=h.getModel(),f=d.isVEdge,p=d.size,g=p===void 0?1:p;if(!h.isVisible()||f){var v,m=h.getSource(),y=h.getTarget(),b=null;if(m.getModel().id===o.id||s.includes(m)&&!s.includes(y)?(b=y,v=!1):(y.getModel().id===o.id||!s.includes(m)&&s.includes(y))&&(b=m,v=!0),b){if(f)return void i.removeItem(h,!1);for(var x=b.getModel();!b.isVisible();){var w=x.parentId,E=x.comboId,S=w||E;if(!(b=i.findById(S))||!S)return;x=b.getModel()}var M=x.id,k=v?{source:M,target:o.id,size:g,isVEdge:!0}:{source:o.id,target:M,size:g,isVEdge:!0},_="".concat(k.source,"-").concat(k.target);if(l[_])return void(l[_].size+=g);l[_]=k}}}),this.addItems(Object.values(l).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},n.prototype.expandCombo=function(t,r){var i=this;if(r===void 0&&(r=!0),he(t)&&(t=this.findById(t)),t&&(!t.getType||t.getType()==="combo")){this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var o=t.getModel();this.get("itemController").expandCombo(t,r),o.collapsed=!1;var a=this.getEdges().concat(this.get("vedges")),s=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||_r(h,function(d){if(c&&d.depth<=o.depth)return!1;if(o.id===d.id&&(c=!0),c){var f=i.findById(d.id);f&&f.getType&&f.getType()==="combo"&&(s=(s=s.concat(f.getNodes())).concat(f.getCombos()))}return!0})});var l={};a.forEach(function(h){if(!h.isVisible()||h.getModel().isVEdge){var d,f=h.getSource(),p=h.getTarget(),g=f.get("id"),v=p.get("id"),m=null;if(g===o.id||s.includes(f)&&!s.includes(p)?(m=p,d=!1):v===o.id||!s.includes(f)&&s.includes(p)?(m=f,d=!0):s.includes(f)&&s.includes(p)&&f.isVisible()&&p.isVisible()&&h.show(),m){var y=h.getModel(),b=y.isVEdge,x=y.size,w=x===void 0?1:x;if(b)return void i.removeItem(h,!1);for(var E=m.getModel();!m.isVisible();){var S=E.parentId,M=E.comboId,k=S||M;if(!(m=i.findById(k))||!k)return;E=m.getModel()}for(var _=E.id,C=d?p:f,T=C.getModel();!C.isVisible();){var A=T.parentId,D=T.comboId,R=A||D;if(!(C=i.findById(R))||!R)return;if(T.comboId===o.id||T.parentId===o.id)break;T=C.getModel()}var B=T.id;if(_){var F=d?{source:_,target:B,isVEdge:!0,size:w}:{source:B,target:_,isVEdge:!0,size:w},N="".concat(F.source,"-").concat(F.target);if(l[N])return void(l[N].size+=w);l[N]=F}}}}),this.addItems(Object.values(l).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})}},n.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),he(t)&&(t=this.findById(t)),t&&(!t.getType||t.getType()==="combo")){for(var i=t.getModel(),o=this.findById(i.parentId);o;){var a=o.getModel();if(a.collapsed)return void(o=void 0);o=this.findById(a.parentId)}i.collapsed?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},n.prototype.getNeighbors=function(t,r){var i=t;return he(t)&&(i=this.findById(t)),i.getNeighbors(r)},n.prototype.getNodeDegree=function(t,r,i){r===void 0&&(r=void 0),i===void 0&&(i=!1);var o=t;he(t)&&(o=this.findById(t));var a=this.get("degrees");a&&!i||(a=Ki(this.save()),this.set("degrees",a));var s=a[o.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree}return u},n.prototype.getUndoStack=function(){return this.undoStack},n.prototype.getRedoStack=function(){return this.redoStack},n.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},n.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},n.prototype.pushStack=function(t,r,i){if(t===void 0&&(t="update"),i===void 0&&(i="undo"),this.get("enabledStack")){var o=r?_t(r):{before:{},after:_t(this.save())};i==="redo"?this.redoStack.push({action:t,data:o}):this.undoStack.push({action:t,data:o}),this.emit("stackchange",{action:t,stackType:i,undoStack:this.undoStack,redoStack:this.redoStack})}},n.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var i=this.get("adjMatrix");return i&&t||(i=Oo(this.save(),r),this.set("adjMatrix",i)),i},n.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var i=this.get("adjMatrix"),o=this.get("shortestPathMatrix");return i&&t||(i=Oo(this.save(),r),this.set("adjMatrix",i)),o&&t||(o=ou(this.save(),r),this.set("shortestPathMatrix",o)),o},n.prototype.on=function(t,r,i){return e.prototype.on.call(this,t,r,i)},n.prototype.destroy=function(){var t,r,i,o,a;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(i=this.get("viewController"))===null||i===void 0||i.destroy(),(o=this.get("stateController"))===null||o===void 0||o.destroy(),(a=this.get("canvas"))===null||a===void 0||a.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},n.prototype.createHull=function(t){if(t.members&&!(t.members.length<1)){var r=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),r&&!r.get("destroyed")||((r=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",r)),i[t.id])return i[t.id];var o=r.addGroup({id:"".concat(t.id,"-container")}),a=new YW(this,P(P({},t),{group:o}));return i[a.id]=a,a}},n.prototype.getHulls=function(){return this.get("hullMap")},n.prototype.getHullById=function(t){return this.get("hullMap")[t]},n.prototype.removeHull=function(t){var r,i;i=he(t)?this.getHullById(t):t,(r=this.get("hullMap"))===null||r===void 0||delete r[i.id],i.destroy()},n.prototype.removeHulls=function(){var t=this.getHulls();t&&Object.keys(t).length&&(Object.keys(t).forEach(function(r){t[r].destroy()}),this.set("hullMap",{}))}})(a0);function yb(e){return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yb(e)}var fh=br,oP="-shape",bb="-label",og=["startArrow","endArrow"],aP={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},ag={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:aP,combo:aP},xb="-label-bg",wb={options:{labelCfg:{style:{fontFamily:wt.windowFontFamily}},descriptionCfg:{style:{fontFamily:wt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,n){return n==="move"||n!=null&&n.includes("bbox")?e:Zt({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,n){n.shapeMap={},this.mergeStyle=this.getOptions(e);var t=this.drawShape(e,n);if(t.set("className",this.itemType+oP),n.shapeMap[this.itemType+oP]=t,e.label){var r=this.drawLabel(e,n);r.set("className",this.itemType+bb),n.shapeMap[this.itemType+bb]=r}return t},afterDraw:function(e,n,t){},drawShape:function(e,n){return null},drawLabel:function(e,n){var t=(this.mergeStyle||this.getOptions(e)||{}).labelCfg||{},r=this.getLabelStyle(e,t,n),i=r.rotate;delete r.rotate;var o=n.addShape("text",{attrs:r,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(n.shapeMap["text-shape"]=o,!isNaN(i)&&i!==""){var a=o.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(r.rotateCenter)switch(r.rotateCenter){case"center":default:s=fh(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]]);break;case"lefttop":s=fh(s,[["t",-r.x,-r.y],["r",i],["t",r.x,r.y]]);break;case"leftcenter":s=fh(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]])}else s=fh(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]]);o.setMatrix(s)}if(r.background){var u=this.drawLabelBg(e,n,o),c=this.itemType+xb;u.set("classname",c),n.shapeMap[c]=u,o.toFront()}return o},drawLabelBg:function(e,n,t){var r=ut({},this.options.labelCfg,e.labelCfg),i=this.getLabelBgStyleByPosition(t,r),o=n.addShape("rect",{name:"text-bg-shape",attrs:i,labelRelated:!0});return n.shapeMap["text-bg-shape"]=o,o},getLabelStyleByPosition:function(e,n,t){return{text:e.label}},getLabelBgStyleByPosition:function(e,n){return{}},getLabelStyle:function(e,n,t){var r=this.getLabelStyleByPosition(e,n,t),i="".concat(this.itemType,"Label"),o=wt[i]?wt[i].style:null;return P(P(P({},o),r),n.style)},getShapeStyle:function(e){return e.style},update:function(e,n,t){this.updateShapeStyle(e,n,t),this.updateLabel(e,n,t)},updateShapeStyle:function(e,n,t){var r,i=n.getContainer(),o=n.getKeyShape(),a=ut({},o.attr(),e.style),s=function(c){var l,h=a[c];if(dn(h)){var d=((r=i.shapeMap)===null||r===void 0?void 0:r[c])||i.find(function(f){return f.get("name")===c});d==null||d.attr(h)}else o.attr(((l={})[c]=h,l))};for(var u in a)s(u)},updateLabel:function(e,n,t){var r,i,o=n.getContainer(),a=(this.mergeStyle||this.getOptions({},t)||{}).labelCfg,s=a===void 0?{}:a,u=this.itemType+bb,c=o.shapeMap[u]||o.find(function(b){return b.get("className")===u}),l=this.itemType+xb,h=o.shapeMap[l]||o.find(function(b){return b.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[u],h&&(o.removeChild(h),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!t||t==="bbox|label"||this.itemType==="edge"&&t!=="style")&&(s=Zt(s,e.labelCfg));var d=this.getLabelStyleByPosition(e,s,o),f=(r=e.labelCfg)===null||r===void 0?void 0:r.style,p=P(P({},d),f),g=p.rotate;if(delete p.rotate,isNaN(g)||g==="")((i=c.getMatrix())===null||i===void 0?void 0:i[4])!==1&&c.resetMatrix(),c.attr(p);else{var v=[1,0,0,0,1,0,0,0,1];v=fh(v,[["t",-p.x,-p.y],["r",g],["t",p.x,p.y]]),p.matrix=v,c.attr(p)}if(h)if(p.background){var m=this.getLabelBgStyleByPosition(c,s);h.attr(m)}else o.removeChild(h);else p.background&&((h=this.drawLabelBg(e,o,c)).set("classname",l),o.shapeMap[l]=h,c.toFront())}else{var y=this.drawLabel(e,o);y.set("className",u),o.shapeMap[u]=y}},afterUpdate:function(e,n){},setState:function(e,n,t){var r,i,o,a=t.get("keyShape");if(a&&!a.destroyed){var s=t.getType(),u=qa(n)?e:"".concat(e,":").concat(n),c=this.getStateStyle(u,t),l=t.getStateStyle(u);if(l||c){var h=ut({},l||c),d=t.getContainer(),f={x:1,y:1,cx:1,cy:1,matrix:1};if(s==="combo"&&(f.r=1,f.width=1,f.height=1),n){var p=function(A){var D,R=h[A];if(dn(R)&&!og.includes(A)){var B=((o=d.shapeMap)===null||o===void 0?void 0:o[A])||d.find(function(F){return F.get("name")===A});B==null||B.attr(R)}else a.attr(((D={})[A]=R,D))};for(var g in h)p(g)}else{var v=Jp(t.getCurrentStatesStyle()),m=ut({},t.getModel().style,Jp(t.getOriginStyle())),y=a.get("name"),b=a.attr(),x={};Object.keys(b).forEach(function(A){if(A!=="img"){var D=b[A];D&&yb(D)==="object"?x[A]=_t(D):x[A]=D}});var w={},E=function(A){var D=h[A];if(dn(D)&&!og.includes(A)){var R=d.shapeMap[A]||d.find(function(N){return N.get("name")===A});if(R){var B=Jp(R.attr());re(D,function(N,L){if(A===y&&x[L]&&!f[L]){delete x[L];var z=m[A][L]||ag[s][L];a.attr(L,z)}else if(B[L]||B[L]===0){delete B[L];var Z=m[A][L]||ag[s][L];R.attr(L,Z)}}),w[A]=B}}else if(x[A]&&!f[A]){delete x[A];var F=m[A]||(m[y]?m[y][A]:void 0)||ag[s][A];a.attr(A,F)}};for(var S in h)E(S);for(var g in y?w[y]=x:ut(w,x),v)if(!f[g]){var M=v[g];dn(M)&&!og.includes(g)||(y?(ut(m[y],((i={})[g]=M,i)),delete m[g]):ut(m,((r={})[g]=M,r)),delete v[g])}var k={};Zt(k,m,w,v);var _=!1,C=function(A){var D,R,B=k[A];if(dn(B)&&!og.includes(A)){var F=d.shapeMap[A]||d.find(function(L){return L.get("name")===A});F&&((F.get("type")==="text"||F.get("labelRelated"))&&(delete B.x,delete B.y,delete B.matrix),A===y&&(s==="combo"&&(delete B.r,delete B.width,delete B.height),_=!0),F.attr(B))}else if(!_){var N=B||ag[s][A];s==="combo"?y||a.attr(((D={})[A]=N,D)):a.attr(((R={})[A]=N,R))}};for(var T in k)C(T)}}}},getStateStyle:function(e,n){var t=n.getModel(),r=n.getType(),i=this.getOptions(t),o=i.stateStyles,a=i.style,s=a===void 0?{}:a,u=t.stateStyles?t.stateStyles[e]:o&&o[e];return r==="combo"?_t(u):ut({},s,u)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var n,t;return(e==null?void 0:e.anchorPoints)||((n=this.getCustomConfig(e))===null||n===void 0?void 0:n.anchorPoints)||((t=this.options)===null||t===void 0?void 0:t.anchorPoints)}},XW={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:wt.nodeLabel.offset,getSize:function(e){var n,t=((n=this.mergeStyle)===null||n===void 0?void 0:n.size)||e.size||this.getOptions({}).size||wt.defaultNode.size;return at(t)&&t.length===1&&(t=[t[0],t[0]]),at(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,n){var t=n.maxLength,r=e.label;t&&(r=DN(r,t));var i=n.position||this.labelPosition;if(i==="center")return{x:0,y:0,text:r,textBaseline:"middle",textAlign:"center"};var o=n.offset;ht(o)&&(o=this.offset);var a,s=this.getSize(e);switch(i){case"top":a={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":a={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":a={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:a={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"}}return a.text=r,a},getLabelBgStyleByPosition:function(e,n){var t;if(!e)return{};var r=(t=n.style)===null||t===void 0?void 0:t.background;if(!r)return{};var i=e.getBBox(),o=sb(r.padding),a=i.width+o[1]+o[3],s=i.height+o[0]+o[2];return P(P({x:i.minX-o[3],y:i.minY-o[0]},r),{width:a,height:s})},drawShape:function(e,n){var t=this.shapeType,r=this.getShapeStyle(e),i=n.addShape(t,{attrs:r,draggable:!0,name:"node-shape"});return n.shapeMap["node-shape"]=i,i},updateLinkPoints:function(e,n){var t,r=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n.shapeMap["link-point-left"]||n.find(function(_){return _.get("className")==="link-point-left"}),o=n.shapeMap["link-point-right"]||n.find(function(_){return _.get("className")==="link-point-right"}),a=n.shapeMap["link-point-top"]||n.find(function(_){return _.get("className")==="link-point-top"}),s=n.shapeMap["link-point-bottom"]||n.find(function(_){return _.get("className")==="link-point-bottom"});i&&(t=i.attr()),o&&!t&&(t=o.attr()),a&&!t&&(t=a.attr()),s&&!t&&(t=s.attr()),t||(t=r);var u=ut({},t,e.linkPoints),c=u.fill,l=u.stroke,h=u.lineWidth,d=u.size/2;d||(d=u.r);var f=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=f.left,g=f.right,v=f.top,m=f.bottom,y=this.getSize(e),b=y[0],x=y[1],w={r:d,fill:c,stroke:l,lineWidth:h};if(i)p||p===void 0?i.attr(P(P({},w),{x:-b/2,y:0})):(i.remove(),delete n.shapeMap["link-point-left"]);else if(p){var E="link-point-left";n.shapeMap[E]=n.addShape("circle",{attrs:P(P({},w),{x:-b/2,y:0}),className:E,name:E,isAnchorPoint:!0})}if(o)g||g===void 0||(o.remove(),delete n.shapeMap["link-point-right"]),o.attr(P(P({},w),{x:b/2,y:0}));else if(g){var S="link-point-right";n.shapeMap[S]=n.addShape("circle",{attrs:P(P({},w),{x:b/2,y:0}),className:S,name:S,isAnchorPoint:!0})}if(a)v||v===void 0||(a.remove(),delete n.shapeMap["link-point-top"]),a.attr(P(P({},w),{x:0,y:-x/2}));else if(v){var M="link-point-top";n.shapeMap[M]=n.addShape("circle",{attrs:P(P({},w),{x:0,y:-x/2}),className:M,name:M,isAnchorPoint:!0})}if(s)m||m===void 0?s.attr(P(P({},w),{x:0,y:x/2})):(s.remove(),delete n.shapeMap["link-point-bottom"]);else if(m){var k="link-point-bottom";n.shapeMap[k]=n.addShape("circle",{attrs:P(P({},w),{x:0,y:x/2}),className:k,name:k,isAnchorPoint:!0})}},updateShape:function(e,n,t,r,i){n.get("keyShape").attr(P({},t)),this.updateLabel(e,n,i),r&&this.updateIcon(e,n)},updateIcon:function(e,n){var t=this,r=n.getContainer(),i=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},a=o.show,s=o.text,u=r.shapeMap["".concat(this.type,"-icon")]||r.find(function(v){return v.get("name")==="".concat(t.type,"-icon")});if(u)if(a||a===void 0){var c=ut({},u.attr(),i),l=c.width,h=l===void 0?20:l,d=c.height,f=d===void 0?20:d;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(h=0,f=0),u.attr(P(P({},c),{x:-h/2,y:-f/2}))}else u.remove(),delete r.shapeMap["".concat(this.type,"-icon")];else if(a){var p="".concat(this.type,"-icon");s?r.shapeMap[p]=r.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:p,name:p}):(h=i.width,f=i.height,r.shapeMap[p]=r.addShape("image",{attrs:P(P({},i),{x:-h/2,y:-f/2}),className:p,name:p}));var g=r.shapeMap["node-label"]||r.find(function(v){return v.get("name")==="node-label"});g&&g.toFront()}}},UW=P(P({},wb),XW);En.registerNode("single-node",UW);var sg="edge-shape",WW={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:wt.defaultEdge.size,style:{x:0,y:0,stroke:wt.defaultEdge.style.stroke,lineAppendWidth:wt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:wt.edgeLabel.style.fill,fontSize:wt.edgeLabel.style.fontSize,fontFamily:wt.windowFontFamily}},stateStyles:P({},wt.edgeStateStyles)},getPath:function(e){var n=[];return re(e,function(t,r){r===0?n.push(["M",t.x,t.y]):n.push(["L",t.x,t.y])}),n},getShapeStyle:function(e){var n=ut({},this.options.style,{stroke:e.color},e.style),t=e.size||wt.defaultEdge.size,r=(e=this.getPathPoints(e)).startPoint,i=e.endPoint,o=this.getControlPoints(e),a=[r];o&&(a=a.concat(o)),a.push(i);var s=this.getPath(a);return ut({},wt.defaultEdge.style,{stroke:wt.defaultEdge.color,lineWidth:t,path:s},n)},updateShapeStyle:function(e,n,t){var r,i=n.getContainer(),o=((r=n.getKeyShape)===null||r===void 0?void 0:r.call(n))||i.shapeMap["edge-shape"],a=e.size,s=(e=this.getPathPoints(e)).startPoint,u=e.endPoint,c=this.getControlPoints(e),l=[s];c&&(l=l.concat(c)),l.push(u);var h=o.attr(),d=e.style||{};d.stroke===void 0&&(d.stroke=e.color);var f=e.sourceNode,p=e.targetNode,g={radius:d.radius};c||(g={source:f,target:p,offset:d.offset,radius:d.radius});var v=this.getPath(l,g),m={};t==="move"?m={path:v}:(h.endArrow&&d.endArrow===!1&&(e.style.endArrow={path:""}),h.startArrow&&d.startArrow===!1&&(e.style.startArrow={path:""}),(m=P({},e.style)).lineWidth===void 0&&(m.lineWdith=(Ue(a)?a:a==null?void 0:a[0])||h.lineWidth),m.path===void 0&&(m.path=v),m.stroke===void 0&&(m.stroke=h.stroke||e.color)),o&&o.attr(m)},getLabelStyleByPosition:function(e,n,t){var r,i=n.position||this.labelPosition,o={},a=t==null?void 0:t.shapeMap[sg];r=i==="start"?0:i==="end"?1:.5;var s,u=n.refX||this.refX,c=n.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return o.x=e.startPoint.x+u,o.y=e.startPoint.y+c,o.text=e.label,o;s=ht(n.autoRotate)?this.labelAutoRotate:n.autoRotate;var l=ON(a,r,u,c,s);return o.x=l.x,o.y=l.y,o.rotate=l.rotate,o.textAlign=this._getTextAlign(i,l.angle),o.text=e.label,o},getLabelBgStyleByPosition:function(e,n){if(!e)return{};var t=e.getBBox(),r=n.style&&n.style.background;if(!r)return{};var i=r.padding,o=t.width+i[1]+i[3],a=t.height+i[0]+i[2],s=P(P({},r),{width:o,height:a,x:t.minX-i[3],y:t.minY-i[0],matrix:[1,0,0,0,1,0,0,0,1]});return(ht(n.autoRotate)?this.labelAutoRotate:n.autoRotate)&&(s.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),s},_getTextAlign:function(e,n){var t="center";return n?(n%=2*Math.PI,e!=="center"&&(t=n>=0&&n<=Math.PI/2||n>=1.5*Math.PI&&n<2*Math.PI?e:function(r){var i=r;return r==="start"?i="end":r==="end"&&(i="start"),i}(e)),t):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,n){var t=this.getShapeStyle(e),r=n.addShape("path",{className:sg,name:sg,attrs:t});return n.shapeMap[sg]=r,r},drawLabel:function(e,n){var t=this.options.labelCfg,r=Zt({},t,e.labelCfg),i=this.getLabelStyle(e,r,n),o=i.rotate;delete i.rotate;var a=n.addShape("text",{attrs:i,name:"text-shape",labelRelated:!0,draggable:!0});if(n.shapeMap["text-shape"]=a,isNaN(o)||o===""||a.rotateAtStart(o),i.background){var s=this.drawLabelBg(e,n,a,i,o),u=this.itemType+xb;s.set("classname",u),n.shapeMap[u]=s,a.toFront()}return a},drawLabelBg:function(e,n,t,r,i){var o=this.options.labelCfg,a=Zt({},o,e.labelCfg),s=this.getLabelBgStyleByPosition(t,a),u=n.addShape("rect",{name:"text-bg-shape",attrs:s,labelRelated:!0});return n.shapeMap["text-bg-shape"]=u,u}},VW=P(P({},wb),WW);En.registerEdge("single-edge",VW),En.registerEdge("line",{getControlPoints:function(){}},"single-edge"),En.registerEdge("spline",{getPath:function(e){return KN(e)}},"single-edge"),En.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var n,t,r=e.startPoint,i=e.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2;if(e.controlPoints!==void 0){if(t=e.controlPoints[0],n=Z1(r,t,i),r.x<=i.x&&r.y>i.y?this.clockwise=n.x>t.x?0:1:r.x<=i.x&&r.y<i.y?this.clockwise=n.x>t.x?1:0:r.x>i.x&&r.y<=i.y?this.clockwise=n.y<t.y?0:1:this.clockwise=n.y<t.y?1:0,(t.x-r.x)/(t.y-r.y)==(i.x-r.x)/(i.y-r.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),at(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:i.x-r.x,y:i.y-r.y},u=Math.atan2(s.y,s.x);t={x:e.curveOffset*Math.cos(-Math.PI/2+u)+o,y:e.curveOffset*Math.sin(-Math.PI/2+u)+a},n=Z1(r,t,i)}var c=Hp(r,n);return[{x:c,y:c}]},getPath:function(e){var n=[];return n.push(["M",e[0].x,e[0].y]),e.length===2?n.push(["L",e[1].x,e[1].y]):n.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),n}},"single-edge"),En.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var n=e.controlPoints;if(!n||!n.length){var t=e.startPoint,r=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),at(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),at(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]),n=[ig(t,r,e.curvePosition,e.curveOffset)]}return n},getPath:function(e){var n=[];return n.push(["M",e[0].x,e[0].y]),n.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),n}},"single-edge"),En.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(e){var n=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),Ue(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Ue(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!n||!n.length||n.length<2){var t=e.startPoint,r=e.endPoint;n=[ig(t,r,e.curvePosition[0],e.curveOffset[0]),ig(t,r,e.curvePosition[1],e.curveOffset[1])]}return n},getPath:function(e){var n=[];return n.push(["M",e[0].x,e[0].y]),n.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),n}},"single-edge"),En.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var n=e.startPoint,t=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Ue(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Ue(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Ue(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var r=t.y-n.y,i=[0,0];return e.curveOffset?i=e.curveOffset:Math.abs(r)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset),[{x:n.x,y:n.y+r*this.curvePosition[0]+i[0]},{x:t.x,y:t.y-r*this.curvePosition[1]+i[1]}]}},"cubic"),En.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var n=e.startPoint,t=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Ue(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Ue(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Ue(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var r=t.x-n.x,i=[0,0];return e.curveOffset?i=e.curveOffset:Math.abs(r)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset),[{x:n.x+r*this.curvePosition[0]+i[0],y:n.y},{x:t.x-r*this.curvePosition[1]+i[1],y:t.y}]}},"cubic"),En.registerEdge("loop",{getPathPoints:function(e){return TN(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var HW={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:wt.comboLabel.refX,refY:wt.comboLabel.refY,options:{style:{stroke:wt.defaultCombo.style.stroke,fill:wt.defaultCombo.style.fill,lineWidth:wt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:wt.comboLabel.style.fill,fontSize:wt.comboLabel.style.fontSize,fontFamily:wt.windowFontFamily}},stateStyles:P({},wt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var n=_t(e.size||this.options.size||wt.defaultCombo.size);return at(n)&&n.length===1&&(n=[n[0],n[0]]),at(n)||(n=[n,n]),n},getLabelStyleByPosition:function(e,n){var t=n.position||this.labelPosition,r=e.style,i=e.padding||this.options.padding;at(i)&&(i=Math.max.apply(Math,i));var o=n.refX,a=n.refY;ht(o)&&(o=this.refX),ht(a)&&(a=this.refY);var s,u=this.getSize(e),c=(Math.max(r.r,u[0]/2)||u[0]/2)+i;switch(t){case"top":s={x:0,y:-c-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:c+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-c+o,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:e.label,textAlign:"center"};break;default:s={x:c+o,y:0,textAlign:"right"}}return s.text=e.label,s},drawShape:function(e,n){var t=this.shapeType,r=this.getShapeStyle(e);return n.addShape(t,{attrs:r,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(e,n,t){var r=e.collapsed,i=e.collapsedSubstituteIcon,o=i===void 0?{}:i,a=Object.assign({},this.options.collapsedSubstituteIcon,o),s=a.show,u=a.img,c=a.width,l=a.height,h=n.getContainer(),d=h.find(function(v){return v.get("name")==="combo-collapsed-substitute-icon"}),f=d&&!d.destroyed,p=n.get("keyShape");if(r&&s){if(f)d.show();else{var g={width:c||2*t.r||t.width,height:l||2*t.r||t.height};d=h.addShape("image",{attrs:P({img:u,x:-g.width/2,y:-g.height/2},g),name:"combo-collapsed-substitute-icon",draggable:!0})}p.hide()}else f&&(d.hide(),p.show())},updateShape:function(e,n,t){var r=this,i=n.get("keyShape");n.get("animate")&&(e.animate===void 0?this.options.animate:e.animate)&&i.animate?(e.collapsed||this.updateCollapsedIcon(e,n,t),i.animate(t,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&r.updateCollapsedIcon(e,n,t)}})):(i.attr(P({},t)),this.updateCollapsedIcon(e,n,t)),this.updateLabel(e,n)}},qW=P(P({},wb),HW);En.registerCombo("single-combo",qW),En.registerCombo("circle",{options:{size:[wt.defaultCombo.size[0],wt.defaultCombo.size[0]],padding:Math.max.apply(Math,wt.defaultCombo.padding),animate:!0,style:{stroke:wt.defaultCombo.style.stroke,fill:wt.defaultCombo.style.fill,lineWidth:wt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:wt.comboLabel.style.fill,fontSize:wt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:P({},wt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,n){var t=this.getShapeStyle(e);return delete t.height,delete t.width,n.addShape("circle",{attrs:t,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(e){var n=this.options.style,t=e.padding||this.options.padding;at(t)&&(t=Math.max.apply(Math,t));var r,i=ut({},n,{stroke:e.color},e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;if(o)r=Ue(o)?o/2:o[0]/2;else{var a=this.getSize(e);r=!Ue(i.r)||isNaN(i.r)?a[0]/2||wt.defaultCombo.style.r:Math.max(i.r,a[0]/2)||a[0]/2}i.r=r+t;var s=P({x:0,y:0},i);return e.style?e.style.r=r:e.style={r},s},update:function(e,n){var t=this.getSize(e),r=e.padding||this.options.padding;at(r)&&(r=Math.max.apply(Math,r));var i,o=_t(e.style),a=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;i=a?Ue(a)?a/2:a[0]/2:Math.max(o.r,t[0]/2)||t[0]/2,o.r=i+r;var s=n.get("sizeCache");s&&(s.r=o.r);var u={stroke:e.color},c=ut({},n.get("keyShape").attr(),u,o);e.style?e.style.r=i:e.style={r:i},this.updateShape(e,n,c,!0)}},"single-combo"),En.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:wt.defaultCombo.style.stroke,fill:wt.defaultCombo.style.fill,lineWidth:wt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:wt.comboLabel.style.fill,fontSize:wt.comboLabel.style.fontSize,fontFamily:wt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:P({},wt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,n){var t=this.getShapeStyle(e);return n.addShape("rect",{attrs:t,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(e,n){var t=n.position||this.labelPosition,r=e.style,i=e.padding||this.options.padding;Ue(i)&&(i=[i,i,i,i]);var o=n.refX,a=n.refY;ht(o)&&(o=this.refX),ht(a)&&(a=this.refY);var s,u=-r.width/2-i[3],c=r.width/2+i[1],l=-r.height/2-i[0],h=r.height/2+i[2];switch(t){case"top":s={x:u+o,y:l+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:h+a,textBaseline:"top",textAlign:"center"};break;case"left":s={x:u+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":s={x:0,y:l+a,textBaseline:"top",textAlign:"center"};break;default:s={x:c+o,y:0,textAlign:"right"}}return s.text=e.label,s},getShapeStyle:function(e){var n=this.options.style,t=e.padding||this.options.padding;Ue(t)&&(t=[t,t,t,t]);var r,i,o=ut({},n,{stroke:e.color},e.style),a=this.getSize(e),s=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;s?Ue(s)?(r=s,i=s):(r=s[0],i=s[1]):(r=!Ue(o.width)||isNaN(o.width)?a[0]||wt.defaultCombo.style.width:Math.max(o.width,a[0])||a[0],i=!Ue(o.height)||isNaN(o.height)?a[1]||wt.defaultCombo.style.height:Math.max(o.height,a[1])||a[1]);var u=-r/2-t[3],c=-i/2-t[0];o.width=r+t[1]+t[3],o.height=i+t[0]+t[2];var l=P({x:u,y:c},o);return e.style?(e.style.width=r,e.style.height=i):e.style={width:r,height:i},l},update:function(e,n){var t=this.getSize(e),r=e.padding||this.options.padding;Ue(r)&&(r=[r,r,r,r]);var i,o,a=_t(e.style),s=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;s?Ue(s)?(i=s,o=s):(i=s[0],o=s[1]):(i=Math.max(a.width,t[0])||t[0],o=Math.max(a.height,t[1])||t[1]),a.width=i+r[1]+r[3],a.height=o+r[0]+r[2];var u=n.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-i/2-r[3],a.y=-o/2-r[0];var c={stroke:e.color},l=ut({},n.get("keyShape").attr(),c,a);e.style?(e.style.width=i,e.style.height=o):e.style={width:i,height:o},this.updateShape(e,n,l,!1)}},"single-combo"),En.registerNode("simple-circle",{options:{size:wt.defaultNode.size,style:{x:0,y:0,stroke:wt.defaultNode.style.stroke,fill:wt.defaultNode.style.fill,lineWidth:wt.defaultNode.style.lineWidth},labelCfg:{style:{fill:wt.nodeLabel.style.fill,fontSize:wt.nodeLabel.style.fontSize,fontFamily:wt.windowFontFamily}},stateStyles:P({},wt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,n){var t=this.getShapeStyle(e),r="".concat(this.type,"-keyShape"),i=n.addShape("circle",{attrs:t,className:"".concat(this.type,"-keyShape"),name:r,draggable:!0});return n.shapeMap[r]=i,i},getShapeStyle:function(e){var n=(this.mergeStyle||this.getOptions(e)).style,t={stroke:e.color},r=Zt({},n,t),i=this.getSize(e)[0]/2;return P({x:0,y:0,r:i},r)},update:function(e,n,t){var r=this.getSize(e),i={stroke:e.color,r:r[0]/2},o=n.get("keyShape"),a=Zt({},o.attr(),i,e.style);this.updateShape(e,n,a,!0,t)}},"single-node"),En.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:wt.defaultNode.style.stroke,fill:wt.defaultNode.style.fill,lineWidth:wt.defaultNode.style.lineWidth},labelCfg:{style:{fill:wt.nodeLabel.style.fill,fontSize:wt.nodeLabel.style.fontSize,fontFamily:wt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:P({},wt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,n){var t=this.getShapeStyle(e);return n.addShape("rect",{attrs:t,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(e){var n=ut({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),t=this.getSize(e),r=n.width||t[0],i=n.height||t[1];return P({x:-r/2,y:-i/2,width:r,height:i},n)},update:function(e,n,t){n.getContainer();var r=(this.mergeStyle||this.getOptions(e)).style,i=this.getSize(e),o=n.get("keyShape");e.size||(i[0]=o.attr("width")||r.width,i[1]=o.attr("height")||r.height);var a={stroke:e.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=ut({},r,o.attr(),a);s=ut(s,e.style),this.updateShape(e,n,s,!1,t)}},"single-node"),En.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:wt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,n){var t=this.shapeType,r=this.getShapeStyle(e);delete r.fill;var i=n.addShape(t,{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,i),i},drawClip:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).clipCfg;if(t.show){var r=t.type,i=t.x,o=t.y,a=t.style;if(r==="circle"){var s=t.r;n.setClip({type:"circle",attrs:P({r:s,x:i,y:o},a)})}else if(r==="rect"){var u=t.width,c=t.height,l=i-u/2,h=o-c/2;n.setClip({type:"rect",attrs:P({x:l,y:h,width:u,height:c},a)})}else if(r==="ellipse"){var d=t.rx,f=t.ry;n.setClip({type:"ellipse",attrs:P({x:i,y:o,rx:d,ry:f},a)})}else if(r==="polygon"){var p=t.points;n.setClip({type:"polygon",attrs:P({points:p},a)})}else if(r==="path"){var g=t.path;n.setClip({type:"path",attrs:P({path:g},a)})}}},getShapeStyle:function(e){var n=this.mergeStyle||this.getOptions(e),t=n.style,r=n.img,i=this.getSize(e),o=i[0],a=i[1];return t&&(o=t.width||i[0],a=t.height||i[1]),P({x:-o/2,y:-a/2,width:o,height:a,img:r},t)},updateShapeStyle:function(e,n){var t=n.getContainer(),r="".concat(this.itemType,"-shape"),i=t.shapeMap[r]||t.find(function(a){return a.get("className")===r})||n.getKeyShape(),o=this.getShapeStyle(e);i&&!i.destroyed&&i.attr(o)}},"single-node");const ZW=Object.freeze(Object.defineProperty({__proto__:null,defaultSubjectColors:["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"]},Symbol.toStringTag,{value:"Module"}));var sP=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"};const KW=Object.freeze(Object.defineProperty({__proto__:null,isForce:sP},Symbol.toStringTag,{value:"Module"}));var $W=br,So=P(P(P(P(P(P(P({},AW),_W),BW),xW),ZW),KW),{transform:$W,mat3:l0}),za=(function(){function e(n){this.graph=n,this.layoutCfg=n.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}e.prototype.initLayout=function(){},e.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},e.prototype.getLayoutCfgType=function(n){var t=n.type;if(t)return t;var r=n.pipes;return Array.isArray(r)?r.map(function(i){return(i==null?void 0:i.type)||""}):null},e.prototype.isLayoutTypeSame=function(n){var t=this.getLayoutCfgType(n),r=Array.isArray(this.layoutType),i=Array.isArray(t);return r&&i?this.layoutType.every(function(o,a){return o===t[a]}):!Array.isArray(t)&&!Array.isArray(this.layoutType)&&(n==null?void 0:n.type)===this.layoutType},e.prototype.refreshLayout=function(){var n=this,t=n.graph,r=n.layoutType,i=n.layoutCfg;if(t){var o=(i===void 0?{}:i).animate,a=o===void 0&&(r==="force"||r==="force2"),s=sP(r)&&(o||a);t.get("animate")&&!s?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},e.prototype.changeLayout=function(n){var t=n.disableTriggerLayout,r=yn(n,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,t||this.layout()},e.prototype.changeData=function(n){this.layout(n)},e.prototype.destoryLayoutMethods=function(){var n=this.layoutMethods,t=[];return n==null||n.forEach(function(r){var i,o=(i=r.getType)===null||i===void 0?void 0:i.call(r);o&&t.push(o),r.destroy()}),this.layoutMethods=[],t},e.prototype.destroyLayout=function(){this.destoryLayoutMethods();var n=this.graph;n&&!n.get("destroyed")&&n.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},e.prototype.setDataFromGraph=function(){for(var n,t=[],r=[],i=[],o=[],a=[],s=[],u=[],c=this.graph.getNodes(),l=this.graph.getEdges(),h=this.graph.getCombos(),d=c.length,f=0;f<d;f++){var p=c[f];if(p&&!p.destroyed){var g=p.getModel();p.isVisible()?t.push(g):r.push(g)}}var v=l.length;for(f=0;f<v;f++){var m=l[f];m&&!m.destroyed&&(g=m.getModel(),m.isVisible()?g.isComboEdge?a.push(g):i.push(g):o.push(g))}var y=h.length;for(f=0;f<y;f++){var b=h[f];b.destroyed||(g=b.getModel(),b.isVisible()?s.push(g):u.push(g))}return{nodes:t,hiddenNodes:r,edges:i,hiddenEdges:o,combos:s,hiddenCombos:u,comboEdges:a,vedges:(n=this.graph.get("vedges"))===null||n===void 0?void 0:n.map(function(x){return x.getModel()})}},e.prototype.relayout=function(n){var t=this,r=this,i=r.graph,o=r.layoutMethods,a=r.layoutCfg;if(i&&!i.get("destroyed")){var s=Promise.resolve();if(n){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(a.center,u)}i.emit("beforelayout"),o==null||o.forEach(function(c,l){var h=a[l]||a;s=s.then(function(){var d,f=t.execLayoutMethod(h,l);return l===o.length-1&&((d=a.onAllLayoutEnd)===null||d===void 0||d.call(a)),f})})}},e.prototype.filterLayoutData=function(n,t){var r,i,o=n.nodes,a=n.edges,s=yn(n,["nodes","edges"]);if(!o)return n;r=gn(t==null?void 0:t.nodesFilter)?t.nodesFilter:function(){return!0};var u=o.filter(r);if(gn(t==null?void 0:t.edgesFilter))i=t.edgesFilter;else{var c=u.reduce(function(l,h){return l[h.id]=!0,l},{});i=function(l){return c[l.source]&&c[l.target]}}return P({nodes:u,edges:a.filter(i)},s)},e.prototype.getLayoutBBox=function(n){var t=eu(this.graph.getNodes(),function(i){return i.getModel().layoutOrder}),r=Object.values(t).map(function(i){var o=BN(i);return o.size=[o.width,o.height],o});return{groupNodes:Object.values(eu(n,"layoutOrder")),layoutNodes:r}},e.prototype.layoutAnimate=function(){},e.prototype.moveToZero=function(){var n=this.graph.get("data").nodes;if(n[0].x!==void 0&&n[0].x!==null&&!wo(n[0].x)){for(var t=[0,0],r=n.length,i=0;i<r;i++){var o=n[i];t[0]+=o.x,t[1]+=o.y}for(t[0]/=n.length,t[1]/=n.length,i=0;i<r;i++)(o=n[i]).x-=t[0],o.y-=t[1]}},e.prototype.initPositions=function(n,t){var r;return Nr(this,void 0,void 0,function(){var i,o,a;return Pr(this,function(s){return i=this.graph,t!=null&&t.length?(o=t.filter(function(u){return wo(u.x)||wo(u.y)}),(a=o?o.length:0)?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=.85*i.get("width"),c=.85*i.get("height"),l=Math.ceil(Math.sqrt(a)*(u/c)),h=u/(l-1),d=c/(Math.ceil(a/l)-1);isFinite(h)&&h||(h=0),isFinite(d)&&h||(d=0);for(var f=n[0]-u/2,p=n[1]-c/2,g=0;g<a;g++){var v=o[g];wo(+v.x)&&(v.x=g%l*h+f),wo(+v.y)&&(v.y=Math.floor(g/l)*d+p)}})]:[2]):[2,Promise.resolve()]})})},e.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0}}(),En.registerNode),QW=En.registerEdge;En.registerCombo;var it=wt;En.registerNode,En.registerEdge,En.registerCombo,fN.registerBehavior;var JW=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eV=So.applyMatrix,tV=function(e){function n(t){return e.call(this,t)||this}return JW(n,e),n.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},n.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},n.prototype.disableRefresh=function(){this.set("refresh",!1)},n.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},n.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},n.prototype.initViewport=function(){var t=this,r=this._cfgs,i=r.graph;if(!this.destroyed){var o=this.get("container");he(o)&&(o=document.getElementById(o));var a=xn("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,c=!1,l=0,h=0,d=0,f=0,p=0,g=0;o.addEventListener("mousedown",function(v){if(r.refresh=!1,v.target===a){var m=a.style;d=parseInt(m.width,10),f=parseInt(m.height,10);var y=t.get("width"),b=t.get("height");d>y||f>b||(g=i.getZoom(),p=t.get("ratio"),c=!0,s=v.clientX,u=v.clientY)}},!1),o.addEventListener("mousemove",function(v){if(c&&!ht(v.clientX)&&!ht(v.clientY)){var m=t.get("width"),y=t.get("height"),b=a.style;l=parseInt(b.left,10),h=parseInt(b.top,10),d=parseInt(b.width,10),f=parseInt(b.height,10);var x=s-v.clientX,w=u-v.clientY;l-x<0?x=l:l-x+d>=m&&(x=0),h-w<0?w=h:h-w+f>=y&&(w=0),h-=w,Ht(a,{left:"".concat(l-=x,"px"),top:"".concat(h,"px")}),i.translate(x*g/p,w*g/p),s=v.clientX,u=v.clientY}},!1),o.addEventListener("mouseleave",function(){c=!1,r.refresh=!0},!1),o.addEventListener("mouseup",function(){c=!1,r.refresh=!0},!1),this.set("viewport",a),o.appendChild(a)}},n.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),i=this.get("height"),o=this.get("graph"),a=o.get("width"),s=a/o.get("height"),u=o.getGroup(),c=u.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],h=[c.maxX-c.minX,c.maxY-c.minY],d={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>s?(d.width=h[0],d.height=d.width/s):(d.height=h[1],d.width=d.height*s),d.minX=l[0]-d.width/2,d.minY=l[1]-d.height/2;var f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]);var p=qh([1,0,0,0,1,0,0,0,1],f),g=eV({x:d.minX,y:d.minY},p),v=o.getCanvasByPoint(g.x,g.y),m=this.get("viewport");m||this.initViewport();var y=a/d.width,b=y*r,x=y*i,w=r*-v.x/d.width,E=i*-v.y/d.height,S=w+b,M=E+x;w<0&&(b+=w,w=0),S>r&&(b-=S-r),E<0&&(x+=E,E=0),M>i&&(x-=M-i),this.set("ratio",t),Ht(m,{left:"".concat(w,"px"),top:"".concat(E,"px"),width:"".concat(b,"px"),height:"".concat(x,"px")})}},n.prototype.init=function(){this.initContainer()},n.prototype.initContainer=function(){var t=this,r=t.get("graph"),i=r.get("width"),o=r.get("height")/i,a=t.get("className"),s=t.get("container"),u=t.get("width"),c=t.get("height");u||c||(u=200),u?(c=o*u,t.set("height",c)):(u=1/o*c,t.set("width",u));var l=xn("<div class='".concat(a,"' style='width: ").concat(u,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));he(s)&&(s=document.getElementById(s)),s?s.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var h=xn('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(h);var d=xn('<span style="display: table-cell; vertical-align: middle; "></span>');h.appendChild(d),t.set("containerDOM",h),t.set("containerSpan",d);var f=xn('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",f),t.updateImgSize(),d.appendChild(f),t.updateCanvas()},n.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),i=t.get("width"),o=t.get("height");r.onload=function(){var a=function(s){var u,c;if(s.naturalWidth)u=s.naturalWidth,c=s.naturalHeight;else{var l=new Image;l.src=s.src,l.onload=function(){}}return[u,c]}(r);a[0]>a[1]?r.width=i:r.height=o}},n.prototype.updateCanvas=function(){if(this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var r=this.get("width")/t.get("canvas").getCanvasBBox().width;this.set("ratio",r),this.updateViewport()}}},n.prototype.getViewport=function(){return this.get("viewport")},n.prototype.getContainer=function(){return this.get("container")},n.prototype.updateGraphImg=function(t){var r=this;r.get("imgDOM").remove(),r.set("graphImg",t);var i=xn('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",i),i.src=t,r.updateImgSize(),r.get("containerSpan").appendChild(i),r.updateCanvas()},n.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},n}(Xr),nV=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Eb=function(){return Eb=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Eb.apply(this,arguments)},rV=So.distance,uP={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},iV=function(e){function n(t){return e.call(this,t)||this}return nV(n,e),n.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:_t(uP),showLabel:"edge",scaleRBy:"wheel"}},n.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"}}return t},n.prototype.init=function(){var t=this,r=t.get("showLabel"),i=r==="node"||r==="both",o=r==="edge"||r==="both";t.set("showNodeLabel",i),t.set("showEdgeLabel",o),t.get("shouldShow")||t.set("shouldShow",function(){return!0})},n.prototype.createDelegate=function(t){var r=this,i=r.get("delegate");i&&!i.destroyed||(r.filter(t),(i=r.get("delegate")).on("dragstart",function(o){}),i.on("drag",function(o){r.filter(o)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(o){r.scaleRByWheel(o)}))},n.prototype.scaleRByWheel=function(t){var r=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var i,o=r.get("graph"),a=r.get("delegate");a&&{x:a.attr("x"),y:a.attr("y")}||o.getPointByClient(t.clientX,t.clientY),i=t.originalEvent.wheelDelta<0?.95:1/.95;var s=r.get("maxR"),u=r.get("minR"),c=r.get("r");(c>(s||o.get("height"))&&i>1||c<(u||.05*o.get("height"))&&i<1)&&(i=1),c*=i,r.set("r",c),r.filter(t)}},n.prototype.filter=function(t){var r=this,i=r.get("graph"),o=i.getNodes(),a={},s=r.get("r"),u=r.get("type"),c={x:t.x,y:t.y};r.updateDelegate(c,s);var l=r.get("shouldShow"),h=r.get("vShapes");h&&h.forEach(function(m){m.remove(),m.destroy()}),h=[],o.forEach(function(m){var y=m.getModel(),b=y.x,x=y.y;rV({x:b,y:x},c)<s&&(a[y.id]=m)});var d=i.getEdges(),f=[];d.forEach(function(m){var y=m.getModel(),b=y.source,x=y.target;l(y)&&(u==="only-source"||u==="one"?a[b]&&!a[x]&&f.push(m):u==="only-target"||u==="one"?a[x]&&!a[b]&&f.push(m):u==="both"&&a[b]&&a[x]&&f.push(m))});var p=r.get("showNodeLabel"),g=r.get("showEdgelabel"),v=i.get("group");f.forEach(function(m){m.get("group").get("children").forEach(function(y){var b=y.get("type"),x=v.addShape(b,{attrs:y.attr()});h.push(x),p&&b==="text"&&x.set("visible",!0)})}),Object.keys(a).forEach(function(m){var y=a[m].get("group").clone();if(v.add(y),h.push(y),g)for(var b=y.get("children"),x=0;x<b.length;x++){var w=b[x];w.get("type")==="text"&&w.set("visible",!0)}}),r.set("vShapes",h)},n.prototype.updateParams=function(t){var r=this,i=t.r,o=t.trigger,a=t.minR,s=t.maxR,u=t.scaleRBy,c=t.showLabel,l=t.shouldShow;if(isNaN(t.r)||r.set("r",i),isNaN(s)||r.set("maxR",s),isNaN(a)||r.set("minR",a),o!=="mousemove"&&o!=="click"||r.set("trigger",o),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var h=r.get("dPercentText");h&&(h.remove(),h.destroy())}c!=="node"&&c!=="both"||r.set("showNodeLabel",!0),c!=="edge"&&c!=="both"||r.set("showEdgeLabel",!0),l&&r.set("shouldShow",l)},n.prototype.updateDelegate=function(t,r){var i=this,o=i.get("graph"),a=i.get("delegate");if(!a||a.destroyed){var s=o.get("group"),u=i.get("delegateStyle")||uP;a=s.addShape("circle",{attrs:Eb({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(c){i.scaleRByWheel(c)})}else a.attr({x:t.x,y:t.y,r});i.set("delegate",a)},n.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(o){o.remove(),o.destroy()}),r=[],t.set("vShapes",r);var i=t.get("delegate");i&&!i.destroyed&&(i.remove(),i.destroy())},n.prototype.destroy=function(){this.clear()},n}(Xr),oV=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aV=So.pointLineDistance,sV={stroke:"#FA8C16",lineWidth:1},uV=function(e){function n(t){return e.call(this,t)||this}return oV(n,e),n.prototype.getDefaultCfgs=function(){return{line:sV,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},n.prototype.init=function(){},n.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},n.prototype.onDragStart=function(){this.initBoxLine()},n.prototype.onDrag=function(t){var r=t.item,i=(r.get("delegateShape")||r).getBBox(),o=r.getModel(),a=o.x-i.x,s=o.y-i.y;this.show({x:i.minX+a,y:i.minY+s},{width:i.width,height:i.height})},n.prototype.onDragEnd=function(){this.destory()},n.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,i=t.verticalLines,o=t.itemAlignType;this.get("graph").getNodes().forEach(function(a){var s=a.getBBox(),u=a.get("id");o===!0||o==="horizontal"?(r["".concat(u,"tltr")]=[s.minX,s.minY,s.maxX,s.minY,a],r["".concat(u,"lcrc")]=[s.minX,s.centerY,s.maxX,s.centerY,a],r["".concat(u,"blbr")]=[s.minX,s.maxY,s.maxX,s.maxY,a]):o==="center"&&(r["".concat(u,"lcrc")]=[s.minX,s.centerY,s.maxX,s.centerY,a]),o===!0||o==="vertical"?(i["".concat(u,"tlbl")]=[s.minX,s.minY,s.minX,s.maxY,a],i["".concat(u,"tcbc")]=[s.centerX,s.minY,s.centerX,s.maxY,a],i["".concat(u,"trbr")]=[s.maxX,s.minY,s.maxX,s.maxY,a]):o==="center"&&(i["".concat(u,"tcbc")]=[s.centerX,s.minY,s.centerX,s.maxY,a])})},n.prototype.show=function(t,r){var i=ut({},t);return this.itemAlign(t,r,i),t},n.prototype.itemAlign=function(t,r,i){var o=this,a=this._cfgs,s=a.horizontalLines,u=a.verticalLines,c=a.tolerance,l={x:i.x+r.width/2,y:i.y},h={x:i.x+r.width/2,y:i.y+r.height/2},d={x:i.x+r.width/2,y:i.y+r.height},f={x:i.x,y:i.y+r.height/2},p={x:i.x+r.width,y:i.y+r.height/2},g=[],v=[],m=null;if(this.clearAlignLine(),re(s,function(b){b[4].isVisible&&(g.push(o.getLineDisObject(b,l)),g.push(o.getLineDisObject(b,h)),g.push(o.getLineDisObject(b,d)))}),re(u,function(b){b[4].isVisible&&(v.push(o.getLineDisObject(b,f)),v.push(o.getLineDisObject(b,h)),v.push(o.getLineDisObject(b,p)))}),g.sort(function(b,x){return b.dis-x.dis}),v.sort(function(b,x){return b.dis-x.dis}),g.length!==0&&g[0].dis<c){t.y=g[0].line[1]-g[0].point.y+i.y,m={type:"item",horizontals:[g[0]]};for(var y=1;y<3;y++)g[0].dis===g[y].dis&&m.horizontals.push(g[y])}if(v.length!==0&&v[0].dis<c)for(t.x=v[0].line[0]-v[0].point.x+i.x,m?m.verticals=[v[0]]:m={type:"item",verticals:[v[0]]},y=1;y<3;y++)v[0].dis===v[y].dis&&m.verticals.push(v[y]);m&&(m.bbox=r,this.addAlignLine(m))},n.prototype.addAlignLine=function(t){var r=t.bbox,i=t.type,o=t.horizontals,a=t.verticals,s=this._cfgs,u=s.line,c=s.alignLines,l=this.get("graph").get("group");i==="item"&&(o&&re(o,function(h){var d,f,p=h.line,g=h.point,v=(p[0]+p[2])/2;g.x<v?(d=g.x-r.width/2,f=Math.max(p[0],p[2])):(d=g.x+r.width/2,f=Math.min(p[0],p[2]));var m=ut({x1:d,y1:p[1],x2:f,y2:p[1]},u),y=l.addShape("line",{attrs:m,capture:!1});c.push(y)}),a&&re(a,function(h){var d,f,p=h.line,g=h.point,v=(p[1]+p[3])/2;g.y<v?(d=g.y-r.height/2,f=Math.max(p[1],p[3])):(d=g.y+r.height/2,f=Math.min(p[1],p[3]));var m=ut({x1:p[0],y1:d,x2:p[0],y2:f},u),y=l.addShape("line",{attrs:m,capture:!1});c.push(y)}))},n.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:aV(t,r)}},n.prototype.getContainer=function(){return this.get("container")},n.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;re(t,function(r){r.remove()}),t.length=0},n.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,i=t.verticalLines;this.get("graph").getNodes().forEach(function(o){var a=o.get("id");delete r["".concat(a,"tltr")],delete r["".concat(a,"lcrc")],delete r["".concat(a,"blbr")],delete i["".concat(a,"tlbl")],delete i["".concat(a,"tcbc")],delete i["".concat(a,"trbr")]}),this.clearAlignLine()},n}(Xr),cV=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_n=function(){return _n=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},_n.apply(this,arguments)},lV=["click","mouseenter"],hV=function(e){function n(t){return e.call(this,t)||this}return cV(n,e),n.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},n.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{};t.multiple&&t.trigger==="mouseenter"&&this.set("multiple",!1);var r=this.get("align");if(!r){var i=this.get("position").split("-");i.includes("left")&&(r="left"),r=i.includes("right")?"right":"center",this.set("align",r)}var o=this.get("graph").get("container"),a=xn(`<div class='g6-legend-container' style="position: absolute;"></div>`);o.appendChild(a),this.set("container",a);var s=this.render();Ht(a,this.getContainerPos(s)),this.bindEvents()},n.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this.get("graph"),i=this.get("offsetX"),o=this.get("offsetY"),a=this.get("margin"),s=this.get("position").split("-"),u={top:0,right:1,bottom:2,left:3},c={left:(r.getWidth()-t[0])/2+0,top:(r.getHeight()-t[1])/2+0};return s.forEach(function(l){var h=a[u[l]],d=l;switch(l){case"top":case"left":h+=0;break;case"bottom":h=r.getHeight()-t[1]-h+0,d="top";break;default:h=r.getWidth()-t[0]-h+0,d="left"}c[d]=h}),c.top+=o+r.getContainer().offsetTop,c.left+=i+r.getContainer().offsetLeft,Object.keys(c).forEach(function(l){c[l]="".concat(c[l],"px")}),c},n.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(r&&r.enable){var i=r.trigger||"click";lV.includes(i)||(i="click");var o=t.get("legendCanvas");i==="mouseenter"?(o.on("node-container:mouseenter",function(a){return t.filterData(a)}),o.on("node-container:mouseleave",function(a){t.clearFilter(),t.clearActiveLegend()})):(o.on("node-container:click",function(a){return t.filterData(a)}),o.on("click",function(a){a.target&&a.target.isCanvas&&a.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},n.prototype.changeData=function(t){this.set("data",t);var r=this.render();Ht(this.get("container"),this.getContainerPos(r))},n.prototype.activateLegend=function(t){var r=this.get("filter");r!=null&&r.multiple||this.clearActiveLegend();var i=t.get("parent");i.get("active")?(i.set("active",!1),this.findLegendItemsByState("active").length&&i.set("inactive",!0)):(i.set("inactive",!1),i.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},a=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},s=a["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var h=l.get("children"),d=h[0],f=h[1];d.attr(_n(_n({},d.get("oriAttrs")),a)),f.attr(_n(_n({},f.get("oriAttrs")),s))});var u=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=u["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var h=l.get("children"),d=h[0],f=h[1];d.attr(_n(_n({},d.get("oriAttrs")),u)),f.attr(_n(_n({},f.get("oriAttrs")),c))})},n.prototype.findLegendItemsByState=function(t,r,i){r===void 0&&(r="all"),i===void 0&&(i=!0);var o=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),a=o.find(function(u){return u.get("name")==="node-group"}),s=o.find(function(u){return u.get("name")==="edge-group"});return r==="node"?a.get("children").filter(function(u){return!!u.get(t)===i}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===i}):a.get("children").filter(function(u){return!!u.get(t)===i}).concat(s.get("children").filter(function(u){return!!u.get(t)===i}))},n.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas").find(function(i){return i.get("name")==="root"}),r=[t.find(function(i){return i.get("name")==="node-group"}),t.find(function(i){return i.get("name")==="edge-group"})];r.forEach(function(i){i.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var a=o.get("children"),s=a[0],u=a[1];s.attr(s.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},n.prototype.filterData=function(t){var r=this.get("filter"),i=r==null?void 0:r.filterFunctions;if(r&&i){var o=this.get("legendCanvas"),a=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",c=r.multiple;this.clearFilter(),c||this.clearActiveLegend(),this.activateLegend(t.target);var l=o.find(function(m){return m.get("name")==="root"}),h=l.find(function(m){return m.get("name")==="node-group"}),d=l.find(function(m){return m.get("name")==="edge-group"}),f=h.get("children").filter(function(m){return m.get("active")}),p=d.get("children").filter(function(m){return m.get("active")}),g=0,v=["getNodes","getEdges"];v.forEach(function(m){a[m]().forEach(function(y){var b=!1;(m==="getNodes"?f:p).forEach(function(x){var w=i[x.get("id")];b=b||w(y.getModel())}),b?(a.setItemState(y,u,!1),a.setItemState(y,s,!0),g++):(a.setItemState(y,s,!1),a.setItemState(y,u,!0))})}),g||v.forEach(function(m){a[m]().forEach(function(y){a.clearItemStates(y,[u])})})}},n.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var i=r.graphActiveState||"active",o=r.graphInactiveState||"inactive";t.getNodes().forEach(function(a){t.clearItemStates(a,[i,o])}),t.getEdges().forEach(function(a){t.clearItemStates(a,[i,o])})}},n.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new Do({container:this.get("container"),width:200,height:200});var i=r.addGroup({name:"root"}),o=i.addGroup({name:"node-group"}),a=i.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=[o,a];["nodes","edges"].forEach(function(D,R){s[D].forEach(function(B){var F,N,L=u[R].addGroup({id:B.id,name:"node-container"}),z=B.type,Z=t.getShapeSize(B),ne=Z.width,J=Z.height,q=Z.r,ie=t.getStyle(D.substr(0,4),B);switch(B.type){case"circle":default:N={r:q,x:0,y:0};break;case"rect":N={width:ne,height:J,x:-ne/2,y:-J/2};break;case"ellipse":N={rx:ne,ry:J,x:0,y:0},z="ellipse";break;case"line":N={x1:-ne/2,y1:0,x2:ne/2,y2:0},z="line";break;case"quadratic":N={path:[["M",-ne/2,0],["Q",0,ne/2,ne/2,0]]},z="path";break;case"cubic":N={path:[["M",-ne/2,0],["C",-ne/6,ne/2,ne/6,-ne/2,ne/2,0]]},z="path";break;case"diamond":N={path:[["M",0,-J],["L",ne,0],["L",0,J],["L",-ne,0],["Z"]]},z="path";break;case"triangle":N={path:[["M",-ne,J],["L",0,-J],["L",ne,J],["Z"]]},z="path";break;case"star":N={path:So.getStarPath(3*q,1.2*q)},z="path"}var Me=L.addShape(z,{attrs:_n(_n({},N),ie),name:"".concat(B.type,"-node-keyShape"),oriAttrs:_n({opacity:1},ie)});if(B.label){var me=Me.getBBox(),ke=((F=B.labelCfg)===null||F===void 0?void 0:F.style)||{},yt=_n({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},ke);L.addShape("text",{attrs:_n({x:me.maxX+4,y:0,text:B.label},yt),className:"legend-label",name:"".concat(B.type,"-node-text"),oriAttrs:yt})}})});var c,l=this.get("padding"),h=i.find(function(D){return D.get("name")==="title-container"}),d={height:0,maxY:0,width:0};if(this.get("title")){h||(h=i.addGroup({name:"title-container"}));var f={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:l[0]},p=this.get("titleConfig")||{},g=Object.assign(f,p.style||{});c=h.addShape("text",{attrs:_n({text:this.get("title")},g)}),d=h.getCanvasBBox(),h.setMatrix([1,0,0,0,1,0,p.offsetX,p.offsetY,1])}this.layoutItems();var v=i.getCanvasBBox(),m=o.getCanvasBBox(),y=m.minX<0?Math.abs(m.minX)+l[3]:l[3],b=d.maxY<m.minY?Math.abs(d.maxY-m.minY)+l[0]:d.maxY+l[0],x=[1,0,0,0,1,0,y,b,1];o.setMatrix(x);var w=[(v=i.getCanvasBBox()).minX+v.width+l[1],v.minY+v.height+l[2]];if(c){p=_n({position:"center",offsetX:0,offsetY:0},this.get("titleConfig")),d=h.getCanvasBBox();var E=h.getMatrix()||[1,0,0,0,1,0,0,0,1];p.position==="center"?E[6]=w[0]/2+p.offsetX:p.position==="right"?(E[6]=w[0]-l[3]+p.offsetX,c.attr({textAlign:"right"})):(E[6]=l[3]+p.offsetX,c.attr({textAlign:"left"})),h.setMatrix(E),d=h.getCanvasBBox(),x=[1,0,0,0,1,0,y=m.minX<0?Math.abs(m.minX)+l[3]:l[3],b=m.minY<d.maxY?Math.abs(d.maxY-m.minY)+l[0]:d.maxY+l[0],1],o.setMatrix(x);var S=[1,0,0,0,1,0,y,b,1];this.get("layout")==="vertical"?S[6]+=m.maxX+this.get("horiSep"):S[7]+=m.maxY+this.get("vertiSep"),a.setMatrix(S)}else{m=o.getCanvasBBox();var M=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?M[6]+=x[6]+m.maxX+this.get("horiSep"):M[7]+=x[7]+m.maxY+this.get("vertiSep"),a.setMatrix(M)}v=i.getCanvasBBox(),m=o.getCanvasBBox(),x=o.getMatrix()||[1,0,0,0,1,0,0,0,1];var k=a.getMatrix()||[1,0,0,0,1,0,0,0,1],_=a.getCanvasBBox();w=[Math.max(m.width+x[6],_.width+k[6])+l[1],Math.max(m.height+x[7],_.height+k[7])+l[2]],r.changeSize(w[0],w[1]);var C=this.get("containerStyle"),T=i.getMatrix()||[1,0,0,0,1,0,0,0,1],A=So.invertMatrix({x:0,y:0},T);return i.addShape("rect",{attrs:_n({x:A.x+(C.lineWidth||1),y:A.y+(C.lineWidth||1),width:w[0]-2*(C.lineWidth||1),height:w[1]-2*(C.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},C),name:"legend-back-rect",capture:!1}).toBack(),w},n.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),i=this.get("vertiSep"),o=this.get("layout"),a=this.get("align"),s=[0,0],u=t.find(function(y){return y.get("name")==="root"}),c=u.find(function(y){return y.get("name")==="node-group"}),l=u.find(function(y){return y.get("name")==="edge-group"}),h={min:0,max:-1/0};c.get("children").forEach(function(y,b){b===0&&(h.min=s[0]);var x=y.get("children")[0],w=y.getCanvasBBox(),E=x.getBBox(),S=E.width,M=(E.height,0),k=0;o==="vertical"?(M=s[1],k=s[0]+S/2,s[0]=k+w.height+i,w.maxX):(M=s[0]+S/2,k=s[1],s[0]=M+w.width+r,w.maxY),s[0]>h.max&&(h.max=s[0]),y.setMatrix([1,0,0,0,1,0,M,k,1])});var d=h.max-h.min,f={min:0,max:-1/0},p=c.getCanvasBBox();s[0]=0,s[1]=o==="vertical"?p.maxX+r:p.maxY+i,l.get("children").forEach(function(y,b){b===0&&(f.min=s[0]);var x=y.get("children")[0],w=y.getCanvasBBox(),E=x.getBBox(),S=E.width,M=E.height,k=0,_=0;o==="vertical"?(k=s[1],_=s[0],s[0]=_+w.height+i,y.setMatrix([1,0,0,0,1,0,0,_+M/2,1])):(k=s[0],_=s[1],s[0]=k+w.width+r,y.setMatrix([1,0,0,0,1,0,k+S/2,0,1])),s[0]>f.max&&(f.max=s[0])});var g=f.max-f.min;if(a&&a!==""&&a!=="left"){var v=d-g,m=a==="center"?Math.abs(v)/2:Math.abs(v);(v<0?c:l).get("children").forEach(function(y){var b=y.getMatrix()||[1,0,0,0,1,0,0,0,1];o==="vertical"?b[7]+=m:b[6]+=m,y.setMatrix(b)})}},n.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(i,o){return i.order-o.order}),t.nodes.forEach(function(i){var o,a,s,u,c,l=i.size||[((o=i.style)===null||o===void 0?void 0:o.width)||((a=i.style)===null||a===void 0?void 0:a.r)||8,((s=i.style)===null||s===void 0?void 0:s.height)||((u=i.style)===null||u===void 0?void 0:u.r)||8],h=((c=i.labelCfg)===null||c===void 0?void 0:c.style)||{};r.nodes.push({id:i.id||qi(),type:i.type||"circle",style:_n({},i.style),order:i.order,label:i.label,itemType:"node",size:l,labelCfg:{position:"right",style:_n({fontFamily:"Arial"},h)}})})),t.edges&&(t.edges.sort(function(i,o){return i.order-o.order}),t.edges.forEach(function(i){var o,a,s=i.type||"line";i.type==="cubic-horizontal"&&(s="cubic");var u=((o=i.labelCfg)===null||o===void 0?void 0:o.style)||{},c=i.size||[((a=i.style)===null||a===void 0?void 0:a.width)||8,1];r.edges.push({id:i.id||qi(),type:s,size:c,style:_n({lineWidth:at(c)?c[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:_n({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},n.prototype.getContainer=function(){return this.get("container")},n.prototype.formatArray=function(t){var r=this.get(t);if(Ue(r))this.set(t,[r,r,r,r]);else if(at(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]])}return this.get(t)},n.prototype.getShapeSize=function(t){var r,i,o;return t.size&&(at(t.size)?(r=t.size[0],i=t.size[1]||t.size[0],o=t.size[0]/2):Ue(t.size)&&(r=t.size,i=t.size,o=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(i=t.style.height),t.style.r&&(o=t.style.r)),o||(o=5),r||(r=o),i||(i=o),{width:r,height:i,r:o}},n.prototype.getStyle=function(t,r){return _n(_n({},t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),r.style||{})},n.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph").get("container"),i=this.get("container");r.removeChild(i)},n}(Xr),dV=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yi=function(){return yi=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},yi.apply(this,arguments)},cP=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t};typeof document!="undefined"&&Rp(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var lP="canvas-annotation",fV=function(e){function n(t){return e.call(this,t)||this}return dV(n,e),n.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},n.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};return this.get("trigger")==="click"&&(t=yi(yi({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})),t},n.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,i=t.maxWidth,o=t.title,a=o===void 0?"":o,s=t.content,u=s===void 0?"":s,c=t.borderRadius,l=c===void 0?5:c,h=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",d=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),f=r?"".concat(l,"px"):"".concat(l,"px ").concat(l,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(l,"px; max-width: ").concat(i,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(f,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(a,`</h4>
          `).concat(h,`
          `).concat("<p class='g6-annotation-close'>x</p>",`
        </div>
        `).concat(d,`
      </div>`)}},n.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph").getContainer(),i=t.get("container");this.get("containerCfg")?(i=this.createContainer(),r.appendChild(i)):i=r,this.set("container",i);var o=r.getBoundingClientRect(),a=new Do({container:r,width:o.right-o.left,height:o.bottom-o.top});Ht(a.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",nu(function(){return t.resizeCanvas(t)},100));var s=a.addGroup({id:"annotation-link-group"});t.set("linkGroup",s),t.set("canvas",a),t.get("getTitle")||t.set("getTitle",function(c){var l,h=((l=c==null?void 0:c.getModel)===null||l===void 0?void 0:l.call(c))||{},d=h.label,f=h.id;return d||f||"-"}),t.get("getContent")||t.set("getContent",function(c){var l,h;if(!c)return"-";var d=((l=c.getModel)===null||l===void 0?void 0:l.call(c))||{},f=d.label,p=d.id,g=(h=c.getType)===null||h===void 0?void 0:h.call(c),v=g?"".concat(g,": "):"";return"".concat(v).concat(f||p||"")});var u=t.get("defaultData");u&&this.readData(u)}},n.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),i=this.get("graph"),o=i.getContainer(),a=o.getBoundingClientRect(),s=a.left,u=a.right,c=a.top,l=a.bottom-c,h=u-s,d=r.position,f=d===void 0?"top":d,p=r.offsetX,g=p===void 0?0:p,v=r.offsetY,m=v===void 0?0:v,y=cP(r,["position","offsetX","offsetY"]),b=r.height,x=b===void 0?"fit-content":b,w=r.width,E=w===void 0?i.getWidth():w;x==="100%"&&(x=l),E==="100%"&&(E=h);var S="unset",M="unset",k={};switch(f){case"right":S="".concat(l,"px"),(k={top:0,right:0}).right+=s+g,k.top+=c+m;break;case"bottom":M="".concat(h,"px"),(k={bottom:0,left:0}).left+=s+g,k.bottom+=c+m;break;case"top":M="".concat(h,"px");case"left":S="".concat(l,"px");default:(k={top:0,left:0}).left+=s+g,k.top+=c+m}Object.keys(k).forEach(function(C){k[C]="".concat(k[C],"px")});var _=xn("<div class='".concat(r.className," g6-annotation-container'></div>"));return Ht(_,yi(yi({position:"absolute",display:f==="top"||f==="bottom"?"inline-flex":"unset",width:Ue(E)?"".concat(E,"px"):E,height:Ue(x)?"".concat(x,"px"):x,maxHeight:S,maxWidth:M,overflow:"scroll"},k),y)),o.appendChild(_),_.addEventListener("scroll",function(C){t.updateLinks()}),_}},n.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(t&&!t.destroyed){var r=t.get("container").getBoundingClientRect(),i=r.right-r.left,o=r.bottom-r.top;t.get("canvas").changeSize(i,o),t.updateOutsideCards(t)}},250)},n.prototype.updateOutsideCards=function(t){var r=t||this,i=r.get("cardInfoMap")||{},o=r.get("graph"),a=o.getPointByCanvas(0,0),s=o.getPointByCanvas(o.getWidth(),o.getHeight()),u=o.getClientByPoint(a.x,a.y),c=u.x,l=u.y,h=o.getClientByPoint(s.x,s.y),d=h.x,f=h.y;Object.values(i).forEach(function(p){var g=p.card;if(g){var v=g.style,m=Is(v.left),y=Is(v.top),b=g.getBoundingClientRect(),x=b.width,w=b.height,E=m,S=y;m+x>d-c&&(E=d-c-x),m<0&&(E=0),y+w>f-l&&(S=f-l-w),y<0&&(S=0),Ht(g,{left:"".concat(E,"px"),top:"".concat(S,"px")})}}),r.updateLinks()},n.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},n.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(i){t.hideCard(i)})}},n.prototype.toggleAnnotation=function(t,r){var i,o;r===void 0&&(r={});var a=this;if(!a.destroyed){var s=a.get("cardInfoMap")||{},u=a.get("graph"),c=a.get("container"),l=a.get("containerCfg"),h=Object.assign({},a.get("cardCfg")||{},r),d=h.minHeight,f=h.minWidth,p=h.width,g=h.height,v=h.collapsed,m=v!==void 0&&v,y=h.x,b=h.y,x=h.title,w=h.content,E=h.maxTitleLength,S=h.defaultBegin,M=cP(h,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),k=a.get("linkGroup"),_=this.get("rows")||[[]],C=(i=t.isCanvas)===null||i===void 0?void 0:i.call(t),T=C?lP:t.getID(),A=s[T]||{},D=A.card,R=A.link,B=A.x,F=A.y,N=A.title,L=A.content,z=this.get("getTitle"),Z=this.get("getContent"),ne=this.get("getContentPlaceholder")||function(){return""},J=this.get("getTitlePlaceHolder")||function(){return""},q=ne(t),ie=J(t),Me=xn(this.getDOMContent(yi({itemId:T,collapsed:m,title:((o=N||x||(z==null?void 0:z(t)))===null||o===void 0?void 0:o.substr(0,E))||ie,content:L||w||(Z==null?void 0:Z(t))||q},M))),me=Ue(d)?"".concat(d,"px"):d;Ht(Me,{minHeight:m?"unset":me,minWidth:Ue(f)?"".concat(f,"px"):f,height:g,width:p});var ke,yt=!!D;if(yt?(R==null||R.remove(!0),c.replaceChild(Me,D)):c.appendChild(Me),!l){if(ke=c.getBoundingClientRect()||{},y!==void 0&&b!==void 0)B=y,F=b;else if(!yt&&!C){var Tt=ke.top,cn=S||{},ct=cn.left,Ge=cn.right,Oe=Ge===void 0?16:Ge,Ye=cn.top,Pe=Ye===void 0?8:Ye,Se=cn.bottom,We=Oe,Ve=Pe;isNaN(ct)||(We=c.scrollWidth-ct),isNaN(Se)||(Ve=c.scrollHeight-Se);var O=Ue(f)?f:100;B=c.scrollWidth-Me.scrollWidth-(_.length-1)*O-We;var fe=_[_.length-1],_e=(fe[fe.length-1]||{}).bbox;F=(_e==null?void 0:_e.bottom)-Tt||Ve}Ht(Me,{position:"absolute",left:"".concat(B,"px"),top:"".concat(F,"px"),cusor:l?"unset":"move"})}this.bindListener(Me,T);var Ze=Me.getBoundingClientRect();if(!C){var Je=Sb(t,Ze,u,this.get("canvas")),qe=this.get("linkStyle");R=k.addShape("path",{attrs:yi({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:Je},qe)})}if(s[T]=yi(yi({},s[T]||{}),{id:T,collapsed:m,card:Me,link:R,x:B,y:F,cardBBox:Ze,content:L||w,title:N||x,contentPlaceholder:q,titlePlaceholder:ie,isCanvas:C}),a.set("cardInfoMap",s),l)this.updateCardPositionsInConatainer(),this.updateLinks();else{var bt=!isNaN(y)&&!isNaN(b);if(!yt&&!C&&!bt){var vt=ke.bottom,Mt=vt===void 0?0:vt;Tt=ke.top,_[_.length-1].push({id:T,bbox:Ze}),Ze.top>Mt-Tt-Ze.height-16&&_.push([]),this.set("rows",_)}}this.updateCardSize(T);var Ot=this.get("onAnnotationChange");Ot==null||Ot(s[T],yt?"update":"create")}},n.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),i=this.get("containerCfg").position,o=r.getBoundingClientRect().width,a=getComputedStyle(r),s=Is(a.paddingLeft)+Is(a.paddingRight);o-=s,Object.values(t).forEach(function(u){var c=u.card,l=c.getBoundingClientRect().width;switch(i){case"right":Ht(c,{marginLeft:o?"".concat(o-l,"px"):"0px"});break;case"top":case"bottom":Ht(c,{marginLeft:"8px"})}})}}},n.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),i=this.get("cardInfoMap");if(i){var o=i[t].collapsed,a=r.findById(t);a&&(this.get("cardCfg").collapseType!=="hide"||o?this.toggleAnnotation(a,{collapsed:!o}):this.hideCard(t),i[t]=yi(yi({},i[t]),{collapsed:!o}))}}},n.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r&&r[t]){var i=r[t],o=i.card,a=i.link;Ht(o,{display:"none"}),a==null||a.hide(),this.get("onAnnotationChange")(r[t],"hide")}}},n.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var i=r[t],o=i.card,a=i.link;this.get("container").removeChild(o),a==null||a.remove(!0),delete r[t],this.get("onAnnotationChange")(i,"remove")}}},n.prototype.bindListener=function(t,r){var i=this;if(!this.destroyed){t.addEventListener("mousemove",function(a){var s;if(a.target.className==="g6-annotation-collapse"?s="collapse":a.target.className==="g6-annotation-expand"?s="expand":a.target.className==="g6-annotation-close"&&(s="close"),s){var u=i.get("cardCfg").onMouseEnterIcon;(u===void 0?function(){}:u)(a,r,s)}}),t.addEventListener("mouseout",function(a){var s;if(a.target.className==="g6-annotation-collapse"?s="collapse":a.target.className==="g6-annotation-expand"?s="expand":a.target.className==="g6-annotation-close"&&(s="close"),s){var u=i.get("cardCfg").onMouseLeaveIcon;(u===void 0?function(){}:u)(a,r,s)}}),t.addEventListener("mouseenter",function(a){var s=i.get("cardInfoMap");if(s){var u=i.get("graph"),c=u.findById(r);if(c){var l=i.get("itemHighlightState");u.setItemState(c,l,!0)}var h=s[r].link;if(h){var d=i.get("linkHighlightStyle")||{};h.attr(d)}}}),t.addEventListener("mouseleave",function(a){var s=i.get("cardInfoMap");if(s){var u=i.get("graph"),c=u.findById(r);if(c){var l=i.get("itemHighlightState");u.setItemState(c,l,!1)}var h=s[r].link;if(h){var d=i.get("linkHighlightStyle")||{};Object.keys(d).forEach(function(p){h.attr(p,void 0),h.attr(p,void 0)});var f=i.get("linkStyle");h.attr(f)}}}),t.addEventListener("click",function(a){var s=(i.get("cardCfg")||{}).onClickIcon;a.target.className==="g6-annotation-collapse"||a.target.className==="g6-annotation-expand"?(i.get("cardCfg").collapseType==="hide"?i.hideCard(r):i.handleExpandCollapseCard(r),s==null||s(a,r,a.target.className==="g6-annotation-collapse"?"collapse":"expand")):a.target.className==="g6-annotation-close"&&(i.get("cardCfg").closeType==="remove"?i.removeCard(r):i.hideCard(r),s==null||s(a,r,"close"))}),this.get("editable")&&t.addEventListener("dblclick",function(a){var s=i.get("cardInfoMap"),u=(i.get("cardCfg")||{}).maxTitleLength,c=u===void 0?20:u;if(s){var l=a.target,h=l.className;if(h==="g6-annotation-title"||h==="g6-annotation-content"){var d=h==="g6-annotation-title"?l.getBoundingClientRect():l.parentNode.getBoundingClientRect(),f=d.width,p=d.height,g=getComputedStyle(l),v=xn("<".concat(h==="g6-annotation-title"?"input":"textarea",' class="').concat(h,'-input" type="textarea" style="width:').concat(f,"px; height: ").concat(p,'px; min-width: 16px;"/>')),m=xn('<div class="'.concat(h,'-input-wrapper" style="width: ').concat(f,"px; height: ").concat(p,"px; min-width: 16px; margin-right: ").concat(g.marginRight,'" />'));m.appendChild(v),l.parentNode.replaceChild(m,l);var y=s[r],b=y.contentPlaceholder,x=y.titlePlaceholder,w=y.content,E=y.title,S=w;h==="g6-annotation-title"?(v.name="title",v.maxLength=c,S=E):v.name="content",S?(v.innerHTML=l.innerHTML,v.value=l.innerHTML):v.placeholder=h==="g6-annotation-title"?x:b,v.focus(),v.addEventListener("blur",function(M){v.value&&(l.innerHTML=v.value,y[v.name||"title"]=v.value),m.parentNode.replaceChild(l,m),i.updateCardSize(r);var k=i.get("onAnnotationChange");k==null||k(y,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(a){var s=a.target.className;if(!o.includes(s)){var u=t.style;i.set("dragging",{card:t,x:a.clientX,y:a.clientY,left:Is(u.left),top:Is(u.top)})}}),t.addEventListener("drag",function(a){a.preventDefault();var s=i.get("cardInfoMap");if(s){var u=a.clientX,c=a.clientY,l=i.get("dragging");if(!isNaN(u)&&!isNaN(c)&&l){var h=l.x,d=l.y,f=l.left,p=l.top,g=l.card,v=u-h,m=c-d;f+=v,p+=m;var y=i.get("graph"),b=y.getPointByCanvas(0,0),x=y.getPointByCanvas(y.getWidth(),y.getHeight()),w=y.getClientByPoint(b.x,b.y),E=w.x,S=w.y,M=y.getClientByPoint(x.x,x.y),k=M.x,_=M.y,C=g.getBoundingClientRect();(f>k-E-(C.right-C.left)&&v>0||f<0&&v<0)&&(f-=v),(p>_-S-(C.bottom-C.top)&&m>0||p<0&&m<0)&&(p-=m),Ht(g,{left:"".concat(f,"px"),top:"".concat(p,"px"),visibility:"hidden"}),h=u,d=c;var T=(s[r]||{}).link;if(T){var A=y.findById(r);T.attr("path",Sb(A,C,y,i.get("canvas")))}i.set("dragging",{x:h,y:d,left:f,top:p,card:g})}}}),t.addEventListener("dragend",function(a){var s=i.get("cardInfoMap");if(s){var u=i.get("dragging");if(u){var c=u.left,l=u.top,h=u.card;s[r].x=c,s[r].y=l,Ht(h,{visibility:"visible"}),i.set("dragging",!1);var d=i.get("rows");d==null||d.forEach(function(p){for(var g=p.length-1;g>=0;g--)p[g].id===r&&p.splice(g,1)});var f=i.get("onAnnotationChange");f==null||f(s[r],"update")}}})}},n.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var i=r[t].card,o=i.getBoundingClientRect().width,a=i.getElementsByClassName("g6-annotation-title")[0];if(a){var s=getComputedStyle(a),u=Is(s.marginLeft),c=a.getBoundingClientRect().width;Ht(a,{marginRight:"".concat(o-u-24-16-c,"px")})}}},n.prototype.updateLink=function(t){var r=t.item;if(r){var i=this.get("cardInfoMap");if(i){var o=this.get("canvas"),a=this.get("graph"),s=i[r.getID()]||{},u=s.link,c=s.card;if(u){var l=Sb(r,c.getBoundingClientRect(),a,o);u.attr("path",l)}}}},n.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var i=this.get("graph");Object.values(r).forEach(function(o){var a=o.id,s=i.findById(a);t.updateLink({item:s})})}}},n.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var i=this.get("graph");Object.values(r).forEach(function(o){var a=o.id,s=o.card,u=o.isCanvas;if(s&&!u&&s.style.display!=="none"){var c=i.findById(a);c&&c.isVisible()?t.toggleAnnotation(c):t.hideCard(a)}})}},n.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,i=t.visible;if(r&&!r.destroyed){var o=this.get("cardInfoMap");if(o){var a=r.getID();o[a]&&(i||this.hideCard(a))}}},n.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var i=this.get("graph"),o=this.get("getTitle"),a=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var c=u.title,l=u.content,h=u.x,d=u.y,f=u.id,p=u.collapsed,g=u.card;if(!g||g.style.display!=="none"||t){var v=i.findById(f)||i.get("canvas");s.push({id:f,x:h,y:d,collapsed:p,title:c||(o==null?void 0:o(v)),content:l||(a==null?void 0:a(v)),visible:g&&g.style.display!=="none"})}}),s}},n.prototype.readData=function(t){var r=this,i=this.get("graph");t.forEach(function(o){var a=o.id,s=o.x,u=o.y,c=o.title,l=o.content,h=o.collapsed,d=o.visible,f=i.findById(a);if(f||a!==lP||(f=i.get("canvas")),!f){var p=r.get("cardInfoMap")||{};return p[a]=o,void r.set("cardInfoMap",p)}r.toggleAnnotation(f,{x:s,y:u,title:c,content:l,collapsed:h}),d||r.hideCard(a)})},n.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(i){var o=i.card,a=i.link;r.removeChild(o),a==null||a.remove(!0)}),this.set("cardInfoMap",{})}},n.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");r&&!r.destroyed&&(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},n}(Xr),Sb=function(e,n,t,r){var i,o;if(e.getType()==="edge")o=[e.getKeyShape().getPoint(.5)];else{var a=(i=e.getKeyShape)===null||i===void 0?void 0:i.call(e).getBBox(),s=a.minX,u=a.minY,c=a.maxX,l=a.maxY,h=e.getModel(),d=h.x,f=h.y;o={left:{x:s+=d,y:((u+=f)+(l+=f))/2},right:{x:c+=d,y:(u+l)/2},top:{x:(s+c)/2,y:u},bottom:{x:(s+c)/2,y:l}}}Object.keys(o).forEach(function(S){var M=o[S],k=M.x,_=M.y,C=t.getClientByPoint(k,_);o[S]=r.getPointByClient(C.x,C.y)});var p=n.top,g=p===void 0?0:p,v=n.left,m=v===void 0?0:v,y=n.right,b=y===void 0?0:y,x=n.bottom,w=x===void 0?0:x,E={left:r.getPointByClient(m,(g+w)/2),right:r.getPointByClient(b,(g+w)/2),top:r.getPointByClient((m+b)/2,g),bottom:r.getPointByClient((m+b)/2,w)};return function(S,M){var k,_,C=1/0;Object.keys(S).forEach(function(A){var D=S[A];Object.keys(M).forEach(function(R){var B=M[R],F=D.x-B.x,N=D.y-B.y,L=F*F+N*N;C>L&&(C=L,k=D,_=B)})});var T=So.getControlPoint(k,_,.5,20);return[["M",k.x,k.y],["Q",T.x,T.y,_.x,_.y]]}(o,E)},Is=function(e){return Number(e.replace(/\s+|px/gi,""))||0},ni={PluginBase:Xr,Menu:iU,Grid:nU,Minimap:sU,Bundling:cU,ToolBar:fU,Tooltip:gU,Fisheye:hU,TimeBar:vW,ImageMinimap:tV,EdgeFilterLens:iV,SnapLine:uV,Legend:hV,Annotation:fV};za("circle",{options:{size:it.defaultNode.size,style:{x:0,y:0,stroke:it.defaultNode.style.stroke,fill:it.defaultNode.style.fill,lineWidth:it.defaultNode.style.lineWidth},labelCfg:{style:{fill:it.nodeLabel.style.fill,fontSize:it.nodeLabel.style.fontSize,fontFamily:it.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:it.defaultNode.linkPoints.size,lineWidth:it.defaultNode.linkPoints.lineWidth,fill:it.defaultNode.linkPoints.fill,stroke:it.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:P({},it.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).icon,r=t===void 0?{}:t,i=this.getShapeStyle(e),o=Zt({},r,e.icon),a="".concat(this.type,"-keyShape"),s=n.addShape("circle",{attrs:i,className:a,name:a,draggable:!0});n.shapeMap[a]=s;var u=o.width,c=o.height,l=o.show,h=o.text;if(l){var d="".concat(this.type,"-icon");n.shapeMap[d]=h?n.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:d,name:d,draggable:!0}):n.addShape("image",{attrs:P({x:-u/2,y:-c/2},o),className:d,name:d,draggable:!0})}return this.drawLinkPoints(e,n),s},drawLinkPoints:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).linkPoints;if(t){var r=t||{},i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,c=r.r,l=yn(r,["top","left","right","bottom","size","r"]),h=this.getSize(e)[0]/2;if(o){var d="link-point-left";n.shapeMap[d]=n.addShape("circle",{attrs:P(P({},l),{x:-h,y:0,r:u/2||c||5}),className:d,name:d,isAnchorPoint:!0})}if(a){var f="link-point-right";n.shapeMap[f]=n.addShape("circle",{attrs:P(P({},l),{x:h,y:0,r:u/2||c||5}),className:f,name:f,isAnchorPoint:!0})}if(i){var p="link-point-top";n.shapeMap[p]=n.addShape("circle",{attrs:P(P({},l),{x:0,y:-h,r:u/2||c||5}),className:p,name:p,isAnchorPoint:!0})}if(s){var g="link-point-bottom";n.shapeMap[g]=n.addShape("circle",{attrs:P(P({},l),{x:0,y:h,r:u/2||c||5}),className:g,name:g,isAnchorPoint:!0})}}},getShapeStyle:function(e){var n=(this.mergeStyle||this.getOptions(e)).style,t={stroke:e.color},r=Zt({},n,t),i=this.getSize(e)[0]/2;return P({x:0,y:0,r:i},r)},update:function(e,n,t){var r=n.getContainer(),i=this.getSize(e),o=P({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r!==void 0||isNaN(i[0])||(o.r=i[0]/2),this.updateShape(e,n,o,!0,t),this.updateLinkPoints(e,r)}},"single-node"),za("rect",{options:{size:[100,30],style:{radius:0,stroke:it.defaultNode.style.stroke,fill:it.defaultNode.style.fill,lineWidth:it.defaultNode.style.lineWidth},labelCfg:{style:{fill:it.nodeLabel.style.fill,fontSize:it.nodeLabel.style.fontSize,fontFamily:it.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:it.defaultNode.linkPoints.size,lineWidth:it.defaultNode.linkPoints.lineWidth,fill:it.defaultNode.linkPoints.fill,stroke:it.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:P({},it.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,n){var t=this.getShapeStyle(e),r=n.addShape("rect",{attrs:t,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n.shapeMap["".concat(this.type,"-keyShape")]=r,this.drawLinkPoints(e,n),r},drawLinkPoints:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).linkPoints,r=t===void 0?{}:t,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,c=r.r,l=yn(r,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],f=h[1];o&&(n.shapeMap["link-point-left"]=n.addShape("circle",{attrs:P(P({},l),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(n.shapeMap["link-point-right"]=n.addShape("circle",{attrs:P(P({},l),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(n.shapeMap["link-point-top"]=n.addShape("circle",{attrs:P(P({},l),{x:0,y:-f/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(n.shapeMap["link-point-bottom"]=n.addShape("circle",{attrs:P(P({},l),{x:0,y:f/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var n=ut({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),t=this.getSize(e),r=n.width||t[0],i=n.height||t[1];return P({x:-r/2,y:-i/2,width:r,height:i},n)},update:function(e,n,t){var r=n.getContainer(),i=this.getOptions({}).style,o=this.getSize(e),a=n.get("keyShape");e.size||(o[0]=a.attr("width")||i.width,o[1]=a.attr("height")||i.height);var s={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},u=ut({},i,a.attr(),s);u=ut(u,e.style),this.updateShape(e,n,u,!1,t),this.updateLinkPoints(e,r)}},"single-node"),za("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:it.defaultNode.style.stroke,fill:it.defaultNode.style.fill,lineWidth:it.defaultNode.style.lineWidth},labelCfg:{style:{fill:it.nodeLabel.style.fill,fontSize:it.nodeLabel.style.fontSize,fontFamily:it.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:it.defaultNode.linkPoints.size,lineWidth:it.defaultNode.linkPoints.lineWidth,fill:it.defaultNode.linkPoints.fill,stroke:it.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:P({},it.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).icon,r=t===void 0?{}:t,i=this.getShapeStyle(e),o=n.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});n.shapeMap["ellipse-keyShape"]=o;var a=r.width,s=r.height,u=r.show,c=r.text;return u&&(n.shapeMap["".concat(this.type,"-icon")]=c?n.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):n.addShape("image",{attrs:P({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,n),o},drawLinkPoints:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).linkPoints,r=t===void 0?{}:t,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,c=r.r,l=yn(r,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2,f=h[1]/2;o&&(n.shapeMap["link-point-left"]=n.addShape("circle",{attrs:P(P({},l),{x:-d,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(n.shapeMap["link-point-right"]=n.addShape("circle",{attrs:P(P({},l),{x:d,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(n.shapeMap["link-point-top"]=n.addShape("circle",{attrs:P(P({},l),{x:0,y:-f,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(n.shapeMap["link-point-bottom"]=n.addShape("circle",{attrs:P(P({},l),{x:0,y:f,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var n=ut({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),t=this.getSize(e),r=t[0]/2,i=t[1]/2;return P({x:0,y:0,rx:r,ry:i},n)},update:function(e,n,t){var r=n.getContainer(),i=this.getOptions({}).style,o=this.getSize(e),a={stroke:e.color,rx:o[0]/2,ry:o[1]/2},s=ut({},i,n.get("keyShape").attr(),a);s=ut(s,e.style),this.updateShape(e,n,s,!0,t),this.updateLinkPoints(e,r)}},"single-node"),za("diamond",{options:{size:[80,80],style:{stroke:it.defaultNode.style.stroke,fill:it.defaultNode.style.fill,lineWidth:it.defaultNode.style.lineWidth},labelCfg:{style:{fill:it.nodeLabel.style.fill,fontSize:it.nodeLabel.style.fontSize,fontFamily:it.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:it.defaultNode.linkPoints.size,lineWidth:it.defaultNode.linkPoints.lineWidth,fill:it.defaultNode.linkPoints.fill,stroke:it.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:P({},it.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).icon,r=t===void 0?{}:t,i=this.getShapeStyle(e),o=n.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});n.shapeMap["".concat(this.type,"-keyShape")]=o;var a=r.width,s=r.height,u=r.show,c=r.text;return u&&(n.shapeMap["".concat(this.type,"-icon")]=c?n.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):n.addShape("image",{attrs:P({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,n),o},drawLinkPoints:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).linkPoints,r=t===void 0?{}:t,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,c=r.r,l=yn(r,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],f=h[1];o&&(n.shapeMap["link-point-left"]=n.addShape("circle",{attrs:P(P({},l),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(n.shapeMap["link-point-right"]=n.addShape("circle",{attrs:P(P({},l),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(n.shapeMap["link-point-top"]=n.addShape("circle",{attrs:P(P({},l),{x:0,y:-f/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(n.shapeMap["link-point-bottom"]=n.addShape("circle",{attrs:P(P({},l),{x:0,y:f/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var n=this.getSize(e),t=n[0],r=n[1];return[["M",0,-r/2],["L",t/2,0],["L",0,r/2],["L",-t/2,0],["Z"]]},getShapeStyle:function(e){var n=ut({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),t=this.getPath(e);return P({path:t},n)},update:function(e,n,t){var r=n.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),a={stroke:e.color,path:o},s=ut({},i,n.get("keyShape").attr(),a);s=ut(s,e.style),this.updateShape(e,n,s,!0,t),this.updateLinkPoints(e,r)}},"single-node"),za("triangle",{options:{size:40,direction:"up",style:{stroke:it.defaultNode.style.stroke,fill:it.defaultNode.style.fill,lineWidth:it.defaultNode.style.lineWidth},labelCfg:{style:{fill:it.nodeLabel.style.fill,fontSize:it.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:it.defaultNode.linkPoints.size,lineWidth:it.defaultNode.linkPoints.lineWidth,fill:it.defaultNode.linkPoints.fill,stroke:it.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:P({},it.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,n){var t=this.mergeStyle||this.getOptions(e),r=t.icon,i=r===void 0?{}:r,o=t.direction,a=this.getShapeStyle(e),s=e.direction||o,u=n.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});n.shapeMap["".concat(this.type,"-keyShape")]=u;var c=i.width,l=i.height,h=i.show,d=i.offset,f=i.text;if(h)if(f)n.shapeMap["".concat(this.type,"-icon")]=n.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var p=-c/2,g=-l/2;s!=="up"&&s!=="down"||(g+=d),s!=="left"&&s!=="right"||(p+=d),n.shapeMap["".concat(this.type,"-icon")]=n.addShape("image",{attrs:P({x:p,y:g},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,n),u},drawLinkPoints:function(e,n){var t=this.mergeStyle||this.getOptions(e),r=t.linkPoints,i=r===void 0?{}:r,o=t.direction,a=e.direction||o,s=i.top,u=i.left,c=i.right,l=i.bottom,h=i.size,d=i.r,f=yn(i,["top","left","right","bottom","size","r"]),p=this.getSize(e)[0];if(u){var g=null,v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI);a==="up"?g=[-m,v]:a==="down"?g=[-m,-v]:a==="left"&&(g=[-m,m-v]),g&&(n.shapeMap["link-point-left"]=n.addShape("circle",{attrs:P(P({},f),{x:g[0],y:g[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var y=null;v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI),a==="up"?y=[m,v]:a==="down"?y=[m,-v]:a==="right"&&(y=[m,m-v]),y&&(n.shapeMap["link-point-right"]=n.addShape("circle",{attrs:P(P({},f),{x:y[0],y:y[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"}))}if(s){var b=null;v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI),a==="up"?b=[m-v,-v]:a==="left"?b=[m,-v]:a==="right"&&(b=[-m,-v]),b&&(n.shapeMap["link-point-top"]=n.addShape("circle",{attrs:P(P({},f),{x:b[0],y:b[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var x=null;v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI),a==="down"?x=[-m+v,v]:a==="left"?x=[m,v]:a==="right"&&(x=[-m,v]),x&&(n.shapeMap["link-point-bottom"]=n.addShape("circle",{attrs:P(P({},f),{x:x[0],y:x[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var n=(this.mergeStyle||this.getOptions(e)).direction,t=e.direction||n,r=this.getSize(e)[0],i=r*Math.sin(1/3*Math.PI),o=r*Math.sin(1/3*Math.PI),a=[["M",-o,i],["L",0,-i],["L",o,i],["Z"]];return t==="down"?a=[["M",-o,-i],["L",o,-i],["L",0,i],["Z"]]:t==="left"?a=[["M",-o,o-i],["L",o,-o],["L",o,o],["Z"]]:t==="right"&&(a=[["M",o,o-i],["L",-o,o],["L",-o,-o],["Z"]]),a},getShapeStyle:function(e){var n=ut({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),t=this.getPath(e);return P({path:t},n)},update:function(e,n,t){var r=n.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),a={stroke:e.color,path:o},s=ut({},i,n.get("keyShape").attr(),a);s=ut(s,e.style),this.updateShape(e,n,s,!0,t),this.updateLinkPoints(e,r)},updateLinkPoints:function(e,n){var t=this.getOptions({}),r=t.linkPoints,i=t.direction,o=e.direction||i,a=n.shapeMap["link-point-left"]||n.find(function(D){return D.get("className")==="link-point-left"}),s=n.shapeMap["link-point-right"]||n.find(function(D){return D.get("className")==="link-point-right"}),u=n.shapeMap["link-point-top"]||n.find(function(D){return D.get("className")==="link-point-top"}),c=n.shapeMap["link-point-bottom"]||n.find(function(D){return D.get("className")==="link-point-bottom"}),l=r,h=a||s||u||c;h&&(l=h.attr());var d=ut({},l,e.linkPoints),f=d.fill,p=d.stroke,g=d.lineWidth,v=d.size/2;v||(v=d.r);var m=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},y=m.left,b=m.right,x=m.top,w=m.bottom,E=this.getSize(e)[0],S={r:v,fill:f,stroke:p,lineWidth:g},M=null,k=E*Math.sin(1/3*Math.PI),_=E*Math.sin(1/3*Math.PI);o==="up"?M=[-_,k]:o==="down"?M=[-_,-k]:o==="left"&&(M=[-_,_-k]),M&&(a?y||y===void 0?a.attr(P(P({},S),{x:M[0],y:M[1]})):(a.remove(),delete n.shapeMap["link-point-left"]):y&&(n.shapeMap["link-point-left"]=n.addShape("circle",{attrs:P(P({},S),{x:M[0],y:M[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var C=null;o==="up"?C=[_,k]:o==="down"?C=[_,-k]:o==="right"&&(C=[_,_-k]),C&&(s?b||b===void 0?s.attr(P(P({},S),{x:C[0],y:C[1]})):(s.remove(),delete n.shapeMap["link-point-right"]):b&&(n.shapeMap["link-point-right"]=n.addShape("circle",{attrs:P(P({},S),{x:C[0],y:C[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var T=null;o==="up"?T=[_-k,-k]:o==="left"?T=[_,-k]:o==="right"&&(T=[-_,-k]),T&&(u?x||x===void 0?u.attr(P(P({},S),{x:T[0],y:T[1]})):(u.remove(),delete n.shapeMap["link-point-top"]):x&&(n.shapeMap["link-point-top"]=n.addShape("circle",{attrs:P(P({},S),{x:T[0],y:T[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var A=null;o==="down"?A=[-_+k,k]:o==="left"?A=[_,k]:o==="right"&&(A=[-_,k]),A&&(c?w||w===void 0?c.attr(P(P({},S),{x:A[0],y:A[1]})):(c.remove(),delete n.shapeMap["link-point-bottom"]):w&&(n.shapeMap["link-point-bottom"]=n.addShape("circle",{attrs:P(P({},S),{x:A[0],y:A[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),za("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:it.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:it.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:it.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).preRect,r=t===void 0?{}:t,i=this.getShapeStyle(e),o=this.getSize(e),a=o[0],s=o[1],u=n.addShape("rect",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});n.shapeMap["".concat(this.type,"-keyShape")]=u;var c=r.show,l=yn(r,["show"]);return c&&(n.shapeMap["pre-rect"]=n.addShape("rect",{attrs:P({x:-a/2,y:-s/2,height:s},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,n),this.drawStateIcon(e,n),this.drawLinkPoints(e,n),u},drawLogoIcon:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).logoIcon,r=t===void 0?{}:t,i=this.getSize(e)[0];if(r.show){var o=r.width,a=r.height,s=r.x,u=r.y,c=r.offset,l=r.text,h=yn(r,["width","height","x","y","offset","text"]);n.shapeMap["rect-logo-icon"]=l?n.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):n.addShape("image",{attrs:P(P({},h),{x:s||-i/2+o+c,y:u||-a/2,width:o,height:a}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).stateIcon,r=t===void 0?{}:t,i=this.getSize(e)[0];if(r.show){var o=r.width,a=r.height,s=r.x,u=r.y,c=r.offset,l=r.text,h=yn(r,["width","height","x","y","offset","text"]);n.shapeMap["rect-state-icon"]=l?n.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):n.addShape("image",{attrs:P(P({},h),{x:s||i/2-o+c,y:u||-a/2,width:o,height:a}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).linkPoints,r=t===void 0?{}:t,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,c=r.r,l=yn(r,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],f=h[1];o&&(n.shapeMap["link-point-left"]=n.addShape("circle",{attrs:P(P({},l),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(n.shapeMap["link-point-right"]=n.addShape("circle",{attrs:P(P({},l),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(n.shapeMap["link-point-top"]=n.addShape("circle",{attrs:P(P({},l),{x:0,y:-f/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(n.shapeMap["link-point-bottom"]=n.addShape("circle",{attrs:P(P({},l),{x:0,y:f/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,n){var t=this.getOptions(e),r=t.labelCfg,i=r===void 0?{}:r,o=t.logoIcon,a=o===void 0?{}:o,s=t.descriptionCfg,u=s===void 0?{}:s,c=this.getSize(e)[0],l=null,h=a.show,d=a.width,f=-c/2+i.offset;h&&(f=-c/2+d+i.offset);var p=i.style,g=u.style,v=u.paddingTop;return he(e.description)?(l=n.addShape("text",{attrs:P(P({},p),{x:f,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),n.shapeMap["text-shape"]=l,n.shapeMap["rect-description"]=n.addShape("text",{attrs:P(P({},g),{x:f,y:17+(v||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(l=n.addShape("text",{attrs:P(P({},p),{x:f,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),n.shapeMap["text-shape"]=l),l},getShapeStyle:function(e){var n=ut({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),t=this.getSize(e),r=n.width||t[0],i=n.height||t[1];return P({x:-r/2,y:-i/2,width:r,height:i},n)},update:function(e,n){var t=this.mergeStyle||this.getOptions(e),r=t.style,i=r===void 0?{}:r,o=t.labelCfg,a=o===void 0?{}:o,s=t.descriptionCfg,u=s===void 0?{}:s,c=this.getSize(e),l=c[0],h=c[1];n.get("keyShape").attr(P(P({},i),{x:-l/2,y:-h/2,width:l,height:h}));var d=n.getContainer(),f=d.shapeMap["rect-logo-icon"]||d.find(function(ne){return ne.get("className")==="rect-logo-icon"}),p=ut({},f?f.attr():{},e.logoIcon),g=p.width;g===void 0&&(g=this.options.logoIcon.width);var v=e.logoIcon?e.logoIcon.show:void 0,m=a.offset,y=-l/2+g+m;v||v===void 0||(y=-l/2+m);var b=d.shapeMap["node-label"]||d.find(function(ne){return ne.get("className")==="node-label"}),x=d.shapeMap["rect-description"]||d.find(function(ne){return ne.get("className")==="rect-description"});if(e.label)if(b){var w=e.labelCfg?e.labelCfg.style:{},E=ut({},b.attr(),w);e.label&&(E.text=e.label),E.x=y,he(e.description)&&(E.y=-5),x&&(x.resetMatrix(),x.attr({x:y})),b.resetMatrix(),b.attr(E)}else d.shapeMap["node-label"]=d.addShape("text",{attrs:P(P({},a.style),{x:y,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});if(he(e.description)){var S=u.paddingTop;if(x){w=e.descriptionCfg?e.descriptionCfg.style:{};var M=ut({},x.attr(),w);he(e.description)&&(M.text=e.description),M.x=y,x.resetMatrix(),x.attr(P(P({},M),{y:17+(S||0)}))}else d.shapeMap["rect-description"]=d.addShape("text",{attrs:P(P({},u.style),{x:y,y:17+(S||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})}var k=d.shapeMap["pre-rect"]||d.find(function(ne){return ne.get("className")==="pre-rect"});if(k&&!k.destroyed){var _=ut({},k.attr(),e.preRect);k.attr(P(P({},_),{x:-l/2,y:-h/2,height:h}))}if(f&&!f.destroyed)if(v||v===void 0){var C=p.width,T=p.height,A=p.x,D=p.y,R=p.offset,B=yn(p,["width","height","x","y","offset"]);f.attr(P(P({},B),{x:A||-l/2+C+R,y:D||-T/2,width:C,height:T}))}else f.remove(),delete d.shapeMap["pre-rect"];else v&&this.drawLogoIcon(e,d);var F=d.shapeMap["rect-state-icon"]||d.find(function(ne){return ne.get("className")==="rect-state-icon"}),N=ut({},F?F.attr():{},e.stateIcon);if(F){N.show||N.show===void 0||(F.remove(),delete d.shapeMap["rect-state-icon"]);var L=N.width,z=(T=N.height,A=N.x,D=N.y,N.offset),Z=yn(N,["width","height","x","y","offset"]);F.attr(P(P({},Z),{x:A||l/2-L+z,y:D||-T/2,width:L,height:T}))}else N.show&&this.drawStateIcon(e,d);this.updateLinkPoints(e,d)},getOptions:function(e,n){return n==="move"?e:Zt({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),za("star",{options:{size:60,style:{stroke:it.defaultNode.style.stroke,fill:it.defaultNode.style.fill,lineWidth:it.defaultNode.style.lineWidth},labelCfg:{style:{fill:it.nodeLabel.style.fill,fontSize:it.nodeLabel.style.fontSize,fontFamily:it.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:it.defaultNode.linkPoints.size,lineWidth:it.defaultNode.linkPoints.lineWidth,fill:it.defaultNode.linkPoints.fill,stroke:it.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:P({},it.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).icon,r=t===void 0?{}:t,i=this.getShapeStyle(e),o=n.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});n.shapeMap["".concat(this.type,"-keyShape")]=o;var a=r.width,s=r.height,u=r.show,c=r.text;return u&&(n.shapeMap["".concat(this.type,"-icon")]=c?n.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):n.addShape("image",{attrs:P({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,n),o},drawLinkPoints:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).linkPoints,r=t===void 0?{}:t,i=r.top,o=r.left,a=r.right,s=r.leftBottom,u=r.rightBottom,c=r.size,l=r.r,h=yn(r,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(e)[0];if(a){var f=Math.cos(.1*Math.PI)*d,p=Math.sin(.1*Math.PI)*d;n.shapeMap["link-point-right"]=n.addShape("circle",{attrs:P(P({},h),{x:f,y:-p,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}i&&(f=Math.cos(.5*Math.PI)*d,p=Math.sin(.5*Math.PI)*d,n.shapeMap["link-point-top"]=n.addShape("circle",{attrs:P(P({},h),{x:f,y:-p,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})),o&&(f=Math.cos(.9*Math.PI)*d,p=Math.sin(.9*Math.PI)*d,n.shapeMap["link-point-left"]=n.addShape("circle",{attrs:P(P({},h),{x:f,y:-p,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})),s&&(f=Math.cos(1.3*Math.PI)*d,p=Math.sin(1.3*Math.PI)*d,n.shapeMap["link-point-bottom"]=n.addShape("circle",{attrs:P(P({},h),{x:f,y:-p,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),u&&(f=Math.cos(1.7*Math.PI)*d,p=Math.sin(1.7*Math.PI)*d,n.shapeMap["link-point-right-bottom"]=n.addShape("circle",{attrs:P(P({},h),{x:f,y:-p,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(e){var n=this.getSize(e)[0],t=3*n/8,r=e.innerR||t;return So.getStarPath(n,r)},getShapeStyle:function(e){var n=ut({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),t=this.getPath(e);return P({path:t},n)},update:function(e,n,t){var r=n.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),a={stroke:e.color,path:o},s=ut({},i,n.get("keyShape").attr(),a);s=ut(s,e.style),this.updateShape(e,n,s,!0,t),this.updateLinkPoints(e,r)},updateLinkPoints:function(e,n){var t=this.getOptions({}).linkPoints,r=n.shapeMap["link-point-left"]||n.find(function(k){return k.get("className")==="link-point-left"}),i=n.shapeMap["link-point-right"]||n.find(function(k){return k.get("className")==="link-point-right"}),o=n.shapeMap["link-point-top"]||n.find(function(k){return k.get("className")==="link-point-top"}),a=n.shapeMap["link-point-left-bottom"]||n.find(function(k){return k.get("className")==="link-point-left-bottom"}),s=n.shapeMap["link-point-left-bottom"]||n.find(function(k){return k.get("className")==="link-point-right-bottom"}),u=t,c=r||i||o||a||s;c&&(u=c.attr());var l=ut({},u,e.linkPoints),h=l.fill,d=l.stroke,f=l.lineWidth,p=l.size/2;p||(p=l.r);var g=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},v=g.left,m=g.right,y=g.top,b=g.leftBottom,x=g.rightBottom,w=this.getSize(e)[0],E={r:p,fill:h,stroke:d,lineWidth:f},S=Math.cos(.1*Math.PI)*w,M=Math.sin(.1*Math.PI)*w;i?m||m===void 0?i.attr(P(P({},E),{x:S,y:-M})):(i.remove(),delete n.shapeMap["link-point-right"]):m&&(n.shapeMap["link-point-right"]=n.addShape("circle",{attrs:P(P({},E),{x:S,y:-M}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),S=Math.cos(.5*Math.PI)*w,M=Math.sin(.5*Math.PI)*w,o?y||y===void 0?o.attr(P(P({},E),{x:S,y:-M})):(o.remove(),delete n.shapeMap["link-point-top"]):y&&(n.shapeMap["link-point-top"]=n.addShape("circle",{attrs:P(P({},E),{x:S,y:-M}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),S=Math.cos(.9*Math.PI)*w,M=Math.sin(.9*Math.PI)*w,r?v||v===void 0?r.attr(P(P({},E),{x:S,y:-M})):(r.remove(),delete n.shapeMap["link-point-left"]):v&&(n.shapeMap["link-point-left"]=n.addShape("circle",{attrs:P(P({},E),{x:S,y:-M}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),S=Math.cos(1.3*Math.PI)*w,M=Math.sin(1.3*Math.PI)*w,a?b||b===void 0?a.attr(P(P({},E),{x:S,y:-M})):(a.remove(),delete n.shapeMap["link-point-left-bottom"]):b&&(n.shapeMap["link-point-left-bottom"]=n.addShape("circle",{attrs:P(P({},E),{x:S,y:-M}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),S=Math.cos(1.7*Math.PI)*w,M=Math.sin(1.7*Math.PI)*w,s?x||x===void 0?s.attr(P(P({},E),{x:S,y:-M})):(s.remove(),delete n.shapeMap["link-point-right-bottom"]):x&&(n.shapeMap["link-point-right-bottom"]=n.addShape("circle",{attrs:P(P({},E),{x:S,y:-M}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var hP=So.defaultSubjectColors,ph="fan-shape-";za("donut",{options:{size:it.defaultNode.size,style:{x:0,y:0,stroke:it.defaultNode.style.stroke,fill:it.defaultNode.style.fill,lineWidth:it.defaultNode.style.lineWidth},labelCfg:{style:{fill:it.nodeLabel.style.fill,fontSize:it.nodeLabel.style.fontSize,fontFamily:it.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:it.defaultNode.linkPoints.size,lineWidth:it.defaultNode.linkPoints.lineWidth,fill:it.defaultNode.linkPoints.fill,stroke:it.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:P({},it.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,n){var t=(this.mergeStyle||this.getOptions(e)).icon,r=t===void 0?{}:t,i=this.getShapeStyle(e),o=Zt({},r,e.icon),a=n.addShape("circle",{attrs:i,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});n.shapeMap["".concat(this.type,"-keyShape")]=a;var s=o.width,u=o.height,c=o.show,l=o.text;return c&&(n.shapeMap["".concat(this.type,"-icon")]=l?n.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):n.addShape("image",{attrs:P({x:-s/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),pV(e,n,a),this.drawLinkPoints(e,n),a},updateShape:function(e,n,t,r,i){var o=n.get("keyShape");o.attr(P({},t)),gV(e,n,o),this.updateLabel(e,n,i),r&&this.updateIcon(e,n)}},"circle");var pV=function(e,n,t){var r=e.donutAttrs,i=r===void 0?{}:r,o=e.donutColorMap,a=o===void 0?{}:o,s=Object.keys(i).length;if(i&&s>1){var u=dP(i,a),c=u.configs,l=u.totalValue;if(l){var h=fP(t),d=h.lineWidth,f=h.arcR,p=[f,0],g=0;if(s===1)return void Mb(n,{arcR:f,arcBegin:p,beginAngle:g,config:c[0],fanIndex:0,lineWidth:d,totalValue:l,drawWhole:!0});for(var v=0;v<c.length;v++){var m=Mb(n,{arcR:f,arcBegin:p,beginAngle:g,config:c[v],fanIndex:v,lineWidth:d,totalValue:l});if(m.shouldEnd)return;p=m.arcBegin,g=m.beginAngle}}}},Mb=function(e,n){var t,r,i,o=n.arcR,a=n.arcBegin,s=n.beginAngle,u=n.config,c=n.fanIndex,l=n.lineWidth,h=n.totalValue,d=n.drawWhole,f=d!==void 0&&d,p=n.updateShape,g=p===void 0?void 0:p,v=u.value/h;if(v<.001)return{beginAngle:s,arcBegin:a,shape:void 0,shouldEnd:!1};if(f||v>.999)t=[o,1e-4],i=1;else{var m=v*Math.PI*2;r=s+m,t=[o*Math.cos(r),-o*Math.sin(r)],i=m>Math.PI?1:0}var y={path:[["M",a[0],a[1]],["A",o,o,0,i,0,t[0],t[1]]],stroke:u.color||(g==null?void 0:g.attr("stroke"))||hP[c%hP.length],lineWidth:l};return g?g.attr(y):e.shapeMap["".concat(ph).concat(c)]=e.addShape("path",{attrs:y,name:"".concat(ph).concat(c),draggable:!0}),{beginAngle:r,arcBegin:t,shape:e.shapeMap["".concat(ph).concat(c)],shouldEnd:f||v>.999}},gV=function(e,n,t){var r=e.donutAttrs,i=e.donutColorMap,o=i===void 0?{}:i,a={},s=n.getContainer();if(r){var u=dP(r,o),c=u.configs,l=u.totalValue;if(l)for(var h=fP(t),d=h.lineWidth,f=h.arcR,p=[f,0],g=0,v=0;v<c.length;v++){var m="".concat(ph).concat(v),y=Mb(s,{arcR:f,arcBegin:p,beginAngle:g,config:c[v],fanIndex:v,lineWidth:d,totalValue:l,drawWhole:c.length===1,updateShape:s.shapeMap[m]});if(y.shape&&(a[m]=!0),y.shouldEnd)break;p=y.arcBegin,g=y.beginAngle}}var b=Object.keys(s.shapeMap).filter(function(x){return x.includes(ph)});b.forEach(function(x){a[x]||(s.shapeMap[x].remove(!0),delete s.shapeMap[x])})},dP=function(e,n){var t=0,r=[];return Object.keys(e).forEach(function(i){var o=+e[i];isNaN(o)||(r.push({key:i,value:o,color:n[i]}),t+=o)}),{totalValue:t,configs:r}},fP=function(e){var n=e.attr("r"),t=.6*n;return{lineWidth:n-t,arcR:(n+t)/2}},ug=function(e){var n=e.x,t=e.y;return{x:n,y:t,centerX:n,centerY:t,minX:n,minY:t,maxX:n,maxY:t,height:0,width:0}},_b=function(e){for(var n=[],t={},r=e.length-1;r>=0;r--){var i=e[r];i.id="".concat(i.x,"|||").concat(i.y),t[i.id]||(t[i.id]=i,n.push(i))}return n},pP=function(e){return _b(e)},cg=function(e,n){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-n,minY:e.minY-n,maxX:e.maxX+n,maxY:e.maxY+n,height:e.height+2*n,width:e.width+2*n}:e},kb=function(e,n,t){var r=function(a,s){var u=Math.abs(a.x-s.centerX),c=Math.abs(a.y-s.centerY);return u===0&&c===0?0:u/s.width>c/s.height}(n,e);if(r===0){var i=e.centerX,o=e.centerY;return t.y<n.y?o=e.minY:t.x>n.x?i=e.maxX:t.x<n.x?i=e.minX:t.x===n.x&&(o=e.maxY),{x:i,y:o}}return r?{x:n.x>e.centerX?e.maxX:e.minX,y:n.y}:{x:n.x,y:n.y>e.centerY?e.maxY:e.minY}},gP=function(e,n){var t=Math.min(e.minX,n.minX),r=Math.min(e.minY,n.minY),i=Math.max(e.maxX,n.maxX),o=Math.max(e.maxY,n.maxY);return{centerX:(t+i)/2,centerY:(r+o)/2,minX:t,minY:r,maxX:i,maxY:o,height:o-r,width:i-t}},Cb=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},lg=function(e,n){var t=e.x,r=e.y;return t<n.minX||t>n.maxX||r<n.minY||r>n.maxY},gh=function(e,n){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)},vP=function(e,n,t,r,i){return gh(e,n)+gh(e,t)+function(o,a){var s=0;return a.forEach(function(u){u&&(o.x===u.x&&(s+=-2),o.y===u.y&&(s+=-2))}),s}(e,[n,t,r,i])},vV=function e(n,t,r,i,o){o===void 0&&(o=0),n.unshift(t[i]),r[i]&&r[i]!==i&&o<=100&&e(n,t,r,r[i],o+1)},hg=function(e,n,t,r){var i=t.x-e.x,o=t.y-e.y,a=r.x-e.x,s=r.y-e.y,u=t.x-n.x,c=t.y-n.y,l=r.x-n.x,h=r.y-n.y;return(i*s-o*a)*(u*h-c*l)<=0&&(i*c-o*u)*(a*h-s*l)<=0},Ab=function(e,n,t){if(t.width||t.height){var r=Cb(t),i=r[0],o=r[1],a=r[2],s=r[3];return hg(e,n,i,o)||hg(e,n,i,s)||hg(e,n,o,a)||hg(e,n,a,s)}return!1},mV=function(e,n,t,r){var i=[];return e.forEach(function(o){if(o!==n&&(o.x===n.x||o.y===n.y)){if(Ab(o,n,t)||Ab(o,n,r))return;i.push(o)}}),_b(i)},mP=function(e,n){var t=[],r=e[0];return t.push("M".concat(r.x," ").concat(r.y)),e.forEach(function(i,o){var a=e[o+1],s=e[o+2];if(a&&s)if(function(h,d,f){return!(h.x===d.x&&d.x===f.x||h.y===d.y&&d.y===f.y)}(i,a,s)){var u=function(h,d,f,p){var g=gh(h,d),v=gh(f,d);return g<p&&(p=g),v<p&&(p=v),[{x:d.x-p/g*(d.x-h.x),y:d.y-p/g*(d.y-h.y)},{x:d.x-p/v*(d.x-f.x),y:d.y-p/v*(d.y-f.y)}]}(i,a,s,n),c=u[0],l=u[1];t.push("L".concat(c.x," ").concat(c.y)),t.push("Q".concat(a.x," ").concat(a.y," ").concat(l.x," ").concat(l.y)),t.push("L".concat(l.x," ").concat(l.y))}else t.push("L".concat(a.x," ").concat(a.y));else a&&t.push("L".concat(a.x," ").concat(a.y))}),t.join("")},yP=function(e,n,t,r,i){var o,a;if(t&&t.getType())if(t.getType()==="combo"){var s=t.getKeyShape().getBBox();if(s){var u=t.getModel(),c=u.x,l=u.y;(o={x:c,y:l,width:s.width,height:s.height,minX:s.minX+c,maxX:s.maxX+c,minY:s.minY+l,maxY:s.maxY+l}).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=ug(e)}else o=t&&t.getBBox();else o=ug(e);if(r&&r.getType())if(r.getType()==="combo"){var h=r.getKeyShape().getBBox();if(h){var d=r.getModel(),f=d.x,p=d.y;(a={x:f,y:p,width:h.width,height:h.height,minX:h.minX+f,maxX:h.maxX+f,minY:h.minY+p,maxY:h.maxY+p}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=ug(n)}else a=r&&r.getBBox();else a=ug(n);var g=cg(o,i),v=cg(a,i),m=kb(g,e,n),y=kb(v,n,e),b=function(k){k===void 0&&(k=[]);var _=[],C=[];k.forEach(function(B){_.push(B.x),C.push(B.y)});var T=Math.min.apply(Math,_),A=Math.max.apply(Math,_),D=Math.min.apply(Math,C),R=Math.max.apply(Math,C);return{centerX:(T+A)/2,centerY:(D+R)/2,maxX:A,maxY:R,minX:T,minY:D,height:R-D,width:A-T}}([m,y]),x=gP(g,b),w=gP(v,b),E=[];E=E.concat(Cb(x)).concat(Cb(w));var S={x:(e.x+n.x)/2,y:(e.y+n.y)/2};[b,x,w].forEach(function(k){E=E.concat(function(_,C){return function(T,A){return A<T.minX||A>T.maxX?[]:[{x:A,y:T.minY},{x:A,y:T.maxY}]}(_,C.x).concat(function(T,A){return A<T.minY||A>T.maxY?[]:[{x:T.minX,y:A},{x:T.maxX,y:A}]}(_,C.y))}(k,S).filter(function(_){return lg(_,g)&&lg(_,v)}))}),[{x:m.x,y:y.y},{x:y.x,y:m.y}].forEach(function(k){lg(k,g)&&lg(k,v)&&E.push(k)}),E.unshift(m),E.push(y);var M=function(k,_,C,T,A,D,R){var B,F=[],N=((B={})[_.id]=_,B),L={},z={},Z={};z[_.id]=0,Z[_.id]=vP(_,C,_);var ne=new bP;ne.add({id:_.id,value:Z[_.id]});var J,q={};for(k.forEach(function(me){q[me.id]=me});Object.keys(N).length;){var ie=ne.minId(!1);if(!ie)break;if((J=N[ie])===C){var Me=[];return vV(Me,q,L,C.id),Me}delete N[J.id],ne.remove(J.id),F.push(J),mV(k,J,T,A).forEach(function(me){if(F.indexOf(me)===-1){var ke=me.id;N[ke]||(N[ke]=me);var yt=Z[J.id]+gh(J,me);z[ke]&&yt>=z[ke]||(L[ke]=J.id,z[ke]=yt,Z[ke]=z[ke]+vP(me,C,_,D,R)),ne.add({id:ke,value:Z[ke]})}})}return[_,C]}(E=_b(E),m,y,o,a,e,n);return M.unshift(e),M.push(n),pP(M)},bP=function(){function e(){this.arr=[],this.map={},this.arr=[],this.map={}}return e.prototype._innerAdd=function(n,t){for(var r=[0,t-1];r[1]-r[0]>1;){var i=Math.floor((r[0]+r[1])/2);if(this.arr[i].value>n.value)r[1]=i;else{if(!(this.arr[i].value<n.value))return this.arr.splice(i,0,n),void(this.map[n.id]=!0);r[0]=i}}this.arr.splice(r[1],0,n),this.map[n.id]=!0},e.prototype.add=function(n){delete this.map[n.id];var t=this.arr.length;return t?this.arr[t-1].value<n.value?(this.arr.push(n),void(this.map[n.id]=!0)):void this._innerAdd(n,t):(this.arr.push(n),void(this.map[n.id]=!0))},e.prototype.remove=function(n){this.map[n]&&delete this.map[n]},e.prototype._clearAndGetMinId=function(){for(var n,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?n=this.arr[t].id:this.arr.splice(t,1);return n},e.prototype._findFirstId=function(){for(;this.arr.length;){var n=this.arr.shift();if(this.map[n.id])return n.id}},e.prototype.minId=function(n){return n?this._clearAndGetMinId():this._findFirstId()},e}(),yV={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(e,n){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)},fallbackRoute:function(e,n,t,r,i){return pP(yP(e,n,t,r,i.offset))}},ea=function(e,n){var t=Math.round(Math.abs(e/n));return t<0?0:(e<0?-1:1)*t},Ib=function(e,n){var t=n.x-e.x,r=n.y-e.y;return t||r?Math.atan2(r,t):0},xP=function(e,n){var t=Math.abs(e-n);return t>Math.PI?2*Math.PI-t:t},wP=function(e,n,t){for(var r=1/0,i=0,o=n.length;i<o;i++){var a=t(e,n[i]);a<r&&(r=a)}return r},EP=function(e,n,t,r,i){var o=[];if(!t)return[e];var a=i.directions,s=i.offset,u=t.getBBox(),c=n.x>u.minX&&n.x<u.maxX&&n.y>u.minY&&n.y<u.maxY,l=cg(u,s);for(var h in l)l[h]=ea(l[h],i.gridSize);if(c){for(var d=0,f=a;d<f.length;d++){var p=f[d],g=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]];for(h=0;h<4;h++){var v=g[h],m=So.getLineIntersect(e,{x:e.x+p.stepX*l.width,y:e.y+p.stepY*l.height},v[0],v[1]);m&&!Ab(e,m,u)&&(m.id="".concat(m.x,"|||").concat(m.y),o.push(m))}}return o}var y=kb(l,e,r);return y.id="".concat(y.x,"|||").concat(y.y),[y]},Tb=function(e,n,t,r){var i=Ib(e,n),o=t[e.id];if(!o){var a=Ib(r,e);return xP(a,i)}var s=Ib({x:o.x,y:o.y},e);return xP(s,i)},bV=function(e,n,t,r,i,o,a){var s=[r],u=r,c=e.id,l=e.x,h=e.y,d={x:l,y:h,id:c};Tb(d,o,n,t)&&(u={x:o.x===r.x?r.x:d.x*a,y:o.y===r.y?r.y:d.y*a},s.unshift(u));for(var f=n[c];f&&f.id!==c;){var p={x:l,y:h,id:c},g={x:f.x,y:f.y,id:f.id};Tb(g,p,n,t)&&(u={x:g.x===p.x?u.x:g.x*a,y:g.y===p.y?u.y:g.y*a},s.unshift(u)),l=g.x,h=g.y,f=n[c=g.id]}return s[0].x=l===t.x?i.x:u.x,s[0].y=h===t.y?i.y:u.y,s.unshift(i),s},xV=function(e,n,t,r,i){if(isNaN(e.x)||isNaN(n.x))return[];var o=Zt(yV,i);o.obstacles=o.obstacles||[];var a=o.penalties,s=o.gridSize,u=function(N,L,z){var Z={};return N.forEach(function(ne){if(ne)for(var J=cg(ne.getBBox(),z),q=ea(J.minX,L);q<=ea(J.maxX,L);q+=1)for(var ie=ea(J.minY,L);ie<=ea(J.maxY,L);ie+=1)Z["".concat(q,"|||").concat(ie)]=!0}),Z}(o.obstacles.concat([t,r]),s,o.offset),c={x:ea(e.x,s),y:ea(e.y,s)},l={x:ea(n.x,s),y:ea(n.y,s)};e.id="".concat(c.x,"|||").concat(c.y),n.id="".concat(l.x,"|||").concat(l.y);var h=EP(c,e,t,l,o),d=EP(l,n,r,c,o);h.forEach(function(N){delete u[N.id]}),d.forEach(function(N){delete u[N.id]});for(var f={},p={},g={},v={},m={},y=new bP,b=0;b<h.length;b++){var x=h[b];f[x.id]=x,v[x.id]=0,m[x.id]=wP(x,d,o.distFunc),y.add({id:x.id,value:m[x.id]})}var w,E,S,M,k,_,C=o.maximumLoops,T=1/0,A={};for(d.forEach(function(N){A["".concat(N.x,"|||").concat(N.y)]=!0}),Object.keys(f).forEach(function(N){var L=f[N].id;m[L]<=T&&(T=m[L],w=f[L])});Object.keys(f).length>0&&C>0;){var D=y.minId((C+1)%30==0);if(!D)break;if(w=f[D],A["".concat(w.x,"|||").concat(w.y)])return bV(w,g,c,n,e,l,s);for(delete f[w.id],y.remove(w.id),p[w.id]=!0,b=0;b<o.directions.length;b++){E=o.directions[b];var R="".concat(Math.round(w.x)+E.stepX,"|||").concat(Math.round(w.y)+E.stepY);if(S={x:w.x+E.stepX,y:w.y+E.stepY,id:R},!p[R]&&!((_=Tb(w,S,g,c))>o.maxAllowedDirectionChange||u[R])){f[R]||(f[R]=S);var B=a[_];M=o.distFunc(w,S)+(isNaN(B)?s:B),k=v[w.id]+M;var F=v[R];F&&k>=F||(g[R]=w,v[R]=k,m[R]=k+wP(S,d,o.distFunc),y.add({id:R,value:m[R]}))}}C-=1}return o.fallbackRoute(e,n,t,r,o)};QW("polyline",{options:{color:it.defaultEdge.color,size:it.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:it.defaultEdge.style.stroke,lineAppendWidth:it.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:it.edgeLabel.style.fill,fontSize:it.edgeLabel.style.fontSize,fontFamily:it.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:P({},it.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,n){var t=this.getShapeStyle(e);t.radius===0&&delete t.radius;var r=n.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:t});return n.shapeMap["edge-shape"]=r,r},getShapeStyle:function(e){var n=ut({},this.options.style,{stroke:e.color},e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var t=e.startPoint,r=e.endPoint,i=this.getControlPoints(e),o=[t];i&&(o=o.concat(i)),o.push(r);var a=e.sourceNode,s=e.targetNode,u=n.radius,c=ut({},this.options.routeCfg,e.routeCfg);c.offset=n.offset;var l=this.getPath(o,a,s,u,c,!i);return(at(l)&&l.length<=1||he(l)&&l.indexOf("L")===-1)&&(l="M0 0, L0 0"),(isNaN(t.x)||isNaN(t.y)||isNaN(r.x)||isNaN(r.y))&&(l="M0 0, L0 0"),ut({},it.defaultEdge.style,n,{lineWidth:e.size,path:l})},updateShapeStyle:function(e,n){var t=n.getContainer();if(n.isVisible()){var r={stroke:e.color},i=t.shapeMap["edge-shape"]||t.find(function(y){return y.get("className")==="edge-shape"})||n.getKeyShape(),o=e.size,a=(e=this.getPathPoints(e)).startPoint,s=e.endPoint,u=this.getControlPoints(e),c=[a];u&&(c=c.concat(u)),c.push(s);var l=i.attr(),h=ut({},r,l,e.style),d=e.sourceNode,f=e.targetNode,p=h.radius,g=ut({},this.options.routeCfg,e.routeCfg);g.offset=h.offset;var v=this.getPath(c,d,f,p,g,!u);(at(v)&&v.length<=1||he(v)&&v.indexOf("L")===-1)&&(v="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(v="M0 0, L0 0"),l.endArrow&&h.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&h.startArrow===!1&&(e.style.startArrow={path:""});var m=ut(r,i.attr(),{lineWidth:o,path:v},e.style);i&&i.attr(m)}},getPath:function(e,n,t,r,i,o){var a=i.offset,s=i.obstacles,u=i.simple;if(!a||e.length>2||o===!1){if(r)return mP(e,r);var c=[];return re(e,function(h,d){d===0?c.push(["M",h.x,h.y]):c.push(["L",h.x,h.y])}),c}u===!1||s!=null&&s.length||(u=!0);var l=u?yP(e[e.length-1],e[0],t,n,a):xV(e[0],e[e.length-1],n,t,i);return l&&l.length?r?mP(l,r):(l=function(h){if(!(h!=null&&h.length))return h;for(var d=h[h.length-1],f={x:d.x,y:d.y},p=[d],g=[d],v=h.length-2;v>=0;v--){var m,y=h[v];y.x===f.x?p.push(y):(p=[y],f.x=y.x),y.y===f.y?g.push(y):(g=[y],f.y=y.y),p.length>2?(m=h.indexOf(p[1]))>-1&&h.splice(m,1):g.length>2&&(m=h.indexOf(g[1]))>-1&&h.splice(m,1)}return h}(l),So.pointsToPolygon(l)):"M0 0, L0 0"}},"single-edge");var SP=Ko.cloneEvent,MP=Ko.isNaN,_P=Math.abs,wV=["shift","ctrl","alt","control"];const EV={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var n=this.origin,t=+e.clientX,r=+e.clientY;if(!MP(t)&&!MP(r)){var i=t-n.x,o=r-n.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(i=0),this.origin={x:t,y:r};var a=this.graph.get("width"),s=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c*=a,l*=s),(u.minX<=a+c&&u.minX+i>a+c||u.maxX+c>=0&&u.maxX+c+i<0)&&(i=0),(u.minY<=s+l&&u.minY+o>s+l||u.maxY+l>=0&&u.maxY+l+o<0)&&(o=0),this.graph.translate(i,o)}},onTouchStart:function(e){var n=e.originalEvent.touches,t=n[0],r=n[1];t&&r||(e.preventDefault(),this.mousedown=!0,this.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var n=this,t=e.originalEvent;if((!t||e.name==="touchstart"||t.button===0)&&(e.name==="touchstart"||typeof window=="undefined"||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin(e,this)&&!n.keydown&&this.allowDrag(e)){if(n.origin={x:e.clientX,y:e.clientY},n.dragging=!1,this.enableOptimize){for(var r=this.graph,i=r.getEdges(),o=0,a=i.length;o<a;o++){var s=i[o].get("group").get("children");s&&s.forEach(function(g){g.set("ori-visibility",g.get("ori-visibility")||g.get("visible")),g.hide()})}for(var u=r.getNodes(),c=0,l=u.length;c<l;c++)for(var h=0,d=u[c].getContainer().get("children");h<d.length;h++){var f=d[h];f.get("isKeyShape")||(f.set("ori-visibility",f.get("ori-visibility")||f.get("visible")),f.hide())}}if(typeof window!="undefined"){var p=this;this.handleDOMContextMenu=function(g){return p.onMouseUp(g)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var n=e.originalEvent.touches,t=n[0],r=n[1];t&&r?this.onMouseUp(e):(e.preventDefault(),this.onDrag(e))},onDrag:function(e){if(this.mousedown){var n=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=SP(e),this.origin)){if(this.dragging)e.type="drag",n.emit("canvas:drag",e);else{if(_P(this.origin.x-e.clientX)+_P(this.origin.y-e.clientY)<10)return;this.shouldBegin(e,this)&&(e.type="dragstart",n.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var n,t;this.mousedown=!1,this.dragstart=!1;var r=this.graph;if(!this.keydown){var i=r.getZoom(),o=r.get("modeController"),a=(t=(n=o==null?void 0:o.modes[o.mode])===null||n===void 0?void 0:n.filter(function(b){return b.type==="zoom-canvas"}))===null||t===void 0?void 0:t[0],s=a?a.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=r.getEdges(),c=0,l=u.length;c<l;c++){var h=u[c].get("group").get("children");h&&h.forEach(function(b){var x=b.get("ori-visibility");b.set("ori-visibility",void 0),x&&b.show()})}if(i>s)for(var d=r.getNodes(),f=0,p=d.length;f<p;f++)for(var g=0,v=d[f].getContainer().get("children");g<v.length;g++){var m=v[g];if(!m.get("isKeyShape")){var y=m.get("ori-visibility");m.set("ori-visibility",void 0),y&&m.show()}}}this.dragging?(e=SP(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,r.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var n=e.key;n&&(wV.indexOf(n.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var n,t,r=e.target,i=r&&r.isCanvas&&r.isCanvas();if(qa(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if(Tn(this.allowDragOnItem)){var o=this.allowDragOnItem,a=o.node,s=o.edge,u=o.combo,c=(t=(n=e.item)===null||n===void 0?void 0:n.getType)===null||t===void 0?void 0:t.call(n);if(!a&&c==="node"||!s&&c==="edge"||!u&&c==="combo")return!1}return!0}},SV={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){return!(!this.origin||!e||e.destroyed)&&e.getType()==="combo"},onTouchStart:function(e){if(e.item){try{var n=e.originalEvent.touches,t=n[0],r=n[1];if(t&&r)return;e.preventDefault()}catch(i){}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,this.onDragStart(e)}},onTouchMove:function(e){try{var n=e.originalEvent.touches,t=n[0],r=n[1];if(t&&r)return void this.onDragEnd(e);e.preventDefault()}catch(i){}this.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window=="undefined"||this.windowEventBinded||(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var n,t;((t=(n=e.item)===null||n===void 0?void 0:n.getType)===null||t===void 0?void 0:t.call(n))==="node"?this.mousedown&&(this.dragstart?this.onDrag(P(P({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e))):this.onDragEnd()},onDragStart:function(e){var n=this;if(this.currentShouldEnd=!0,this.shouldBegin(P(P({},e),this.mousedown),this)){var t=this.mousedown,r=t.item,i=t.target;if(r&&!r.destroyed&&!r.hasLocked()){if(r.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(r),i&&i.get("isAnchorPoint"))return;var o=this.graph;this.targets=[],this.targetCombo=null;var a=o.findAllByState("node",this.selectedState),s=r.get("id");if(a.filter(function(c){var l=c.get("id");return s===l}).length===0?this.targets.push(r):a.length>1?a.forEach(function(c){c.hasLocked()||n.targets.push(c)}):this.targets.push(r),this.graph.get("enabledStack")&&this.enableStack){var u=[];this.targets.forEach(function(c){var l=c.getModel(),h=l.x,d=l.y,f=l.id;u.push({x:h,y:d,id:f})}),this.set("beforeDragNodes",u)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(c){c.getEdges().forEach(function(l){l.isVisible()&&(n.hidenEdge[l.getID()]=!0,l.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var n=this;if(this.mousedown&&this.origin&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var t={};this.targets.map(function(r){n.update(r,e);var i=r.getModel().comboId;i&&(t[i]=n.graph.findById(i))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var n,t=this;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),this.origin){(n=this.cachedCaptureItems)===null||n===void 0||n.forEach(function(o){o.getContainer().set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){o.getEdges().forEach(function(a){t.hidenEdge[a.getID()]&&a.show(),a.refresh()})}),this.hidenEdge={};var r=this.graph;if(r.get("enabledStack")&&this.enableStack){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){i.before.nodes.push(o)}),this.targets.forEach(function(o){var a=o.getModel(),s=a.x,u=a.y,c=a.id;i.after.nodes.push({x:s,y:u,id:c})}),r.pushStack("update",_t(i))}r.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var n=e.item;if(this.currentShouldEnd=this.shouldEnd(e,n,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(n)){var t=this.graph;if(this.comboActiveState&&t.setItemState(n,this.comboActiveState,!1),this.targetCombo=n,this.onlyChangeComboSize)t.updateCombos();else{var r=n.getModel();this.targets.map(function(i){i.getModel().comboId!==r.id&&t.updateComboTree(i,r.id)}),t.updateCombo(n)}t.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var n=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),this.targets&&this.targets.length!==0&&this.currentShouldEnd&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(t){t.getModel().comboId&&n.updateComboTree(t)}))},onDropNode:function(e){if(this.targets&&this.targets.length!==0){var n=this,t=e.item,r=n.graph,i=t.getModel().comboId,o=i?r.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(i){var a=r.findById(i);n.comboActiveState&&r.setItemState(a,n.comboActiveState,!1),this.targets.map(function(s){var u=s.getModel();i!==u.comboId&&r.updateComboTree(s,i)}),r.updateCombo(a)}else this.targets.map(function(s){s.getModel().comboId&&r.updateComboTree(s)});r.emit("dragnodeend",{items:this.targets,targetItem:t})}}},onDragEnter:function(e){var n=e.item;if(this.validationCombo(n)){var t=this.graph;this.comboActiveState&&t.setItemState(n,this.comboActiveState,!0)}},onDragLeave:function(e){var n=e.item;if(this.validationCombo(n)){var t=this.graph;this.comboActiveState&&t.setItemState(n,this.comboActiveState,!1)}},updatePositions:function(e,n){var t=this;this.targets&&this.targets.length!==0&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):n||this.targets.map(function(r){return t.update(r,e)}):this.targets.map(function(r){return t.update(r,e,n)}))},update:function(e,n,t){var r=this.origin,i=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:i.x||0,y:i.y||0});var a=n.x-r.x+this.point[o].x,s=n.y-r.y+this.point[o].y;t&&(a+=r.x-n.x,s+=r.y-n.y);var u={x:a,y:s};this.get("updateEdge")?this.graph.updateItem(e,u,!1):e.updatePosition(u)},debounceUpdate:nu(function(e){var n=e.targets,t=e.graph,r=e.point,i=e.origin,o=e.evt,a=e.updateEdge,s=e.onlyChangeComboSize,u=e.updateParentCombos;n.map(function(c){var l=c.get("model"),h=c.get("id");r[h]||(r[h]={x:l.x||0,y:l.y||0});var d={x:o.x-i.x+r[h].x,y:o.y-i.y+r[h].y};a?t.updateItem(c,d,!1):c.updatePosition(d)}),s&&u(t,n)},50,!0),updateDelegate:function(e){var n=this.graph;if(this.delegateRect){var t=e.x-this.origin.x+this.originPoint.minX,r=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:t,y:r})}else{var i=n.get("group"),o=Zt({},ss.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),s=a.x,u=a.y,c=a.width,l=a.height,h=a.minX,d=a.minY;this.originPoint={x:s,y:u,width:c,height:l,minX:h,minY:d},this.delegateRect=i.addShape("rect",{attrs:P({width:c,height:l,x:s,y:u},o),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var n=this.targets;n.length===0&&n.push(e.item);for(var t=1/0,r=-1/0,i=1/0,o=-1/0,a=0;a<n.length;a++){var s=n[a].getBBox(),u=s.minX,c=s.minY,l=s.maxX,h=s.maxY;u<t&&(t=u),c<i&&(i=c),l>r&&(r=l),h>o&&(o=h)}return{x:Math.floor(t),y:Math.floor(i),width:Math.ceil(r)-Math.floor(t),height:Math.ceil(o)-Math.floor(i),minX:t,minY:i}},updateParentCombos:function(e,n){var t=e||this.graph,r=n||this.targets,i={};r==null||r.forEach(function(o){var a=o.getModel().comboId;a&&(i[a]=t.findById(a))}),Object.values(i).forEach(function(o){o&&t.updateCombo(o)})}};var dg=null;const MV={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){try{var n=e.originalEvent.touches,t=n[0],r=n[1];if(t&&r)return;e.preventDefault()}catch(i){}this.setAllItemStates(e)},clearOnTouchStart:function(e){try{var n=e.originalEvent.touches,t=n[0],r=n[1];if(t&&r)return;e.preventDefault()}catch(i){}this.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var n=this;this.shouldClearStatusOnSecond&&(dg=null),this.timer=setTimeout(function(){n.throttleClearActiveState(e,n)},50)},throttleSetAllItemStates:ru(function(e,n){var t=e.item,r=n.graph;if(r&&!r.destroyed&&(n.item=t,n.shouldUpdate(e.item,{event:e,action:"activate"},n))){var i=n.shouldClearStatusOnSecond,o=t.getModel().id;if(dg===o&&i)return n.throttleClearActiveState(e,n),void(dg=null);for(var a=n.activeState,s=n.inactiveState,u=r.getNodes(),c=r.getCombos(),l=r.getEdges(),h=r.get("vedges"),d=u.length,f=c.length,p=l.length,g=h.length,v=n.inactiveItems||{},m=n.activeItems||{},y=0;y<d;y++){var b=u[y],x=b.getID(),w=b.hasState("selected");n.resetSelected&&w&&r.setItemState(b,"selected",!1),m[x]&&(r.setItemState(b,a,!1),delete m[x]),s&&!v[x]&&(r.setItemState(b,s,!0),v[x]=b)}for(y=0;y<f;y++){var E=c[y],S=E.getID();w=E.hasState("selected"),n.resetSelected&&w&&r.setItemState(E,"selected",!1),m[S]&&(r.setItemState(E,a,!1),delete m[S]),s&&!v[S]&&(r.setItemState(E,s,!0),v[S]=E)}for(y=0;y<p;y++)m[A=(T=l[y]).getID()]&&(r.setItemState(T,a,!1),delete m[A]),s&&!v[A]&&(r.setItemState(T,s,!0),v[A]=T);for(y=0;y<g;y++){var M=h[y],k=M.getID();m[k]&&(r.setItemState(M,a,!1),delete m[k]),s&&!v[k]&&(r.setItemState(M,s,!0),v[k]=M)}if(t&&!t.destroyed){s&&(r.setItemState(t,s,!1),delete v[t.getID()]),m[t.getID()]||(r.setItemState(t,a,!0),m[t.getID()]=t);var _=t.getEdges(),C=_.length;for(y=0;y<C;y++){var T,A=(T=_[y]).getID(),D=void 0,R=(D=T.getSource()===t?T.getTarget():T.getSource()).getID();s&&v[R]&&(r.setItemState(D,s,!1),delete v[R]),m[R]||(r.setItemState(D,a,!0),m[R]=D),v[A]&&(r.setItemState(T,s,!1),delete v[A]),m[A]||(r.setItemState(T,a,!0),m[A]=T),T.toFront()}}n.activeItems=m,n.inactiveItems=v,i&&(dg=t.getModel().id),r.emit("afteractivaterelations",{item:e.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:ru(function(e,n){var t=n.get("graph");if(t&&!t.destroyed&&n.shouldUpdate(e.item,{event:e,action:"deactivate"},n)){var r=n.activeState,i=n.inactiveState,o=n.activeItems||{},a=n.inactiveItems||{};Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,i)}),n.activeItems={},n.inactiveItems={},t.emit("afteractivaterelations",{item:e.item||n.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})};var fg=Math.min,kP=Math.max,CP=Math.abs,AP="shift",_V=["drag","shift","ctrl","alt","control"];const kV={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:AP,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return _V.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=AP),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var n=e.item,t=this.brush,r=this.selectOnCombo,i=(n==null?void 0:n.getType())==="combo";i&&!r||!i&&n||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),t||(t=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},t.attr({width:0,height:0}),t.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger==="drag"||this.keydown)&&this.updateBrush(e)},onMouseUp:function(e){this.graph,(this.brush||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this.graph,n=this.selectedState,t=e.findAllByState("node",n),r=e.findAllByState("edge",n),i=e.findAllByState("combo",n);t.forEach(function(o){return e.setItemState(o,n,!1)}),r.forEach(function(o){return e.setItemState(o,n,!1)}),i.forEach(function(o){return e.setItemState(o,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,n,t,r,i){var o=e.getBBox();return o.centerX>=n&&o.centerX<=t&&o.centerY>=r&&o.centerY<=i},getSelectedNodes:function(e){var n=this,t=this,r=t.graph,i=t.originPoint,o=t.shouldUpdate,a=t.isBBoxCenterInRect,s=this.selectedState,u={x:e.x,y:e.y},c=r.getPointByCanvas(i.x,i.y),l=fg(u.x,c.x),h=kP(u.x,c.x),d=fg(u.y,c.y),f=kP(u.y,c.y),p=[],g=[];r.getNodes().forEach(function(y){if(y.isVisible()&&a(y,l,h,d,f)&&o(y,"select",n)){p.push(y);var b=y.getModel();g.push(b.id),r.setItemState(y,s,!0)}});var v=[];this.includeEdges&&p.forEach(function(y){y.getOutEdges().forEach(function(b){if(b.isVisible()){var x=b.getModel(),w=x.source,E=x.target;g.includes(w)&&g.includes(E)&&o(b,"select",n)&&(v.push(b),r.setItemState(b,n.selectedState,!0))}})});var m=[];this.includeCombos&&r.getCombos().forEach(function(y){if(y.isVisible()&&a(y,l,h,d,f)&&o(y,"select",n)){m.push(y);var b=y.getModel();g.push(b.id),r.setItemState(y,s,!0)}}),this.selectedEdges=v,this.selectedNodes=p,this.selectedCombos=m,this.onSelect&&this.onSelect(p,v,m),r.emit("nodeselectchange",{selectedItems:{nodes:p,edges:v,combos:m},select:!0})},createBrush:function(){var e=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=e,this.delegate=e,e},updateBrush:function(e){var n=this.originPoint;this.brush.attr({width:CP(e.canvasX-n.x),height:CP(e.canvasY-n.y),x:fg(e.canvasX,n.x),y:fg(e.canvasY,n.y)})},onKeyDown:function(e){var n=e.key;if(n){var t=this.trigger.toLowerCase(),r=n.toLowerCase();this.keydown=r===t||r==="control"&&t==="ctrl"||r==="ctrl"&&t==="control"}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var IP="shift",CV=["shift","ctrl","alt","control"];const AV={getDefaultCfg:function(){return{multiple:!0,trigger:IP,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return CV.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=IP),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var n=this,t=e.item;if(t&&!t.destroyed){var r=t.getType(),i=n.graph,o=n.keydown,a=n.multiple,s=n.shouldUpdate;if((0,n.shouldBegin)(e,n))if((!o||!a)&&re(i.findAllByState("node",n.selectedState).concat(i.findAllByState("edge",n.selectedState)).concat(i.findAllByState("combo",n.selectedState)),function(h){h!==t&&i.setItemState(h,n.selectedState,!1)}),function(){switch(r){case"node":return n.selectNode;case"edge":return n.selectEdge;case"combo":return n.selectCombo;default:return!1}}())t.hasState(n.selectedState)?(s(e,n)&&i.setItemState(t,n.selectedState,!1),u=i.findAllByState("node",n.selectedState),c=i.findAllByState("edge",n.selectedState),l=i.findAllByState("combo",n.selectedState),i.emit("nodeselectchange",{target:t,selectedItems:{nodes:u,edges:c,combos:l},select:!1})):(s(e,n)&&i.setItemState(t,n.selectedState,!0),u=i.findAllByState("node",n.selectedState),c=i.findAllByState("edge",n.selectedState),l=i.findAllByState("combo",n.selectedState),i.emit("nodeselectchange",{target:t,selectedItems:{nodes:u,edges:c,combos:l},select:!0}));else{var u=i.findAllByState("node",n.selectedState),c=i.findAllByState("edge",n.selectedState),l=i.findAllByState("combo",n.selectedState);i.emit("nodeselectchange",{selectedItems:{nodes:u,edges:c,combos:l},select:!1})}}},onCanvasClick:function(e){var n=this,t=this.graph;(0,this.shouldBegin)(e,this)&&(re(t.findAllByState("node",this.selectedState),function(r){t.setItemState(r,n.selectedState,!1)}),re(t.findAllByState("edge",this.selectedState),function(r){t.setItemState(r,n.selectedState,!1)}),re(t.findAllByState("combo",this.selectedState),function(r){t.setItemState(r,n.selectedState,!1)}),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1}))},onKeyDown:function(e){var n=e.key;n&&(n.toLowerCase()===this.trigger.toLowerCase()||n.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}};var IV=br,pg=.05;const TV={getDefaultCfg:function(){return this.isFireFox=gO()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var n=e.originalEvent.touches,t=n[0],r=n[1];e.preventDefault(),r&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:t.pageX,pageY:t.pageY},this.moveable=!0,r&&(this.endPoint={pageX:r.pageX,pageY:r.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var n=e.originalEvent.touches,t=n[0],r=n[1];if(r){this.endPoint||(this.endPoint={pageX:r.pageX,pageY:r.pageY});var i=function(h,d){return Math.hypot(d.x-h.x,d.y-h.y)},o=i({x:t.pageX,y:t.pageY},{x:r.pageX,y:r.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*o;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom");if(!(a>(this.get("maxZoom")||this.graph.get("maxZoom"))||a<s)){var u=this.get("animate"),c=this.get("animateCfg"),l=this.graph.get("canvas").getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(a,{x:l.x,y:l.y},u,c),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var n=this,t=this.graph,r=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var i=t.get("canvas").getPointByClient(e.clientX,e.clientY),o=this.get("sensitivity"),a=t.getZoom(),s=a;s=a*(this.isFireFox?e.deltaY>0||e.wheelDelta<0?1-pg*o:1/(1-pg*o):e.wheelDelta<0?1-pg*o:1/(1-pg*o));var u=this.get("minZoom")||t.get("minZoom"),c=this.get("maxZoom")||t.get("maxZoom");if(s>c?s=c:s<u&&(s=u),this.get("enableOptimize")){var l=this.get("optimizeZoom"),h=this.get("optimized"),d=t.getNodes(),f=t.getEdges(),p=d.length,g=f.length;if(!h){for(var v=0;v<p;v++)if(!(_=d[v]).destroyed)for(var m=(ct=_.get("group").get("children")).length,y=0;y<m;y++)(z=ct[y]).destoryed||z.get("isKeyShape")||(z.set("ori-visibility",z.get("ori-visibility")||z.get("visible")),z.hide());for(var b=0;b<g;b++)for(m=(ct=(cn=f[b]).get("group").get("children")).length,y=0;y<m;y++)(z=ct[y]).set("ori-visibility",z.get("ori-visibility")||z.get("visible")),z.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var x=setTimeout(function(){var Ye=t.getZoom();if(n.get("optimized")){n.set("optimized",!1);for(var Pe=0;Pe<p;Pe++){var Se=d[Pe],We=(_e=Se.get("group").get("children")).length;if(Ye<l){var Ve=(Je=Se.getKeyShape()).get("ori-visibility");Je.set("ori-visibility",void 0),Ve&&Je.show()}else for(var O=0;O<We;O++)Ve=(qe=_e[O]).get("ori-visibility"),qe.set("ori-visibility",void 0),!qe.get("visible")&&Ve&&Ve&&qe.show()}for(var fe=0;fe<g;fe++){var _e,Ze=f[fe];if(We=(_e=Ze.get("group").get("children")).length,Ye<l){var Je;Ve=(Je=Ze.getKeyShape()).get("ori-visibility"),Je.set("ori-visibility",void 0),Ve&&Je.show()}else for(O=0;O<We;O++){var qe;(qe=_e[O]).get("visible")||(Ve=qe.get("ori-visibility"),qe.set("ori-visibility",void 0),Ve&&qe.show())}}}},100);this.set("timeout",x)}if(a<=1){var w=void 0,E=void 0;if(r.fixAll||r.fixLineWidth||r.fixLabel){w=t.findAllByState("node",r.fixState),E=t.findAllByState("edge",r.fixState);for(var S=a/s,M=w.length,k=0;k<M;k++){var _,C=(_=w[k]).getContainer(),T=_.getModel(),A=_.getOriginStyle(),D=_.getStateStyle(r.fixState),R=_.get("shapeFactory").getShape(T.type).getStateStyle(r.fixState,_)[r.fixState];if(r.fixAll){if(s<=1){var B=_t(C.getMatrix());B||(B=[1,0,0,0,1,0,0,0,1]);var F=_.getModel(),N=F.x,L=F.y;B=IV(B,[["t",-N,-L],["s",S,S],["t",N,L]]),C.setMatrix(B)}}else for(m=(ct=C.get("children")).length,y=0;y<m;y++){var z=ct[y],Z=void 0,ne=void 0;if(r.fixLabel&&z.get("type")==="text"){Z=z.attr("fontSize")||12;var J=D[z.get("name")],q=R[z.get("name")],ie=J?J.fontSize:12,Me=q?q.fontSize:12,me=ie||Me||12;if(s<=1&&z.attr("fontSize",me/s),ne)break}if(r.fixLineWidth&&z.get("isKeyShape")){ne=z.attr("lineWidth")||0;var ke=D.lineWidth||R.lineWidth||A.lineWidth||0;if(s<=1&&z.attr("lineWidth",ke/s),Z)break}}}for(var yt=E.length,Tt=0;Tt<yt;Tt++){var cn,ct=(C=(cn=E[Tt]).getContainer()).get("children");for(T=cn.getModel(),D=cn.getStateStyle(r.fixState),R=cn.get("shapeFactory").getShape(T.type).getStateStyle(r.fixState,cn)[r.fixState],m=ct.length,y=0;y<m&&(z=ct[y],Z=void 0,ne=void 0,!((r.fixLabel||r.fixAll)&&z.get("type")==="text"&&(Z=z.attr("fontSize")||12,J=D[z.get("name")],q=R[z.get("name")],ie=J?J.fontSize:12,Me=q?q.fontSize:12,me=ie||Me||12,s<=1&&z.attr("fontSize",me/s),ne)||(r.fixLineWidth||r.fixAll)&&z.get("isKeyShape")&&(ne=z.attr("lineWidth")||0,ke=D.lineWidth||R.lineWidth||1,s<=1&&z.attr("lineWidth",ke/s),Z)));y++);}}}var Ge=this.get("animate"),Oe=this.get("animateCfg");t.zoomTo(s,{x:i.x,y:i.y},Ge,Oe),t.emit("wheelzoom",e)}}},TP={onMouseEnter:function(e){var n=e.item;this.currentTarget=n,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){this.shouldUpdate(e,this)?this.currentTarget&&e.item===this.currentTarget&&this.updatePosition(e):this.hideTooltip()},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var n=this.container;if(e.item&&!e.item.destroyed){n||(n=this.createTooltip(this.graph.get("canvas")),this.container=n);var t=this.formatText(e.item.get("model"),e);n.innerHTML=t,Ht(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Ht(this.container,{visibility:"hidden"})},updatePosition:function(e){var n=this.get("shouldBegin"),t=this,r=t.width,i=t.height,o=t.container,a=t.graph;if(n(e,this)){var s=a.getPointByClient(e.clientX,e.clientY),u=a.getCanvasByPoint(s.x,s.y),c=u.x,l=u.y,h=o.getBoundingClientRect();c>r/2?c-=h.width:c+=this.offset,l>i/2?l-=h.height:l+=this.offset;var d="".concat(c,"px"),f="".concat(l,"px");Ht(this.container,{left:d,top:f,visibility:"visible"})}else Ht(o,{visibility:"hidden"})},createTooltip:function(e){var n=e.get("el");n.style.position="relative";var t=xn('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return n.parentNode.appendChild(t),Ht(t,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=t,this.graph.get("tooltips").push(t),t}},OV=P({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(e){return e.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},TP),NV=P({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(e){return"source: ".concat(e.source," target: ").concat(e.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},TP);var OP="click",PV=["click","dblclick"];const DV={getDefaultCfg:function(){return{trigger:OP,onChange:function(){}}},getEvents:function(){var e,n;return n=PV.includes(this.trigger)?this.trigger:OP,(e={})["node:".concat(n)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var n=this;if(this.trigger==="click"){if(this.timer)return clearTimeout(this.timer),void(this.timer=0);this.timer=setTimeout(function(){n.toggle(e),clearTimeout(n.timer),n.timer=0},200)}else this.toggle(e)},toggle:function(e){var n=e.item;if(n){var t=this.graph.findDataById(n.get("id"));if(t){var r=t.children;if(r&&r.length!==0){var i=!t.collapsed;this.shouldBegin(e,i,this)&&(t.collapsed=i,n.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:e.item,collapsed:i}),this.shouldUpdate(e,i,this)&&(this.onChange(n,i,this),this.graph.layout()))}}}}};var LV=Ko.calculationItemsBBox,BV=function e(n,t){if(t(n)!==!1&&n){var r=n.get("combos");if(r.length===0)return!1;re(r,function(i){e(i,t)})}};const RV={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var n=e.item;return!(!n||n.destroyed)&&!!this.shouldUpdate(e,this)&&n.getType()==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var n=this,t=this.graph,r=e.item;if(this.currentShouldEnd=!0,this.validationCombo(e)){this.targets=[];var i=t.findAllByState("combo",this.selectedState),o=r.get("id");i.filter(function(s){var u=s.get("id");return o===u}).length===0?this.targets.push(r):this.targets=i;var a=[];this.targets.forEach(function(s){var u=s.getModel(),c=u.x,l=u.y,h=u.id;a.push({x:c,y:l,id:h})}),this.set("beforeDragItems",a),this.activeState&&this.targets.map(function(s){var u=s.getModel();if(u.parentId){var c=t.findById(u.parentId);c&&t.setItemState(c,n.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],BV(r,function(s){if(s.destroyed)return!1;var u=s.getModel();return n.currentItemChildCombos.push(u.id),!0})}},onDrag:function(e){var n=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var t=this.graph,r=e.item,i=r.getModel(),o=t.getCombos(),a=r.getBBox(),s=a.centerX,u=a.centerY,c=a.width;o.filter(function(l){var h=l.getModel();return i.parentId,h.id!==i.id&&!n.currentItemChildCombos.includes(h.id)}).map(function(l){var h=l.getBBox(),d=h.centerX,f=h.centerY,p=h.width,g=s-d,v=u-f,m=2*Math.sqrt(g*g+v*v);c+p-m>.8*c?t.setItemState(l,n.activeState,!0):t.setItemState(l,n.activeState,!1)})}re(this.targets,function(l){n.updateCombo(l,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,n){var t=this;(this.enableDelegate||n)&&re(this.targets,function(r){t.updateCombo(r,e,n)})},onDrop:function(e){var n=this,t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&t&&this.targets&&!t.destroyed){var r=this.graph,i=t.getModel();this.targets.map(function(o){o.getModel().parentId!==i.id?(n.activeState&&r.setItemState(t,n.activeState,!1),n.onlyChangeComboSize?r.updateCombo(o):r.updateComboTree(o,i.id,!1)):r.updateCombo(t)}),this.end(t,e),this.endComparison=!0}},onNodeDrop:function(e){var n=this;if(this.targets&&this.targets.length!==0){var t=this.graph,r=e.item.getModel().comboId,i=r?t.findById(r):void 0;if(this.currentShouldEnd=this.shouldEnd(e,i,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd){var o;if(r){if(this.activeState){var a=t.findById(r);t.setItemState(a,this.activeState,!1)}this.targets.map(function(s){n.onlyChangeComboSize?t.updateCombo(s):r!==s.getID()&&(o=t.findById(r),r!==s.getModel().parentId&&t.updateComboTree(s,r,!1))})}else this.targets.map(function(s){n.onlyChangeComboSize?t.updateCombo(s):s.getModel().comboId&&t.updateComboTree(s,void 0,!1)});this.endComparison=!0,this.end(o,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var n=e.item,t=this.graph;this.activeState&&t.setItemState(n,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var n=e.item,t=this.graph;this.activeState&&t.setItemState(n,this.activeState,!1)}},onDragEnd:function(e){if(this.targets&&this.targets.length!==0){var n=e.item;this.currentShouldEnd&&this.updatePositions(e);var t=this.getParentCombo(n.getModel().parentId),r=this.graph;t&&this.activeState&&r.setItemState(t,this.activeState,!1),this.end(void 0,e)}},end:function(e,n){var t=this;if(this.origin){var r=this.graph;if(this.delegateShape&&(r.get("delegateGroup").clear(),this.delegateShape=null),e&&this.activeState&&r.setItemState(e,this.activeState,!1),!e){var i=r.get("enabledStack")&&this.enableStack,o={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(a){if(t.onlyChangeComboSize){r.updateCombo(a);var s=a.getModel(),u=s.x,c=s.y,l=s.id;o.after.combos.push({x:u,y:c,id:l}),r.pushStack("update",o)}else r.updateComboTree(a,void 0,i)})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,n,t){var r=this;t===void 0&&(t={}),n(e,t)!==!1&&e&&(re(e.get("combos"),function(i){r.traverse(i,n,t)}),re(e.get("nodes"),function(i){r.traverse(i,n,t)}))},updateCombo:function(e,n,t){this.updateSingleItem(e,n,t);var r={};this.traverse(e,function(i,o){return!i.destroyed&&(i.getEdges().forEach(function(a){return o[a.getID()]=a}),!0)},r),Object.values(r).forEach(function(i){return i.refresh()})},updateSingleItem:function(e,n,t){var r=this.origin,i=this.graph,o=e.getModel(),a=e.get("id");this.point[a]||(this.point[a]={x:o.x,y:o.y});var s=n.x-r.x+this.point[a].x,u=n.y-r.y+this.point[a].y;t&&(s+=r.x-n.x,u+=r.y-n.y),i.updateItem(e,{x:s,y:u},!1)},getParentCombo:function(e){var n=this.graph;if(e){var t=n.findById(e);if(t)return t}},updateDelegate:function(e){var n=this.graph;if(this.delegateShape){var t=e.x-this.origin.x+this.originPoint.minX,r=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:t,y:r})}else{var i=n.get("delegateGroup"),o=null,a=(o=this.targets.length>1?LV(this.targets):this.targets[0].getBBox()).x,s=o.y,u=o.width,c=o.height,l=o.minX,h=o.minY;this.originPoint={x:a,y:s,width:u,height:c,minX:l,minY:h};var d=P(P({},ss.delegateStyle),this.delegateStyle);this.delegateShape=i.addShape("rect",{attrs:P({width:o.width,height:o.height,x:o.x,y:o.y},d),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this.graph,n=this.targets,t={};n==null||n.forEach(function(r){var i=r.getModel().parentId;i&&(t[i]=e.findById(i))}),Object.values(t).forEach(function(r){r&&e.updateCombo(r)})}};var NP="dblclick",jV=["click","dblclick"];const zV={getDefaultCfg:function(){return{trigger:NP,relayout:!0}},getEvents:function(){var e,n;return n=jV.includes(this.trigger)?this.trigger:NP,(e={})["combo:".concat(n)]="onComboClick",e},onComboClick:function(e){var n=e.item,t=this.graph,r=this.relayout;if(n&&!n.destroyed&&n.getType()==="combo"){var i=n.getModel().id;i&&(t.collapseExpandCombo(i),r&&t.get("layout")?t.layout():t.refreshPositions())}}};var FV=Ko.isPolygonsIntersect,GV=Ko.pathToPoints,PP="shift",YV=["drag","shift","ctrl","alt","control"];const XV={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:PP,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return YV.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=PP),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var n=this.lasso;e.item||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),n||(n=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),n.show())},onDragMove:function(e){this.dragging&&(this.trigger==="drag"||this.keydown)&&(this.points.push({x:e.x,y:e.y}),this.updateLasso(e))},onDragEnd:function(e){(this.lasso||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,n=[];return e.length&&(e.forEach(function(t,r){r===0?n.push(["M",t.x,t.y]):n.push(["L",t.x,t.y])}),n.push(["L",e[0].x,e[0].y])),n},clearStates:function(e){e===void 0&&(e="canvas:click");var n=this,t=n.graph,r=n.selectedState,i=n.shouldDeselect,o=t.findAllByState("node",r),a=t.findAllByState("edge",r);i&&!i({action:e,nodes:o,edges:a})||(o.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,n=this.graph,t=this.shouldUpdate,r=this.points.map(function(u){return[n.getCanvasByPoint(u.x,u.y).x,n.getCanvasByPoint(u.x,u.y).y]}),i=this.selectedState,o=[],a=[];n.getNodes().forEach(function(u){if(u.isVisible()&&function(l,h){var d,f=l.getKeyShape();if(l.get("type")==="path")d=GV(f.attr("path"));else{var p=f.getCanvasBBox();d=[[p.minX,p.minY],[p.maxX,p.minY],[p.maxX,p.maxY],[p.minX,p.maxY]]}return FV(h,d)}(u,r)&&t(u,"select",e)){o.push(u);var c=u.getModel();a.push(c.id),n.setItemState(u,i,!0)}});var s=[];this.includeEdges&&o.forEach(function(u){u.getOutEdges().forEach(function(c){if(c.isVisible()){var l=c.getModel(),h=l.source,d=l.target;a.includes(h)&&a.includes(d)&&t(c,"select",e)&&(s.push(c),n.setItemState(c,e.selectedState,!0))}})}),this.selectedEdges=s,this.selectedNodes=o,this.onSelect&&this.onSelect(o,s),n.emit("nodeselectchange",{selectedItems:{nodes:o,edges:s},select:!0})},createLasso:function(){var e=this.graph.get("delegateGroup").addShape("path",{attrs:P({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=e,this.delegate=e,this.points=[],e},updateLasso:function(e){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(e){var n=e.key;n&&(n.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var DP="click",UV=["click","drag"],LP=void 0,WV=["shift","ctrl","control","alt","meta",void 0];const VV={getDefaultCfg:function(){return{trigger:DP,key:LP,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e,n=this;return UV.indexOf(n.trigger.toLowerCase())>-1||(n.trigger=DP),n.key&&WV.indexOf(n.key.toLowerCase())===-1&&(n.trigger=LP),n.trigger==="drag"?e={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:n.trigger==="click"&&(e={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),n.key&&(e.keydown="onKeyDown",e.keyup="onKeyUp"),e},onDragEnd:function(e){var n=this;if(!n.key||n.keydown){var t=e.item;t&&t.getID()!==n.source&&t.getType()==="node"||n.cancelCreating({item:n.edge,x:e.x,y:e.y})}},onClick:function(e){var n=this;if(!n.key||n.keydown){var t=e.item,r=n.graph,i=t.getModel(),o=n.getEdgeConfig;if(n.addingEdge&&n.edge){if(!n.shouldEnd(e,n))return;var a=void 0;a=o&&gn(o)?o({source:n.source,target:i.id},n):n.edgeConfig;var s=P({target:i.id},a);if(n.source===i.id&&(s.type="loop"),r.emit("beforecreateedge",{}),r.updateItem(n.edge,s,!1),r.get("enabledStack")){var u=P(P({},n.edge.getModel()),{itemType:"edge"}),c={};c.edges=[u],r.pushStack("add",{before:{},after:c})}r.emit("aftercreateedge",{edge:n.edge}),n.edge.getKeyShape().set("capture",!0),n.edge=null,n.addingEdge=!1}else{if(!n.shouldBegin(e,n))return;a=void 0,a=o&&gn(o)?o({source:i.id,target:i.id},n):n.edgeConfig,n.edge=r.addItem("edge",P({source:i.id,target:i.id},a),!1),n.source=i.id,n.addingEdge=!0,n.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var n=this;if(!n.key||n.keydown){n.edge&&n.edge.destroyed&&n.cancelCreating({item:n.edge});var t={x:e.x,y:e.y};n.graph.findById(n.source)?n.addingEdge&&n.edge&&n.graph.updateItem(n.edge,{target:t},!1):n.addingEdge=!1}},cancelCreating:function(e){var n,t,r=this;if(!r.key||r.keydown){var i=r.graph,o=e.item;return r.addingEdge&&(r.edge===o||!((t=(n=e.target)===null||n===void 0?void 0:n.isCanvas)===null||t===void 0)&&t.call(n))?(r.edge&&!r.edge.destroyed&&i.removeItem(r.edge,!1),r.edge=null,void(r.addingEdge=!1)):void 0}},onKeyDown:function(e){var n=this,t=e.key;t&&(t.toLowerCase()===n.key.toLowerCase()?n.keydown=!0:n.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}};var BP="ctrl",HV=["shift","ctrl","alt","control"];const qV={getDefaultCfg:function(){return{trigger:BP,combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return HV.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=BP),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var n=e.key;if(n){var t=this.trigger.toLowerCase(),r=n.toLowerCase();this.triggerKeydown||(this.triggerKeydown=r===t||r==="control"&&t==="ctrl"||r==="ctrl"&&t==="control");var i=this.graph;if(!i[this.functionName])return{};if(!this.triggerKeydown||this.combinedKey){var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(r===o||r==="control"&&o==="ctrl"||r==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}else this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var ZV=["shift","ctrl","alt","control","meta"];re({"drag-canvas":EV,"zoom-canvas":TV,"drag-node":SV,"activate-relations":MV,"brush-select":kV,"click-select":AV,"lasso-select":XV,tooltip:OV,"edge-tooltip":NV,"collapse-expand":DV,"drag-combo":RV,"collapse-expand-combo":zV,"create-edge":VV,"shortcuts-call":qV,"scroll-canvas":{getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return this.zoomKey&&ZV.indexOf(this.zoomKey)!==-1||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var n=this;if(this.allowDrag(e)){var t=this.graph,r=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];if(r.includes("control")&&r.push("ctrl"),r.some(function(R){return e["".concat(R,"Key")]})){var i=t.get("canvas").getPointByClient(e.clientX,e.clientY),o=t.getZoom();e.wheelDelta>0?o+=.05*o:o-=.05*o,t.zoomTo(o,{x:i.x,y:i.y})}else{var a=e.deltaX||e.movementX,s=e.deltaY||e.movementY;!s&&navigator.userAgent.indexOf("Firefox")>-1&&(s=125*-e.wheelDelta/3);var u=this.graph.get("width"),c=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),h=this.scalableRange,d=this.scalableRange;h<1&&h>-1&&(h*=u,d*=c);var f=l.minX,p=l.maxX,g=l.minY,v=l.maxY;a>0?p<-h?a=0:p-a<-h&&(a=p+h):a<0&&(f>u+h?a=0:f-a>u+h&&(a=f-(u+h))),s>0?v<-d?s=0:v-s<-d&&(s=v+d):s<0&&(g>c+d?s=0:g-s>c+d&&(s=g-(c+d))),this.get("direction")==="x"?s=0:this.get("direction")==="y"&&(a=0),t.translate(-a,-s)}if(e.preventDefault(),this.get("enableOptimize")){var m=this.get("optimizeZoom"),y=this.get("optimized"),b=t.getNodes(),x=t.getEdges(),w=b.length,E=x.length;if(!y){for(var S=0;S<w;S++){var M=b[S];if(!M.destroyed)for(var k=(T=M.get("group").get("children")).length,_=0;_<k;_++)(A=T[_]).destoryed||A.get("isKeyShape")||(A.set("ori-visibility",A.get("ori-visibility")||A.get("visible")),A.hide())}for(var C=0;C<E;C++){var T;for(k=(T=x[C].get("group").get("children")).length,_=0;_<k;_++){var A;(A=T[_]).set("ori-visibility",A.get("ori-visibility")||A.get("visible")),A.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var D=setTimeout(function(){var R=t.getZoom();if(n.get("optimized")){n.set("optimized",!1);for(var B=0;B<w;B++){var F=b[B],N=(ne=F.get("group").get("children")).length;if(R<m)(z=(J=F.getKeyShape()).get("ori-visibility"))&&J.show();else for(var L=0;L<N;L++){var z=(ie=ne[L]).get("ori-visibility");!ie.get("visible")&&z&&z&&ie.show()}}for(var Z=0;Z<E;Z++){var ne,J,q=x[Z];if(N=(ne=q.get("group").get("children")).length,R<m)(z=(J=q.getKeyShape()).get("ori-visibility"))&&J.show();else for(L=0;L<N;L++){var ie;(ie=ne[L]).get("visible")||(z=ie.get("ori-visibility"))&&ie.show()}}}},100);this.set("timeout",D)}}},allowDrag:function(e){var n,t,r=e.target,i=r&&r.isCanvas&&r.isCanvas();if(qa(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if(Tn(this.allowDragOnItem)){var o=this.allowDragOnItem,a=o.node,s=o.edge,u=o.combo,c=(t=(n=e.item)===null||n===void 0?void 0:n.getType)===null||t===void 0?void 0:t.call(n);if(!a&&c==="node"||!s&&c==="edge"||!u&&c==="combo")return!1}return!0}}},function(e,n){AM(n,e)});var KV=P(P({},OL),P4),$V=ni.Fisheye,QV=ni.TimeBar,JV=ni.ImageMinimap,eH=ni.EdgeFilterLens,tH=ni.SnapLine,nH=ni.Annotation;const Ts={version:ss.version,Graph:wO,TreeGraph:eU,Util:Ko,Layout:$t.Layouts,TreeLayout:zX,registerLayout:function(e,n){n.isCustomLayout=!0,$t.Layouts[e]=$t.registerLayout(e,n)},Global:ss,registerBehavior:AM,registerCombo:OR,registerEdge:TR,registerNode:IR,Minimap:ni.Minimap,Grid:ni.Grid,Bundling:ni.Bundling,Menu:ni.Menu,ToolBar:ni.ToolBar,Tooltip:ni.Tooltip,Legend:ni.Legend,TimeBar:QV,SnapLine:tH,Fisheye:$V,ImageMinimap:JV,EdgeFilterLens:eH,Annotation:nH,Algorithm:KV,Arrow:ER,Marker:SR,Shape:vn};Ts.version="4.8.23";const rH={name:"SettingPanel",components:{request:Lh(()=>Bh(()=>import("./request-Rv_u-Bjf.js"),__vite__mapDeps([0,1,2,3]))),function:Lh(()=>Bh(()=>import("./function-BAxonBtr.js"),__vite__mapDeps([4,1,2]))),router:Lh(()=>Bh(()=>import("./router-CnjsCIWP.js"),__vite__mapDeps([5,1,2,6]))),setupValue:Lh(()=>Bh(()=>import("./setupValue-DR__VEV3.js"),__vite__mapDeps([7,1,2]))),message:Lh(()=>Bh(()=>import("./message-hbIb86k3.js"),__vite__mapDeps([8,1,2])))},props:{popConfig:{type:Object,default:()=>({type:"",config:{}})},graphRef:{type:Object,default:()=>({})},curModel:{type:Object,default:()=>({})},customData:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:n,expose:t}){const r=xi({type:e.popConfig.config?e.popConfig.config.type:"",config:e.popConfig.config?e.popConfig.config.config:{}}),i=xi([{label:"\u8BF7\u6C42\u63A5\u53E3",value:"request"},{label:"\u8BBE\u7F6E\u53D8\u91CF",value:"setupValue"},{label:"\u6267\u884C\u811A\u672C",value:"function"},{label:"\u8DEF\u7531\u8DF3\u8F6C",value:"router"},{label:"\u6D88\u606F\u63D0\u793A",value:"message"}]);return{config:r,options:i,save:o=>{const a=i.value.find(s=>r.value.type===s.value);e.graphRef.updateItem(e.curModel.id,Hs(Vs({},e.curModel.current),{config:{type:r.value.type,config:o},label:a.label,menus:[{label:"\u6210\u529F",key:"success",nodeType:"event",nodeName:"\u6210\u529F",eventKey:"success"},{label:"\u5931\u8D25",key:"error",nodeType:"event",nodeName:"\u5931\u8D25",eventKey:"error"},{label:"\u6210\u529F\u6216\u5931\u8D25",key:"finally",nodeType:"event",nodeName:"\u6210\u529F\u6216\u5931\u8D25",eventKey:"finally"}]})),n("close")}}}},iH={class:"type"},oH=Dh(rH,[["render",function(e,n,t,r,i,o){const a=qn("a-select"),s=qn("request"),u=qn("function"),c=qn("router"),l=qn("setupValue"),h=qn("message");return Sn(),ii("div",{class:"setting-panel",onClick:n[1]||(n[1]=d=>d.stopPropagation())},[Or("div",iH,[n[2]||(n[2]=Or("div",{class:"label"},"\u7C7B\u578B\uFF1A",-1)),Zs(a,{options:r.options,value:r.config.type,"onUpdate:value":n[0]||(n[0]=d=>r.config.type=d),getPopupContainer:d=>d.parentNode},null,8,["options","value","getPopupContainer"])]),r.config.type==="request"?(Sn(),oi(s,{key:0,config:r.config.config,onSave:r.save},null,8,["config","onSave"])):Gi("",!0),r.config.type==="function"?(Sn(),oi(u,{key:1,config:r.config.config,onSave:r.save},null,8,["config","onSave"])):Gi("",!0),r.config.type==="router"?(Sn(),oi(c,{key:2,config:r.config.config,onSave:r.save},null,8,["config","onSave"])):Gi("",!0),r.config.type==="setupValue"?(Sn(),oi(l,{key:3,config:r.config.config,customData:t.customData,onSave:r.save},null,8,["config","customData","onSave"])):Gi("",!0),r.config.type==="message"?(Sn(),oi(h,{key:4,config:r.config.config,onSave:r.save},null,8,["config","onSave"])):Gi("",!0)])}],["__scopeId","data-v-17cca794"]]),aH={props:["curModel","menuPosition"],watch:{},methods:{onSelect(e){this.$emit("onSelect",e)}}},sH=["onClick"],uH=Dh(aH,[["render",function(e,n,t,r,i,o){const a=qn("a-menu-item"),s=qn("a-menu");return t.curModel&&t.curModel.menus&&t.curModel.menus.length>0?(Sn(),oi(s,{key:0,class:"flow-menu",style:R3(t.menuPosition)},{default:Yi(()=>[(Sn(!0),ii(qg,null,Zg(t.curModel.menus,u=>(Sn(),oi(a,{key:u.key},{default:Yi(()=>[Or("a",{href:"javascript:;",onClick:c=>o.onSelect(u.key)},Ks(u.label),9,sH)]),_:2},1024))),128))]),_:1},8,["style"])):Gi("",!0)}],["__scopeId","data-v-b5cd83b6"]]),cH={keywords:["IF","AND","OR","XOR","IFS"],operators:["+","-","*","/"],symbols:/[=><!~?:&|+\-*\/^%]+/,tokenizer:{root:[[/\d+/,"number"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/[{}()\[\]]/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}]]}},lH=[{title:"\u51FD\u6570",children:[{title:"IF",doc:"IF(condition, consequent, alternate)",desc:"\u5982\u679C\u6EE1\u8DB3\u6761\u4EF6condition\uFF0C\u5219\u8FD4\u56DEconsequent\uFF0C\u5426\u5219\u8FD4\u56DEalternate\uFF0C\u652F\u6301\u591A\u5C42\u5D4C\u5957IF\u51FD\u6570\u3002 \u7B49\u4EF7\u4E8E\u76F4\u63A5\u7528JS\u8868\u8FBE\u5F0F\u5982\uFF1Acondition ? consequent : alternate\u3002",children:[{name:"condition",type:"expression",desc:"\u6761\u4EF6\u8868\u8FBE\u5F0F\u3002\u4F8B\u5982\uFF1A\u8BED\u6587\u6210\u7EE9>80"},{name:"consequent",type:"any",desc:"\u6761\u4EF6\u5224\u65AD\u901A\u8FC7\u7684\u8FD4\u56DE\u7ED3\u679C"},{name:"alternate",type:"any",desc:"\u6761\u4EF6\u5224\u65AD\u4E0D\u901A\u8FC7\u7684\u8FD4\u56DE\u7ED3\u679C"}]},{title:"AND",doc:"AND(expression1, expression2, ...expressionN)",desc:"\u6761\u4EF6\u5168\u90E8\u7B26\u5408\uFF0C\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002 \u793A\u4F8B\uFF1AAND(\u8BED\u6587\u6210\u7EE9>80, \u6570\u5B66\u6210\u7EE9>80)\uFF0C \u8BED\u6587\u6210\u7EE9\u548C\u6570\u5B66\u6210\u7EE9\u90FD\u5927\u4E8E 80\uFF0C\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\uFF0C \u7B49\u4EF7\u4E8E\u76F4\u63A5\u7528JS\u8868\u8FBE\u5F0F\u5982\uFF1A\u8BED\u6587\u6210\u7EE9>80 && \u6570\u5B66\u6210\u7EE9>80\u3002",children:[{name:"conditions",type:"...expression",desc:"\u6761\u4EF6\u8868\u8FBE\u5F0F\uFF0C\u591A\u4E2A\u7528\u9017\u53F7\u9694\u5F00\u3002\u4F8B\u5982\uFF1A\u8BED\u6587\u6210\u7EE9>80, \u6570\u5B66\u6210\u7EE9>80"}]},{title:"OR",doc:"OR(expression1, expression2, ...expressionN)",desc:"\u6761\u4EF6\u4EFB\u610F\u4E00\u4E2A\u6EE1\u8DB3\u6761\u4EF6\uFF0C\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002 \u793A\u4F8B\uFF1AOR(\u8BED\u6587\u6210\u7EE9>80, \u6570\u5B66\u6210\u7EE9>80)\uFF0C \u8BED\u6587\u6210\u7EE9\u548C\u6570\u5B66\u6210\u7EE9\u4EFB\u610F\u4E00\u4E2A\u5927\u4E8E 80\uFF0C\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\uFF0C \u7B49\u4EF7\u4E8E\u76F4\u63A5\u7528JS\u8868\u8FBE\u5F0F\u5982\uFF1A\u8BED\u6587\u6210\u7EE9>80 || \u6570\u5B66\u6210\u7EE9>80\u3002",children:[{name:"conditions",type:"...expression",desc:"...expression	\u6761\u4EF6\u8868\u8FBE\u5F0F\uFF0C\u591A\u4E2A\u7528\u9017\u53F7\u9694\u5F00\u3002\u4F8B\u5982\uFF1A\u8BED\u6587\u6210\u7EE9>80, \u6570\u5B66\u6210\u7EE9>80"}]},{title:"XOR",doc:"XOR(condition1, condition2, ...expressionN)",desc:"\u5F02\u6216\u5904\u7406\uFF0C\u591A\u4E2A\u8868\u8FBE\u5F0F\u7EC4\u4E2D\u5B58\u5728\u5947\u6570\u4E2A\u771F\u65F6\u8BA4\u4E3A\u771F\u3002 \u793A\u4F8B\uFF1AXOR(\u8BED\u6587\u6210\u7EE9 > 80, \u6570\u5B66\u6210\u7EE9 > 80, \u82F1\u8BED\u6210\u7EE9 > 80) \u4E09\u95E8\u6210\u7EE9\u4E2D\u6709\u4E00\u95E8\u6216\u8005\u4E09\u95E8\u5927\u4E8E 80\uFF0C\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002",children:[{name:"condition",type:"...expression",desc:"\u6761\u4EF6\u8868\u8FBE\u5F0F\uFF0C\u591A\u4E2A\u7528\u9017\u53F7\u9694\u5F00\u3002\u4F8B\u5982\uFF1A\u8BED\u6587\u6210\u7EE9>80, \u6570\u5B66\u6210\u7EE9>80"}]},{title:"IFS",doc:"IFS(condition1, result1, condition2, result2,...conditionN, resultN)",desc:'\u5224\u65AD\u51FD\u6570\u96C6\u5408\uFF0C\u76F8\u5F53\u4E8E\u591A\u4E2A else if \u5408\u5E76\u6210\u4E00\u4E2A\u3002 \u793A\u4F8B\uFF1AIFS(\u8BED\u6587\u6210\u7EE9 > 80, "\u4F18\u79C0", \u8BED\u6587\u6210\u7EE9 > 60, "\u826F", "\u7EE7\u7EED\u52AA\u529B")\uFF0C \u5982\u679C\u8BED\u6587\u6210\u7EE9\u5927\u4E8E 80\uFF0C\u5219\u8FD4\u56DE\u4F18\u79C0\uFF0C\u5426\u5219\u5224\u65AD\u5927\u4E8E 60 \u5206\uFF0C\u5219\u8FD4\u56DE\u826F\uFF0C\u5426\u5219\u8FD4\u56DE\u7EE7\u7EED\u52AA\u529B\u3002',children:[{name:"condition",type:"...expression",desc:"\u6761\u4EF6\u8868\u8FBE\u5F0F"},{name:"result",type:"...any",desc:"\u8FD4\u56DE\u503C"}]}]},{title:"\u6570\u5B66\u51FD\u6570",children:[{title:"ABS",doc:"ABS(num)",desc:"\u8FD4\u56DE\u4F20\u5165\u6570\u5B57\u7684\u7EDD\u5BF9\u503C\u3002",children:[{name:"num",type:"number",desc:"\u6570\u503C"}]},{title:"MIN",doc:"MIN(num1, num2, ...numN)",desc:"\u83B7\u53D6\u6700\u5C0F\u503C\uFF0C\u5982\u679C\u53EA\u6709\u4E00\u4E2A\u53C2\u6570\u4E14\u662F\u6570\u7EC4\uFF0C\u5219\u8BA1\u7B97\u8FD9\u4E2A\u6570\u7EC4\u5185\u7684\u503C\u3002",children:[{name:"num",type:"...number",desc:"\u6570\u503C"}]},{title:"MAX",doc:"MAX(num1, num2, ...numN)",desc:"\u83B7\u53D6\u6700\u5927\u503C\uFF0C\u5982\u679C\u53EA\u6709\u4E00\u4E2A\u53C2\u6570\u4E14\u662F\u6570\u7EC4\uFF0C\u5219\u8BA1\u7B97\u8FD9\u4E2A\u6570\u7EC4\u5185\u7684\u503C\u3002",children:[{name:"num",type:"...number",desc:"\u6570\u503C"}]},{title:"MAX",doc:"SUM(num1, num2, ...numN)",desc:"\u6C42\u548C\uFF0C\u5982\u679C\u53EA\u6709\u4E00\u4E2A\u53C2\u6570\u4E14\u662F\u6570\u7EC4\uFF0C\u5219\u8BA1\u7B97\u8FD9\u4E2A\u6570\u7EC4\u5185\u7684\u503C\u3002",children:[{name:"num",type:"...number",desc:"\u6570\u503C"}]},{title:"INT",doc:"INT(num)",desc:"\u5C06\u6570\u503C\u5411\u4E0B\u53D6\u6574\u4E3A\u6700\u63A5\u8FD1\u7684\u6574\u6570\u3002",children:[{name:"num",type:"number",desc:"\u6570\u503C"}]},{title:"MOD",doc:"MOD(num, divisor)",desc:"\u5C06\u8FD4\u56DE\u4E24\u6570\u76F8\u9664\u7684\u4F59\u6570\uFF0C\u53C2\u6570 number \u662F\u88AB\u9664\u6570\uFF0Cdivisor \u662F\u9664\u6570\u3002",children:[{name:"num",type:"number",desc:"\u88AB\u9664\u6570"},{name:"divisor",type:"number",desc:"\u9664\u6570"}]},{title:"PI",doc:"PI()",desc:"\u5706\u5468\u7387 3.1415...\u3002",children:[]},{title:"ROUND",doc:"ROUND(num[, numDigits = 2])",desc:"\u5C06\u6570\u5B57\u56DB\u820D\u4E94\u5165\u5230\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u5C0F\u6570\u4F4D\u3002",children:[{name:"num",type:"number",desc:"\u8981\u5904\u7406\u7684\u6570\u5B57"},{name:"numDigits",type:"number",desc:"\u5C0F\u6570\u4F4D\u6570\uFF0C\u9ED8\u8BA4\u4E3A2"}]},{title:"FLOOR",doc:"FLOOR(num[, numDigits=2])",desc:"\u5C06\u6570\u5B57\u5411\u4E0B\u53D6\u6574\u5230\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u5C0F\u6570\u4F4D\u3002",children:[{name:"num",type:"number",desc:"\u8981\u5904\u7406\u7684\u6570\u5B57"},{name:"numDigits",type:"number",desc:"\u5C0F\u6570\u4F4D\u6570\uFF0C\u9ED8\u8BA4\u4E3A2"}]},{title:"CEIL",doc:"CEIL(num[, numDigits=2])",desc:"\u5C06\u6570\u5B57\u5411\u4E0A\u53D6\u6574\u5230\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u5C0F\u6570\u4F4D\u3002",children:[{name:"num",type:"number",desc:"\u8981\u5904\u7406\u7684\u6570\u5B57"},{name:"numDigits",type:"number",desc:"\u5C0F\u6570\u4F4D\u6570\uFF0C\u9ED8\u8BA4\u4E3A2"}]},{title:"SQRT",doc:"SQRT(num)",desc:"\u5F00\u5E73\u65B9\uFF0C\u53C2\u6570 number \u4E3A\u975E\u8D1F\u6570",children:[{name:"num",type:"number",desc:"\u8981\u5904\u7406\u7684\u6570\u5B57"}]},{title:"AVG",doc:"AVG(num1, num2, ...numN)",desc:"\u8FD4\u56DE\u6240\u6709\u53C2\u6570\u7684\u5E73\u5747\u503C\uFF0C\u5982\u679C\u53EA\u6709\u4E00\u4E2A\u53C2\u6570\u4E14\u662F\u6570\u7EC4\uFF0C\u5219\u8BA1\u7B97\u8FD9\u4E2A\u6570\u7EC4\u5185\u7684\u503C\u3002",children:[{name:"num",type:"...number",desc:"\u8981\u5904\u7406\u7684\u6570\u5B57"}]},{title:"DEVSQ",doc:"DEVSQ(num1, num2, ...numN)",desc:"\u8FD4\u56DE\u6570\u636E\u70B9\u4E0E\u6570\u636E\u5747\u503C\u70B9\u4E4B\u5DEE\uFF08\u6570\u636E\u504F\u5DEE\uFF09\u7684\u5E73\u65B9\u548C\uFF0C\u5982\u679C\u53EA\u6709\u4E00\u4E2A\u53C2\u6570\u4E14\u662F\u6570\u7EC4\uFF0C\u5219\u8BA1\u7B97\u8FD9\u4E2A\u6570\u7EC4\u5185\u7684\u503C\u3002",children:[{name:"num",type:"...number",desc:"\u8981\u5904\u7406\u7684\u6570\u5B57"}]},{title:"AVEDEV",doc:"AVEDEV(num1, num2, ...numN)",desc:"\u6570\u636E\u70B9\u5230\u5176\u7B97\u672F\u5E73\u5747\u503C\u7684\u7EDD\u5BF9\u504F\u5DEE\u7684\u5E73\u5747\u503C\u3002",children:[{name:"num",type:"...number",desc:"\u8981\u5904\u7406\u7684\u6570\u5B57"}]},{title:"HARMEAN",doc:"HARMEAN(num1, num2, ...numN)",desc:"\u6570\u636E\u70B9\u7684\u8C03\u548C\u5E73\u5747\u503C\uFF0C\u5982\u679C\u53EA\u6709\u4E00\u4E2A\u53C2\u6570\u4E14\u662F\u6570\u7EC4\uFF0C\u5219\u8BA1\u7B97\u8FD9\u4E2A\u6570\u7EC4\u5185\u7684\u503C\u3002",children:[{name:"num",type:"...number",desc:"\u8981\u5904\u7406\u7684\u6570\u5B57"}]},{title:"LARGE",doc:"LARGE(array, k)",desc:"\u6570\u636E\u96C6\u4E2D\u7B2C k \u4E2A\u6700\u5927\u503C\u3002",children:[{name:"nums",type:"array",desc:"\u8981\u5904\u7406\u7684\u6570\u5B57"},{name:"k",type:"number",desc:"\u7B2C\u51E0\u5927"}]},{title:"UPPERMONEY",doc:"UPPERMONEY(num)",desc:"\u5C06\u6570\u503C\u8F6C\u4E3A\u4E2D\u6587\u5927\u5199\u91D1\u989D\u3002",children:[{name:"num",type:"number",desc:"\u8981\u5904\u7406\u7684\u6570\u5B57"}]},{title:"RAND",doc:"RAND()",desc:"\u8FD4\u56DE\u5927\u4E8E\u7B49\u4E8E 0 \u4E14\u5C0F\u4E8E 1 \u7684\u5747\u5300\u5206\u5E03\u968F\u673A\u5B9E\u6570\u3002\u6BCF\u4E00\u6B21\u89E6\u53D1\u8BA1\u7B97\u90FD\u4F1A\u53D8\u5316\u3002 \u793A\u4F8B\uFF1A`RAND()*100`\uFF0C \u8FD4\u56DE 0-100 \u4E4B\u95F4\u7684\u968F\u673A\u6570\u3002",children:[]},{title:"LAST",doc:"LAST(array)",desc:"\u53D6\u6570\u636E\u6700\u540E\u4E00\u4E2A\u3002",children:[{name:"arr",type:"...number",desc:"\u8981\u5904\u7406\u7684\u6570\u7EC4"}]},{title:"POW",doc:"POW(base, exponent)",desc:"\u8FD4\u56DE\u57FA\u6570\u7684\u6307\u6570\u6B21\u5E42\uFF0C\u53C2\u6570base\u4E3A\u57FA\u6570\uFF0Cexponent\u4E3A\u6307\u6570\uFF0C\u5982\u679C\u53C2\u6570\u503C\u4E0D\u5408\u6CD5\u5219\u8FD4\u56DE\u57FA\u6570\u672C\u8EAB\uFF0C\u8BA1\u7B97\u7ED3\u679C\u4E0D\u5408\u6CD5\uFF0C\u5219\u8FD4\u56DENaN\u3002",children:[{name:"base",type:"number",desc:"\u57FA\u6570"},{name:"exponent",type:"number",desc:"\u6307\u6570"}]}]},{title:"\u6587\u672C\u51FD\u6570",children:[{title:"LEFT",doc:"LEFT(text, len)",desc:"\u8FD4\u56DE\u4F20\u5165\u6587\u672C\u5DE6\u4FA7\u7684\u6307\u5B9A\u957F\u5EA6\u5B57\u7B26\u4E32\u3002",children:[{name:"text",type:"string",desc:"\u8981\u5904\u7406\u7684\u6587\u672C"},{name:"len",type:"number",desc:"\u8981\u5904\u7406\u7684\u957F\u5EA6"}]},{title:"RIGHT",doc:"RIGHT(text, len)",desc:"\u8FD4\u56DE\u4F20\u5165\u6587\u672C\u53F3\u4FA7\u7684\u6307\u5B9A\u957F\u5EA6\u5B57\u7B26\u4E32\u3002",children:[{name:"text",type:"string",desc:"\u8981\u5904\u7406\u7684\u6587\u672C"},{name:"len",type:"number",desc:"\u8981\u5904\u7406\u7684\u957F\u5EA6"}]},{title:"LEN",doc:"LEN(text)",desc:"\u8BA1\u7B97\u6587\u672C\u7684\u957F\u5EA6\u3002",children:[{name:"text",type:"string",desc:"\u8981\u5904\u7406\u7684\u6587\u672C"}]},{title:"LENGTH",doc:"LENGTH(textArr)",desc:"\u8BA1\u7B97\u6587\u672C\u96C6\u5408\u4E2D\u6240\u6709\u6587\u672C\u7684\u957F\u5EA6\u3002",children:[{name:"textArr",type:"Array<string>",desc:"\u8981\u5904\u7406\u7684\u6587\u672C\u96C6\u5408"}]},{title:"ISEMPTY",doc:"ISEMPTY(text)",desc:"\u5224\u65AD\u6587\u672C\u662F\u5426\u4E3A\u7A7A\u3002",children:[{name:"text",type:"string",desc:"\u8981\u5904\u7406\u7684\u6587\u672C"}]},{title:"CONCATENATE",doc:"CONCATENATE(text1, text2, ...textN)",desc:"\u5C06\u591A\u4E2A\u4F20\u5165\u503C\u8FDE\u63A5\u6210\u6587\u672C\u3002",children:[{name:"text",type:"...string",desc:"\u6587\u672C\u96C6\u5408"}]},{title:"CHAR",doc:"CHAR(code)",desc:'\u8FD4\u56DE\u8BA1\u7B97\u673A\u5B57\u7B26\u96C6\u7684\u6570\u5B57\u4EE3\u7801\u6240\u5BF9\u5E94\u7684\u5B57\u7B26\u3002 \u793A\u4F8B\uFF1A`CHAR(97)` \u7B49\u4EF7\u4E8E "a"\u3002',children:[{name:"code",type:"number",desc:"\u7F16\u7801\u503C"}]},{title:"LOWER",doc:"LOWER(text)",desc:"\u5C06\u4F20\u5165\u6587\u672C\u8F6C\u6210\u5C0F\u5199\u3002",children:[{name:"text",type:"string",desc:"\u6587\u672C"}]},{title:"UPPER",doc:"UPPER(text)",desc:"\u5C06\u4F20\u5165\u6587\u672C\u8F6C\u6210\u5927\u5199\u3002",children:[{name:"text",type:"string",desc:"\u6587\u672C"}]},{title:"UPPERFIRST",doc:"UPPERFIRST(text)",desc:"\u5C06\u4F20\u5165\u6587\u672C\u9996\u5B57\u6BCD\u8F6C\u6210\u5927\u5199\u3002",children:[{name:"text",type:"string",desc:"\u6587\u672C"}]},{title:"PADSTART",doc:"PADSTART(text)",desc:'\u5411\u524D\u8865\u9F50\u6587\u672C\u957F\u5EA6\u3002 \u793A\u4F8B `PADSTART("6", 2, "0")`\uFF0C \u8FD4\u56DE `06`\u3002',children:[{name:"text",type:"string",desc:"\u6587\u672C"}]},{title:"CAPITALIZE",doc:"CAPITALIZE(text)",desc:'\u5C06\u6587\u672C\u8F6C\u6210\u6807\u9898\u3002 \u793A\u4F8B `CAPITALIZE("star")`\uFF0C \u8FD4\u56DE `Star`\u3002',children:[{name:"text",type:"string",desc:"\u6587\u672C"}]},{title:"ESCAPE",doc:"ESCAPE(text)",desc:'\u5BF9\u6587\u672C\u8FDB\u884C HTML \u8F6C\u4E49\u3002 \u793A\u4F8B `ESCAPE("<star>&")`\uFF0C \u8FD4\u56DE `&lt;start&gt;&amp;`\u3002',children:[{name:"text",type:"string",desc:"\u6587\u672C"}]},{title:"TRUNCATE",doc:"TRUNCATE(text, 6)",desc:'\u5BF9\u6587\u672C\u957F\u5EA6\u8FDB\u884C\u622A\u65AD\u3002 \u793A\u4F8B `TRUNCATE("xiaolin.com", 6)`\uFF0C \u8FD4\u56DE `xiaolin...`\u3002',children:[{name:"text",type:"string",desc:"\u6587\u672C"},{name:"text",type:"number",desc:"\u6700\u957F\u957F\u5EA6"}]},{title:"BEFORELAST",doc:"BEFORELAST(text, '.')",desc:"\u53D6\u5728\u67D0\u4E2A\u5206\u9694\u7B26\u4E4B\u524D\u7684\u6240\u6709\u5B57\u7B26\u4E32\u3002",children:[{name:"text",type:"string",desc:"\u6587\u672C"},{name:"delimiter",type:"string",desc:"\u7ED3\u675F\u6587\u672C"}]},{title:"SPLIT",doc:"SPLIT(text, ',')",desc:'\u5C06\u6587\u672C\u6839\u636E\u6307\u5B9A\u7247\u6BB5\u5206\u5272\u6210\u6570\u7EC4\u3002 \u793A\u4F8B\uFF1A`SPLIT("a,b,c", ",")`\uFF0C \u8FD4\u56DE `["a", "b", "c"]`\u3002',children:[{name:"text",type:"string",desc:"\u6587\u672C"},{name:"delimiter",type:"string",desc:"\u6587\u672C\u7247\u6BB5"}]},{title:"TRIM",doc:"TRIM(text)",desc:"\u5C06\u6587\u672C\u53BB\u9664\u524D\u540E\u7A7A\u683C\u3002",children:[{name:"text",type:"string",desc:"\u6587\u672C"}]},{title:"STRIPTAG",doc:"STRIPTAG(text)",desc:'\u53BB\u9664\u6587\u672C\u4E2D\u7684 HTML \u6807\u7B7E\u3002 \u793A\u4F8B\uFF1A`STRIPTAG("<b>xialin</b>")`\uFF0C \u8FD4\u56DE\uFF1A`xiaolin`\u3002',children:[{name:"text",type:"string",desc:"\u6587\u672C"}]},{title:"LINEBREAK",doc:"LINEBREAK(text)",desc:'\u5C06\u5B57\u7B26\u4E32\u4E2D\u7684\u6362\u884C\u8F6C\u6210 HTML ` <br >`\uFF0C\u7528\u4E8E\u7B80\u5355\u6362\u884C\u7684\u573A\u666F\u3002 \u793A\u4F8B\uFF1A`LINEBREAK("\n")`\uFF0C \u8FD4\u56DE\uFF1A`<br/>`\u3002',children:[{name:"text",type:"string",desc:"\u6587\u672C"}]},{title:"STARTSWITH",doc:"STARTSWITH(text, '\u7247\u6BB5')",desc:"\u5224\u65AD\u5B57\u7B26\u4E32(text)\u662F\u5426\u4EE5\u7279\u5B9A\u5B57\u7B26\u4E32(startString)\u5F00\u59CB\uFF0C\u662F\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002",children:[{name:"text",type:"string",desc:"\u6587\u672C"},{name:"startString",type:"string",desc:"\u8D77\u59CB\u6587\u672C"}]},{title:"ENDSWITH",doc:"ENDSWITH(text, '\u7247\u6BB5')",desc:"\u5224\u65AD\u5B57\u7B26\u4E32(text)\u662F\u5426\u4EE5\u7279\u5B9A\u5B57\u7B26\u4E32(endString)\u7ED3\u675F\uFF0C\u662F\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002",children:[{name:"text",type:"string",desc:"\u6587\u672C"},{name:"startString",type:"string",desc:"\u8D77\u59CB\u6587\u672C"}]},{title:"CONTAINS",doc:"CONTAINS(text, searchText)",desc:"\u5224\u65AD\u53C2\u6570 1 \u4E2D\u7684\u6587\u672C\u662F\u5426\u5305\u542B\u53C2\u6570 2 \u4E2D\u7684\u6587\u672C\uFF0C\u662F\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002",children:[{name:"text",type:"string",desc:"\u6587\u672C"},{name:"searchText",type:"string",desc:"\u641C\u7D22\u6587\u672C"}]},{title:"REPLACE",doc:"REPLACE(text, search, replace)",desc:"\u5BF9\u6587\u672C\u8FDB\u884C\u5168\u91CF\u66FF\u6362\u3002",children:[{name:"text",type:"string",desc:"\u8981\u5904\u7406\u7684\u6587\u672C"},{name:"search",type:"string",desc:"\u8981\u88AB\u66FF\u6362\u7684\u6587\u672C"},{name:"replace",type:"string",desc:"\u8981\u66FF\u6362\u7684\u6587\u672C"}]},{title:"SEARCH",doc:"SEARCH(text, search, 0)",desc:"\u5BF9\u6587\u672C\u8FDB\u884C\u641C\u7D22\uFF0C\u8FD4\u56DE\u547D\u4E2D\u7684\u4F4D\u7F6E\u3002",children:[{name:"text",type:"string",desc:"\u8981\u5904\u7406\u7684\u6587\u672C"},{name:"search",type:"string",desc:"\u8981\u88AB\u66FF\u6362\u7684\u6587\u672C"},{name:"start",type:"number",desc:"\u8D77\u59CB\u4F4D\u7F6E"}]},{title:"MID",doc:"MID(text, from, len)",desc:"\u8FD4\u56DE\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u4ECE\u6307\u5B9A\u4F4D\u7F6E\u5F00\u59CB\u7684\u7279\u5B9A\u6570\u76EE\u7684\u5B57\u7B26\u3002",children:[{name:"text",type:"string",desc:"\u8981\u5904\u7406\u7684\u6587\u672C"},{name:"from",type:"number",desc:"\u8D77\u59CB\u4F4D\u7F6E"},{name:"len",type:"number",desc:"\u5904\u7406\u957F\u5EA6"}]},{title:"BASENAME",doc:"BASENAME(text)",desc:"\u8FD4\u56DE\u8DEF\u5F84\u4E2D\u7684\u6587\u4EF6\u540D\u3002 \u793A\u4F8B\uFF1A`/home/xiaolin/a.json`\uFF0C \u8FD4\u56DE\uFF1Aa.json\u3002",children:[{name:"text",type:"string",desc:"\u8981\u5904\u7406\u7684\u6587\u672C"}]},{title:"UUID",doc:"UUID(8)",desc:"\u751F\u6210UUID\u5B57\u7B26\u4E32",children:[{name:"length",type:"number",desc:"\u751F\u6210\u7684UUID\u5B57\u7B26\u4E32\u957F\u5EA6\uFF0C\u9ED8\u8BA4\u4E3A32\u4F4D"}]}]},{title:"\u65E5\u671F\u51FD\u6570",children:[{title:"DATE",doc:"DATE('2021-12-06 08:20:00')",desc:"\u521B\u5EFA\u65E5\u671F\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7279\u5B9A\u683C\u5F0F\u7684\u5B57\u7B26\u4E32\uFF0C\u6216\u8005\u6570\u503C\u3002 \u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5176\u4E2D\u6708\u4EFD\u7684\u6570\u503C\u662F\u4ECE0\u5F00\u59CB\u7684\uFF0C \u5373\u5982\u679C\u662F12\u6708\u4EFD\uFF0C\u4F60\u5E94\u8BE5\u4F20\u5165\u6570\u503C11\u3002",children:[]},{title:"TIMESTAMP",doc:'TIMESTAMP(date[, format = "X"])',desc:"\u8FD4\u56DE\u65F6\u95F4\u7684\u65F6\u95F4\u6233\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"},{name:"format",type:"string",desc:"\u65F6\u95F4\u6233\u683C\u5F0F\uFF0C\u5E26\u6BEB\u79D2\u4F20\u5165 'x'\u3002\u9ED8\u8BA4\u4E3A 'X' \u4E0D\u5E26\u6BEB\u79D2\u7684\u3002"}]},{title:"TODAY",doc:"TODAY()",desc:"\u8FD4\u56DE\u4ECA\u5929\u7684\u65E5\u671F\u3002",children:[]},{title:"NOW",doc:"NOW()",desc:"\u8FD4\u56DE\u73B0\u5728\u7684\u65E5\u671F",children:[]},{title:"WEEKDAY",doc:"WEEKDAY(date)",desc:"\u83B7\u53D6\u65E5\u671F\u7684\u661F\u671F\u51E0\u3002 \u793A\u4F8B WEEKDAY('2023-02-27') \u5F97\u5230 0\u3002 WEEKDAY('2023-02-27', 2) \u5F97\u5230 1\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F"},{name:"type",type:"number",desc:"\u661F\u671F\u5B9A\u4E49\u7C7B\u578B\uFF0C\u9ED8\u8BA4\u4E3A1\uFF0C1\u8868\u793A0\u81F36\u4EE3\u8868\u661F\u671F\u4E00\u5230\u661F\u671F\u65E5\uFF0C2\u8868\u793A1\u81F37\u4EE3\u8868\u661F\u671F\u4E00\u5230\u661F\u671F\u65E5"}]},{title:"WEEK",doc:"WEEK(date)",desc:"\u83B7\u53D6\u5E74\u4EFD\u7684\u661F\u671F\uFF0C\u5373\u7B2C\u51E0\u5468\u3002 \u793A\u4F8B WEEK('2023-03-05') \u5F97\u5230 9\u3002",children:[{name:"date",type:"any",desc:"\u65E5\u671F"},{name:"isISO",type:"boolean",desc:"\u662F\u5426ISO\u661F\u671F"}]},{title:"DATETOSTR",doc:"DATETOSTR(date, 'YYYY-MM-DD')",desc:"\u5BF9\u65E5\u671F\u3001\u65E5\u671F\u5B57\u7B26\u4E32\u3001\u65F6\u95F4\u6233\u8FDB\u884C\u683C\u5F0F\u5316\u3002 \u793A\u4F8B DATETOSTR('12/25/2022', 'YYYY-MM-DD') \u5F97\u5230 '2022.12.25'\uFF0C DATETOSTR(1676563200, 'YYYY.MM.DD') \u5F97\u5230 '2023.02.17'\uFF0C DATETOSTR(1676563200000, 'YYYY.MM.DD hh:mm:ss') \u5F97\u5230 '2023.02.17 12:00:00'\uFF0C DATETOSTR(DATE('2021-12-21'), 'YYYY.MM.DD hh:mm:ss') \u5F97\u5230 '2021.12.21 08:00:00'\u3002",children:[{name:"date",type:"any",desc:"\u65E5\u671F\u5BF9\u8C61\u3001\u65E5\u671F\u5B57\u7B26\u4E32\u3001\u65F6\u95F4\u6233"},{name:"format",type:"string",desc:'\u65E5\u671F\u683C\u5F0F\uFF0C\u9ED8\u8BA4\u4E3A "YYYY-MM-DD HH:mm:ss'}]},{title:"DATERANGESPLIT",doc:"DATERANGESPLIT(date, 'YYYY-MM-DD')",desc:"\u83B7\u53D6\u65E5\u671F\u8303\u56F4\u5B57\u7B26\u4E32\u4E2D\u7684\u5F00\u59CB\u65F6\u95F4\u3001\u7ED3\u675F\u65F6\u95F4\u3002 \u793A\u4F8B\uFF1A DATERANGESPLIT('1676563200, 1676735999') \u5F97\u5230 [1676563200, 1676735999]\uFF0C DATERANGESPLIT('1676563200, 1676735999', undefined , 'YYYY.MM.DD hh:mm:ss') \u5F97\u5230 [2023.02.17 12:00:00, 2023.02.18 11:59:59]\uFF0C DATERANGESPLIT('1676563200, 1676735999', 0 , 'YYYY.MM.DD hh:mm:ss') \u5F97\u5230 '2023.02.17 12:00:00'\uFF0C DATERANGESPLIT('1676563200, 1676735999', 'start' , 'YYYY.MM.DD hh:mm:ss') \u5F97\u5230 '2023.02.17 12:00:00'\uFF0C DATERANGESPLIT('1676563200, 1676735999', 1 , 'YYYY.MM.DD hh:mm:ss') \u5F97\u5230 '2023.02.18 11:59:59'\uFF0C DATERANGESPLIT('1676563200, 1676735999', 'end' , 'YYYY.MM.DD hh:mm:ss') \u5F97\u5230 '2023.02.18 11:59:59'\u3002",children:[{name:"date",type:"string",desc:"\u65E5\u671F\u8303\u56F4\u5B57\u7B26\u4E32"},{name:"key",type:"string",desc:"\u53D6\u503C\u6807\u8BC6\uFF0C0\u6216'start'\u8868\u793A\u83B7\u53D6\u5F00\u59CB\u65F6\u95F4\uFF0C1\u6216'end'\u8868\u793A\u83B7\u53D6\u7ED3\u675F\u65F6\u95F4"},{name:"format",type:"string",desc:"\u65E5\u671F\u683C\u5F0F\uFF0C\u53EF\u9009"},{name:"delimiter",type:"string",desc:"\u5206\u9694\u7B26\uFF0C\u53EF\u9009\uFF0C\u9ED8\u8BA4\u4E3A','"}]},{title:"STARTOF",doc:'STARTOF(date[unit = "day"])',desc:"\u8FD4\u56DE\u65E5\u671F\u7684\u6307\u5B9A\u8303\u56F4\u7684\u5F00\u7AEF\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"},{name:"unit",type:"string",desc:"\u6BD4\u5982\u53EF\u4EE5\u4F20\u5165 'day'\u3001'month'\u3001'year' \u6216\u8005 'week' \u7B49\u7B49"},{name:"format",type:"string",desc:"\u65E5\u671F\u683C\u5F0F\uFF0C\u53EF\u9009"}]},{title:"ENDOF",doc:'ENDOF(date[unit = "day"])',desc:"\u8FD4\u56DE\u65E5\u671F\u7684\u6307\u5B9A\u8303\u56F4\u7684\u672B\u5C3E\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"},{name:"unit",type:"string",desc:"\u6BD4\u5982\u53EF\u4EE5\u4F20\u5165 'day'\u3001'month'\u3001'year' \u6216\u8005 'week' \u7B49\u7B49"},{name:"format",type:"string",desc:"\u65E5\u671F\u683C\u5F0F\uFF0C\u53EF\u9009"}]},{title:"YEAR",doc:"YEAR(date)",desc:"\u8FD4\u56DE\u65E5\u671F\u7684\u5E74\u4EFD\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"}]},{title:"MONTH",doc:"MONTH(date)",desc:"\u8FD4\u56DE\u65E5\u671F\u7684\u6708\u4EFD\uFF0C\u8FD9\u91CC\u5C31\u662F\u81EA\u7136\u6708\u4EFD\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"}]},{title:"DAY",doc:"DAY(date)",desc:"\u8FD4\u56DE\u65E5\u671F\u7684\u5929\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"}]},{title:"HOUR",doc:"HOUR(date)",desc:"\u8FD4\u56DE\u65E5\u671F\u7684\u5C0F\u65F6\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"}]},{title:"MINUTE",doc:"MINUTE(date)",desc:"\u8FD4\u56DE\u65E5\u671F\u7684\u5206\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"}]},{title:"SECOND",doc:"SECOND(date)",desc:"\u8FD4\u56DE\u65E5\u671F\u7684\u79D2\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"}]},{title:"YEARS",doc:"YEARS(endDate, startDate)",desc:"\u8FD4\u56DE\u4E24\u4E2A\u65E5\u671F\u76F8\u5DEE\u591A\u5C11\u5E74\u3002",children:[{name:"endDate",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"},{name:"startDate",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"}]},{title:"MINUTES",doc:"MINUTES(endDate, startDate)",desc:"\u8FD4\u56DE\u4E24\u4E2A\u65E5\u671F\u76F8\u5DEE\u591A\u5C11\u5206\u949F\u3002",children:[{name:"endDate",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"},{name:"startDate",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"}]},{title:"DAYS",doc:"DAYS(endDate, startDate)",desc:"\u8FD4\u56DE\u4E24\u4E2A\u65E5\u671F\u76F8\u5DEE\u591A\u5C11\u5929\u3002",children:[{name:"endDate",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"},{name:"startDate",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"}]},{title:"HOURS",doc:"HOURS(endDate, startDate)",desc:"\u8FD4\u56DE\u4E24\u4E2A\u65E5\u671F\u76F8\u5DEE\u591A\u5C11\u5C0F\u65F6\u3002",children:[{name:"endDate",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"},{name:"startDate",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"}]},{title:"DATEMODIFY",doc:"DATEMODIFY(date, 2, 'days')",desc:"\u4FEE\u6539\u65E5\u671F\uFF0C\u5BF9\u65E5\u671F\u8FDB\u884C\u52A0\u51CF\u5929\u3001\u6708\u4EFD\u3001\u5E74\u7B49\u64CD\u4F5C\u3002 \u793A\u4F8B\uFF1A DATEMODIFY(A, -2, 'month')\uFF0C \u5BF9\u65E5\u671F A \u8FDB\u884C\u5F80\u524D\u51CF2\u6708\u7684\u64CD\u4F5C\u3002",children:[{name:"date",type:"date",desc:"\u65E5\u671F\u5BF9\u8C61"},{name:"num",type:"number",desc:"\u6570\u503C"},{name:"unit",type:"string",desc:"\u5355\u4F4D\uFF1A\u652F\u6301\u5E74\u3001\u6708\u3001\u5929\u7B49\u7B49"}]},{title:"STRTODATE",doc:'STRTODATE(value[, format=""])',desc:"\u5C06\u5B57\u7B26\u65E5\u671F\u8F6C\u6210\u65E5\u671F\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6307\u5B9A\u65E5\u671F\u683C\u5F0F\u3002 \u793A\u4F8B\uFF1ASTRTODATE('2021/12/6', 'YYYY/MM/DD')",children:[{name:"value",type:"string",desc:"\u65E5\u671F\u5B57\u7B26"},{name:"format",type:"string",desc:"\u65E5\u671F\u683C\u5F0F"}]},{title:"ISBEFORE",doc:"ISBEFORE(a, b)",desc:"\u5224\u65AD\u4E24\u4E2A\u65E5\u671F\uFF0C\u662F\u5426\u7B2C\u4E00\u4E2A\u65E5\u671F\u5728\u7B2C\u4E8C\u4E2A\u65E5\u671F\u7684\u524D\u9762\uFF0C\u662F\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002",children:[{name:"a",type:"data",desc:"\u7B2C\u4E00\u4E2A\u65E5\u671F"},{name:"b",type:"data",desc:"\u7B2C\u4E8C\u4E2A\u65E5\u671F"},{name:"unit",type:"string",desc:"\u5355\u4F4D\uFF0C\u9ED8\u8BA4\u662F 'day'\uFF0C \u5373\u4E4B\u6BD4\u8F83\u5230\u5929"}]},{title:"ISAFTER",doc:"ISAFTER(a, b)",desc:"\u5224\u65AD\u4E24\u4E2A\u65E5\u671F\uFF0C\u662F\u5426\u7B2C\u4E00\u4E2A\u65E5\u671F\u5728\u7B2C\u4E8C\u4E2A\u65E5\u671F\u7684\u540E\u9762\uFF0C\u662F\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002",children:[{name:"a",type:"data",desc:"\u7B2C\u4E00\u4E2A\u65E5\u671F"},{name:"b",type:"data",desc:"\u7B2C\u4E8C\u4E2A\u65E5\u671F"},{name:"unit",type:"string",desc:"\u5355\u4F4D\uFF0C\u9ED8\u8BA4\u662F 'day'\uFF0C \u5373\u4E4B\u6BD4\u8F83\u5230\u5929"}]},{title:"BETWEENRANGE",doc:"BETWEENRANGE(date, [start, end])",desc:"\u5224\u65AD\u65E5\u671F\u662F\u5426\u5728\u6307\u5B9A\u8303\u56F4\u5185\uFF0C\u662F\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002 \u793A\u4F8B\uFF1ABETWEENRANGE('2021/12/6', ['2021/12/5','2021/12/7'])\u3002",children:[{name:"date",type:"any",desc:"\u7B2C\u4E00\u4E2A\u65E5\u671F"},{name:"daterange",type:"Array<any>",desc:"\u65E5\u671F\u8303\u56F4"},{name:"unit",type:"string",desc:"\u5355\u4F4D\uFF0C\u9ED8\u8BA4\u662F 'day'\uFF0C \u5373\u4E4B\u6BD4\u8F83\u5230\u5929"},{name:"inclusivity",type:"string",desc:"\u5305\u5BB9\u6027\u89C4\u5219\uFF0C\u9ED8\u8BA4\u4E3A'[]'\u3002[ \u8868\u793A\u5305\u542B\u3001( \u8868\u793A\u6392\u9664\uFF0C\u5982\u679C\u4F7F\u7528\u5305\u5BB9\u6027\u53C2\u6570\uFF0C\u5219\u5FC5\u987B\u4F20\u5165\u4E24\u4E2A\u6307\u793A\u7B26\uFF0C\u5982'()'\u8868\u793A\u5DE6\u53F3\u8303\u56F4\u90FD\u6392\u9664'\u3002"}]},{title:"ISSAMEORBEFORE",doc:"ISSAMEORBEFORE(a, b)",desc:"\u5224\u65AD\u4E24\u4E2A\u65E5\u671F\uFF0C\u662F\u5426\u7B2C\u4E00\u4E2A\u65E5\u671F\u5728\u7B2C\u4E8C\u4E2A\u65E5\u671F\u7684\u524D\u9762\u6216\u8005\u76F8\u7B49\uFF0C\u662F\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002",children:[{name:"a",type:"data",desc:"\u7B2C\u4E00\u4E2A\u65E5\u671F"},{name:"b",type:"data",desc:"\u7B2C\u4E8C\u4E2A\u65E5\u671F"},{name:"unit",type:"string",desc:"\u5355\u4F4D\uFF0C\u9ED8\u8BA4\u662F 'day'\uFF0C \u5373\u4E4B\u6BD4\u8F83\u5230\u5929\u3002"}]},{title:"ISSAMEORAFTER",doc:"ISSAMEORAFTER(a, b)",desc:"\u5224\u65AD\u4E24\u4E2A\u65E5\u671F\uFF0C\u662F\u5426\u7B2C\u4E00\u4E2A\u65E5\u671F\u5728\u7B2C\u4E8C\u4E2A\u65E5\u671F\u7684\u540E\u9762\u6216\u8005\u76F8\u7B49\uFF0C\u662F\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002",children:[{name:"a",type:"data",desc:"\u7B2C\u4E00\u4E2A\u65E5\u671F"},{name:"b",type:"data",desc:"\u7B2C\u4E8C\u4E2A\u65E5\u671F"},{name:"unit",type:"string",desc:"\u5355\u4F4D\uFF0C\u9ED8\u8BA4\u662F 'day'\uFF0C \u5373\u4E4B\u6BD4\u8F83\u5230\u5929\u3002"}]}]},{title:"\u6570\u7EC4",children:[{title:"COUNT",doc:"COUNT(arr)",desc:"\u8FD4\u56DE\u6570\u7EC4\u7684\u957F\u5EA6\u3002",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"}]},{title:"ARRAYMAP",doc:"ARRAYMAP(arr, item => item)",desc:"\u6570\u7EC4\u505A\u6570\u636E\u8F6C\u6362\uFF0C\u9700\u8981\u642D\u914D\u7BAD\u5934\u51FD\u6570\u4E00\u8D77\u4F7F\u7528\uFF0C\u6CE8\u610F\u7BAD\u5934\u51FD\u6570\u53EA\u652F\u6301\u5355\u8868\u8FBE\u5F0F\u7528\u6CD5\u3002",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"},{name:"iterator",type:"Array<any>",desc:"\u7BAD\u5934\u51FD\u6570"}]},{title:"ARRAYFILTER",doc:"ARRAYFILTER(arr, item => item)",desc:"\u6570\u636E\u505A\u6570\u636E\u8FC7\u6EE4\uFF0C\u9700\u8981\u642D\u914D\u7BAD\u5934\u51FD\u6570\u4E00\u8D77\u4F7F\u7528\uFF0C\u6CE8\u610F\u7BAD\u5934\u51FD\u6570\u53EA\u652F\u6301\u5355\u8868\u8FBE\u5F0F\u7528\u6CD5\u3002 \u5C06\u7B2C\u4E8C\u4E2A\u7BAD\u5934\u51FD\u6570\u8FD4\u56DE\u4E3A false \u7684\u6210\u5458\u8FC7\u6EE4\u6389\u3002",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"},{name:"iterator",type:"Array<any>",desc:"\u7BAD\u5934\u51FD\u6570"}]},{title:"ARRAYFINDINDEX",doc:"ARRAYFINDINDEX(arr, item => item === 2)",desc:"\u6570\u636E\u505A\u6570\u636E\u67E5\u627E\uFF0C\u9700\u8981\u642D\u914D\u7BAD\u5934\u51FD\u6570\u4E00\u8D77\u4F7F\u7528\uFF0C\u6CE8\u610F\u7BAD\u5934\u51FD\u6570\u53EA\u652F\u6301\u5355\u8868\u8FBE\u5F0F\u7528\u6CD5\u3002 \u627E\u51FA\u7B2C\u4E8C\u4E2A\u7BAD\u5934\u51FD\u6570\u8FD4\u56DE\u4E3A true \u7684\u6210\u5458\u7684\u7D22\u5F15\u3002 \u793A\u4F8B\uFF1A ARRAYFINDINDEX([0, 2, false], item => item === 2) \u5F97\u5230 1\u3002",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"},{name:"iterator",type:"Array<any>",desc:"\u7BAD\u5934\u51FD\u6570"}]},{title:"ARRAYFIND",doc:"ARRAYFIND(arr, item => item === 2)",desc:"\u6570\u636E\u505A\u6570\u636E\u67E5\u627E\uFF0C\u9700\u8981\u642D\u914D\u7BAD\u5934\u51FD\u6570\u4E00\u8D77\u4F7F\u7528\uFF0C\u6CE8\u610F\u7BAD\u5934\u51FD\u6570\u53EA\u652F\u6301\u5355\u8868\u8FBE\u5F0F\u7528\u6CD5\u3002 \u627E\u51FA\u7B2C\u4E8C\u4E2A\u7BAD\u5934\u51FD\u6570\u8FD4\u56DE\u4E3A true \u7684\u6210\u5458\u3002 \u793A\u4F8B\uFF1A ARRAYFIND([0, 2, false], item => item === 2) \u5F97\u5230 2\u3002",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"},{name:"iterator",type:"Array<any>",desc:"\u7BAD\u5934\u51FD\u6570"}]},{title:"ARRAYSOME",doc:"ARRAYSOME(arr, item => item === 2)",desc:"\u6570\u636E\u505A\u6570\u636E\u904D\u5386\u5224\u65AD\uFF0C\u9700\u8981\u642D\u914D\u7BAD\u5934\u51FD\u6570\u4E00\u8D77\u4F7F\u7528\uFF0C\u6CE8\u610F\u7BAD\u5934\u51FD\u6570\u53EA\u652F\u6301\u5355\u8868\u8FBE\u5F0F\u7528\u6CD5\u3002 \u5224\u65AD\u7B2C\u4E8C\u4E2A\u7BAD\u5934\u51FD\u6570\u662F\u5426\u5B58\u5728\u8FD4\u56DE\u4E3A true \u7684\u6210\u5458\uFF0C\u662F\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002 \u793A\u4F8B\uFF1A ARRAYSOME([0, 2, false], item => item === 2) \u5F97\u5230 true\u3002",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"},{name:"iterator",type:"Array<any>",desc:"\u7BAD\u5934\u51FD\u6570"}]},{title:"ARRAYEVERY",doc:"ARRAYEVERY(arr, item => item === 2)",desc:"\u6570\u636E\u505A\u6570\u636E\u904D\u5386\u5224\u65AD\uFF0C\u9700\u8981\u642D\u914D\u7BAD\u5934\u51FD\u6570\u4E00\u8D77\u4F7F\u7528\uFF0C\u6CE8\u610F\u7BAD\u5934\u51FD\u6570\u53EA\u652F\u6301\u5355\u8868\u8FBE\u5F0F\u7528\u6CD5\u3002 \u5224\u65AD\u7B2C\u4E8C\u4E2A\u7BAD\u5934\u51FD\u6570\u8FD4\u56DE\u662F\u5426\u90FD\u4E3A true\uFF0C\u662F\u5219\u8FD4\u56DE true\uFF0C\u5426\u5219\u8FD4\u56DE false\u3002 \u793A\u4F8B\uFF1A ARRAYEVERY([0, 2, false], item => item === 2) \u5F97\u5230 false",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"},{name:"iterator",type:"Array<any>",desc:"\u7BAD\u5934\u51FD\u6570"}]},{title:"ARRAYINCLUDES",doc:"ARRAYINCLUDES(arr, 2)",desc:"\u5224\u65AD\u6570\u636E\u4E2D\u662F\u5426\u5B58\u5728\u6307\u5B9A\u5143\u7D20\u3002 \u793A\u4F8B\uFF1A ARRAYINCLUDES([0, 2, false], 2) \u5F97\u5230 true\u3002",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"},{name:"item",type:"any",desc:"\u5143\u7D20"}]},{title:"COMPACT",doc:"COMPACT(arr)",desc:`\u6570\u7EC4\u8FC7\u6EE4\u6389 false\u3001null\u30010 \u548C ""\u3002 \u793A\u4F8B\uFF1A COMPACT([0, 1, false, 2, '', 3]) \u5F97\u5230 [1, 2, 3]\u3002`,children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"}]},{title:"JOIN",doc:"JOIN(arr, string)",desc:"\u6570\u7EC4\u8F6C\u6210\u5B57\u7B26\u4E32\u3002 \u793A\u4F8B\uFF1A JOIN(['a', 'b', 'c'], '=') \u5F97\u5230 'a=b=c'\u3002",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"},{name:"separator",type:"string",desc:"\u5206\u9694\u7B26"}]},{title:"CONCAT",doc:"CONCAT(['a', 'b', 'c'], ['1'], ['3'])",desc:"\u6570\u7EC4\u5408\u5E76\u3002 \u793A\u4F8B\uFF1A CONCAT(['a', 'b', 'c'], ['1'], ['3']) \u5F97\u5230 ['a', 'b', 'c', '1', '3']\u3002",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"}]},{title:"UNIQ",doc:"UNIQ([{a: '1'}, {b: '2'}, {a: '1'}], 'x')",desc:"\u6570\u7EC4\u53BB\u91CD\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u300Cfield\u300D\uFF0C\u53EF\u6307\u5B9A\u6839\u636E\u8BE5\u5B57\u6BB5\u53BB\u91CD\u3002 \u793A\u4F8B\uFF1A UNIQ([{a: '1'}, {b: '2'}, {a: '1'}]\uFF0C 'id')\u3002",children:[{name:"arr",type:"array",desc:"\u6570\u7EC4"},{name:"field",type:"string",desc:"\u5B57\u6BB5"}]}]},{title:"\u7F16\u7801",children:[{title:"ENCODEJSON",doc:"ENCODEJSON({name: 'xiaolin'})",desc:`\u5C06JS\u5BF9\u8C61\u8F6C\u6362\u6210JSON\u5B57\u7B26\u4E32\u3002 \u793A\u4F8B\uFF1A ENCODEJSON({name: 'xiaolin'}) \u5F97\u5230 '{"name":"xiaolin"}'\u3002`,children:[{name:"obj",type:"any",desc:"\u5BF9\u8C61\u6216\u6570\u7EC4"}]},{title:"DECODEJSON",doc:`DECODEJSON('{"name": "xiaolin"}')`,desc:`\u89E3\u6790JSON\u7F16\u7801\u6570\u636E\uFF0C\u8FD4\u56DEJS\u5BF9\u8C61\u3002 \u793A\u4F8B\uFF1A DECODEJSON('{"name": "xiaolin"}') \u5F97\u5230 {name: 'xiaolin'}\u3002`,children:[{name:"str",type:"string",desc:"\u5B57\u7B26\u4E32"}]}]},{title:"\u5176\u4ED6",children:[{title:"GET",doc:"GET(arr, 2)",desc:"\u6839\u636E\u5BF9\u8C61\u6216\u8005\u6570\u7EC4\u7684path\u8DEF\u5F84\u83B7\u53D6\u503C\u3002 \u5982\u679C\u89E3\u6790 value \u662F undefined \u4F1A\u4EE5 defaultValue \u53D6\u4EE3\u3002 \u793A\u4F8B\uFF1A GET([0, 2, {name: 'xiaolin', age: 18}], 1) \u5F97\u5230 2\uFF0C GET([0, 2, {name: 'xiaolin', age: 18}], '2.name') \u5F97\u5230 'xiaolin'\uFF0C GET({arr: [{name: 'xiaolin', age: 18}]}, 'arr[0].name') \u5F97\u5230 'xiaolin'\uFF0C GET({arr: [{name: 'xiaolin', age: 18}]}, 'arr.0.name') \u5F97\u5230 'xiaolin'\uFF0C GET({arr: [{name: 'xiaolin', age: 18}]}, 'arr.1.name', 'not-found') \u5F97\u5230 'not-found'\u3002",children:[{name:"obj",type:"any",desc:"\u5BF9\u8C61\u6216\u6570\u7EC4"},{name:"path",type:"string",desc:"\u8DEF\u5F84"},{name:"defaultValue",type:"any",desc:"\u5982\u679C\u89E3\u6790\u4E0D\u5230\u5219\u8FD4\u56DE\u8BE5\u503C"}]},{title:"ISTYPE",doc:"ISTYPE([{a: '1'}, {b: '2'}, {a: '1'}], 'array')",desc:"\u5224\u65AD\u662F\u5426\u4E3A\u7C7B\u578B\u652F\u6301\uFF1Astring, number, array, date, plain-object\u3002",children:[{name:"\u5224\u65AD\u5BF9\u8C61	string",type:"string",desc:""}]}]}],hH=[{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"name"},{title:"\u53C2\u6570\u7C7B\u578B",dataIndex:"type"},{title:"\u53C2\u6570\u63CF\u8FF0",dataIndex:"desc"}];let ta={};const dH={props:{value:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"100vh"},language:{type:String,default:"formulaLang"},options:{type:Object,default:()=>({language:"javascript",theme:"vs-dark",automaticLayout:!0,minimap:{enabled:!1}})}},data:()=>({style:"",uuid:dK(10),text:""}),mounted(){this.style=`width: ${this.width};height: ${this.height};`,this.text=this.value,this.editorInit()},methods:{editorInit(){const e=this.language;this.$nextTick(()=>{ta[this.uuid]=F3.create(document.getElementById(`${this.uuid}`),{value:this.text,theme:"vs-dark",automaticLayout:!0,language:this.language,formatOnType:!0,formatOnPaste:!0});const n={provideCompletionItems:(t,r)=>({suggestions:(o=>[{label:"IF",kind:o.languages.CompletionItemKind.Function,insertText:"IF(${1:condition}, ${2:consequent}, ${3:alternate})",insertTextRules:o.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"IF function",documentation:{value:"The `IF` function returns one value if a logical expression is TRUE and another if it is FALSE.",isTrusted:!0}},{label:"AND",kind:o.languages.CompletionItemKind.Function,insertText:"AND(${1:expression1}, ${2:expression1})",insertTextRules:o.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"AND function",documentation:{value:"The `AND` function returns TRUE if all of its arguments are TRUE, and FALSE if any of the arguments are FALSE.",isTrusted:!0}},{label:"OR",kind:o.languages.CompletionItemKind.Function,insertText:"OR(${1:expression1}, ${2:expression1})",insertTextRules:o.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"OR function",documentation:{value:"The `OR` function returns TRUE if any of its arguments are TRUE, and FALSE if all of the arguments are FALSE.",isTrusted:!0}},{label:"XOR",kind:o.languages.CompletionItemKind.Function,insertText:"XOR(${1:condition1}, ${2:condition1})",insertTextRules:o.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"XOR function",documentation:{value:"The `XOR` function returns TRUE if an odd number of its arguments are TRUE, and FALSE if an even number of the arguments are TRUE.",isTrusted:!0}},{label:"IFS",kind:o.languages.CompletionItemKind.Function,insertText:"IFS()",insertTextRules:o.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"IFS function",documentation:{value:"The `IFS` function returns the value of the first argument if it is TRUE, and the value of the second argument if the first argument is FALSE.",isTrusted:!0}}])($g)})};Kg.register({id:e}),Kg.setMonarchTokensProvider(e,cH),Kg.registerCompletionItemProvider(e,n),ta[this.uuid].onDidChangeModelContent(t=>{this.text=ta[this.uuid].getValue(),this.$emit("change",ta[this.uuid].getValue()),this.$emit("update:value",ta[this.uuid].getValue())}),setTimeout(()=>{ta[this.uuid].getAction("editor.action.formatDocument").run()},200)})},getEditorCode(){return ta[this.uuid].getValue()},getEditor(){return ta[this.uuid]},setEditorCode(e){const n=ta[this.uuid],t=n.getPosition(),r={range:new z3(t.lineNumber,t.column,t.lineNumber,t.column),options:{isUndoable:!0},text:e};n.executeEdits(this.uuid,[r])}}},fH=["id"],RP={id:"root",label:"\u5F00\u59CB",type:"start",menus:[{key:"action",label:"\u52A8\u4F5C",nodeType:"action",nodeName:"\u52A8\u4F5C"},{key:"condition",label:"\u6761\u4EF6",nodeType:"condition",nodeName:"\u6761\u4EF6"}]},pH={name:"micFormulaModal",components:{Formula:Dh(dH,[["render",function(e,n,t,r,i,o){return Sn(),ii("div",{id:i.uuid,style:R3(i.style)},null,12,fH)}]])},props:{popConfig:{type:Object,default:()=>({type:"",config:{}})},graphRef:{type:Object,default:()=>({})},curModel:{type:Object,default:()=>({})},customData:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:n}){const t=e.curModel&&e.curModel.config&&e.curModel.config.editorValue?e.curModel.config.editorValue:"";let r=xi(t||"");const i=xi(null);let o=xi({});return{attrs:fK(),handleOk:a=>{r.value&&(e.graphRef.updateItem(e.curModel.id,Hs(Vs({},e.curModel.current),{config:{name:"",editorValue:r.value},menus:[{key:"action",label:"\u52A8\u4F5C",nodeType:"action",nodeName:"\u52A8\u4F5C"},{key:"condition",label:"\u6761\u4EF6",nodeType:"condition",nodeName:"\u6761\u4EF6"}]})),n("close",a))},collapseList:lH,handleMouseEnter:(a,s)=>{o.value=s,document.querySelectorAll(".formula-item").forEach(u=>{u.classList.remove("formula-item-active")}),a.target.classList.add("formula-item-active")},itemDetail:o,collapseColumns:hH,formulaEditorRef:i,editorValue:r,formulaItemClick:a=>{i.value.setEditorCode(`${a.title}()`)},customDataLiClick:a=>{i.value.setEditorCode(a)}}}},gH={class:"flex flex-column mt20"},vH={class:"formula-box flex flex-row"},mH={class:vK({"formula-left-box":!0})},yH=["onMouseenter","onClick"],bH={key:1},xH={key:0,class:"tip-box"},wH={class:"title"},EH={class:"doc"},SH={class:"desc"},MH={class:"formula-right-box"},_H={key:0,class:"data-ul"},kH={class:"data-key"},CH=["onClick"],AH={key:1,class:"mt10"},IH={class:"form-bottom-box mt10"};let Os,gg,jP,zP,FP,GP;kx=Dh(pH,[["render",function(e,n,t,r,i,o){const a=qn("a-collapse-panel"),s=qn("a-collapse"),u=qn("a-table"),c=qn("a-dropdown"),l=qn("formula"),h=qn("a-tooltip"),d=qn("a-button"),f=qn("a-modal");return Sn(),oi(f,pK(gK(r.attrs)),{default:Yi(()=>[Or("div",gH,[Or("div",vH,[Or("div",mH,[Zs(s,{ghost:"",class:"formula-collapse-box"},{default:Yi(()=>[(Sn(!0),ii(qg,null,Zg(r.collapseList,(p,g)=>(Sn(),oi(a,{key:g,header:p.title},{default:Yi(()=>[p.children.length>0?(Sn(!0),ii(qg,{key:0},Zg(p.children,(v,m)=>(Sn(),ii("div",{key:m,class:"formula-item",onMouseenter:y=>r.handleMouseEnter(y,v),onClick:y=>r.formulaItemClick(v)},Ks(v.title),41,yH))),128)):(Sn(),ii("div",bH,"\u656C\u8BF7\u671F\u5F85"))]),_:2},1032,["header"]))),128))]),_:1}),Object.keys(r.itemDetail).length>0?(Sn(),ii("div",xH,[Or("div",wH,Ks(r.itemDetail.title),1),Or("div",EH,[Zs(c,{placement:"top",trigger:["hover","click"]},{overlay:Yi(()=>[Zs(u,{columns:r.collapseColumns,"data-source":r.itemDetail.children,pagination:!1},null,8,["columns","data-source"])]),default:Yi(()=>[Or("div",null,Ks(r.itemDetail.doc),1)]),_:1})]),Or("div",SH,Ks(r.itemDetail.desc),1)])):Gi("",!0)]),Zs(l,{value:r.editorValue,"onUpdate:value":n[0]||(n[0]=p=>r.editorValue=p),ref:"formulaEditorRef",style:{height:"400px","padding-top":"10px"}},null,8,["value"]),Or("div",MH,[t.customData.length>0?(Sn(),ii("ul",_H,[(Sn(!0),ii(qg,null,Zg(t.customData,(p,g)=>(Sn(),ii("li",{key:g},[Or("div",kH,[Zs(h,null,{title:Yi(()=>[j3(Ks(p.keyDesc),1)]),default:Yi(()=>[Or("div",{onClick:v=>r.customDataLiClick(p.key)},Ks(p.key),9,CH)]),_:2},1024)])]))),128))])):(Sn(),ii("div",AH,"\u6682\u65E0\u53D8\u91CF"))])]),Or("div",IH,[Zs(d,{type:"primary",onClick:r.handleOk},{default:Yi(()=>n[1]||(n[1]=[j3("\u4FDD\u5B58")])),_:1},8,["onClick"])])])]),_:1},16)}],["__scopeId","data-v-b7ed6e17"]]),Os=(e,n,t)=>[["M",e-t,n],["a",t,t,0,1,0,2*t,0],["a",t,t,0,1,0,2*-t,0],["M",e+2-t,n],["L",e+t-2,n],["M",e,n+1*t-2],["L",e,n-t+2],["Z"]],gg=function(e,n,t){return[["M",e-t,n],["a",t,t,0,1,0,2*t,0],["a",t,t,0,1,0,2*-t,0],["M",e+2-t,n],["L",e+t-2,n]]},jP={options:{style:{fill:"#E6F7FF",radius:8,lineWidth:1,stroke:"#1890FF",fillOpacity:"0.95"},stateStyles:{hover:{},selected:{}},labelCfg:{style:{fill:"#000000",fontSize:14,fontWeight:400,fillOpacity:"0.7",textAlign:"center",textBaseline:"middle"}},size:[120,40]},drawShape(e,n){const t=this.getShapeStyle(e),[r,i]=this.getSize(e),o=n.addShape("rect",{attrs:Hs(Vs({},t),{x:-r/2,y:-i/2,width:r,height:i,textAlign:"center",textBaseline:"middle"}),size:[120,40]});return n.addShape("marker",{attrs:{x:0,y:i/2+7,r:6,stroke:"#73d13d",cursor:"pointer",symbol:Os},name:"add-item"}),o}},zP={options:{style:{fill:"#FFF2E8",stroke:"#FFC069",radius:20,lineWidth:1,lineDash:[4,4]},stateStyles:{hover:{},selected:{}},labelCfg:{style:{fill:"#000000",fontSize:14,fontWeight:400,fillOpacity:"0.7"}},size:[120,40]},drawShape(e,n){var a;const t=this.getShapeStyle(e),[r,i]=this.getSize(e),o=n.addShape("rect",{attrs:Hs(Vs({},t),{x:-r/2,y:-i/2,width:r,height:i})});return n.addShape("marker",{attrs:{x:r/2-20,y:0,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:gg},name:"remove-item"}),(a=e.menus)!=null&&a.length&&n.addShape("marker",{attrs:{x:0,y:i/2+7,r:6,stroke:"#73d13d",cursor:"pointer",symbol:Os},name:"add-item"}),o},update(e,n){var o;this.getShapeStyle(e);const[t,r]=this.getSize(e),i=n.getContainer();!i.find(a=>a.get("name")==="add-item")&&((o=e.menus)!=null&&o.length)&&i.addShape("marker",{attrs:{x:0,y:r/2+7,r:6,stroke:"#73d13d",cursor:"pointer",symbol:Os},name:"add-item"})}},FP={options:{style:{fill:"#F9F0FF",stroke:"#B37FEB",radius:8,lineWidth:1},stateStyles:{hover:{},selected:{}},labelCfg:{style:{fill:"#000000",fontSize:14,fontWeight:400,fillOpacity:"0.7"}},size:[120,40]},drawShape(e,n){var a;const t=this.getShapeStyle(e),[r,i]=this.getSize(e),o=n.addShape("rect",{attrs:Hs(Vs({},t),{x:-60,y:-20,width:r,height:i})});return n.addShape("marker",{attrs:{x:r/2-20,y:0,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:gg},name:"remove-item"}),(a=e.menus)!=null&&a.length&&n.addShape("marker",{attrs:{x:0,y:i/2+7,r:6,stroke:"#73d13d",cursor:"pointer",symbol:Os},name:"add-item"}),o},update(e,n){var s;this.getShapeStyle(e);const[t,r]=this.getSize(e),i=n.getContainer(),o=i.find(u=>u.get("name")==="add-item"),a=i.find(u=>u.get("name")==="text-shape");a&&a.attr({text:e.label}),!o&&((s=e.menus)!=null&&s.length)&&i.addShape("marker",{attrs:{x:0,y:r/2+7,r:6,stroke:"#73d13d",cursor:"pointer",symbol:Os},name:"add-item"})}},GP={options:{style:{fill:"#E6F7FF",radius:8,lineWidth:1,stroke:"#1890FF",fillOpacity:"0.95"},stateStyles:{hover:{},selected:{}},labelCfg:{style:{fill:"#000000",fontSize:14,fontWeight:400,fillOpacity:"0.7"}},size:[120,40]},drawShape(e,n){const t=this.getShapeStyle(e),[r,i]=this.getSize(e),o=n.addShape("rect",{attrs:Hs(Vs({},t),{width:r,height:i,x:-r/2,y:-i/2})});return n.addShape("marker",{attrs:{x:r/2-20,y:0,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:gg},name:"remove-item"}),n.addShape("marker",{attrs:{x:0,y:i/2+7,r:6,stroke:"#73d13d",cursor:"pointer",symbol:Os},name:"add-item"}),o}};const TH={type:"compactBox",direction:"TB",getId:function(e){return e.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}};Ts.registerNode("start",jP,"rect"),Ts.registerNode("condition",zP,"rect"),Ts.registerNode("action",FP,"rect"),Ts.registerNode("event",GP,"rect"),Ts.registerEdge("flow-line",{drawShape(e,n){const t=e.startPoint,r=e.endPoint,{style:i}=e,o=n.addShape("path",{attrs:{stroke:i.stroke,path:[["M",t.x,t.y],["L",t.x,(t.y+r.y)/2],["L",r.x,(t.y+r.y)/2],["L",r.x,r.y]]}});return e.label&&e.label.length&&n.addShape("text",{attrs:{text:e.label,fill:"#595959",textAlign:"center",textBaseline:"middle",x:r.x,y:t.x===r.x?(t.y+r.y)/2:(t.y+r.y)/2+(r.y-t.y)/8},name:"text"}),o}}),G3=Dh({props:{pagePata:{type:Object,default:()=>({})},nodeData:{type:Object,default:()=>({})},customData:{type:Array,default:()=>[]}},components:{flowDropDown:uH,settingPanel:oH,formulaModal:kx},setup(e,{emit:n,expose:t}){let r=xi(null),i=xi(null),o=xi(null),a=xi({}),s=xi(!1),u=xi(!1),c=xi(!1);return mK(()=>{yK(()=>{setTimeout(()=>{var v;const{width:l}=((v=r==null?void 0:r.value)==null?void 0:v.getBoundingClientRect())||{},h=_x(RP),d=new Ts.TreeGraph({container:r.value,width:l,height:40*h+56*(h-1)+200,layout:TH,linkCenter:!0,defaultNode:{type:"start"},animateCfg:{duration:150}});d.on("afteradditem",()=>{const m=d.save(),y=_x(m);d.changeSize(l,40*y+56*(y-1)+200)}),d.on("afterremoveitem",()=>{const m=d.save(),y=_x(m);d.changeSize(l,40*y+56*(y-1)+200)}),d.edge(m=>{const y=d.findById(m.source),b=d.findById(m.target),x=y==null?void 0:y.getModel();b==null||b.getModel();let w="";return(x==null?void 0:x.type)==="condition"&&(w=x.config.name||""),{type:"flow-line",label:w,style:{stroke:"#91d5ff"}}});const f=Object.keys(e.nodeData).length>0?e.nodeData:RP;d.data(bK(f)),d.render(),d.fitCenter();const p=d.findById("root").getBBox(),g=d.getCanvasByPoint(p.x,p.y);d.translate(0,40-g.y),i.value=d,d.on("node:click",m=>{var S;const{item:y,target:b}=m,x=b.get("type"),w=b.get("name"),E=y.getModel();if(["action","condition"].includes(E.type)&&x!=="marker")return o.value=y.getModel(),E.type==="action"&&(s.value=!0),void(E.type==="condition"&&(u.value=!0));if(x==="marker"&&w==="add-item"){const M=y.getBBox(),k=b.getBBox(),_=d.getCanvasByPoint(k.x+M.x+M.width/2+20,k.y+M.y+M.height/2+6);o.value=y.getModel(),c.value=!0;const{left:C,top:T}=((S=r==null?void 0:r.value)==null?void 0:S.getBoundingClientRect())||{};a.value={top:_.y+T-80+"px",left:_.x+C-30+"px"}}else w==="remove-item"&&d.removeChild(E.id)}),d.on("canvas:click",()=>{c.value=!1,o.value=null})})})}),t({flowSave:()=>{var l;return(l=i.value)==null?void 0:l.save()}}),{getContainer:()=>document.getElementById("mount-node"),modelOpen:u,nodeRef:r,graphRef:i,curModel:o,menuPosition:a,open:s,isShowDropDown:c,onSelect:l=>{var v;const h=(v=o.value.menus)==null?void 0:v.find(m=>m.key===l),d=h.nodeType,f=h.nodeName;if(!o.value)return;const p=`n-${Math.random()}`;o.value.children||(o.value.children=[]);let g=[];["condition","action"].includes(d)?g=[]:d==="event"&&(g=[{key:"action",label:"\u52A8\u4F5C",nodeType:"action",nodeName:"\u52A8\u4F5C",eventKey:h.eventKey},{key:"condition",label:"\u6761\u4EF6",nodeType:"condition",nodeName:"\u6761\u4EF6",eventKey:h.eventKey}]),o.value.children.push({type:d,id:p,label:f,key:l,menus:g,conditionId:h.conditionId,eventKey:h.eventKey}),i.value.updateChild(o.value,o.value.id),o.value=null}}}},[["render",function(e,n,t,r,i,o){const a=qn("flowDropDown"),s=qn("settingPanel"),u=qn("a-modal"),c=qn("formulaModal");return Sn(),ii("div",{style:{},onClick:n[7]||(n[7]=l=>l.stopPropagation())},[r.isShowDropDown?(Sn(),oi(a,{key:0,curModel:r.curModel,menuPosition:r.menuPosition,onOnSelect:r.onSelect},null,8,["curModel","menuPosition","onOnSelect"])):Gi("",!0),r.open?(Sn(),oi(u,{open:r.open,"onUpdate:open":n[2]||(n[2]=l=>r.open=l),footer:null,getContainer:r.getContainer,onClick:n[3]||(n[3]=l=>l.stopPropagation()),title:"\u8BBE\u7F6E",width:"50%",key:2},{default:Yi(()=>[r.open?(Sn(),oi(s,{key:0,onClick:n[0]||(n[0]=l=>l.stopPropagation()),graphRef:r.graphRef,curModel:r.curModel,popConfig:r.curModel,customData:t.customData,onClose:n[1]||(n[1]=()=>{r.open=!1,r.curModel=null,r.isShowDropDown=!1})},null,8,["graphRef","curModel","popConfig","customData"])):Gi("",!0)]),_:1},8,["open","getContainer"])):Gi("",!0),r.modelOpen?(Sn(),oi(c,{key:2,open:r.modelOpen,"onUpdate:open":n[4]||(n[4]=l=>r.modelOpen=l),getContainer:r.getContainer,graphRef:r.graphRef,curModel:r.curModel,popConfig:r.curModel,customData:t.customData,onClose:n[5]||(n[5]=l=>{l.stopPropagation(),r.modelOpen=!1,r.curModel=null,r.isShowDropDown=!1}),title:"\u516C\u5F0F\u7F16\u8F91",footer:null,width:"50%"},null,8,["open","getContainer","graphRef","curModel","popConfig","customData"])):Gi("",!0),Or("div",{onClick:n[6]||(n[6]=l=>l.stopPropagation()),id:"mount-node",ref:"nodeRef"},null,512)])}],["__scopeId","data-v-5b13e624"]])}));export{PK as __tla,kx as a,G3 as f};
