var g=(d,a,r)=>new Promise((e,i)=>{var m=l=>{try{s(r.next(l))}catch(p){i(p)}},o=l=>{try{s(r.throw(l))}catch(p){i(p)}},s=l=>l.done?e(l.value):Promise.resolve(l.value).then(m,o);s((r=r.apply(d,a)).next())});import{_ as y,a5 as F,a7 as j,j as f,af as x,k as S,r as c,o as P,f as I,e as v,b as t,w as n,W as _}from"./index-BXSYDVKE.js";import{p as $,a as z}from"./dpPage-D5LxLeZf.js";const U=[{title:"\u540D\u79F0",key:"name",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"create_time",align:"center"},{title:"\u4FEE\u6539\u65F6\u95F4",key:"update_time",align:"center"},{title:"\u72B6\u6001",key:"status_desc",align:"center"},{key:"options",prop:"options",align:"center",title:"\u64CD\u4F5C",width:"200px",fixed:"right",noEmptyValue:!0}],V=F(),H={class:"home-main"},N={class:"mu-search-container pall10"},O={class:"mu-search-form-button"},A={class:"mu-handle-content flex flex-1 flex-column"},D={class:"mb20"},E=y({name:"dpPage",setup(){const d=V.currentProjectId;j();const a=f(!1),r=f({project_id:d,name:"",tem_json:'{"template":{"lc_id":"root","__children":[{"div":{"class":"container","id": "vcc-container","style": "width: 1920px; height: 1080px;background-color: #142A41;position: relative;","lc_id":"container","__children":[]}}]}}',script_json:`export default {
    setup() {

      return {};
    },
  };`,css:"",eventNode:"[]",customData:"[]",status:2});x();let e=f({projectId:d,name:"",pageSize:10,page:1}),i=f({data:[],columns:U,total:0});const m=()=>g(this,null,function*(){let o=e.value,s=yield z(o);s.success&&(i.value.data=s.model.list,i.value.total=s.model.count)});return S(()=>{m()}),{addFormSave:()=>g(this,null,function*(){if(r.value.name=="")return;const o=yield $(r.value);o.success&&(a.value=!1,window.open(`/dp/form?id=${o.model}&projectId=${d}`),m())}),searchForm:e,resetForm:()=>{e.value={projectId:d,name:"",pageSize:10,page:1}},getPage:m,goVcc:o=>{window.open(`/dp/form?id=${o}&projectId=${d}`)},table:i,handleCurrentChange:o=>{},showPop:()=>{a.value=!0,r.value.name=""},isShow:a,addForm:r}}},[["render",function(d,a,r,e,i,m){const o=c("a-input"),s=c("mic-search-label"),l=c("a-col"),p=c("a-row"),h=c("a-button"),k=c("a-form-item"),w=c("a-form"),C=c("a-modal"),b=c("mic-search-table");return P(),I("div",H,[v("div",N,[t(p,null,{default:n(()=>[t(l,{span:8},{default:n(()=>[t(s,{labelName:"\u540D\u79F0"},{default:n(()=>[t(o,{value:e.searchForm.name,"onUpdate:value":a[0]||(a[0]=u=>e.searchForm.name=u),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),t(l,{span:8}),t(l,{span:8})]),_:1}),v("div",O,[t(h,{onClick:e.resetForm},{default:n(()=>a[3]||(a[3]=[_("\u91CD\u7F6E")])),_:1},8,["onClick"]),t(h,{type:"primary",onClick:e.getPage},{default:n(()=>a[4]||(a[4]=[_("\u67E5\u8BE2")])),_:1},8,["onClick"])])]),v("div",A,[v("div",D,[t(h,{type:"primary",onClick:e.showPop},{default:n(()=>a[5]||(a[5]=[_("\u521B\u5EFA\u5927\u5C4F")])),_:1},8,["onClick"]),t(C,{open:e.isShow,"onUpdate:open":a[2]||(a[2]=u=>e.isShow=u),onOk:e.addFormSave,title:"\u521B\u5EFA\u5927\u5C4F"},{default:n(()=>[t(w,{model:e.addForm},{default:n(()=>[t(k,{label:"\u540D\u79F0"},{default:n(()=>[t(o,{value:e.addForm.name,"onUpdate:value":a[1]||(a[1]=u=>e.addForm.name=u)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","onOk"])]),t(b,{data:e.table.data,columns:e.table.columns,total:e.table.total,onHandleCurrentChange:e.handleCurrentChange},{options:n(u=>[t(h,{link:"",size:"small",onClick:W=>e.goVcc(u.row.id)},{default:n(()=>a[6]||(a[6]=[_(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])]),_:1},8,["data","columns","total","onHandleCurrentChange"])])])}]]);export{E as default};
