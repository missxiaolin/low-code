var M=Object.defineProperty,R=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var N=(r,e,n)=>e in r?M(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,C=(r,e)=>{for(var n in e||(e={}))E.call(e,n)&&N(r,n,e[n]);if(O)for(var n of O(e))G.call(e,n)&&N(r,n,e[n]);return r},I=(r,e)=>R(r,D(e));var b=(r,e,n)=>new Promise((a,c)=>{var F=s=>{try{p(n.next(s))}catch(m){c(m)}},f=s=>{try{p(n.throw(s))}catch(m){c(m)}},p=s=>s.done?a(s.value):Promise.resolve(s.value).then(F,f);p((n=n.apply(r,e)).next())});import{a4 as w,_ as V,a5 as W,j as h,P as S,k as A,a8 as B,r as i,o as _,f as L,e as k,b as t,w as u,W as d,F as j,c as U,H as J,I as K,G as P}from"./index-BDQ1iAku.js";const Q=[{key:"id",title:"ID",align:"center"},{key:"name",title:"\u540D\u79F0",align:"center"},{key:"path",title:"\u8DEF\u5F84",align:"center"},{key:"type",prop:"type",title:"\u7C7B\u578B",align:"center"},{key:"status",prop:"status",title:"\u72B6\u6001",align:"center"},{key:"create_time",title:"\u521B\u5EFA\u65F6\u95F4",align:"center"},{key:"update_time",title:"\u4FEE\u6539\u65F6\u95F4",align:"center"},{key:"options",prop:"options",align:"center",title:"\u64CD\u4F5C",width:"250px",fixed:"right",noEmptyValue:!0}],T={class:"home-main"},X={class:"mu-search-container pall10"},Y={class:"mu-search-form-button"},Z={class:"mu-handle-content flex flex-1 flex-column"},$={class:"mb20"},ee=V({setup(){const r=W().currentProjectId,e=h(null);let n=h([]),a=h(!1),c=h({projectId:Number(r),name:"",type:"",status:"",pageSize:10,page:1});const F=S([{value:1,label:"\u663E\u793A"},{value:2,label:"\u9690\u85CF"}]),f=S([{value:1,label:"\u83DC\u5355"},{value:2,label:"\u9875\u9762"}]);let p=h({data:[],columns:Q,total:0}),s=h({ruleForm:{id:0,project_id:Number(r),menu_id:"",path:"",name:"",type:1,status:1},rules:[]});const m=()=>b(this,null,function*(){let l=yield(v=C({},c.value),w({url:"/adm/project/menu/list",method:"post",data:v}));var v;l.success&&(p.value.data=l.model.list,p.value.total=l.model.count)}),g=()=>b(this,null,function*(){let l=yield(v={projectId:r},w({url:"/adm/project/menu/all",method:"post",data:v}));var v;l.success&&(n.value=l.model)});return A(()=>{r?(g(),m()):B.info("\u8BF7\u5148\u9009\u62E9\u9879\u76EE\uFF01")}),{edit:l=>{s.value.ruleForm={id:l.id,menu_id:l.menu_id===0?"":l.menu_id,path:l.path,name:l.name,type:l.type,status:l.status},a.value=!0},menuListOptions:n,typeOptions:f,statusOptions:F,searchForm:c,getMenuList:m,resetSearchForm:()=>{c.value={name:"",type:"",status:"",pageSize:10,page:1},m()},table:p,handleCurrentChange:l=>{c.value.page=l,m()},open:a,showPop:()=>{s.value.ruleForm={id:0,projectId:Number(r),menu_id:"",path:"",name:"",type:1,status:1},a.value=!0},form:s,formRef:e,onSubmit:()=>{e.value.validate().then(()=>b(this,null,function*(){var l;(yield(l=I(C({},s.value.ruleForm),{project_id:Number(r),menu_id:s.value.ruleForm.menu_id===""?0:s.value.ruleForm.menu_id}),w({url:"/adm/project/menu/save",method:"post",data:l}))).success&&(a.value=!1,m())})).catch(l=>{})},resetForm:()=>{e.value.resetFields()}}}},[["render",function(r,e,n,a,c,F){const f=i("a-input"),p=i("mic-search-label"),s=i("a-col"),m=i("a-select"),g=i("a-row"),l=i("a-button"),v=i("mic-search-table"),x=i("a-radio-group"),y=i("a-form-item"),z=i("a-select-option"),H=i("a-form"),q=i("a-modal");return _(),L("div",T,[k("div",X,[t(g,null,{default:u(()=>[t(s,{span:8},{default:u(()=>[t(p,{labelName:"\u540D\u79F0"},{default:u(()=>[t(f,{value:a.searchForm.name,"onUpdate:value":e[0]||(e[0]=o=>a.searchForm.name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),t(s,{span:8},{default:u(()=>[t(p,{labelName:"\u5206\u7C7B"},{default:u(()=>[t(m,{value:a.searchForm.type,"onUpdate:value":e[1]||(e[1]=o=>a.searchForm.type=o),options:a.typeOptions,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B"},null,8,["value","options"])]),_:1})]),_:1}),t(s,{span:8},{default:u(()=>[t(p,{labelName:"\u72B6\u6001"},{default:u(()=>[t(m,{value:a.searchForm.status,"onUpdate:value":e[2]||(e[2]=o=>a.searchForm.status=o),placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",options:a.statusOptions},null,8,["value","options"])]),_:1})]),_:1})]),_:1}),k("div",Y,[t(l,{onClick:a.resetSearchForm},{default:u(()=>e[9]||(e[9]=[d("\u91CD\u7F6E")])),_:1},8,["onClick"]),t(l,{type:"primary",onClick:a.getMenuList},{default:u(()=>e[10]||(e[10]=[d("\u67E5\u8BE2")])),_:1},8,["onClick"])])]),k("div",Z,[k("div",$,[t(l,{type:"primary",onClick:a.showPop},{default:u(()=>e[11]||(e[11]=[d("\u6DFB\u52A0")])),_:1},8,["onClick"])]),t(v,{data:a.table.data,columns:a.table.columns,total:a.table.total,onHandleCurrentChange:a.handleCurrentChange},{type:u(o=>[d(j(o.row.type==1?"\u83DC\u5355":"\u9875\u9762"),1)]),status:u(o=>[d(j(o.row.status==1?"\u663E\u793A":"\u9690\u85CF"),1)]),options:u(o=>[t(l,{link:"",size:"small",onClick:ae=>a.edit(o.row)},{default:u(()=>e[12]||(e[12]=[d(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])]),_:1},8,["data","columns","total","onHandleCurrentChange"])]),t(q,{title:"\u521B\u5EFA",footer:null,open:a.open,"onUpdate:open":e[8]||(e[8]=o=>a.open=o)},{default:u(()=>[t(H,{ref:"formRef",model:a.form.ruleForm,rules:a.form.rules,"label-col":{span:3}},{default:u(()=>[t(y,{ref:"type",label:"\u7C7B\u578B",name:"type"},{default:u(()=>[t(x,{options:a.typeOptions,value:a.form.ruleForm.type,"onUpdate:value":e[3]||(e[3]=o=>a.form.ruleForm.type=o)},null,8,["options","value"])]),_:1},512),a.form.ruleForm.type==2?(_(),U(y,{key:0,ref:"menu_id",label:"\u83DC\u5355",name:"menu_id"},{default:u(()=>[t(m,{value:a.form.ruleForm.menu_id,"onUpdate:value":e[4]||(e[4]=o=>a.form.ruleForm.menu_id=o),allowClear:""},{default:u(()=>[(_(!0),L(J,null,K(a.menuListOptions,o=>(_(),U(z,{key:o.id,value:o.id},{default:u(()=>[d(j(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},512)):P("",!0),t(y,{ref:"name",label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0!"}]},{default:u(()=>[t(f,{value:a.form.ruleForm.name,"onUpdate:value":e[5]||(e[5]=o=>a.form.ruleForm.name=o)},null,8,["value"])]),_:1},512),a.form.ruleForm.type==2?(_(),U(y,{key:1,ref:"path",label:"\u8DEF\u5F84",name:"path",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u5F84!"}]},{default:u(()=>[t(f,{value:a.form.ruleForm.path,"onUpdate:value":e[6]||(e[6]=o=>a.form.ruleForm.path=o)},null,8,["value"])]),_:1},512)):P("",!0),t(y,{ref:"status",label:"\u72B6\u6001",name:"status"},{default:u(()=>[t(x,{options:a.statusOptions,value:a.form.ruleForm.status,"onUpdate:value":e[7]||(e[7]=o=>a.form.ruleForm.status=o)},null,8,["options","value"])]),_:1},512),t(y,{class:"form-bottom-box"},{default:u(()=>[t(l,{type:"primary",onClick:a.onSubmit},{default:u(()=>e[13]||(e[13]=[d("\u4FDD\u5B58")])),_:1},8,["onClick"]),t(l,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:u(()=>e[14]||(e[14]=[d("\u91CD\u7F6E")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open"])])}]]);export{ee as default};
