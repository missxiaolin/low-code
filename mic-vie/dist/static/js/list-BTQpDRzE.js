var F=(S,l,c)=>new Promise((e,f)=>{var y=r=>{try{v(c.next(r))}catch(i){f(i)}},h=r=>{try{v(c.throw(r))}catch(i){f(i)}},v=r=>r.done?e(r.value):Promise.resolve(r.value).then(y,h);v((c=c.apply(S,l)).next())});import{_ as q,j as u,a5 as D,a7 as I,P as z,k as N,r as d,o as G,f as P,e as x,b as s,w as t,W as p,F as U,H as A,I as B,c as H,aa as M,ab as J,a8 as g,ac as L,ad as R,ae as E}from"./index-BXSYDVKE.js";const W=[{key:"type",default:1,type:"radio",label:"\u9879\u76EE\u7C7B\u578B",disabled:!1,dataOptions:[{label:"pc",value:1},{label:"mobile",value:2,disabled:!0}],placeholder:"\u8BF7\u9009\u62E9\u9879\u76EE\u7C7B\u578B",value:"",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9879\u76EE\u7C7B\u578B"}]},{key:"code",default:"",type:"input",label:"\u4E09\u5B57\u7801",data:"",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u4E09\u5B57\u7801",value:"",disabled:!1,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u4E09\u5B57\u7801",trigger:"blur"},{max:3,message:"\u8BF7\u8F93\u5165\u82F1\u65873\u4E2A\u5B57\u7B26\u4E32",trigger:"blur"}]},{key:"name",default:"",type:"input",label:"\u9879\u76EE\u540D\u79F0",data:"",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0",value:"",disabled:!1,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0",trigger:"blur"}]},{key:"desc",default:"",type:"input",label:"\u9879\u76EE\u63CF\u8FF0",data:"",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u63CF\u8FF0",value:"",disabled:!1,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u63CF\u8FF0",trigger:"blur"}]},{key:"status",default:2,type:"radio",label:"\u662F\u5426\u7981\u7528",disabled:!1,dataOptions:[{label:"\u7981\u7528",value:1},{label:"\u5F00\u542F",value:2}],value:"",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u7981\u7528"}]}],K=[{key:"id",title:"ID",align:"center"},{key:"name",title:"\u9879\u76EE\u540D\u79F0",align:"center"},{key:"code",title:"\u4E09\u5B57\u7801",align:"center"},{key:"desc",title:"\u9879\u76EE\u63CF\u8FF0",align:"center"},{key:"type_desc",title:"\u9879\u76EE\u7C7B\u578B",align:"center"},{key:"version",title:"\u5F53\u524D\u7248\u672C",align:"center"},{key:"status_desc",title:"\u9879\u76EE\u72B6\u6001",align:"center"},{key:"create_time",title:"\u521B\u5EFA\u65F6\u95F4",align:"center"},{key:"update_time",title:"\u4FEE\u6539\u65F6\u95F4",align:"center"},{key:"status",prop:"status",title:"\u72B6\u6001",align:"center"},{key:"options",prop:"options",align:"center",title:"\u64CD\u4F5C",width:"380px",fixed:"right",noEmptyValue:!0}],Q={class:"vue-home-main"},T={class:"mu-search-container pall10"},X={class:"mu-search-form-button"},Y={class:"mu-handle-content flex flex-1 flex-column"},Z={class:"mb20"},$=q({setup(S){let l=u(!1),c=u({id:"",version:"",type:1}),e=u(!1),f=u({id:"",version:""}),y=u([]);const h=D(),v=I();let r=u({}),i=u(!1),_=u(!1),n=u(!0);const C=u(W);let w=u({data:[],columns:K,total:0});const O=z([{value:"1",label:"\u7535\u8111\u7AEF"},{value:"2",label:"\u79FB\u52A8\u7AEF"}]),V=z([{value:"1",label:"\u7981\u7528"},{value:"2",label:"\u542F\u7528"}]),k=u({name:"",type:"",status:"",pageSize:10,page:1}),m=()=>F(this,null,function*(){let o=yield M(k.value);o.success&&(w.value.data=o.model.list,w.value.total=o.model.count)}),a=o=>{i.value=o,r.value={},_.value=!1,C.value[1].disabled=!1,n.value=!0};return N(()=>{m()}),{preview:o=>{let b="http://code.missxiaolin.com";["127.0.0.1","localhost","lcode.missxiaolin.com"].indexOf(window.location.hostname)>-1&&(b="http://127.0.0.1:8093"),window.open(b,"_blank")},generate:()=>F(this,null,function*(){if(!c.value.version)return void g.error("\u8BF7\u8F93\u5165\u7248\u672C\u53F7");if(!c.value.id)return void g.error("\u672A\u627E\u5230\u9879\u76EE");let o=yield L(c.value);o.success?(g.success("\u9879\u76EE\u53D1\u5E03\u4E2D"),m(),l.value=!1):g.error(o.errorMessage)}),goRoutePage:o=>{v.push({path:"/project/page",query:{projectId:o.id}})},popClick:a,edit:o=>{C.value[1].disabled=!0,r.value=o,n.value=!0,i.value=!0},detail:o=>{r.value=o,i.value=!0,_.value=!0,n.value=!1},popShowBottomBtn:n,projectDetail:r,popForm:C,table:w,typeOptions:O,statusOptions:V,searchForm:k,resetForm:()=>{k.value={name:"",type:"",status:"",pageSize:10,page:1},m()},formDisbled:_,popClick:a,dialogVisible:i,popSuccess:o=>F(this,null,function*(){let b=JSON.parse(JSON.stringify(o));r.value&&r.value.id&&(b.id=r.value.id);let j=yield J(b);j.success?(h.getValidProject(),g.success(b.id?"\u4FEE\u6539\u6210\u529F":"\u6DFB\u52A0\u6210\u529F"),r.value={},i.value=!1,m()):g.error(j.errorMessage)}),getProjectList:m,handleCurrentChange:o=>{k.value.page=o,m()},versionGenerateFormOpen:l,versionGenerateForm:c,versionVersionFormOpen:e,versionVersionForm:f,versionAll:y,getVersionAll:o=>F(this,null,function*(){y.value=[];let b=yield R({projectId:o,type:1});b.success&&(y.value=b.model)}),setVersion:()=>F(this,null,function*(){let o=yield E(f.value);o.success?(g.success("\u8BBE\u7F6E\u6210\u529F\uFF01"),e.value=!1,m()):g.error(o.errorMessage)})}}},[["render",function(S,l,c,e,f,y){const h=d("a-input"),v=d("mic-search-label"),r=d("a-col"),i=d("a-select"),_=d("a-row"),n=d("a-button"),C=d("mic-pop"),w=d("mic-search-table"),O=d("a-form-item"),V=d("a-form"),k=d("a-modal"),m=d("a-select-option");return G(),P("div",Q,[x("div",T,[s(_,null,{default:t(()=>[s(r,{span:8},{default:t(()=>[s(v,{labelName:"\u9879\u76EE\u540D\u79F0"},{default:t(()=>[s(h,{value:e.searchForm.name,"onUpdate:value":l[0]||(l[0]=a=>e.searchForm.name=a),placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),s(r,{span:8},{default:t(()=>[s(v,{labelName:"\u5206\u7C7B"},{default:t(()=>[s(i,{value:e.searchForm.type,"onUpdate:value":l[1]||(l[1]=a=>e.searchForm.type=a),options:e.typeOptions,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B"},null,8,["value","options"])]),_:1})]),_:1}),s(r,{span:8},{default:t(()=>[s(v,{labelName:"\u72B6\u6001"},{default:t(()=>[s(i,{value:e.searchForm.status,"onUpdate:value":l[2]||(l[2]=a=>e.searchForm.status=a),placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",options:e.statusOptions},null,8,["value","options"])]),_:1})]),_:1})]),_:1}),x("div",X,[s(n,{onClick:e.resetForm},{default:t(()=>l[7]||(l[7]=[p("\u91CD\u7F6E")])),_:1},8,["onClick"]),s(n,{type:"primary",onClick:e.getProjectList},{default:t(()=>l[8]||(l[8]=[p("\u67E5\u8BE2")])),_:1},8,["onClick"])])]),x("div",Y,[x("div",Z,[s(C,{"btn-text":"\u521B\u5EFA\u9879\u76EE",title:"\u9879\u76EE",detail:e.projectDetail,"form-save-btn":"\u4FDD\u5B58","btn-pop-form":e.popForm,"dialog-visible":e.dialogVisible,disabled:e.formDisbled,"is-show-bottom-btn":e.popShowBottomBtn,onPopClick:e.popClick,onSuccess:e.popSuccess},null,8,["detail","btn-pop-form","dialog-visible","disabled","is-show-bottom-btn","onPopClick","onSuccess"])]),s(w,{data:e.table.data,columns:e.table.columns,total:e.table.total,onHandleCurrentChange:e.handleCurrentChange},{status:t(a=>[p(U(a.row.status==1?"\u7981\u7528":a.row.status==2?"\u542F\u7528":"\u53D1\u5E03\u4E2D"),1)]),options:t(a=>[s(n,{link:"",size:"small",onClick:o=>e.edit(a.row)},{default:t(()=>l[9]||(l[9]=[p(" \u7F16\u8F91 ")])),_:2},1032,["onClick"]),s(n,{link:"",size:"small",onClick:o=>e.detail(a.row),class:"ml10"},{default:t(()=>l[10]||(l[10]=[p(" \u8BE6\u60C5 ")])),_:2},1032,["onClick"]),s(n,{link:"",size:"small",onClick:o=>e.goRoutePage(a.row),class:"ml10"},{default:t(()=>l[11]||(l[11]=[p(" \u8DEF\u7531\u914D\u7F6E ")])),_:2},1032,["onClick"]),s(n,{link:"",size:"small",onClick:o=>{e.versionGenerateFormOpen=!0,e.versionGenerateForm.version="",e.versionGenerateForm.id=a.row.id},class:"ml10"},{default:t(()=>l[12]||(l[12]=[p(" \u53D1\u5E03 ")])),_:2},1032,["onClick"]),s(n,{link:"",size:"small",class:"ml10",onClick:o=>{e.versionVersionFormOpen=!0,e.versionVersionForm.version=a.row.version||"",e.versionVersionForm.id=a.row.id,e.getVersionAll(a.row.id)}},{default:t(()=>l[13]||(l[13]=[p(" \u7248\u672C\u8BBE\u7F6E ")])),_:2},1032,["onClick"]),s(n,{link:"",size:"small",class:"ml10",onClick:o=>e.preview(a.row)},{default:t(()=>l[14]||(l[14]=[p(" \u9884\u89C8 ")])),_:2},1032,["onClick"])]),_:1},8,["data","columns","total","onHandleCurrentChange"])]),s(k,{open:e.versionGenerateFormOpen,"onUpdate:open":l[4]||(l[4]=a=>e.versionGenerateFormOpen=a),onOk:e.generate,title:"\u7248\u672C\u53D1\u5E03"},{default:t(()=>[s(V,{model:e.versionGenerateForm},{default:t(()=>[s(O,{label:"\u7248\u672C\u53F7"},{default:t(()=>[s(h,{value:e.versionGenerateForm.version,"onUpdate:value":l[3]||(l[3]=a=>e.versionGenerateForm.version=a)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","onOk"]),s(k,{open:e.versionVersionFormOpen,"onUpdate:open":l[6]||(l[6]=a=>e.versionVersionFormOpen=a),onOk:e.setVersion,title:"\u7248\u672C\u8BBE\u7F6E"},{default:t(()=>[s(V,{model:e.versionVersionForm},{default:t(()=>[s(O,{label:"\u7248\u672C\u53F7"},{default:t(()=>[s(i,{value:e.versionVersionForm.version,"onUpdate:value":l[5]||(l[5]=a=>e.versionVersionForm.version=a)},{default:t(()=>[(G(!0),P(A,null,B(e.versionAll,a=>(G(),H(m,{key:a,value:a.version},{default:t(()=>[p(U(a.version),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","onOk"])])}],["__scopeId","data-v-30f61337"]]);export{$ as default};
