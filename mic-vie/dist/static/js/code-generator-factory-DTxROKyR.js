var k=Object.defineProperty,N=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var C=(r,t,e)=>t in r?k(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,S=(r,t)=>{for(var e in t||(t={}))O.call(t,e)&&C(r,e,t[e]);if(A)for(var e of A(t))M.call(t,e)&&C(r,e,t[e]);return r},b=(r,t)=>N(r,L(t));var w=(r,t,e)=>new Promise((s,i)=>{var n=h=>{try{o(e.next(h))}catch(l){i(l)}},a=h=>{try{o(e.throw(h))}catch(l){i(l)}},o=h=>h.done?s(h.value):Promise.resolve(h.value).then(n,a);o((e=e.apply(r,t)).next())});import{_ as _export_sfc,r as resolveComponent,o as openBlock,f as createElementBlock,au as withDirectives,av as vShow,b as createVNode,w as withCtx,e as createBaseVNode,aw as withModifiers,H as Fragment,I as renderList,J as normalizeStyle,F as toDisplayString,D as normalizeClass,s as renderSlot,ax as getAugmentedNamespace,at as getDefaultExportFromCjs,aj as prettier,aq as parserBabel,ay as _}from"./index-CaN1-knc.js";const{toString}=Object.prototype;function isRegexp(r){return toString.call(r)==="[object RegExp]"}function isObject(r){const t=typeof r;return r!==null&&(t==="object"||t==="function")}const getOwnEnumPropSymbols$1=r=>Object.getOwnPropertySymbols(r).filter(t=>Object.prototype.propertyIsEnumerable.call(r,t));function stringifyObject$1(r,t,e){const s=[];return function i(n,a={},o=""){const h=a.indent||"	";let l;l=a.inlineCharacterLimit===void 0?{newline:`
`,newlineOrSpace:`
`,pad:o,indent:o+h}:{newline:"@@__STRINGIFY_OBJECT_NEW_LINE__@@",newlineOrSpace:"@@__STRINGIFY_OBJECT_NEW_LINE_OR_SPACE__@@",pad:"@@__STRINGIFY_OBJECT_PAD__@@",indent:"@@__STRINGIFY_OBJECT_INDENT__@@"};const c=p=>{if(a.inlineCharacterLimit===void 0)return p;const u=p.replace(new RegExp(l.newline,"g"),"").replace(new RegExp(l.newlineOrSpace,"g")," ").replace(new RegExp(l.pad+"|"+l.indent,"g"),"");return u.length<=a.inlineCharacterLimit?u:p.replace(new RegExp(l.newline+"|"+l.newlineOrSpace,"g"),`
`).replace(new RegExp(l.pad,"g"),o).replace(new RegExp(l.indent,"g"),o+h)};if(s.includes(n))return'"[Circular]"';if(n==null||typeof n=="number"||typeof n=="boolean"||typeof n=="function"||typeof n=="symbol"||isRegexp(n))return String(n);if(n instanceof Date)return`new Date('${n.toISOString()}')`;if(Array.isArray(n)){if(n.length===0)return"[]";s.push(n);const p="["+l.newline+n.map((u,d)=>{const m=n.length-1===d?l.newline:","+l.newlineOrSpace;let f=i(u,a,o+h);return a.transform&&(f=a.transform(n,d,f)),l.indent+f+m}).join("")+l.pad+"]";return s.pop(),c(p)}if(isObject(n)){let p=[...Object.keys(n),...getOwnEnumPropSymbols$1(n)];if(a.filter&&(p=p.filter(d=>a.filter(n,d))),p.length===0)return"{}";s.push(n);const u="{"+l.newline+p.map((d,m)=>{const f=p.length-1===m?l.newline:","+l.newlineOrSpace,g=typeof d=="symbol",y=!g&&/^[a-z$_][$\w]*$/i.test(d),x=g||y?d:i(d,a);let E=i(n[d],a,o+h);return a.transform&&(E=a.transform(n,d,E)),l.indent+String(x)+": "+E+f}).join("")+l.pad+"}";return s.pop(),c(u)}return n=String(n).replace(/[\r\n]/g,p=>p===`
`?"\\n":"\\r"),a.singleQuotes===!1?`"${n=n.replace(/"/g,'\\"')}"`:`'${n=n.replace(/\\?'/g,"\\'")}'`}(r,t,e)}const on=document.addEventListener?function(r,t,e){r&&t&&e&&r.addEventListener(t,e,!1)}:function(r,t,e){r&&t&&e&&r.attachEvent("on"+t,e)},off=document.removeEventListener?function(r,t,e){r&&t&&r.removeEventListener(t,e,!1)}:function(r,t,e){r&&t&&r.detachEvent("on"+t,e)},_sfc_main={name:"editRule",components:{},props:{width:{type:[String],default:""},height:{type:[String],default:""},position:{type:String,default:"relative",validator:function(r){return["absolute","fixed","relative","static","inherit"].indexOf(r)!==-1}},isHotKey:{type:Boolean,default:!0},isScaleRevise:{type:Boolean,default:!1},value:{type:Array,default:()=>[]},contentLayout:{type:Object,default:()=>({top:0,left:0})},parent:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},stepLength:{type:Number,default:50,validator:r=>r%10==0}},data:()=>({size:17,left_top:18,windowWidth:0,windowHeight:0,xScale:[],yScale:[],topSpacing:0,leftSpacing:0,isDrag:!1,dragFlag:"",horizontalDottedLeft:-999,verticalDottedTop:-999,rulerWidth:0,rulerHeight:0,dragLineId:"",keyCode:{r:82},rulerToggle:!0,time:null}),computed:{wrapperStyle(){return{width:this.width?this.width:this.windowWidth+"px",height:this.height?this.height:this.windowHeight+"px",position:this.position}},contentStyle(){return{width:this.width?this.width:this.windowWidth+"px",height:this.height?this.height:this.windowHeight+"px",left:this.contentLayout.left+"px",top:this.contentLayout.top+"px",padding:this.left_top+"px 0px 0px "+this.left_top+"px"}},lineList(){let r=0,t=0;return this.value.map(e=>{const s=e.type==="h";return{id:`${e.type}_${s?r++:t++}`,type:e.type,title:e.site.toFixed(2)+"px",[s?"top":"left"]:e.site/(this.stepLength/50)+this.size}})}},watch:{visible:{handler(r){this.rulerToggle=r},immediate:!0}},mounted(){on(document,"mousemove",this.dottedLineMove),on(document,"mouseup",this.dottedLineUp),on(document,"keyup",this.keyboard),this.init(),on(window,"resize",this.windowResize)},beforeDestroy(){off(document,"mousemove",this.dottedLineMove),off(document,"mouseup",this.dottedLineUp),off(document,"keyup",this.keyboard),off(window,"resize",this.windowResize)},methods:{init(){this.box(),this.scaleCalc()},windowResize(){this.xScale=[],this.yScale=[],this.init()},getLineStyle:({type:r,top:t,left:e})=>r==="h"?{top:t+"px"}:{left:e+"px"},handleDragLine({type:r,id:t}){return r==="h"?this.dragHorizontalLine(t):this.dragVerticalLine(t)},regenerateScale(){this.time&&clearTimeout(this.time),this.time=setTimeout(()=>{let r=this.$refs.vueRulerWrapper;this.xScale=[],this.yScale=[],this.$refs.verticalRuler&&(this.$refs.verticalRuler.style.height="100%"),this.getCalc(this.xScale,r.scrollWidth),this.getCalc(this.yScale,r.scrollHeight),this.$refs.horizontalRuler.style.width=r.scrollWidth+"px",this.$refs.verticalRuler&&(this.$refs.verticalRuler.style.height=r.scrollHeight+"px")},200)},box(){if(this.isScaleRevise){const r=this.$refs.content,t=r.offsetLeft,e=r.offsetTop;this.getCalcRevise(this.xScale,t),this.getCalcRevise(this.yScale,e)}if(this.parent){const r=window.getComputedStyle(this.$el.parentNode,null);this.windowWidth=parseInt(r.getPropertyValue("width"),10),this.windowHeight=parseInt(r.getPropertyValue("height"),10)}else this.windowWidth=document.documentElement.clientWidth-this.leftSpacing,this.windowHeight=document.documentElement.clientHeight-this.topSpacing;this.rulerWidth=this.$refs.verticalRuler.clientWidth,this.rulerHeight=this.$refs.horizontalRuler?this.$refs.horizontalRuler.clientHeight:0,this.setSpacing()},setSpacing(){this.topSpacing=this.$refs.horizontalRuler?this.$refs.horizontalRuler.getBoundingClientRect().y:0,this.leftSpacing=this.$refs.verticalRuler?this.$refs.verticalRuler.getBoundingClientRect().x:0},scaleCalc(){this.getCalc(this.xScale,this.windowWidth),this.getCalc(this.yScale,this.windowHeight)},getCalc(r,t){for(let e=0;e<t*this.stepLength/50;e+=this.stepLength)e%this.stepLength==0&&r.push({id:e})},getCalcRevise(r,t){for(let e=0;e<t;e+=1)e%this.stepLength==0&&e+this.stepLength<=t&&r.push({id:e})},newLine(r){this.isDrag=!0,this.dragFlag=r},dottedLineMove(r){switch(this.setSpacing(),this.dragFlag){case"x":case"h":this.isDrag&&(this.verticalDottedTop=r.pageY-this.topSpacing);break;case"y":case"v":this.isDrag&&(this.horizontalDottedLeft=r.pageX-this.leftSpacing)}},dottedLineUp(r){if(this.setSpacing(),this.isDrag){this.isDrag=!1;const t=JSON.parse(JSON.stringify(this.value));switch(this.dragFlag){case"x":t.push({type:"h",site:(r.pageY-this.topSpacing-this.size)*(this.stepLength/50)}),this.$emit("input",t);break;case"y":t.push({type:"v",site:(r.pageX-this.leftSpacing-this.size)*(this.stepLength/50)}),this.$emit("input",t);break;case"h":this.dragCalc(t,r.pageY,this.topSpacing,this.rulerHeight,"h"),this.$emit("input",t);break;case"v":this.dragCalc(t,r.pageX,this.leftSpacing,this.rulerWidth,"v"),this.$emit("input",t)}this.verticalDottedTop=this.horizontalDottedLeft=-10}},dragCalc(r,t,e,s,i){if(t-e<s){let n;this.lineList.forEach((a,o)=>{a.id===this.dragLineId&&(n=o,a.id)}),r.splice(n,1,{type:i,site:-600})}else{let n;this.lineList.forEach((a,o)=>{a.id===this.dragLineId&&(n=o,a.id)}),r.splice(n,1,{type:i,site:(t-e-this.size)*(this.stepLength/50)})}},horizontalDragRuler(){this.newLine("x")},verticalDragRuler(){this.newLine("y")},dragHorizontalLine(r){this.isDrag=!0,this.dragFlag="h",this.dragLineId=r},dragVerticalLine(r){this.isDrag=!0,this.dragFlag="v",this.dragLineId=r},keyboard(r){this.isHotKey&&r.keyCode===this.keyCode.r&&(this.rulerToggle=!this.rulerToggle,this.$emit("update:visible",this.rulerToggle),this.rulerToggle?this.left_top=18:this.left_top=0)}}},_hoisted_1=["title","onMousedown"],_hoisted_2={class:"vue-ruler-content-mask"};function _sfc_render(r,t,e,s,i,n){const a=resolveComponent("session");return openBlock(),createElementBlock("div",{style:normalizeStyle(n.wrapperStyle),class:"vue-ruler-wrapper",ref:"vueRulerWrapper",onselectstart:"return false;"},[withDirectives(createVNode(a,null,{default:withCtx(()=>[createBaseVNode("div",{ref:"horizontalRuler",class:"vue-ruler-h",onMousedown:t[0]||(t[0]=withModifiers((...o)=>n.horizontalDragRuler&&n.horizontalDragRuler(...o),["stop"]))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.xScale,(o,h)=>(openBlock(),createElementBlock("span",{key:h,style:normalizeStyle({left:50*h+2+"px"}),class:"n"},toDisplayString(o.id),5))),128))],544),createBaseVNode("div",{ref:"verticalRuler",class:"vue-ruler-v",onMousedown:t[1]||(t[1]=withModifiers((...o)=>n.verticalDragRuler&&n.verticalDragRuler(...o),["stop"]))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.yScale,(o,h)=>(openBlock(),createElementBlock("span",{key:h,style:normalizeStyle({top:50*h+2+"px"}),class:"n"},toDisplayString(o.id),5))),128))],544),createBaseVNode("div",{style:normalizeStyle({top:i.verticalDottedTop+"px"}),class:"vue-ruler-ref-dot-h"},null,4),createBaseVNode("div",{style:normalizeStyle({left:i.horizontalDottedLeft+"px"}),class:"vue-ruler-ref-dot-v"},null,4),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.lineList,o=>(openBlock(),createElementBlock("div",{title:o.title,style:normalizeStyle(n.getLineStyle(o)),key:o.id,class:normalizeClass(`vue-ruler-ref-line-${o.type}`),onMousedown:h=>n.handleDragLine(o)},null,46,_hoisted_1))),128))]),_:1},512),[[vShow,i.rulerToggle]]),createBaseVNode("div",{ref:"content",class:"vue-ruler-content",style:normalizeStyle(n.contentStyle)},[renderSlot(r.$slots,"default")],4),withDirectives(createBaseVNode("div",_hoisted_2,null,512),[[vShow,i.isDrag]])],4)}const vueRuleTool=_export_sfc(_sfc_main,[["render",_sfc_render]]),__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(__viteBrowserExternal$1);let{red,bold,gray,options:colorette}=require$$1,terminalHighlight$1=require$$1,CssSyntaxError$3=class v extends Error{constructor(t,e,s,i,n,a){super(t),this.name="CssSyntaxError",this.reason=t,n&&(this.file=n),i&&(this.source=i),a&&(this.plugin=a),e!==void 0&&s!==void 0&&(this.line=e,this.column=s),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,v)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",this.line!==void 0&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(t){if(!this.source)return"";let e=this.source;t==null&&(t=colorette.enabled),terminalHighlight$1&&t&&(e=terminalHighlight$1(e));let s,i,n=e.split(/\r?\n/),a=Math.max(this.line-3,0),o=Math.min(this.line+2,n.length),h=String(o).length;return t?(s=l=>bold(red(l)),i=l=>gray(l)):s=i=l=>l,n.slice(a,o).map((l,c)=>{let p=a+1+c,u=" "+(" "+p).slice(-h)+" | ";if(p===this.line){let d=i(u.replace(/\d/g," "))+l.slice(0,this.column-1).replace(/[^\t]/g," ");return s(">")+i(u)+l+`
 `+d+s("^")}return" "+i(u)+l}).join(`
`)}toString(){let t=this.showSourceCode();return t&&(t=`

`+t+`
`),this.name+": "+this.message+t}};var cssSyntaxError=CssSyntaxError$3;CssSyntaxError$3.default=CssSyntaxError$3;const DEFAULT_RAW={colon:": ",indent:"    ",beforeDecl:`
`,beforeRule:`
`,beforeOpen:" ",beforeClose:`
`,beforeComment:`
`,after:`
`,emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};function capitalize(r){return r[0].toUpperCase()+r.slice(1)}let Stringifier$2=class{constructor(r){this.builder=r}stringify(r,t){this[r.type](r,t)}root(r){this.root=r,this.body(r),r.raws.after&&this.builder(r.raws.after)}comment(r){let t=this.raw(r,"left","commentLeft"),e=this.raw(r,"right","commentRight");this.builder("/*"+t+r.text+e+"*/",r)}decl(r,t){let e=this.raw(r,"between","colon"),s=r.prop+e+this.rawValue(r,"value");r.important&&(s+=r.raws.important||" !important"),t&&(s+=";"),this.builder(s,r)}rule(r){this.block(r,this.rawValue(r,"selector")),r.raws.ownSemicolon&&this.builder(r.raws.ownSemicolon,r,"end")}atrule(r,t){let e="@"+r.name,s=r.params?this.rawValue(r,"params"):"";if(r.raws.afterName!==void 0?e+=r.raws.afterName:s&&(e+=" "),r.nodes)this.block(r,e+s);else{let i=(r.raws.between||"")+(t?";":"");this.builder(e+s+i,r)}}body(r){let t=r.nodes.length-1;for(;t>0&&r.nodes[t].type==="comment";)t-=1;let e=this.raw(r,"semicolon");for(let s=0;s<r.nodes.length;s++){let i=r.nodes[s],n=this.raw(i,"before");n&&this.builder(n),this.stringify(i,t!==s||e)}}block(r,t){let e,s=this.raw(r,"between","beforeOpen");this.builder(t+s+"{",r,"start"),r.nodes&&r.nodes.length?(this.body(r),e=this.raw(r,"after")):e=this.raw(r,"after","emptyBody"),e&&this.builder(e),this.builder("}",r,"end")}raw(r,t,e){let s;if(e||(e=t),t&&(s=r.raws[t],s!==void 0))return s;let i=r.parent;if(e==="before"&&(!i||i.type==="root"&&i.first===r))return"";if(!i)return DEFAULT_RAW[e];let n=r.root();if(n.rawCache||(n.rawCache={}),n.rawCache[e]!==void 0)return n.rawCache[e];if(e==="before"||e==="after")return this.beforeAfter(r,e);{let a="raw"+capitalize(e);this[a]?s=this[a](n,r):n.walk(o=>{if(s=o.raws[t],s!==void 0)return!1})}return s===void 0&&(s=DEFAULT_RAW[e]),n.rawCache[e]=s,s}rawSemicolon(r){let t;return r.walk(e=>{if(e.nodes&&e.nodes.length&&e.last.type==="decl"&&(t=e.raws.semicolon,t!==void 0))return!1}),t}rawEmptyBody(r){let t;return r.walk(e=>{if(e.nodes&&e.nodes.length===0&&(t=e.raws.after,t!==void 0))return!1}),t}rawIndent(r){if(r.raws.indent)return r.raws.indent;let t;return r.walk(e=>{let s=e.parent;if(s&&s!==r&&s.parent&&s.parent===r&&e.raws.before!==void 0){let i=e.raws.before.split(`
`);return t=i[i.length-1],t=t.replace(/\S/g,""),!1}}),t}rawBeforeComment(r,t){let e;return r.walkComments(s=>{if(s.raws.before!==void 0)return e=s.raws.before,e.includes(`
`)&&(e=e.replace(/[^\n]+$/,"")),!1}),e===void 0?e=this.raw(t,null,"beforeDecl"):e&&(e=e.replace(/\S/g,"")),e}rawBeforeDecl(r,t){let e;return r.walkDecls(s=>{if(s.raws.before!==void 0)return e=s.raws.before,e.includes(`
`)&&(e=e.replace(/[^\n]+$/,"")),!1}),e===void 0?e=this.raw(t,null,"beforeRule"):e&&(e=e.replace(/\S/g,"")),e}rawBeforeRule(r){let t;return r.walk(e=>{if(e.nodes&&(e.parent!==r||r.first!==e)&&e.raws.before!==void 0)return t=e.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeClose(r){let t;return r.walk(e=>{if(e.nodes&&e.nodes.length>0&&e.raws.after!==void 0)return t=e.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeOpen(r){let t;return r.walk(e=>{if(e.type!=="decl"&&(t=e.raws.between,t!==void 0))return!1}),t}rawColon(r){let t;return r.walkDecls(e=>{if(e.raws.between!==void 0)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}beforeAfter(r,t){let e;e=r.type==="decl"?this.raw(r,null,"beforeDecl"):r.type==="comment"?this.raw(r,null,"beforeComment"):t==="before"?this.raw(r,null,"beforeRule"):this.raw(r,null,"beforeClose");let s=r.parent,i=0;for(;s&&s.type!=="root";)i+=1,s=s.parent;if(e.includes(`
`)){let n=this.raw(r,null,"indent");if(n.length)for(let a=0;a<i;a++)e+=n}return e}rawValue(r,t){let e=r[t],s=r.raws[t];return s&&s.value===e?s.raw:e}};var stringifier=Stringifier$2,symbols={};symbols.isClean=Symbol("isClean");let Stringifier$1=stringifier;function stringify$3(r,t){new Stringifier$1(t).stringify(r)}var stringify_1=stringify$3;stringify$3.default=stringify$3;let CssSyntaxError$2=cssSyntaxError,Stringifier=stringifier,{isClean:isClean$2}=symbols,stringify$2=stringify_1;function cloneNode(r,t){let e=new r.constructor;for(let s in r){if(!Object.prototype.hasOwnProperty.call(r,s)||s==="proxyCache")continue;let i=r[s],n=typeof i;s==="parent"&&n==="object"?t&&(e[s]=t):s==="source"?e[s]=i:Array.isArray(i)?e[s]=i.map(a=>cloneNode(a,e)):(n==="object"&&i!==null&&(i=cloneNode(i)),e[s]=i)}return e}let Node$5=class{constructor(r={}){this.raws={},this[isClean$2]=!1;for(let t in r)if(t==="nodes"){this.nodes=[];for(let e of r[t])typeof e.clone=="function"?this.append(e.clone()):this.append(e)}else this[t]=r[t]}error(r,t={}){if(this.source){let e=this.positionBy(t);return this.source.input.error(r,e.line,e.column,t)}return new CssSyntaxError$2(r)}warn(r,t,e){let s={node:this};for(let i in e)s[i]=e[i];return r.warn(t,s)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(r=stringify$2){r.stringify&&(r=r.stringify);let t="";return r(this,e=>{t+=e}),t}clone(r={}){let t=cloneNode(this);for(let e in r)t[e]=r[e];return t}cloneBefore(r={}){let t=this.clone(r);return this.parent.insertBefore(this,t),t}cloneAfter(r={}){let t=this.clone(r);return this.parent.insertAfter(this,t),t}replaceWith(...r){if(this.parent){let t=this,e=!1;for(let s of r)s===this?e=!0:e?(this.parent.insertAfter(t,s),t=s):this.parent.insertBefore(t,s);e||this.remove()}return this}next(){if(!this.parent)return;let r=this.parent.index(this);return this.parent.nodes[r+1]}prev(){if(!this.parent)return;let r=this.parent.index(this);return this.parent.nodes[r-1]}before(r){return this.parent.insertBefore(this,r),this}after(r){return this.parent.insertAfter(this,r),this}root(){let r=this;for(;r.parent;)r=r.parent;return r}raw(r,t){return new Stringifier().raw(this,r,t)}cleanRaws(r){delete this.raws.before,delete this.raws.after,r||delete this.raws.between}toJSON(){let r={};for(let t in this){if(!Object.prototype.hasOwnProperty.call(this,t)||t==="parent")continue;let e=this[t];Array.isArray(e)?r[t]=e.map(s=>typeof s=="object"&&s.toJSON?s.toJSON():s):typeof e=="object"&&e.toJSON?r[t]=e.toJSON():r[t]=e}return r}positionInside(r){let t=this.toString(),e=this.source.start.column,s=this.source.start.line;for(let i=0;i<r;i++)t[i]===`
`?(e=1,s+=1):e+=1;return{line:s,column:e}}positionBy(r){let t=this.source.start;if(r.index)t=this.positionInside(r.index);else if(r.word){let e=this.toString().indexOf(r.word);e!==-1&&(t=this.positionInside(e))}return t}getProxyProcessor(){return{set:(r,t,e)=>(r[t]===e||(r[t]=e,t!=="prop"&&t!=="value"&&t!=="name"&&t!=="params"&&t!=="important"&&t!=="text"||r.markDirty()),!0),get:(r,t)=>t==="proxyOf"?r:t==="root"?()=>r.root().toProxy():r[t]}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(r){if(r.postcssNode=this,r.stack&&this.source&&/\n\s{4}at /.test(r.stack)){let t=this.source;r.stack=r.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return r}markDirty(){if(this[isClean$2]){this[isClean$2]=!1;let r=this;for(;r=r.parent;)r[isClean$2]=!1}}get proxyOf(){return this}};var node=Node$5;Node$5.default=Node$5;let Node$4=node,Declaration$3=class extends Node$4{constructor(r){r&&r.value!==void 0&&typeof r.value!="string"&&(r=b(S({},r),{value:String(r.value)})),super(r),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var declaration=Declaration$3;Declaration$3.default=Declaration$3;var sourceMap={},sourceMapGenerator={},base64Vlq={},base64$1={},intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");base64$1.encode=function(r){if(0<=r&&r<intToCharMap.length)return intToCharMap[r];throw new TypeError("Must be between 0 and 63: "+r)},base64$1.decode=function(r){return 65<=r&&r<=90?r-65:97<=r&&r<=122?r-97+26:48<=r&&r<=57?r-48+52:r==43?62:r==47?63:-1};var base64=base64$1,VLQ_BASE_SHIFT=5,VLQ_BASE=1<<VLQ_BASE_SHIFT,VLQ_BASE_MASK=VLQ_BASE-1,VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(r){return r<0?1+(-r<<1):0+(r<<1)}function fromVLQSigned(r){var t=r>>1;return 1&~r?t:-t}base64Vlq.encode=function(r){var t,e="",s=toVLQSigned(r);do t=s&VLQ_BASE_MASK,(s>>>=VLQ_BASE_SHIFT)>0&&(t|=VLQ_CONTINUATION_BIT),e+=base64.encode(t);while(s>0);return e},base64Vlq.decode=function(r,t,e){var s,i,n=r.length,a=0,o=0;do{if(t>=n)throw new Error("Expected more digits in base 64 VLQ value.");if((i=base64.decode(r.charCodeAt(t++)))===-1)throw new Error("Invalid base64 digit: "+r.charAt(t-1));s=!!(i&VLQ_CONTINUATION_BIT),a+=(i&=VLQ_BASE_MASK)<<o,o+=VLQ_BASE_SHIFT}while(s);e.value=fromVLQSigned(a),e.rest=t};var util$5={};(function(r){r.getArg=function(p,u,d){if(u in p)return p[u];if(arguments.length===3)return d;throw new Error('"'+u+'" is a required argument.')};var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,e=/^data:.+\,.+$/;function s(p){var u=p.match(t);return u?{scheme:u[1],auth:u[2],host:u[3],port:u[4],path:u[5]}:null}function i(p){var u="";return p.scheme&&(u+=p.scheme+":"),u+="//",p.auth&&(u+=p.auth+"@"),p.host&&(u+=p.host),p.port&&(u+=":"+p.port),p.path&&(u+=p.path),u}function n(p){var u=p,d=s(p);if(d){if(!d.path)return p;u=d.path}for(var m,f=r.isAbsolute(u),g=u.split(/\/+/),y=0,x=g.length-1;x>=0;x--)(m=g[x])==="."?g.splice(x,1):m===".."?y++:y>0&&(m===""?(g.splice(x+1,y),y=0):(g.splice(x,2),y--));return(u=g.join("/"))===""&&(u=f?"/":"."),d?(d.path=u,i(d)):u}function a(p,u){p===""&&(p="."),u===""&&(u=".");var d=s(u),m=s(p);if(m&&(p=m.path||"/"),d&&!d.scheme)return m&&(d.scheme=m.scheme),i(d);if(d||u.match(e))return u;if(m&&!m.host&&!m.path)return m.host=u,i(m);var f=u.charAt(0)==="/"?u:n(p.replace(/\/+$/,"")+"/"+u);return m?(m.path=f,i(m)):f}r.urlParse=s,r.urlGenerate=i,r.normalize=n,r.join=a,r.isAbsolute=function(p){return p.charAt(0)==="/"||t.test(p)},r.relative=function(p,u){p===""&&(p="."),p=p.replace(/\/$/,"");for(var d=0;u.indexOf(p+"/")!==0;){var m=p.lastIndexOf("/");if(m<0||(p=p.slice(0,m)).match(/^([^\/]+:\/)?\/*$/))return u;++d}return Array(d+1).join("../")+u.substr(p.length+1)};var o=!("__proto__"in Object.create(null));function h(p){return p}function l(p){if(!p)return!1;var u=p.length;if(u<9||p.charCodeAt(u-1)!==95||p.charCodeAt(u-2)!==95||p.charCodeAt(u-3)!==111||p.charCodeAt(u-4)!==116||p.charCodeAt(u-5)!==111||p.charCodeAt(u-6)!==114||p.charCodeAt(u-7)!==112||p.charCodeAt(u-8)!==95||p.charCodeAt(u-9)!==95)return!1;for(var d=u-10;d>=0;d--)if(p.charCodeAt(d)!==36)return!1;return!0}function c(p,u){return p===u?0:p===null?1:u===null?-1:p>u?1:-1}r.toSetString=o?h:function(p){return l(p)?"$"+p:p},r.fromSetString=o?h:function(p){return l(p)?p.slice(1):p},r.compareByOriginalPositions=function(p,u,d){var m=c(p.source,u.source);return m!==0||(m=p.originalLine-u.originalLine)!==0||(m=p.originalColumn-u.originalColumn)!==0||d||(m=p.generatedColumn-u.generatedColumn)!==0||(m=p.generatedLine-u.generatedLine)!==0?m:c(p.name,u.name)},r.compareByGeneratedPositionsDeflated=function(p,u,d){var m=p.generatedLine-u.generatedLine;return m!==0||(m=p.generatedColumn-u.generatedColumn)!==0||d||(m=c(p.source,u.source))!==0||(m=p.originalLine-u.originalLine)!==0||(m=p.originalColumn-u.originalColumn)!==0?m:c(p.name,u.name)},r.compareByGeneratedPositionsInflated=function(p,u){var d=p.generatedLine-u.generatedLine;return d!==0||(d=p.generatedColumn-u.generatedColumn)!==0||(d=c(p.source,u.source))!==0||(d=p.originalLine-u.originalLine)!==0||(d=p.originalColumn-u.originalColumn)!==0?d:c(p.name,u.name)},r.parseSourceMapInput=function(p){return JSON.parse(p.replace(/^\)]}'[^\n]*\n/,""))},r.computeSourceURL=function(p,u,d){if(u=u||"",p&&(p[p.length-1]!=="/"&&u[0]!=="/"&&(p+="/"),u=p+u),d){var m=s(d);if(!m)throw new Error("sourceMapURL could not be parsed");if(m.path){var f=m.path.lastIndexOf("/");f>=0&&(m.path=m.path.substring(0,f+1))}u=a(i(m),u)}return n(u)}})(util$5);var arraySet={},util$4=util$5,has=Object.prototype.hasOwnProperty,hasNativeMap=typeof Map!="undefined";function ArraySet$2(){this._array=[],this._set=hasNativeMap?new Map:Object.create(null)}ArraySet$2.fromArray=function(r,t){for(var e=new ArraySet$2,s=0,i=r.length;s<i;s++)e.add(r[s],t);return e},ArraySet$2.prototype.size=function(){return hasNativeMap?this._set.size:Object.getOwnPropertyNames(this._set).length},ArraySet$2.prototype.add=function(r,t){var e=hasNativeMap?r:util$4.toSetString(r),s=hasNativeMap?this.has(r):has.call(this._set,e),i=this._array.length;s&&!t||this._array.push(r),s||(hasNativeMap?this._set.set(r,i):this._set[e]=i)},ArraySet$2.prototype.has=function(r){if(hasNativeMap)return this._set.has(r);var t=util$4.toSetString(r);return has.call(this._set,t)},ArraySet$2.prototype.indexOf=function(r){if(hasNativeMap){var t=this._set.get(r);if(t>=0)return t}else{var e=util$4.toSetString(r);if(has.call(this._set,e))return this._set[e]}throw new Error('"'+r+'" is not in the set.')},ArraySet$2.prototype.at=function(r){if(r>=0&&r<this._array.length)return this._array[r];throw new Error("No element indexed by "+r)},ArraySet$2.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=ArraySet$2;var mappingList={},util$3=util$5;function generatedPositionAfter(r,t){var e=r.generatedLine,s=t.generatedLine,i=r.generatedColumn,n=t.generatedColumn;return s>e||s==e&&n>=i||util$3.compareByGeneratedPositionsInflated(r,t)<=0}function MappingList$1(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}MappingList$1.prototype.unsortedForEach=function(r,t){this._array.forEach(r,t)},MappingList$1.prototype.add=function(r){generatedPositionAfter(this._last,r)?(this._last=r,this._array.push(r)):(this._sorted=!1,this._array.push(r))},MappingList$1.prototype.toArray=function(){return this._sorted||(this._array.sort(util$3.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=MappingList$1;var base64VLQ$1=base64Vlq,util$2=util$5,ArraySet$1=arraySet.ArraySet,MappingList=mappingList.MappingList;function SourceMapGenerator$1(r){r||(r={}),this._file=util$2.getArg(r,"file",null),this._sourceRoot=util$2.getArg(r,"sourceRoot",null),this._skipValidation=util$2.getArg(r,"skipValidation",!1),this._sources=new ArraySet$1,this._names=new ArraySet$1,this._mappings=new MappingList,this._sourcesContents=null}SourceMapGenerator$1.prototype._version=3,SourceMapGenerator$1.fromSourceMap=function(r){var t=r.sourceRoot,e=new SourceMapGenerator$1({file:r.file,sourceRoot:t});return r.eachMapping(function(s){var i={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(i.source=s.source,t!=null&&(i.source=util$2.relative(t,i.source)),i.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(i.name=s.name)),e.addMapping(i)}),r.sources.forEach(function(s){var i=s;t!==null&&(i=util$2.relative(t,s)),e._sources.has(i)||e._sources.add(i);var n=r.sourceContentFor(s);n!=null&&e.setSourceContent(s,n)}),e},SourceMapGenerator$1.prototype.addMapping=function(r){var t=util$2.getArg(r,"generated"),e=util$2.getArg(r,"original",null),s=util$2.getArg(r,"source",null),i=util$2.getArg(r,"name",null);this._skipValidation||this._validateMapping(t,e,s,i),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:e!=null&&e.line,originalColumn:e!=null&&e.column,source:s,name:i})},SourceMapGenerator$1.prototype.setSourceContent=function(r,t){var e=r;this._sourceRoot!=null&&(e=util$2.relative(this._sourceRoot,e)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[util$2.toSetString(e)]=t):this._sourcesContents&&(delete this._sourcesContents[util$2.toSetString(e)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},SourceMapGenerator$1.prototype.applySourceMap=function(r,t,e){var s=t;if(t==null){if(r.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=r.file}var i=this._sourceRoot;i!=null&&(s=util$2.relative(i,s));var n=new ArraySet$1,a=new ArraySet$1;this._mappings.unsortedForEach(function(o){if(o.source===s&&o.originalLine!=null){var h=r.originalPositionFor({line:o.originalLine,column:o.originalColumn});h.source!=null&&(o.source=h.source,e!=null&&(o.source=util$2.join(e,o.source)),i!=null&&(o.source=util$2.relative(i,o.source)),o.originalLine=h.line,o.originalColumn=h.column,h.name!=null&&(o.name=h.name))}var l=o.source;l==null||n.has(l)||n.add(l);var c=o.name;c==null||a.has(c)||a.add(c)},this),this._sources=n,this._names=a,r.sources.forEach(function(o){var h=r.sourceContentFor(o);h!=null&&(e!=null&&(o=util$2.join(e,o)),i!=null&&(o=util$2.relative(i,o)),this.setSourceContent(o,h))},this)},SourceMapGenerator$1.prototype._validateMapping=function(r,t,e,s){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(r&&"line"in r&&"column"in r&&r.line>0&&r.column>=0)||t||e||s)&&!(r&&"line"in r&&"column"in r&&t&&"line"in t&&"column"in t&&r.line>0&&r.column>=0&&t.line>0&&t.column>=0&&e))throw new Error("Invalid mapping: "+JSON.stringify({generated:r,source:e,original:t,name:s}))},SourceMapGenerator$1.prototype._serializeMappings=function(){for(var r,t,e,s,i=0,n=1,a=0,o=0,h=0,l=0,c="",p=this._mappings.toArray(),u=0,d=p.length;u<d;u++){if(r="",(t=p[u]).generatedLine!==n)for(i=0;t.generatedLine!==n;)r+=";",n++;else if(u>0){if(!util$2.compareByGeneratedPositionsInflated(t,p[u-1]))continue;r+=","}r+=base64VLQ$1.encode(t.generatedColumn-i),i=t.generatedColumn,t.source!=null&&(s=this._sources.indexOf(t.source),r+=base64VLQ$1.encode(s-l),l=s,r+=base64VLQ$1.encode(t.originalLine-1-o),o=t.originalLine-1,r+=base64VLQ$1.encode(t.originalColumn-a),a=t.originalColumn,t.name!=null&&(e=this._names.indexOf(t.name),r+=base64VLQ$1.encode(e-h),h=e)),c+=r}return c},SourceMapGenerator$1.prototype._generateSourcesContent=function(r,t){return r.map(function(e){if(!this._sourcesContents)return null;t!=null&&(e=util$2.relative(t,e));var s=util$2.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)},SourceMapGenerator$1.prototype.toJSON=function(){var r={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(r.file=this._file),this._sourceRoot!=null&&(r.sourceRoot=this._sourceRoot),this._sourcesContents&&(r.sourcesContent=this._generateSourcesContent(r.sources,r.sourceRoot)),r},SourceMapGenerator$1.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=SourceMapGenerator$1;var sourceMapConsumer={},binarySearch$1={};(function(r){function t(e,s,i,n,a,o){var h=Math.floor((s-e)/2)+e,l=a(i,n[h],!0);return l===0?h:l>0?s-h>1?t(h,s,i,n,a,o):o==r.LEAST_UPPER_BOUND?s<n.length?s:-1:h:h-e>1?t(e,h,i,n,a,o):o==r.LEAST_UPPER_BOUND?h:e<0?-1:e}r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.search=function(e,s,i,n){if(s.length===0)return-1;var a=t(-1,s.length,e,s,i,n||r.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&i(s[a],s[a-1],!0)===0;)--a;return a}})(binarySearch$1);var quickSort$1={};function swap(r,t,e){var s=r[t];r[t]=r[e],r[e]=s}function randomIntInRange(r,t){return Math.round(r+Math.random()*(t-r))}function doQuickSort(r,t,e,s){if(e<s){var i=e-1;swap(r,randomIntInRange(e,s),s);for(var n=r[s],a=e;a<s;a++)t(r[a],n)<=0&&swap(r,i+=1,a);swap(r,i+1,a);var o=i+1;doQuickSort(r,t,e,o-1),doQuickSort(r,t,o+1,s)}}quickSort$1.quickSort=function(r,t){doQuickSort(r,t,0,r.length-1)};var util$1=util$5,binarySearch=binarySearch$1,ArraySet=arraySet.ArraySet,base64VLQ=base64Vlq,quickSort=quickSort$1.quickSort;function SourceMapConsumer(r,t){var e=r;return typeof r=="string"&&(e=util$1.parseSourceMapInput(r)),e.sections!=null?new IndexedSourceMapConsumer(e,t):new BasicSourceMapConsumer(e,t)}function BasicSourceMapConsumer(r,t){var e=r;typeof r=="string"&&(e=util$1.parseSourceMapInput(r));var s=util$1.getArg(e,"version"),i=util$1.getArg(e,"sources"),n=util$1.getArg(e,"names",[]),a=util$1.getArg(e,"sourceRoot",null),o=util$1.getArg(e,"sourcesContent",null),h=util$1.getArg(e,"mappings"),l=util$1.getArg(e,"file",null);if(s!=this._version)throw new Error("Unsupported version: "+s);a&&(a=util$1.normalize(a)),i=i.map(String).map(util$1.normalize).map(function(c){return a&&util$1.isAbsolute(a)&&util$1.isAbsolute(c)?util$1.relative(a,c):c}),this._names=ArraySet.fromArray(n.map(String),!0),this._sources=ArraySet.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(c){return util$1.computeSourceURL(a,c,t)}),this.sourceRoot=a,this.sourcesContent=o,this._mappings=h,this._sourceMapURL=t,this.file=l}function Mapping(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function IndexedSourceMapConsumer(r,t){var e=r;typeof r=="string"&&(e=util$1.parseSourceMapInput(r));var s=util$1.getArg(e,"version"),i=util$1.getArg(e,"sections");if(s!=this._version)throw new Error("Unsupported version: "+s);this._sources=new ArraySet,this._names=new ArraySet;var n={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var o=util$1.getArg(a,"offset"),h=util$1.getArg(o,"line"),l=util$1.getArg(o,"column");if(h<n.line||h===n.line&&l<n.column)throw new Error("Section offsets must be ordered and non-overlapping.");return n=o,{generatedOffset:{generatedLine:h+1,generatedColumn:l+1},consumer:new SourceMapConsumer(util$1.getArg(a,"map"),t)}})}SourceMapConsumer.fromSourceMap=function(r,t){return BasicSourceMapConsumer.fromSourceMap(r,t)},SourceMapConsumer.prototype._version=3,SourceMapConsumer.prototype.__generatedMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),SourceMapConsumer.prototype.__originalMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),SourceMapConsumer.prototype._charIsMappingSeparator=function(r,t){var e=r.charAt(t);return e===";"||e===","},SourceMapConsumer.prototype._parseMappings=function(r,t){throw new Error("Subclasses must implement _parseMappings")},SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.GREATEST_LOWER_BOUND=1,SourceMapConsumer.LEAST_UPPER_BOUND=2,SourceMapConsumer.prototype.eachMapping=function(r,t,e){var s,i=t||null;switch(e||SourceMapConsumer.GENERATED_ORDER){case SourceMapConsumer.GENERATED_ORDER:s=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var n=this.sourceRoot;s.map(function(a){var o=a.source===null?null:this._sources.at(a.source);return{source:o=util$1.computeSourceURL(n,o,this._sourceMapURL),generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:a.name===null?null:this._names.at(a.name)}},this).forEach(r,i)},SourceMapConsumer.prototype.allGeneratedPositionsFor=function(r){var t=util$1.getArg(r,"line"),e={source:util$1.getArg(r,"source"),originalLine:t,originalColumn:util$1.getArg(r,"column",0)};if(e.source=this._findSourceIndex(e.source),e.source<0)return[];var s=[],i=this._findMapping(e,this._originalMappings,"originalLine","originalColumn",util$1.compareByOriginalPositions,binarySearch.LEAST_UPPER_BOUND);if(i>=0){var n=this._originalMappings[i];if(r.column===void 0)for(var a=n.originalLine;n&&n.originalLine===a;)s.push({line:util$1.getArg(n,"generatedLine",null),column:util$1.getArg(n,"generatedColumn",null),lastColumn:util$1.getArg(n,"lastGeneratedColumn",null)}),n=this._originalMappings[++i];else for(var o=n.originalColumn;n&&n.originalLine===t&&n.originalColumn==o;)s.push({line:util$1.getArg(n,"generatedLine",null),column:util$1.getArg(n,"generatedColumn",null),lastColumn:util$1.getArg(n,"lastGeneratedColumn",null)}),n=this._originalMappings[++i]}return s},sourceMapConsumer.SourceMapConsumer=SourceMapConsumer,BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype),BasicSourceMapConsumer.prototype.consumer=SourceMapConsumer,BasicSourceMapConsumer.prototype._findSourceIndex=function(r){var t,e=r;if(this.sourceRoot!=null&&(e=util$1.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==r)return t;return-1},BasicSourceMapConsumer.fromSourceMap=function(r,t){var e=Object.create(BasicSourceMapConsumer.prototype),s=e._names=ArraySet.fromArray(r._names.toArray(),!0),i=e._sources=ArraySet.fromArray(r._sources.toArray(),!0);e.sourceRoot=r._sourceRoot,e.sourcesContent=r._generateSourcesContent(e._sources.toArray(),e.sourceRoot),e.file=r._file,e._sourceMapURL=t,e._absoluteSources=e._sources.toArray().map(function(u){return util$1.computeSourceURL(e.sourceRoot,u,t)});for(var n=r._mappings.toArray().slice(),a=e.__generatedMappings=[],o=e.__originalMappings=[],h=0,l=n.length;h<l;h++){var c=n[h],p=new Mapping;p.generatedLine=c.generatedLine,p.generatedColumn=c.generatedColumn,c.source&&(p.source=i.indexOf(c.source),p.originalLine=c.originalLine,p.originalColumn=c.originalColumn,c.name&&(p.name=s.indexOf(c.name)),o.push(p)),a.push(p)}return quickSort(e.__originalMappings,util$1.compareByOriginalPositions),e},BasicSourceMapConsumer.prototype._version=3,Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),BasicSourceMapConsumer.prototype._parseMappings=function(r,t){for(var e,s,i,n,a,o=1,h=0,l=0,c=0,p=0,u=0,d=r.length,m=0,f={},g={},y=[],x=[];m<d;)if(r.charAt(m)===";")o++,m++,h=0;else if(r.charAt(m)===",")m++;else{for((e=new Mapping).generatedLine=o,n=m;n<d&&!this._charIsMappingSeparator(r,n);n++);if(i=f[s=r.slice(m,n)])m+=s.length;else{for(i=[];m<n;)base64VLQ.decode(r,m,g),a=g.value,m=g.rest,i.push(a);if(i.length===2)throw new Error("Found a source, but no line and column");if(i.length===3)throw new Error("Found a source and line, but no column");f[s]=i}e.generatedColumn=h+i[0],h=e.generatedColumn,i.length>1&&(e.source=p+i[1],p+=i[1],e.originalLine=l+i[2],l=e.originalLine,e.originalLine+=1,e.originalColumn=c+i[3],c=e.originalColumn,i.length>4&&(e.name=u+i[4],u+=i[4])),x.push(e),typeof e.originalLine=="number"&&y.push(e)}quickSort(x,util$1.compareByGeneratedPositionsDeflated),this.__generatedMappings=x,quickSort(y,util$1.compareByOriginalPositions),this.__originalMappings=y},BasicSourceMapConsumer.prototype._findMapping=function(r,t,e,s,i,n){if(r[e]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+r[e]);if(r[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+r[s]);return binarySearch.search(r,t,i,n)},BasicSourceMapConsumer.prototype.computeColumnSpans=function(){for(var r=0;r<this._generatedMappings.length;++r){var t=this._generatedMappings[r];if(r+1<this._generatedMappings.length){var e=this._generatedMappings[r+1];if(t.generatedLine===e.generatedLine){t.lastGeneratedColumn=e.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},BasicSourceMapConsumer.prototype.originalPositionFor=function(r){var t={generatedLine:util$1.getArg(r,"line"),generatedColumn:util$1.getArg(r,"column")},e=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",util$1.compareByGeneratedPositionsDeflated,util$1.getArg(r,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(e>=0){var s=this._generatedMappings[e];if(s.generatedLine===t.generatedLine){var i=util$1.getArg(s,"source",null);i!==null&&(i=this._sources.at(i),i=util$1.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var n=util$1.getArg(s,"name",null);return n!==null&&(n=this._names.at(n)),{source:i,line:util$1.getArg(s,"originalLine",null),column:util$1.getArg(s,"originalColumn",null),name:n}}}return{source:null,line:null,column:null,name:null}},BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(r){return r==null})},BasicSourceMapConsumer.prototype.sourceContentFor=function(r,t){if(!this.sourcesContent)return null;var e=this._findSourceIndex(r);if(e>=0)return this.sourcesContent[e];var s,i=r;if(this.sourceRoot!=null&&(i=util$1.relative(this.sourceRoot,i)),this.sourceRoot!=null&&(s=util$1.urlParse(this.sourceRoot))){var n=i.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!s.path||s.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(t)return null;throw new Error('"'+i+'" is not in the SourceMap.')},BasicSourceMapConsumer.prototype.generatedPositionFor=function(r){var t=util$1.getArg(r,"source");if((t=this._findSourceIndex(t))<0)return{line:null,column:null,lastColumn:null};var e={source:t,originalLine:util$1.getArg(r,"line"),originalColumn:util$1.getArg(r,"column")},s=this._findMapping(e,this._originalMappings,"originalLine","originalColumn",util$1.compareByOriginalPositions,util$1.getArg(r,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(s>=0){var i=this._originalMappings[s];if(i.source===e.source)return{line:util$1.getArg(i,"generatedLine",null),column:util$1.getArg(i,"generatedColumn",null),lastColumn:util$1.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=BasicSourceMapConsumer,IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype),IndexedSourceMapConsumer.prototype.constructor=SourceMapConsumer,IndexedSourceMapConsumer.prototype._version=3,Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){for(var r=[],t=0;t<this._sections.length;t++)for(var e=0;e<this._sections[t].consumer.sources.length;e++)r.push(this._sections[t].consumer.sources[e]);return r}}),IndexedSourceMapConsumer.prototype.originalPositionFor=function(r){var t={generatedLine:util$1.getArg(r,"line"),generatedColumn:util$1.getArg(r,"column")},e=binarySearch.search(t,this._sections,function(i,n){var a=i.generatedLine-n.generatedOffset.generatedLine;return a||i.generatedColumn-n.generatedOffset.generatedColumn}),s=this._sections[e];return s?s.consumer.originalPositionFor({line:t.generatedLine-(s.generatedOffset.generatedLine-1),column:t.generatedColumn-(s.generatedOffset.generatedLine===t.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:r.bias}):{source:null,line:null,column:null,name:null}},IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(r){return r.consumer.hasContentsOfAllSources()})},IndexedSourceMapConsumer.prototype.sourceContentFor=function(r,t){for(var e=0;e<this._sections.length;e++){var s=this._sections[e].consumer.sourceContentFor(r,!0);if(s)return s}if(t)return null;throw new Error('"'+r+'" is not in the SourceMap.')},IndexedSourceMapConsumer.prototype.generatedPositionFor=function(r){for(var t=0;t<this._sections.length;t++){var e=this._sections[t];if(e.consumer._findSourceIndex(util$1.getArg(r,"source"))!==-1){var s=e.consumer.generatedPositionFor(r);if(s)return{line:s.line+(e.generatedOffset.generatedLine-1),column:s.column+(e.generatedOffset.generatedLine===s.line?e.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},IndexedSourceMapConsumer.prototype._parseMappings=function(r,t){this.__generatedMappings=[],this.__originalMappings=[];for(var e=0;e<this._sections.length;e++)for(var s=this._sections[e],i=s.consumer._generatedMappings,n=0;n<i.length;n++){var a=i[n],o=s.consumer._sources.at(a.source);o=util$1.computeSourceURL(s.consumer.sourceRoot,o,this._sourceMapURL),this._sources.add(o),o=this._sources.indexOf(o);var h=null;a.name&&(h=s.consumer._names.at(a.name),this._names.add(h),h=this._names.indexOf(h));var l={source:o,generatedLine:a.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(s.generatedOffset.generatedLine===a.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:h};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}quickSort(this.__generatedMappings,util$1.compareByGeneratedPositionsDeflated),quickSort(this.__originalMappings,util$1.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=IndexedSourceMapConsumer;var sourceNode={},SourceMapGenerator=sourceMapGenerator.SourceMapGenerator,util=util$5,REGEX_NEWLINE=/(\r?\n)/,NEWLINE_CODE=10,isSourceNode="$$$isSourceNode$$$";function SourceNode(r,t,e,s,i){this.children=[],this.sourceContents={},this.line=r==null?null:r,this.column=t==null?null:t,this.source=e==null?null:e,this.name=i==null?null:i,this[isSourceNode]=!0,s!=null&&this.add(s)}SourceNode.fromStringWithSourceMap=function(r,t,e){var s=new SourceNode,i=r.split(REGEX_NEWLINE),n=0,a=function(){return p()+(p()||"");function p(){return n<i.length?i[n++]:void 0}},o=1,h=0,l=null;return t.eachMapping(function(p){if(l!==null){if(!(o<p.generatedLine)){var u=(d=i[n]||"").substr(0,p.generatedColumn-h);return i[n]=d.substr(p.generatedColumn-h),h=p.generatedColumn,c(l,u),void(l=p)}c(l,a()),o++,h=0}for(;o<p.generatedLine;)s.add(a()),o++;if(h<p.generatedColumn){var d=i[n]||"";s.add(d.substr(0,p.generatedColumn)),i[n]=d.substr(p.generatedColumn),h=p.generatedColumn}l=p},this),n<i.length&&(l&&c(l,a()),s.add(i.splice(n).join(""))),t.sources.forEach(function(p){var u=t.sourceContentFor(p);u!=null&&(e!=null&&(p=util.join(e,p)),s.setSourceContent(p,u))}),s;function c(p,u){if(p===null||p.source===void 0)s.add(u);else{var d=e?util.join(e,p.source):p.source;s.add(new SourceNode(p.originalLine,p.originalColumn,d,u,p.name))}}},SourceNode.prototype.add=function(r){if(Array.isArray(r))r.forEach(function(t){this.add(t)},this);else{if(!r[isSourceNode]&&typeof r!="string")throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+r);r&&this.children.push(r)}return this},SourceNode.prototype.prepend=function(r){if(Array.isArray(r))for(var t=r.length-1;t>=0;t--)this.prepend(r[t]);else{if(!r[isSourceNode]&&typeof r!="string")throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+r);this.children.unshift(r)}return this},SourceNode.prototype.walk=function(r){for(var t,e=0,s=this.children.length;e<s;e++)(t=this.children[e])[isSourceNode]?t.walk(r):t!==""&&r(t,{source:this.source,line:this.line,column:this.column,name:this.name})},SourceNode.prototype.join=function(r){var t,e,s=this.children.length;if(s>0){for(t=[],e=0;e<s-1;e++)t.push(this.children[e]),t.push(r);t.push(this.children[e]),this.children=t}return this},SourceNode.prototype.replaceRight=function(r,t){var e=this.children[this.children.length-1];return e[isSourceNode]?e.replaceRight(r,t):typeof e=="string"?this.children[this.children.length-1]=e.replace(r,t):this.children.push("".replace(r,t)),this},SourceNode.prototype.setSourceContent=function(r,t){this.sourceContents[util.toSetString(r)]=t},SourceNode.prototype.walkSourceContents=function(r){for(var t=0,e=this.children.length;t<e;t++)this.children[t][isSourceNode]&&this.children[t].walkSourceContents(r);var s=Object.keys(this.sourceContents);for(t=0,e=s.length;t<e;t++)r(util.fromSetString(s[t]),this.sourceContents[s[t]])},SourceNode.prototype.toString=function(){var r="";return this.walk(function(t){r+=t}),r},SourceNode.prototype.toStringWithSourceMap=function(r){var t={code:"",line:1,column:0},e=new SourceMapGenerator(r),s=!1,i=null,n=null,a=null,o=null;return this.walk(function(h,l){t.code+=h,l.source!==null&&l.line!==null&&l.column!==null?(i===l.source&&n===l.line&&a===l.column&&o===l.name||e.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:t.line,column:t.column},name:l.name}),i=l.source,n=l.line,a=l.column,o=l.name,s=!0):s&&(e.addMapping({generated:{line:t.line,column:t.column}}),i=null,s=!1);for(var c=0,p=h.length;c<p;c++)h.charCodeAt(c)===NEWLINE_CODE?(t.line++,t.column=0,c+1===p?(i=null,s=!1):s&&e.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:t.line,column:t.column},name:l.name})):t.column++}),this.walkSourceContents(function(h,l){e.setSourceContent(h,l)}),{code:t.code,map:e}},sourceNode.SourceNode=SourceNode,sourceMap.SourceMapGenerator=sourceMapGenerator.SourceMapGenerator,sourceMap.SourceMapConsumer=sourceMapConsumer.SourceMapConsumer,sourceMap.SourceNode=sourceNode.SourceNode;let{dirname:dirname$1,resolve:resolve$1,relative,sep}=require$$1,{pathToFileURL:pathToFileURL$1}=require$$1,mozilla$1=sourceMap,MapGenerator$1=class{constructor(r,t,e){this.stringify=r,this.mapOpts=e.map||{},this.root=t,this.opts=e}isMap(){return this.opts.map!==void 0?!!this.opts.map:this.previous().length>0}previous(){return this.previousMaps||(this.previousMaps=[],this.root.walk(r=>{if(r.source&&r.source.input.map){let t=r.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}})),this.previousMaps}isInline(){if(this.mapOpts.inline!==void 0)return this.mapOpts.inline;let r=this.mapOpts.annotation;return(r===void 0||r===!0)&&(!this.previous().length||this.previous().some(t=>t.inline))}isSourcesContent(){return this.mapOpts.sourcesContent!==void 0?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(r=>r.withContent())}clearAnnotation(){if(this.mapOpts.annotation===!1)return;let r;for(let t=this.root.nodes.length-1;t>=0;t--)r=this.root.nodes[t],r.type==="comment"&&r.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}setSourcesContent(){let r={};this.root.walk(t=>{if(t.source){let e=t.source.input.from;e&&!r[e]&&(r[e]=!0,this.map.setSourceContent(this.toUrl(this.path(e)),t.source.input.css))}})}applyPrevMaps(){for(let r of this.previous()){let t,e=this.toUrl(this.path(r.file)),s=r.root||dirname$1(r.file);this.mapOpts.sourcesContent===!1?(t=new mozilla$1.SourceMapConsumer(r.text),t.sourcesContent&&(t.sourcesContent=t.sourcesContent.map(()=>null))):t=r.consumer(),this.map.applySourceMap(t,e,this.toUrl(this.path(s)))}}isAnnotation(){return!!this.isInline()||(this.mapOpts.annotation!==void 0?this.mapOpts.annotation:!this.previous().length||this.previous().some(r=>r.annotation))}toBase64(r){return Buffer?Buffer.from(r).toString("base64"):window.btoa(unescape(encodeURIComponent(r)))}addAnnotation(){let r;r=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+r+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){return this.generateString(),this.isSourcesContent()&&this.setSourcesContent(),this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(r){if(r.indexOf("<")===0||/^\w+:\/\//.test(r)||this.mapOpts.absolute)return r;let t=this.opts.to?dirname$1(this.opts.to):".";return typeof this.mapOpts.annotation=="string"&&(t=dirname$1(resolve$1(t,this.mapOpts.annotation))),r=relative(t,r)}toUrl(r){return sep==="\\"&&(r=r.replace(/\\/g,"/")),encodeURI(r).replace(/[#?]/g,encodeURIComponent)}sourcePath(r){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.mapOpts.absolute?pathToFileURL$1(r.source.input.from).toString():this.toUrl(this.path(r.source.input.from))}generateString(){this.css="",this.map=new mozilla$1.SourceMapGenerator({file:this.outputFile()});let r,t,e=1,s=1;this.stringify(this.root,(i,n,a)=>{if(this.css+=i,n&&a!=="end"&&(n.source&&n.source.start?this.map.addMapping({source:this.sourcePath(n),generated:{line:e,column:s-1},original:{line:n.source.start.line,column:n.source.start.column-1}}):this.map.addMapping({source:"<no source>",original:{line:1,column:0},generated:{line:e,column:s-1}})),r=i.match(/\n/g),r?(e+=r.length,t=i.lastIndexOf(`
`),s=i.length-t):s+=i.length,n&&a!=="start"){let o=n.parent||{raws:{}};(n.type!=="decl"||n!==o.last||o.raws.semicolon)&&(n.source&&n.source.end?this.map.addMapping({source:this.sourcePath(n),generated:{line:e,column:s-2},original:{line:n.source.end.line,column:n.source.end.column-1}}):this.map.addMapping({source:"<no source>",original:{line:1,column:0},generated:{line:e,column:s-1}}))}})}generate(){if(this.clearAnnotation(),this.isMap())return this.generateMap();let r="";return this.stringify(this.root,t=>{r+=t}),[r]}};var mapGenerator=MapGenerator$1;let Warning$2=class{constructor(r,t={}){if(this.type="warning",this.text=r,t.node&&t.node.source){let e=t.node.positionBy(t);this.line=e.line,this.column=e.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var warning=Warning$2;Warning$2.default=Warning$2;let Warning$1=warning,Result$2=class{constructor(r,t,e){this.processor=r,this.messages=[],this.root=t,this.opts=e,this.css=void 0,this.map=void 0}toString(){return this.css}warn(r,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let e=new Warning$1(r,t);return this.messages.push(e),e}warnings(){return this.messages.filter(r=>r.type==="warning")}get content(){return this.css}};var result=Result$2;Result$2.default=Result$2;let Node$3=node,Comment$3=class extends Node$3{constructor(r){super(r),this.type="comment"}};var comment=Comment$3;Comment$3.default=Comment$3;let Declaration$2=declaration,{isClean:isClean$1}=symbols,Comment$2=comment,Node$2=node,parse$4,Rule$3,AtRule$3;function cleanSource(r){return r.map(t=>(t.nodes&&(t.nodes=cleanSource(t.nodes)),delete t.source,t))}function markDirtyUp(r){if(r[isClean$1]=!1,r.proxyOf.nodes)for(let t of r.proxyOf.nodes)markDirtyUp(t)}function rebuild(r){r.type==="atrule"?Object.setPrototypeOf(r,AtRule$3.prototype):r.type==="rule"?Object.setPrototypeOf(r,Rule$3.prototype):r.type==="decl"?Object.setPrototypeOf(r,Declaration$2.prototype):r.type==="comment"&&Object.setPrototypeOf(r,Comment$2.prototype),r.nodes&&r.nodes.forEach(t=>{rebuild(t)})}let Container$5=class extends Node$2{push(r){return r.parent=this,this.proxyOf.nodes.push(r),this}each(r){if(!this.proxyOf.nodes)return;let t,e,s=this.getIterator();for(;this.indexes[s]<this.proxyOf.nodes.length&&(t=this.indexes[s],e=r(this.proxyOf.nodes[t],t),e!==!1);)this.indexes[s]+=1;return delete this.indexes[s],e}walk(r){return this.each((t,e)=>{let s;try{s=r(t,e)}catch(i){throw t.addToError(i)}return s!==!1&&t.walk&&(s=t.walk(r)),s})}walkDecls(r,t){return t?r instanceof RegExp?this.walk((e,s)=>{if(e.type==="decl"&&r.test(e.prop))return t(e,s)}):this.walk((e,s)=>{if(e.type==="decl"&&e.prop===r)return t(e,s)}):(t=r,this.walk((e,s)=>{if(e.type==="decl")return t(e,s)}))}walkRules(r,t){return t?r instanceof RegExp?this.walk((e,s)=>{if(e.type==="rule"&&r.test(e.selector))return t(e,s)}):this.walk((e,s)=>{if(e.type==="rule"&&e.selector===r)return t(e,s)}):(t=r,this.walk((e,s)=>{if(e.type==="rule")return t(e,s)}))}walkAtRules(r,t){return t?r instanceof RegExp?this.walk((e,s)=>{if(e.type==="atrule"&&r.test(e.name))return t(e,s)}):this.walk((e,s)=>{if(e.type==="atrule"&&e.name===r)return t(e,s)}):(t=r,this.walk((e,s)=>{if(e.type==="atrule")return t(e,s)}))}walkComments(r){return this.walk((t,e)=>{if(t.type==="comment")return r(t,e)})}append(...r){for(let t of r){let e=this.normalize(t,this.last);for(let s of e)this.proxyOf.nodes.push(s)}return this.markDirty(),this}prepend(...r){r=r.reverse();for(let t of r){let e=this.normalize(t,this.first,"prepend").reverse();for(let s of e)this.proxyOf.nodes.unshift(s);for(let s in this.indexes)this.indexes[s]=this.indexes[s]+e.length}return this.markDirty(),this}cleanRaws(r){if(super.cleanRaws(r),this.nodes)for(let t of this.nodes)t.cleanRaws(r)}insertBefore(r,t){let e,s=(r=this.index(r))===0&&"prepend",i=this.normalize(t,this.proxyOf.nodes[r],s).reverse();for(let n of i)this.proxyOf.nodes.splice(r,0,n);for(let n in this.indexes)e=this.indexes[n],r<=e&&(this.indexes[n]=e+i.length);return this.markDirty(),this}insertAfter(r,t){r=this.index(r);let e,s=this.normalize(t,this.proxyOf.nodes[r]).reverse();for(let i of s)this.proxyOf.nodes.splice(r+1,0,i);for(let i in this.indexes)e=this.indexes[i],r<e&&(this.indexes[i]=e+s.length);return this.markDirty(),this}removeChild(r){let t;r=this.index(r),this.proxyOf.nodes[r].parent=void 0,this.proxyOf.nodes.splice(r,1);for(let e in this.indexes)t=this.indexes[e],t>=r&&(this.indexes[e]=t-1);return this.markDirty(),this}removeAll(){for(let r of this.proxyOf.nodes)r.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(r,t,e){return e||(e=t,t={}),this.walkDecls(s=>{t.props&&!t.props.includes(s.prop)||t.fast&&!s.value.includes(t.fast)||(s.value=s.value.replace(r,e))}),this.markDirty(),this}every(r){return this.nodes.every(r)}some(r){return this.nodes.some(r)}index(r){return typeof r=="number"?r:(r.proxyOf&&(r=r.proxyOf),this.proxyOf.nodes.indexOf(r))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(r,t){if(typeof r=="string")r=cleanSource(parse$4(r).nodes);else if(Array.isArray(r)){r=r.slice(0);for(let e of r)e.parent&&e.parent.removeChild(e,"ignore")}else if(r.type==="root"){r=r.nodes.slice(0);for(let e of r)e.parent&&e.parent.removeChild(e,"ignore")}else if(r.type)r=[r];else if(r.prop){if(r.value===void 0)throw new Error("Value field is missed in node creation");typeof r.value!="string"&&(r.value=String(r.value)),r=[new Declaration$2(r)]}else if(r.selector)r=[new Rule$3(r)];else if(r.name)r=[new AtRule$3(r)];else{if(!r.text)throw new Error("Unknown node type in node creation");r=[new Comment$2(r)]}return r.map(e=>(typeof e.markDirty!="function"&&rebuild(e),e.parent&&e.parent.removeChild(e),e[isClean$1]&&markDirtyUp(e),e.raws.before===void 0&&t&&t.raws.before!==void 0&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=this,e))}getProxyProcessor(){return{set:(r,t,e)=>(r[t]===e||(r[t]=e,t!=="name"&&t!=="params"&&t!=="selector"||r.markDirty()),!0),get:(r,t)=>t==="proxyOf"?r:r[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...e)=>r[t](...e.map(s=>typeof s=="function"?(i,n)=>s(i.toProxy(),n):s)):t==="every"||t==="some"?e=>r[t]((s,...i)=>e(s.toProxy(),...i)):t==="root"?()=>r.root().toProxy():t==="nodes"?r.nodes.map(e=>e.toProxy()):t==="first"||t==="last"?r[t].toProxy():r[t]:r[t]}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let r=this.lastEach;return this.indexes[r]=0,r}};Container$5.registerParse=r=>{parse$4=r},Container$5.registerRule=r=>{Rule$3=r},Container$5.registerAtRule=r=>{AtRule$3=r};var container=Container$5;Container$5.default=Container$5;const SINGLE_QUOTE=39,DOUBLE_QUOTE=34,BACKSLASH=92,SLASH=47,NEWLINE=10,SPACE=32,FEED=12,TAB=9,CR=13,OPEN_SQUARE=91,CLOSE_SQUARE=93,OPEN_PARENTHESES=40,CLOSE_PARENTHESES=41,OPEN_CURLY=123,CLOSE_CURLY=125,SEMICOLON=59,ASTERISK=42,COLON=58,AT=64,RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\n"'(/\\]/,RE_HEX_ESCAPE=/[\da-f]/i;var tokenize=function(r,t={}){let e,s,i,n,a,o,h,l,c,p,u=r.css.valueOf(),d=t.ignoreErrors,m=u.length,f=0,g=[],y=[];function x(E){throw r.error("Unclosed "+E,f)}return{back:function(E){y.push(E)},nextToken:function(E){if(y.length)return y.pop();if(f>=m)return;let P=!!E&&E.ignoreUnclosed;switch(e=u.charCodeAt(f),e){case NEWLINE:case SPACE:case TAB:case CR:case FEED:s=f;do s+=1,e=u.charCodeAt(s);while(e===SPACE||e===NEWLINE||e===TAB||e===CR||e===FEED);p=["space",u.slice(f,s)],f=s-1;break;case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{let T=String.fromCharCode(e);p=[T,T,f];break}case OPEN_PARENTHESES:if(l=g.length?g.pop()[1]:"",c=u.charCodeAt(f+1),l==="url"&&c!==SINGLE_QUOTE&&c!==DOUBLE_QUOTE&&c!==SPACE&&c!==NEWLINE&&c!==TAB&&c!==FEED&&c!==CR){s=f;do{if(o=!1,s=u.indexOf(")",s+1),s===-1){if(d||P){s=f;break}x("bracket")}for(h=s;u.charCodeAt(h-1)===BACKSLASH;)h-=1,o=!o}while(o);p=["brackets",u.slice(f,s+1),f,s],f=s}else s=u.indexOf(")",f+1),n=u.slice(f,s+1),s===-1||RE_BAD_BRACKET.test(n)?p=["(","(",f]:(p=["brackets",n,f,s],f=s);break;case SINGLE_QUOTE:case DOUBLE_QUOTE:i=e===SINGLE_QUOTE?"'":'"',s=f;do{if(o=!1,s=u.indexOf(i,s+1),s===-1){if(d||P){s=f+1;break}x("string")}for(h=s;u.charCodeAt(h-1)===BACKSLASH;)h-=1,o=!o}while(o);p=["string",u.slice(f,s+1),f,s],f=s;break;case AT:RE_AT_END.lastIndex=f+1,RE_AT_END.test(u),s=RE_AT_END.lastIndex===0?u.length-1:RE_AT_END.lastIndex-2,p=["at-word",u.slice(f,s+1),f,s],f=s;break;case BACKSLASH:for(s=f,a=!0;u.charCodeAt(s+1)===BACKSLASH;)s+=1,a=!a;if(e=u.charCodeAt(s+1),a&&e!==SLASH&&e!==SPACE&&e!==NEWLINE&&e!==TAB&&e!==CR&&e!==FEED&&(s+=1,RE_HEX_ESCAPE.test(u.charAt(s)))){for(;RE_HEX_ESCAPE.test(u.charAt(s+1));)s+=1;u.charCodeAt(s+1)===SPACE&&(s+=1)}p=["word",u.slice(f,s+1),f,s],f=s;break;default:e===SLASH&&u.charCodeAt(f+1)===ASTERISK?(s=u.indexOf("*/",f+2)+1,s===0&&(d||P?s=u.length:x("comment")),p=["comment",u.slice(f,s+1),f,s],f=s):(RE_WORD_END.lastIndex=f+1,RE_WORD_END.test(u),s=RE_WORD_END.lastIndex===0?u.length-1:RE_WORD_END.lastIndex-2,p=["word",u.slice(f,s+1),f,s],g.push(p),f=s)}return f++,p},endOfFile:function(){return y.length===0&&f>=m},position:function(){return f}}};let Container$4=container,AtRule$2=class extends Container$4{constructor(r){super(r),this.type="atrule"}append(...r){return this.proxyOf.nodes||(this.nodes=[]),super.append(...r)}prepend(...r){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...r)}};var atRule=AtRule$2;AtRule$2.default=AtRule$2,Container$4.registerAtRule(AtRule$2);let Container$3=container,LazyResult$3,Processor$2,Root$4=class extends Container$3{constructor(r){super(r),this.type="root",this.nodes||(this.nodes=[])}removeChild(r,t){let e=this.index(r);return!t&&e===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[e].raws.before),super.removeChild(r)}normalize(r,t,e){let s=super.normalize(r);if(t){if(e==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let i of s)i.raws.before=t.raws.before}return s}toResult(r={}){return new LazyResult$3(new Processor$2,this,r).stringify()}};Root$4.registerLazyResult=r=>{LazyResult$3=r},Root$4.registerProcessor=r=>{Processor$2=r};var root=Root$4;Root$4.default=Root$4;let list$2={split(r,t,e){let s=[],i="",n=!1,a=0,o=!1,h=!1;for(let l of r)o?h?h=!1:l==="\\"?h=!0:l===o&&(o=!1):l==='"'||l==="'"?o=l:l==="("?a+=1:l===")"?a>0&&(a-=1):a===0&&t.includes(l)&&(n=!0),n?(i!==""&&s.push(i.trim()),i="",n=!1):i+=l;return(e||i!=="")&&s.push(i.trim()),s},space:r=>list$2.split(r,[" ",`
`,"	"]),comma:r=>list$2.split(r,[","],!0)};var list_1=list$2;list$2.default=list$2;let Container$2=container,list$1=list_1,Rule$2=class extends Container$2{constructor(r){super(r),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return list$1.comma(this.selector)}set selectors(r){let t=this.selector?this.selector.match(/,\s*/):null,e=t?t[0]:","+this.raw("between","beforeOpen");this.selector=r.join(e)}};var rule=Rule$2;Rule$2.default=Rule$2,Container$2.registerRule(Rule$2);let Declaration$1=declaration,tokenizer=tokenize,Comment$1=comment,AtRule$1=atRule,Root$3=root,Rule$1=rule,Parser$3=class{constructor(r){this.input=r,this.root=new Root$3,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:r,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=tokenizer(this.input)}parse(){let r;for(;!this.tokenizer.endOfFile();)switch(r=this.tokenizer.nextToken(),r[0]){case"space":this.spaces+=r[1];break;case";":this.freeSemicolon(r);break;case"}":this.end(r);break;case"comment":this.comment(r);break;case"at-word":this.atrule(r);break;case"{":this.emptyRule(r);break;default:this.other(r)}this.endFile()}comment(r){let t=new Comment$1;this.init(t,r[2]),t.source.end=this.getPosition(r[3]||r[2]);let e=r[1].slice(2,-2);if(/^\s*$/.test(e))t.text="",t.raws.left=e,t.raws.right="";else{let s=e.match(/^(\s*)([^]*\S)(\s*)$/);t.text=s[2],t.raws.left=s[1],t.raws.right=s[3]}}emptyRule(r){let t=new Rule$1;this.init(t,r[2]),t.selector="",t.raws.between="",this.current=t}other(r){let t=!1,e=null,s=!1,i=null,n=[],a=r[1].startsWith("--"),o=[],h=r;for(;h;){if(e=h[0],o.push(h),e==="("||e==="[")i||(i=h),n.push(e==="("?")":"]");else if(a&&s&&e==="{")i||(i=h),n.push("}");else if(n.length===0){if(e===";"){if(s)return void this.decl(o,a);break}if(e==="{")return void this.rule(o);if(e==="}"){this.tokenizer.back(o.pop()),t=!0;break}e===":"&&(s=!0)}else e===n[n.length-1]&&(n.pop(),n.length===0&&(i=null));h=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),n.length>0&&this.unclosedBracket(i),t&&s){for(;o.length&&(h=o[o.length-1][0],h==="space"||h==="comment");)this.tokenizer.back(o.pop());this.decl(o,a)}else this.unknownWord(o)}rule(r){r.pop();let t=new Rule$1;this.init(t,r[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(r),this.raw(t,"selector",r),this.current=t}decl(r,t){let e=new Declaration$1;this.init(e,r[0][2]);let s,i=r[r.length-1];for(i[0]===";"&&(this.semicolon=!0,r.pop()),e.source.end=this.getPosition(i[3]||i[2]);r[0][0]!=="word";)r.length===1&&this.unknownWord(r),e.raws.before+=r.shift()[1];for(e.source.start=this.getPosition(r[0][2]),e.prop="";r.length;){let o=r[0][0];if(o===":"||o==="space"||o==="comment")break;e.prop+=r.shift()[1]}for(e.raws.between="";r.length;){if(s=r.shift(),s[0]===":"){e.raws.between+=s[1];break}s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),e.raws.between+=s[1]}e.prop[0]!=="_"&&e.prop[0]!=="*"||(e.raws.before+=e.prop[0],e.prop=e.prop.slice(1));let n=this.spacesAndCommentsFromStart(r);this.precheckMissedSemicolon(r);for(let o=r.length-1;o>=0;o--){if(s=r[o],s[1].toLowerCase()==="!important"){e.important=!0;let h=this.stringFrom(r,o);h=this.spacesFromEnd(r)+h,h!==" !important"&&(e.raws.important=h);break}if(s[1].toLowerCase()==="important"){let h=r.slice(0),l="";for(let c=o;c>0;c--){let p=h[c][0];if(l.trim().indexOf("!")===0&&p!=="space")break;l=h.pop()[1]+l}l.trim().indexOf("!")===0&&(e.important=!0,e.raws.important=l,r=h)}if(s[0]!=="space"&&s[0]!=="comment")break}let a=r.some(o=>o[0]!=="space"&&o[0]!=="comment");this.raw(e,"value",r),a?e.raws.between+=n:e.value=n+e.value,e.value.includes(":")&&!t&&this.checkMissedSemicolon(r)}atrule(r){let t,e,s,i=new AtRule$1;i.name=r[1].slice(1),i.name===""&&this.unnamedAtrule(i,r),this.init(i,r[2]);let n=!1,a=!1,o=[],h=[];for(;!this.tokenizer.endOfFile();){if(t=(r=this.tokenizer.nextToken())[0],t==="("||t==="["?h.push(t==="("?")":"]"):t==="{"&&h.length>0?h.push("}"):t===h[h.length-1]&&h.pop(),h.length===0){if(t===";"){i.source.end=this.getPosition(r[2]),this.semicolon=!0;break}if(t==="{"){a=!0;break}if(t==="}"){if(o.length>0){for(s=o.length-1,e=o[s];e&&e[0]==="space";)e=o[--s];e&&(i.source.end=this.getPosition(e[3]||e[2]))}this.end(r);break}o.push(r)}else o.push(r);if(this.tokenizer.endOfFile()){n=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(o),o.length?(i.raws.afterName=this.spacesAndCommentsFromStart(o),this.raw(i,"params",o),n&&(r=o[o.length-1],i.source.end=this.getPosition(r[3]||r[2]),this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),a&&(i.nodes=[],this.current=i)}end(r){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(r[2]),this.current=this.current.parent):this.unexpectedClose(r)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(r){if(this.spaces+=r[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(r){let t=this.input.fromOffset(r);return{offset:r,line:t.line,column:t.col}}init(r,t){this.current.push(r),r.source={start:this.getPosition(t),input:this.input},r.raws.before=this.spaces,this.spaces="",r.type!=="comment"&&(this.semicolon=!1)}raw(r,t,e){let s,i,n,a,o=e.length,h="",l=!0,c=/^([#.|])?(\w)+/i;for(let p=0;p<o;p+=1)s=e[p],i=s[0],i!=="comment"||r.type!=="rule"?i==="comment"||i==="space"&&p===o-1?l=!1:h+=s[1]:(a=e[p-1],n=e[p+1],a[0]!=="space"&&n[0]!=="space"&&c.test(a[1])&&c.test(n[1])?h+=s[1]:l=!1);if(!l){let p=e.reduce((u,d)=>u+d[1],"");r.raws[t]={value:h,raw:p}}r[t]=h}spacesAndCommentsFromEnd(r){let t,e="";for(;r.length&&(t=r[r.length-1][0],t==="space"||t==="comment");)e=r.pop()[1]+e;return e}spacesAndCommentsFromStart(r){let t,e="";for(;r.length&&(t=r[0][0],t==="space"||t==="comment");)e+=r.shift()[1];return e}spacesFromEnd(r){let t,e="";for(;r.length&&(t=r[r.length-1][0],t==="space");)e=r.pop()[1]+e;return e}stringFrom(r,t){let e="";for(let s=t;s<r.length;s++)e+=r[s][1];return r.splice(t,r.length-t),e}colon(r){let t,e,s,i=0;for(let[n,a]of r.entries()){if(t=a,e=t[0],e==="("&&(i+=1),e===")"&&(i-=1),i===0&&e===":"){if(s){if(s[0]==="word"&&s[1]==="progid")continue;return n}this.doubleColon(t)}s=t}return!1}unclosedBracket(r){throw this.input.error("Unclosed bracket",r[2])}unknownWord(r){throw this.input.error("Unknown word",r[0][2])}unexpectedClose(r){throw this.input.error("Unexpected }",r[2])}unclosedBlock(){let r=this.current.source.start;throw this.input.error("Unclosed block",r.line,r.column)}doubleColon(r){throw this.input.error("Double colon",r[2])}unnamedAtrule(r,t){throw this.input.error("At-rule without name",t[2])}precheckMissedSemicolon(){}checkMissedSemicolon(r){let t=this.colon(r);if(t===!1)return;let e,s=0;for(let i=t-1;i>=0&&(e=r[i],e[0]==="space"||(s+=1,s!==2));i--);throw this.input.error("Missed semicolon",e[2])}};var parser=Parser$3;let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet=(r,t=21)=>(e=t)=>{let s="",i=e;for(;i--;)s+=r[Math.random()*r.length|0];return s},nanoid$1=(r=21)=>{let t="",e=r;for(;e--;)t+=urlAlphabet[64*Math.random()|0];return t};var nonSecure={nanoid:nanoid$1,customAlphabet},vfileLocation$1=factory;function factory(r){for(var t=String(r),e=[],s=/\r?\n|\r/g;s.exec(t);)e.push(s.lastIndex);return e.push(t.length+1),{toPoint:i,toPosition:i,toOffset:function(n){var a,o=n&&n.line,h=n&&n.column;return isNaN(o)||isNaN(h)||!(o-1 in e)||(a=(e[o-2]||0)+h-1||0),a>-1&&a<e[e.length-1]?a:-1}};function i(n){var a=-1;if(n>-1&&n<e[e.length-1]){for(;++a<e.length;)if(e[a]>n)return{line:a+1,column:n-(e[a-1]||0)+1,offset:n}}return{}}}let{existsSync,readFileSync}=require$$1,{dirname,join}=require$$1,mozilla=sourceMap;function fromBase64(r){return Buffer?Buffer.from(r,"base64").toString():window.atob(r)}let PreviousMap$1=class{constructor(r,t){if(t.map===!1)return;this.loadAnnotation(r),this.inline=this.startWith(this.annotation,"data:");let e=t.map?t.map.prev:void 0,s=this.loadMap(t.from,e);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=dirname(this.mapFile)),s&&(this.text=s)}consumer(){return this.consumerCache||(this.consumerCache=new mozilla.SourceMapConsumer(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(r,t){return!!r&&r.substr(0,t.length)===t}getAnnotationURL(r){return r.match(/\/\*\s*# sourceMappingURL=(.*)\s*\*\//)[1].trim()}loadAnnotation(r){let t=r.match(/\/\*\s*# sourceMappingURL=.*\s*\*\//gm);if(t&&t.length>0){let e=t[t.length-1];e&&(this.annotation=this.getAnnotationURL(e))}}decodeInline(r){if(/^data:application\/json;charset=utf-?8,/.test(r)||/^data:application\/json,/.test(r))return decodeURIComponent(r.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(r)||/^data:application\/json;base64,/.test(r))return fromBase64(r.substr(RegExp.lastMatch.length));let t=r.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+t)}loadFile(r){if(this.root=dirname(r),existsSync(r))return this.mapFile=r,readFileSync(r,"utf-8").toString().trim()}loadMap(r,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t!="function"){if(t instanceof mozilla.SourceMapConsumer)return mozilla.SourceMapGenerator.fromSourceMap(t).toString();if(t instanceof mozilla.SourceMapGenerator)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let e=t(r);if(e){let s=this.loadFile(e);if(!s)throw new Error("Unable to load previous source map: "+e.toString());return s}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let e=this.annotation;return r&&(e=join(dirname(r),e)),this.loadFile(e)}}}isMap(r){return typeof r=="object"&&(typeof r.mappings=="string"||typeof r._mappings=="string"||Array.isArray(r.sections))}};var previousMap=PreviousMap$1;PreviousMap$1.default=PreviousMap$1;let{fileURLToPath,pathToFileURL}=require$$1,{resolve,isAbsolute}=require$$1,{nanoid}=nonSecure,vfileLocation=vfileLocation$1,terminalHighlight=require$$1,CssSyntaxError$1=cssSyntaxError,PreviousMap=previousMap,Input$2=class{constructor(r,t={}){if(r==null||typeof r=="object"&&!r.toString)throw new Error(`PostCSS received ${r} instead of CSS string`);this.css=r.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(/^\w+:\/\//.test(t.from)||isAbsolute(t.from)?this.file=t.from:this.file=resolve(t.from));let e=new PreviousMap(this.css,t);if(e.text){this.map=e;let s=e.consumer().file;!this.file&&s&&(this.file=this.mapResolve(s))}this.file||(this.id="<input css "+nanoid(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(r){let t=vfileLocation(this.css);return this.fromOffset=e=>{let s=t.toPoint(e);return{line:s.line,col:s.column}},this.fromOffset(r)}error(r,t,e,s={}){let i;if(!e){let a=this.fromOffset(t);t=a.line,e=a.col}let n=this.origin(t,e);return i=n?new CssSyntaxError$1(r,n.line,n.column,n.source,n.file,s.plugin):new CssSyntaxError$1(r,t,e,this.css,this.file,s.plugin),i.input={line:t,column:e,source:this.css},this.file&&(i.input.url=pathToFileURL(this.file).toString(),i.input.file=this.file),i}origin(r,t){if(!this.map)return!1;let e,s=this.map.consumer(),i=s.originalPositionFor({line:r,column:t});if(!i.source)return!1;e=isAbsolute(i.source)?pathToFileURL(i.source):new URL(i.source,this.map.consumer().sourceRoot||pathToFileURL(this.map.mapFile));let n={url:e.toString(),line:i.line,column:i.column};e.protocol==="file:"&&(n.file=fileURLToPath(e));let a=s.sourceContentFor(i.source);return a&&(n.source=a),n}mapResolve(r){return/^\w+:\/\//.test(r)?r:resolve(this.map.consumer().sourceRoot||this.map.root||".",r)}get from(){return this.file||this.id}};var input=Input$2;Input$2.default=Input$2,terminalHighlight&&terminalHighlight.registerInput&&terminalHighlight.registerInput(Input$2);let Container$1=container,Parser$2=parser,Input$1=input;function parse$3(r,t){let e=new Input$1(r,t),s=new Parser$2(e);try{s.parse()}catch(i){throw i}return s.root}var parse_1$1=parse$3;parse$3.default=parse$3,Container$1.registerParse(parse$3);let MapGenerator=mapGenerator,{isClean}=symbols,stringify$1=stringify_1,Result$1=result,parse$2=parse_1$1,Root$2=root;const TYPE_TO_CLASS_NAME={root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},CHILDREN=0;function isPromise(r){return typeof r=="object"&&typeof r.then=="function"}function getEvents(r){let t=!1,e=TYPE_TO_CLASS_NAME[r.type];return r.type==="decl"?t=r.prop.toLowerCase():r.type==="atrule"&&(t=r.name.toLowerCase()),t&&r.append?[e,e+"-"+t,CHILDREN,e+"Exit",e+"Exit-"+t]:t?[e,e+"-"+t,e+"Exit",e+"Exit-"+t]:r.append?[e,CHILDREN,e+"Exit"]:[e,e+"Exit"]}function toStack(r){let t;return t=r.type==="root"?["Root",CHILDREN,"RootExit"]:getEvents(r),{node:r,events:t,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function cleanMarks(r){return r[isClean]=!1,r.nodes&&r.nodes.forEach(t=>cleanMarks(t)),r}let postcss$2={},LazyResult$2=class I{constructor(t,e,s){let i;if(this.stringified=!1,this.processed=!1,typeof e=="object"&&e!==null&&e.type==="root")i=cleanMarks(e);else if(e instanceof I||e instanceof Result$1)i=cleanMarks(e.root),e.map&&(s.map===void 0&&(s.map={}),s.map.inline||(s.map.inline=!1),s.map.prev=e.map);else{let n=parse$2;s.syntax&&(n=s.syntax.parse),s.parser&&(n=s.parser),n.parse&&(n=n.parse);try{i=n(e,s)}catch(a){this.processed=!0,this.error=a}}this.result=new Result$1(t,i,s),this.helpers=b(S({},postcss$2),{result:this.result,postcss:postcss$2}),this.plugins=this.processor.plugins.map(n=>typeof n=="object"&&n.prepare?S(S({},n),n.prepare(this.result)):n)}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(t,e){return this.async().then(t,e)}catch(t){return this.async().catch(t)}finally(t){return this.async().then(t,t)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let t of this.plugins)if(isPromise(this.runOnRoot(t)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[isClean];)t[isClean]=!0,this.walkSync(t);this.listeners.OnceExit&&this.visitSync(this.listeners.OnceExit,t)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let t=this.result.opts,e=stringify$1;t.syntax&&(e=t.syntax.stringify),t.stringifier&&(e=t.stringifier),e.stringify&&(e=e.stringify);let s=new MapGenerator(e,this.result.root,this.result.opts).generate();return this.result.css=s[0],this.result.map=s[1],this.result}walkSync(t){t[isClean]=!0;let e=getEvents(t);for(let s of e)if(s===CHILDREN)t.nodes&&t.each(i=>{i[isClean]||this.walkSync(i)});else{let i=this.listeners[s];if(i&&this.visitSync(i,t.toProxy()))return}}visitSync(t,e){for(let[s,i]of t){let n;this.result.lastPlugin=s;try{n=i(e,this.helpers)}catch(a){throw this.handleError(a,e.proxyOf)}if(e.type!=="root"&&!e.parent)return!0;if(isPromise(n))throw this.getAsyncError()}}runOnRoot(t){this.result.lastPlugin=t;try{if(typeof t=="object"&&t.Once)return t.Once(this.result.root,this.helpers);if(typeof t=="function")return t(this.result.root,this.result)}catch(e){throw this.handleError(e)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(t,e){let s=this.result.lastPlugin;try{e&&e.addToError(t),this.error=t,t.name!=="CssSyntaxError"||t.plugin?s.postcssVersion:(t.plugin=s.postcssPlugin,t.setMessage())}catch(i){}return t}runAsync(){return w(this,null,function*(){this.plugin=0;for(let t=0;t<this.plugins.length;t++){let e=this.plugins[t],s=this.runOnRoot(e);if(isPromise(s))try{yield s}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[isClean];){t[isClean]=!0;let e=[toStack(t)];for(;e.length>0;){let s=this.visitTick(e);if(isPromise(s))try{yield s}catch(i){let n=e[e.length-1].node;throw this.handleError(i,n)}}}if(this.listeners.OnceExit)for(let[e,s]of this.listeners.OnceExit){this.result.lastPlugin=e;try{yield s(t,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()})}prepareVisitors(){this.listeners={};let t=(e,s,i)=>{this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push([e,i])};for(let e of this.plugins)if(typeof e=="object")for(let s of["Root","Declaration","Rule","AtRule","Comment","DeclarationExit","RuleExit","AtRuleExit","CommentExit","RootExit","OnceExit"])if(typeof e[s]=="object")for(let i in e[s])t(e,i==="*"?s:s+"-"+i.toLowerCase(),e[s][i]);else typeof e[s]=="function"&&t(e,s,e[s]);this.hasListener=Object.keys(this.listeners).length>0}visitTick(t){let e=t[t.length-1],{node:s,visitors:i}=e;if(s.type!=="root"&&!s.parent)return void t.pop();if(i.length>0&&e.visitorIndex<i.length){let[a,o]=i[e.visitorIndex];e.visitorIndex+=1,e.visitorIndex===i.length&&(e.visitors=[],e.visitorIndex=0),this.result.lastPlugin=a;try{return o(s.toProxy(),this.helpers)}catch(h){throw this.handleError(h,s)}}if(e.iterator!==0){let a,o=e.iterator;for(;a=s.nodes[s.indexes[o]];)if(s.indexes[o]+=1,!a[isClean])return a[isClean]=!0,void t.push(toStack(a));e.iterator=0,delete s.indexes[o]}let n=e.events;for(;e.eventIndex<n.length;){let a=n[e.eventIndex];if(e.eventIndex+=1,a===CHILDREN)return void(s.nodes&&s.nodes.length&&(s[isClean]=!0,e.iterator=s.getIterator()));if(this.listeners[a])return void(e.visitors=this.listeners[a])}t.pop()}};LazyResult$2.registerPostcss=r=>{postcss$2=r};var lazyResult=LazyResult$2;LazyResult$2.default=LazyResult$2,Root$2.registerLazyResult(LazyResult$2);let LazyResult$1=lazyResult,Root$1=root,Processor$1=class{constructor(r=[]){this.version="8.1.10",this.plugins=this.normalize(r)}use(r){return this.plugins=this.plugins.concat(this.normalize([r])),this}process(r,t={}){return this.plugins.length===0&&t.parser===t.stringifier&&t.hideNothingWarning,new LazyResult$1(this,r,t)}normalize(r){let t=[];for(let e of r)if(e.postcss===!0?e=e():e.postcss&&(e=e.postcss),typeof e=="object"&&Array.isArray(e.plugins))t=t.concat(e.plugins);else if(typeof e=="object"&&e.postcssPlugin)t.push(e);else if(typeof e=="function")t.push(e);else if(typeof e!="object"||!e.parse&&!e.stringify)throw new Error(e+" is not a PostCSS plugin");return t}};var processor=Processor$1;Processor$1.default=Processor$1,Root$1.registerProcessor(Processor$1);var define_process_env_default={};let CssSyntaxError=cssSyntaxError,Declaration=declaration,LazyResult=lazyResult,Container=container,Processor=processor,stringify=stringify_1,Warning=warning,Comment=comment,AtRule=atRule,Result=result,Input=input,parse$1=parse_1$1,list=list_1,Rule=rule,Root=root,Node$1=node;function postcss(...r){return r.length===1&&Array.isArray(r[0])&&(r=r[0]),new Processor(r,postcss)}postcss.plugin=function(r,t){function e(...i){let n=t(...i);return n.postcssPlugin=r,n.postcssVersion=new Processor().version,n}let s;return console&&console.warn&&define_process_env_default.LANG&&define_process_env_default.LANG.startsWith("cn"),Object.defineProperty(e,"postcss",{get:()=>(s||(s=e()),s)}),e.process=function(i,n,a){return postcss([e(a)]).process(i,n)},e},postcss.stringify=stringify,postcss.parse=parse$1,postcss.list=list,postcss.comment=r=>new Comment(r),postcss.atRule=r=>new AtRule(r),postcss.decl=r=>new Declaration(r),postcss.rule=r=>new Rule(r),postcss.root=r=>new Root(r),postcss.CssSyntaxError=CssSyntaxError,postcss.Declaration=Declaration,postcss.Container=Container,postcss.Comment=Comment,postcss.Warning=Warning,postcss.AtRule=AtRule,postcss.Result=Result,postcss.Input=Input,postcss.Rule=Rule,postcss.Root=Root,postcss.Node=Node$1,LazyResult.registerPostcss(postcss);var postcss_1=postcss;postcss.default=postcss;const postcss$1=getDefaultExportFromCjs(postcss_1);postcss$1.stringify,postcss$1.plugin,postcss$1.parse,postcss$1.list,postcss$1.comment,postcss$1.atRule,postcss$1.rule,postcss$1.decl,postcss$1.root,postcss$1.CssSyntaxError,postcss$1.Declaration,postcss$1.Container,postcss$1.Comment,postcss$1.Warning,postcss$1.AtRule,postcss$1.Result,postcss$1.Input,postcss$1.Rule,postcss$1.Root,postcss$1.Node;var astTraverse={exports:{}};astTraverse.exports=function(r,t){var e=(t=t||{}).pre,s=t.post,i=t.skipProperty;(function n(a,o,h,l){if(a&&typeof a.type=="string"){var c=void 0;if(e&&(c=e(a,o,h,l)),c!==!1){for(var h in a)if(!(i?i(h,a):h[0]==="$")){var p=a[h];if(Array.isArray(p))for(var u=0;u<p.length;u++)n(p[u],a,h,u);else n(p,a,h)}}s&&s(a,o,h,l)}})(r,null)};var astTraverseExports=astTraverse.exports;const traverse=getDefaultExportFromCjs(astTraverseExports);var lib={};function _objectWithoutPropertiesLoose(r,t){if(r==null)return{};var e={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(t.includes(s))continue;e[s]=r[s]}return e}Object.defineProperty(lib,"__esModule",{value:!0});class Position{constructor(t,e,s){this.line=void 0,this.column=void 0,this.index=void 0,this.line=t,this.column=e,this.index=s}}class SourceLocation{constructor(t,e){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=t,this.end=e}}function createPositionWithColumnOffset(r,t){const{line:e,column:s,index:i}=r;return new Position(e,s+t,i+t)}const code="BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED";var ModuleErrors={ImportMetaOutsideModule:{message:`import.meta may appear only with 'sourceType: "module"'`,code},ImportOutsideModule:{message:`'import' and 'export' may appear only with 'sourceType: "module"'`,code}};const NodeDescriptions={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",CatchClause:"catch clause",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ImportSpecifier:"import specifier",ImportDefaultSpecifier:"import default specifier",ImportNamespaceSpecifier:"import namespace specifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},toNodeDescription=r=>r.type==="UpdateExpression"?NodeDescriptions.UpdateExpression[`${r.prefix}`]:NodeDescriptions[r.type];var StandardErrors={AccessorIsGenerator:({kind:r})=>`A ${r}ter cannot be a generator.`,ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitUsingNotInAsyncContext:"'await using' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncFunction:"'await' is only allowed within async functions.",BadGetterArity:"A 'get' accessor must not have any formal parameters.",BadSetterArity:"A 'set' accessor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accessor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:({kind:r})=>`Missing initializer in ${r} declaration.`,DecoratorArgumentsOutsideParentheses:"Decorator arguments must be moved inside parentheses: use '@(decorator(args))' instead of '@(decorator)(args)'.",DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. Remove the 'decoratorsBeforeExport: true' option to use the 'export @decorator class {}' syntax.",DecoratorsBeforeAfterExport:"Decorators can be placed *either* before or after the 'export' keyword, but not in both locations at the same time.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Decorators must be placed *after* the 'export' keyword. Remove the 'decoratorsBeforeExport: false' option to use the '@decorator export class {}' syntax.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeferImportRequiresNamespace:'Only `import defer * as x from "./module"` is valid.',DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:({exportName:r})=>`\`${r}\` has already been exported. Exported identifiers must be unique.`,DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",DynamicImportPhaseRequiresImportExpressions:({phase:r})=>`'import.${r}(...)' can only be parsed when using the 'createImportExpressions' option.`,ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:({localName:r,exportName:t})=>`A string literal cannot be used as an exported binding without \`from\`.
- Did you mean \`export { '${r}' as '${t}' } from 'some-module'\`?`,ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:({type:r})=>`'${r==="ForInStatement"?"for-in":"for-of"}' loop variable declaration may not have an initializer.`,ForInUsing:"For-in loop may not start with 'using' declaration.",ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:({type:r})=>`Unsyntactic ${r==="BreakStatement"?"break":"continue"}.`,IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportAttributesUseAssert:"The `assert` keyword in import attributes is deprecated and it has been replaced by the `with` keyword. You can enable the `deprecatedImportAssert` parser plugin to suppress this error.",ImportBindingIsString:({importName:r})=>`A string literal cannot be used as an imported binding.
- Did you mean \`import { "${r}" as foo }\`?`,ImportCallArity:"`import()` requires exactly one or two arguments.",ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",ImportJSONBindingNotDefault:"A JSON module can only be imported with `default`.",ImportReflectionHasAssertion:"`import module x` cannot have assertions.",ImportReflectionNotBinding:'Only `import module x from "./module"` is valid.',IncompatibleRegExpUVFlags:"The 'u' and 'v' regular expression flags cannot be enabled at the same time.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidCoverInitializedName:"Invalid shorthand property initializer.",InvalidDecimal:"Invalid decimal.",InvalidDigit:({radix:r})=>`Expected number in radix ${r}.`,InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:({reservedWord:r})=>`Escape sequence in keyword ${r}.`,InvalidIdentifier:({identifierName:r})=>`Invalid identifier ${r}.`,InvalidLhs:({ancestor:r})=>`Invalid left-hand side in ${toNodeDescription(r)}.`,InvalidLhsBinding:({ancestor:r})=>`Binding invalid left-hand side in ${toNodeDescription(r)}.`,InvalidLhsOptionalChaining:({ancestor:r})=>`Invalid optional chaining in the left-hand side of ${toNodeDescription(r)}.`,InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:({unexpected:r})=>`Unexpected character '${r}'.`,InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:({identifierName:r})=>`Private name #${r} is not defined.`,InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:({labelName:r})=>`Label '${r}' is already declared.`,LetInLexicalBinding:"'let' is disallowed as a lexically bound name.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingPlugin:({missingPlugin:r})=>`This experimental syntax requires enabling the parser plugin: ${r.map(t=>JSON.stringify(t)).join(", ")}.`,MissingOneOfPlugins:({missingPlugin:r})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${r.map(t=>JSON.stringify(t)).join(", ")}.`,MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:({key:r})=>`Duplicate key "${r}" is not allowed in module attributes.`,ModuleExportNameHasLoneSurrogate:({surrogateCharCode:r})=>`An export name cannot include a lone surrogate, found '\\u${r.toString(16)}'.`,ModuleExportUndefined:({localName:r})=>`Export '${r}' is not defined.`,MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PrivateInExpectedIn:({identifierName:r})=>`Private names are only allowed in property accesses (\`obj.#${r}\`) or in \`in\` expressions (\`#${r} in obj\`).`,PrivateNameRedeclaration:({identifierName:r})=>`Duplicate private name #${r}.`,RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level or inside a block.",SloppyFunctionAnnexB:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",SourcePhaseImportRequiresDefault:'Only `import source x from "./module"` is valid.',StaticPrototype:"Classes may not have static property named prototype.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:({keyword:r})=>`Unexpected keyword '${r}'.`,UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:"Unexpected private name.",UnexpectedReservedWord:({reservedWord:r})=>`Unexpected reserved word '${r}'.`,UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:({expected:r,unexpected:t})=>`Unexpected token${t?` '${t}'.`:""}${r?`, expected "${r}"`:""}`,UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnexpectedUsingDeclaration:"Using declaration cannot appear in the top level when source type is `script`.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:({target:r,onlyValidPropertyName:t})=>`The only valid meta property for ${r} is ${r}.${t}.`,UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",UsingDeclarationExport:"Using declaration cannot be exported.",UsingDeclarationHasBindingPattern:"Using declaration cannot have destructuring patterns.",VarRedeclaration:({identifierName:r})=>`Identifier '${r}' has already been declared.`,YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."},StrictModeErrors={StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:({referenceName:r})=>`Assigning to '${r}' in strict mode.`,StrictEvalArgumentsBinding:({bindingName:r})=>`Binding '${r}' in strict mode.`,StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode."};const UnparenthesizedPipeBodyDescriptions=new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]);var PipelineOperatorErrors={PipeBodyIsTighter:"Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:({token:r})=>`Invalid topic token ${r}. In order to use ${r} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${r}" }.`,PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:({type:r})=>`Hack-style pipe body cannot be an unparenthesized ${toNodeDescription({type:r})}; please wrap it in parentheses.`,PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'};const _excluded=["message"];function defineHidden(r,t,e){Object.defineProperty(r,t,{enumerable:!1,configurable:!0,value:e})}function toParseErrorConstructor({toMessage:r,code:t,reasonCode:e,syntaxPlugin:s}){const i=e==="MissingPlugin"||e==="MissingOneOfPlugins";{const n={AccessorCannotDeclareThisParameter:"AccesorCannotDeclareThisParameter",AccessorCannotHaveTypeParameters:"AccesorCannotHaveTypeParameters",ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference:"ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference",SetAccessorCannotHaveOptionalParameter:"SetAccesorCannotHaveOptionalParameter",SetAccessorCannotHaveRestParameter:"SetAccesorCannotHaveRestParameter",SetAccessorCannotHaveReturnType:"SetAccesorCannotHaveReturnType"};n[e]&&(e=n[e])}return function n(a,o){const h=new SyntaxError;return h.code=t,h.reasonCode=e,h.loc=a,h.pos=a.index,h.syntaxPlugin=s,i&&(h.missingPlugin=o.missingPlugin),defineHidden(h,"clone",function(l={}){var c;const{line:p,column:u,index:d}=(c=l.loc)!=null?c:a;return n(new Position(p,u,d),Object.assign({},o,l.details))}),defineHidden(h,"details",o),Object.defineProperty(h,"message",{configurable:!0,get(){const l=`${r(o)} (${a.line}:${a.column})`;return this.message=l,l},set(l){Object.defineProperty(this,"message",{value:l,writable:!0})}}),h}}function ParseErrorEnum(r,t){if(Array.isArray(r))return s=>ParseErrorEnum(s,r[0]);const e={};for(const s of Object.keys(r)){const i=r[s],n=typeof i=="string"?{message:()=>i}:typeof i=="function"?{message:i}:i,{message:a}=n,o=_objectWithoutPropertiesLoose(n,_excluded),h=typeof a=="string"?()=>a:a;e[s]=toParseErrorConstructor(Object.assign({code:"BABEL_PARSER_SYNTAX_ERROR",reasonCode:s,toMessage:h},t?{syntaxPlugin:t}:{},o))}return e}const Errors=Object.assign({},ParseErrorEnum(ModuleErrors),ParseErrorEnum(StandardErrors),ParseErrorEnum(StrictModeErrors),ParseErrorEnum`pipelineOperator`(PipelineOperatorErrors)),{defineProperty}=Object,toUnenumerable=(r,t)=>{r&&defineProperty(r,t,{enumerable:!1,value:r[t]})};function toESTreeLocation(r){return toUnenumerable(r.loc.start,"index"),toUnenumerable(r.loc.end,"index"),r}var estree=r=>class extends r{parse(){const t=toESTreeLocation(super.parse());return this.options.tokens&&(t.tokens=t.tokens.map(toESTreeLocation)),t}parseRegExpLiteral({pattern:t,flags:e}){let s=null;try{s=new RegExp(t,e)}catch(n){}const i=this.estreeParseLiteral(s);return i.regex={pattern:t,flags:e},i}parseBigIntLiteral(t){let e;try{e=BigInt(t)}catch(i){e=null}const s=this.estreeParseLiteral(e);return s.bigint=String(s.value||t),s}parseDecimalLiteral(t){const e=this.estreeParseLiteral(null);return e.decimal=String(e.value||t),e}estreeParseLiteral(t){return this.parseLiteral(t,"Literal")}parseStringLiteral(t){return this.estreeParseLiteral(t)}parseNumericLiteral(t){return this.estreeParseLiteral(t)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(t){return this.estreeParseLiteral(t)}directiveToStmt(t){const e=t.value;delete t.value,e.type="Literal",e.raw=e.extra.raw,e.value=e.extra.expressionValue;const s=t;return s.type="ExpressionStatement",s.expression=e,s.directive=e.extra.rawValue,delete e.extra,s}initFunction(t,e){super.initFunction(t,e),t.expression=!1}checkDeclaration(t){t!=null&&this.isObjectProperty(t)?this.checkDeclaration(t.value):super.checkDeclaration(t)}getObjectOrClassMethodParams(t){return t.value.params}isValidDirective(t){var e;return t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&typeof t.expression.value=="string"&&!((e=t.expression.extra)!=null&&e.parenthesized)}parseBlockBody(t,e,s,i,n){super.parseBlockBody(t,e,s,i,n);const a=t.directives.map(o=>this.directiveToStmt(o));t.body=a.concat(t.body),delete t.directives}pushClassMethod(t,e,s,i,n,a){this.parseMethod(e,s,i,n,a,"ClassMethod",!0),e.typeParameters&&(e.value.typeParameters=e.typeParameters,delete e.typeParameters),t.body.push(e)}parsePrivateName(){const t=super.parsePrivateName();return this.getPluginOption("estree","classFeatures")?this.convertPrivateNameToPrivateIdentifier(t):t}convertPrivateNameToPrivateIdentifier(t){const e=super.getPrivateNameSV(t);return delete t.id,t.name=e,t.type="PrivateIdentifier",t}isPrivateName(t){return this.getPluginOption("estree","classFeatures")?t.type==="PrivateIdentifier":super.isPrivateName(t)}getPrivateNameSV(t){return this.getPluginOption("estree","classFeatures")?t.name:super.getPrivateNameSV(t)}parseLiteral(t,e){const s=super.parseLiteral(t,e);return s.raw=s.extra.raw,delete s.extra,s}parseFunctionBody(t,e,s=!1){super.parseFunctionBody(t,e,s),t.expression=t.body.type!=="BlockStatement"}parseMethod(t,e,s,i,n,a,o=!1){let h=this.startNode();return h.kind=t.kind,h=super.parseMethod(h,e,s,i,n,a,o),h.type="FunctionExpression",delete h.kind,t.value=h,a==="ClassPrivateMethod"&&(t.computed=!1),this.finishNode(t,"MethodDefinition")}nameIsConstructor(t){return t.type==="Literal"?t.value==="constructor":super.nameIsConstructor(t)}parseClassProperty(...t){const e=super.parseClassProperty(...t);return this.getPluginOption("estree","classFeatures")&&(e.type="PropertyDefinition"),e}parseClassPrivateProperty(...t){const e=super.parseClassPrivateProperty(...t);return this.getPluginOption("estree","classFeatures")&&(e.type="PropertyDefinition",e.computed=!1),e}parseObjectMethod(t,e,s,i,n){const a=super.parseObjectMethod(t,e,s,i,n);return a&&(a.type="Property",a.kind==="method"&&(a.kind="init"),a.shorthand=!1),a}parseObjectProperty(t,e,s,i){const n=super.parseObjectProperty(t,e,s,i);return n&&(n.kind="init",n.type="Property"),n}isValidLVal(t,e,s){return t==="Property"?"value":super.isValidLVal(t,e,s)}isAssignable(t,e){return t!=null&&this.isObjectProperty(t)?this.isAssignable(t.value,e):super.isAssignable(t,e)}toAssignable(t,e=!1){if(t!=null&&this.isObjectProperty(t)){const{key:s,value:i}=t;this.isPrivateName(s)&&this.classScope.usePrivateName(this.getPrivateNameSV(s),s.loc.start),this.toAssignable(i,e)}else super.toAssignable(t,e)}toAssignableObjectExpressionProp(t,e,s){t.type!=="Property"||t.kind!=="get"&&t.kind!=="set"?t.type==="Property"&&t.method?this.raise(Errors.PatternHasMethod,t.key):super.toAssignableObjectExpressionProp(t,e,s):this.raise(Errors.PatternHasAccessor,t.key)}finishCallExpression(t,e){const s=super.finishCallExpression(t,e);var i,n;return s.callee.type==="Import"&&(s.type="ImportExpression",s.source=s.arguments[0],s.options=(i=s.arguments[1])!=null?i:null,s.attributes=(n=s.arguments[1])!=null?n:null,delete s.arguments,delete s.callee),s}toReferencedArguments(t){t.type!=="ImportExpression"&&super.toReferencedArguments(t)}parseExport(t,e){const s=this.state.lastTokStartLoc,i=super.parseExport(t,e);switch(i.type){case"ExportAllDeclaration":i.exported=null;break;case"ExportNamedDeclaration":i.specifiers.length===1&&i.specifiers[0].type==="ExportNamespaceSpecifier"&&(i.type="ExportAllDeclaration",i.exported=i.specifiers[0].exported,delete i.specifiers);case"ExportDefaultDeclaration":{var n;const{declaration:a}=i;(a==null?void 0:a.type)==="ClassDeclaration"&&((n=a.decorators)==null?void 0:n.length)>0&&a.start===i.start&&this.resetStartLocation(i,s)}}return i}parseSubscript(t,e,s,i){const n=super.parseSubscript(t,e,s,i);if(i.optionalChainMember){if(n.type!=="OptionalMemberExpression"&&n.type!=="OptionalCallExpression"||(n.type=n.type.substring(8)),i.stop){const a=this.startNodeAtNode(n);return a.expression=n,this.finishNode(a,"ChainExpression")}}else n.type!=="MemberExpression"&&n.type!=="CallExpression"||(n.optional=!1);return n}isOptionalMemberExpression(t){return t.type==="ChainExpression"?t.expression.type==="MemberExpression":super.isOptionalMemberExpression(t)}hasPropertyAsPrivateName(t){return t.type==="ChainExpression"&&(t=t.expression),super.hasPropertyAsPrivateName(t)}isObjectProperty(t){return t.type==="Property"&&t.kind==="init"&&!t.method}isObjectMethod(t){return t.type==="Property"&&(t.method||t.kind==="get"||t.kind==="set")}finishNodeAt(t,e,s){return toESTreeLocation(super.finishNodeAt(t,e,s))}resetStartLocation(t,e){super.resetStartLocation(t,e),toESTreeLocation(t)}resetEndLocation(t,e=this.state.lastTokEndLoc){super.resetEndLocation(t,e),toESTreeLocation(t)}};class TokContext{constructor(t,e){this.token=void 0,this.preserveSpace=void 0,this.token=t,this.preserveSpace=!!e}}const types={brace:new TokContext("{"),j_oTag:new TokContext("<tag"),j_cTag:new TokContext("</tag"),j_expr:new TokContext("<tag>...</tag>",!0)};types.template=new TokContext("`",!0);const beforeExpr=!0,startsExpr=!0,isLoop=!0,isAssign=!0,prefix=!0,postfix=!0;class ExportedTokenType{constructor(t,e={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.rightAssociative=!!e.rightAssociative,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop!=null?e.binop:null,this.updateContext=null}}const keywords$1=new Map;function createKeyword(r,t={}){t.keyword=r;const e=createToken(r,t);return keywords$1.set(r,e),e}function createBinop(r,t){return createToken(r,{beforeExpr,binop:t})}let tokenTypeCounter=-1;const tokenTypes=[],tokenLabels=[],tokenBinops=[],tokenBeforeExprs=[],tokenStartsExprs=[],tokenPrefixes=[];function createToken(r,t={}){var e,s,i,n;return++tokenTypeCounter,tokenLabels.push(r),tokenBinops.push((e=t.binop)!=null?e:-1),tokenBeforeExprs.push((s=t.beforeExpr)!=null&&s),tokenStartsExprs.push((i=t.startsExpr)!=null&&i),tokenPrefixes.push((n=t.prefix)!=null&&n),tokenTypes.push(new ExportedTokenType(r,t)),tokenTypeCounter}function createKeywordLike(r,t={}){var e,s,i,n;return++tokenTypeCounter,keywords$1.set(r,tokenTypeCounter),tokenLabels.push(r),tokenBinops.push((e=t.binop)!=null?e:-1),tokenBeforeExprs.push((s=t.beforeExpr)!=null&&s),tokenStartsExprs.push((i=t.startsExpr)!=null&&i),tokenPrefixes.push((n=t.prefix)!=null&&n),tokenTypes.push(new ExportedTokenType("name",t)),tokenTypeCounter}const tt={bracketL:createToken("[",{beforeExpr,startsExpr}),bracketHashL:createToken("#[",{beforeExpr,startsExpr}),bracketBarL:createToken("[|",{beforeExpr,startsExpr}),bracketR:createToken("]"),bracketBarR:createToken("|]"),braceL:createToken("{",{beforeExpr,startsExpr}),braceBarL:createToken("{|",{beforeExpr,startsExpr}),braceHashL:createToken("#{",{beforeExpr,startsExpr}),braceR:createToken("}"),braceBarR:createToken("|}"),parenL:createToken("(",{beforeExpr,startsExpr}),parenR:createToken(")"),comma:createToken(",",{beforeExpr}),semi:createToken(";",{beforeExpr}),colon:createToken(":",{beforeExpr}),doubleColon:createToken("::",{beforeExpr}),dot:createToken("."),question:createToken("?",{beforeExpr}),questionDot:createToken("?."),arrow:createToken("=>",{beforeExpr}),template:createToken("template"),ellipsis:createToken("...",{beforeExpr}),backQuote:createToken("`",{startsExpr}),dollarBraceL:createToken("${",{beforeExpr,startsExpr}),templateTail:createToken("...`",{startsExpr}),templateNonTail:createToken("...${",{beforeExpr,startsExpr}),at:createToken("@"),hash:createToken("#",{startsExpr}),interpreterDirective:createToken("#!..."),eq:createToken("=",{beforeExpr,isAssign}),assign:createToken("_=",{beforeExpr,isAssign}),slashAssign:createToken("_=",{beforeExpr,isAssign}),xorAssign:createToken("_=",{beforeExpr,isAssign}),moduloAssign:createToken("_=",{beforeExpr,isAssign}),incDec:createToken("++/--",{prefix,postfix,startsExpr}),bang:createToken("!",{beforeExpr,prefix,startsExpr}),tilde:createToken("~",{beforeExpr,prefix,startsExpr}),doubleCaret:createToken("^^",{startsExpr}),doubleAt:createToken("@@",{startsExpr}),pipeline:createBinop("|>",0),nullishCoalescing:createBinop("??",1),logicalOR:createBinop("||",1),logicalAND:createBinop("&&",2),bitwiseOR:createBinop("|",3),bitwiseXOR:createBinop("^",4),bitwiseAND:createBinop("&",5),equality:createBinop("==/!=/===/!==",6),lt:createBinop("</>/<=/>=",7),gt:createBinop("</>/<=/>=",7),relational:createBinop("</>/<=/>=",7),bitShift:createBinop("<</>>/>>>",8),bitShiftL:createBinop("<</>>/>>>",8),bitShiftR:createBinop("<</>>/>>>",8),plusMin:createToken("+/-",{beforeExpr,binop:9,prefix,startsExpr}),modulo:createToken("%",{binop:10,startsExpr}),star:createToken("*",{binop:10}),slash:createBinop("/",10),exponent:createToken("**",{beforeExpr,binop:11,rightAssociative:!0}),_in:createKeyword("in",{beforeExpr,binop:7}),_instanceof:createKeyword("instanceof",{beforeExpr,binop:7}),_break:createKeyword("break"),_case:createKeyword("case",{beforeExpr}),_catch:createKeyword("catch"),_continue:createKeyword("continue"),_debugger:createKeyword("debugger"),_default:createKeyword("default",{beforeExpr}),_else:createKeyword("else",{beforeExpr}),_finally:createKeyword("finally"),_function:createKeyword("function",{startsExpr}),_if:createKeyword("if"),_return:createKeyword("return",{beforeExpr}),_switch:createKeyword("switch"),_throw:createKeyword("throw",{beforeExpr,prefix,startsExpr}),_try:createKeyword("try"),_var:createKeyword("var"),_const:createKeyword("const"),_with:createKeyword("with"),_new:createKeyword("new",{beforeExpr,startsExpr}),_this:createKeyword("this",{startsExpr}),_super:createKeyword("super",{startsExpr}),_class:createKeyword("class",{startsExpr}),_extends:createKeyword("extends",{beforeExpr}),_export:createKeyword("export"),_import:createKeyword("import",{startsExpr}),_null:createKeyword("null",{startsExpr}),_true:createKeyword("true",{startsExpr}),_false:createKeyword("false",{startsExpr}),_typeof:createKeyword("typeof",{beforeExpr,prefix,startsExpr}),_void:createKeyword("void",{beforeExpr,prefix,startsExpr}),_delete:createKeyword("delete",{beforeExpr,prefix,startsExpr}),_do:createKeyword("do",{isLoop,beforeExpr}),_for:createKeyword("for",{isLoop}),_while:createKeyword("while",{isLoop}),_as:createKeywordLike("as",{startsExpr}),_assert:createKeywordLike("assert",{startsExpr}),_async:createKeywordLike("async",{startsExpr}),_await:createKeywordLike("await",{startsExpr}),_defer:createKeywordLike("defer",{startsExpr}),_from:createKeywordLike("from",{startsExpr}),_get:createKeywordLike("get",{startsExpr}),_let:createKeywordLike("let",{startsExpr}),_meta:createKeywordLike("meta",{startsExpr}),_of:createKeywordLike("of",{startsExpr}),_sent:createKeywordLike("sent",{startsExpr}),_set:createKeywordLike("set",{startsExpr}),_source:createKeywordLike("source",{startsExpr}),_static:createKeywordLike("static",{startsExpr}),_using:createKeywordLike("using",{startsExpr}),_yield:createKeywordLike("yield",{startsExpr}),_asserts:createKeywordLike("asserts",{startsExpr}),_checks:createKeywordLike("checks",{startsExpr}),_exports:createKeywordLike("exports",{startsExpr}),_global:createKeywordLike("global",{startsExpr}),_implements:createKeywordLike("implements",{startsExpr}),_intrinsic:createKeywordLike("intrinsic",{startsExpr}),_infer:createKeywordLike("infer",{startsExpr}),_is:createKeywordLike("is",{startsExpr}),_mixins:createKeywordLike("mixins",{startsExpr}),_proto:createKeywordLike("proto",{startsExpr}),_require:createKeywordLike("require",{startsExpr}),_satisfies:createKeywordLike("satisfies",{startsExpr}),_keyof:createKeywordLike("keyof",{startsExpr}),_readonly:createKeywordLike("readonly",{startsExpr}),_unique:createKeywordLike("unique",{startsExpr}),_abstract:createKeywordLike("abstract",{startsExpr}),_declare:createKeywordLike("declare",{startsExpr}),_enum:createKeywordLike("enum",{startsExpr}),_module:createKeywordLike("module",{startsExpr}),_namespace:createKeywordLike("namespace",{startsExpr}),_interface:createKeywordLike("interface",{startsExpr}),_type:createKeywordLike("type",{startsExpr}),_opaque:createKeywordLike("opaque",{startsExpr}),name:createToken("name",{startsExpr}),placeholder:createToken("%%",{startsExpr:!0}),string:createToken("string",{startsExpr}),num:createToken("num",{startsExpr}),bigint:createToken("bigint",{startsExpr}),decimal:createToken("decimal",{startsExpr}),regexp:createToken("regexp",{startsExpr}),privateName:createToken("#name",{startsExpr}),eof:createToken("eof"),jsxName:createToken("jsxName"),jsxText:createToken("jsxText",{beforeExpr:!0}),jsxTagStart:createToken("jsxTagStart",{startsExpr:!0}),jsxTagEnd:createToken("jsxTagEnd")};function tokenIsIdentifier(r){return r>=93&&r<=133}function tokenKeywordOrIdentifierIsKeyword(r){return r<=92}function tokenIsKeywordOrIdentifier(r){return r>=58&&r<=133}function tokenIsLiteralPropertyName(r){return r>=58&&r<=137}function tokenComesBeforeExpression(r){return tokenBeforeExprs[r]}function tokenCanStartExpression(r){return tokenStartsExprs[r]}function tokenIsAssignment(r){return r>=29&&r<=33}function tokenIsFlowInterfaceOrTypeOrOpaque(r){return r>=129&&r<=131}function tokenIsLoop(r){return r>=90&&r<=92}function tokenIsKeyword(r){return r>=58&&r<=92}function tokenIsOperator(r){return r>=39&&r<=59}function tokenIsPostfix(r){return r===34}function tokenIsPrefix(r){return tokenPrefixes[r]}function tokenIsTSTypeOperator(r){return r>=121&&r<=123}function tokenIsTSDeclarationStart(r){return r>=124&&r<=130}function tokenLabelName(r){return tokenLabels[r]}function tokenOperatorPrecedence(r){return tokenBinops[r]}function tokenIsRightAssociative(r){return r===57}function tokenIsTemplate(r){return r>=24&&r<=25}function getExportedToken(r){return tokenTypes[r]}tokenTypes[8].updateContext=r=>{r.pop()},tokenTypes[5].updateContext=tokenTypes[7].updateContext=tokenTypes[23].updateContext=r=>{r.push(types.brace)},tokenTypes[22].updateContext=r=>{r[r.length-1]===types.template?r.pop():r.push(types.template)},tokenTypes[143].updateContext=r=>{r.push(types.j_expr,types.j_oTag)};let nonASCIIidentifierStartChars="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",nonASCIIidentifierChars="\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\u30FB\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F\uFF65";const nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]");nonASCIIidentifierStartChars=nonASCIIidentifierChars=null;const astralIdentifierStartCodes=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],astralIdentifierCodes=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239];function isInAstralSet(r,t){let e=65536;for(let s=0,i=t.length;s<i;s+=2){if(e+=t[s],e>r)return!1;if(e+=t[s+1],e>=r)return!0}return!1}function isIdentifierStart(r){return r<65?r===36:r<=90||(r<97?r===95:r<=122||(r<=65535?r>=170&&nonASCIIidentifierStart.test(String.fromCharCode(r)):isInAstralSet(r,astralIdentifierStartCodes)))}function isIdentifierChar(r){return r<48?r===36:r<58||!(r<65)&&(r<=90||(r<97?r===95:r<=122||(r<=65535?r>=170&&nonASCIIidentifier.test(String.fromCharCode(r)):isInAstralSet(r,astralIdentifierStartCodes)||isInAstralSet(r,astralIdentifierCodes))))}const reservedWords={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},keywords=new Set(reservedWords.keyword),reservedWordsStrictSet=new Set(reservedWords.strict),reservedWordsStrictBindSet=new Set(reservedWords.strictBind);function isReservedWord(r,t){return t&&r==="await"||r==="enum"}function isStrictReservedWord(r,t){return isReservedWord(r,t)||reservedWordsStrictSet.has(r)}function isStrictBindOnlyReservedWord(r){return reservedWordsStrictBindSet.has(r)}function isStrictBindReservedWord(r,t){return isStrictReservedWord(r,t)||isStrictBindOnlyReservedWord(r)}function isKeyword(r){return keywords.has(r)}function isIteratorStart(r,t,e){return r===64&&t===64&&isIdentifierStart(e)}const reservedWordLikeSet=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);function canBeReservedWord(r){return reservedWordLikeSet.has(r)}class Scope{constructor(t){this.flags=0,this.names=new Map,this.firstLexicalName="",this.flags=t}}class ScopeHandler{constructor(t,e){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=t,this.inModule=e}get inTopLevel(){return(1&this.currentScope().flags)>0}get inFunction(){return(2&this.currentVarScopeFlags())>0}get allowSuper(){return(16&this.currentThisScopeFlags())>0}get allowDirectSuper(){return(32&this.currentThisScopeFlags())>0}get inClass(){return(64&this.currentThisScopeFlags())>0}get inClassAndNotInNonArrowFunction(){const t=this.currentThisScopeFlags();return(64&t)>0&&!(2&t)}get inStaticBlock(){for(let t=this.scopeStack.length-1;;t--){const{flags:e}=this.scopeStack[t];if(128&e)return!0;if(451&e)return!1}}get inNonArrowFunction(){return(2&this.currentThisScopeFlags())>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(t){return new Scope(t)}enter(t){this.scopeStack.push(this.createScope(t))}exit(){return this.scopeStack.pop().flags}treatFunctionsAsVarInScope(t){return!!(130&t.flags||!this.parser.inModule&&1&t.flags)}declareName(t,e,s){let i=this.currentScope();if(8&e||16&e){this.checkRedeclarationInScope(i,t,e,s);let n=i.names.get(t)||0;16&e?n|=4:(i.firstLexicalName||(i.firstLexicalName=t),n|=2),i.names.set(t,n),8&e&&this.maybeExportDefined(i,t)}else if(4&e)for(let n=this.scopeStack.length-1;n>=0&&(i=this.scopeStack[n],this.checkRedeclarationInScope(i,t,e,s),i.names.set(t,1|(i.names.get(t)||0)),this.maybeExportDefined(i,t),!(387&i.flags));--n);this.parser.inModule&&1&i.flags&&this.undefinedExports.delete(t)}maybeExportDefined(t,e){this.parser.inModule&&1&t.flags&&this.undefinedExports.delete(e)}checkRedeclarationInScope(t,e,s,i){this.isRedeclaredInScope(t,e,s)&&this.parser.raise(Errors.VarRedeclaration,i,{identifierName:e})}isRedeclaredInScope(t,e,s){if(!(1&s))return!1;if(8&s)return t.names.has(e);const i=t.names.get(e);return 16&s?(2&i)>0||!this.treatFunctionsAsVarInScope(t)&&(1&i)>0:(2&i)>0&&!(8&t.flags&&t.firstLexicalName===e)||!this.treatFunctionsAsVarInScope(t)&&(4&i)>0}checkLocalExport(t){const{name:e}=t;this.scopeStack[0].names.has(e)||this.undefinedExports.set(e,t.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let t=this.scopeStack.length-1;;t--){const{flags:e}=this.scopeStack[t];if(387&e)return e}}currentThisScopeFlags(){for(let t=this.scopeStack.length-1;;t--){const{flags:e}=this.scopeStack[t];if(451&e&&!(4&e))return e}}}class FlowScope extends Scope{constructor(...t){super(...t),this.declareFunctions=new Set}}class FlowScopeHandler extends ScopeHandler{createScope(t){return new FlowScope(t)}declareName(t,e,s){const i=this.currentScope();if(2048&e)return this.checkRedeclarationInScope(i,t,e,s),this.maybeExportDefined(i,t),void i.declareFunctions.add(t);super.declareName(t,e,s)}isRedeclaredInScope(t,e,s){if(super.isRedeclaredInScope(t,e,s))return!0;if(2048&s&&!t.declareFunctions.has(e)){const i=t.names.get(e);return(4&i)>0||(2&i)>0}return!1}checkLocalExport(t){this.scopeStack[0].declareFunctions.has(t.name)||super.checkLocalExport(t)}}class BaseParser{constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}sourceToOffsetPos(t){return t+this.startIndex}offsetToSourcePos(t){return t-this.startIndex}hasPlugin(t){if(typeof t=="string")return this.plugins.has(t);{const[e,s]=t;if(!this.hasPlugin(e))return!1;const i=this.plugins.get(e);for(const n of Object.keys(s))if((i==null?void 0:i[n])!==s[n])return!1;return!0}}getPluginOption(t,e){var s;return(s=this.plugins.get(t))==null?void 0:s[e]}}function setTrailingComments(r,t){r.trailingComments===void 0?r.trailingComments=t:r.trailingComments.unshift(...t)}function setLeadingComments(r,t){r.leadingComments===void 0?r.leadingComments=t:r.leadingComments.unshift(...t)}function setInnerComments(r,t){r.innerComments===void 0?r.innerComments=t:r.innerComments.unshift(...t)}function adjustInnerComments(r,t,e){let s=null,i=t.length;for(;s===null&&i>0;)s=t[--i];s===null||s.start>e.start?setInnerComments(r,e.comments):setTrailingComments(s,e.comments)}class CommentsParser extends BaseParser{addComment(t){this.filename&&(t.loc.filename=this.filename);const{commentsLen:e}=this.state;this.comments.length!==e&&(this.comments.length=e),this.comments.push(t),this.state.commentsLen++}processComment(t){const{commentStack:e}=this.state,s=e.length;if(s===0)return;let i=s-1;const n=e[i];n.start===t.end&&(n.leadingNode=t,i--);const{start:a}=t;for(;i>=0;i--){const o=e[i],h=o.end;if(!(h>a)){h===a&&(o.trailingNode=t);break}o.containingNode=t,this.finalizeComment(o),e.splice(i,1)}}finalizeComment(t){const{comments:e}=t;if(t.leadingNode!==null||t.trailingNode!==null)t.leadingNode!==null&&setTrailingComments(t.leadingNode,e),t.trailingNode!==null&&setLeadingComments(t.trailingNode,e);else{const{containingNode:s,start:i}=t;if(this.input.charCodeAt(this.offsetToSourcePos(i)-1)===44)switch(s.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":adjustInnerComments(s,s.properties,t);break;case"CallExpression":case"OptionalCallExpression":adjustInnerComments(s,s.arguments,t);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":adjustInnerComments(s,s.params,t);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":adjustInnerComments(s,s.elements,t);break;case"ExportNamedDeclaration":case"ImportDeclaration":adjustInnerComments(s,s.specifiers,t);break;default:setInnerComments(s,e)}else setInnerComments(s,e)}}finalizeRemainingComments(){const{commentStack:t}=this.state;for(let e=t.length-1;e>=0;e--)this.finalizeComment(t[e]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(t){const{commentStack:e}=this.state,{length:s}=e;if(s===0)return;const i=e[s-1];i.leadingNode===t&&(i.leadingNode=null)}resetPreviousIdentifierLeadingComments(t){const{commentStack:e}=this.state,{length:s}=e;s!==0&&(e[s-1].trailingNode===t?e[s-1].trailingNode=null:s>=2&&e[s-2].trailingNode===t&&(e[s-2].trailingNode=null))}takeSurroundingComments(t,e,s){const{commentStack:i}=this.state,n=i.length;if(n===0)return;let a=n-1;for(;a>=0;a--){const o=i[a],h=o.end;if(o.start===s)o.leadingNode=t;else if(h===e)o.trailingNode=t;else if(h<e)break}}}const lineBreak=/\r\n|[\r\n\u2028\u2029]/,lineBreakG=new RegExp(lineBreak.source,"g");function isNewLine(r){switch(r){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}function hasNewLine(r,t,e){for(let s=t;s<e;s++)if(isNewLine(r.charCodeAt(s)))return!0;return!1}const skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,skipWhiteSpaceInLine=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/g;function isWhitespace(r){switch(r){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}class State{constructor(){this.flags=1024,this.startIndex=void 0,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.labels=[],this.commentsLen=0,this.commentStack=[],this.pos=0,this.type=140,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.context=[types.brace],this.firstInvalidTemplateEscapePos=null,this.strictErrors=new Map,this.tokensLength=0}get strict(){return(1&this.flags)>0}set strict(t){t?this.flags|=1:this.flags&=-2}init({strictMode:t,sourceType:e,startIndex:s,startLine:i,startColumn:n}){this.strict=t!==!1&&(t===!0||e==="module"),this.startIndex=s,this.curLine=i,this.lineStart=-n,this.startLoc=this.endLoc=new Position(i,n,s)}get maybeInArrowParameters(){return(2&this.flags)>0}set maybeInArrowParameters(t){t?this.flags|=2:this.flags&=-3}get inType(){return(4&this.flags)>0}set inType(t){t?this.flags|=4:this.flags&=-5}get noAnonFunctionType(){return(8&this.flags)>0}set noAnonFunctionType(t){t?this.flags|=8:this.flags&=-9}get hasFlowComment(){return(16&this.flags)>0}set hasFlowComment(t){t?this.flags|=16:this.flags&=-17}get isAmbientContext(){return(32&this.flags)>0}set isAmbientContext(t){t?this.flags|=32:this.flags&=-33}get inAbstractClass(){return(64&this.flags)>0}set inAbstractClass(t){t?this.flags|=64:this.flags&=-65}get inDisallowConditionalTypesContext(){return(128&this.flags)>0}set inDisallowConditionalTypesContext(t){t?this.flags|=128:this.flags&=-129}get soloAwait(){return(256&this.flags)>0}set soloAwait(t){t?this.flags|=256:this.flags&=-257}get inFSharpPipelineDirectBody(){return(512&this.flags)>0}set inFSharpPipelineDirectBody(t){t?this.flags|=512:this.flags&=-513}get canStartJSXElement(){return(1024&this.flags)>0}set canStartJSXElement(t){t?this.flags|=1024:this.flags&=-1025}get containsEsc(){return(2048&this.flags)>0}set containsEsc(t){t?this.flags|=2048:this.flags&=-2049}get hasTopLevelAwait(){return(4096&this.flags)>0}set hasTopLevelAwait(t){t?this.flags|=4096:this.flags&=-4097}curPosition(){return new Position(this.curLine,this.pos-this.lineStart,this.pos+this.startIndex)}clone(){const t=new State;return t.flags=this.flags,t.startIndex=this.startIndex,t.curLine=this.curLine,t.lineStart=this.lineStart,t.startLoc=this.startLoc,t.endLoc=this.endLoc,t.errors=this.errors.slice(),t.potentialArrowAt=this.potentialArrowAt,t.noArrowAt=this.noArrowAt.slice(),t.noArrowParamsConversionAt=this.noArrowParamsConversionAt.slice(),t.topicContext=this.topicContext,t.labels=this.labels.slice(),t.commentsLen=this.commentsLen,t.commentStack=this.commentStack.slice(),t.pos=this.pos,t.type=this.type,t.value=this.value,t.start=this.start,t.end=this.end,t.lastTokEndLoc=this.lastTokEndLoc,t.lastTokStartLoc=this.lastTokStartLoc,t.context=this.context.slice(),t.firstInvalidTemplateEscapePos=this.firstInvalidTemplateEscapePos,t.strictErrors=this.strictErrors,t.tokensLength=this.tokensLength,t}}var _isDigit=function(r){return r>=48&&r<=57};const forbiddenNumericSeparatorSiblings={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},isAllowedNumericSeparatorSibling={bin:r=>r===48||r===49,oct:r=>r>=48&&r<=55,dec:r=>r>=48&&r<=57,hex:r=>r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102};function readStringContents(r,t,e,s,i,n){const a=e,o=s,h=i;let l="",c=null,p=e;const{length:u}=t;for(;;){if(e>=u){n.unterminated(a,o,h),l+=t.slice(p,e);break}const d=t.charCodeAt(e);if(isStringEnd(r,d,t,e)){l+=t.slice(p,e);break}if(d===92){l+=t.slice(p,e);const m=readEscapedChar(t,e,s,i,r==="template",n);m.ch!==null||c?l+=m.ch:c={pos:e,lineStart:s,curLine:i},{pos:e,lineStart:s,curLine:i}=m,p=e}else d===8232||d===8233?(++i,s=++e):d===10||d===13?r==="template"?(l+=t.slice(p,e)+`
`,++e,d===13&&t.charCodeAt(e)===10&&++e,++i,p=s=e):n.unterminated(a,o,h):++e}return{pos:e,str:l,firstInvalidLoc:c,lineStart:s,curLine:i,containsInvalid:!!c}}function isStringEnd(r,t,e,s){return r==="template"?t===96||t===36&&e.charCodeAt(s+1)===123:t===(r==="double"?34:39)}function readEscapedChar(r,t,e,s,i,n){const a=!i;t++;const o=l=>({pos:t,ch:l,lineStart:e,curLine:s}),h=r.charCodeAt(t++);switch(h){case 110:return o(`
`);case 114:return o("\r");case 120:{let l;return{code:l,pos:t}=readHexChar(r,t,e,s,2,!1,a,n),o(l===null?null:String.fromCharCode(l))}case 117:{let l;return{code:l,pos:t}=readCodePoint(r,t,e,s,a,n),o(l===null?null:String.fromCodePoint(l))}case 116:return o("	");case 98:return o("\b");case 118:return o("\v");case 102:return o("\f");case 13:r.charCodeAt(t)===10&&++t;case 10:e=t,++s;case 8232:case 8233:return o("");case 56:case 57:if(i)return o(null);n.strictNumericEscape(t-1,e,s);default:if(h>=48&&h<=55){const l=t-1;let c=/^[0-7]+/.exec(r.slice(l,t+2))[0],p=parseInt(c,8);p>255&&(c=c.slice(0,-1),p=parseInt(c,8)),t+=c.length-1;const u=r.charCodeAt(t);if(c!=="0"||u===56||u===57){if(i)return o(null);n.strictNumericEscape(l,e,s)}return o(String.fromCharCode(p))}return o(String.fromCharCode(h))}}function readHexChar(r,t,e,s,i,n,a,o){const h=t;let l;return{n:l,pos:t}=readInt(r,t,e,s,16,i,n,!1,o,!a),l===null&&(a?o.invalidEscapeSequence(h,e,s):t=h-1),{code:l,pos:t}}function readInt(r,t,e,s,i,n,a,o,h,l){const c=t,p=i===16?forbiddenNumericSeparatorSiblings.hex:forbiddenNumericSeparatorSiblings.decBinOct,u=i===16?isAllowedNumericSeparatorSibling.hex:i===10?isAllowedNumericSeparatorSibling.dec:i===8?isAllowedNumericSeparatorSibling.oct:isAllowedNumericSeparatorSibling.bin;let d=!1,m=0;for(let f=0,g=n==null?1/0:n;f<g;++f){const y=r.charCodeAt(t);let x;if(y!==95||o==="bail"){if(x=y>=97?y-97+10:y>=65?y-65+10:_isDigit(y)?y-48:1/0,x>=i){if(x<=9&&l)return{n:null,pos:t};if(x<=9&&h.invalidDigit(t,e,s,i))x=0;else{if(!a)break;x=0,d=!0}}++t,m=m*i+x}else{const E=r.charCodeAt(t-1),P=r.charCodeAt(t+1);if(o){if(Number.isNaN(P)||!u(P)||p.has(E)||p.has(P)){if(l)return{n:null,pos:t};h.unexpectedNumericSeparator(t,e,s)}}else{if(l)return{n:null,pos:t};h.numericSeparatorInEscapeSequence(t,e,s)}++t}}return t===c||n!=null&&t-c!==n||d?{n:null,pos:t}:{n:m,pos:t}}function readCodePoint(r,t,e,s,i,n){let a;if(r.charCodeAt(t)===123){if(++t,{code:a,pos:t}=readHexChar(r,t,e,s,r.indexOf("}",t)-t,!0,i,n),++t,a!==null&&a>1114111){if(!i)return{code:null,pos:t};n.invalidCodePoint(t,e,s)}}else({code:a,pos:t}=readHexChar(r,t,e,s,4,!1,i,n));return{code:a,pos:t}}function buildPosition(r,t,e){return new Position(e,r-t,r)}const VALID_REGEX_FLAGS=new Set([103,109,115,105,121,117,100,118]);class Token{constructor(t){const e=t.startIndex||0;this.type=t.type,this.value=t.value,this.start=e+t.start,this.end=e+t.end,this.loc=new SourceLocation(t.startLoc,t.endLoc)}}class Tokenizer extends CommentsParser{constructor(t,e){super(),this.isLookahead=void 0,this.tokens=[],this.errorHandlers_readInt={invalidDigit:(s,i,n,a)=>!!this.options.errorRecovery&&(this.raise(Errors.InvalidDigit,buildPosition(s,i,n),{radix:a}),!0),numericSeparatorInEscapeSequence:this.errorBuilder(Errors.NumericSeparatorInEscapeSequence),unexpectedNumericSeparator:this.errorBuilder(Errors.UnexpectedNumericSeparator)},this.errorHandlers_readCodePoint=Object.assign({},this.errorHandlers_readInt,{invalidEscapeSequence:this.errorBuilder(Errors.InvalidEscapeSequence),invalidCodePoint:this.errorBuilder(Errors.InvalidCodePoint)}),this.errorHandlers_readStringContents_string=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:(s,i,n)=>{this.recordStrictModeErrors(Errors.StrictNumericEscape,buildPosition(s,i,n))},unterminated:(s,i,n)=>{throw this.raise(Errors.UnterminatedString,buildPosition(s-1,i,n))}}),this.errorHandlers_readStringContents_template=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:this.errorBuilder(Errors.StrictNumericEscape),unterminated:(s,i,n)=>{throw this.raise(Errors.UnterminatedTemplate,buildPosition(s,i,n))}}),this.state=new State,this.state.init(t),this.input=e,this.length=e.length,this.comments=[],this.isLookahead=!1}pushToken(t){this.tokens.length=this.state.tokensLength,this.tokens.push(t),++this.state.tokensLength}next(){this.checkKeywordEscapes(),this.options.tokens&&this.pushToken(new Token(this.state)),this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(t){return!!this.match(t)&&(this.next(),!0)}match(t){return this.state.type===t}createLookaheadState(t){return{pos:t.pos,value:null,type:t.type,start:t.start,end:t.end,context:[this.curContext()],inType:t.inType,startLoc:t.startLoc,lastTokEndLoc:t.lastTokEndLoc,curLine:t.curLine,lineStart:t.lineStart,curPosition:t.curPosition}}lookahead(){const t=this.state;this.state=this.createLookaheadState(t),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;const e=this.state;return this.state=t,e}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(t){return skipWhiteSpace.lastIndex=t,skipWhiteSpace.test(this.input)?skipWhiteSpace.lastIndex:t}lookaheadCharCode(){return this.input.charCodeAt(this.nextTokenStart())}nextTokenInLineStart(){return this.nextTokenInLineStartSince(this.state.pos)}nextTokenInLineStartSince(t){return skipWhiteSpaceInLine.lastIndex=t,skipWhiteSpaceInLine.test(this.input)?skipWhiteSpaceInLine.lastIndex:t}lookaheadInLineCharCode(){return this.input.charCodeAt(this.nextTokenInLineStart())}codePointAtPos(t){let e=this.input.charCodeAt(t);if((64512&e)==55296&&++t<this.input.length){const s=this.input.charCodeAt(t);(64512&s)==56320&&(e=65536+((1023&e)<<10)+(1023&s))}return e}setStrict(t){this.state.strict=t,t&&(this.state.strictErrors.forEach(([e,s])=>this.raise(e,s)),this.state.strictErrors.clear())}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){this.skipSpace(),this.state.start=this.state.pos,this.isLookahead||(this.state.startLoc=this.state.curPosition()),this.state.pos>=this.length?this.finishToken(140):this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(t){let e;this.isLookahead||(e=this.state.curPosition());const s=this.state.pos,i=this.input.indexOf(t,s+2);if(i===-1)throw this.raise(Errors.UnterminatedComment,this.state.curPosition());for(this.state.pos=i+t.length,lineBreakG.lastIndex=s+2;lineBreakG.test(this.input)&&lineBreakG.lastIndex<=i;)++this.state.curLine,this.state.lineStart=lineBreakG.lastIndex;if(this.isLookahead)return;const n={type:"CommentBlock",value:this.input.slice(s+2,i),start:this.sourceToOffsetPos(s),end:this.sourceToOffsetPos(i+t.length),loc:new SourceLocation(e,this.state.curPosition())};return this.options.tokens&&this.pushToken(n),n}skipLineComment(t){const e=this.state.pos;let s;this.isLookahead||(s=this.state.curPosition());let i=this.input.charCodeAt(this.state.pos+=t);if(this.state.pos<this.length)for(;!isNewLine(i)&&++this.state.pos<this.length;)i=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;const n=this.state.pos,a={type:"CommentLine",value:this.input.slice(e+t,n),start:this.sourceToOffsetPos(e),end:this.sourceToOffsetPos(n),loc:new SourceLocation(s,this.state.curPosition())};return this.options.tokens&&this.pushToken(a),a}skipSpace(){const t=this.state.pos,e=[];t:for(;this.state.pos<this.length;){const s=this.input.charCodeAt(this.state.pos);switch(s){case 32:case 160:case 9:++this.state.pos;break;case 13:this.input.charCodeAt(this.state.pos+1)===10&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{const i=this.skipBlockComment("*/");i!==void 0&&(this.addComment(i),this.options.attachComment&&e.push(i));break}case 47:{const i=this.skipLineComment(2);i!==void 0&&(this.addComment(i),this.options.attachComment&&e.push(i));break}default:break t}break;default:if(isWhitespace(s))++this.state.pos;else if(s===45&&!this.inModule&&this.options.annexB){const i=this.state.pos;if(this.input.charCodeAt(i+1)!==45||this.input.charCodeAt(i+2)!==62||!(t===0||this.state.lineStart>t))break t;{const n=this.skipLineComment(3);n!==void 0&&(this.addComment(n),this.options.attachComment&&e.push(n))}}else{if(s!==60||this.inModule||!this.options.annexB)break t;{const i=this.state.pos;if(this.input.charCodeAt(i+1)!==33||this.input.charCodeAt(i+2)!==45||this.input.charCodeAt(i+3)!==45)break t;{const n=this.skipLineComment(4);n!==void 0&&(this.addComment(n),this.options.attachComment&&e.push(n))}}}}}if(e.length>0){const s=this.state.pos,i={start:this.sourceToOffsetPos(t),end:this.sourceToOffsetPos(s),comments:e,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(i)}}finishToken(t,e){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();const s=this.state.type;this.state.type=t,this.state.value=e,this.isLookahead||this.updateContext(s)}replaceToken(t){this.state.type=t,this.updateContext()}readToken_numberSign(){if(this.state.pos===0&&this.readToken_interpreter())return;const t=this.state.pos+1,e=this.codePointAtPos(t);if(e>=48&&e<=57)throw this.raise(Errors.UnexpectedDigitAfterHash,this.state.curPosition());if(e===123||e===91&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),this.getPluginOption("recordAndTuple","syntaxType")==="bar")throw this.raise(e===123?Errors.RecordExpressionHashIncorrectStartSyntaxType:Errors.TupleExpressionHashIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,e===123?this.finishToken(7):this.finishToken(1)}else isIdentifierStart(e)?(++this.state.pos,this.finishToken(139,this.readWord1(e))):e===92?(++this.state.pos,this.finishToken(139,this.readWord1())):this.finishOp(27,1)}readToken_dot(){const t=this.input.charCodeAt(this.state.pos+1);t>=48&&t<=57?this.readNumber(!0):t===46&&this.input.charCodeAt(this.state.pos+2)===46?(this.state.pos+=3,this.finishToken(21)):(++this.state.pos,this.finishToken(16))}readToken_slash(){this.input.charCodeAt(this.state.pos+1)===61?this.finishOp(31,2):this.finishOp(56,1)}readToken_interpreter(){if(this.state.pos!==0||this.length<2)return!1;let t=this.input.charCodeAt(this.state.pos+1);if(t!==33)return!1;const e=this.state.pos;for(this.state.pos+=1;!isNewLine(t)&&++this.state.pos<this.length;)t=this.input.charCodeAt(this.state.pos);const s=this.input.slice(e+2,this.state.pos);return this.finishToken(28,s),!0}readToken_mult_modulo(t){let e=t===42?55:54,s=1,i=this.input.charCodeAt(this.state.pos+1);t===42&&i===42&&(s++,i=this.input.charCodeAt(this.state.pos+2),e=57),i!==61||this.state.inType||(s++,e=t===37?33:30),this.finishOp(e,s)}readToken_pipe_amp(t){const e=this.input.charCodeAt(this.state.pos+1);if(e!==t){if(t===124){if(e===62)return void this.finishOp(39,2);if(this.hasPlugin("recordAndTuple")&&e===125){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(Errors.RecordExpressionBarIncorrectEndSyntaxType,this.state.curPosition());return this.state.pos+=2,void this.finishToken(9)}if(this.hasPlugin("recordAndTuple")&&e===93){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(Errors.TupleExpressionBarIncorrectEndSyntaxType,this.state.curPosition());return this.state.pos+=2,void this.finishToken(4)}}e!==61?this.finishOp(t===124?43:45,1):this.finishOp(30,2)}else this.input.charCodeAt(this.state.pos+2)===61?this.finishOp(30,3):this.finishOp(t===124?41:42,2)}readToken_caret(){const t=this.input.charCodeAt(this.state.pos+1);t!==61||this.state.inType?t===94&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"^^"}])?(this.finishOp(37,2),this.input.codePointAt(this.state.pos)===94&&this.unexpected()):this.finishOp(44,1):this.finishOp(32,2)}readToken_atSign(){this.input.charCodeAt(this.state.pos+1)===64&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"@@"}])?this.finishOp(38,2):this.finishOp(26,1)}readToken_plus_min(t){const e=this.input.charCodeAt(this.state.pos+1);e!==t?e===61?this.finishOp(30,2):this.finishOp(53,1):this.finishOp(34,2)}readToken_lt(){const{pos:t}=this.state,e=this.input.charCodeAt(t+1);if(e===60)return this.input.charCodeAt(t+2)===61?void this.finishOp(30,3):void this.finishOp(51,2);e!==61?this.finishOp(47,1):this.finishOp(49,2)}readToken_gt(){const{pos:t}=this.state,e=this.input.charCodeAt(t+1);if(e===62){const s=this.input.charCodeAt(t+2)===62?3:2;return this.input.charCodeAt(t+s)===61?void this.finishOp(30,s+1):void this.finishOp(52,s)}e!==61?this.finishOp(48,1):this.finishOp(49,2)}readToken_eq_excl(t){const e=this.input.charCodeAt(this.state.pos+1);if(e!==61)return t===61&&e===62?(this.state.pos+=2,void this.finishToken(19)):void this.finishOp(t===61?29:35,1);this.finishOp(46,this.input.charCodeAt(this.state.pos+2)===61?3:2)}readToken_question(){const t=this.input.charCodeAt(this.state.pos+1),e=this.input.charCodeAt(this.state.pos+2);t===63?e===61?this.finishOp(30,3):this.finishOp(40,2):t!==46||e>=48&&e<=57?(++this.state.pos,this.finishToken(17)):(this.state.pos+=2,this.finishToken(18))}getTokenFromCode(t){switch(t){case 46:return void this.readToken_dot();case 40:return++this.state.pos,void this.finishToken(10);case 41:return++this.state.pos,void this.finishToken(11);case 59:return++this.state.pos,void this.finishToken(13);case 44:return++this.state.pos,void this.finishToken(12);case 91:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(Errors.TupleExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:return++this.state.pos,void this.finishToken(3);case 123:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(Errors.RecordExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:return++this.state.pos,void this.finishToken(8);case 58:return void(this.hasPlugin("functionBind")&&this.input.charCodeAt(this.state.pos+1)===58?this.finishOp(15,2):(++this.state.pos,this.finishToken(14)));case 63:return void this.readToken_question();case 96:return void this.readTemplateToken();case 48:{const e=this.input.charCodeAt(this.state.pos+1);if(e===120||e===88)return void this.readRadixNumber(16);if(e===111||e===79)return void this.readRadixNumber(8);if(e===98||e===66)return void this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return void this.readNumber(!1);case 34:case 39:return void this.readString(t);case 47:return void this.readToken_slash();case 37:case 42:return void this.readToken_mult_modulo(t);case 124:case 38:return void this.readToken_pipe_amp(t);case 94:return void this.readToken_caret();case 43:case 45:return void this.readToken_plus_min(t);case 60:return void this.readToken_lt();case 62:return void this.readToken_gt();case 61:case 33:return void this.readToken_eq_excl(t);case 126:return void this.finishOp(36,1);case 64:return void this.readToken_atSign();case 35:return void this.readToken_numberSign();case 92:return void this.readWord();default:if(isIdentifierStart(t))return void this.readWord(t)}throw this.raise(Errors.InvalidOrUnexpectedToken,this.state.curPosition(),{unexpected:String.fromCodePoint(t)})}finishOp(t,e){const s=this.input.slice(this.state.pos,this.state.pos+e);this.state.pos+=e,this.finishToken(t,s)}readRegexp(){const t=this.state.startLoc,e=this.state.start+1;let s,i,{pos:n}=this.state;for(;;++n){if(n>=this.length)throw this.raise(Errors.UnterminatedRegExp,createPositionWithColumnOffset(t,1));const l=this.input.charCodeAt(n);if(isNewLine(l))throw this.raise(Errors.UnterminatedRegExp,createPositionWithColumnOffset(t,1));if(s)s=!1;else{if(l===91)i=!0;else if(l===93&&i)i=!1;else if(l===47&&!i)break;s=l===92}}const a=this.input.slice(e,n);++n;let o="";const h=()=>createPositionWithColumnOffset(t,n+2-e);for(;n<this.length;){const l=this.codePointAtPos(n),c=String.fromCharCode(l);if(VALID_REGEX_FLAGS.has(l))l===118?o.includes("u")&&this.raise(Errors.IncompatibleRegExpUVFlags,h()):l===117&&o.includes("v")&&this.raise(Errors.IncompatibleRegExpUVFlags,h()),o.includes(c)&&this.raise(Errors.DuplicateRegExpFlags,h());else{if(!isIdentifierChar(l)&&l!==92)break;this.raise(Errors.MalformedRegExpFlags,h())}++n,o+=c}this.state.pos=n,this.finishToken(138,{pattern:a,flags:o})}readInt(t,e,s=!1,i=!0){const{n,pos:a}=readInt(this.input,this.state.pos,this.state.lineStart,this.state.curLine,t,e,s,i,this.errorHandlers_readInt,!1);return this.state.pos=a,n}readRadixNumber(t){const e=this.state.pos,s=this.state.curPosition();let i=!1;this.state.pos+=2;const n=this.readInt(t);n==null&&this.raise(Errors.InvalidDigit,createPositionWithColumnOffset(s,2),{radix:t});const a=this.input.charCodeAt(this.state.pos);if(a===110)++this.state.pos,i=!0;else if(a===109)throw this.raise(Errors.InvalidDecimal,s);if(isIdentifierStart(this.codePointAtPos(this.state.pos)))throw this.raise(Errors.NumberIdentifier,this.state.curPosition());if(i){const o=this.input.slice(e,this.state.pos).replace(/[_n]/g,"");this.finishToken(136,o)}else this.finishToken(135,n)}readNumber(t){const e=this.state.pos,s=this.state.curPosition();let i=!1,n=!1,a=!1,o=!1;t||this.readInt(10)!==null||this.raise(Errors.InvalidNumber,this.state.curPosition());const h=this.state.pos-e>=2&&this.input.charCodeAt(e)===48;if(h){const d=this.input.slice(e,this.state.pos);if(this.recordStrictModeErrors(Errors.StrictOctalLiteral,s),!this.state.strict){const m=d.indexOf("_");m>0&&this.raise(Errors.ZeroDigitNumericSeparator,createPositionWithColumnOffset(s,m))}o=h&&!/[89]/.test(d)}let l=this.input.charCodeAt(this.state.pos);if(l!==46||o||(++this.state.pos,this.readInt(10),i=!0,l=this.input.charCodeAt(this.state.pos)),l!==69&&l!==101||o||(l=this.input.charCodeAt(++this.state.pos),l!==43&&l!==45||++this.state.pos,this.readInt(10)===null&&this.raise(Errors.InvalidOrMissingExponent,s),i=!0,a=!0,l=this.input.charCodeAt(this.state.pos)),l===110&&((i||h)&&this.raise(Errors.InvalidBigIntLiteral,s),++this.state.pos,n=!0),l===109){this.expectPlugin("decimal",this.state.curPosition()),(a||h)&&this.raise(Errors.InvalidDecimal,s),++this.state.pos;var c=!0}if(isIdentifierStart(this.codePointAtPos(this.state.pos)))throw this.raise(Errors.NumberIdentifier,this.state.curPosition());const p=this.input.slice(e,this.state.pos).replace(/[_mn]/g,"");if(n)return void this.finishToken(136,p);if(c)return void this.finishToken(137,p);const u=o?parseInt(p,8):parseFloat(p);this.finishToken(135,u)}readCodePoint(t){const{code:e,pos:s}=readCodePoint(this.input,this.state.pos,this.state.lineStart,this.state.curLine,t,this.errorHandlers_readCodePoint);return this.state.pos=s,e}readString(t){const{str:e,pos:s,curLine:i,lineStart:n}=readStringContents(t===34?"double":"single",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_string);this.state.pos=s+1,this.state.lineStart=n,this.state.curLine=i,this.finishToken(134,e)}readTemplateContinuation(){this.match(8)||this.unexpected(null,8),this.state.pos--,this.readTemplateToken()}readTemplateToken(){const t=this.input[this.state.pos],{str:e,firstInvalidLoc:s,pos:i,curLine:n,lineStart:a}=readStringContents("template",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_template);this.state.pos=i+1,this.state.lineStart=a,this.state.curLine=n,s&&(this.state.firstInvalidTemplateEscapePos=new Position(s.curLine,s.pos-s.lineStart,this.sourceToOffsetPos(s.pos))),this.input.codePointAt(i)===96?this.finishToken(24,s?null:t+e+"`"):(this.state.pos++,this.finishToken(25,s?null:t+e+"${"))}recordStrictModeErrors(t,e){const s=e.index;this.state.strict&&!this.state.strictErrors.has(s)?this.raise(t,e):this.state.strictErrors.set(s,[t,e])}readWord1(t){this.state.containsEsc=!1;let e="";const s=this.state.pos;let i=this.state.pos;for(t!==void 0&&(this.state.pos+=t<=65535?1:2);this.state.pos<this.length;){const n=this.codePointAtPos(this.state.pos);if(isIdentifierChar(n))this.state.pos+=n<=65535?1:2;else{if(n!==92)break;{this.state.containsEsc=!0,e+=this.input.slice(i,this.state.pos);const a=this.state.curPosition(),o=this.state.pos===s?isIdentifierStart:isIdentifierChar;if(this.input.charCodeAt(++this.state.pos)!==117){this.raise(Errors.MissingUnicodeEscape,this.state.curPosition()),i=this.state.pos-1;continue}++this.state.pos;const h=this.readCodePoint(!0);h!==null&&(o(h)||this.raise(Errors.EscapedCharNotAnIdentifier,a),e+=String.fromCodePoint(h)),i=this.state.pos}}}return e+this.input.slice(i,this.state.pos)}readWord(t){const e=this.readWord1(t),s=keywords$1.get(e);s!==void 0?this.finishToken(s,tokenLabelName(s)):this.finishToken(132,e)}checkKeywordEscapes(){const{type:t}=this.state;tokenIsKeyword(t)&&this.state.containsEsc&&this.raise(Errors.InvalidEscapedReservedWord,this.state.startLoc,{reservedWord:tokenLabelName(t)})}raise(t,e,s={}){const i=t(e instanceof Position?e:e.loc.start,s);if(!this.options.errorRecovery)throw i;return this.isLookahead||this.state.errors.push(i),i}raiseOverwrite(t,e,s={}){const i=e instanceof Position?e:e.loc.start,n=i.index,a=this.state.errors;for(let o=a.length-1;o>=0;o--){const h=a[o];if(h.loc.index===n)return a[o]=t(i,s);if(h.loc.index<n)break}return this.raise(t,e,s)}updateContext(t){}unexpected(t,e){throw this.raise(Errors.UnexpectedToken,t!=null?t:this.state.startLoc,{expected:e?tokenLabelName(e):null})}expectPlugin(t,e){if(this.hasPlugin(t))return!0;throw this.raise(Errors.MissingPlugin,e!=null?e:this.state.startLoc,{missingPlugin:[t]})}expectOnePlugin(t){if(!t.some(e=>this.hasPlugin(e)))throw this.raise(Errors.MissingOneOfPlugins,this.state.startLoc,{missingPlugin:t})}errorBuilder(t){return(e,s,i)=>{this.raise(t,buildPosition(e,s,i))}}}class ClassScope{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}}class ClassScopeHandler{constructor(t){this.parser=void 0,this.stack=[],this.undefinedPrivateNames=new Map,this.parser=t}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new ClassScope)}exit(){const t=this.stack.pop(),e=this.current();for(const[s,i]of Array.from(t.undefinedPrivateNames))e?e.undefinedPrivateNames.has(s)||e.undefinedPrivateNames.set(s,i):this.parser.raise(Errors.InvalidPrivateFieldResolution,i,{identifierName:s})}declarePrivateName(t,e,s){const{privateNames:i,loneAccessors:n,undefinedPrivateNames:a}=this.current();let o=i.has(t);if(3&e){const h=o&&n.get(t);h?(o=(3&h)===(3&e)||(4&h)!==(4&e),o||n.delete(t)):o||n.set(t,e)}o&&this.parser.raise(Errors.PrivateNameRedeclaration,s,{identifierName:t}),i.add(t),a.delete(t)}usePrivateName(t,e){let s;for(s of this.stack)if(s.privateNames.has(t))return;s?s.undefinedPrivateNames.set(t,e):this.parser.raise(Errors.InvalidPrivateFieldResolution,e,{identifierName:t})}}class ExpressionScope{constructor(t=0){this.type=t}canBeArrowParameterDeclaration(){return this.type===2||this.type===1}isCertainlyParameterDeclaration(){return this.type===3}}class ArrowHeadParsingScope extends ExpressionScope{constructor(t){super(t),this.declarationErrors=new Map}recordDeclarationError(t,e){const s=e.index;this.declarationErrors.set(s,[t,e])}clearDeclarationError(t){this.declarationErrors.delete(t)}iterateErrors(t){this.declarationErrors.forEach(t)}}class ExpressionScopeHandler{constructor(t){this.parser=void 0,this.stack=[new ExpressionScope],this.parser=t}enter(t){this.stack.push(t)}exit(){this.stack.pop()}recordParameterInitializerError(t,e){const s=e.loc.start,{stack:i}=this;let n=i.length-1,a=i[n];for(;!a.isCertainlyParameterDeclaration();){if(!a.canBeArrowParameterDeclaration())return;a.recordDeclarationError(t,s),a=i[--n]}this.parser.raise(t,s)}recordArrowParameterBindingError(t,e){const{stack:s}=this,i=s[s.length-1],n=e.loc.start;if(i.isCertainlyParameterDeclaration())this.parser.raise(t,n);else{if(!i.canBeArrowParameterDeclaration())return;i.recordDeclarationError(t,n)}}recordAsyncArrowParametersError(t){const{stack:e}=this;let s=e.length-1,i=e[s];for(;i.canBeArrowParameterDeclaration();)i.type===2&&i.recordDeclarationError(Errors.AwaitBindingIdentifier,t),i=e[--s]}validateAsPattern(){const{stack:t}=this,e=t[t.length-1];e.canBeArrowParameterDeclaration()&&e.iterateErrors(([s,i])=>{this.parser.raise(s,i);let n=t.length-2,a=t[n];for(;a.canBeArrowParameterDeclaration();)a.clearDeclarationError(i.index),a=t[--n]})}}function newParameterDeclarationScope(){return new ExpressionScope(3)}function newArrowHeadScope(){return new ArrowHeadParsingScope(1)}function newAsyncArrowScope(){return new ArrowHeadParsingScope(2)}function newExpressionScope(){return new ExpressionScope}class ProductionParameterHandler{constructor(){this.stacks=[]}enter(t){this.stacks.push(t)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(2&this.currentFlags())>0}get hasYield(){return(1&this.currentFlags())>0}get hasReturn(){return(4&this.currentFlags())>0}get hasIn(){return(8&this.currentFlags())>0}}function functionFlags(r,t){return(r?2:0)|(t?1:0)}class UtilParser extends Tokenizer{addExtra(t,e,s,i=!0){if(!t)return;let{extra:n}=t;n==null&&(n={},t.extra=n),i?n[e]=s:Object.defineProperty(n,e,{enumerable:i,value:s})}isContextual(t){return this.state.type===t&&!this.state.containsEsc}isUnparsedContextual(t,e){const s=t+e.length;if(this.input.slice(t,s)===e){const i=this.input.charCodeAt(s);return!(isIdentifierChar(i)||(64512&i)==55296)}return!1}isLookaheadContextual(t){const e=this.nextTokenStart();return this.isUnparsedContextual(e,t)}eatContextual(t){return!!this.isContextual(t)&&(this.next(),!0)}expectContextual(t,e){if(!this.eatContextual(t)){if(e!=null)throw this.raise(e,this.state.startLoc);this.unexpected(null,t)}}canInsertSemicolon(){return this.match(140)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return hasNewLine(this.input,this.offsetToSourcePos(this.state.lastTokEndLoc.index),this.state.start)}hasFollowingLineBreak(){return hasNewLine(this.input,this.state.end,this.nextTokenStart())}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(t=!0){(t?this.isLineTerminator():this.eat(13))||this.raise(Errors.MissingSemicolon,this.state.lastTokEndLoc)}expect(t,e){this.eat(t)||this.unexpected(e,t)}tryParse(t,e=this.state.clone()){const s={node:null};try{const i=t((n=null)=>{throw s.node=n,s});if(this.state.errors.length>e.errors.length){const n=this.state;return this.state=e,this.state.tokensLength=n.tokensLength,{node:i,error:n.errors[e.errors.length],thrown:!1,aborted:!1,failState:n}}return{node:i,error:null,thrown:!1,aborted:!1,failState:null}}catch(i){const n=this.state;if(this.state=e,i instanceof SyntaxError)return{node:null,error:i,thrown:!0,aborted:!1,failState:n};if(i===s)return{node:s.node,error:null,thrown:!1,aborted:!0,failState:n};throw i}}checkExpressionErrors(t,e){if(!t)return!1;const{shorthandAssignLoc:s,doubleProtoLoc:i,privateKeyLoc:n,optionalParametersLoc:a}=t;if(!e)return!!(s||i||a||n);s!=null&&this.raise(Errors.InvalidCoverInitializedName,s),i!=null&&this.raise(Errors.DuplicateProto,i),n!=null&&this.raise(Errors.UnexpectedPrivateField,n),a!=null&&this.unexpected(a)}isLiteralPropertyName(){return tokenIsLiteralPropertyName(this.state.type)}isPrivateName(t){return t.type==="PrivateName"}getPrivateNameSV(t){return t.id.name}hasPropertyAsPrivateName(t){return(t.type==="MemberExpression"||t.type==="OptionalMemberExpression")&&this.isPrivateName(t.property)}isObjectProperty(t){return t.type==="ObjectProperty"}isObjectMethod(t){return t.type==="ObjectMethod"}initializeScopes(t=this.options.sourceType==="module"){const e=this.state.labels;this.state.labels=[];const s=this.exportedIdentifiers;this.exportedIdentifiers=new Set;const i=this.inModule;this.inModule=t;const n=this.scope,a=this.getScopeHandler();this.scope=new a(this,t);const o=this.prodParam;this.prodParam=new ProductionParameterHandler;const h=this.classScope;this.classScope=new ClassScopeHandler(this);const l=this.expressionScope;return this.expressionScope=new ExpressionScopeHandler(this),()=>{this.state.labels=e,this.exportedIdentifiers=s,this.inModule=i,this.scope=n,this.prodParam=o,this.classScope=h,this.expressionScope=l}}enterInitialScopes(){let t=0;this.inModule&&(t|=2),this.scope.enter(1),this.prodParam.enter(t)}checkDestructuringPrivate(t){const{privateKeyLoc:e}=t;e!==null&&this.expectPlugin("destructuringPrivate",e)}}class ExpressionErrors{constructor(){this.shorthandAssignLoc=null,this.doubleProtoLoc=null,this.privateKeyLoc=null,this.optionalParametersLoc=null}}class Node{constructor(t,e,s){this.type="",this.start=e,this.end=0,this.loc=new SourceLocation(s),t!=null&&t.options.ranges&&(this.range=[e,0]),t!=null&&t.filename&&(this.loc.filename=t.filename)}}const NodePrototype=Node.prototype;function clonePlaceholder(r){return cloneIdentifier(r)}function cloneIdentifier(r){const{type:t,start:e,end:s,loc:i,range:n,extra:a,name:o}=r,h=Object.create(NodePrototype);return h.type=t,h.start=e,h.end=s,h.loc=i,h.range=n,h.extra=a,h.name=o,t==="Placeholder"&&(h.expectedNode=r.expectedNode),h}function cloneStringLiteral(r){const{type:t,start:e,end:s,loc:i,range:n,extra:a}=r;if(t==="Placeholder")return clonePlaceholder(r);const o=Object.create(NodePrototype);return o.type=t,o.start=e,o.end=s,o.loc=i,o.range=n,r.raw!==void 0?o.raw=r.raw:o.extra=a,o.value=r.value,o}NodePrototype.__clone=function(){const r=new Node(void 0,this.start,this.loc.start),t=Object.keys(this);for(let e=0,s=t.length;e<s;e++){const i=t[e];i!=="leadingComments"&&i!=="trailingComments"&&i!=="innerComments"&&(r[i]=this[i])}return r};class NodeUtils extends UtilParser{startNode(){const t=this.state.startLoc;return new Node(this,t.index,t)}startNodeAt(t){return new Node(this,t.index,t)}startNodeAtNode(t){return this.startNodeAt(t.loc.start)}finishNode(t,e){return this.finishNodeAt(t,e,this.state.lastTokEndLoc)}finishNodeAt(t,e,s){return t.type=e,t.end=s.index,t.loc.end=s,this.options.ranges&&(t.range[1]=s.index),this.options.attachComment&&this.processComment(t),t}resetStartLocation(t,e){t.start=e.index,t.loc.start=e,this.options.ranges&&(t.range[0]=e.index)}resetEndLocation(t,e=this.state.lastTokEndLoc){t.end=e.index,t.loc.end=e,this.options.ranges&&(t.range[1]=e.index)}resetStartLocationFromNode(t,e){this.resetStartLocation(t,e.loc.start)}}const reservedTypes=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),FlowErrors=ParseErrorEnum`flow`({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:({reservedType:r})=>`Cannot overwrite reserved type ${r}.`,DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:({memberName:r,enumName:t})=>`Boolean enum members need to be initialized. Use either \`${r} = true,\` or \`${r} = false,\` in enum \`${t}\`.`,EnumDuplicateMemberName:({memberName:r,enumName:t})=>`Enum member names need to be unique, but the name \`${r}\` has already been used before in enum \`${t}\`.`,EnumInconsistentMemberValues:({enumName:r})=>`Enum \`${r}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`,EnumInvalidExplicitType:({invalidEnumType:r,enumName:t})=>`Enum type \`${r}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${t}\`.`,EnumInvalidExplicitTypeUnknownSupplied:({enumName:r})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${r}\`.`,EnumInvalidMemberInitializerPrimaryType:({enumName:r,memberName:t,explicitType:e})=>`Enum \`${r}\` has type \`${e}\`, so the initializer of \`${t}\` needs to be a ${e} literal.`,EnumInvalidMemberInitializerSymbolType:({enumName:r,memberName:t})=>`Symbol enum members cannot be initialized. Use \`${t},\` in enum \`${r}\`.`,EnumInvalidMemberInitializerUnknownType:({enumName:r,memberName:t})=>`The enum member initializer for \`${t}\` needs to be a literal (either a boolean, number, or string) in enum \`${r}\`.`,EnumInvalidMemberName:({enumName:r,memberName:t,suggestion:e})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${t}\`, consider using \`${e}\`, in enum \`${r}\`.`,EnumNumberMemberNotInitialized:({enumName:r,memberName:t})=>`Number enum members need to be initialized, e.g. \`${t} = 1\` in enum \`${r}\`.`,EnumStringMemberInconsistentlyInitialized:({enumName:r})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${r}\`.`,GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` or `typeof` keyword.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:Object.assign({message:"A binding pattern parameter cannot be optional in an implementation signature."},{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:({reservedType:r})=>`Unexpected reserved type ${r}.`,UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:({unsupportedExportKind:r,suggestion:t})=>`\`declare export ${r}\` is not supported. Use \`${t}\` instead.`,UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."});function isEsModuleType(r){return r.type==="DeclareExportAllDeclaration"||r.type==="DeclareExportDeclaration"&&(!r.declaration||r.declaration.type!=="TypeAlias"&&r.declaration.type!=="InterfaceDeclaration")}function hasTypeImportKind(r){return r.importKind==="type"||r.importKind==="typeof"}const exportSuggestions={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};function partition(r,t){const e=[],s=[];for(let i=0;i<r.length;i++)(t(r[i],i,r)?e:s).push(r[i]);return[e,s]}const FLOW_PRAGMA_REGEX=/\*?\s*@((?:no)?flow)\b/;var flow=r=>class extends r{constructor(...t){super(...t),this.flowPragma=void 0}getScopeHandler(){return FlowScopeHandler}shouldParseTypes(){return this.getPluginOption("flow","all")||this.flowPragma==="flow"}finishToken(t,e){t!==134&&t!==13&&t!==28&&this.flowPragma===void 0&&(this.flowPragma=null),super.finishToken(t,e)}addComment(t){if(this.flowPragma===void 0){const e=FLOW_PRAGMA_REGEX.exec(t.value);if(e)if(e[1]==="flow")this.flowPragma="flow";else{if(e[1]!=="noflow")throw new Error("Unexpected flow pragma");this.flowPragma="noflow"}}super.addComment(t)}flowParseTypeInitialiser(t){const e=this.state.inType;this.state.inType=!0,this.expect(t||14);const s=this.flowParseType();return this.state.inType=e,s}flowParsePredicate(){const t=this.startNode(),e=this.state.startLoc;return this.next(),this.expectContextual(110),this.state.lastTokStartLoc.index>e.index+1&&this.raise(FlowErrors.UnexpectedSpaceBetweenModuloChecks,e),this.eat(10)?(t.value=super.parseExpression(),this.expect(11),this.finishNode(t,"DeclaredPredicate")):this.finishNode(t,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){const t=this.state.inType;this.state.inType=!0,this.expect(14);let e=null,s=null;return this.match(54)?(this.state.inType=t,s=this.flowParsePredicate()):(e=this.flowParseType(),this.state.inType=t,this.match(54)&&(s=this.flowParsePredicate())),[e,s]}flowParseDeclareClass(t){return this.next(),this.flowParseInterfaceish(t,!0),this.finishNode(t,"DeclareClass")}flowParseDeclareFunction(t){this.next();const e=t.id=this.parseIdentifier(),s=this.startNode(),i=this.startNode();this.match(47)?s.typeParameters=this.flowParseTypeParameterDeclaration():s.typeParameters=null,this.expect(10);const n=this.flowParseFunctionTypeParams();return s.params=n.params,s.rest=n.rest,s.this=n._this,this.expect(11),[s.returnType,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),i.typeAnnotation=this.finishNode(s,"FunctionTypeAnnotation"),e.typeAnnotation=this.finishNode(i,"TypeAnnotation"),this.resetEndLocation(e),this.semicolon(),this.scope.declareName(t.id.name,2048,t.id.loc.start),this.finishNode(t,"DeclareFunction")}flowParseDeclare(t,e){return this.match(80)?this.flowParseDeclareClass(t):this.match(68)?this.flowParseDeclareFunction(t):this.match(74)?this.flowParseDeclareVariable(t):this.eatContextual(127)?this.match(16)?this.flowParseDeclareModuleExports(t):(e&&this.raise(FlowErrors.NestedDeclareModule,this.state.lastTokStartLoc),this.flowParseDeclareModule(t)):this.isContextual(130)?this.flowParseDeclareTypeAlias(t):this.isContextual(131)?this.flowParseDeclareOpaqueType(t):this.isContextual(129)?this.flowParseDeclareInterface(t):this.match(82)?this.flowParseDeclareExportDeclaration(t,e):void this.unexpected()}flowParseDeclareVariable(t){return this.next(),t.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(t.id.name,5,t.id.loc.start),this.semicolon(),this.finishNode(t,"DeclareVariable")}flowParseDeclareModule(t){this.scope.enter(0),this.match(134)?t.id=super.parseExprAtom():t.id=this.parseIdentifier();const e=t.body=this.startNode(),s=e.body=[];for(this.expect(5);!this.match(8);){let a=this.startNode();this.match(83)?(this.next(),this.isContextual(130)||this.match(87)||this.raise(FlowErrors.InvalidNonTypeImportInDeclareModule,this.state.lastTokStartLoc),super.parseImport(a)):(this.expectContextual(125,FlowErrors.UnsupportedStatementInDeclareModule),a=this.flowParseDeclare(a,!0)),s.push(a)}this.scope.exit(),this.expect(8),this.finishNode(e,"BlockStatement");let i=null,n=!1;return s.forEach(a=>{isEsModuleType(a)?(i==="CommonJS"&&this.raise(FlowErrors.AmbiguousDeclareModuleKind,a),i="ES"):a.type==="DeclareModuleExports"&&(n&&this.raise(FlowErrors.DuplicateDeclareModuleExports,a),i==="ES"&&this.raise(FlowErrors.AmbiguousDeclareModuleKind,a),i="CommonJS",n=!0)}),t.kind=i||"CommonJS",this.finishNode(t,"DeclareModule")}flowParseDeclareExportDeclaration(t,e){if(this.expect(82),this.eat(65))return this.match(68)||this.match(80)?t.declaration=this.flowParseDeclare(this.startNode()):(t.declaration=this.flowParseType(),this.semicolon()),t.default=!0,this.finishNode(t,"DeclareExportDeclaration");if(this.match(75)||this.isLet()||(this.isContextual(130)||this.isContextual(129))&&!e){const s=this.state.value;throw this.raise(FlowErrors.UnsupportedDeclareExportKind,this.state.startLoc,{unsupportedExportKind:s,suggestion:exportSuggestions[s]})}return this.match(74)||this.match(68)||this.match(80)||this.isContextual(131)?(t.declaration=this.flowParseDeclare(this.startNode()),t.default=!1,this.finishNode(t,"DeclareExportDeclaration")):this.match(55)||this.match(5)||this.isContextual(129)||this.isContextual(130)||this.isContextual(131)?((t=this.parseExport(t,null)).type==="ExportNamedDeclaration"&&(t.type="ExportDeclaration",t.default=!1,delete t.exportKind),t.type="Declare"+t.type,t):void this.unexpected()}flowParseDeclareModuleExports(t){return this.next(),this.expectContextual(111),t.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(t,"DeclareModuleExports")}flowParseDeclareTypeAlias(t){this.next();const e=this.flowParseTypeAlias(t);return e.type="DeclareTypeAlias",e}flowParseDeclareOpaqueType(t){this.next();const e=this.flowParseOpaqueType(t,!0);return e.type="DeclareOpaqueType",e}flowParseDeclareInterface(t){return this.next(),this.flowParseInterfaceish(t,!1),this.finishNode(t,"DeclareInterface")}flowParseInterfaceish(t,e){if(t.id=this.flowParseRestrictedIdentifier(!e,!0),this.scope.declareName(t.id.name,e?17:8201,t.id.loc.start),this.match(47)?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.extends=[],this.eat(81))do t.extends.push(this.flowParseInterfaceExtends());while(!e&&this.eat(12));if(e){if(t.implements=[],t.mixins=[],this.eatContextual(117))do t.mixins.push(this.flowParseInterfaceExtends());while(this.eat(12));if(this.eatContextual(113))do t.implements.push(this.flowParseInterfaceExtends());while(this.eat(12))}t.body=this.flowParseObjectType({allowStatic:e,allowExact:!1,allowSpread:!1,allowProto:e,allowInexact:!1})}flowParseInterfaceExtends(){const t=this.startNode();return t.id=this.flowParseQualifiedTypeIdentifier(),this.match(47)?t.typeParameters=this.flowParseTypeParameterInstantiation():t.typeParameters=null,this.finishNode(t,"InterfaceExtends")}flowParseInterface(t){return this.flowParseInterfaceish(t,!1),this.finishNode(t,"InterfaceDeclaration")}checkNotUnderscore(t){t==="_"&&this.raise(FlowErrors.UnexpectedReservedUnderscore,this.state.startLoc)}checkReservedType(t,e,s){reservedTypes.has(t)&&this.raise(s?FlowErrors.AssignReservedType:FlowErrors.UnexpectedReservedType,e,{reservedType:t})}flowParseRestrictedIdentifier(t,e){return this.checkReservedType(this.state.value,this.state.startLoc,e),this.parseIdentifier(t)}flowParseTypeAlias(t){return t.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(t.id.name,8201,t.id.loc.start),this.match(47)?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(t,"TypeAlias")}flowParseOpaqueType(t,e){return this.expectContextual(130),t.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(t.id.name,8201,t.id.loc.start),this.match(47)?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.supertype=null,this.match(14)&&(t.supertype=this.flowParseTypeInitialiser(14)),t.impltype=null,e||(t.impltype=this.flowParseTypeInitialiser(29)),this.semicolon(),this.finishNode(t,"OpaqueType")}flowParseTypeParameter(t=!1){const e=this.state.startLoc,s=this.startNode(),i=this.flowParseVariance(),n=this.flowParseTypeAnnotatableIdentifier();return s.name=n.name,s.variance=i,s.bound=n.typeAnnotation,this.match(29)?(this.eat(29),s.default=this.flowParseType()):t&&this.raise(FlowErrors.MissingTypeParamDefault,e),this.finishNode(s,"TypeParameter")}flowParseTypeParameterDeclaration(){const t=this.state.inType,e=this.startNode();e.params=[],this.state.inType=!0,this.match(47)||this.match(143)?this.next():this.unexpected();let s=!1;do{const i=this.flowParseTypeParameter(s);e.params.push(i),i.default&&(s=!0),this.match(48)||this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=t,this.finishNode(e,"TypeParameterDeclaration")}flowParseTypeParameterInstantiation(){const t=this.startNode(),e=this.state.inType;t.params=[],this.state.inType=!0,this.expect(47);const s=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.match(48);)t.params.push(this.flowParseType()),this.match(48)||this.expect(12);return this.state.noAnonFunctionType=s,this.expect(48),this.state.inType=e,this.finishNode(t,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){const t=this.startNode(),e=this.state.inType;for(t.params=[],this.state.inType=!0,this.expect(47);!this.match(48);)t.params.push(this.flowParseTypeOrImplicitInstantiation()),this.match(48)||this.expect(12);return this.expect(48),this.state.inType=e,this.finishNode(t,"TypeParameterInstantiation")}flowParseInterfaceType(){const t=this.startNode();if(this.expectContextual(129),t.extends=[],this.eat(81))do t.extends.push(this.flowParseInterfaceExtends());while(this.eat(12));return t.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(t,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(135)||this.match(134)?super.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(t,e,s){return t.static=e,this.lookahead().type===14?(t.id=this.flowParseObjectPropertyKey(),t.key=this.flowParseTypeInitialiser()):(t.id=null,t.key=this.flowParseType()),this.expect(3),t.value=this.flowParseTypeInitialiser(),t.variance=s,this.finishNode(t,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(t,e){return t.static=e,t.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10)?(t.method=!0,t.optional=!1,t.value=this.flowParseObjectTypeMethodish(this.startNodeAt(t.loc.start))):(t.method=!1,this.eat(17)&&(t.optional=!0),t.value=this.flowParseTypeInitialiser()),this.finishNode(t,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(t){for(t.params=[],t.rest=null,t.typeParameters=null,t.this=null,this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(10),this.match(78)&&(t.this=this.flowParseFunctionTypeParam(!0),t.this.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)t.params.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(t.rest=this.flowParseFunctionTypeParam(!1)),this.expect(11),t.returnType=this.flowParseTypeInitialiser(),this.finishNode(t,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(t,e){const s=this.startNode();return t.static=e,t.value=this.flowParseObjectTypeMethodish(s),this.finishNode(t,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:t,allowExact:e,allowSpread:s,allowProto:i,allowInexact:n}){const a=this.state.inType;this.state.inType=!0;const o=this.startNode();let h,l;o.callProperties=[],o.properties=[],o.indexers=[],o.internalSlots=[];let c=!1;for(e&&this.match(6)?(this.expect(6),h=9,l=!0):(this.expect(5),h=8,l=!1),o.exact=l;!this.match(h);){let u=!1,d=null,m=null;const f=this.startNode();if(i&&this.isContextual(118)){const y=this.lookahead();y.type!==14&&y.type!==17&&(this.next(),d=this.state.startLoc,t=!1)}if(t&&this.isContextual(106)){const y=this.lookahead();y.type!==14&&y.type!==17&&(this.next(),u=!0)}const g=this.flowParseVariance();if(this.eat(0))d!=null&&this.unexpected(d),this.eat(0)?(g&&this.unexpected(g.loc.start),o.internalSlots.push(this.flowParseObjectTypeInternalSlot(f,u))):o.indexers.push(this.flowParseObjectTypeIndexer(f,u,g));else if(this.match(10)||this.match(47))d!=null&&this.unexpected(d),g&&this.unexpected(g.loc.start),o.callProperties.push(this.flowParseObjectTypeCallProperty(f,u));else{let y="init";(this.isContextual(99)||this.isContextual(104))&&tokenIsLiteralPropertyName(this.lookahead().type)&&(y=this.state.value,this.next());const x=this.flowParseObjectTypeProperty(f,u,d,g,y,s,n!=null?n:!l);x===null?(c=!0,m=this.state.lastTokStartLoc):o.properties.push(x)}this.flowObjectTypeSemicolon(),!m||this.match(8)||this.match(9)||this.raise(FlowErrors.UnexpectedExplicitInexactInObject,m)}this.expect(h),s&&(o.inexact=c);const p=this.finishNode(o,"ObjectTypeAnnotation");return this.state.inType=a,p}flowParseObjectTypeProperty(t,e,s,i,n,a,o){if(this.eat(21))return this.match(12)||this.match(13)||this.match(8)||this.match(9)?(a?o||this.raise(FlowErrors.InexactInsideExact,this.state.lastTokStartLoc):this.raise(FlowErrors.InexactInsideNonObject,this.state.lastTokStartLoc),i&&this.raise(FlowErrors.InexactVariance,i),null):(a||this.raise(FlowErrors.UnexpectedSpreadType,this.state.lastTokStartLoc),s!=null&&this.unexpected(s),i&&this.raise(FlowErrors.SpreadVariance,i),t.argument=this.flowParseType(),this.finishNode(t,"ObjectTypeSpreadProperty"));{t.key=this.flowParseObjectPropertyKey(),t.static=e,t.proto=s!=null,t.kind=n;let h=!1;return this.match(47)||this.match(10)?(t.method=!0,s!=null&&this.unexpected(s),i&&this.unexpected(i.loc.start),t.value=this.flowParseObjectTypeMethodish(this.startNodeAt(t.loc.start)),n!=="get"&&n!=="set"||this.flowCheckGetterSetterParams(t),!a&&t.key.name==="constructor"&&t.value.this&&this.raise(FlowErrors.ThisParamBannedInConstructor,t.value.this)):(n!=="init"&&this.unexpected(),t.method=!1,this.eat(17)&&(h=!0),t.value=this.flowParseTypeInitialiser(),t.variance=i),t.optional=h,this.finishNode(t,"ObjectTypeProperty")}}flowCheckGetterSetterParams(t){const e=t.kind==="get"?0:1,s=t.value.params.length+(t.value.rest?1:0);t.value.this&&this.raise(t.kind==="get"?FlowErrors.GetterMayNotHaveThisParam:FlowErrors.SetterMayNotHaveThisParam,t.value.this),s!==e&&this.raise(t.kind==="get"?Errors.BadGetterArity:Errors.BadSetterArity,t),t.kind==="set"&&t.value.rest&&this.raise(Errors.BadSetterRestParameter,t)}flowObjectTypeSemicolon(){this.eat(13)||this.eat(12)||this.match(8)||this.match(9)||this.unexpected()}flowParseQualifiedTypeIdentifier(t,e){t!=null||(t=this.state.startLoc);let s=e||this.flowParseRestrictedIdentifier(!0);for(;this.eat(16);){const i=this.startNodeAt(t);i.qualification=s,i.id=this.flowParseRestrictedIdentifier(!0),s=this.finishNode(i,"QualifiedTypeIdentifier")}return s}flowParseGenericType(t,e){const s=this.startNodeAt(t);return s.typeParameters=null,s.id=this.flowParseQualifiedTypeIdentifier(t,e),this.match(47)&&(s.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(s,"GenericTypeAnnotation")}flowParseTypeofType(){const t=this.startNode();return this.expect(87),t.argument=this.flowParsePrimaryType(),this.finishNode(t,"TypeofTypeAnnotation")}flowParseTupleType(){const t=this.startNode();for(t.types=[],this.expect(0);this.state.pos<this.length&&!this.match(3)&&(t.types.push(this.flowParseType()),!this.match(3));)this.expect(12);return this.expect(3),this.finishNode(t,"TupleTypeAnnotation")}flowParseFunctionTypeParam(t){let e=null,s=!1,i=null;const n=this.startNode(),a=this.lookahead(),o=this.state.type===78;return a.type===14||a.type===17?(o&&!t&&this.raise(FlowErrors.ThisParamMustBeFirst,n),e=this.parseIdentifier(o),this.eat(17)&&(s=!0,o&&this.raise(FlowErrors.ThisParamMayNotBeOptional,n)),i=this.flowParseTypeInitialiser()):i=this.flowParseType(),n.name=e,n.optional=s,n.typeAnnotation=i,this.finishNode(n,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(t){const e=this.startNodeAt(t.loc.start);return e.name=null,e.optional=!1,e.typeAnnotation=t,this.finishNode(e,"FunctionTypeParam")}flowParseFunctionTypeParams(t=[]){let e=null,s=null;for(this.match(78)&&(s=this.flowParseFunctionTypeParam(!0),s.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)t.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(e=this.flowParseFunctionTypeParam(!1)),{params:t,rest:e,_this:s}}flowIdentToTypeAnnotation(t,e,s){switch(s.name){case"any":return this.finishNode(e,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(e,"BooleanTypeAnnotation");case"mixed":return this.finishNode(e,"MixedTypeAnnotation");case"empty":return this.finishNode(e,"EmptyTypeAnnotation");case"number":return this.finishNode(e,"NumberTypeAnnotation");case"string":return this.finishNode(e,"StringTypeAnnotation");case"symbol":return this.finishNode(e,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(s.name),this.flowParseGenericType(t,s)}}flowParsePrimaryType(){const t=this.state.startLoc,e=this.startNode();let s,i,n=!1;const a=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,i=this.flowParseTupleType(),this.state.noAnonFunctionType=a,i;case 47:{const o=this.startNode();return o.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),s=this.flowParseFunctionTypeParams(),o.params=s.params,o.rest=s.rest,o.this=s._this,this.expect(11),this.expect(19),o.returnType=this.flowParseType(),this.finishNode(o,"FunctionTypeAnnotation")}case 10:{const o=this.startNode();if(this.next(),!this.match(11)&&!this.match(21))if(tokenIsIdentifier(this.state.type)||this.match(78)){const h=this.lookahead().type;n=h!==17&&h!==14}else n=!0;if(n){if(this.state.noAnonFunctionType=!1,i=this.flowParseType(),this.state.noAnonFunctionType=a,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&this.lookahead().type===19))return this.expect(11),i;this.eat(12)}return s=i?this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(i)]):this.flowParseFunctionTypeParams(),o.params=s.params,o.rest=s.rest,o.this=s._this,this.expect(11),this.expect(19),o.returnType=this.flowParseType(),o.typeParameters=null,this.finishNode(o,"FunctionTypeAnnotation")}case 134:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return e.value=this.match(85),this.next(),this.finishNode(e,"BooleanLiteralTypeAnnotation");case 53:if(this.state.value==="-"){if(this.next(),this.match(135))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",e);if(this.match(136))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",e);throw this.raise(FlowErrors.UnexpectedSubtractionOperand,this.state.startLoc)}return void this.unexpected();case 135:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 136:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(e,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(e,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(e,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(e,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(tokenIsKeyword(this.state.type)){const o=tokenLabelName(this.state.type);return this.next(),super.createIdentifier(e,o)}if(tokenIsIdentifier(this.state.type))return this.isContextual(129)?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(t,e,this.parseIdentifier())}this.unexpected()}flowParsePostfixType(){const t=this.state.startLoc;let e=this.flowParsePrimaryType(),s=!1;for(;(this.match(0)||this.match(18))&&!this.canInsertSemicolon();){const i=this.startNodeAt(t),n=this.eat(18);s=s||n,this.expect(0),!n&&this.match(3)?(i.elementType=e,this.next(),e=this.finishNode(i,"ArrayTypeAnnotation")):(i.objectType=e,i.indexType=this.flowParseType(),this.expect(3),s?(i.optional=n,e=this.finishNode(i,"OptionalIndexedAccessType")):e=this.finishNode(i,"IndexedAccessType"))}return e}flowParsePrefixType(){const t=this.startNode();return this.eat(17)?(t.typeAnnotation=this.flowParsePrefixType(),this.finishNode(t,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){const t=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){const e=this.startNodeAt(t.loc.start);return e.params=[this.reinterpretTypeAsFunctionTypeParam(t)],e.rest=null,e.this=null,e.returnType=this.flowParseType(),e.typeParameters=null,this.finishNode(e,"FunctionTypeAnnotation")}return t}flowParseIntersectionType(){const t=this.startNode();this.eat(45);const e=this.flowParseAnonFunctionWithoutParens();for(t.types=[e];this.eat(45);)t.types.push(this.flowParseAnonFunctionWithoutParens());return t.types.length===1?e:this.finishNode(t,"IntersectionTypeAnnotation")}flowParseUnionType(){const t=this.startNode();this.eat(43);const e=this.flowParseIntersectionType();for(t.types=[e];this.eat(43);)t.types.push(this.flowParseIntersectionType());return t.types.length===1?e:this.finishNode(t,"UnionTypeAnnotation")}flowParseType(){const t=this.state.inType;this.state.inType=!0;const e=this.flowParseUnionType();return this.state.inType=t,e}flowParseTypeOrImplicitInstantiation(){if(this.state.type===132&&this.state.value==="_"){const t=this.state.startLoc,e=this.parseIdentifier();return this.flowParseGenericType(t,e)}return this.flowParseType()}flowParseTypeAnnotation(){const t=this.startNode();return t.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(t,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(t){const e=t?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(e)),e}typeCastToParameter(t){return t.expression.typeAnnotation=t.typeAnnotation,this.resetEndLocation(t.expression,t.typeAnnotation.loc.end),t.expression}flowParseVariance(){let t=null;return this.match(53)?(t=this.startNode(),this.state.value==="+"?t.kind="plus":t.kind="minus",this.next(),this.finishNode(t,"Variance")):t}parseFunctionBody(t,e,s=!1){e?this.forwardNoArrowParamsConversionAt(t,()=>super.parseFunctionBody(t,!0,s)):super.parseFunctionBody(t,!1,s)}parseFunctionBodyAndFinish(t,e,s=!1){if(this.match(14)){const i=this.startNode();[i.typeAnnotation,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),t.returnType=i.typeAnnotation?this.finishNode(i,"TypeAnnotation"):null}return super.parseFunctionBodyAndFinish(t,e,s)}parseStatementLike(t){if(this.state.strict&&this.isContextual(129)){if(tokenIsKeywordOrIdentifier(this.lookahead().type)){const s=this.startNode();return this.next(),this.flowParseInterface(s)}}else if(this.isContextual(126)){const s=this.startNode();return this.next(),this.flowParseEnumDeclaration(s)}const e=super.parseStatementLike(t);return this.flowPragma!==void 0||this.isValidDirective(e)||(this.flowPragma=null),e}parseExpressionStatement(t,e,s){if(e.type==="Identifier"){if(e.name==="declare"){if(this.match(80)||tokenIsIdentifier(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(t)}else if(tokenIsIdentifier(this.state.type)){if(e.name==="interface")return this.flowParseInterface(t);if(e.name==="type")return this.flowParseTypeAlias(t);if(e.name==="opaque")return this.flowParseOpaqueType(t,!1)}}return super.parseExpressionStatement(t,e,s)}shouldParseExportDeclaration(){const{type:t}=this.state;return t===126||tokenIsFlowInterfaceOrTypeOrOpaque(t)?!this.state.containsEsc:super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){const{type:t}=this.state;return t===126||tokenIsFlowInterfaceOrTypeOrOpaque(t)?this.state.containsEsc:super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.isContextual(126)){const t=this.startNode();return this.next(),this.flowParseEnumDeclaration(t)}return super.parseExportDefaultExpression()}parseConditional(t,e,s){if(!this.match(17))return t;if(this.state.maybeInArrowParameters){const p=this.lookaheadCharCode();if(p===44||p===61||p===58||p===41)return this.setOptionalParametersError(s),t}this.expect(17);const i=this.state.clone(),n=this.state.noArrowAt,a=this.startNodeAt(e);let{consequent:o,failed:h}=this.tryParseConditionalConsequent(),[l,c]=this.getArrowLikeExpressions(o);if(h||c.length>0){const p=[...n];if(c.length>0){this.state=i,this.state.noArrowAt=p;for(let u=0;u<c.length;u++)p.push(c[u].start);({consequent:o,failed:h}=this.tryParseConditionalConsequent()),[l,c]=this.getArrowLikeExpressions(o)}h&&l.length>1&&this.raise(FlowErrors.AmbiguousConditionalArrow,i.startLoc),h&&l.length===1&&(this.state=i,p.push(l[0].start),this.state.noArrowAt=p,{consequent:o,failed:h}=this.tryParseConditionalConsequent())}return this.getArrowLikeExpressions(o,!0),this.state.noArrowAt=n,this.expect(14),a.test=t,a.consequent=o,a.alternate=this.forwardNoArrowParamsConversionAt(a,()=>this.parseMaybeAssign(void 0,void 0)),this.finishNode(a,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);const t=this.parseMaybeAssignAllowIn(),e=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:t,failed:e}}getArrowLikeExpressions(t,e){const s=[t],i=[];for(;s.length!==0;){const n=s.pop();n.type==="ArrowFunctionExpression"&&n.body.type!=="BlockStatement"?(n.typeParameters||!n.returnType?this.finishArrowValidation(n):i.push(n),s.push(n.body)):n.type==="ConditionalExpression"&&(s.push(n.consequent),s.push(n.alternate))}return e?(i.forEach(n=>this.finishArrowValidation(n)),[i,[]]):partition(i,n=>n.params.every(a=>this.isAssignable(a,!0)))}finishArrowValidation(t){var e;this.toAssignableList(t.params,(e=t.extra)==null?void 0:e.trailingCommaLoc,!1),this.scope.enter(6),super.checkParams(t,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(t,e){let s;return this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(t.start))?(this.state.noArrowParamsConversionAt.push(this.state.start),s=e(),this.state.noArrowParamsConversionAt.pop()):s=e(),s}parseParenItem(t,e){const s=super.parseParenItem(t,e);if(this.eat(17)&&(s.optional=!0,this.resetEndLocation(t)),this.match(14)){const i=this.startNodeAt(e);return i.expression=s,i.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(i,"TypeCastExpression")}return s}assertModuleNodeAllowed(t){t.type==="ImportDeclaration"&&(t.importKind==="type"||t.importKind==="typeof")||t.type==="ExportNamedDeclaration"&&t.exportKind==="type"||t.type==="ExportAllDeclaration"&&t.exportKind==="type"||super.assertModuleNodeAllowed(t)}parseExportDeclaration(t){if(this.isContextual(130)){t.exportKind="type";const e=this.startNode();return this.next(),this.match(5)?(t.specifiers=this.parseExportSpecifiers(!0),super.parseExportFrom(t),null):this.flowParseTypeAlias(e)}if(this.isContextual(131)){t.exportKind="type";const e=this.startNode();return this.next(),this.flowParseOpaqueType(e,!1)}if(this.isContextual(129)){t.exportKind="type";const e=this.startNode();return this.next(),this.flowParseInterface(e)}if(this.isContextual(126)){t.exportKind="value";const e=this.startNode();return this.next(),this.flowParseEnumDeclaration(e)}return super.parseExportDeclaration(t)}eatExportStar(t){return!!super.eatExportStar(t)||!(!this.isContextual(130)||this.lookahead().type!==55)&&(t.exportKind="type",this.next(),this.next(),!0)}maybeParseExportNamespaceSpecifier(t){const{startLoc:e}=this.state,s=super.maybeParseExportNamespaceSpecifier(t);return s&&t.exportKind==="type"&&this.unexpected(e),s}parseClassId(t,e,s){super.parseClassId(t,e,s),this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration())}parseClassMember(t,e,s){const{startLoc:i}=this.state;if(this.isContextual(125)){if(super.parseClassMemberFromModifier(t,e))return;e.declare=!0}super.parseClassMember(t,e,s),e.declare&&(e.type!=="ClassProperty"&&e.type!=="ClassPrivateProperty"&&e.type!=="PropertyDefinition"?this.raise(FlowErrors.DeclareClassElement,i):e.value&&this.raise(FlowErrors.DeclareClassFieldInitializer,e.value))}isIterator(t){return t==="iterator"||t==="asyncIterator"}readIterator(){const t=super.readWord1(),e="@@"+t;this.isIterator(t)&&this.state.inType||this.raise(Errors.InvalidIdentifier,this.state.curPosition(),{identifierName:e}),this.finishToken(132,e)}getTokenFromCode(t){const e=this.input.charCodeAt(this.state.pos+1);t===123&&e===124?this.finishOp(6,2):!this.state.inType||t!==62&&t!==60?this.state.inType&&t===63?e===46?this.finishOp(18,2):this.finishOp(17,1):isIteratorStart(t,e,this.input.charCodeAt(this.state.pos+2))?(this.state.pos+=2,this.readIterator()):super.getTokenFromCode(t):this.finishOp(t===62?48:47,1)}isAssignable(t,e){return t.type==="TypeCastExpression"?this.isAssignable(t.expression,e):super.isAssignable(t,e)}toAssignable(t,e=!1){e||t.type!=="AssignmentExpression"||t.left.type!=="TypeCastExpression"||(t.left=this.typeCastToParameter(t.left)),super.toAssignable(t,e)}toAssignableList(t,e,s){for(let i=0;i<t.length;i++){const n=t[i];(n==null?void 0:n.type)==="TypeCastExpression"&&(t[i]=this.typeCastToParameter(n))}super.toAssignableList(t,e,s)}toReferencedList(t,e){for(let i=0;i<t.length;i++){var s;const n=t[i];!n||n.type!=="TypeCastExpression"||(s=n.extra)!=null&&s.parenthesized||!(t.length>1)&&e||this.raise(FlowErrors.TypeCastInPattern,n.typeAnnotation)}return t}parseArrayLike(t,e,s,i){const n=super.parseArrayLike(t,e,s,i);return e&&!this.state.maybeInArrowParameters&&this.toReferencedList(n.elements),n}isValidLVal(t,e,s){return t==="TypeCastExpression"||super.isValidLVal(t,e,s)}parseClassProperty(t){return this.match(14)&&(t.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(t)}parseClassPrivateProperty(t){return this.match(14)&&(t.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(t)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(t){return!this.match(14)&&super.isNonstaticConstructor(t)}pushClassMethod(t,e,s,i,n,a){if(e.variance&&this.unexpected(e.variance.loc.start),delete e.variance,this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(t,e,s,i,n,a),e.params&&n){const o=e.params;o.length>0&&this.isThisParam(o[0])&&this.raise(FlowErrors.ThisParamBannedInConstructor,e)}else if(e.type==="MethodDefinition"&&n&&e.value.params){const o=e.value.params;o.length>0&&this.isThisParam(o[0])&&this.raise(FlowErrors.ThisParamBannedInConstructor,e)}}pushClassPrivateMethod(t,e,s,i){e.variance&&this.unexpected(e.variance.loc.start),delete e.variance,this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(t,e,s,i)}parseClassSuper(t){if(super.parseClassSuper(t),t.superClass&&this.match(47)&&(t.superTypeParameters=this.flowParseTypeParameterInstantiation()),this.isContextual(113)){this.next();const e=t.implements=[];do{const s=this.startNode();s.id=this.flowParseRestrictedIdentifier(!0),this.match(47)?s.typeParameters=this.flowParseTypeParameterInstantiation():s.typeParameters=null,e.push(this.finishNode(s,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(t){super.checkGetterSetterParams(t);const e=this.getObjectOrClassMethodParams(t);if(e.length>0){const s=e[0];this.isThisParam(s)&&t.kind==="get"?this.raise(FlowErrors.GetterMayNotHaveThisParam,s):this.isThisParam(s)&&this.raise(FlowErrors.SetterMayNotHaveThisParam,s)}}parsePropertyNamePrefixOperator(t){t.variance=this.flowParseVariance()}parseObjPropValue(t,e,s,i,n,a,o){let h;t.variance&&this.unexpected(t.variance.loc.start),delete t.variance,this.match(47)&&!a&&(h=this.flowParseTypeParameterDeclaration(),this.match(10)||this.unexpected());const l=super.parseObjPropValue(t,e,s,i,n,a,o);return h&&((l.value||l).typeParameters=h),l}parseFunctionParamType(t){return this.eat(17)&&(t.type!=="Identifier"&&this.raise(FlowErrors.PatternIsOptional,t),this.isThisParam(t)&&this.raise(FlowErrors.ThisParamMayNotBeOptional,t),t.optional=!0),this.match(14)?t.typeAnnotation=this.flowParseTypeAnnotation():this.isThisParam(t)&&this.raise(FlowErrors.ThisParamAnnotationRequired,t),this.match(29)&&this.isThisParam(t)&&this.raise(FlowErrors.ThisParamNoDefault,t),this.resetEndLocation(t),t}parseMaybeDefault(t,e){const s=super.parseMaybeDefault(t,e);return s.type==="AssignmentPattern"&&s.typeAnnotation&&s.right.start<s.typeAnnotation.start&&this.raise(FlowErrors.TypeBeforeInitializer,s.typeAnnotation),s}checkImportReflection(t){super.checkImportReflection(t),t.module&&t.importKind!=="value"&&this.raise(FlowErrors.ImportReflectionHasImportType,t.specifiers[0].loc.start)}parseImportSpecifierLocal(t,e,s){e.local=hasTypeImportKind(t)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),t.specifiers.push(this.finishImportSpecifier(e,s))}isPotentialImportPhase(t){if(super.isPotentialImportPhase(t))return!0;if(this.isContextual(130)){if(!t)return!0;const e=this.lookaheadCharCode();return e===123||e===42}return!t&&this.isContextual(87)}applyImportPhase(t,e,s,i){if(super.applyImportPhase(t,e,s,i),e){if(!s&&this.match(65))return;t.exportKind=s==="type"?s:"value"}else s==="type"&&this.match(55)&&this.unexpected(),t.importKind=s==="type"||s==="typeof"?s:"value"}parseImportSpecifier(t,e,s,i,n){const a=t.imported;let o=null;a.type==="Identifier"&&(a.name==="type"?o="type":a.name==="typeof"&&(o="typeof"));let h=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){const c=this.parseIdentifier(!0);o===null||tokenIsKeywordOrIdentifier(this.state.type)?(t.imported=a,t.importKind=null,t.local=this.parseIdentifier()):(t.imported=c,t.importKind=o,t.local=cloneIdentifier(c))}else{if(o!==null&&tokenIsKeywordOrIdentifier(this.state.type))t.imported=this.parseIdentifier(!0),t.importKind=o;else{if(e)throw this.raise(Errors.ImportBindingIsString,t,{importName:a.value});t.imported=a,t.importKind=null}this.eatContextual(93)?t.local=this.parseIdentifier():(h=!0,t.local=cloneIdentifier(t.imported))}const l=hasTypeImportKind(t);return s&&l&&this.raise(FlowErrors.ImportTypeShorthandOnlyInPureImport,t),(s||l)&&this.checkReservedType(t.local.name,t.local.loc.start,!0),!h||s||l||this.checkReservedWord(t.local.name,t.loc.start,!0,!0),this.finishImportSpecifier(t,"ImportSpecifier")}parseBindingAtom(){return this.state.type===78?this.parseIdentifier(!0):super.parseBindingAtom()}parseFunctionParams(t,e){const s=t.kind;s!=="get"&&s!=="set"&&this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(t,e)}parseVarId(t,e){super.parseVarId(t,e),this.match(14)&&(t.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(t.id))}parseAsyncArrowFromCallExpression(t,e){if(this.match(14)){const s=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,t.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=s}return super.parseAsyncArrowFromCallExpression(t,e)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(t,e){var s;let i,n=null;if(this.hasPlugin("jsx")&&(this.match(143)||this.match(47))){if(n=this.state.clone(),i=this.tryParse(()=>super.parseMaybeAssign(t,e),n),!i.error)return i.node;const{context:h}=this.state,l=h[h.length-1];l!==types.j_oTag&&l!==types.j_expr||h.pop()}if((s=i)!=null&&s.error||this.match(47)){var a,o;let h;n=n||this.state.clone();const l=this.tryParse(p=>{var u;h=this.flowParseTypeParameterDeclaration();const d=this.forwardNoArrowParamsConversionAt(h,()=>{const f=super.parseMaybeAssign(t,e);return this.resetStartLocationFromNode(f,h),f});(u=d.extra)!=null&&u.parenthesized&&p();const m=this.maybeUnwrapTypeCastExpression(d);return m.type!=="ArrowFunctionExpression"&&p(),m.typeParameters=h,this.resetStartLocationFromNode(m,h),d},n);let c=null;if(l.node&&this.maybeUnwrapTypeCastExpression(l.node).type==="ArrowFunctionExpression"){if(!l.error&&!l.aborted)return l.node.async&&this.raise(FlowErrors.UnexpectedTypeParameterBeforeAsyncArrowFunction,h),l.node;c=l.node}if((a=i)!=null&&a.node)return this.state=i.failState,i.node;if(c)return this.state=l.failState,c;throw(o=i)!=null&&o.thrown?i.error:l.thrown?l.error:this.raise(FlowErrors.UnexpectedTokenAfterTypeParameter,h)}return super.parseMaybeAssign(t,e)}parseArrow(t){if(this.match(14)){const e=this.tryParse(()=>{const s=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;const i=this.startNode();return[i.typeAnnotation,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=s,this.canInsertSemicolon()&&this.unexpected(),this.match(19)||this.unexpected(),i});if(e.thrown)return null;e.error&&(this.state=e.failState),t.returnType=e.node.typeAnnotation?this.finishNode(e.node,"TypeAnnotation"):null}return super.parseArrow(t)}shouldParseArrow(t){return this.match(14)||super.shouldParseArrow(t)}setArrowFunctionParameters(t,e){this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(t.start))?t.params=e:super.setArrowFunctionParameters(t,e)}checkParams(t,e,s,i=!0){if(!s||!this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(t.start))){for(let n=0;n<t.params.length;n++)this.isThisParam(t.params[n])&&n>0&&this.raise(FlowErrors.ThisParamMustBeFirst,t.params[n]);super.checkParams(t,e,s,i)}}parseParenAndDistinguishExpression(t){return super.parseParenAndDistinguishExpression(t&&!this.state.noArrowAt.includes(this.sourceToOffsetPos(this.state.start)))}parseSubscripts(t,e,s){if(t.type==="Identifier"&&t.name==="async"&&this.state.noArrowAt.includes(e.index)){this.next();const i=this.startNodeAt(e);i.callee=t,i.arguments=super.parseCallExpressionArguments(11),t=this.finishNode(i,"CallExpression")}else if(t.type==="Identifier"&&t.name==="async"&&this.match(47)){const i=this.state.clone(),n=this.tryParse(o=>this.parseAsyncArrowWithTypeParameters(e)||o(),i);if(!n.error&&!n.aborted)return n.node;const a=this.tryParse(()=>super.parseSubscripts(t,e,s),i);if(a.node&&!a.error)return a.node;if(n.node)return this.state=n.failState,n.node;if(a.node)return this.state=a.failState,a.node;throw n.error||a.error}return super.parseSubscripts(t,e,s)}parseSubscript(t,e,s,i){if(this.match(18)&&this.isLookaheadToken_lt()){if(i.optionalChainMember=!0,s)return i.stop=!0,t;this.next();const n=this.startNodeAt(e);return n.callee=t,n.typeArguments=this.flowParseTypeParameterInstantiation(),this.expect(10),n.arguments=this.parseCallExpressionArguments(11),n.optional=!0,this.finishCallExpression(n,!0)}if(!s&&this.shouldParseTypes()&&this.match(47)){const n=this.startNodeAt(e);n.callee=t;const a=this.tryParse(()=>(n.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),n.arguments=super.parseCallExpressionArguments(11),i.optionalChainMember&&(n.optional=!1),this.finishCallExpression(n,i.optionalChainMember)));if(a.node)return a.error&&(this.state=a.failState),a.node}return super.parseSubscript(t,e,s,i)}parseNewCallee(t){super.parseNewCallee(t);let e=null;this.shouldParseTypes()&&this.match(47)&&(e=this.tryParse(()=>this.flowParseTypeParameterInstantiationCallOrNew()).node),t.typeArguments=e}parseAsyncArrowWithTypeParameters(t){const e=this.startNodeAt(t);if(this.parseFunctionParams(e,!1),this.parseArrow(e))return super.parseArrowExpression(e,void 0,!0)}readToken_mult_modulo(t){const e=this.input.charCodeAt(this.state.pos+1);if(t===42&&e===47&&this.state.hasFlowComment)return this.state.hasFlowComment=!1,this.state.pos+=2,void this.nextToken();super.readToken_mult_modulo(t)}readToken_pipe_amp(t){const e=this.input.charCodeAt(this.state.pos+1);t!==124||e!==125?super.readToken_pipe_amp(t):this.finishOp(9,2)}parseTopLevel(t,e){const s=super.parseTopLevel(t,e);return this.state.hasFlowComment&&this.raise(FlowErrors.UnterminatedFlowComment,this.state.curPosition()),s}skipBlockComment(){if(!this.hasPlugin("flowComments")||!this.skipFlowComment())return super.skipBlockComment(this.state.hasFlowComment?"*-/":"*/");{if(this.state.hasFlowComment)throw this.raise(FlowErrors.NestedFlowComment,this.state.startLoc);this.hasFlowCommentCompletion();const t=this.skipFlowComment();t&&(this.state.pos+=t,this.state.hasFlowComment=!0)}}skipFlowComment(){const{pos:t}=this.state;let e=2;for(;[32,9].includes(this.input.charCodeAt(t+e));)e++;const s=this.input.charCodeAt(e+t),i=this.input.charCodeAt(e+t+1);return s===58&&i===58?e+2:this.input.slice(e+t,e+t+12)==="flow-include"?e+12:s===58&&i!==58&&e}hasFlowCommentCompletion(){if(this.input.indexOf("*/",this.state.pos)===-1)throw this.raise(Errors.UnterminatedComment,this.state.curPosition())}flowEnumErrorBooleanMemberNotInitialized(t,{enumName:e,memberName:s}){this.raise(FlowErrors.EnumBooleanMemberNotInitialized,t,{memberName:s,enumName:e})}flowEnumErrorInvalidMemberInitializer(t,e){return this.raise(e.explicitType?e.explicitType==="symbol"?FlowErrors.EnumInvalidMemberInitializerSymbolType:FlowErrors.EnumInvalidMemberInitializerPrimaryType:FlowErrors.EnumInvalidMemberInitializerUnknownType,t,e)}flowEnumErrorNumberMemberNotInitialized(t,e){this.raise(FlowErrors.EnumNumberMemberNotInitialized,t,e)}flowEnumErrorStringMemberInconsistentlyInitialized(t,e){this.raise(FlowErrors.EnumStringMemberInconsistentlyInitialized,t,e)}flowEnumMemberInit(){const t=this.state.startLoc,e=()=>this.match(12)||this.match(8);switch(this.state.type){case 135:{const s=this.parseNumericLiteral(this.state.value);return e()?{type:"number",loc:s.loc.start,value:s}:{type:"invalid",loc:t}}case 134:{const s=this.parseStringLiteral(this.state.value);return e()?{type:"string",loc:s.loc.start,value:s}:{type:"invalid",loc:t}}case 85:case 86:{const s=this.parseBooleanLiteral(this.match(85));return e()?{type:"boolean",loc:s.loc.start,value:s}:{type:"invalid",loc:t}}default:return{type:"invalid",loc:t}}}flowEnumMemberRaw(){const t=this.state.startLoc;return{id:this.parseIdentifier(!0),init:this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:t}}}flowEnumCheckExplicitTypeMismatch(t,e,s){const{explicitType:i}=e;i!==null&&i!==s&&this.flowEnumErrorInvalidMemberInitializer(t,e)}flowEnumMembers({enumName:t,explicitType:e}){const s=new Set,i={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]};let n=!1;for(;!this.match(8);){if(this.eat(21)){n=!0;break}const a=this.startNode(),{id:o,init:h}=this.flowEnumMemberRaw(),l=o.name;if(l==="")continue;/^[a-z]/.test(l)&&this.raise(FlowErrors.EnumInvalidMemberName,o,{memberName:l,suggestion:l[0].toUpperCase()+l.slice(1),enumName:t}),s.has(l)&&this.raise(FlowErrors.EnumDuplicateMemberName,o,{memberName:l,enumName:t}),s.add(l);const c={enumName:t,explicitType:e,memberName:l};switch(a.id=o,h.type){case"boolean":this.flowEnumCheckExplicitTypeMismatch(h.loc,c,"boolean"),a.init=h.value,i.booleanMembers.push(this.finishNode(a,"EnumBooleanMember"));break;case"number":this.flowEnumCheckExplicitTypeMismatch(h.loc,c,"number"),a.init=h.value,i.numberMembers.push(this.finishNode(a,"EnumNumberMember"));break;case"string":this.flowEnumCheckExplicitTypeMismatch(h.loc,c,"string"),a.init=h.value,i.stringMembers.push(this.finishNode(a,"EnumStringMember"));break;case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(h.loc,c);case"none":switch(e){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(h.loc,c);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(h.loc,c);break;default:i.defaultedMembers.push(this.finishNode(a,"EnumDefaultedMember"))}}this.match(8)||this.expect(12)}return{members:i,hasUnknownMembers:n}}flowEnumStringMembers(t,e,{enumName:s}){if(t.length===0)return e;if(e.length===0)return t;if(e.length>t.length){for(const i of t)this.flowEnumErrorStringMemberInconsistentlyInitialized(i,{enumName:s});return e}for(const i of e)this.flowEnumErrorStringMemberInconsistentlyInitialized(i,{enumName:s});return t}flowEnumParseExplicitType({enumName:t}){if(!this.eatContextual(102))return null;if(!tokenIsIdentifier(this.state.type))throw this.raise(FlowErrors.EnumInvalidExplicitTypeUnknownSupplied,this.state.startLoc,{enumName:t});const{value:e}=this.state;return this.next(),e!=="boolean"&&e!=="number"&&e!=="string"&&e!=="symbol"&&this.raise(FlowErrors.EnumInvalidExplicitType,this.state.startLoc,{enumName:t,invalidEnumType:e}),e}flowEnumBody(t,e){const s=e.name,i=e.loc.start,n=this.flowEnumParseExplicitType({enumName:s});this.expect(5);const{members:a,hasUnknownMembers:o}=this.flowEnumMembers({enumName:s,explicitType:n});switch(t.hasUnknownMembers=o,n){case"boolean":return t.explicitType=!0,t.members=a.booleanMembers,this.expect(8),this.finishNode(t,"EnumBooleanBody");case"number":return t.explicitType=!0,t.members=a.numberMembers,this.expect(8),this.finishNode(t,"EnumNumberBody");case"string":return t.explicitType=!0,t.members=this.flowEnumStringMembers(a.stringMembers,a.defaultedMembers,{enumName:s}),this.expect(8),this.finishNode(t,"EnumStringBody");case"symbol":return t.members=a.defaultedMembers,this.expect(8),this.finishNode(t,"EnumSymbolBody");default:{const h=()=>(t.members=[],this.expect(8),this.finishNode(t,"EnumStringBody"));t.explicitType=!1;const l=a.booleanMembers.length,c=a.numberMembers.length,p=a.stringMembers.length,u=a.defaultedMembers.length;if(l||c||p||u){if(l||c){if(!c&&!p&&l>=u){for(const d of a.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(d.loc.start,{enumName:s,memberName:d.id.name});return t.members=a.booleanMembers,this.expect(8),this.finishNode(t,"EnumBooleanBody")}if(!l&&!p&&c>=u){for(const d of a.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(d.loc.start,{enumName:s,memberName:d.id.name});return t.members=a.numberMembers,this.expect(8),this.finishNode(t,"EnumNumberBody")}return this.raise(FlowErrors.EnumInconsistentMemberValues,i,{enumName:s}),h()}return t.members=this.flowEnumStringMembers(a.stringMembers,a.defaultedMembers,{enumName:s}),this.expect(8),this.finishNode(t,"EnumStringBody")}return h()}}}flowParseEnumDeclaration(t){const e=this.parseIdentifier();return t.id=e,t.body=this.flowEnumBody(this.startNode(),e),this.finishNode(t,"EnumDeclaration")}isLookaheadToken_lt(){const t=this.nextTokenStart();if(this.input.charCodeAt(t)===60){const e=this.input.charCodeAt(t+1);return e!==60&&e!==61}return!1}maybeUnwrapTypeCastExpression(t){return t.type==="TypeCastExpression"?t.expression:t}};const entities={__proto__:null,quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",frasl:"\u2044",euro:"\u20AC",image:"\u2111",weierp:"\u2118",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"},JsxErrors=ParseErrorEnum`jsx`({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:({openingTagName:r})=>`Expected corresponding JSX closing tag for <${r}>.`,MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnexpectedToken:({unexpected:r,HTMLEntity:t})=>`Unexpected token \`${r}\`. Did you mean \`${t}\` or \`{'${r}'}\`?`,UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"});function isFragment(r){return!!r&&(r.type==="JSXOpeningFragment"||r.type==="JSXClosingFragment")}function getQualifiedJSXName(r){if(r.type==="JSXIdentifier")return r.name;if(r.type==="JSXNamespacedName")return r.namespace.name+":"+r.name.name;if(r.type==="JSXMemberExpression")return getQualifiedJSXName(r.object)+"."+getQualifiedJSXName(r.property);throw new Error("Node had unexpected type: "+r.type)}var jsx=r=>class extends r{jsxReadToken(){let t="",e=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(JsxErrors.UnterminatedJsxContent,this.state.startLoc);const s=this.input.charCodeAt(this.state.pos);switch(s){case 60:case 123:return this.state.pos===this.state.start?void(s===60&&this.state.canStartJSXElement?(++this.state.pos,this.finishToken(143)):super.getTokenFromCode(s)):(t+=this.input.slice(e,this.state.pos),void this.finishToken(142,t));case 38:t+=this.input.slice(e,this.state.pos),t+=this.jsxReadEntity(),e=this.state.pos;break;default:isNewLine(s)?(t+=this.input.slice(e,this.state.pos),t+=this.jsxReadNewLine(!0),e=this.state.pos):++this.state.pos}}}jsxReadNewLine(t){const e=this.input.charCodeAt(this.state.pos);let s;return++this.state.pos,e===13&&this.input.charCodeAt(this.state.pos)===10?(++this.state.pos,s=t?`
`:`\r
`):s=String.fromCharCode(e),++this.state.curLine,this.state.lineStart=this.state.pos,s}jsxReadString(t){let e="",s=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(Errors.UnterminatedString,this.state.startLoc);const i=this.input.charCodeAt(this.state.pos);if(i===t)break;i===38?(e+=this.input.slice(s,this.state.pos),e+=this.jsxReadEntity(),s=this.state.pos):isNewLine(i)?(e+=this.input.slice(s,this.state.pos),e+=this.jsxReadNewLine(!1),s=this.state.pos):++this.state.pos}e+=this.input.slice(s,this.state.pos++),this.finishToken(134,e)}jsxReadEntity(){const t=++this.state.pos;if(this.codePointAtPos(this.state.pos)===35){++this.state.pos;let e=10;this.codePointAtPos(this.state.pos)===120&&(e=16,++this.state.pos);const s=this.readInt(e,void 0,!1,"bail");if(s!==null&&this.codePointAtPos(this.state.pos)===59)return++this.state.pos,String.fromCodePoint(s)}else{let e=0,s=!1;for(;e++<10&&this.state.pos<this.length&&!(s=this.codePointAtPos(this.state.pos)===59);)++this.state.pos;if(s){const i=this.input.slice(t,this.state.pos),n=entities[i];if(++this.state.pos,n)return n}}return this.state.pos=t,"&"}jsxReadWord(){let t;const e=this.state.pos;do t=this.input.charCodeAt(++this.state.pos);while(isIdentifierChar(t)||t===45);this.finishToken(141,this.input.slice(e,this.state.pos))}jsxParseIdentifier(){const t=this.startNode();return this.match(141)?t.name=this.state.value:tokenIsKeyword(this.state.type)?t.name=tokenLabelName(this.state.type):this.unexpected(),this.next(),this.finishNode(t,"JSXIdentifier")}jsxParseNamespacedName(){const t=this.state.startLoc,e=this.jsxParseIdentifier();if(!this.eat(14))return e;const s=this.startNodeAt(t);return s.namespace=e,s.name=this.jsxParseIdentifier(),this.finishNode(s,"JSXNamespacedName")}jsxParseElementName(){const t=this.state.startLoc;let e=this.jsxParseNamespacedName();if(e.type==="JSXNamespacedName")return e;for(;this.eat(16);){const s=this.startNodeAt(t);s.object=e,s.property=this.jsxParseIdentifier(),e=this.finishNode(s,"JSXMemberExpression")}return e}jsxParseAttributeValue(){let t;switch(this.state.type){case 5:return t=this.startNode(),this.setContext(types.brace),this.next(),t=this.jsxParseExpressionContainer(t,types.j_oTag),t.expression.type==="JSXEmptyExpression"&&this.raise(JsxErrors.AttributeIsEmpty,t),t;case 143:case 134:return this.parseExprAtom();default:throw this.raise(JsxErrors.UnsupportedJsxValue,this.state.startLoc)}}jsxParseEmptyExpression(){const t=this.startNodeAt(this.state.lastTokEndLoc);return this.finishNodeAt(t,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(t){return this.next(),t.expression=this.parseExpression(),this.setContext(types.j_expr),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(t,"JSXSpreadChild")}jsxParseExpressionContainer(t,e){if(this.match(8))t.expression=this.jsxParseEmptyExpression();else{const s=this.parseExpression();t.expression=s}return this.setContext(e),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(t,"JSXExpressionContainer")}jsxParseAttribute(){const t=this.startNode();return this.match(5)?(this.setContext(types.brace),this.next(),this.expect(21),t.argument=this.parseMaybeAssignAllowIn(),this.setContext(types.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(t,"JSXSpreadAttribute")):(t.name=this.jsxParseNamespacedName(),t.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(t,"JSXAttribute"))}jsxParseOpeningElementAt(t){const e=this.startNodeAt(t);return this.eat(144)?this.finishNode(e,"JSXOpeningFragment"):(e.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(e))}jsxParseOpeningElementAfterName(t){const e=[];for(;!this.match(56)&&!this.match(144);)e.push(this.jsxParseAttribute());return t.attributes=e,t.selfClosing=this.eat(56),this.expect(144),this.finishNode(t,"JSXOpeningElement")}jsxParseClosingElementAt(t){const e=this.startNodeAt(t);return this.eat(144)?this.finishNode(e,"JSXClosingFragment"):(e.name=this.jsxParseElementName(),this.expect(144),this.finishNode(e,"JSXClosingElement"))}jsxParseElementAt(t){const e=this.startNodeAt(t),s=[],i=this.jsxParseOpeningElementAt(t);let n=null;if(!i.selfClosing){t:for(;;)switch(this.state.type){case 143:if(t=this.state.startLoc,this.next(),this.eat(56)){n=this.jsxParseClosingElementAt(t);break t}s.push(this.jsxParseElementAt(t));break;case 142:s.push(this.parseLiteral(this.state.value,"JSXText"));break;case 5:{const a=this.startNode();this.setContext(types.brace),this.next(),this.match(21)?s.push(this.jsxParseSpreadChild(a)):s.push(this.jsxParseExpressionContainer(a,types.j_expr));break}default:this.unexpected()}isFragment(i)&&!isFragment(n)&&n!==null?this.raise(JsxErrors.MissingClosingTagFragment,n):!isFragment(i)&&isFragment(n)?this.raise(JsxErrors.MissingClosingTagElement,n,{openingTagName:getQualifiedJSXName(i.name)}):isFragment(i)||isFragment(n)||getQualifiedJSXName(n.name)!==getQualifiedJSXName(i.name)&&this.raise(JsxErrors.MissingClosingTagElement,n,{openingTagName:getQualifiedJSXName(i.name)})}if(isFragment(i)?(e.openingFragment=i,e.closingFragment=n):(e.openingElement=i,e.closingElement=n),e.children=s,this.match(47))throw this.raise(JsxErrors.UnwrappedAdjacentJSXElements,this.state.startLoc);return isFragment(i)?this.finishNode(e,"JSXFragment"):this.finishNode(e,"JSXElement")}jsxParseElement(){const t=this.state.startLoc;return this.next(),this.jsxParseElementAt(t)}setContext(t){const{context:e}=this.state;e[e.length-1]=t}parseExprAtom(t){return this.match(143)?this.jsxParseElement():this.match(47)&&this.input.charCodeAt(this.state.pos)!==33?(this.replaceToken(143),this.jsxParseElement()):super.parseExprAtom(t)}skipSpace(){this.curContext().preserveSpace||super.skipSpace()}getTokenFromCode(t){const e=this.curContext();if(e!==types.j_expr){if(e===types.j_oTag||e===types.j_cTag){if(isIdentifierStart(t))return void this.jsxReadWord();if(t===62)return++this.state.pos,void this.finishToken(144);if((t===34||t===39)&&e===types.j_oTag)return void this.jsxReadString(t)}if(t===60&&this.state.canStartJSXElement&&this.input.charCodeAt(this.state.pos+1)!==33)return++this.state.pos,void this.finishToken(143);super.getTokenFromCode(t)}else this.jsxReadToken()}updateContext(t){const{context:e,type:s}=this.state;if(s===56&&t===143)e.splice(-2,2,types.j_cTag),this.state.canStartJSXElement=!1;else if(s===143)e.push(types.j_oTag);else if(s===144){const i=e[e.length-1];i===types.j_oTag&&t===56||i===types.j_cTag?(e.pop(),this.state.canStartJSXElement=e[e.length-1]===types.j_expr):(this.setContext(types.j_expr),this.state.canStartJSXElement=!0)}else this.state.canStartJSXElement=tokenComesBeforeExpression(s)}};class TypeScriptScope extends Scope{constructor(...t){super(...t),this.tsNames=new Map}}class TypeScriptScopeHandler extends ScopeHandler{constructor(...t){super(...t),this.importsStack=[]}createScope(t){return this.importsStack.push(new Set),new TypeScriptScope(t)}enter(t){t===256&&this.importsStack.push(new Set),super.enter(t)}exit(){const t=super.exit();return t===256&&this.importsStack.pop(),t}hasImport(t,e){const s=this.importsStack.length;if(this.importsStack[s-1].has(t))return!0;if(!e&&s>1){for(let i=0;i<s-1;i++)if(this.importsStack[i].has(t))return!0}return!1}declareName(t,e,s){if(4096&e)return this.hasImport(t,!0)&&this.parser.raise(Errors.VarRedeclaration,s,{identifierName:t}),void this.importsStack[this.importsStack.length-1].add(t);const i=this.currentScope();let n=i.tsNames.get(t)||0;if(1024&e)return this.maybeExportDefined(i,t),void i.tsNames.set(t,16|n);super.declareName(t,e,s),2&e&&(1&e||(this.checkRedeclarationInScope(i,t,e,s),this.maybeExportDefined(i,t)),n|=1),256&e&&(n|=2),512&e&&(n|=4),128&e&&(n|=8),n&&i.tsNames.set(t,n)}isRedeclaredInScope(t,e,s){const i=t.tsNames.get(e);return(2&i)>0?256&s?!!(512&s)!=(4&i)>0:!0:128&s&&(8&i)>0?!!(2&t.names.get(e))&&!!(1&s):!!(2&s&&(1&i)>0)||super.isRedeclaredInScope(t,e,s)}checkLocalExport(t){const{name:e}=t;if(!this.hasImport(e)){for(let s=this.scopeStack.length-1;s>=0;s--){const i=this.scopeStack[s].tsNames.get(e);if((1&i)>0||(16&i)>0)return}super.checkLocalExport(t)}}}const unwrapParenthesizedExpression=r=>r.type==="ParenthesizedExpression"?unwrapParenthesizedExpression(r.expression):r;class LValParser extends NodeUtils{toAssignable(t,e=!1){var s,i;let n;switch((t.type==="ParenthesizedExpression"||(s=t.extra)!=null&&s.parenthesized)&&(n=unwrapParenthesizedExpression(t),e?n.type==="Identifier"?this.expressionScope.recordArrowParameterBindingError(Errors.InvalidParenthesizedAssignment,t):n.type==="MemberExpression"||this.isOptionalMemberExpression(n)||this.raise(Errors.InvalidParenthesizedAssignment,t):this.raise(Errors.InvalidParenthesizedAssignment,t)),t.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern";for(let o=0,h=t.properties.length,l=h-1;o<h;o++){var a;const c=t.properties[o],p=o===l;this.toAssignableObjectExpressionProp(c,p,e),p&&c.type==="RestElement"&&(a=t.extra)!=null&&a.trailingCommaLoc&&this.raise(Errors.RestTrailingComma,t.extra.trailingCommaLoc)}break;case"ObjectProperty":{const{key:o,value:h}=t;this.isPrivateName(o)&&this.classScope.usePrivateName(this.getPrivateNameSV(o),o.loc.start),this.toAssignable(h,e);break}case"SpreadElement":throw new Error("Internal @babel/parser error (this is a bug, please report it). SpreadElement should be converted by .toAssignable's caller.");case"ArrayExpression":t.type="ArrayPattern",this.toAssignableList(t.elements,(i=t.extra)==null?void 0:i.trailingCommaLoc,e);break;case"AssignmentExpression":t.operator!=="="&&this.raise(Errors.MissingEqInAssignment,t.left.loc.end),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(n,e)}}toAssignableObjectExpressionProp(t,e,s){if(t.type==="ObjectMethod")this.raise(t.kind==="get"||t.kind==="set"?Errors.PatternHasAccessor:Errors.PatternHasMethod,t.key);else if(t.type==="SpreadElement"){t.type="RestElement";const i=t.argument;this.checkToRestConversion(i,!1),this.toAssignable(i,s),e||this.raise(Errors.RestTrailingComma,t)}else this.toAssignable(t,s)}toAssignableList(t,e,s){const i=t.length-1;for(let n=0;n<=i;n++){const a=t[n];if(a){if(a.type==="SpreadElement"){a.type="RestElement";const o=a.argument;this.checkToRestConversion(o,!0),this.toAssignable(o,s)}else this.toAssignable(a,s);a.type==="RestElement"&&(n<i?this.raise(Errors.RestTrailingComma,a):e&&this.raise(Errors.RestTrailingComma,e))}}}isAssignable(t,e){switch(t.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":return!0;case"ObjectExpression":{const s=t.properties.length-1;return t.properties.every((i,n)=>i.type!=="ObjectMethod"&&(n===s||i.type!=="SpreadElement")&&this.isAssignable(i))}case"ObjectProperty":return this.isAssignable(t.value);case"SpreadElement":return this.isAssignable(t.argument);case"ArrayExpression":return t.elements.every(s=>s===null||this.isAssignable(s));case"AssignmentExpression":return t.operator==="=";case"ParenthesizedExpression":return this.isAssignable(t.expression);case"MemberExpression":case"OptionalMemberExpression":return!e;default:return!1}}toReferencedList(t,e){return t}toReferencedListDeep(t,e){this.toReferencedList(t,e);for(const s of t)(s==null?void 0:s.type)==="ArrayExpression"&&this.toReferencedListDeep(s.elements)}parseSpread(t){const e=this.startNode();return this.next(),e.argument=this.parseMaybeAssignAllowIn(t,void 0),this.finishNode(e,"SpreadElement")}parseRestBinding(){const t=this.startNode();return this.next(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{const t=this.startNode();return this.next(),t.elements=this.parseBindingList(3,93,1),this.finishNode(t,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0)}return this.parseIdentifier()}parseBindingList(t,e,s){const i=1&s,n=[];let a=!0;for(;!this.eat(t);)if(a?a=!1:this.expect(12),i&&this.match(12))n.push(null);else{if(this.eat(t))break;if(this.match(21)){let o=this.parseRestBinding();if((this.hasPlugin("flow")||2&s)&&(o=this.parseFunctionParamType(o)),n.push(o),!this.checkCommaAfterRest(e)){this.expect(t);break}}else{const o=[];for(this.match(26)&&this.hasPlugin("decorators")&&this.raise(Errors.UnsupportedParameterDecorator,this.state.startLoc);this.match(26);)o.push(this.parseDecorator());n.push(this.parseAssignableListItem(s,o))}}return n}parseBindingRestProperty(t){return this.next(),t.argument=this.parseIdentifier(),this.checkCommaAfterRest(125),this.finishNode(t,"RestElement")}parseBindingProperty(){const{type:t,startLoc:e}=this.state;if(t===21)return this.parseBindingRestProperty(this.startNode());const s=this.startNode();return t===139?(this.expectPlugin("destructuringPrivate",e),this.classScope.usePrivateName(this.state.value,e),s.key=this.parsePrivateName()):this.parsePropertyName(s),s.method=!1,this.parseObjPropValue(s,e,!1,!1,!0,!1)}parseAssignableListItem(t,e){const s=this.parseMaybeDefault();(this.hasPlugin("flow")||2&t)&&this.parseFunctionParamType(s);const i=this.parseMaybeDefault(s.loc.start,s);return e.length&&(s.decorators=e),i}parseFunctionParamType(t){return t}parseMaybeDefault(t,e){var s;if(t!=null||(t=this.state.startLoc),e=(s=e)!=null?s:this.parseBindingAtom(),!this.eat(29))return e;const i=this.startNodeAt(t);return i.left=e,i.right=this.parseMaybeAssignAllowIn(),this.finishNode(i,"AssignmentPattern")}isValidLVal(t,e,s){switch(t){case"AssignmentPattern":return"left";case"RestElement":return"argument";case"ObjectProperty":return"value";case"ParenthesizedExpression":return"expression";case"ArrayPattern":return"elements";case"ObjectPattern":return"properties"}return!1}isOptionalMemberExpression(t){return t.type==="OptionalMemberExpression"}checkLVal(t,e,s=64,i=!1,n=!1,a=!1){var o;const h=t.type;if(this.isObjectMethod(t))return;const l=this.isOptionalMemberExpression(t);if(l||h==="MemberExpression")return l&&(this.expectPlugin("optionalChainingAssign",t.loc.start),e.type!=="AssignmentExpression"&&this.raise(Errors.InvalidLhsOptionalChaining,t,{ancestor:e})),void(s!==64&&this.raise(Errors.InvalidPropertyBindingPattern,t));if(h==="Identifier"){this.checkIdentifier(t,s,n);const{name:f}=t;return void(i&&(i.has(f)?this.raise(Errors.ParamDupe,t):i.add(f)))}const c=this.isValidLVal(h,!(a||(o=t.extra)!=null&&o.parenthesized)&&e.type==="AssignmentExpression",s);if(c===!0)return;if(c===!1){const f=s===64?Errors.InvalidLhs:Errors.InvalidLhsBinding;return void this.raise(f,t,{ancestor:e})}let p,u;typeof c=="string"?(p=c,u=h==="ParenthesizedExpression"):[p,u]=c;const d=h==="ArrayPattern"||h==="ObjectPattern"?{type:h}:e,m=t[p];if(Array.isArray(m))for(const f of m)f&&this.checkLVal(f,d,s,i,n,u);else m&&this.checkLVal(m,d,s,i,n,u)}checkIdentifier(t,e,s=!1){this.state.strict&&(s?isStrictBindReservedWord(t.name,this.inModule):isStrictBindOnlyReservedWord(t.name))&&(e===64?this.raise(Errors.StrictEvalArguments,t,{referenceName:t.name}):this.raise(Errors.StrictEvalArgumentsBinding,t,{bindingName:t.name})),8192&e&&t.name==="let"&&this.raise(Errors.LetInLexicalBinding,t),64&e||this.declareNameFromIdentifier(t,e)}declareNameFromIdentifier(t,e){this.scope.declareName(t.name,e,t.loc.start)}checkToRestConversion(t,e){switch(t.type){case"ParenthesizedExpression":this.checkToRestConversion(t.expression,e);break;case"Identifier":case"MemberExpression":break;case"ArrayExpression":case"ObjectExpression":if(e)break;default:this.raise(Errors.InvalidRestAssignmentPattern,t)}}checkCommaAfterRest(t){return!!this.match(12)&&(this.raise(this.lookaheadCharCode()===t?Errors.RestTrailingComma:Errors.ElementAfterRest,this.state.startLoc),!0)}}function nonNull(r){if(r==null)throw new Error(`Unexpected ${r} value.`);return r}function assert(r){if(!r)throw new Error("Assert fail")}const TSErrors=ParseErrorEnum`typescript`({AbstractMethodHasImplementation:({methodName:r})=>`Method '${r}' cannot have an implementation because it is marked abstract.`,AbstractPropertyHasInitializer:({propertyName:r})=>`Property '${r}' cannot have an initializer because it is marked abstract.`,AccessorCannotBeOptional:"An 'accessor' property cannot be declared optional.",AccessorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccessorCannotHaveTypeParameters:"An accessor cannot have type parameters.",ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:({kind:r})=>`'declare' is not allowed in ${r}ters.`,DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:({modifier:r})=>"Accessibility modifier already seen.",DuplicateModifier:({modifier:r})=>`Duplicate modifier: '${r}'.`,EmptyHeritageClauseType:({token:r})=>`'${r}' list cannot be empty.`,EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` modifier",IncompatibleModifiers:({modifiers:r})=>`'${r[0]}' modifier cannot be used with '${r[1]}' modifier.`,IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:({modifier:r})=>`Index signatures cannot have an accessibility modifier ('${r}').`,IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidModifierOnTypeMember:({modifier:r})=>`'${r}' modifier cannot appear on a type member.`,InvalidModifierOnTypeParameter:({modifier:r})=>`'${r}' modifier cannot appear on a type parameter.`,InvalidModifierOnTypeParameterPositions:({modifier:r})=>`'${r}' modifier can only appear on a type parameter of a class, interface or type alias.`,InvalidModifiersOrder:({orderedModifiers:r})=>`'${r[0]}' modifier must precede '${r[1]}' modifier.`,InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifer:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:({modifier:r})=>`Private elements cannot have an accessibility modifier ('${r}').`,ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccessorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccessorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccessorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:({typeParameterName:r})=>`Single type parameter ${r} should have a trailing comma. Example usage: <${r},>.`,StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TupleOptionalAfterType:"A labeled tuple optional element must be declared using a question mark after the name and before the colon (`name?: type`), rather than after the type (`name: type?`).",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:({type:r})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${r}.`});function keywordTypeFromName(r){switch(r){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}function tsIsAccessModifier(r){return r==="private"||r==="public"||r==="protected"}function tsIsVarianceAnnotations(r){return r==="in"||r==="out"}var typescript=r=>class extends r{constructor(...t){super(...t),this.tsParseInOutModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out"],disallowedModifiers:["const","public","private","protected","readonly","declare","abstract","override"],errorTemplate:TSErrors.InvalidModifierOnTypeParameter}),this.tsParseConstModifier=this.tsParseModifiers.bind(this,{allowedModifiers:["const"],disallowedModifiers:["in","out"],errorTemplate:TSErrors.InvalidModifierOnTypeParameterPositions}),this.tsParseInOutConstModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out","const"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:TSErrors.InvalidModifierOnTypeParameter})}getScopeHandler(){return TypeScriptScopeHandler}tsIsIdentifier(){return tokenIsIdentifier(this.state.type)}tsTokenCanFollowModifier(){return this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(139)||this.isLiteralPropertyName()}tsNextTokenOnSameLineAndCanFollowModifier(){return this.next(),!this.hasPrecedingLineBreak()&&this.tsTokenCanFollowModifier()}tsNextTokenCanFollowModifier(){return this.match(106)?(this.next(),this.tsTokenCanFollowModifier()):this.tsNextTokenOnSameLineAndCanFollowModifier()}tsParseModifier(t,e){if(!tokenIsIdentifier(this.state.type)&&this.state.type!==58&&this.state.type!==75)return;const s=this.state.value;if(t.includes(s)){if(e&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return s}}tsParseModifiers({allowedModifiers:t,disallowedModifiers:e,stopOnStartOfClassStaticBlock:s,errorTemplate:i=TSErrors.InvalidModifierOnTypeMember},n){const a=(h,l,c,p)=>{l===c&&n[p]&&this.raise(TSErrors.InvalidModifiersOrder,h,{orderedModifiers:[c,p]})},o=(h,l,c,p)=>{(n[c]&&l===p||n[p]&&l===c)&&this.raise(TSErrors.IncompatibleModifiers,h,{modifiers:[c,p]})};for(;;){const{startLoc:h}=this.state,l=this.tsParseModifier(t.concat(e!=null?e:[]),s);if(!l)break;tsIsAccessModifier(l)?n.accessibility?this.raise(TSErrors.DuplicateAccessibilityModifier,h,{modifier:l}):(a(h,l,l,"override"),a(h,l,l,"static"),a(h,l,l,"readonly"),n.accessibility=l):tsIsVarianceAnnotations(l)?(n[l]&&this.raise(TSErrors.DuplicateModifier,h,{modifier:l}),n[l]=!0,a(h,l,"in","out")):(hasOwnProperty.call(n,l)?this.raise(TSErrors.DuplicateModifier,h,{modifier:l}):(a(h,l,"static","readonly"),a(h,l,"static","override"),a(h,l,"override","readonly"),a(h,l,"abstract","override"),o(h,l,"declare","override"),o(h,l,"static","abstract")),n[l]=!0),e!=null&&e.includes(l)&&this.raise(i,h,{modifier:l})}}tsIsListTerminator(t){switch(t){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}}tsParseList(t,e){const s=[];for(;!this.tsIsListTerminator(t);)s.push(e());return s}tsParseDelimitedList(t,e,s){return nonNull(this.tsParseDelimitedListWorker(t,e,!0,s))}tsParseDelimitedListWorker(t,e,s,i){const n=[];let a=-1;for(;!this.tsIsListTerminator(t);){a=-1;const o=e();if(o==null)return;if(n.push(o),!this.eat(12)){if(this.tsIsListTerminator(t))break;return void(s&&this.expect(12))}a=this.state.lastTokStartLoc.index}return i&&(i.value=a),n}tsParseBracketedList(t,e,s,i,n){i||(s?this.expect(0):this.expect(47));const a=this.tsParseDelimitedList(t,e,n);return s?this.expect(3):this.expect(48),a}tsParseImportType(){const t=this.startNode();return this.expect(83),this.expect(10),this.match(134)||this.raise(TSErrors.UnsupportedImportTypeArgument,this.state.startLoc),t.argument=super.parseExprAtom(),this.eat(12)&&!this.match(11)?(t.options=super.parseMaybeAssignAllowIn(),this.eat(12)):t.options=null,this.expect(11),this.eat(16)&&(t.qualifier=this.tsParseEntityName()),this.match(47)&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSImportType")}tsParseEntityName(t=!0){let e=this.parseIdentifier(t);for(;this.eat(16);){const s=this.startNodeAtNode(e);s.left=e,s.right=this.parseIdentifier(t),e=this.finishNode(s,"TSQualifiedName")}return e}tsParseTypeReference(){const t=this.startNode();return t.typeName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSTypeReference")}tsParseThisTypePredicate(t){this.next();const e=this.startNodeAtNode(t);return e.parameterName=t,e.typeAnnotation=this.tsParseTypeAnnotation(!1),e.asserts=!1,this.finishNode(e,"TSTypePredicate")}tsParseThisTypeNode(){const t=this.startNode();return this.next(),this.finishNode(t,"TSThisType")}tsParseTypeQuery(){const t=this.startNode();return this.expect(87),this.match(83)?t.exprName=this.tsParseImportType():t.exprName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSTypeQuery")}tsParseTypeParameter(t){const e=this.startNode();return t(e),e.name=this.tsParseTypeParameterName(),e.constraint=this.tsEatThenParseType(81),e.default=this.tsEatThenParseType(29),this.finishNode(e,"TSTypeParameter")}tsTryParseTypeParameters(t){if(this.match(47))return this.tsParseTypeParameters(t)}tsParseTypeParameters(t){const e=this.startNode();this.match(47)||this.match(143)?this.next():this.unexpected();const s={value:-1};return e.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,t),!1,!0,s),e.params.length===0&&this.raise(TSErrors.EmptyTypeParameters,e),s.value!==-1&&this.addExtra(e,"trailingComma",s.value),this.finishNode(e,"TSTypeParameterDeclaration")}tsFillSignature(t,e){const s=t===19,i="typeAnnotation";e.typeParameters=this.tsTryParseTypeParameters(this.tsParseConstModifier),this.expect(10),e.parameters=this.tsParseBindingListForSignature(),(s||this.match(t))&&(e[i]=this.tsParseTypeOrTypePredicateAnnotation(t))}tsParseBindingListForSignature(){const t=super.parseBindingList(11,41,2);for(const e of t){const{type:s}=e;s!=="AssignmentPattern"&&s!=="TSParameterProperty"||this.raise(TSErrors.UnsupportedSignatureParameterKind,e,{type:s})}return t}tsParseTypeMemberSemicolon(){this.eat(12)||this.isLineTerminator()||this.expect(13)}tsParseSignatureMember(t,e){return this.tsFillSignature(14,e),this.tsParseTypeMemberSemicolon(),this.finishNode(e,t)}tsIsUnambiguouslyIndexSignature(){return this.next(),!!tokenIsIdentifier(this.state.type)&&(this.next(),this.match(14))}tsTryParseIndexSignature(t){if(!this.match(0)||!this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this)))return;this.expect(0);const e=this.parseIdentifier();e.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(e),this.expect(3),t.parameters=[e];const s=this.tsTryParseTypeAnnotation();return s&&(t.typeAnnotation=s),this.tsParseTypeMemberSemicolon(),this.finishNode(t,"TSIndexSignature")}tsParsePropertyOrMethodSignature(t,e){this.eat(17)&&(t.optional=!0);const s=t;if(this.match(10)||this.match(47)){e&&this.raise(TSErrors.ReadonlyForMethodSignature,t);const i=s;i.kind&&this.match(47)&&this.raise(TSErrors.AccessorCannotHaveTypeParameters,this.state.curPosition()),this.tsFillSignature(14,i),this.tsParseTypeMemberSemicolon();const n="parameters",a="typeAnnotation";if(i.kind==="get")i[n].length>0&&(this.raise(Errors.BadGetterArity,this.state.curPosition()),this.isThisParam(i[n][0])&&this.raise(TSErrors.AccessorCannotDeclareThisParameter,this.state.curPosition()));else if(i.kind==="set"){if(i[n].length!==1)this.raise(Errors.BadSetterArity,this.state.curPosition());else{const o=i[n][0];this.isThisParam(o)&&this.raise(TSErrors.AccessorCannotDeclareThisParameter,this.state.curPosition()),o.type==="Identifier"&&o.optional&&this.raise(TSErrors.SetAccessorCannotHaveOptionalParameter,this.state.curPosition()),o.type==="RestElement"&&this.raise(TSErrors.SetAccessorCannotHaveRestParameter,this.state.curPosition())}i[a]&&this.raise(TSErrors.SetAccessorCannotHaveReturnType,i[a])}else i.kind="method";return this.finishNode(i,"TSMethodSignature")}{const i=s;e&&(i.readonly=!0);const n=this.tsTryParseTypeAnnotation();return n&&(i.typeAnnotation=n),this.tsParseTypeMemberSemicolon(),this.finishNode(i,"TSPropertySignature")}}tsParseTypeMember(){const t=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",t);if(this.match(77)){const s=this.startNode();return this.next(),this.match(10)||this.match(47)?this.tsParseSignatureMember("TSConstructSignatureDeclaration",t):(t.key=this.createIdentifier(s,"new"),this.tsParsePropertyOrMethodSignature(t,!1))}return this.tsParseModifiers({allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]},t),this.tsTryParseIndexSignature(t)||(super.parsePropertyName(t),t.computed||t.key.type!=="Identifier"||t.key.name!=="get"&&t.key.name!=="set"||!this.tsTokenCanFollowModifier()||(t.kind=t.key.name,super.parsePropertyName(t)),this.tsParsePropertyOrMethodSignature(t,!!t.readonly))}tsParseTypeLiteral(){const t=this.startNode();return t.members=this.tsParseObjectTypeMembers(),this.finishNode(t,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);const t=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),t}tsIsStartOfMappedType(){return this.next(),this.eat(53)?this.isContextual(122):(this.isContextual(122)&&this.next(),!!this.match(0)&&(this.next(),!!this.tsIsIdentifier()&&(this.next(),this.match(58))))}tsParseMappedType(){const t=this.startNode();this.expect(5),this.match(53)?(t.readonly=this.state.value,this.next(),this.expectContextual(122)):this.eatContextual(122)&&(t.readonly=!0),this.expect(0);{const e=this.startNode();e.name=this.tsParseTypeParameterName(),e.constraint=this.tsExpectThenParseType(58),t.typeParameter=this.finishNode(e,"TSTypeParameter")}return t.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53)?(t.optional=this.state.value,this.next(),this.expect(17)):this.eat(17)&&(t.optional=!0),t.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(t,"TSMappedType")}tsParseTupleType(){const t=this.startNode();t.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let e=!1;return t.elementTypes.forEach(s=>{const{type:i}=s;!e||i==="TSRestType"||i==="TSOptionalType"||i==="TSNamedTupleMember"&&s.optional||this.raise(TSErrors.OptionalTypeBeforeRequired,s),e||(e=i==="TSNamedTupleMember"&&s.optional||i==="TSOptionalType")}),this.finishNode(t,"TSTupleType")}tsParseTupleElementType(){const{startLoc:t}=this.state,e=this.eat(21);let s,i,n,a;const o=tokenIsKeywordOrIdentifier(this.state.type)?this.lookaheadCharCode():null;if(o===58)s=!0,n=!1,i=this.parseIdentifier(!0),this.expect(14),a=this.tsParseType();else if(o===63){n=!0;const h=this.state.startLoc,l=this.state.value,c=this.tsParseNonArrayType();this.lookaheadCharCode()===58?(s=!0,i=this.createIdentifier(this.startNodeAt(h),l),this.expect(17),this.expect(14),a=this.tsParseType()):(s=!1,a=c,this.expect(17))}else a=this.tsParseType(),n=this.eat(17),s=this.eat(14);if(s){let h;i?(h=this.startNodeAtNode(i),h.optional=n,h.label=i,h.elementType=a,this.eat(17)&&(h.optional=!0,this.raise(TSErrors.TupleOptionalAfterType,this.state.lastTokStartLoc))):(h=this.startNodeAtNode(a),h.optional=n,this.raise(TSErrors.InvalidTupleMemberLabel,a),h.label=a,h.elementType=this.tsParseType()),a=this.finishNode(h,"TSNamedTupleMember")}else if(n){const h=this.startNodeAtNode(a);h.typeAnnotation=a,a=this.finishNode(h,"TSOptionalType")}if(e){const h=this.startNodeAt(t);h.typeAnnotation=a,a=this.finishNode(h,"TSRestType")}return a}tsParseParenthesizedType(){const t=this.startNode();return this.expect(10),t.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(t,"TSParenthesizedType")}tsParseFunctionOrConstructorType(t,e){const s=this.startNode();return t==="TSConstructorType"&&(s.abstract=!!e,e&&this.next(),this.next()),this.tsInAllowConditionalTypesContext(()=>this.tsFillSignature(19,s)),this.finishNode(s,t)}tsParseLiteralTypeNode(){const t=this.startNode();switch(this.state.type){case 135:case 136:case 134:case 85:case 86:t.literal=super.parseExprAtom();break;default:this.unexpected()}return this.finishNode(t,"TSLiteralType")}tsParseTemplateLiteralType(){const t=this.startNode();return t.literal=super.parseTemplate(!1),this.finishNode(t,"TSLiteralType")}parseTemplateSubstitution(){return this.state.inType?this.tsParseType():super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){const t=this.tsParseThisTypeNode();return this.isContextual(116)&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(t):t}tsParseNonArrayType(){switch(this.state.type){case 134:case 135:case 136:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if(this.state.value==="-"){const t=this.startNode(),e=this.lookahead();return e.type!==135&&e.type!==136&&this.unexpected(),t.literal=this.parseMaybeUnary(),this.finishNode(t,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{const{type:t}=this.state;if(tokenIsIdentifier(t)||t===88||t===84){const e=t===88?"TSVoidKeyword":t===84?"TSNullKeyword":keywordTypeFromName(this.state.value);if(e!==void 0&&this.lookaheadCharCode()!==46){const s=this.startNode();return this.next(),this.finishNode(s,e)}return this.tsParseTypeReference()}}}this.unexpected()}tsParseArrayTypeOrHigher(){let t=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(0);)if(this.match(3)){const e=this.startNodeAtNode(t);e.elementType=t,this.expect(3),t=this.finishNode(e,"TSArrayType")}else{const e=this.startNodeAtNode(t);e.objectType=t,e.indexType=this.tsParseType(),this.expect(3),t=this.finishNode(e,"TSIndexedAccessType")}return t}tsParseTypeOperator(){const t=this.startNode(),e=this.state.value;return this.next(),t.operator=e,t.typeAnnotation=this.tsParseTypeOperatorOrHigher(),e==="readonly"&&this.tsCheckTypeAnnotationForReadOnly(t),this.finishNode(t,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(t){switch(t.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(TSErrors.UnexpectedReadonly,t)}}tsParseInferType(){const t=this.startNode();this.expectContextual(115);const e=this.startNode();return e.name=this.tsParseTypeParameterName(),e.constraint=this.tsTryParse(()=>this.tsParseConstraintForInferType()),t.typeParameter=this.finishNode(e,"TSTypeParameter"),this.finishNode(t,"TSInferType")}tsParseConstraintForInferType(){if(this.eat(81)){const t=this.tsInDisallowConditionalTypesContext(()=>this.tsParseType());if(this.state.inDisallowConditionalTypesContext||!this.match(17))return t}}tsParseTypeOperatorOrHigher(){return tokenIsTSTypeOperator(this.state.type)&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(115)?this.tsParseInferType():this.tsInAllowConditionalTypesContext(()=>this.tsParseArrayTypeOrHigher())}tsParseUnionOrIntersectionType(t,e,s){const i=this.startNode(),n=this.eat(s),a=[];do a.push(e());while(this.eat(s));return a.length!==1||n?(i.types=a,this.finishNode(i,t)):a[0]}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){return!!this.match(47)||this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(tokenIsIdentifier(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){const{errors:t}=this.state,e=t.length;try{return this.parseObjectLike(8,!0),t.length===e}catch(s){return!1}}if(this.match(0)){this.next();const{errors:t}=this.state,e=t.length;try{return super.parseBindingList(3,93,1),t.length===e}catch(s){return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){return this.next(),!!(this.match(11)||this.match(21)||this.tsSkipParameterStart()&&(this.match(14)||this.match(12)||this.match(17)||this.match(29)||this.match(11)&&(this.next(),this.match(19))))}tsParseTypeOrTypePredicateAnnotation(t){return this.tsInType(()=>{const e=this.startNode();this.expect(t);const s=this.startNode(),i=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(i&&this.match(78)){let o=this.tsParseThisTypeOrThisTypePredicate();return o.type==="TSThisType"?(s.parameterName=o,s.asserts=!0,s.typeAnnotation=null,o=this.finishNode(s,"TSTypePredicate")):(this.resetStartLocationFromNode(o,s),o.asserts=!0),e.typeAnnotation=o,this.finishNode(e,"TSTypeAnnotation")}const n=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!n)return i?(s.parameterName=this.parseIdentifier(),s.asserts=i,s.typeAnnotation=null,e.typeAnnotation=this.finishNode(s,"TSTypePredicate"),this.finishNode(e,"TSTypeAnnotation")):this.tsParseTypeAnnotation(!1,e);const a=this.tsParseTypeAnnotation(!1);return s.parameterName=n,s.typeAnnotation=a,s.asserts=i,e.typeAnnotation=this.finishNode(s,"TSTypePredicate"),this.finishNode(e,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){if(this.match(14))return this.tsParseTypeOrTypePredicateAnnotation(14)}tsTryParseTypeAnnotation(){if(this.match(14))return this.tsParseTypeAnnotation()}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){const t=this.parseIdentifier();if(this.isContextual(116)&&!this.hasPrecedingLineBreak())return this.next(),t}tsParseTypePredicateAsserts(){if(this.state.type!==109)return!1;const t=this.state.containsEsc;return this.next(),!(!tokenIsIdentifier(this.state.type)&&!this.match(78))&&(t&&this.raise(Errors.InvalidEscapedReservedWord,this.state.lastTokStartLoc,{reservedWord:"asserts"}),!0)}tsParseTypeAnnotation(t=!0,e=this.startNode()){return this.tsInType(()=>{t&&this.expect(14),e.typeAnnotation=this.tsParseType()}),this.finishNode(e,"TSTypeAnnotation")}tsParseType(){assert(this.state.inType);const t=this.tsParseNonConditionalType();if(this.state.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(81))return t;const e=this.startNodeAtNode(t);return e.checkType=t,e.extendsType=this.tsInDisallowConditionalTypesContext(()=>this.tsParseNonConditionalType()),this.expect(17),e.trueType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.expect(14),e.falseType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.finishNode(e,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(124)&&this.lookahead().type===77}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(77)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(TSErrors.ReservedTypeAssertion,this.state.startLoc);const t=this.startNode();return t.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?this.tsParseTypeReference():this.tsParseType())),this.expect(48),t.expression=this.parseMaybeUnary(),this.finishNode(t,"TSTypeAssertion")}tsParseHeritageClause(t){const e=this.state.startLoc,s=this.tsParseDelimitedList("HeritageClauseElement",()=>{const i=this.startNode();return i.expression=this.tsParseEntityName(),this.match(47)&&(i.typeParameters=this.tsParseTypeArguments()),this.finishNode(i,"TSExpressionWithTypeArguments")});return s.length||this.raise(TSErrors.EmptyHeritageClauseType,e,{token:t}),s}tsParseInterfaceDeclaration(t,e={}){if(this.hasFollowingLineBreak())return null;this.expectContextual(129),e.declare&&(t.declare=!0),tokenIsIdentifier(this.state.type)?(t.id=this.parseIdentifier(),this.checkIdentifier(t.id,130)):(t.id=null,this.raise(TSErrors.MissingInterfaceName,this.state.startLoc)),t.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers),this.eat(81)&&(t.extends=this.tsParseHeritageClause("extends"));const s=this.startNode();return s.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),t.body=this.finishNode(s,"TSInterfaceBody"),this.finishNode(t,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(t){return t.id=this.parseIdentifier(),this.checkIdentifier(t.id,2),t.typeAnnotation=this.tsInType(()=>{if(t.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers),this.expect(29),this.isContextual(114)&&this.lookahead().type!==16){const e=this.startNode();return this.next(),this.finishNode(e,"TSIntrinsicKeyword")}return this.tsParseType()}),this.semicolon(),this.finishNode(t,"TSTypeAliasDeclaration")}tsInNoContext(t){const e=this.state.context;this.state.context=[e[0]];try{return t()}finally{this.state.context=e}}tsInType(t){const e=this.state.inType;this.state.inType=!0;try{return t()}finally{this.state.inType=e}}tsInDisallowConditionalTypesContext(t){const e=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!0;try{return t()}finally{this.state.inDisallowConditionalTypesContext=e}}tsInAllowConditionalTypesContext(t){const e=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!1;try{return t()}finally{this.state.inDisallowConditionalTypesContext=e}}tsEatThenParseType(t){if(this.match(t))return this.tsNextThenParseType()}tsExpectThenParseType(t){return this.tsInType(()=>(this.expect(t),this.tsParseType()))}tsNextThenParseType(){return this.tsInType(()=>(this.next(),this.tsParseType()))}tsParseEnumMember(){const t=this.startNode();return t.id=this.match(134)?super.parseStringLiteral(this.state.value):this.parseIdentifier(!0),this.eat(29)&&(t.initializer=super.parseMaybeAssignAllowIn()),this.finishNode(t,"TSEnumMember")}tsParseEnumDeclaration(t,e={}){return e.const&&(t.const=!0),e.declare&&(t.declare=!0),this.expectContextual(126),t.id=this.parseIdentifier(),this.checkIdentifier(t.id,t.const?8971:8459),this.expect(5),t.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(t,"TSEnumDeclaration")}tsParseModuleBlock(){const t=this.startNode();return this.scope.enter(0),this.expect(5),super.parseBlockOrModuleBlockBody(t.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(t,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(t,e=!1){if(t.id=this.parseIdentifier(),e||this.checkIdentifier(t.id,1024),this.eat(16)){const s=this.startNode();this.tsParseModuleOrNamespaceDeclaration(s,!0),t.body=s}else this.scope.enter(256),this.prodParam.enter(0),t.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(t,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(t){return this.isContextual(112)?(t.kind="global",t.global=!0,t.id=this.parseIdentifier()):this.match(134)?(t.kind="module",t.id=super.parseStringLiteral(this.state.value)):this.unexpected(),this.match(5)?(this.scope.enter(256),this.prodParam.enter(0),t.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit()):this.semicolon(),this.finishNode(t,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(t,e,s){t.isExport=s||!1,t.id=e||this.parseIdentifier(),this.checkIdentifier(t.id,4096),this.expect(29);const i=this.tsParseModuleReference();return t.importKind==="type"&&i.type!=="TSExternalModuleReference"&&this.raise(TSErrors.ImportAliasHasImportType,i),t.moduleReference=i,this.semicolon(),this.finishNode(t,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(119)&&this.lookaheadCharCode()===40}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)}tsParseExternalModuleReference(){const t=this.startNode();return this.expectContextual(119),this.expect(10),this.match(134)||this.unexpected(),t.expression=super.parseExprAtom(),this.expect(11),this.sawUnambiguousESM=!0,this.finishNode(t,"TSExternalModuleReference")}tsLookAhead(t){const e=this.state.clone(),s=t();return this.state=e,s}tsTryParseAndCatch(t){const e=this.tryParse(s=>t()||s());if(!e.aborted&&e.node)return e.error&&(this.state=e.failState),e.node}tsTryParse(t){const e=this.state.clone(),s=t();if(s!==void 0&&s!==!1)return s;this.state=e}tsTryParseDeclare(t){if(this.isLineTerminator())return;let e,s=this.state.type;return this.isContextual(100)&&(s=74,e="let"),this.tsInAmbientContext(()=>{switch(s){case 68:return t.declare=!0,super.parseFunctionStatement(t,!1,!1);case 80:return t.declare=!0,this.parseClass(t,!0,!1);case 126:return this.tsParseEnumDeclaration(t,{declare:!0});case 112:return this.tsParseAmbientExternalModuleDeclaration(t);case 75:case 74:return this.match(75)&&this.isLookaheadContextual("enum")?(this.expect(75),this.tsParseEnumDeclaration(t,{const:!0,declare:!0})):(t.declare=!0,this.parseVarStatement(t,e||this.state.value,!0));case 129:{const i=this.tsParseInterfaceDeclaration(t,{declare:!0});if(i)return i}default:if(tokenIsIdentifier(s))return this.tsParseDeclaration(t,this.state.value,!0,null)}})}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0,null)}tsParseExpressionStatement(t,e,s){switch(e.name){case"declare":{const i=this.tsTryParseDeclare(t);return i&&(i.declare=!0),i}case"global":if(this.match(5)){this.scope.enter(256),this.prodParam.enter(0);const i=t;return i.kind="global",i.global=!0,i.id=e,i.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(i,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(t,e.name,!1,s)}}tsParseDeclaration(t,e,s,i){switch(e){case"abstract":if(this.tsCheckLineTerminator(s)&&(this.match(80)||tokenIsIdentifier(this.state.type)))return this.tsParseAbstractDeclaration(t,i);break;case"module":if(this.tsCheckLineTerminator(s)){if(this.match(134))return this.tsParseAmbientExternalModuleDeclaration(t);if(tokenIsIdentifier(this.state.type))return t.kind="module",this.tsParseModuleOrNamespaceDeclaration(t)}break;case"namespace":if(this.tsCheckLineTerminator(s)&&tokenIsIdentifier(this.state.type))return t.kind="namespace",this.tsParseModuleOrNamespaceDeclaration(t);break;case"type":if(this.tsCheckLineTerminator(s)&&tokenIsIdentifier(this.state.type))return this.tsParseTypeAliasDeclaration(t)}}tsCheckLineTerminator(t){return t?!this.hasFollowingLineBreak()&&(this.next(),!0):!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(t){if(!this.match(47))return;const e=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;const s=this.tsTryParseAndCatch(()=>{const i=this.startNodeAt(t);return i.typeParameters=this.tsParseTypeParameters(this.tsParseConstModifier),super.parseFunctionParams(i),i.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),i});return this.state.maybeInArrowParameters=e,s?super.parseArrowExpression(s,null,!0):void 0}tsParseTypeArgumentsInExpression(){if(this.reScan_lt()===47)return this.tsParseTypeArguments()}tsParseTypeArguments(){const t=this.startNode();return t.params=this.tsInType(()=>this.tsInNoContext(()=>(this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))),t.params.length===0?this.raise(TSErrors.EmptyTypeArguments,t):this.state.inType||this.curContext()!==types.brace||this.reScan_lt_gt(),this.expect(48),this.finishNode(t,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return tokenIsTSDeclarationStart(this.state.type)}isExportDefaultSpecifier(){return!this.tsIsDeclarationStart()&&super.isExportDefaultSpecifier()}parseAssignableListItem(t,e){const s=this.state.startLoc,i={};this.tsParseModifiers({allowedModifiers:["public","private","protected","override","readonly"]},i);const n=i.accessibility,a=i.override,o=i.readonly;4&t||!(n||o||a)||this.raise(TSErrors.UnexpectedParameterModifier,s);const h=this.parseMaybeDefault();2&t&&this.parseFunctionParamType(h);const l=this.parseMaybeDefault(h.loc.start,h);if(n||o||a){const c=this.startNodeAt(s);return e.length&&(c.decorators=e),n&&(c.accessibility=n),o&&(c.readonly=o),a&&(c.override=a),l.type!=="Identifier"&&l.type!=="AssignmentPattern"&&this.raise(TSErrors.UnsupportedParameterPropertyKind,c),c.parameter=l,this.finishNode(c,"TSParameterProperty")}return e.length&&(h.decorators=e),l}isSimpleParameter(t){return t.type==="TSParameterProperty"&&super.isSimpleParameter(t.parameter)||super.isSimpleParameter(t)}tsDisallowOptionalPattern(t){for(const e of t.params)e.type!=="Identifier"&&e.optional&&!this.state.isAmbientContext&&this.raise(TSErrors.PatternIsOptional,e)}setArrowFunctionParameters(t,e,s){super.setArrowFunctionParameters(t,e,s),this.tsDisallowOptionalPattern(t)}parseFunctionBodyAndFinish(t,e,s=!1){this.match(14)&&(t.returnType=this.tsParseTypeOrTypePredicateAnnotation(14));const i=e==="FunctionDeclaration"?"TSDeclareFunction":e==="ClassMethod"||e==="ClassPrivateMethod"?"TSDeclareMethod":void 0;return i&&!this.match(5)&&this.isLineTerminator()?this.finishNode(t,i):i==="TSDeclareFunction"&&this.state.isAmbientContext&&(this.raise(TSErrors.DeclareFunctionHasImplementation,t),t.declare)?super.parseFunctionBodyAndFinish(t,i,s):(this.tsDisallowOptionalPattern(t),super.parseFunctionBodyAndFinish(t,e,s))}registerFunctionStatementId(t){!t.body&&t.id?this.checkIdentifier(t.id,1024):super.registerFunctionStatementId(t)}tsCheckForInvalidTypeCasts(t){t.forEach(e=>{(e==null?void 0:e.type)==="TSTypeCastExpression"&&this.raise(TSErrors.UnexpectedTypeAnnotation,e.typeAnnotation)})}toReferencedList(t,e){return this.tsCheckForInvalidTypeCasts(t),t}parseArrayLike(t,e,s,i){const n=super.parseArrayLike(t,e,s,i);return n.type==="ArrayExpression"&&this.tsCheckForInvalidTypeCasts(n.elements),n}parseSubscript(t,e,s,i){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();const a=this.startNodeAt(e);return a.expression=t,this.finishNode(a,"TSNonNullExpression")}let n=!1;if(this.match(18)&&this.lookaheadCharCode()===60){if(s)return i.stop=!0,t;i.optionalChainMember=n=!0,this.next()}if(this.match(47)||this.match(51)){let a;const o=this.tsTryParseAndCatch(()=>{if(!s&&this.atPossibleAsyncArrow(t)){const p=this.tsTryParseGenericAsyncArrowFunction(e);if(p)return p}const h=this.tsParseTypeArgumentsInExpression();if(!h)return;if(n&&!this.match(10))return void(a=this.state.curPosition());if(tokenIsTemplate(this.state.type)){const p=super.parseTaggedTemplateExpression(t,e,i);return p.typeParameters=h,p}if(!s&&this.eat(10)){const p=this.startNodeAt(e);return p.callee=t,p.arguments=this.parseCallExpressionArguments(11),this.tsCheckForInvalidTypeCasts(p.arguments),p.typeParameters=h,i.optionalChainMember&&(p.optional=n),this.finishCallExpression(p,i.optionalChainMember)}const l=this.state.type;if(l===48||l===52||l!==10&&tokenCanStartExpression(l)&&!this.hasPrecedingLineBreak())return;const c=this.startNodeAt(e);return c.expression=t,c.typeParameters=h,this.finishNode(c,"TSInstantiationExpression")});if(a&&this.unexpected(a,10),o)return o.type==="TSInstantiationExpression"&&(this.match(16)||this.match(18)&&this.lookaheadCharCode()!==40)&&this.raise(TSErrors.InvalidPropertyAccessAfterInstantiationExpression,this.state.startLoc),o}return super.parseSubscript(t,e,s,i)}parseNewCallee(t){var e;super.parseNewCallee(t);const{callee:s}=t;s.type!=="TSInstantiationExpression"||(e=s.extra)!=null&&e.parenthesized||(t.typeParameters=s.typeParameters,t.callee=s.expression)}parseExprOp(t,e,s){let i;if(tokenOperatorPrecedence(58)>s&&!this.hasPrecedingLineBreak()&&(this.isContextual(93)||(i=this.isContextual(120)))){const n=this.startNodeAt(e);return n.expression=t,n.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?(i&&this.raise(Errors.UnexpectedKeyword,this.state.startLoc,{keyword:"const"}),this.tsParseTypeReference()):this.tsParseType())),this.finishNode(n,i?"TSSatisfiesExpression":"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(n,e,s)}return super.parseExprOp(t,e,s)}checkReservedWord(t,e,s,i){this.state.isAmbientContext||super.checkReservedWord(t,e,s,i)}checkImportReflection(t){super.checkImportReflection(t),t.module&&t.importKind!=="value"&&this.raise(TSErrors.ImportReflectionHasImportType,t.specifiers[0].loc.start)}checkDuplicateExports(){}isPotentialImportPhase(t){if(super.isPotentialImportPhase(t))return!0;if(this.isContextual(130)){const e=this.lookaheadCharCode();return t?e===123||e===42:e!==61}return!t&&this.isContextual(87)}applyImportPhase(t,e,s,i){super.applyImportPhase(t,e,s,i),e?t.exportKind=s==="type"?"type":"value":t.importKind=s==="type"||s==="typeof"?s:"value"}parseImport(t){if(this.match(134))return t.importKind="value",super.parseImport(t);let e;if(tokenIsIdentifier(this.state.type)&&this.lookaheadCharCode()===61)return t.importKind="value",this.tsParseImportEqualsDeclaration(t);if(this.isContextual(130)){const s=this.parseMaybeImportPhase(t,!1);if(this.lookaheadCharCode()===61)return this.tsParseImportEqualsDeclaration(t,s);e=super.parseImportSpecifiersAndAfter(t,s)}else e=super.parseImport(t);return e.importKind==="type"&&e.specifiers.length>1&&e.specifiers[0].type==="ImportDefaultSpecifier"&&this.raise(TSErrors.TypeImportCannotSpecifyDefaultAndNamed,e),e}parseExport(t,e){if(this.match(83)){this.next();const s=t;let i=null;return this.isContextual(130)&&this.isPotentialImportPhase(!1)?i=this.parseMaybeImportPhase(s,!1):s.importKind="value",this.tsParseImportEqualsDeclaration(s,i,!0)}if(this.eat(29)){const s=t;return s.expression=super.parseExpression(),this.semicolon(),this.sawUnambiguousESM=!0,this.finishNode(s,"TSExportAssignment")}if(this.eatContextual(93)){const s=t;return this.expectContextual(128),s.id=this.parseIdentifier(),this.semicolon(),this.finishNode(s,"TSNamespaceExportDeclaration")}return super.parseExport(t,e)}isAbstractClass(){return this.isContextual(124)&&this.lookahead().type===80}parseExportDefaultExpression(){if(this.isAbstractClass()){const t=this.startNode();return this.next(),t.abstract=!0,this.parseClass(t,!0,!0)}if(this.match(129)){const t=this.tsParseInterfaceDeclaration(this.startNode());if(t)return t}return super.parseExportDefaultExpression()}parseVarStatement(t,e,s=!1){const{isAmbientContext:i}=this.state,n=super.parseVarStatement(t,e,s||i);if(!i)return n;for(const{id:a,init:o}of n.declarations)o&&(e!=="const"||a.typeAnnotation?this.raise(TSErrors.InitializerNotAllowedInAmbientContext,o):isValidAmbientConstInitializer(o,this.hasPlugin("estree"))||this.raise(TSErrors.ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference,o));return n}parseStatementContent(t,e){if(this.match(75)&&this.isLookaheadContextual("enum")){const s=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(s,{const:!0})}if(this.isContextual(126))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(129)){const s=this.tsParseInterfaceDeclaration(this.startNode());if(s)return s}return super.parseStatementContent(t,e)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(t,e){return e.some(s=>tsIsAccessModifier(s)?t.accessibility===s:!!t[s])}tsIsStartOfStaticBlocks(){return this.isContextual(106)&&this.lookaheadCharCode()===123}parseClassMember(t,e,s){const i=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({allowedModifiers:i,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:TSErrors.InvalidModifierOnTypeParameterPositions},e);const n=()=>{this.tsIsStartOfStaticBlocks()?(this.next(),this.next(),this.tsHasSomeModifiers(e,i)&&this.raise(TSErrors.StaticBlockCannotHaveModifier,this.state.curPosition()),super.parseClassStaticBlock(t,e)):this.parseClassMemberWithIsStatic(t,e,s,!!e.static)};e.declare?this.tsInAmbientContext(n):n()}parseClassMemberWithIsStatic(t,e,s,i){const n=this.tsTryParseIndexSignature(e);if(n)return t.body.push(n),e.abstract&&this.raise(TSErrors.IndexSignatureHasAbstract,e),e.accessibility&&this.raise(TSErrors.IndexSignatureHasAccessibility,e,{modifier:e.accessibility}),e.declare&&this.raise(TSErrors.IndexSignatureHasDeclare,e),void(e.override&&this.raise(TSErrors.IndexSignatureHasOverride,e));!this.state.inAbstractClass&&e.abstract&&this.raise(TSErrors.NonAbstractClassHasAbstractMethod,e),e.override&&(s.hadSuperClass||this.raise(TSErrors.OverrideNotInSubClass,e)),super.parseClassMemberWithIsStatic(t,e,s,i)}parsePostMemberNameModifiers(t){this.eat(17)&&(t.optional=!0),t.readonly&&this.match(10)&&this.raise(TSErrors.ClassMethodHasReadonly,t),t.declare&&this.match(10)&&this.raise(TSErrors.ClassMethodHasDeclare,t)}parseExpressionStatement(t,e,s){return(e.type==="Identifier"?this.tsParseExpressionStatement(t,e,s):void 0)||super.parseExpressionStatement(t,e,s)}shouldParseExportDeclaration(){return!!this.tsIsDeclarationStart()||super.shouldParseExportDeclaration()}parseConditional(t,e,s){if(!this.state.maybeInArrowParameters||!this.match(17))return super.parseConditional(t,e,s);const i=this.tryParse(()=>super.parseConditional(t,e));return i.node?(i.error&&(this.state=i.failState),i.node):(i.error&&super.setOptionalParametersError(s,i.error),t)}parseParenItem(t,e){const s=super.parseParenItem(t,e);if(this.eat(17)&&(s.optional=!0,this.resetEndLocation(t)),this.match(14)){const i=this.startNodeAt(e);return i.expression=t,i.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(i,"TSTypeCastExpression")}return t}parseExportDeclaration(t){if(!this.state.isAmbientContext&&this.isContextual(125))return this.tsInAmbientContext(()=>this.parseExportDeclaration(t));const e=this.state.startLoc,s=this.eatContextual(125);if(s&&(this.isContextual(125)||!this.shouldParseExportDeclaration()))throw this.raise(TSErrors.ExpectedAmbientAfterExportDeclare,this.state.startLoc);const i=tokenIsIdentifier(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(t);return i?((i.type==="TSInterfaceDeclaration"||i.type==="TSTypeAliasDeclaration"||s)&&(t.exportKind="type"),s&&(this.resetStartLocation(i,e),i.declare=!0),i):null}parseClassId(t,e,s,i){if((!e||s)&&this.isContextual(113))return;super.parseClassId(t,e,s,t.declare?1024:8331);const n=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers);n&&(t.typeParameters=n)}parseClassPropertyAnnotation(t){t.optional||(this.eat(35)?t.definite=!0:this.eat(17)&&(t.optional=!0));const e=this.tsTryParseTypeAnnotation();e&&(t.typeAnnotation=e)}parseClassProperty(t){if(this.parseClassPropertyAnnotation(t),this.state.isAmbientContext&&(!t.readonly||t.typeAnnotation)&&this.match(29)&&this.raise(TSErrors.DeclareClassFieldHasInitializer,this.state.startLoc),t.abstract&&this.match(29)){const{key:e}=t;this.raise(TSErrors.AbstractPropertyHasInitializer,this.state.startLoc,{propertyName:e.type!=="Identifier"||t.computed?`[${this.input.slice(this.offsetToSourcePos(e.start),this.offsetToSourcePos(e.end))}]`:e.name})}return super.parseClassProperty(t)}parseClassPrivateProperty(t){return t.abstract&&this.raise(TSErrors.PrivateElementHasAbstract,t),t.accessibility&&this.raise(TSErrors.PrivateElementHasAccessibility,t,{modifier:t.accessibility}),this.parseClassPropertyAnnotation(t),super.parseClassPrivateProperty(t)}parseClassAccessorProperty(t){return this.parseClassPropertyAnnotation(t),t.optional&&this.raise(TSErrors.AccessorCannotBeOptional,t),super.parseClassAccessorProperty(t)}pushClassMethod(t,e,s,i,n,a){const o=this.tsTryParseTypeParameters(this.tsParseConstModifier);o&&n&&this.raise(TSErrors.ConstructorHasTypeParameters,o);const{declare:h=!1,kind:l}=e;!h||l!=="get"&&l!=="set"||this.raise(TSErrors.DeclareAccessor,e,{kind:l}),o&&(e.typeParameters=o),super.pushClassMethod(t,e,s,i,n,a)}pushClassPrivateMethod(t,e,s,i){const n=this.tsTryParseTypeParameters(this.tsParseConstModifier);n&&(e.typeParameters=n),super.pushClassPrivateMethod(t,e,s,i)}declareClassPrivateMethodInScope(t,e){t.type!=="TSDeclareMethod"&&(t.type!=="MethodDefinition"||hasOwnProperty.call(t.value,"body"))&&super.declareClassPrivateMethodInScope(t,e)}parseClassSuper(t){super.parseClassSuper(t),t.superClass&&(this.match(47)||this.match(51))&&(t.superTypeParameters=this.tsParseTypeArgumentsInExpression()),this.eatContextual(113)&&(t.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(t,e,s,i,n,a,o){const h=this.tsTryParseTypeParameters(this.tsParseConstModifier);return h&&(t.typeParameters=h),super.parseObjPropValue(t,e,s,i,n,a,o)}parseFunctionParams(t,e){const s=this.tsTryParseTypeParameters(this.tsParseConstModifier);s&&(t.typeParameters=s),super.parseFunctionParams(t,e)}parseVarId(t,e){super.parseVarId(t,e),t.id.type==="Identifier"&&!this.hasPrecedingLineBreak()&&this.eat(35)&&(t.definite=!0);const s=this.tsTryParseTypeAnnotation();s&&(t.id.typeAnnotation=s,this.resetEndLocation(t.id))}parseAsyncArrowFromCallExpression(t,e){return this.match(14)&&(t.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(t,e)}parseMaybeAssign(t,e){var s,i,n,a,o;let h,l,c,p;if(this.hasPlugin("jsx")&&(this.match(143)||this.match(47))){if(h=this.state.clone(),l=this.tryParse(()=>super.parseMaybeAssign(t,e),h),!l.error)return l.node;const{context:d}=this.state,m=d[d.length-1];m!==types.j_oTag&&m!==types.j_expr||d.pop()}if(!((s=l)!=null&&s.error||this.match(47)))return super.parseMaybeAssign(t,e);h&&h!==this.state||(h=this.state.clone());const u=this.tryParse(d=>{var m,f;p=this.tsParseTypeParameters(this.tsParseConstModifier);const g=super.parseMaybeAssign(t,e);return(g.type!=="ArrowFunctionExpression"||(m=g.extra)!=null&&m.parenthesized)&&d(),((f=p)==null?void 0:f.params.length)!==0&&this.resetStartLocationFromNode(g,p),g.typeParameters=p,g},h);if(!u.error&&!u.aborted)return p&&this.reportReservedArrowTypeParam(p),u.node;if(!l&&(assert(!this.hasPlugin("jsx")),c=this.tryParse(()=>super.parseMaybeAssign(t,e),h),!c.error))return c.node;if((i=l)!=null&&i.node)return this.state=l.failState,l.node;if(u.node)return this.state=u.failState,p&&this.reportReservedArrowTypeParam(p),u.node;if((n=c)!=null&&n.node)return this.state=c.failState,c.node;throw((a=l)==null?void 0:a.error)||u.error||((o=c)==null?void 0:o.error)}reportReservedArrowTypeParam(t){var e;t.params.length!==1||t.params[0].constraint||(e=t.extra)!=null&&e.trailingComma||!this.getPluginOption("typescript","disallowAmbiguousJSXLike")||this.raise(TSErrors.ReservedArrowTypeParam,t)}parseMaybeUnary(t,e){return!this.hasPlugin("jsx")&&this.match(47)?this.tsParseTypeAssertion():super.parseMaybeUnary(t,e)}parseArrow(t){if(this.match(14)){const e=this.tryParse(s=>{const i=this.tsParseTypeOrTypePredicateAnnotation(14);return!this.canInsertSemicolon()&&this.match(19)||s(),i});if(e.aborted)return;e.thrown||(e.error&&(this.state=e.failState),t.returnType=e.node)}return super.parseArrow(t)}parseFunctionParamType(t){this.eat(17)&&(t.optional=!0);const e=this.tsTryParseTypeAnnotation();return e&&(t.typeAnnotation=e),this.resetEndLocation(t),t}isAssignable(t,e){switch(t.type){case"TSTypeCastExpression":return this.isAssignable(t.expression,e);case"TSParameterProperty":return!0;default:return super.isAssignable(t,e)}}toAssignable(t,e=!1){switch(t.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(t,e);break;case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":e?this.expressionScope.recordArrowParameterBindingError(TSErrors.UnexpectedTypeCastInParameter,t):this.raise(TSErrors.UnexpectedTypeCastInParameter,t),this.toAssignable(t.expression,e);break;case"AssignmentExpression":e||t.left.type!=="TSTypeCastExpression"||(t.left=this.typeCastToParameter(t.left));default:super.toAssignable(t,e)}}toAssignableParenthesizedExpression(t,e){switch(t.expression.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(t.expression,e);break;default:super.toAssignable(t,e)}}checkToRestConversion(t,e){switch(t.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(t.expression,!1);break;default:super.checkToRestConversion(t,e)}}isValidLVal(t,e,s){switch(t){case"TSTypeCastExpression":return!0;case"TSParameterProperty":return"parameter";case"TSNonNullExpression":case"TSInstantiationExpression":return"expression";case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":return(s!==64||!e)&&["expression",!0];default:return super.isValidLVal(t,e,s)}}parseBindingAtom(){return this.state.type===78?this.parseIdentifier(!0):super.parseBindingAtom()}parseMaybeDecoratorArguments(t){if(this.match(47)||this.match(51)){const e=this.tsParseTypeArgumentsInExpression();if(this.match(10)){const s=super.parseMaybeDecoratorArguments(t);return s.typeParameters=e,s}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(t)}checkCommaAfterRest(t){return this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===t?(this.next(),!1):super.checkCommaAfterRest(t)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(t,e){const s=super.parseMaybeDefault(t,e);return s.type==="AssignmentPattern"&&s.typeAnnotation&&s.right.start<s.typeAnnotation.start&&this.raise(TSErrors.TypeAnnotationAfterAssign,s.typeAnnotation),s}getTokenFromCode(t){if(this.state.inType){if(t===62)return void this.finishOp(48,1);if(t===60)return void this.finishOp(47,1)}super.getTokenFromCode(t)}reScan_lt_gt(){const{type:t}=this.state;t===47?(this.state.pos-=1,this.readToken_lt()):t===48&&(this.state.pos-=1,this.readToken_gt())}reScan_lt(){const{type:t}=this.state;return t===51?(this.state.pos-=2,this.finishOp(47,1),47):t}toAssignableList(t,e,s){for(let i=0;i<t.length;i++){const n=t[i];(n==null?void 0:n.type)==="TSTypeCastExpression"&&(t[i]=this.typeCastToParameter(n))}super.toAssignableList(t,e,s)}typeCastToParameter(t){return t.expression.typeAnnotation=t.typeAnnotation,this.resetEndLocation(t.expression,t.typeAnnotation.loc.end),t.expression}shouldParseArrow(t){return this.match(14)?t.every(e=>this.isAssignable(e,!0)):super.shouldParseArrow(t)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(t){if(this.match(47)||this.match(51)){const e=this.tsTryParseAndCatch(()=>this.tsParseTypeArgumentsInExpression());e&&(t.typeParameters=e)}return super.jsxParseOpeningElementAfterName(t)}getGetterSetterExpectedParamCount(t){const e=super.getGetterSetterExpectedParamCount(t),s=this.getObjectOrClassMethodParams(t)[0];return s&&this.isThisParam(s)?e+1:e}parseCatchClauseParam(){const t=super.parseCatchClauseParam(),e=this.tsTryParseTypeAnnotation();return e&&(t.typeAnnotation=e,this.resetEndLocation(t)),t}tsInAmbientContext(t){const{isAmbientContext:e,strict:s}=this.state;this.state.isAmbientContext=!0,this.state.strict=!1;try{return t()}finally{this.state.isAmbientContext=e,this.state.strict=s}}parseClass(t,e,s){const i=this.state.inAbstractClass;this.state.inAbstractClass=!!t.abstract;try{return super.parseClass(t,e,s)}finally{this.state.inAbstractClass=i}}tsParseAbstractDeclaration(t,e){if(this.match(80))return t.abstract=!0,this.maybeTakeDecorators(e,this.parseClass(t,!0,!1));if(this.isContextual(129)){if(!this.hasFollowingLineBreak())return t.abstract=!0,this.raise(TSErrors.NonClassMethodPropertyHasAbstractModifer,t),this.tsParseInterfaceDeclaration(t)}else this.unexpected(null,80)}parseMethod(t,e,s,i,n,a,o){const h=super.parseMethod(t,e,s,i,n,a,o);if(h.abstract&&(this.hasPlugin("estree")?h.value.body:h.body)){const{key:l}=h;this.raise(TSErrors.AbstractMethodHasImplementation,h,{methodName:l.type!=="Identifier"||h.computed?`[${this.input.slice(this.offsetToSourcePos(l.start),this.offsetToSourcePos(l.end))}]`:l.name})}return h}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.parse()}getExpression(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.getExpression()}parseExportSpecifier(t,e,s,i){return!e&&i?(this.parseTypeOnlyImportExportSpecifier(t,!1,s),this.finishNode(t,"ExportSpecifier")):(t.exportKind="value",super.parseExportSpecifier(t,e,s,i))}parseImportSpecifier(t,e,s,i,n){return!e&&i?(this.parseTypeOnlyImportExportSpecifier(t,!0,s),this.finishNode(t,"ImportSpecifier")):(t.importKind="value",super.parseImportSpecifier(t,e,s,i,s?4098:4096))}parseTypeOnlyImportExportSpecifier(t,e,s){const i=e?"imported":"local",n=e?"local":"exported";let a,o=t[i],h=!1,l=!0;const c=o.loc.start;if(this.isContextual(93)){const p=this.parseIdentifier();if(this.isContextual(93)){const u=this.parseIdentifier();tokenIsKeywordOrIdentifier(this.state.type)?(h=!0,o=p,a=e?this.parseIdentifier():this.parseModuleExportName(),l=!1):(a=u,l=!1)}else tokenIsKeywordOrIdentifier(this.state.type)?(l=!1,a=e?this.parseIdentifier():this.parseModuleExportName()):(h=!0,o=p)}else tokenIsKeywordOrIdentifier(this.state.type)&&(h=!0,e?(o=this.parseIdentifier(!0),this.isContextual(93)||this.checkReservedWord(o.name,o.loc.start,!0,!0)):o=this.parseModuleExportName());h&&s&&this.raise(e?TSErrors.TypeModifierIsUsedInTypeImports:TSErrors.TypeModifierIsUsedInTypeExports,c),t[i]=o,t[n]=a,t[e?"importKind":"exportKind"]=h?"type":"value",l&&this.eatContextual(93)&&(t[n]=e?this.parseIdentifier():this.parseModuleExportName()),t[n]||(t[n]=cloneIdentifier(t[i])),e&&this.checkIdentifier(t[n],h?4098:4096)}};function isPossiblyLiteralEnum(r){if(r.type!=="MemberExpression")return!1;const{computed:t,property:e}=r;return(!t||e.type==="StringLiteral"||!(e.type!=="TemplateLiteral"||e.expressions.length>0))&&isUncomputedMemberExpressionChain(r.object)}function isValidAmbientConstInitializer(r,t){var e;const{type:s}=r;if((e=r.extra)!=null&&e.parenthesized)return!1;if(t){if(s==="Literal"){const{value:i}=r;if(typeof i=="string"||typeof i=="boolean")return!0}}else if(s==="StringLiteral"||s==="BooleanLiteral")return!0;return!(!isNumber(r,t)&&!isNegativeNumber(r,t))||s==="TemplateLiteral"&&r.expressions.length===0||!!isPossiblyLiteralEnum(r)}function isNumber(r,t){return t?r.type==="Literal"&&(typeof r.value=="number"||"bigint"in r):r.type==="NumericLiteral"||r.type==="BigIntLiteral"}function isNegativeNumber(r,t){if(r.type==="UnaryExpression"){const{operator:e,argument:s}=r;if(e==="-"&&isNumber(s,t))return!0}return!1}function isUncomputedMemberExpressionChain(r){return r.type==="Identifier"||r.type==="MemberExpression"&&!r.computed&&isUncomputedMemberExpressionChain(r.object)}const PlaceholderErrors=ParseErrorEnum`placeholders`({ClassNameIsRequired:"A class name is required.",UnexpectedSpace:"Unexpected space in placeholder."});var placeholders=r=>class extends r{parsePlaceholder(t){if(this.match(133)){const e=this.startNode();return this.next(),this.assertNoSpace(),e.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(133),this.finishPlaceholder(e,t)}}finishPlaceholder(t,e){let s=t;return s.expectedNode&&s.type||(s=this.finishNode(s,"Placeholder")),s.expectedNode=e,s}getTokenFromCode(t){t===37&&this.input.charCodeAt(this.state.pos+1)===37?this.finishOp(133,2):super.getTokenFromCode(t)}parseExprAtom(t){return this.parsePlaceholder("Expression")||super.parseExprAtom(t)}parseIdentifier(t){return this.parsePlaceholder("Identifier")||super.parseIdentifier(t)}checkReservedWord(t,e,s,i){t!==void 0&&super.checkReservedWord(t,e,s,i)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom()}isValidLVal(t,e,s){return t==="Placeholder"||super.isValidLVal(t,e,s)}toAssignable(t,e){t&&t.type==="Placeholder"&&t.expectedNode==="Expression"?t.expectedNode="Pattern":super.toAssignable(t,e)}chStartsBindingIdentifier(t,e){return super.chStartsBindingIdentifier(t,e)?!0:this.lookahead().type===133}verifyBreakContinue(t,e){t.label&&t.label.type==="Placeholder"||super.verifyBreakContinue(t,e)}parseExpressionStatement(t,e){var s;if(e.type!=="Placeholder"||(s=e.extra)!=null&&s.parenthesized)return super.parseExpressionStatement(t,e);if(this.match(14)){const n=t;return n.label=this.finishPlaceholder(e,"Identifier"),this.next(),n.body=super.parseStatementOrSloppyAnnexBFunctionDeclaration(),this.finishNode(n,"LabeledStatement")}this.semicolon();const i=t;return i.name=e.name,this.finishPlaceholder(i,"Statement")}parseBlock(t,e,s){return this.parsePlaceholder("BlockStatement")||super.parseBlock(t,e,s)}parseFunctionId(t){return this.parsePlaceholder("Identifier")||super.parseFunctionId(t)}parseClass(t,e,s){const i=e?"ClassDeclaration":"ClassExpression";this.next();const n=this.state.strict,a=this.parsePlaceholder("Identifier");if(a){if(!(this.match(81)||this.match(133)||this.match(5))){if(s||!e)return t.id=null,t.body=this.finishPlaceholder(a,"ClassBody"),this.finishNode(t,i);throw this.raise(PlaceholderErrors.ClassNameIsRequired,this.state.startLoc)}t.id=a}else this.parseClassId(t,e,s);return super.parseClassSuper(t),t.body=this.parsePlaceholder("ClassBody")||super.parseClassBody(!!t.superClass,n),this.finishNode(t,i)}parseExport(t,e){const s=this.parsePlaceholder("Identifier");if(!s)return super.parseExport(t,e);const i=t;if(!this.isContextual(98)&&!this.match(12))return i.specifiers=[],i.source=null,i.declaration=this.finishPlaceholder(s,"Declaration"),this.finishNode(i,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");const n=this.startNode();return n.exported=s,i.specifiers=[this.finishNode(n,"ExportDefaultSpecifier")],super.parseExport(i,e)}isExportDefaultSpecifier(){if(this.match(65)){const t=this.nextTokenStart();if(this.isUnparsedContextual(t,"from")&&this.input.startsWith(tokenLabelName(133),this.nextTokenStartSince(t+4)))return!0}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(t,e){var s;return!((s=t.specifiers)==null||!s.length)||super.maybeParseExportDefaultSpecifier(t,e)}checkExport(t){const{specifiers:e}=t;e!=null&&e.length&&(t.specifiers=e.filter(s=>s.exported.type==="Placeholder")),super.checkExport(t),t.specifiers=e}parseImport(t){const e=this.parsePlaceholder("Identifier");if(!e)return super.parseImport(t);if(t.specifiers=[],!this.isContextual(98)&&!this.match(12))return t.source=this.finishPlaceholder(e,"StringLiteral"),this.semicolon(),this.finishNode(t,"ImportDeclaration");const s=this.startNodeAtNode(e);return s.local=e,t.specifiers.push(this.finishNode(s,"ImportDefaultSpecifier")),this.eat(12)&&(this.maybeParseStarImportSpecifier(t)||this.parseNamedImportSpecifiers(t)),this.expectContextual(98),t.source=this.parseImportSource(),this.semicolon(),this.finishNode(t,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource()}assertNoSpace(){this.state.start>this.offsetToSourcePos(this.state.lastTokEndLoc.index)&&this.raise(PlaceholderErrors.UnexpectedSpace,this.state.lastTokEndLoc)}},v8intrinsic=r=>class extends r{parseV8Intrinsic(){if(this.match(54)){const t=this.state.startLoc,e=this.startNode();if(this.next(),tokenIsIdentifier(this.state.type)){const s=this.parseIdentifierName(),i=this.createIdentifier(e,s);if(i.type="V8IntrinsicIdentifier",this.match(10))return i}this.unexpected(t)}}parseExprAtom(t){return this.parseV8Intrinsic()||super.parseExprAtom(t)}};const PIPELINE_PROPOSALS=["minimal","fsharp","hack","smart"],TOPIC_TOKENS=["^^","@@","^","%","#"];function validatePlugins(r){if(r.has("decorators")){if(r.has("decorators-legacy"))throw new Error("Cannot use the decorators and decorators-legacy plugin together");const e=r.get("decorators").decoratorsBeforeExport;if(e!=null&&typeof e!="boolean")throw new Error("'decoratorsBeforeExport' must be a boolean, if specified.");const s=r.get("decorators").allowCallParenthesized;if(s!=null&&typeof s!="boolean")throw new Error("'allowCallParenthesized' must be a boolean.")}if(r.has("flow")&&r.has("typescript"))throw new Error("Cannot combine flow and typescript plugins.");if(r.has("placeholders")&&r.has("v8intrinsic"))throw new Error("Cannot combine placeholders and v8intrinsic plugins.");if(r.has("pipelineOperator")){var t;const e=r.get("pipelineOperator").proposal;if(!PIPELINE_PROPOSALS.includes(e)){const i=PIPELINE_PROPOSALS.map(n=>`"${n}"`).join(", ");throw new Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${i}.`)}const s=((t=r.get("recordAndTuple"))==null?void 0:t.syntaxType)==="hash";if(e==="hack"){if(r.has("placeholders"))throw new Error("Cannot combine placeholders plugin and Hack-style pipes.");if(r.has("v8intrinsic"))throw new Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");const i=r.get("pipelineOperator").topicToken;if(!TOPIC_TOKENS.includes(i)){const n=TOPIC_TOKENS.map(a=>`"${a}"`).join(", ");throw new Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${n}.`)}if(i==="#"&&s)throw new Error(`Plugin conflict between \`["pipelineOperator", { proposal: "hack", topicToken: "#" }]\` and \`${JSON.stringify(["recordAndTuple",r.get("recordAndTuple")])}\`.`)}else if(e==="smart"&&s)throw new Error(`Plugin conflict between \`["pipelineOperator", { proposal: "smart" }]\` and \`${JSON.stringify(["recordAndTuple",r.get("recordAndTuple")])}\`.`)}if(r.has("moduleAttributes")){if(r.has("deprecatedImportAssert")||r.has("importAssertions"))throw new Error("Cannot combine importAssertions, deprecatedImportAssert and moduleAttributes plugins.");if(r.get("moduleAttributes").version!=="may-2020")throw new Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(r.has("importAssertions")&&r.has("deprecatedImportAssert"))throw new Error("Cannot combine importAssertions and deprecatedImportAssert plugins.");if(!r.has("deprecatedImportAssert")&&r.has("importAttributes")&&r.get("importAttributes").deprecatedAssertSyntax&&r.set("deprecatedImportAssert",{}),r.has("recordAndTuple")){const e=r.get("recordAndTuple").syntaxType;if(e!=null){const s=["hash","bar"];if(!s.includes(e))throw new Error("The 'syntaxType' option of the 'recordAndTuple' plugin must be one of: "+s.map(i=>`'${i}'`).join(", "))}}if(r.has("asyncDoExpressions")&&!r.has("doExpressions")){const e=new Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw e.missingPlugins="doExpressions",e}if(r.has("optionalChainingAssign")&&r.get("optionalChainingAssign").version!=="2023-07")throw new Error("The 'optionalChainingAssign' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is '2023-07'.")}const mixinPlugins={estree,jsx,flow,typescript,v8intrinsic,placeholders},mixinPluginNames=Object.keys(mixinPlugins);function createDefaultOptions(){return{sourceType:"script",sourceFilename:void 0,startIndex:0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowNewTargetOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createImportExpressions:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0,annexB:!0}}function getOptions(r){const t=createDefaultOptions();if(r==null)return t;if(r.annexB!=null&&r.annexB!==!1)throw new Error("The `annexB` option can only be set to `false`.");for(const e of Object.keys(t))r[e]!=null&&(t[e]=r[e]);if(t.startLine===1)r.startIndex==null&&t.startColumn>0?t.startIndex=t.startColumn:r.startColumn==null&&t.startIndex>0&&(t.startColumn=t.startIndex);else if((r.startColumn==null||r.startIndex==null)&&r.startIndex!=null)throw new Error("With a `startLine > 1` you must also specify `startIndex` and `startColumn`.");return t}class ExpressionParser extends LValParser{checkProto(t,e,s,i){if(t.type==="SpreadElement"||this.isObjectMethod(t)||t.computed||t.shorthand)return;const n=t.key;if((n.type==="Identifier"?n.name:n.value)==="__proto__"){if(e)return void this.raise(Errors.RecordNoProto,n);s.used&&(i?i.doubleProtoLoc===null&&(i.doubleProtoLoc=n.loc.start):this.raise(Errors.DuplicateProto,n)),s.used=!0}}shouldExitDescending(t,e){return t.type==="ArrowFunctionExpression"&&this.offsetToSourcePos(t.start)===e}getExpression(){this.enterInitialScopes(),this.nextToken();const t=this.parseExpression();return this.match(140)||this.unexpected(),this.finalizeRemainingComments(),t.comments=this.comments,t.errors=this.state.errors,this.options.tokens&&(t.tokens=this.tokens),t}parseExpression(t,e){return t?this.disallowInAnd(()=>this.parseExpressionBase(e)):this.allowInAnd(()=>this.parseExpressionBase(e))}parseExpressionBase(t){const e=this.state.startLoc,s=this.parseMaybeAssign(t);if(this.match(12)){const i=this.startNodeAt(e);for(i.expressions=[s];this.eat(12);)i.expressions.push(this.parseMaybeAssign(t));return this.toReferencedList(i.expressions),this.finishNode(i,"SequenceExpression")}return s}parseMaybeAssignDisallowIn(t,e){return this.disallowInAnd(()=>this.parseMaybeAssign(t,e))}parseMaybeAssignAllowIn(t,e){return this.allowInAnd(()=>this.parseMaybeAssign(t,e))}setOptionalParametersError(t,e){var s;t.optionalParametersLoc=(s=e==null?void 0:e.loc)!=null?s:this.state.startLoc}parseMaybeAssign(t,e){const s=this.state.startLoc;if(this.isContextual(108)&&this.prodParam.hasYield){let o=this.parseYield();return e&&(o=e.call(this,o,s)),o}let i;t?i=!1:(t=new ExpressionErrors,i=!0);const{type:n}=this.state;(n===10||tokenIsIdentifier(n))&&(this.state.potentialArrowAt=this.state.start);let a=this.parseMaybeConditional(t);if(e&&(a=e.call(this,a,s)),tokenIsAssignment(this.state.type)){const o=this.startNodeAt(s),h=this.state.value;if(o.operator=h,this.match(29)){this.toAssignable(a,!0),o.left=a;const l=s.index;t.doubleProtoLoc!=null&&t.doubleProtoLoc.index>=l&&(t.doubleProtoLoc=null),t.shorthandAssignLoc!=null&&t.shorthandAssignLoc.index>=l&&(t.shorthandAssignLoc=null),t.privateKeyLoc!=null&&t.privateKeyLoc.index>=l&&(this.checkDestructuringPrivate(t),t.privateKeyLoc=null)}else o.left=a;return this.next(),o.right=this.parseMaybeAssign(),this.checkLVal(a,this.finishNode(o,"AssignmentExpression")),o}return i&&this.checkExpressionErrors(t,!0),a}parseMaybeConditional(t){const e=this.state.startLoc,s=this.state.potentialArrowAt,i=this.parseExprOps(t);return this.shouldExitDescending(i,s)?i:this.parseConditional(i,e,t)}parseConditional(t,e,s){if(this.eat(17)){const i=this.startNodeAt(e);return i.test=t,i.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),i.alternate=this.parseMaybeAssign(),this.finishNode(i,"ConditionalExpression")}return t}parseMaybeUnaryOrPrivate(t){return this.match(139)?this.parsePrivateName():this.parseMaybeUnary(t)}parseExprOps(t){const e=this.state.startLoc,s=this.state.potentialArrowAt,i=this.parseMaybeUnaryOrPrivate(t);return this.shouldExitDescending(i,s)?i:this.parseExprOp(i,e,-1)}parseExprOp(t,e,s){if(this.isPrivateName(t)){const n=this.getPrivateNameSV(t);(s>=tokenOperatorPrecedence(58)||!this.prodParam.hasIn||!this.match(58))&&this.raise(Errors.PrivateInExpectedIn,t,{identifierName:n}),this.classScope.usePrivateName(n,t.loc.start)}const i=this.state.type;if(tokenIsOperator(i)&&(this.prodParam.hasIn||!this.match(58))){let n=tokenOperatorPrecedence(i);if(n>s){if(i===39){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return t;this.checkPipelineAtInfixOperator(t,e)}const a=this.startNodeAt(e);a.left=t,a.operator=this.state.value;const o=i===41||i===42,h=i===40;if(h&&(n=tokenOperatorPrecedence(42)),this.next(),i===39&&this.hasPlugin(["pipelineOperator",{proposal:"minimal"}])&&this.state.type===96&&this.prodParam.hasAwait)throw this.raise(Errors.UnexpectedAwaitAfterPipelineBody,this.state.startLoc);a.right=this.parseExprOpRightExpr(i,n);const l=this.finishNode(a,o||h?"LogicalExpression":"BinaryExpression"),c=this.state.type;if(h&&(c===41||c===42)||o&&c===40)throw this.raise(Errors.MixingCoalesceWithLogical,this.state.startLoc);return this.parseExprOp(l,e,s)}}return t}parseExprOpRightExpr(t,e){const s=this.state.startLoc;if(t===39)switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext(()=>this.parseHackPipeBody());case"smart":return this.withTopicBindingContext(()=>{if(this.prodParam.hasYield&&this.isContextual(108))throw this.raise(Errors.PipeBodyIsTighter,this.state.startLoc);return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(t,e),s)});case"fsharp":return this.withSoloAwaitPermittingContext(()=>this.parseFSharpPipelineBody(e))}return this.parseExprOpBaseRightExpr(t,e)}parseExprOpBaseRightExpr(t,e){const s=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),s,tokenIsRightAssociative(t)?e-1:e)}parseHackPipeBody(){var t;const{startLoc:e}=this.state,s=this.parseMaybeAssign();return!UnparenthesizedPipeBodyDescriptions.has(s.type)||(t=s.extra)!=null&&t.parenthesized||this.raise(Errors.PipeUnparenthesizedBody,e,{type:s.type}),this.topicReferenceWasUsedInCurrentContext()||this.raise(Errors.PipeTopicUnused,e),s}checkExponentialAfterUnary(t){this.match(57)&&this.raise(Errors.UnexpectedTokenUnaryExponentiation,t.argument)}parseMaybeUnary(t,e){const s=this.state.startLoc,i=this.isContextual(96);if(i&&this.recordAwaitIfAllowed()){this.next();const h=this.parseAwait(s);return e||this.checkExponentialAfterUnary(h),h}const n=this.match(34),a=this.startNode();if(tokenIsPrefix(this.state.type)){a.operator=this.state.value,a.prefix=!0,this.match(72)&&this.expectPlugin("throwExpressions");const h=this.match(89);if(this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),this.state.strict&&h){const l=a.argument;l.type==="Identifier"?this.raise(Errors.StrictDelete,a):this.hasPropertyAsPrivateName(l)&&this.raise(Errors.DeletePrivateField,a)}if(!n)return e||this.checkExponentialAfterUnary(a),this.finishNode(a,"UnaryExpression")}const o=this.parseUpdate(a,n,t);if(i){const{type:h}=this.state;if((this.hasPlugin("v8intrinsic")?tokenCanStartExpression(h):tokenCanStartExpression(h)&&!this.match(54))&&!this.isAmbiguousAwait())return this.raiseOverwrite(Errors.AwaitNotInAsyncContext,s),this.parseAwait(s)}return o}parseUpdate(t,e,s){if(e){const a=t;return this.checkLVal(a.argument,this.finishNode(a,"UpdateExpression")),t}const i=this.state.startLoc;let n=this.parseExprSubscripts(s);if(this.checkExpressionErrors(s,!1))return n;for(;tokenIsPostfix(this.state.type)&&!this.canInsertSemicolon();){const a=this.startNodeAt(i);a.operator=this.state.value,a.prefix=!1,a.argument=n,this.next(),this.checkLVal(n,n=this.finishNode(a,"UpdateExpression"))}return n}parseExprSubscripts(t){const e=this.state.startLoc,s=this.state.potentialArrowAt,i=this.parseExprAtom(t);return this.shouldExitDescending(i,s)?i:this.parseSubscripts(i,e)}parseSubscripts(t,e,s){const i={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(t),stop:!1};do t=this.parseSubscript(t,e,s,i),i.maybeAsyncArrow=!1;while(!i.stop);return t}parseSubscript(t,e,s,i){const{type:n}=this.state;if(!s&&n===15)return this.parseBind(t,e,s,i);if(tokenIsTemplate(n))return this.parseTaggedTemplateExpression(t,e,i);let a=!1;if(n===18){if(s&&(this.raise(Errors.OptionalChainingNoNew,this.state.startLoc),this.lookaheadCharCode()===40))return i.stop=!0,t;i.optionalChainMember=a=!0,this.next()}if(!s&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(t,e,i,a);{const o=this.eat(0);return o||a||this.eat(16)?this.parseMember(t,e,i,o,a):(i.stop=!0,t)}}parseMember(t,e,s,i,n){const a=this.startNodeAt(e);return a.object=t,a.computed=i,i?(a.property=this.parseExpression(),this.expect(3)):this.match(139)?(t.type==="Super"&&this.raise(Errors.SuperPrivateField,e),this.classScope.usePrivateName(this.state.value,this.state.startLoc),a.property=this.parsePrivateName()):a.property=this.parseIdentifier(!0),s.optionalChainMember?(a.optional=n,this.finishNode(a,"OptionalMemberExpression")):this.finishNode(a,"MemberExpression")}parseBind(t,e,s,i){const n=this.startNodeAt(e);return n.object=t,this.next(),n.callee=this.parseNoCallExpr(),i.stop=!0,this.parseSubscripts(this.finishNode(n,"BindExpression"),e,s)}parseCoverCallAndAsyncArrowHead(t,e,s,i){const n=this.state.maybeInArrowParameters;let a=null;this.state.maybeInArrowParameters=!0,this.next();const o=this.startNodeAt(e);o.callee=t;const{maybeAsyncArrow:h,optionalChainMember:l}=s;h&&(this.expressionScope.enter(newAsyncArrowScope()),a=new ExpressionErrors),l&&(o.optional=i),o.arguments=i?this.parseCallExpressionArguments(11):this.parseCallExpressionArguments(11,t.type!=="Super",o,a);let c=this.finishCallExpression(o,l);return h&&this.shouldParseAsyncArrow()&&!i?(s.stop=!0,this.checkDestructuringPrivate(a),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),c=this.parseAsyncArrowFromCallExpression(this.startNodeAt(e),c)):(h&&(this.checkExpressionErrors(a,!0),this.expressionScope.exit()),this.toReferencedArguments(c)),this.state.maybeInArrowParameters=n,c}toReferencedArguments(t,e){this.toReferencedListDeep(t.arguments,e)}parseTaggedTemplateExpression(t,e,s){const i=this.startNodeAt(e);return i.tag=t,i.quasi=this.parseTemplate(!0),s.optionalChainMember&&this.raise(Errors.OptionalChainingNoTemplate,e),this.finishNode(i,"TaggedTemplateExpression")}atPossibleAsyncArrow(t){return t.type==="Identifier"&&t.name==="async"&&this.state.lastTokEndLoc.index===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.offsetToSourcePos(t.start)===this.state.potentialArrowAt}finishCallExpression(t,e){if(t.callee.type==="Import")if(t.arguments.length===0||t.arguments.length>2)this.raise(Errors.ImportCallArity,t);else for(const s of t.arguments)s.type==="SpreadElement"&&this.raise(Errors.ImportCallSpreadArgument,s);return this.finishNode(t,e?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(t,e,s,i){const n=[];let a=!0;const o=this.state.inFSharpPipelineDirectBody;for(this.state.inFSharpPipelineDirectBody=!1;!this.eat(t);){if(a)a=!1;else if(this.expect(12),this.match(t)){s&&this.addTrailingCommaExtraToNode(s),this.next();break}n.push(this.parseExprListItem(!1,i,e))}return this.state.inFSharpPipelineDirectBody=o,n}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(t,e){var s;return this.resetPreviousNodeTrailingComments(e),this.expect(19),this.parseArrowExpression(t,e.arguments,!0,(s=e.extra)==null?void 0:s.trailingCommaLoc),e.innerComments&&setInnerComments(t,e.innerComments),e.callee.trailingComments&&setInnerComments(t,e.callee.trailingComments),t}parseNoCallExpr(){const t=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),t,!0)}parseExprAtom(t){let e,s=null;const{type:i}=this.state;switch(i){case 79:return this.parseSuper();case 83:return e=this.startNode(),this.next(),this.match(16)?this.parseImportMetaProperty(e):this.match(10)?this.options.createImportExpressions?this.parseImportCall(e):this.finishNode(e,"Import"):(this.raise(Errors.UnsupportedImport,this.state.lastTokStartLoc),this.finishNode(e,"Import"));case 78:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case 90:return this.parseDo(this.startNode(),!1);case 56:case 31:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 135:return this.parseNumericLiteral(this.state.value);case 136:return this.parseBigIntLiteral(this.state.value);case 134:return this.parseStringLiteral(this.state.value);case 84:return this.parseNullLiteral();case 85:return this.parseBooleanLiteral(!0);case 86:return this.parseBooleanLiteral(!1);case 10:{const n=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression(n)}case 2:case 1:return this.parseArrayLike(this.state.type===2?4:3,!1,!0);case 0:return this.parseArrayLike(3,!0,!1,t);case 6:case 7:return this.parseObjectLike(this.state.type===6?9:8,!1,!0);case 5:return this.parseObjectLike(8,!1,!1,t);case 68:return this.parseFunctionOrFunctionSent();case 26:s=this.parseDecorators();case 80:return this.parseClass(this.maybeTakeDecorators(s,this.startNode()),!1);case 77:return this.parseNewOrNewTarget();case 25:case 24:return this.parseTemplate(!1);case 15:{e=this.startNode(),this.next(),e.object=null;const n=e.callee=this.parseNoCallExpr();if(n.type==="MemberExpression")return this.finishNode(e,"BindExpression");throw this.raise(Errors.UnsupportedBind,n)}case 139:return this.raise(Errors.PrivateInExpectedIn,this.state.startLoc,{identifierName:this.state.value}),this.parsePrivateName();case 33:return this.parseTopicReferenceThenEqualsSign(54,"%");case 32:return this.parseTopicReferenceThenEqualsSign(44,"^");case 37:case 38:return this.parseTopicReference("hack");case 44:case 54:case 27:{const n=this.getPluginOption("pipelineOperator","proposal");if(n)return this.parseTopicReference(n);this.unexpected();break}case 47:{const n=this.input.codePointAt(this.nextTokenStart());isIdentifierStart(n)||n===62?this.expectOnePlugin(["jsx","flow","typescript"]):this.unexpected();break}default:if(i===137)return this.parseDecimalLiteral(this.state.value);if(tokenIsIdentifier(i)){if(this.isContextual(127)&&this.lookaheadInLineCharCode()===123)return this.parseModuleExpression();const n=this.state.potentialArrowAt===this.state.start,a=this.state.containsEsc,o=this.parseIdentifier();if(!a&&o.name==="async"&&!this.canInsertSemicolon()){const{type:h}=this.state;if(h===68)return this.resetPreviousNodeTrailingComments(o),this.next(),this.parseAsyncFunctionExpression(this.startNodeAtNode(o));if(tokenIsIdentifier(h))return this.lookaheadCharCode()===61?this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(o)):o;if(h===90)return this.resetPreviousNodeTrailingComments(o),this.parseDo(this.startNodeAtNode(o),!0)}return n&&this.match(19)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(this.startNodeAtNode(o),[o],!1)):o}this.unexpected()}}parseTopicReferenceThenEqualsSign(t,e){const s=this.getPluginOption("pipelineOperator","proposal");if(s)return this.state.type=t,this.state.value=e,this.state.pos--,this.state.end--,this.state.endLoc=createPositionWithColumnOffset(this.state.endLoc,-1),this.parseTopicReference(s);this.unexpected()}parseTopicReference(t){const e=this.startNode(),s=this.state.startLoc,i=this.state.type;return this.next(),this.finishTopicReference(e,s,t,i)}finishTopicReference(t,e,s,i){if(this.testTopicReferenceConfiguration(s,e,i)){const n=s==="smart"?"PipelinePrimaryTopicReference":"TopicReference";return this.topicReferenceIsAllowedInCurrentContext()||this.raise(s==="smart"?Errors.PrimaryTopicNotAllowed:Errors.PipeTopicUnbound,e),this.registerTopicReference(),this.finishNode(t,n)}throw this.raise(Errors.PipeTopicUnconfiguredToken,e,{token:tokenLabelName(i)})}testTopicReferenceConfiguration(t,e,s){switch(t){case"hack":return this.hasPlugin(["pipelineOperator",{topicToken:tokenLabelName(s)}]);case"smart":return s===27;default:throw this.raise(Errors.PipeTopicRequiresHackPipes,e)}}parseAsyncArrowUnaryFunction(t){this.prodParam.enter(functionFlags(!0,this.prodParam.hasYield));const e=[this.parseIdentifier()];return this.prodParam.exit(),this.hasPrecedingLineBreak()&&this.raise(Errors.LineTerminatorBeforeArrow,this.state.curPosition()),this.expect(19),this.parseArrowExpression(t,e,!0)}parseDo(t,e){this.expectPlugin("doExpressions"),e&&this.expectPlugin("asyncDoExpressions"),t.async=e,this.next();const s=this.state.labels;return this.state.labels=[],e?(this.prodParam.enter(2),t.body=this.parseBlock(),this.prodParam.exit()):t.body=this.parseBlock(),this.state.labels=s,this.finishNode(t,"DoExpression")}parseSuper(){const t=this.startNode();return this.next(),!this.match(10)||this.scope.allowDirectSuper||this.options.allowSuperOutsideMethod?this.scope.allowSuper||this.options.allowSuperOutsideMethod||this.raise(Errors.UnexpectedSuper,t):this.raise(Errors.SuperNotAllowed,t),this.match(10)||this.match(0)||this.match(16)||this.raise(Errors.UnsupportedSuper,t),this.finishNode(t,"Super")}parsePrivateName(){const t=this.startNode(),e=this.startNodeAt(createPositionWithColumnOffset(this.state.startLoc,1)),s=this.state.value;return this.next(),t.id=this.createIdentifier(e,s),this.finishNode(t,"PrivateName")}parseFunctionOrFunctionSent(){const t=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){const e=this.createIdentifier(this.startNodeAtNode(t),"function");return this.next(),this.match(103)?this.expectPlugin("functionSent"):this.hasPlugin("functionSent")||this.unexpected(),this.parseMetaProperty(t,e,"sent")}return this.parseFunction(t)}parseMetaProperty(t,e,s){t.meta=e;const i=this.state.containsEsc;return t.property=this.parseIdentifier(!0),(t.property.name!==s||i)&&this.raise(Errors.UnsupportedMetaProperty,t.property,{target:e.name,onlyValidPropertyName:s}),this.finishNode(t,"MetaProperty")}parseImportMetaProperty(t){const e=this.createIdentifier(this.startNodeAtNode(t),"import");if(this.next(),this.isContextual(101))this.inModule||this.raise(Errors.ImportMetaOutsideModule,e),this.sawUnambiguousESM=!0;else if(this.isContextual(105)||this.isContextual(97)){const s=this.isContextual(105);if(s||this.unexpected(),this.expectPlugin(s?"sourcePhaseImports":"deferredImportEvaluation"),!this.options.createImportExpressions)throw this.raise(Errors.DynamicImportPhaseRequiresImportExpressions,this.state.startLoc,{phase:this.state.value});return this.next(),t.phase=s?"source":"defer",this.parseImportCall(t)}return this.parseMetaProperty(t,e,"meta")}parseLiteralAtNode(t,e,s){return this.addExtra(s,"rawValue",t),this.addExtra(s,"raw",this.input.slice(this.offsetToSourcePos(s.start),this.state.end)),s.value=t,this.next(),this.finishNode(s,e)}parseLiteral(t,e){const s=this.startNode();return this.parseLiteralAtNode(t,e,s)}parseStringLiteral(t){return this.parseLiteral(t,"StringLiteral")}parseNumericLiteral(t){return this.parseLiteral(t,"NumericLiteral")}parseBigIntLiteral(t){return this.parseLiteral(t,"BigIntLiteral")}parseDecimalLiteral(t){return this.parseLiteral(t,"DecimalLiteral")}parseRegExpLiteral(t){const e=this.startNode();return this.addExtra(e,"raw",this.input.slice(this.offsetToSourcePos(e.start),this.state.end)),e.pattern=t.pattern,e.flags=t.flags,this.next(),this.finishNode(e,"RegExpLiteral")}parseBooleanLiteral(t){const e=this.startNode();return e.value=t,this.next(),this.finishNode(e,"BooleanLiteral")}parseNullLiteral(){const t=this.startNode();return this.next(),this.finishNode(t,"NullLiteral")}parseParenAndDistinguishExpression(t){const e=this.state.startLoc;let s;this.next(),this.expressionScope.enter(newArrowHeadScope());const i=this.state.maybeInArrowParameters,n=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;const a=this.state.startLoc,o=[],h=new ExpressionErrors;let l,c,p=!0;for(;!this.match(11);){if(p)p=!1;else if(this.expect(12,h.optionalParametersLoc===null?null:h.optionalParametersLoc),this.match(11)){c=this.state.startLoc;break}if(this.match(21)){const m=this.state.startLoc;if(l=this.state.startLoc,o.push(this.parseParenItem(this.parseRestBinding(),m)),!this.checkCommaAfterRest(41))break}else o.push(this.parseMaybeAssignAllowIn(h,this.parseParenItem))}const u=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=i,this.state.inFSharpPipelineDirectBody=n;let d=this.startNodeAt(e);return t&&this.shouldParseArrow(o)&&(d=this.parseArrow(d))?(this.checkDestructuringPrivate(h),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(d,o,!1),d):(this.expressionScope.exit(),o.length||this.unexpected(this.state.lastTokStartLoc),c&&this.unexpected(c),l&&this.unexpected(l),this.checkExpressionErrors(h,!0),this.toReferencedListDeep(o,!0),o.length>1?(s=this.startNodeAt(a),s.expressions=o,this.finishNode(s,"SequenceExpression"),this.resetEndLocation(s,u)):s=o[0],this.wrapParenthesis(e,s))}wrapParenthesis(t,e){if(!this.options.createParenthesizedExpressions)return this.addExtra(e,"parenthesized",!0),this.addExtra(e,"parenStart",t.index),this.takeSurroundingComments(e,t.index,this.state.lastTokEndLoc.index),e;const s=this.startNodeAt(t);return s.expression=e,this.finishNode(s,"ParenthesizedExpression")}shouldParseArrow(t){return!this.canInsertSemicolon()}parseArrow(t){if(this.eat(19))return t}parseParenItem(t,e){return t}parseNewOrNewTarget(){const t=this.startNode();if(this.next(),this.match(16)){const e=this.createIdentifier(this.startNodeAtNode(t),"new");this.next();const s=this.parseMetaProperty(t,e,"target");return this.scope.inNonArrowFunction||this.scope.inClass||this.options.allowNewTargetOutsideFunction||this.raise(Errors.UnexpectedNewTarget,s),s}return this.parseNew(t)}parseNew(t){if(this.parseNewCallee(t),this.eat(10)){const e=this.parseExprList(11);this.toReferencedList(e),t.arguments=e}else t.arguments=[];return this.finishNode(t,"NewExpression")}parseNewCallee(t){const e=this.match(83),s=this.parseNoCallExpr();t.callee=s,!e||s.type!=="Import"&&s.type!=="ImportExpression"||this.raise(Errors.ImportCallNotNewExpression,s)}parseTemplateElement(t){const{start:e,startLoc:s,end:i,value:n}=this.state,a=e+1,o=this.startNodeAt(createPositionWithColumnOffset(s,1));n===null&&(t||this.raise(Errors.InvalidEscapeSequenceTemplate,createPositionWithColumnOffset(this.state.firstInvalidTemplateEscapePos,1)));const h=this.match(24),l=h?-1:-2,c=i+l;o.value={raw:this.input.slice(a,c).replace(/\r\n?/g,`
`),cooked:n===null?null:n.slice(1,l)},o.tail=h,this.next();const p=this.finishNode(o,"TemplateElement");return this.resetEndLocation(p,createPositionWithColumnOffset(this.state.lastTokEndLoc,l)),p}parseTemplate(t){const e=this.startNode();let s=this.parseTemplateElement(t);const i=[s],n=[];for(;!s.tail;)n.push(this.parseTemplateSubstitution()),this.readTemplateContinuation(),i.push(s=this.parseTemplateElement(t));return e.expressions=n,e.quasis=i,this.finishNode(e,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(t,e,s,i){s&&this.expectPlugin("recordAndTuple");const n=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;const a=Object.create(null);let o=!0;const h=this.startNode();for(h.properties=[],this.next();!this.match(t);){if(o)o=!1;else if(this.expect(12),this.match(t)){this.addTrailingCommaExtraToNode(h);break}let c;e?c=this.parseBindingProperty():(c=this.parsePropertyDefinition(i),this.checkProto(c,s,a,i)),s&&!this.isObjectProperty(c)&&c.type!=="SpreadElement"&&this.raise(Errors.InvalidRecordProperty,c),c.shorthand&&this.addExtra(c,"shorthand",!0),h.properties.push(c)}this.next(),this.state.inFSharpPipelineDirectBody=n;let l="ObjectExpression";return e?l="ObjectPattern":s&&(l="RecordExpression"),this.finishNode(h,l)}addTrailingCommaExtraToNode(t){this.addExtra(t,"trailingComma",this.state.lastTokStartLoc.index),this.addExtra(t,"trailingCommaLoc",this.state.lastTokStartLoc,!1)}maybeAsyncOrAccessorProp(t){return!t.computed&&t.key.type==="Identifier"&&(this.isLiteralPropertyName()||this.match(0)||this.match(55))}parsePropertyDefinition(t){let e=[];if(this.match(26))for(this.hasPlugin("decorators")&&this.raise(Errors.UnsupportedPropertyDecorator,this.state.startLoc);this.match(26);)e.push(this.parseDecorator());const s=this.startNode();let i,n=!1,a=!1;if(this.match(21))return e.length&&this.unexpected(),this.parseSpread();e.length&&(s.decorators=e,e=[]),s.method=!1,t&&(i=this.state.startLoc);let o=this.eat(55);this.parsePropertyNamePrefixOperator(s);const h=this.state.containsEsc;if(this.parsePropertyName(s,t),!o&&!h&&this.maybeAsyncOrAccessorProp(s)){const{key:l}=s,c=l.name;c!=="async"||this.hasPrecedingLineBreak()||(n=!0,this.resetPreviousNodeTrailingComments(l),o=this.eat(55),this.parsePropertyName(s)),c!=="get"&&c!=="set"||(a=!0,this.resetPreviousNodeTrailingComments(l),s.kind=c,this.match(55)&&(o=!0,this.raise(Errors.AccessorIsGenerator,this.state.curPosition(),{kind:c}),this.next()),this.parsePropertyName(s))}return this.parseObjPropValue(s,i,o,n,!1,a,t)}getGetterSetterExpectedParamCount(t){return t.kind==="get"?0:1}getObjectOrClassMethodParams(t){return t.params}checkGetterSetterParams(t){var e;const s=this.getGetterSetterExpectedParamCount(t),i=this.getObjectOrClassMethodParams(t);i.length!==s&&this.raise(t.kind==="get"?Errors.BadGetterArity:Errors.BadSetterArity,t),t.kind==="set"&&((e=i[i.length-1])==null?void 0:e.type)==="RestElement"&&this.raise(Errors.BadSetterRestParameter,t)}parseObjectMethod(t,e,s,i,n){if(n){const a=this.parseMethod(t,e,!1,!1,!1,"ObjectMethod");return this.checkGetterSetterParams(a),a}if(s||e||this.match(10))return i&&this.unexpected(),t.kind="method",t.method=!0,this.parseMethod(t,e,s,!1,!1,"ObjectMethod")}parseObjectProperty(t,e,s,i){if(t.shorthand=!1,this.eat(14))return t.value=s?this.parseMaybeDefault(this.state.startLoc):this.parseMaybeAssignAllowIn(i),this.finishNode(t,"ObjectProperty");if(!t.computed&&t.key.type==="Identifier"){if(this.checkReservedWord(t.key.name,t.key.loc.start,!0,!1),s)t.value=this.parseMaybeDefault(e,cloneIdentifier(t.key));else if(this.match(29)){const n=this.state.startLoc;i!=null?i.shorthandAssignLoc===null&&(i.shorthandAssignLoc=n):this.raise(Errors.InvalidCoverInitializedName,n),t.value=this.parseMaybeDefault(e,cloneIdentifier(t.key))}else t.value=cloneIdentifier(t.key);return t.shorthand=!0,this.finishNode(t,"ObjectProperty")}}parseObjPropValue(t,e,s,i,n,a,o){const h=this.parseObjectMethod(t,s,i,n,a)||this.parseObjectProperty(t,e,n,o);return h||this.unexpected(),h}parsePropertyName(t,e){if(this.eat(0))t.computed=!0,t.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{const{type:s,value:i}=this.state;let n;if(tokenIsKeywordOrIdentifier(s))n=this.parseIdentifier(!0);else switch(s){case 135:n=this.parseNumericLiteral(i);break;case 134:n=this.parseStringLiteral(i);break;case 136:n=this.parseBigIntLiteral(i);break;case 139:{const a=this.state.startLoc;e!=null?e.privateKeyLoc===null&&(e.privateKeyLoc=a):this.raise(Errors.UnexpectedPrivateField,a),n=this.parsePrivateName();break}default:if(s===137){n=this.parseDecimalLiteral(i);break}this.unexpected()}t.key=n,s!==139&&(t.computed=!1)}}initFunction(t,e){t.id=null,t.generator=!1,t.async=e}parseMethod(t,e,s,i,n,a,o=!1){this.initFunction(t,s),t.generator=e,this.scope.enter(18|(o?64:0)|(n?32:0)),this.prodParam.enter(functionFlags(s,t.generator)),this.parseFunctionParams(t,i);const h=this.parseFunctionBodyAndFinish(t,a,!0);return this.prodParam.exit(),this.scope.exit(),h}parseArrayLike(t,e,s,i){s&&this.expectPlugin("recordAndTuple");const n=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;const a=this.startNode();return this.next(),a.elements=this.parseExprList(t,!s,i,a),this.state.inFSharpPipelineDirectBody=n,this.finishNode(a,s?"TupleExpression":"ArrayExpression")}parseArrowExpression(t,e,s,i){this.scope.enter(6);let n=functionFlags(s,!1);!this.match(5)&&this.prodParam.hasIn&&(n|=8),this.prodParam.enter(n),this.initFunction(t,s);const a=this.state.maybeInArrowParameters;return e&&(this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(t,e,i)),this.state.maybeInArrowParameters=!1,this.parseFunctionBody(t,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=a,this.finishNode(t,"ArrowFunctionExpression")}setArrowFunctionParameters(t,e,s){this.toAssignableList(e,s,!1),t.params=e}parseFunctionBodyAndFinish(t,e,s=!1){return this.parseFunctionBody(t,!1,s),this.finishNode(t,e)}parseFunctionBody(t,e,s=!1){const i=e&&!this.match(5);if(this.expressionScope.enter(newExpressionScope()),i)t.body=this.parseMaybeAssign(),this.checkParams(t,!1,e,!1);else{const n=this.state.strict,a=this.state.labels;this.state.labels=[],this.prodParam.enter(4|this.prodParam.currentFlags()),t.body=this.parseBlock(!0,!1,o=>{const h=!this.isSimpleParamList(t.params);o&&h&&this.raise(Errors.IllegalLanguageModeDirective,t.kind!=="method"&&t.kind!=="constructor"||!t.key?t:t.key.loc.end);const l=!n&&this.state.strict;this.checkParams(t,!(this.state.strict||e||s||h),e,l),this.state.strict&&t.id&&this.checkIdentifier(t.id,65,l)}),this.prodParam.exit(),this.state.labels=a}this.expressionScope.exit()}isSimpleParameter(t){return t.type==="Identifier"}isSimpleParamList(t){for(let e=0,s=t.length;e<s;e++)if(!this.isSimpleParameter(t[e]))return!1;return!0}checkParams(t,e,s,i=!0){const n=!e&&new Set,a={type:"FormalParameters"};for(const o of t.params)this.checkLVal(o,a,5,n,i)}parseExprList(t,e,s,i){const n=[];let a=!0;for(;!this.eat(t);){if(a)a=!1;else if(this.expect(12),this.match(t)){i&&this.addTrailingCommaExtraToNode(i),this.next();break}n.push(this.parseExprListItem(e,s))}return n}parseExprListItem(t,e,s){let i;if(this.match(12))t||this.raise(Errors.UnexpectedToken,this.state.curPosition(),{unexpected:","}),i=null;else if(this.match(21)){const n=this.state.startLoc;i=this.parseParenItem(this.parseSpread(e),n)}else if(this.match(17)){this.expectPlugin("partialApplication"),s||this.raise(Errors.UnexpectedArgumentPlaceholder,this.state.startLoc);const n=this.startNode();this.next(),i=this.finishNode(n,"ArgumentPlaceholder")}else i=this.parseMaybeAssignAllowIn(e,this.parseParenItem);return i}parseIdentifier(t){const e=this.startNode(),s=this.parseIdentifierName(t);return this.createIdentifier(e,s)}createIdentifier(t,e){return t.name=e,t.loc.identifierName=e,this.finishNode(t,"Identifier")}parseIdentifierName(t){let e;const{startLoc:s,type:i}=this.state;tokenIsKeywordOrIdentifier(i)?e=this.state.value:this.unexpected();const n=tokenKeywordOrIdentifierIsKeyword(i);return t?n&&this.replaceToken(132):this.checkReservedWord(e,s,n,!1),this.next(),e}checkReservedWord(t,e,s,i){if(!(t.length>10)&&canBeReservedWord(t)){if(s&&isKeyword(t))return void this.raise(Errors.UnexpectedKeyword,e,{keyword:t});if((this.state.strict?i?isStrictBindReservedWord:isStrictReservedWord:isReservedWord)(t,this.inModule))this.raise(Errors.UnexpectedReservedWord,e,{reservedWord:t});else if(t==="yield"){if(this.prodParam.hasYield)return void this.raise(Errors.YieldBindingIdentifier,e)}else if(t==="await"){if(this.prodParam.hasAwait)return void this.raise(Errors.AwaitBindingIdentifier,e);if(this.scope.inStaticBlock)return void this.raise(Errors.AwaitBindingIdentifierInStaticBlock,e);this.expressionScope.recordAsyncArrowParametersError(e)}else if(t==="arguments"&&this.scope.inClassAndNotInNonArrowFunction)return void this.raise(Errors.ArgumentsInClass,e)}}recordAwaitIfAllowed(){const t=this.prodParam.hasAwait||this.options.allowAwaitOutsideFunction&&!this.scope.inFunction;return t&&!this.scope.inFunction&&(this.state.hasTopLevelAwait=!0),t}parseAwait(t){const e=this.startNodeAt(t);return this.expressionScope.recordParameterInitializerError(Errors.AwaitExpressionFormalParameter,e),this.eat(55)&&this.raise(Errors.ObsoleteAwaitStar,e),this.scope.inFunction||this.options.allowAwaitOutsideFunction||(this.isAmbiguousAwait()?this.ambiguousScriptDifferentAst=!0:this.sawUnambiguousESM=!0),this.state.soloAwait||(e.argument=this.parseMaybeUnary(null,!0)),this.finishNode(e,"AwaitExpression")}isAmbiguousAwait(){if(this.hasPrecedingLineBreak())return!0;const{type:t}=this.state;return t===53||t===10||t===0||tokenIsTemplate(t)||t===102&&!this.state.containsEsc||t===138||t===56||this.hasPlugin("v8intrinsic")&&t===54}parseYield(){const t=this.startNode();this.expressionScope.recordParameterInitializerError(Errors.YieldInParameter,t),this.next();let e=!1,s=null;if(!this.hasPrecedingLineBreak())switch(e=this.eat(55),this.state.type){case 13:case 140:case 8:case 11:case 3:case 9:case 14:case 12:if(!e)break;default:s=this.parseMaybeAssign()}return t.delegate=e,t.argument=s,this.finishNode(t,"YieldExpression")}parseImportCall(t){if(this.next(),t.source=this.parseMaybeAssignAllowIn(),t.options=null,this.eat(12)&&!this.match(11)&&(t.options=this.parseMaybeAssignAllowIn(),this.eat(12)&&!this.match(11))){do this.parseMaybeAssignAllowIn();while(this.eat(12)&&!this.match(11));this.raise(Errors.ImportCallArity,t)}return this.expect(11),this.finishNode(t,"ImportExpression")}checkPipelineAtInfixOperator(t,e){this.hasPlugin(["pipelineOperator",{proposal:"smart"}])&&t.type==="SequenceExpression"&&this.raise(Errors.PipelineHeadSequenceExpression,e)}parseSmartPipelineBodyInStyle(t,e){if(this.isSimpleReference(t)){const s=this.startNodeAt(e);return s.callee=t,this.finishNode(s,"PipelineBareFunction")}{const s=this.startNodeAt(e);return this.checkSmartPipeTopicBodyEarlyErrors(e),s.expression=t,this.finishNode(s,"PipelineTopicExpression")}}isSimpleReference(t){switch(t.type){case"MemberExpression":return!t.computed&&this.isSimpleReference(t.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(t){if(this.match(19))throw this.raise(Errors.PipelineBodyNoArrow,this.state.startLoc);this.topicReferenceWasUsedInCurrentContext()||this.raise(Errors.PipelineTopicUnused,t)}withTopicBindingContext(t){const e=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return t()}finally{this.state.topicContext=e}}withSmartMixTopicForbiddingContext(t){if(!this.hasPlugin(["pipelineOperator",{proposal:"smart"}]))return t();{const e=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return t()}finally{this.state.topicContext=e}}}withSoloAwaitPermittingContext(t){const e=this.state.soloAwait;this.state.soloAwait=!0;try{return t()}finally{this.state.soloAwait=e}}allowInAnd(t){const e=this.prodParam.currentFlags();if(8&~e){this.prodParam.enter(8|e);try{return t()}finally{this.prodParam.exit()}}return t()}disallowInAnd(t){const e=this.prodParam.currentFlags();if(8&e){this.prodParam.enter(-9&e);try{return t()}finally{this.prodParam.exit()}}return t()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return this.state.topicContext.maxTopicIndex!=null&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(t){const e=this.state.startLoc;this.state.potentialArrowAt=this.state.start;const s=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;const i=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),e,t);return this.state.inFSharpPipelineDirectBody=s,i}parseModuleExpression(){this.expectPlugin("moduleBlocks");const t=this.startNode();this.next(),this.match(5)||this.unexpected(null,5);const e=this.startNodeAt(this.state.endLoc);this.next();const s=this.initializeScopes(!0);this.enterInitialScopes();try{t.body=this.parseProgram(e,8,"module")}finally{s()}return this.finishNode(t,"ModuleExpression")}parsePropertyNamePrefixOperator(t){}}const loopLabel={kind:1},switchLabel={kind:2},loneSurrogate=/[\uD800-\uDFFF]/u,keywordRelationalOperator=/in(?:stanceof)?/y;function babel7CompatTokens(r,t,e){for(let s=0;s<r.length;s++){const i=r[s],{type:n}=i;if(typeof n=="number"){if(n===139){const{loc:a,start:o,value:h,end:l}=i,c=o+1,p=createPositionWithColumnOffset(a.start,1);r.splice(s,1,new Token({type:getExportedToken(27),value:"#",start:o,end:c,startLoc:a.start,endLoc:p}),new Token({type:getExportedToken(132),value:h,start:c,end:l,startLoc:p,endLoc:a.end})),s++;continue}if(tokenIsTemplate(n)){const{loc:a,start:o,value:h,end:l}=i,c=o+1,p=createPositionWithColumnOffset(a.start,1);let u,d,m,f,g;u=t.charCodeAt(o-e)===96?new Token({type:getExportedToken(22),value:"`",start:o,end:c,startLoc:a.start,endLoc:p}):new Token({type:getExportedToken(8),value:"}",start:o,end:c,startLoc:a.start,endLoc:p}),n===24?(m=l-1,f=createPositionWithColumnOffset(a.end,-1),d=h===null?null:h.slice(1,-1),g=new Token({type:getExportedToken(22),value:"`",start:m,end:l,startLoc:f,endLoc:a.end})):(m=l-2,f=createPositionWithColumnOffset(a.end,-2),d=h===null?null:h.slice(1,-2),g=new Token({type:getExportedToken(23),value:"${",start:m,end:l,startLoc:f,endLoc:a.end})),r.splice(s,1,u,new Token({type:getExportedToken(20),value:d,start:c,end:m,startLoc:p,endLoc:f}),g),s+=2;continue}i.type=getExportedToken(n)}}return r}class StatementParser extends ExpressionParser{parseTopLevel(t,e){return t.program=this.parseProgram(e),t.comments=this.comments,this.options.tokens&&(t.tokens=babel7CompatTokens(this.tokens,this.input,this.startIndex)),this.finishNode(t,"File")}parseProgram(t,e=140,s=this.options.sourceType){if(t.sourceType=s,t.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(t,!0,!0,e),this.inModule){if(!this.options.allowUndeclaredExports&&this.scope.undefinedExports.size>0)for(const[n,a]of Array.from(this.scope.undefinedExports))this.raise(Errors.ModuleExportUndefined,a,{localName:n});this.addExtra(t,"topLevelAwait",this.state.hasTopLevelAwait)}let i;return i=e===140?this.finishNode(t,"Program"):this.finishNodeAt(t,"Program",createPositionWithColumnOffset(this.state.startLoc,-1)),i}stmtToDirective(t){const e=t;e.type="Directive",e.value=e.expression,delete e.expression;const s=e.value,i=s.value,n=this.input.slice(this.offsetToSourcePos(s.start),this.offsetToSourcePos(s.end)),a=s.value=n.slice(1,-1);return this.addExtra(s,"raw",n),this.addExtra(s,"rawValue",a),this.addExtra(s,"expressionValue",i),s.type="DirectiveLiteral",e}parseInterpreterDirective(){if(!this.match(28))return null;const t=this.startNode();return t.value=this.state.value,this.next(),this.finishNode(t,"InterpreterDirective")}isLet(){return!!this.isContextual(100)&&this.hasFollowingBindingAtom()}chStartsBindingIdentifier(t,e){if(isIdentifierStart(t)){if(keywordRelationalOperator.lastIndex=e,keywordRelationalOperator.test(this.input)){const s=this.codePointAtPos(keywordRelationalOperator.lastIndex);if(!isIdentifierChar(s)&&s!==92)return!1}return!0}return t===92}chStartsBindingPattern(t){return t===91||t===123}hasFollowingBindingAtom(){const t=this.nextTokenStart(),e=this.codePointAtPos(t);return this.chStartsBindingPattern(e)||this.chStartsBindingIdentifier(e,t)}hasInLineFollowingBindingIdentifierOrBrace(){const t=this.nextTokenInLineStart(),e=this.codePointAtPos(t);return e===123||this.chStartsBindingIdentifier(e,t)}startsUsingForOf(){const{type:t,containsEsc:e}=this.lookahead();return!(t===102&&!e)&&(tokenIsIdentifier(t)&&!this.hasFollowingLineBreak()?(this.expectPlugin("explicitResourceManagement"),!0):void 0)}startsAwaitUsing(){let t=this.nextTokenInLineStart();if(this.isUnparsedContextual(t,"using")){t=this.nextTokenInLineStartSince(t+5);const e=this.codePointAtPos(t);if(this.chStartsBindingIdentifier(e,t))return this.expectPlugin("explicitResourceManagement"),!0}return!1}parseModuleItem(){return this.parseStatementLike(15)}parseStatementListItem(){return this.parseStatementLike(6|(!this.options.annexB||this.state.strict?0:8))}parseStatementOrSloppyAnnexBFunctionDeclaration(t=!1){let e=0;return this.options.annexB&&!this.state.strict&&(e|=4,t&&(e|=8)),this.parseStatementLike(e)}parseStatement(){return this.parseStatementLike(0)}parseStatementLike(t){let e=null;return this.match(26)&&(e=this.parseDecorators(!0)),this.parseStatementContent(t,e)}parseStatementContent(t,e){const s=this.state.type,i=this.startNode(),n=!!(2&t),a=!!(4&t),o=1&t;switch(s){case 60:return this.parseBreakContinueStatement(i,!0);case 63:return this.parseBreakContinueStatement(i,!1);case 64:return this.parseDebuggerStatement(i);case 90:return this.parseDoWhileStatement(i);case 91:return this.parseForStatement(i);case 68:if(this.lookaheadCharCode()===46)break;return a||this.raise(this.state.strict?Errors.StrictFunction:this.options.annexB?Errors.SloppyFunctionAnnexB:Errors.SloppyFunction,this.state.startLoc),this.parseFunctionStatement(i,!1,!n&&a);case 80:return n||this.unexpected(),this.parseClass(this.maybeTakeDecorators(e,i),!0);case 69:return this.parseIfStatement(i);case 70:return this.parseReturnStatement(i);case 71:return this.parseSwitchStatement(i);case 72:return this.parseThrowStatement(i);case 73:return this.parseTryStatement(i);case 96:if(!this.state.containsEsc&&this.startsAwaitUsing())return this.recordAwaitIfAllowed()?n||this.raise(Errors.UnexpectedLexicalDeclaration,i):this.raise(Errors.AwaitUsingNotInAsyncContext,i),this.next(),this.parseVarStatement(i,"await using");break;case 107:if(this.state.containsEsc||!this.hasInLineFollowingBindingIdentifierOrBrace())break;return this.expectPlugin("explicitResourceManagement"),!this.scope.inModule&&this.scope.inTopLevel?this.raise(Errors.UnexpectedUsingDeclaration,this.state.startLoc):n||this.raise(Errors.UnexpectedLexicalDeclaration,this.state.startLoc),this.parseVarStatement(i,"using");case 100:{if(this.state.containsEsc)break;const c=this.nextTokenStart(),p=this.codePointAtPos(c);if(p!==91&&(!n&&this.hasFollowingLineBreak()||!this.chStartsBindingIdentifier(p,c)&&p!==123))break}case 75:n||this.raise(Errors.UnexpectedLexicalDeclaration,this.state.startLoc);case 74:{const c=this.state.value;return this.parseVarStatement(i,c)}case 92:return this.parseWhileStatement(i);case 76:return this.parseWithStatement(i);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(i);case 83:{const c=this.lookaheadCharCode();if(c===40||c===46)break}case 82:{let c;return this.options.allowImportExportEverywhere||o||this.raise(Errors.UnexpectedImportExport,this.state.startLoc),this.next(),s===83?(c=this.parseImport(i),c.type!=="ImportDeclaration"||c.importKind&&c.importKind!=="value"||(this.sawUnambiguousESM=!0)):(c=this.parseExport(i,e),(c.type!=="ExportNamedDeclaration"||c.exportKind&&c.exportKind!=="value")&&(c.type!=="ExportAllDeclaration"||c.exportKind&&c.exportKind!=="value")&&c.type!=="ExportDefaultDeclaration"||(this.sawUnambiguousESM=!0)),this.assertModuleNodeAllowed(c),c}default:if(this.isAsyncFunction())return n||this.raise(Errors.AsyncFunctionInSingleStatementContext,this.state.startLoc),this.next(),this.parseFunctionStatement(i,!0,!n&&a)}const h=this.state.value,l=this.parseExpression();return tokenIsIdentifier(s)&&l.type==="Identifier"&&this.eat(14)?this.parseLabeledStatement(i,h,l,t):this.parseExpressionStatement(i,l,e)}assertModuleNodeAllowed(t){this.options.allowImportExportEverywhere||this.inModule||this.raise(Errors.ImportOutsideModule,t)}decoratorsEnabledBeforeExport(){return!!this.hasPlugin("decorators-legacy")||this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")!==!1}maybeTakeDecorators(t,e,s){return t&&(e.decorators&&e.decorators.length>0?(typeof this.getPluginOption("decorators","decoratorsBeforeExport")!="boolean"&&this.raise(Errors.DecoratorsBeforeAfterExport,e.decorators[0]),e.decorators.unshift(...t)):e.decorators=t,this.resetStartLocationFromNode(e,t[0]),s&&this.resetStartLocationFromNode(s,e)),e}canHaveLeadingDecorator(){return this.match(80)}parseDecorators(t){const e=[];do e.push(this.parseDecorator());while(this.match(26));if(this.match(82))t||this.unexpected(),this.decoratorsEnabledBeforeExport()||this.raise(Errors.DecoratorExportClass,this.state.startLoc);else if(!this.canHaveLeadingDecorator())throw this.raise(Errors.UnexpectedLeadingDecorator,this.state.startLoc);return e}parseDecorator(){this.expectOnePlugin(["decorators","decorators-legacy"]);const t=this.startNode();if(this.next(),this.hasPlugin("decorators")){const e=this.state.startLoc;let s;if(this.match(10)){const i=this.state.startLoc;this.next(),s=this.parseExpression(),this.expect(11),s=this.wrapParenthesis(i,s);const n=this.state.startLoc;t.expression=this.parseMaybeDecoratorArguments(s),this.getPluginOption("decorators","allowCallParenthesized")===!1&&t.expression!==s&&this.raise(Errors.DecoratorArgumentsOutsideParentheses,n)}else{for(s=this.parseIdentifier(!1);this.eat(16);){const i=this.startNodeAt(e);i.object=s,this.match(139)?(this.classScope.usePrivateName(this.state.value,this.state.startLoc),i.property=this.parsePrivateName()):i.property=this.parseIdentifier(!0),i.computed=!1,s=this.finishNode(i,"MemberExpression")}t.expression=this.parseMaybeDecoratorArguments(s)}}else t.expression=this.parseExprSubscripts();return this.finishNode(t,"Decorator")}parseMaybeDecoratorArguments(t){if(this.eat(10)){const e=this.startNodeAtNode(t);return e.callee=t,e.arguments=this.parseCallExpressionArguments(11),this.toReferencedList(e.arguments),this.finishNode(e,"CallExpression")}return t}parseBreakContinueStatement(t,e){return this.next(),this.isLineTerminator()?t.label=null:(t.label=this.parseIdentifier(),this.semicolon()),this.verifyBreakContinue(t,e),this.finishNode(t,e?"BreakStatement":"ContinueStatement")}verifyBreakContinue(t,e){let s;for(s=0;s<this.state.labels.length;++s){const i=this.state.labels[s];if((t.label==null||i.name===t.label.name)&&(i.kind!=null&&(e||i.kind===1)||t.label&&e))break}if(s===this.state.labels.length){const i=e?"BreakStatement":"ContinueStatement";this.raise(Errors.IllegalBreakContinue,t,{type:i})}}parseDebuggerStatement(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);const t=this.parseExpression();return this.expect(11),t}parseDoWhileStatement(t){return this.next(),this.state.labels.push(loopLabel),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.expect(92),t.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(t,"DoWhileStatement")}parseForStatement(t){this.next(),this.state.labels.push(loopLabel);let e=null;if(this.isContextual(96)&&this.recordAwaitIfAllowed()&&(e=this.state.startLoc,this.next()),this.scope.enter(0),this.expect(10),this.match(13))return e!==null&&this.unexpected(e),this.parseFor(t,null);const s=this.isContextual(100);{const h=this.isContextual(96)&&this.startsAwaitUsing(),l=h||this.isContextual(107)&&this.startsUsingForOf(),c=s&&this.hasFollowingBindingAtom()||l;if(this.match(74)||this.match(75)||c){const p=this.startNode();let u;h?(u="await using",this.recordAwaitIfAllowed()||this.raise(Errors.AwaitUsingNotInAsyncContext,this.state.startLoc),this.next()):u=this.state.value,this.next(),this.parseVar(p,!0,u);const d=this.finishNode(p,"VariableDeclaration"),m=this.match(58);return m&&l&&this.raise(Errors.ForInUsing,d),(m||this.isContextual(102))&&d.declarations.length===1?this.parseForIn(t,d,e):(e!==null&&this.unexpected(e),this.parseFor(t,d))}}const i=this.isContextual(95),n=new ExpressionErrors,a=this.parseExpression(!0,n),o=this.isContextual(102);if(o&&(s&&this.raise(Errors.ForOfLet,a),e===null&&i&&a.type==="Identifier"&&this.raise(Errors.ForOfAsync,a)),o||this.match(58)){this.checkDestructuringPrivate(n),this.toAssignable(a,!0);const h=o?"ForOfStatement":"ForInStatement";return this.checkLVal(a,{type:h}),this.parseForIn(t,a,e)}return this.checkExpressionErrors(n,!0),e!==null&&this.unexpected(e),this.parseFor(t,a)}parseFunctionStatement(t,e,s){return this.next(),this.parseFunction(t,1|(s?2:0)|(e?8:0))}parseIfStatement(t){return this.next(),t.test=this.parseHeaderExpression(),t.consequent=this.parseStatementOrSloppyAnnexBFunctionDeclaration(),t.alternate=this.eat(66)?this.parseStatementOrSloppyAnnexBFunctionDeclaration():null,this.finishNode(t,"IfStatement")}parseReturnStatement(t){return this.prodParam.hasReturn||this.options.allowReturnOutsideFunction||this.raise(Errors.IllegalReturn,this.state.startLoc),this.next(),this.isLineTerminator()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")}parseSwitchStatement(t){this.next(),t.discriminant=this.parseHeaderExpression();const e=t.cases=[];let s;this.expect(5),this.state.labels.push(switchLabel),this.scope.enter(0);for(let i;!this.match(8);)if(this.match(61)||this.match(65)){const n=this.match(61);s&&this.finishNode(s,"SwitchCase"),e.push(s=this.startNode()),s.consequent=[],this.next(),n?s.test=this.parseExpression():(i&&this.raise(Errors.MultipleDefaultsInSwitch,this.state.lastTokStartLoc),i=!0,s.test=null),this.expect(14)}else s?s.consequent.push(this.parseStatementListItem()):this.unexpected();return this.scope.exit(),s&&this.finishNode(s,"SwitchCase"),this.next(),this.state.labels.pop(),this.finishNode(t,"SwitchStatement")}parseThrowStatement(t){return this.next(),this.hasPrecedingLineBreak()&&this.raise(Errors.NewlineAfterThrow,this.state.lastTokEndLoc),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")}parseCatchClauseParam(){const t=this.parseBindingAtom();return this.scope.enter(this.options.annexB&&t.type==="Identifier"?8:0),this.checkLVal(t,{type:"CatchClause"},9),t}parseTryStatement(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.match(62)){const e=this.startNode();this.next(),this.match(10)?(this.expect(10),e.param=this.parseCatchClauseParam(),this.expect(11)):(e.param=null,this.scope.enter(0)),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(67)?this.parseBlock():null,t.handler||t.finalizer||this.raise(Errors.NoCatchOrFinally,t),this.finishNode(t,"TryStatement")}parseVarStatement(t,e,s=!1){return this.next(),this.parseVar(t,!1,e,s),this.semicolon(),this.finishNode(t,"VariableDeclaration")}parseWhileStatement(t){return this.next(),t.test=this.parseHeaderExpression(),this.state.labels.push(loopLabel),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.finishNode(t,"WhileStatement")}parseWithStatement(t){return this.state.strict&&this.raise(Errors.StrictWith,this.state.startLoc),this.next(),t.object=this.parseHeaderExpression(),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.finishNode(t,"WithStatement")}parseEmptyStatement(t){return this.next(),this.finishNode(t,"EmptyStatement")}parseLabeledStatement(t,e,s,i){for(const a of this.state.labels)a.name===e&&this.raise(Errors.LabelRedeclaration,s,{labelName:e});const n=tokenIsLoop(this.state.type)?1:this.match(71)?2:null;for(let a=this.state.labels.length-1;a>=0;a--){const o=this.state.labels[a];if(o.statementStart!==t.start)break;o.statementStart=this.sourceToOffsetPos(this.state.start),o.kind=n}return this.state.labels.push({name:e,kind:n,statementStart:this.sourceToOffsetPos(this.state.start)}),t.body=8&i?this.parseStatementOrSloppyAnnexBFunctionDeclaration(!0):this.parseStatement(),this.state.labels.pop(),t.label=s,this.finishNode(t,"LabeledStatement")}parseExpressionStatement(t,e,s){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")}parseBlock(t=!1,e=!0,s){const i=this.startNode();return t&&this.state.strictErrors.clear(),this.expect(5),e&&this.scope.enter(0),this.parseBlockBody(i,t,!1,8,s),e&&this.scope.exit(),this.finishNode(i,"BlockStatement")}isValidDirective(t){return t.type==="ExpressionStatement"&&t.expression.type==="StringLiteral"&&!t.expression.extra.parenthesized}parseBlockBody(t,e,s,i,n){const a=t.body=[],o=t.directives=[];this.parseBlockOrModuleBlockBody(a,e?o:void 0,s,i,n)}parseBlockOrModuleBlockBody(t,e,s,i,n){const a=this.state.strict;let o=!1,h=!1;for(;!this.match(i);){const l=s?this.parseModuleItem():this.parseStatementListItem();if(e&&!h){if(this.isValidDirective(l)){const c=this.stmtToDirective(l);e.push(c),o||c.value.value!=="use strict"||(o=!0,this.setStrict(!0));continue}h=!0,this.state.strictErrors.clear()}t.push(l)}n==null||n.call(this,o),a||this.setStrict(!1),this.next()}parseFor(t,e){return t.init=e,this.semicolon(!1),t.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),t.update=this.match(11)?null:this.parseExpression(),this.expect(11),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(t,"ForStatement")}parseForIn(t,e,s){const i=this.match(58);return this.next(),i?s!==null&&this.unexpected(s):t.await=s!==null,e.type!=="VariableDeclaration"||e.declarations[0].init==null||i&&this.options.annexB&&!this.state.strict&&e.kind==="var"&&e.declarations[0].id.type==="Identifier"||this.raise(Errors.ForInOfLoopInitializer,e,{type:i?"ForInStatement":"ForOfStatement"}),e.type==="AssignmentPattern"&&this.raise(Errors.InvalidLhs,e,{ancestor:{type:"ForStatement"}}),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")}parseVar(t,e,s,i=!1){const n=t.declarations=[];for(t.kind=s;;){const a=this.startNode();if(this.parseVarId(a,s),a.init=this.eat(29)?e?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn():null,a.init!==null||i||(a.id.type==="Identifier"||e&&(this.match(58)||this.isContextual(102))?s!=="const"&&s!=="using"&&s!=="await using"||this.match(58)||this.isContextual(102)||this.raise(Errors.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:s}):this.raise(Errors.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:"destructuring"})),n.push(this.finishNode(a,"VariableDeclarator")),!this.eat(12))break}return t}parseVarId(t,e){const s=this.parseBindingAtom();e!=="using"&&e!=="await using"||s.type!=="ArrayPattern"&&s.type!=="ObjectPattern"||this.raise(Errors.UsingDeclarationHasBindingPattern,s.loc.start),this.checkLVal(s,{type:"VariableDeclarator"},e==="var"?5:8201),t.id=s}parseAsyncFunctionExpression(t){return this.parseFunction(t,8)}parseFunction(t,e=0){const s=2&e,i=!!(1&e),n=i&&!(4&e),a=!!(8&e);this.initFunction(t,a),this.match(55)&&(s&&this.raise(Errors.GeneratorInSingleStatementContext,this.state.startLoc),this.next(),t.generator=!0),i&&(t.id=this.parseFunctionId(n));const o=this.state.maybeInArrowParameters;return this.state.maybeInArrowParameters=!1,this.scope.enter(2),this.prodParam.enter(functionFlags(a,t.generator)),i||(t.id=this.parseFunctionId()),this.parseFunctionParams(t,!1),this.withSmartMixTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(t,i?"FunctionDeclaration":"FunctionExpression")}),this.prodParam.exit(),this.scope.exit(),i&&!s&&this.registerFunctionStatementId(t),this.state.maybeInArrowParameters=o,t}parseFunctionId(t){return t||tokenIsIdentifier(this.state.type)?this.parseIdentifier():null}parseFunctionParams(t,e){this.expect(10),this.expressionScope.enter(newParameterDeclarationScope()),t.params=this.parseBindingList(11,41,2|(e?4:0)),this.expressionScope.exit()}registerFunctionStatementId(t){t.id&&this.scope.declareName(t.id.name,!this.options.annexB||this.state.strict||t.generator||t.async?this.scope.treatFunctionsAsVar?5:8201:17,t.id.loc.start)}parseClass(t,e,s){this.next();const i=this.state.strict;return this.state.strict=!0,this.parseClassId(t,e,s),this.parseClassSuper(t),t.body=this.parseClassBody(!!t.superClass,i),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(29)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}nameIsConstructor(t){return t.type==="Identifier"&&t.name==="constructor"||t.type==="StringLiteral"&&t.value==="constructor"}isNonstaticConstructor(t){return!t.computed&&!t.static&&this.nameIsConstructor(t.key)}parseClassBody(t,e){this.classScope.enter();const s={hadConstructor:!1,hadSuperClass:t};let i=[];const n=this.startNode();if(n.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext(()=>{for(;!this.match(8);){if(this.eat(13)){if(i.length>0)throw this.raise(Errors.DecoratorSemicolon,this.state.lastTokEndLoc);continue}if(this.match(26)){i.push(this.parseDecorator());continue}const a=this.startNode();i.length&&(a.decorators=i,this.resetStartLocationFromNode(a,i[0]),i=[]),this.parseClassMember(n,a,s),a.kind==="constructor"&&a.decorators&&a.decorators.length>0&&this.raise(Errors.DecoratorConstructor,a)}}),this.state.strict=e,this.next(),i.length)throw this.raise(Errors.TrailingDecorator,this.state.startLoc);return this.classScope.exit(),this.finishNode(n,"ClassBody")}parseClassMemberFromModifier(t,e){const s=this.parseIdentifier(!0);if(this.isClassMethod()){const i=e;return i.kind="method",i.computed=!1,i.key=s,i.static=!1,this.pushClassMethod(t,i,!1,!1,!1,!1),!0}if(this.isClassProperty()){const i=e;return i.computed=!1,i.key=s,i.static=!1,t.body.push(this.parseClassProperty(i)),!0}return this.resetPreviousNodeTrailingComments(s),!1}parseClassMember(t,e,s){const i=this.isContextual(106);if(i){if(this.parseClassMemberFromModifier(t,e))return;if(this.eat(5))return void this.parseClassStaticBlock(t,e)}this.parseClassMemberWithIsStatic(t,e,s,i)}parseClassMemberWithIsStatic(t,e,s,i){const n=e,a=e,o=e,h=e,l=e,c=n,p=n;if(e.static=i,this.parsePropertyNamePrefixOperator(e),this.eat(55)){c.kind="method";const y=this.match(139);return this.parseClassElementName(c),y?void this.pushClassPrivateMethod(t,a,!0,!1):(this.isNonstaticConstructor(n)&&this.raise(Errors.ConstructorIsGenerator,n.key),void this.pushClassMethod(t,n,!0,!1,!1,!1))}const u=!this.state.containsEsc&&tokenIsIdentifier(this.state.type),d=this.parseClassElementName(e),m=u?d.name:null,f=this.isPrivateName(d),g=this.state.startLoc;if(this.parsePostMemberNameModifiers(p),this.isClassMethod()){if(c.kind="method",f)return void this.pushClassPrivateMethod(t,a,!1,!1);const y=this.isNonstaticConstructor(n);let x=!1;y&&(n.kind="constructor",s.hadConstructor&&!this.hasPlugin("typescript")&&this.raise(Errors.DuplicateConstructor,d),y&&this.hasPlugin("typescript")&&e.override&&this.raise(Errors.OverrideOnConstructor,d),s.hadConstructor=!0,x=s.hadSuperClass),this.pushClassMethod(t,n,!1,!1,y,x)}else if(this.isClassProperty())f?this.pushClassPrivateProperty(t,h):this.pushClassProperty(t,o);else if(m!=="async"||this.isLineTerminator())if(m!=="get"&&m!=="set"||this.match(55)&&this.isLineTerminator())if(m!=="accessor"||this.isLineTerminator())this.isLineTerminator()?f?this.pushClassPrivateProperty(t,h):this.pushClassProperty(t,o):this.unexpected();else{this.expectPlugin("decoratorAutoAccessors"),this.resetPreviousNodeTrailingComments(d);const y=this.match(139);this.parseClassElementName(o),this.pushClassAccessorProperty(t,l,y)}else{this.resetPreviousNodeTrailingComments(d),c.kind=m;const y=this.match(139);this.parseClassElementName(n),y?this.pushClassPrivateMethod(t,a,!1,!1):(this.isNonstaticConstructor(n)&&this.raise(Errors.ConstructorIsAccessor,n.key),this.pushClassMethod(t,n,!1,!1,!1,!1)),this.checkGetterSetterParams(n)}else{this.resetPreviousNodeTrailingComments(d);const y=this.eat(55);p.optional&&this.unexpected(g),c.kind="method";const x=this.match(139);this.parseClassElementName(c),this.parsePostMemberNameModifiers(p),x?this.pushClassPrivateMethod(t,a,y,!0):(this.isNonstaticConstructor(n)&&this.raise(Errors.ConstructorIsAsync,n.key),this.pushClassMethod(t,n,y,!0,!1,!1))}}parseClassElementName(t){const{type:e,value:s}=this.state;if(e!==132&&e!==134||!t.static||s!=="prototype"||this.raise(Errors.StaticPrototype,this.state.startLoc),e===139){s==="constructor"&&this.raise(Errors.ConstructorClassPrivateField,this.state.startLoc);const i=this.parsePrivateName();return t.key=i,i}return this.parsePropertyName(t),t.key}parseClassStaticBlock(t,e){var s;this.scope.enter(208);const i=this.state.labels;this.state.labels=[],this.prodParam.enter(0);const n=e.body=[];this.parseBlockOrModuleBlockBody(n,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=i,t.body.push(this.finishNode(e,"StaticBlock")),(s=e.decorators)!=null&&s.length&&this.raise(Errors.DecoratorStaticBlock,e)}pushClassProperty(t,e){!e.computed&&this.nameIsConstructor(e.key)&&this.raise(Errors.ConstructorClassField,e.key),t.body.push(this.parseClassProperty(e))}pushClassPrivateProperty(t,e){const s=this.parseClassPrivateProperty(e);t.body.push(s),this.classScope.declarePrivateName(this.getPrivateNameSV(s.key),0,s.key.loc.start)}pushClassAccessorProperty(t,e,s){s||e.computed||!this.nameIsConstructor(e.key)||this.raise(Errors.ConstructorClassField,e.key);const i=this.parseClassAccessorProperty(e);t.body.push(i),s&&this.classScope.declarePrivateName(this.getPrivateNameSV(i.key),0,i.key.loc.start)}pushClassMethod(t,e,s,i,n,a){t.body.push(this.parseMethod(e,s,i,n,a,"ClassMethod",!0))}pushClassPrivateMethod(t,e,s,i){const n=this.parseMethod(e,s,i,!1,!1,"ClassPrivateMethod",!0);t.body.push(n);const a=n.kind==="get"?n.static?6:2:n.kind==="set"?n.static?5:1:0;this.declareClassPrivateMethodInScope(n,a)}declareClassPrivateMethodInScope(t,e){this.classScope.declarePrivateName(this.getPrivateNameSV(t.key),e,t.key.loc.start)}parsePostMemberNameModifiers(t){}parseClassPrivateProperty(t){return this.parseInitializer(t),this.semicolon(),this.finishNode(t,"ClassPrivateProperty")}parseClassProperty(t){return this.parseInitializer(t),this.semicolon(),this.finishNode(t,"ClassProperty")}parseClassAccessorProperty(t){return this.parseInitializer(t),this.semicolon(),this.finishNode(t,"ClassAccessorProperty")}parseInitializer(t){this.scope.enter(80),this.expressionScope.enter(newExpressionScope()),this.prodParam.enter(0),t.value=this.eat(29)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(t,e,s,i=8331){if(tokenIsIdentifier(this.state.type))t.id=this.parseIdentifier(),e&&this.declareNameFromIdentifier(t.id,i);else{if(!s&&e)throw this.raise(Errors.MissingClassName,this.state.startLoc);t.id=null}}parseClassSuper(t){t.superClass=this.eat(81)?this.parseExprSubscripts():null}parseExport(t,e){const s=this.parseMaybeImportPhase(t,!0),i=this.maybeParseExportDefaultSpecifier(t,s),n=!i||this.eat(12),a=n&&this.eatExportStar(t),o=a&&this.maybeParseExportNamespaceSpecifier(t),h=n&&(!o||this.eat(12)),l=i||a;if(a&&!o){if(i&&this.unexpected(),e)throw this.raise(Errors.UnsupportedDecoratorExport,t);return this.parseExportFrom(t,!0),this.finishNode(t,"ExportAllDeclaration")}const c=this.maybeParseExportNamedSpecifiers(t);let p;if(i&&n&&!a&&!c&&this.unexpected(null,5),o&&h&&this.unexpected(null,98),l||c){if(p=!1,e)throw this.raise(Errors.UnsupportedDecoratorExport,t);this.parseExportFrom(t,l)}else p=this.maybeParseExportDeclaration(t);if(l||c||p){var u;const d=t;if(this.checkExport(d,!0,!1,!!d.source),((u=d.declaration)==null?void 0:u.type)==="ClassDeclaration")this.maybeTakeDecorators(e,d.declaration,d);else if(e)throw this.raise(Errors.UnsupportedDecoratorExport,t);return this.finishNode(d,"ExportNamedDeclaration")}if(this.eat(65)){const d=t,m=this.parseExportDefaultExpression();if(d.declaration=m,m.type==="ClassDeclaration")this.maybeTakeDecorators(e,m,d);else if(e)throw this.raise(Errors.UnsupportedDecoratorExport,t);return this.checkExport(d,!0,!0),this.finishNode(d,"ExportDefaultDeclaration")}this.unexpected(null,5)}eatExportStar(t){return this.eat(55)}maybeParseExportDefaultSpecifier(t,e){if(e||this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom",e==null?void 0:e.loc.start);const s=e||this.parseIdentifier(!0),i=this.startNodeAtNode(s);return i.exported=s,t.specifiers=[this.finishNode(i,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(t){if(this.isContextual(93)){var e;(e=t).specifiers!=null||(e.specifiers=[]);const s=this.startNodeAt(this.state.lastTokStartLoc);return this.next(),s.exported=this.parseModuleExportName(),t.specifiers.push(this.finishNode(s,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(t){if(this.match(5)){const e=t;e.specifiers||(e.specifiers=[]);const s=e.exportKind==="type";return e.specifiers.push(...this.parseExportSpecifiers(s)),e.source=null,e.declaration=null,this.hasPlugin("importAssertions")&&(e.assertions=[]),!0}return!1}maybeParseExportDeclaration(t){return!!this.shouldParseExportDeclaration()&&(t.specifiers=[],t.source=null,this.hasPlugin("importAssertions")&&(t.assertions=[]),t.declaration=this.parseExportDeclaration(t),!0)}isAsyncFunction(){if(!this.isContextual(95))return!1;const t=this.nextTokenInLineStart();return this.isUnparsedContextual(t,"function")}parseExportDefaultExpression(){const t=this.startNode();if(this.match(68))return this.next(),this.parseFunction(t,5);if(this.isAsyncFunction())return this.next(),this.next(),this.parseFunction(t,13);if(this.match(80))return this.parseClass(t,!0,!0);if(this.match(26))return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(Errors.DecoratorBeforeExport,this.state.startLoc),this.parseClass(this.maybeTakeDecorators(this.parseDecorators(!1),this.startNode()),!0,!0);if(this.match(75)||this.match(74)||this.isLet())throw this.raise(Errors.UnsupportedDefaultExport,this.state.startLoc);const e=this.parseMaybeAssignAllowIn();return this.semicolon(),e}parseExportDeclaration(t){return this.match(80)?this.parseClass(this.startNode(),!0,!1):this.parseStatementListItem()}isExportDefaultSpecifier(){const{type:t}=this.state;if(tokenIsIdentifier(t)){if(t===95&&!this.state.containsEsc||t===100)return!1;if((t===130||t===129)&&!this.state.containsEsc){const{type:i}=this.lookahead();if(tokenIsIdentifier(i)&&i!==98||i===5)return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(65))return!1;const e=this.nextTokenStart(),s=this.isUnparsedContextual(e,"from");if(this.input.charCodeAt(e)===44||tokenIsIdentifier(this.state.type)&&s)return!0;if(this.match(65)&&s){const i=this.input.charCodeAt(this.nextTokenStartSince(e+4));return i===34||i===39}return!1}parseExportFrom(t,e){this.eatContextual(98)?(t.source=this.parseImportSource(),this.checkExport(t),this.maybeParseImportAttributes(t),this.checkJSONModuleImport(t)):e&&this.unexpected(),this.semicolon()}shouldParseExportDeclaration(){const{type:t}=this.state;return t===26&&(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators"))?(this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(Errors.DecoratorBeforeExport,this.state.startLoc),!0):this.isContextual(107)||this.isContextual(96)&&this.startsAwaitUsing()?(this.raise(Errors.UsingDeclarationExport,this.state.startLoc),!0):t===74||t===75||t===68||t===80||this.isLet()||this.isAsyncFunction()}checkExport(t,e,s,i){var n;if(e){if(s){if(this.checkDuplicateExports(t,"default"),this.hasPlugin("exportDefaultFrom")){var a;const o=t.declaration;o.type!=="Identifier"||o.name!=="from"||o.end-o.start!=4||(a=o.extra)!=null&&a.parenthesized||this.raise(Errors.ExportDefaultFromAsIdentifier,o)}}else if((n=t.specifiers)!=null&&n.length)for(const o of t.specifiers){const{exported:h}=o,l=h.type==="Identifier"?h.name:h.value;if(this.checkDuplicateExports(o,l),!i&&o.local){const{local:c}=o;c.type!=="Identifier"?this.raise(Errors.ExportBindingIsString,o,{localName:c.value,exportName:l}):(this.checkReservedWord(c.name,c.loc.start,!0,!1),this.scope.checkLocalExport(c))}}else if(t.declaration){const o=t.declaration;if(o.type==="FunctionDeclaration"||o.type==="ClassDeclaration"){const{id:h}=o;if(!h)throw new Error("Assertion failure");this.checkDuplicateExports(t,h.name)}else if(o.type==="VariableDeclaration")for(const h of o.declarations)this.checkDeclaration(h.id)}}}checkDeclaration(t){if(t.type==="Identifier")this.checkDuplicateExports(t,t.name);else if(t.type==="ObjectPattern")for(const e of t.properties)this.checkDeclaration(e);else if(t.type==="ArrayPattern")for(const e of t.elements)e&&this.checkDeclaration(e);else t.type==="ObjectProperty"?this.checkDeclaration(t.value):t.type==="RestElement"?this.checkDeclaration(t.argument):t.type==="AssignmentPattern"&&this.checkDeclaration(t.left)}checkDuplicateExports(t,e){this.exportedIdentifiers.has(e)&&(e==="default"?this.raise(Errors.DuplicateDefaultExport,t):this.raise(Errors.DuplicateExport,t,{exportName:e})),this.exportedIdentifiers.add(e)}parseExportSpecifiers(t){const e=[];let s=!0;for(this.expect(5);!this.eat(8);){if(s)s=!1;else if(this.expect(12),this.eat(8))break;const i=this.isContextual(130),n=this.match(134),a=this.startNode();a.local=this.parseModuleExportName(),e.push(this.parseExportSpecifier(a,n,t,i))}return e}parseExportSpecifier(t,e,s,i){return this.eatContextual(93)?t.exported=this.parseModuleExportName():e?t.exported=cloneStringLiteral(t.local):t.exported||(t.exported=cloneIdentifier(t.local)),this.finishNode(t,"ExportSpecifier")}parseModuleExportName(){if(this.match(134)){const t=this.parseStringLiteral(this.state.value),e=loneSurrogate.exec(t.value);return e&&this.raise(Errors.ModuleExportNameHasLoneSurrogate,t,{surrogateCharCode:e[0].charCodeAt(0)}),t}return this.parseIdentifier(!0)}isJSONModuleImport(t){return t.assertions!=null&&t.assertions.some(({key:e,value:s})=>s.value==="json"&&(e.type==="Identifier"?e.name==="type":e.value==="type"))}checkImportReflection(t){const{specifiers:e}=t,s=e.length===1?e[0].type:null;if(t.phase==="source")s!=="ImportDefaultSpecifier"&&this.raise(Errors.SourcePhaseImportRequiresDefault,e[0].loc.start);else if(t.phase==="defer")s!=="ImportNamespaceSpecifier"&&this.raise(Errors.DeferImportRequiresNamespace,e[0].loc.start);else if(t.module){var i;s!=="ImportDefaultSpecifier"&&this.raise(Errors.ImportReflectionNotBinding,e[0].loc.start),((i=t.assertions)==null?void 0:i.length)>0&&this.raise(Errors.ImportReflectionHasAssertion,e[0].loc.start)}}checkJSONModuleImport(t){if(this.isJSONModuleImport(t)&&t.type!=="ExportAllDeclaration"){const{specifiers:e}=t;if(e!=null){const s=e.find(i=>{let n;if(i.type==="ExportSpecifier"?n=i.local:i.type==="ImportSpecifier"&&(n=i.imported),n!==void 0)return n.type==="Identifier"?n.name!=="default":n.value!=="default"});s!==void 0&&this.raise(Errors.ImportJSONBindingNotDefault,s.loc.start)}}}isPotentialImportPhase(t){return!t&&(this.isContextual(105)||this.isContextual(97)||this.isContextual(127))}applyImportPhase(t,e,s,i){e||(s==="module"?(this.expectPlugin("importReflection",i),t.module=!0):this.hasPlugin("importReflection")&&(t.module=!1),s==="source"?(this.expectPlugin("sourcePhaseImports",i),t.phase="source"):s==="defer"?(this.expectPlugin("deferredImportEvaluation",i),t.phase="defer"):this.hasPlugin("sourcePhaseImports")&&(t.phase=null))}parseMaybeImportPhase(t,e){if(!this.isPotentialImportPhase(e))return this.applyImportPhase(t,e,null),null;const s=this.parseIdentifier(!0),{type:i}=this.state;return(tokenIsKeywordOrIdentifier(i)?i!==98||this.lookaheadCharCode()===102:i!==12)?(this.resetPreviousIdentifierLeadingComments(s),this.applyImportPhase(t,e,s.name,s.loc.start),null):(this.applyImportPhase(t,e,null),s)}isPrecedingIdImportPhase(t){const{type:e}=this.state;return tokenIsIdentifier(e)?e!==98||this.lookaheadCharCode()===102:e!==12}parseImport(t){return this.match(134)?this.parseImportSourceAndAttributes(t):this.parseImportSpecifiersAndAfter(t,this.parseMaybeImportPhase(t,!1))}parseImportSpecifiersAndAfter(t,e){t.specifiers=[];const s=!this.maybeParseDefaultImportSpecifier(t,e)||this.eat(12),i=s&&this.maybeParseStarImportSpecifier(t);return s&&!i&&this.parseNamedImportSpecifiers(t),this.expectContextual(98),this.parseImportSourceAndAttributes(t)}parseImportSourceAndAttributes(t){return t.specifiers!=null||(t.specifiers=[]),t.source=this.parseImportSource(),this.maybeParseImportAttributes(t),this.checkImportReflection(t),this.checkJSONModuleImport(t),this.semicolon(),this.finishNode(t,"ImportDeclaration")}parseImportSource(){return this.match(134)||this.unexpected(),this.parseExprAtom()}parseImportSpecifierLocal(t,e,s){e.local=this.parseIdentifier(),t.specifiers.push(this.finishImportSpecifier(e,s))}finishImportSpecifier(t,e,s=8201){return this.checkLVal(t.local,{type:e},s),this.finishNode(t,e)}parseImportAttributes(){this.expect(5);const t=[],e=new Set;do{if(this.match(8))break;const s=this.startNode(),i=this.state.value;if(e.has(i)&&this.raise(Errors.ModuleAttributesWithDuplicateKeys,this.state.startLoc,{key:i}),e.add(i),this.match(134)?s.key=this.parseStringLiteral(i):s.key=this.parseIdentifier(!0),this.expect(14),!this.match(134))throw this.raise(Errors.ModuleAttributeInvalidValue,this.state.startLoc);s.value=this.parseStringLiteral(this.state.value),t.push(this.finishNode(s,"ImportAttribute"))}while(this.eat(12));return this.expect(8),t}parseModuleAttributes(){const t=[],e=new Set;do{const s=this.startNode();if(s.key=this.parseIdentifier(!0),s.key.name!=="type"&&this.raise(Errors.ModuleAttributeDifferentFromType,s.key),e.has(s.key.name)&&this.raise(Errors.ModuleAttributesWithDuplicateKeys,s.key,{key:s.key.name}),e.add(s.key.name),this.expect(14),!this.match(134))throw this.raise(Errors.ModuleAttributeInvalidValue,this.state.startLoc);s.value=this.parseStringLiteral(this.state.value),t.push(this.finishNode(s,"ImportAttribute"))}while(this.eat(12));return t}maybeParseImportAttributes(t){let e;var s=!1;if(this.match(76)){if(this.hasPrecedingLineBreak()&&this.lookaheadCharCode()===40)return;this.next(),e=this.hasPlugin("moduleAttributes")?this.parseModuleAttributes():this.parseImportAttributes(),s=!0}else this.isContextual(94)&&!this.hasPrecedingLineBreak()?(this.hasPlugin("deprecatedImportAssert")||this.hasPlugin("importAssertions")||this.raise(Errors.ImportAttributesUseAssert,this.state.startLoc),this.hasPlugin("importAssertions")||this.addExtra(t,"deprecatedAssertSyntax",!0),this.next(),e=this.parseImportAttributes()):e=[];!s&&this.hasPlugin("importAssertions")?t.assertions=e:t.attributes=e}maybeParseDefaultImportSpecifier(t,e){if(e){const s=this.startNodeAtNode(e);return s.local=e,t.specifiers.push(this.finishImportSpecifier(s,"ImportDefaultSpecifier")),!0}return!!tokenIsKeywordOrIdentifier(this.state.type)&&(this.parseImportSpecifierLocal(t,this.startNode(),"ImportDefaultSpecifier"),!0)}maybeParseStarImportSpecifier(t){if(this.match(55)){const e=this.startNode();return this.next(),this.expectContextual(93),this.parseImportSpecifierLocal(t,e,"ImportNamespaceSpecifier"),!0}return!1}parseNamedImportSpecifiers(t){let e=!0;for(this.expect(5);!this.eat(8);){if(e)e=!1;else{if(this.eat(14))throw this.raise(Errors.DestructureNamedImport,this.state.startLoc);if(this.expect(12),this.eat(8))break}const s=this.startNode(),i=this.match(134),n=this.isContextual(130);s.imported=this.parseModuleExportName();const a=this.parseImportSpecifier(s,i,t.importKind==="type"||t.importKind==="typeof",n,void 0);t.specifiers.push(a)}}parseImportSpecifier(t,e,s,i,n){if(this.eatContextual(93))t.local=this.parseIdentifier();else{const{imported:a}=t;if(e)throw this.raise(Errors.ImportBindingIsString,t,{importName:a.value});this.checkReservedWord(a.name,t.loc.start,!0,!0),t.local||(t.local=cloneIdentifier(a))}return this.finishImportSpecifier(t,"ImportSpecifier",n)}isThisParam(t){return t.type==="Identifier"&&t.name==="this"}}let Parser$1=class extends StatementParser{constructor(r,t,e){super(r=getOptions(r),t),this.options=r,this.initializeScopes(),this.plugins=e,this.filename=r.sourceFilename,this.startIndex=r.startIndex}getScopeHandler(){return ScopeHandler}parse(){this.enterInitialScopes();const r=this.startNode(),t=this.startNode();return this.nextToken(),r.errors=null,this.parseTopLevel(r,t),r.errors=this.state.errors,r.comments.length=this.state.commentsLen,r}};function parse(r,t){var e;if(((e=t)==null?void 0:e.sourceType)!=="unambiguous")return getParser(t,r).parse();t=Object.assign({},t);try{t.sourceType="module";const s=getParser(t,r),i=s.parse();if(s.sawUnambiguousESM)return i;if(s.ambiguousScriptDifferentAst)try{return t.sourceType="script",getParser(t,r).parse()}catch(n){}else i.program.sourceType="script";return i}catch(s){try{return t.sourceType="script",getParser(t,r).parse()}catch(i){}throw s}}function parseExpression(r,t){const e=getParser(t,r);return e.options.strictMode&&(e.state.strict=!0),e.getExpression()}function generateExportedTokenTypes(r){const t={};for(const e of Object.keys(r))t[e]=getExportedToken(r[e]);return t}const tokTypes=generateExportedTokenTypes(tt);function getParser(r,t){let e=Parser$1;const s=new Map;if(r!=null&&r.plugins){for(const i of r.plugins){let n,a;typeof i=="string"?n=i:[n,a]=i,s.has(n)||s.set(n,a||{})}validatePlugins(s),e=getParserClass(s)}return new e(r,t,s)}const parserClassCache=new Map;function getParserClass(r){const t=[];for(const i of mixinPluginNames)r.has(i)&&t.push(i);const e=t.join("|");let s=parserClassCache.get(e);if(!s){s=Parser$1;for(const i of t)s=mixinPlugins[i](s);parserClassCache.set(e,s)}return s}var parse_1=lib.parse=parse;function extractLines(r,t,e){return r.split(`
`).slice(t-1,e).join(`
`)}function jsSetup(r){let t="",e=[],s=[],i=[],n="";const a=parse_1(r,{sourceType:"module"});return traverse(a,{pre:function(o,h,l,c){o.type==="VariableDeclarator"&&o.init&&o.init.type==="ArrowFunctionExpression"?s.push(extractLines(r,o.loc.start.line,o.loc.end.line)):o.type==="VariableDeclarator"&&o.init&&o.init.type==="CallExpression"&&o.id&&o.id.name=="$data"?(i.push(o.init.callee.name),t=extractLines(r,o.loc.start.line,o.loc.end.line)):o.type==="VariableDeclarator"&&o.init&&o.init.type==="CallExpression"?(o.id.name&&e.push(o.id.name),i.push(o.init.callee.name),n=`${n}${extractLines(r,o.loc.start.line,o.loc.end.line)}
`):o.type==="VariableDeclarator"&&o.init&&o.init.type==="StringLiteral"?n=`${n}${extractLines(r,o.loc.start.line,o.loc.end.line)}
`:o.type==="ExpressionStatement"&&o.expression&&o.expression.type==="CallExpression"&&o.expression.callee&&o.expression.callee.name==="watch"&&(i.push(o.expression.callee.name),n=`${n}${extractLines(r,o.loc.start.line,o.loc.end.line)}
`)}}),{settingData:e,funs:s,vueExport:i,str:n,$data:t}}function vueTemplate(){return`
  <template> 
    <!--\u5728\u6B64\u81EA\u52A8\u751F\u6210--> 
  </template>
  
<script>
import { // $vueExport } from "vue";
import events from "./events.json";
const vccEvents = events;
// $script
<\/script>
  
  <style scoped>
  /** $stylesTemplate */
  </style>
    `}lib.parseExpression=parseExpression,lib.tokTypes=tokTypes;const scriptTemplate=`{
  data() {
    return {
      // $datas
    };
  },
  methods: {
    // $eventMethods
  },
  
};`;function mergeSameClassStyles(){return{postcssPlugin:"merge-same-class-styles",Once:function(r){const t={};r.walkRules(e=>{const s=e.selector,i=e.nodes;t[s]?i.forEach(n=>{const a=n.prop,o=n.value,h=n.important;if(t[s][a])if(h||!t[s][a].important)t[s][a]={value:o,important:h};else{const l=t[s][a].value;l!==o&&parseInt(o,10)>parseInt(l,10)&&(t[s][a]={value:o,important:h})}else t[s][a]={value:o,important:h}}):(t[s]={},i.forEach(n=>{const a=n.prop,o=n.value,h=n.important;t[s][a]={value:o,important:h}}))}),r.removeAll(),Object.keys(t).forEach(e=>{const s=postcss$1.rule({selector:e});Object.keys(t[e]).forEach(i=>{const{value:n,important:a}=t[e][i],o=postcss$1.decl({prop:i,value:n});a&&(o.important=!0),s.append(o)}),r.append(s)})}}}function mCss(r,t){return new Promise((e,s)=>{const i=r+t,n=postcss$1.parse(i);postcss$1([mergeSameClassStyles()]).process(n,{from:void 0}).then(a=>{const o=a.css;e(o)}).catch(a=>{})})}function generateFunction(r){return`${r}: function(){}`}function generateClass(r){return`.${r}{}`}function generateData(r){return`${r}:''`}function convertMethods(r,t){let e=[...r].map(generateFunction);return t.convertMethodResult&&(e=t.convertMethodResult(e)),e.join(`,
`)}function convertStyles(r,t){let e="";return t.preConvertStyleResult&&(e=t.preConvertStyleResult(r)),[...r].map(generateClass).join(`
`)+`
`+e}function convertDatas(r,t){let e=[...r].map(generateData);return t.convertDataResult&&(e=t.convertDataResult(e)),e.join(`,
`)}function replaceMethods(r,t,e){return r.replace("// $eventMethods",convertMethods(t,e))}const replaceStyles=(r,t,e,s="")=>w(void 0,null,function*(){return r.replace("/** $stylesTemplate */",yield mCss(convertStyles(t,e),s))});function replaceDatas(r,t,e){const s=convertDatas(t,e);return r.replace("// $datas",s)}function buildOptions(r,t,e){var s={};if(!r)return t;for(let i=0;i<e.length;i++)r[e[i]]!==void 0?s[e[i]]=r[e[i]]:s[e[i]]=t[e[i]];return s}const defaultOptions={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!0,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(r){return r},attrValueProcessor:function(r){return r},singleTags:[],attributeProtectArray:[]},props=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","singleTags","attributeProtectArray"];function Parser(r){this.options=buildOptions(r,defaultOptions,props),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=isAttribute),this.options.cdataTagName?this.isCDATA=isCDATA:this.isCDATA=function(){return!1},this.replaceCDATAstr=replaceCDATAstr,this.replaceCDATAarr=replaceCDATAarr,this.options.format?(this.indentate=indentate,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=buildEmptyTextNode,this.buildObjNode=buildEmptyObjNode):(this.buildTextNode=buildTextValNode,this.buildObjNode=buildObjectNode),this.buildTextValNode=buildTextValNode,this.buildObjectNode=buildObjectNode}function replaceCDATAstr(r,t){return r=this.options.tagValueProcessor(""+r),this.options.cdataPositionChar===""||r===""?r+"<![CDATA["+t+"]]"+this.tagEndChar:r.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function replaceCDATAarr(r,t){if(r=this.options.tagValueProcessor(""+r),this.options.cdataPositionChar===""||r==="")return r+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let e in t)r=r.replace(this.options.cdataPositionChar,"<![CDATA["+t[e]+"]]>");return r+this.newLine}function buildObjectNode(r,t,e,s){return e&&!r.includes("<")?t==="img"||t==="a-icon"||t==="input"||this.options.singleTags&&this.options.singleTags.includes(t)?this.indentate(s)+"<"+t+e+"/>":this.indentate(s)+"<"+t+e+">"+r+"</"+t+this.tagEndChar:this.indentate(s)+"<"+t+e+this.tagEndChar+r+this.indentate(s)+"</"+t+this.tagEndChar}function buildEmptyObjNode(r,t,e,s){return r!==""?this.buildObjectNode(r,t,e,s):this.indentate(s)+"<"+t+e+"/"+this.tagEndChar}function buildTextValNode(r,t,e,s){return this.indentate(s)+"<"+t+e+">"+this.options.tagValueProcessor(r)+"</"+t+this.tagEndChar}function buildEmptyTextNode(r,t,e,s){return r!==""?this.buildTextValNode(r,t,e,s):this.indentate(s)+"<"+t+e+"/"+this.tagEndChar}function indentate(r){return this.options.indentBy.repeat(r)}function isAttribute(r){return!0}function isCDATA(r){return r===this.options.cdataTagName}Parser.prototype.parse=function(r){return this.j2x(r,0).val},Parser.prototype.j2x=function(r,t){let e="",s="";const i=Object.keys(r),n=i.length;for(let a=0;a<n;a++){const o=i[a];if(r[o]!==void 0)if(r[o]===null)s+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(r[o]instanceof Date)s+=this.buildTextNode(r[o],o,"",t);else if(o==="__children"){const h=r[o];h instanceof Array?h.forEach(l=>{const c=this.j2x(l,t+1);s+=c.val}):typeof h=="object"||(s+=this.buildTextNode(h,o,"",t))}else if(typeof r[o]!="object"){const h=this.isAttribute(o);if(o==="__text__"){s=r[o]+s;continue}h?typeof r[o]=="boolean"&&r[o]?e+=` ${o} `:r[o]||this.options.attributeProtectArray.includes(o)?e+=" "+o+'="'+this.options.attrValueProcessor(""+r[o])+'"':e+=" "+o:this.isCDATA(o)?r[this.options.textNodeName]?s+=this.replaceCDATAstr(r[this.options.textNodeName],r[o]):s+=this.replaceCDATAstr("",r[o]):o===this.options.textNodeName?r[this.options.cdataTagName]||(s+=this.options.tagValueProcessor(""+r[o])):s+=this.buildTextNode(r[o],o,"",t)}else if(Array.isArray(r[o]))if(this.isCDATA(o))s+=this.indentate(t),r[this.options.textNodeName]?s+=this.replaceCDATAarr(r[this.options.textNodeName],r[o]):s+=this.replaceCDATAarr("",r[o]);else{const h=r[o].length;for(let l=0;l<h;l++){const c=r[o][l];if(c!==void 0)if(c===null)s+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(typeof c=="object"){const p=this.j2x(c,t+1);s+=this.buildObjNode(p.val,o,p.attrStr,t)}else s+=this.buildTextNode(c,o,"",t)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const h=Object.keys(r[o]),l=h.length;for(let c=0;c<l;c++)e+=" "+h[c]+'="'+this.options.attrValueProcessor(""+r[o][h[c]])+'"'}else{const h=this.j2x(r[o],t+1);s+=this.buildObjNode(h.val,o,h.attrStr,t)}}return{attrStr:e,val:s}};const getOwnEnumPropSymbols=r=>Object.getOwnPropertySymbols(r).filter(t=>Object.prototype.propertyIsEnumerable.call(r,t));function stringifyObject(r,t,e){const s=[];return function i(n,a={},o=""){const h=a.indent||"	";let l;l=a.inlineCharacterLimit===void 0?{newline:`
`,newlineOrSpace:`
`,pad:o,indent:o+h}:{newline:"@@__STRINGIFY_OBJECT_NEW_LINE__@@",newlineOrSpace:"@@__STRINGIFY_OBJECT_NEW_LINE_OR_SPACE__@@",pad:"@@__STRINGIFY_OBJECT_PAD__@@",indent:"@@__STRINGIFY_OBJECT_INDENT__@@"};const c=p=>{if(a.inlineCharacterLimit===void 0)return p;const u=p.replace(new RegExp(l.newline,"g"),"").replace(new RegExp(l.newlineOrSpace,"g")," ").replace(new RegExp(l.pad+"|"+l.indent,"g"),"");return u.length<=a.inlineCharacterLimit?u:p.replace(new RegExp(l.newline+"|"+l.newlineOrSpace,"g"),`
`).replace(new RegExp(l.pad,"g"),o).replace(new RegExp(l.indent,"g"),o+h)};if(s.includes(n))return'"[Circular]"';if(n==null||typeof n=="number"||typeof n=="boolean"||typeof n=="function"||typeof n=="symbol"||isRegexp(n))return String(n);if(n instanceof Date)return`new Date('${n.toISOString()}')`;if(Array.isArray(n)){if(n.length===0)return"[]";s.push(n);const p="["+l.newline+n.map((u,d)=>{const m=n.length-1===d?l.newline:","+l.newlineOrSpace;let f=i(u,a,o+h);return a.transform&&(f=a.transform(n,d,f)),l.indent+f+m}).join("")+l.pad+"]";return s.pop(),c(p)}if(isObject(n)){let p=[...Object.keys(n),...getOwnEnumPropSymbols(n)];if(a.filter&&(p=p.filter(d=>a.filter(n,d))),p.length===0)return"{}";s.push(n);const u="{"+l.newline+p.map((d,m)=>{const f=p.length-1===m?l.newline:","+l.newlineOrSpace,g=typeof d=="symbol",y=!g&&/^[a-z$_][$\w]*$/i.test(d),x=g||y?d:i(d,a);let E=i(n[d],a,o+h);return a.transform&&(E=a.transform(n,d,E)),l.indent+String(x)+": "+E+f}).join("")+l.pad+"}";return s.pop(),c(u)}return n=String(n).replace(/[\r\n]/g,p=>p===`
`?"\\n":"\\r"),a.singleQuotes===!1?`"${n=n.replace(/"/g,'\\"')}"`:`'${n=n.replace(/\\?'/g,"\\'")}'`}(r,t,e)}const{merge,cloneDeep}=_,rawAdd=Set.prototype.add;try{Set.prototype.addeee=function(r){typeof r=="string"&&checkKeyword(r)&&rawAdd.apply(this,arguments)}}catch(r){}function checkKeyword(r){return r!="true"&&r!="false"}function replaceHtmlTemplate(r,t){const e=new Parser({attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!1,cdataTagName:"__cdata",cdataPositionChar:"\\c",format:!0,indentBy:"  ",supressEmptyNode:!1,attributeProtectArray:[]}).parse(t.template);return r.replace("<!--\u5728\u6B64\u81EA\u52A8\u751F\u6210-->",e)}function getVueTemplate(){return vueTemplate()}function getVarName(r){let t=null;if(/^[_a-z]{1}[_0-9a-zA-Z]*$/g.test(r))t=r;else if(r.indexOf(".")>0&&getVarName(r.split(".")[0]))t=r.split(".")[0];else if(r.indexOf("in")>0){const e=r.split(" in ");e.length===2&&(t=getVarName(e[1].trim()))}return t}function findVarFormExpression(r){if(typeof r=="string"){let t=r.match(/[_a-z]{1}[_0-9a-zA-Z]*/g);return t||(t=[]),t}return[]}function sort(r){return new Set(Array.from(r).sort())}class CodeGenerator{constructor(r={}){this.options=r,this.jsonObj=null,this.classSet=new Set,this.methodSet=new Set,this.dataSet=new Set,this.externalJS={},this.customCss="",this.eventNode={},this.customData={}}clearDataSet(){this.classSet.clear(),this.methodSet.clear(),this.dataSet.clear()}setExternalJS(r){this.externalJS=cloneDeep(r)}setExternalCss(r){this.customCss=r}setEventNode(r){this.eventNode=r}setCustomData(r){this.customData=r}outputVueCode(r){return this.jsonObj=JSON.parse(r),this.outputVueCodeWithJsonObj(this.jsonObj)}outputVueCodeWithJsonObj(r){return this.jsonObj=r,this.parseJson(r),this.dataSet=sort(this.dataSet),this.methodSet=sort(this.methodSet),this.classSet=sort(this.classSet),this.generateResult()}replaceKeyInfo(){return w(this,null,function*(){let $data,funs,vueExport,str="",settingData;if(this.externalJS){const r=jsSetup(this.externalJS);$data=r.$data||"",funs=r.funs||[],vueExport=r.vueExport||[],str=r.str||"",settingData=r.settingData||[]}const templateTemp=replaceHtmlTemplate(getVueTemplate(),this.jsonObj),methodTemp=replaceMethods(scriptTemplate,this.methodSet,this.options),dataTemp=replaceDatas(methodTemp,this.dataSet,this.options),JSCodeInfo=eval(`(function(){return ${dataTemp}})()`);let externalData={};if($data){const regExp=/toRefs\(([\s\S]+?)\)/,match=$data.match(regExp);if(match&&match[1]){const objStr=match[1].trim();try{const newObj=eval(`(${objStr})`);externalData=newObj}catch(r){}}}const newData=merge({},JSCodeInfo.data(),externalData,this.customData),dataFunction=new Function(`return ${stringifyObject(newData)}`);JSCodeInfo.data=dataFunction;let externalJSLogic={methods:{}};funs&&funs.length>0&&funs.forEach(r=>{const t=r.match(/(let|const)\s+(\w+)\s*=\s*([\s\S]+)/);if(t&&t[1]&&t[2]&&t[3]){const e=t[2];externalJSLogic.methods[e]=t[3]}});const mergedJSObject=merge(JSCodeInfo,externalJSLogic);let toRefsData=mergedJSObject.data(),functionData="";Object.keys(mergedJSObject.methods).forEach(r=>{functionData+=`const ${r} = ${mergedJSObject.methods[r]};
`});let dataStr="",dataKeys=Object.keys(toRefsData)||[];Object.keys(toRefsData).forEach(r=>{let t=toRefsData[r];dataStr=`${dataStr}const ${r} = ref(${typeof t=="string"?`'${t}'`:t});
`});const finalJSCode=`
{
setup(props, {emit}) {
  const instance = getCurrentInstance();
  ${dataStr}

  // \u6267\u884C\u4E8B\u4EF6\u6D41
  const eventFun = (eventStr, e = null) => {
    const eventObj = vccEvents[eventStr];
    if (!eventStr || !eventObj) return;
    
    instance.proxy.$execEventFlow(instance, eventObj.children, e);
  };

  onMounted(() => {
    eventFun("init")
  })

  provide('main', instance);
  
  ${str}
  ${functionData}
  return {
    ${dataKeys&&dataKeys.length>0?dataKeys.join(",")+",":""}
    eventFun,
    ${settingData&&settingData.length>0?settingData.join(",")+",":""}
    ${Object.keys(mergedJSObject.methods).join(",")}
  }
}

}
    `,beautiful=prettier.format("export default "+finalJSCode,{semi:!1,parser:"babel",plugins:[parserBabel]}),excludeUnuseal=beautiful,JSTemp=templateTemp.replace("// $script",excludeUnuseal),styleTemp=yield replaceStyles(JSTemp,this.classSet,this.options,this.customCss);vueExport.push("onMounted","ref","getCurrentInstance","provide"),vueExport=Array.from(new Set(vueExport));const zTemp=styleTemp.replace("// $vueExport",vueExport.join(","));return zTemp})}deliveryResult(r,t){r==="class"?t.split(" ").forEach(e=>{e&&this.classSet.addeee(e)}):/^v-on/g.test(r)||/^@/g.test(r)?getVarName(t)&&this.methodSet.addeee(t):/^v-/g.test(r)||/^:+/g.test(r)?this.options.checkIsMethodDirectives&&this.options.checkIsMethodDirectives(r)?(t=getVarName(t))&&this.methodSet.addeee(t):this.options.checkIsDataDirectives&&this.options.checkIsDataDirectives(r)?(t=getVarName(t))&&this.dataSet.addeee(t):this.options.unSupportedKey&&this.options.unSupportedKey(r,t):r==="__text__"?/[{]{2}.+[}]{2}/g.test(t)&&findVarFormExpression(t).forEach(e=>{this.dataSet.addeee(e)}):this.options.unSupportedKey&&this.options.unSupportedKey(r,t)}generateResult(){return this.replaceKeyInfo()}parseJson(r){for(const t in r)if(r.hasOwnProperty(t)){const e=r[t];e instanceof Array?e.forEach(s=>this.parseJson(s)):e instanceof Object?this.parseJson(e):this.deliveryResult(t,e)}}}function getEditOptions(r){return{moduleCache:{vue:Vue},getFile:t=>r[t],addStyle(t){const e=Object.assign(document.createElement("style"),{textContent:t}),s=document.head.getElementsByTagName("style")[0]||null;document.head.insertBefore(e,s)},handleModule:function(t,e,s,i){return w(this,null,function*(){switch(t){case".json":case".js":return e(!1)}})},log(t,...e){}}}function editTem(r,t){let e=r.replace("const vccEvents = events;",`const vccEvents = JSON.parse(events);
import mTSetting from "./mt.vue";
    `);e=e.replace("setup(props, { emit }) {",`components: {
      mTSetting,
  },
  setup(props, { emit }) {;
        `);const s=`<mTSetting :rawDataStructure="${stringifyObject(t)}" />`,i=e.lastIndexOf("</div>");return e=e.slice(0,i)+s+e.slice(i),e}function getMtTem(){return`
        <template>
  <div class="mt-setting-container">
    <a-dropdown trigger="click">
      <template #overlay>
        <a-menu>
          <a-menu-item
            v-for="item in modalList"
            :key="item.lc_id"
            @click="(e) => handleModalClick(e, item)"
          >
            \u5F39\u7A97 - {{ item.lc_id }}
          </a-menu-item>
        </a-menu>
      </template>
      <a-badge :count="modalList.length" show-zero>
        <a-button :disabled="modalList.length == 0 ? true : false" type="text" danger>\u5F39\u7A97</a-button>
      </a-badge>
    </a-dropdown>
    <a-dropdown trigger="click">
      <template #overlay>
        <a-menu>
          <a-menu-item
            v-for="item in drawerList"
            :key="item.lc_id"
            @click="(e) => handleDrawerClick(e, item)"
          >
            \u62BD\u5C49 - {{ item.lc_id }}
          </a-menu-item>
        </a-menu>
      </template>
      <a-badge :count="drawerList.length" show-zero>
        <a-button :disabled="drawerList.length == 0 ? true : false" type="text" danger>\u62BD\u5C49</a-button>
      </a-badge>
    </a-dropdown>
  </div>
</template>

<script>
import { ref, getCurrentInstance, inject } from "vue";
export default {
  props: ["rawDataStructure"],
  setup(props) {
    const instance = getCurrentInstance();
    const main = inject('main');
    let modalList = ref([]);
    let drawerList = ref([]);
    const rawDataStructure = props.rawDataStructure;
    let arr = [];
    try {
      arr = rawDataStructure.template.__children;
    } catch (error) {}

    const init = (rawArr) => {
      rawArr.forEach((item) => {
        if (
          Object.keys(item).length > 0 &&
          Object.keys(item)[0] == "mic-modal"
        ) {
          modalList.value.push(item[Object.keys(item)[0]]);
          if (item[Object.keys(item)[0]].lc_id == window.$mt) {
            main.proxy[item[Object.keys(item)[0]]["v-model:open"]] = true;
          }
        }
        if (
          Object.keys(item).length > 0 &&
          Object.keys(item)[0] == "mic-drawer"
        ) {
          drawerList.value.push(item[Object.keys(item)[0]]);
          if (item[Object.keys(item)[0]].lc_id == window.$mt) {
            main.proxy[item[Object.keys(item)[0]]["v-model:open"]] = true;
          }
        }
        if (
          item[Object.keys(item)[0]].__children &&
          item[Object.keys(item)[0]].__children.length > 0
        ) {
          init(item[Object.keys(item)[0]].__children);
        }
      });
    };
    init(arr);

    const handleModalClick = (e, row) => {
      e.stopPropagation();
      // \u8BF4\u660E\u7ED1\u5B9A\u4E86v-model:open
      if (Object.keys(row).includes("v-model:open")) {
        main.proxy[row["v-model:open"]] = true;
        window.$mt = row.lc_id;
      }
    };

    const handleDrawerClick = (e, row) => {
      e.stopPropagation();
      // \u8BF4\u660E\u7ED1\u5B9A\u4E86v-model:open
      if (Object.keys(row).includes("v-model:open")) {
        main.proxy[row["v-model:open"]] = true;
        window.$mt = row.lc_id;
      }
    };

    return {
      modalList,
      drawerList,
      handleModalClick,
      handleDrawerClick,
    };
  },
};
<\/script>

<style scoped>
.mt-setting-container {
  position: fixed;
  left: 10px;
  bottom: 15px;
  z-index: 999;
  border: 1px solid #303030;
  display: flex;
  flex-direction: column;
  background-color: var(--search-bg-color);
}
</style>

    `}function dataEditTem(r,t){return r.replace("const vccEvents = events;","const vccEvents = JSON.parse(events); ")}var eventemitter3={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function s(){}function i(h,l,c){this.fn=h,this.context=l,this.once=c||!1}function n(h,l,c,p,u){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,p||h,u),m=e?e+l:l;return h._events[m]?h._events[m].fn?h._events[m]=[h._events[m],d]:h._events[m].push(d):(h._events[m]=d,h._eventsCount++),h}function a(h,l){--h._eventsCount==0?h._events=new s:delete h._events[l]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1)),o.prototype.eventNames=function(){var h,l,c=[];if(this._eventsCount===0)return c;for(l in h=this._events)t.call(h,l)&&c.push(e?l.slice(1):l);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},o.prototype.listeners=function(h){var l=e?e+h:h,c=this._events[l];if(!c)return[];if(c.fn)return[c.fn];for(var p=0,u=c.length,d=new Array(u);p<u;p++)d[p]=c[p].fn;return d},o.prototype.listenerCount=function(h){var l=e?e+h:h,c=this._events[l];return c?c.fn?1:c.length:0},o.prototype.emit=function(h,l,c,p,u,d){var m=e?e+h:h;if(!this._events[m])return!1;var f,g,y=this._events[m],x=arguments.length;if(y.fn){switch(y.once&&this.removeListener(h,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,l),!0;case 3:return y.fn.call(y.context,l,c),!0;case 4:return y.fn.call(y.context,l,c,p),!0;case 5:return y.fn.call(y.context,l,c,p,u),!0;case 6:return y.fn.call(y.context,l,c,p,u,d),!0}for(g=1,f=new Array(x-1);g<x;g++)f[g-1]=arguments[g];y.fn.apply(y.context,f)}else{var E,P=y.length;for(g=0;g<P;g++)switch(y[g].once&&this.removeListener(h,y[g].fn,void 0,!0),x){case 1:y[g].fn.call(y[g].context);break;case 2:y[g].fn.call(y[g].context,l);break;case 3:y[g].fn.call(y[g].context,l,c);break;case 4:y[g].fn.call(y[g].context,l,c,p);break;default:if(!f)for(E=1,f=new Array(x-1);E<x;E++)f[E-1]=arguments[E];y[g].fn.apply(y[g].context,f)}}return!0},o.prototype.on=function(h,l,c){return n(this,h,l,c,!1)},o.prototype.once=function(h,l,c){return n(this,h,l,c,!0)},o.prototype.removeListener=function(h,l,c,p){var u=e?e+h:h;if(!this._events[u])return this;if(!l)return a(this,u),this;var d=this._events[u];if(d.fn)d.fn!==l||p&&!d.once||c&&d.context!==c||a(this,u);else{for(var m=0,f=[],g=d.length;m<g;m++)(d[m].fn!==l||p&&!d[m].once||c&&d[m].context!==c)&&f.push(d[m]);f.length?this._events[u]=f.length===1?f[0]:f:a(this,u)}return this},o.prototype.removeAllListeners=function(h){var l;return h?(l=e?e+h:h,this._events[l]&&a(this,l)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,r.exports=o})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports),presetAttribute={};function checkIsDataDirectives(r){return[":prop","v-for",":data",":src",":model",":rules",":total",":current-page","v-model","v-if",":reverse",":show-file-list",":file-list"].includes(r)||/^:+/g.test(r)}function checkIsMethodDirectives(r){return[":before-close",":on-preview",":on-remove",":before-remove",":on-exceed",":on-success",":format",":before-upload",":fetch-suggestions"].includes(r)}function createNewCodeGenerator(){return new CodeGenerator({convertDataResult:function(r){let t=r;return r.length>0&&(t=r.map(e=>{const s=e.split(":")[0];return window.dataSourceMap[s]||window.dataSourceMap[s]==0?`${s}: ${stringifyObject$1(window.dataSourceMap[s],{indent:"  ",singleQuotes:!1})}`:e})),t},convertMethodResult(r){let t=r;return r&&r.length>0&&(t=r.map(e=>{const s=e.split(":")[0];return window.methodSourceMap&&window.methodSourceMap[s]?`${s}: ${window.methodSourceMap[s]}`:e})),t},preConvertStyleResult(r){let t="";const e=r.values(),s=Object.keys(window.styleSourceMap);for(const i of e){const n=s.filter(a=>a===`.${i}`||a.indexOf(`.${i} `)>=0||a.indexOf(` .${i}`)>=0);n&&n.length>0&&(n.forEach(a=>{t+=`${a} { ${window.styleSourceMap[a]} }
`}),r.delete(i))}return t},checkIsDataDirectives,checkIsMethodDirectives,unSupportedKey:function(r,t){/^v-/g.test(r)||/^:+/g.test(r)}})}export{EventEmitter as E,getMtTem as a,createNewCodeGenerator as c,dataEditTem as d,editTem as e,getEditOptions as g,presetAttribute as p,require$$1 as r,vueRuleTool as v};
