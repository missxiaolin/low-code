const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/rawComponents-DBG46KVT.js","static/js/index-DaARy9PW.js","static/css/index-D_IH-oG1.css","static/js/vueCodeEditorDialog-kgHpUUnM.js","static/js/index-Cb0ZhT_C.js","static/js/parser-html-9coQq4E_.js","static/js/index.browser-CcxBvUBP.js","static/js/store-BoDxkYeq.js","static/js/code-generator-factory-BN-2zGDK.js","static/css/rawComponents-DkAtwtnl.css","static/js/toolsBar-CefeT0j_.js","static/css/toolsBar-Dm68tZtC.css","static/js/attributeInput-5e8gXKP6.js","static/css/attributeInput-DoGqeo1H.css","static/js/code-CTO80s9E.js","static/js/xml-fold-DeUxYJLi.js","static/css/xml-fold-D05cK1KH.css","static/css/code-YDR9qvVV.css"])))=>i.map(i=>d[i]);
var G=(T,O,L)=>new Promise((j,H)=>{var Q=C=>{try{k(L.next(C))}catch($){H($)}},Z=C=>{try{k(L.throw(C))}catch($){H($)}},k=C=>C.done?j(C.value):Promise.resolve(C.value).then(Q,Z);k((L=L.apply(T,O)).next())});import{$ as Le,an as he,ag as J,a0 as Re,d as A,_ as ue,r as w,o as E,f as b,av as pe,aw as me,b as D,w as R,e as g,ax as ve,H as K,I as X,J as I,F as ee,D as xe,s as fe,a as z,a8 as $e,G as Ne,c as Ie,W as Oe,__tla as Ve}from"./index-DaARy9PW.js";import{p as Te,E as Me,e as Je,a as Ae,g as ze,c as Fe}from"./code-generator-factory-BN-2zGDK.js";import{f as ge,a as ye,g as _e,i as F,c as je,b as He,d as Ue,e as We,h as qe,j as x,v as Be}from"./vueCodeEditorDialog-kgHpUUnM.js";let Ce,Y,Se,Ge=Promise.all([(()=>{try{return Ve}catch(T){}})()]).then(()=>G(void 0,null,function*(){function T(t){window.tree||(window.tree={}),function(e){function i(n){for(const s in n)if(n.hasOwnProperty(s)){const o=n[s];if(n.hasOwnProperty("__key__")&&n.__key__==="__children"&&F(o)&&delete n.__key__,s==="lc_id"&&n.hasOwnProperty("__key__")){const r=n.__key__,l={[r]:n};l.__proto__=n.__proto__,delete n.__key__,window.tree[o]=l}else s==="__children"?n.__children.forEach(r=>{r.__key__=s,i(r)}):F(o)&&(o.__key__=s,i(o))}}i(e)}(t)}function O(t){const e=ge(t);return ye(e)}function L(t){return ge(t)}Ce=function(t,e=()=>{}){(function i(n){if(n.attributes["lc-mark"]&&(e(),j(n)),n.children.length>0){const s=n.children.length;for(let o=0;o<s;o++)i(n.children.item(o))}})(t)};function j(t){t.draggable=!0,t.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="copy";const i=((n=t).querySelector(".title")&&(n=n.querySelector(".title")),n.attributes.lc_id?ye(n):{[n.localName]:{__text__:n.innerText,class:n.className}});var n;let s=t.innerText;t.querySelector(".title")&&(s=t.querySelector(".title").innerText);let o="";t.querySelector(".title")&&(o=t.querySelector(".title").getAttribute("component_url")||"");let r="";t.querySelector(".title")&&(r=t.querySelector(".title").getAttribute("component_name")||"");const l=`${t.localName}@#$!${t.innerText}@#$!0@#$!${t.style.cssText}@#$!${JSON.stringify(i)}@#$!${s}@#$!${o}@#$!${r}`;e.dataTransfer.setData("text/plain",l),e.stopPropagation()}),t.addEventListener("mouseenter",e=>{const i=t.parentElement.classList;i&&i.contains("mark-element-unit")&&(i.remove("mark-element-unit"),t.isRemoveParentStyle=!0),t.classList.add("mark-element-unit"),e.stopPropagation()}),t.addEventListener("mouseleave",e=>{t.classList.remove("mark-element-unit"),t.isRemoveParentStyle&&t.parentElement.classList.add("mark-element-unit"),e.stopPropagation()})}var H={exports:{}};const Q=he(H.exports=function(){function t(i,n){/^[0-9]/.test(n)&&(n="_"+n);var s="____",o=e(i,n="."+s+n+s);return(o.match(new RegExp("(?<=@media.*\\(.*\\) \\{)(([^\\{\\}]*\\{[^\\{\\}]+\\}[^\\{\\}]*)+)(?<=\\})","g"))||[]).forEach(function(r){o=o.replace(r," "+e(r,n))}),o.replace(new RegExp(s,"gm"),"")}function e(i,n){var s=i.replace(/\/\*(.*)\*\//g,"").replace(/\s+/g," ").replace(/\s*{/g," {").replace(/\s*}/g," }").replace(/}(\s[^}])/g,`}
$1`).replace(/^\s+/gm,"").replace(/^([^@}])/gm,n+" $1").replace(/,/g,","+n);return(s.match(/{(([^{}]*{[^{}]+}[^{}]*)*)}|{[^{}]*}/g)||[]).forEach(function(o){s=s.replace(o,o.replace(new RegExp(n,"g"),""))}),s}return t}());class Z{constructor(e){window.$mt="",this.isCloneNode=!1,this.editMode=!0,this.eventEmitter=new Me,this.currentPointPositionAfterIndex=-1,this.renderStack=[],this.redoStack=[],this.externalJS={},this.customCss="",this.eventNode={},this.customData={},this.componentOptions={},this.dropIninFunction=e.dropIninFunction||""}getComponentOptions(){return this.componentOptions}_render(e){return G(this,null,function*(){this._rawDataStructure=e;const i=J(e);this.eventEmitter.emit("codeStructureUpdated",i),this.initCodeGenerator();let n=yield this.codeGenerator.outputVueCodeWithJsonObj(e);n=n.replace(/:\s*\(([\w\s,]*)\)\s*=>/g,"($1)");let s=n.replace(/\s{1}lc_id=".+?"/g,"");if(s=s.replace(/\s{1}vccName=".+?"/g,""),s=s.replace(/\s{1}component_name=".+?"/g,""),s=s.replace(/\s{1}lc-mark/g,""),s=s.replace(/\s{1}div-lc-mark/g,""),this.eventEmitter.emit("codeCreated",s),this.editMode){const o=this.createMountedElement();this.appLoad(n,o),this.enableEditMode(),this.flatDataStructure(e)}else this.appLoad(n,this.mountedEle);return this})}appLoad(e,i){const n=Je(e,this._rawDataStructure),s={"/mt.vue":Ae(),"/main.vue":n,"/events.json":`${JSON.stringify(this.eventNode)}`},o=ze(s),r=Re(A(()=>window["vue3-sfc-loader"].loadModule("/main.vue",o)));window.loadApp(r),r.mount(i)}render(e){return this._render(e),this}setEditMode(e,i){this.editMode=e,this.mountedEle=i,this.reRender()}loadStyle(e){if(e.length>0){const i=e[0];this.styleNodeName=`cssScoped${Date.now()}`;const n=Q(i.content.replace(/::v-deep/g,""),this.styleNodeName),s=document.createElement("style");s.innerText=n,document.head.appendChild(s)}}initCodeGenerator(){this.codeGenerator=Fe(),this.codeGenerator.setExternalJS(this.externalJS),this.codeGenerator.setExternalCss(this.customCss),this.codeGenerator.setEventNode(this.eventNode),this.codeGenerator.setCustomData(this.customData)}getControlPanelRoot(){return document.getElementById("render-control-panel")}saveJsData(e){return this.customData=e,this}saveJSCode(e,i=!0){this.saveJSCodeOnly(e),this.codeGenerator&&this.codeGenerator.setExternalJS(e),i&&this.reRender()}saveJSCodeOnly(e){return this.externalJS=e||"",this}saveEventNode(e){return this.eventNode=e,this}saveCssCode(e,i=!0){this.saveCssCodeOnly(e),this.codeGenerator&&this.codeGenerator.setExternalCss(e),i&&this.reRender()}saveCssCodeOnly(e){return this.customCss=e||"",this}createMountedElement(){const e=this.getControlPanelRoot();return this.styleNodeName&&e.setAttribute("class",this.styleNodeName),e}initComonentsEvent(){this.getControlPanelRoot().querySelectorAll("[lc_id]").forEach(e=>{e.addEventListener("click",i=>{i.stopPropagation(),this.markElement(e)}),j(e)}),this.initDropEvent()}markElement(e){if(this.currentEditElement&&this.currentEditElement.classList.remove("mark-element"),this.getControlPanelRoot().querySelectorAll("[lc_id]").forEach(i=>{i.classList.remove("mark-element")}),e){this.currentEditElement=e;const i=this.markElementInner(e),n=J(i);this.eventEmitter.emit("selected",n)}else this.eventEmitter.emit("selected",null)}markElementInner(e){e.classList.add("mark-element");const i=O(e);let n=_e(i);return i[Object.keys(i)[0]].vccName&&(n=i[Object.keys(i)[0]].vccName),e.setAttribute("lc-component-name",n),i}clearElementSelect(){this.markElement(null)}setDropInfo(e){this.currentPointDropInfo=e}initDropEvent(){const e=this.getControlPanelRoot();e.addEventListener("dragenter",i=>{i.preventDefault()}),e.addEventListener("dragleave",i=>{i.preventDefault()}),e.addEventListener("dragover",i=>{i.preventDefault()}),e.addEventListener("drop",i=>{if(!this.currentPointDropInfo.target)return;let n=i.dataTransfer.getData("text/plain").split("@#$!");const s=n[4],o=n[5];let r=JSON.parse(s);if(r&&Object.keys(r).forEach(l=>{l==="__key__"||r[l].vccName||(r[l].vccName=o),l!=="__key__"&&n[6]&&!r[l].componentUrl&&(r[l].componentUrl=n[6]),l!=="__key__"&&n[7]&&!r[l].component_name&&(r[l].component_name=n[7])}),Ue(r)){if(this.dropIninFunction)return void this.dropIninFunction(r,this);this.initDropCode(r)}else We(r)&&qe(r);this.updateCodeStructure(r)})}initDropCode(e){(function(i){const n=_e(i),s=i[n],o=Te[n];if(o){for(const r in o)if(o.hasOwnProperty(r)){const l=o[r];s[r]=l}}})(e),function(i,n){let s=n;(function o(r){if(F(r)){for(const l in r)if(r.hasOwnProperty(l)){const h=r[l];if(l=="lc_id"){const p=r[l],m=je();s=s.replace(p,m),r[l]=m}else F(h)?o(h):He(h)&&h.forEach(p=>o(p))}}})(i)}(e,""),T(e)}updateCodeStructure(e){const i=L(this.currentPointDropInfo.target);if(i){let n=O(i);this.backup(),function(s,o,r=-1,l=()=>{}){s&&o&&(s.__children||(s.__children=[]),r>-1?s.__children.splice(r,0,o):s.__children.push(o),l(),o.__proto__={parentCodeNode:s})}(x(n),e,this.currentPointDropInfo.index,()=>{this.eventEmitter.emit("onMerged")}),this.render(this._rawDataStructure)}}enableEditMode(){let e="";const i=this.getControlPanelRoot();this.enableDelayTask&&clearTimeout(this.enableDelayTask),this.enableDelayTask=setTimeout(()=>{this.isCloneNode&&(e=i.cloneNode(!0),i.parentNode.replaceChild(e,i)),this.eventEmitter.emit("mounted",e||i),this.initComonentsEvent()},500)}flatDataStructure(e){T(e)}onSelectElement(e){return this.subscribeEventListener("selected",e),this}onRootElementMounted(e){return this.subscribeEventListener("mounted",e),this}onCodeCreated(e){return this.subscribeEventListener("codeCreated",e),this}onCodeStructureUpdated(e){return this.subscribeEventListener("codeStructureUpdated",e),this}onMerged(e){return this.subscribeEventListener("onMerged",e),this}onNodeDeleted(e){return this.subscribeEventListener("onNodeDeleted",e),this}reRender(){return this._render(this._rawDataStructure),this}asyncReRender(){return G(this,null,function*(){return yield this._render(this._rawDataStructure),this})}saveAttribute(e,i,n){const s=e,o=x(window.tree[i]);this.backup();for(const r in o)o.hasOwnProperty(r)&&r!="__children"&&r!="lc-mark"&&r!="lc_id"&&r!="vccName"&&r!="div-lc-mark"&&!F(o[r])&&delete o[r];return s.forEach(r=>{o[r.key]=r.value}),this.render(this._rawDataStructure),o.lc_id&&setTimeout(()=>{this.selectElement(o.lc_id,o.vccName||n)},10),this}selectElement(e,i){const n=this.getControlPanelRoot().querySelector(`[lc_id="${e}"]`);n&&(n.classList.add("mark-element"),n.setAttribute("lc-component-name",i))}onLevelChange(e,i){this.backup();const n=this.remove(e,!1);i.splice(0,1);let s=this._rawDataStructure,o=-1;for(let r=0;r<i.length-1;r++)s=x(s).__children[i[r]],o=i[r+1];s&&n.length>0&&x(s).__children.splice(o,0,n[0]),this.render(this._rawDataStructure)}remove(e,i=!0){let n=null;const s=document.querySelector(`[lc_id="${e}"]`);if(s){const o=L(s.parentElement);if(o){const r=O(o),l=x(r);if(l){const h=l.__children,p=h.findIndex(m=>x(m).lc_id==e);i&&this.backup(),n=h.splice(p,1),this.eventEmitter.emit("onNodeDeleted"),this.render(this._rawDataStructure)}}}return n}subscribeEventListener(e,i){this.eventEmitter.on(e,i)}backup(){this.renderStack.push(J(this._rawDataStructure)),this.redoStack=[]}undo(){if(this.renderStack.length>0){this.redoStack.push(J(this._rawDataStructure));const e=this.renderStack.pop();this._render(e)}}redo(){if(this.redoStack.length>0){this.renderStack.push(J(this._rawDataStructure));const e=this.redoStack.pop();this._render(e)}}}let k=null,C=null,$=null;function we(t,e=()=>{}){const i=document.querySelector(".x"),n=(...r)=>{e(...r)};function s(r){const l=L(r.parentElement),h=r.getAttribute("lc_id");if(l){const p=O(l);if(p){const m=x(p);if(m)return m.__children.findIndex(N=>x(N).lc_id==h)}}return-1}function o(){$&&$.classList.remove("in-element")}t.addEventListener("dragover",r=>{r.preventDefault(),function(l){const h=l.target,p=function(N,q,_){const S=te(N),P=Math.round((S.bottom-S.top)/3);return{top:_<S.top+P,middle:_>=S.top+P&&_<=S.top+2*P,bottom:_>S.top+2*P}}(h,l.clientX,l.clientY),m=te(h);if(p.top&&t!==h){if(k===1&&C===h)return;k=1,C=h,o(),i.style=`top:${m.top}px;width:${m.width}px;left:${m.left}px;display:block;`,n(h.parentElement,s(h))}else if(p.bottom&&t!==h){if(k===3&&C===h)return;k=3,C=h,o(),i.style=`top:${m.bottom}px;width:${m.width}px;left:${m.left}px;display:block;`,n(h.parentElement,s(h)+1)}else k=2,C=h,h.classList.add("in-element"),$=h,i.style="display:none;",n(h,-1)}(r)}),t.addEventListener("dragleave",r=>{r.target===t?(t.classList.remove("in-element"),i.style="display: none;"):o()})}function te(t){return t.getBoundingClientRect()}const U=document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)},W=document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)},Ee={name:"editRule",components:{},props:{width:{type:[String],default:""},height:{type:[String],default:""},position:{type:String,default:"relative",validator:function(t){return["absolute","fixed","relative","static","inherit"].indexOf(t)!==-1}},isHotKey:{type:Boolean,default:!0},isScaleRevise:{type:Boolean,default:!1},value:{type:Array,default:()=>[]},contentLayout:{type:Object,default:()=>({top:0,left:0})},parent:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},stepLength:{type:Number,default:50,validator:t=>t%10==0}},data:()=>({size:17,left_top:18,windowWidth:0,windowHeight:0,xScale:[],yScale:[],topSpacing:0,leftSpacing:0,isDrag:!1,dragFlag:"",horizontalDottedLeft:-999,verticalDottedTop:-999,rulerWidth:0,rulerHeight:0,dragLineId:"",keyCode:{r:82},rulerToggle:!0,time:null}),computed:{wrapperStyle(){return{width:this.width?this.width:this.windowWidth+"px",height:this.height?this.height:this.windowHeight+"px",position:this.position}},contentStyle(){return{width:this.width?this.width:this.windowWidth+"px",height:this.height?this.height:this.windowHeight+"px",left:this.contentLayout.left+"px",top:this.contentLayout.top+"px",padding:this.left_top+"px 0px 0px "+this.left_top+"px"}},lineList(){let t=0,e=0;return this.value.map(i=>{const n=i.type==="h";return{id:`${i.type}_${n?t++:e++}`,type:i.type,title:i.site.toFixed(2)+"px",[n?"top":"left"]:i.site/(this.stepLength/50)+this.size}})}},watch:{visible:{handler(t){this.rulerToggle=t},immediate:!0}},mounted(){U(document,"mousemove",this.dottedLineMove),U(document,"mouseup",this.dottedLineUp),U(document,"keyup",this.keyboard),this.init(),U(window,"resize",this.windowResize)},beforeDestroy(){W(document,"mousemove",this.dottedLineMove),W(document,"mouseup",this.dottedLineUp),W(document,"keyup",this.keyboard),W(window,"resize",this.windowResize)},methods:{init(){this.box(),this.scaleCalc()},windowResize(){this.xScale=[],this.yScale=[],this.init()},getLineStyle:({type:t,top:e,left:i})=>t==="h"?{top:e+"px"}:{left:i+"px"},handleDragLine({type:t,id:e}){return t==="h"?this.dragHorizontalLine(e):this.dragVerticalLine(e)},regenerateScale(){this.time&&clearTimeout(this.time),this.time=setTimeout(()=>{let t=this.$refs.vueRulerWrapper;this.xScale=[],this.yScale=[],this.$refs.verticalRuler&&(this.$refs.verticalRuler.style.height="100%"),this.getCalc(this.xScale,t.scrollWidth),this.getCalc(this.yScale,t.scrollHeight),this.$refs.horizontalRuler.style.width=t.scrollWidth+"px",this.$refs.verticalRuler&&(this.$refs.verticalRuler.style.height=t.scrollHeight+"px")},200)},box(){if(this.isScaleRevise){const t=this.$refs.content,e=t.offsetLeft,i=t.offsetTop;this.getCalcRevise(this.xScale,e),this.getCalcRevise(this.yScale,i)}if(this.parent){const t=window.getComputedStyle(this.$el.parentNode,null);this.windowWidth=parseInt(t.getPropertyValue("width"),10),this.windowHeight=parseInt(t.getPropertyValue("height"),10)}else this.windowWidth=document.documentElement.clientWidth-this.leftSpacing,this.windowHeight=document.documentElement.clientHeight-this.topSpacing;this.rulerWidth=this.$refs.verticalRuler.clientWidth,this.rulerHeight=this.$refs.horizontalRuler?this.$refs.horizontalRuler.clientHeight:0,this.setSpacing()},setSpacing(){this.topSpacing=this.$refs.horizontalRuler?this.$refs.horizontalRuler.getBoundingClientRect().y:0,this.leftSpacing=this.$refs.verticalRuler?this.$refs.verticalRuler.getBoundingClientRect().x:0},scaleCalc(){this.getCalc(this.xScale,this.windowWidth),this.getCalc(this.yScale,this.windowHeight)},getCalc(t,e){for(let i=0;i<e*this.stepLength/50;i+=this.stepLength)i%this.stepLength==0&&t.push({id:i})},getCalcRevise(t,e){for(let i=0;i<e;i+=1)i%this.stepLength==0&&i+this.stepLength<=e&&t.push({id:i})},newLine(t){this.isDrag=!0,this.dragFlag=t},dottedLineMove(t){switch(this.setSpacing(),this.dragFlag){case"x":case"h":this.isDrag&&(this.verticalDottedTop=t.pageY-this.topSpacing);break;case"y":case"v":this.isDrag&&(this.horizontalDottedLeft=t.pageX-this.leftSpacing)}},dottedLineUp(t){if(this.setSpacing(),this.isDrag){this.isDrag=!1;const e=JSON.parse(JSON.stringify(this.value));switch(this.dragFlag){case"x":e.push({type:"h",site:(t.pageY-this.topSpacing-this.size)*(this.stepLength/50)}),this.$emit("input",e);break;case"y":e.push({type:"v",site:(t.pageX-this.leftSpacing-this.size)*(this.stepLength/50)}),this.$emit("input",e);break;case"h":this.dragCalc(e,t.pageY,this.topSpacing,this.rulerHeight,"h"),this.$emit("input",e);break;case"v":this.dragCalc(e,t.pageX,this.leftSpacing,this.rulerWidth,"v"),this.$emit("input",e)}this.verticalDottedTop=this.horizontalDottedLeft=-10}},dragCalc(t,e,i,n,s){if(e-i<n){let o;this.lineList.forEach((r,l)=>{r.id===this.dragLineId&&(o=l,r.id)}),t.splice(o,1,{type:s,site:-600})}else{let o;this.lineList.forEach((r,l)=>{r.id===this.dragLineId&&(o=l,r.id)}),t.splice(o,1,{type:s,site:(e-i-this.size)*(this.stepLength/50)})}},horizontalDragRuler(){this.newLine("x")},verticalDragRuler(){this.newLine("y")},dragHorizontalLine(t){this.isDrag=!0,this.dragFlag="h",this.dragLineId=t},dragVerticalLine(t){this.isDrag=!0,this.dragFlag="v",this.dragLineId=t},keyboard(t){this.isHotKey&&t.keyCode===this.keyCode.r&&(this.rulerToggle=!this.rulerToggle,this.$emit("update:visible",this.rulerToggle),this.rulerToggle?this.left_top=18:this.left_top=0)}}},De=["title","onMousedown"],be={class:"vue-ruler-content-mask"},ke=ue(Ee,[["render",function(t,e,i,n,s,o){const r=w("session");return E(),b("div",{style:I(o.wrapperStyle),class:"vue-ruler-wrapper",ref:"vueRulerWrapper",onselectstart:"return false;"},[pe(D(r,null,{default:R(()=>[g("div",{ref:"horizontalRuler",class:"vue-ruler-h",onMousedown:e[0]||(e[0]=ve((...l)=>o.horizontalDragRuler&&o.horizontalDragRuler(...l),["stop"]))},[(E(!0),b(K,null,X(s.xScale,(l,h)=>(E(),b("span",{key:h,style:I({left:50*h+2+"px"}),class:"n"},ee(l.id),5))),128))],544),g("div",{ref:"verticalRuler",class:"vue-ruler-v",onMousedown:e[1]||(e[1]=ve((...l)=>o.verticalDragRuler&&o.verticalDragRuler(...l),["stop"]))},[(E(!0),b(K,null,X(s.yScale,(l,h)=>(E(),b("span",{key:h,style:I({top:50*h+2+"px"}),class:"n"},ee(l.id),5))),128))],544),g("div",{style:I({top:s.verticalDottedTop+"px"}),class:"vue-ruler-ref-dot-h"},null,4),g("div",{style:I({left:s.horizontalDottedLeft+"px"}),class:"vue-ruler-ref-dot-v"},null,4),(E(!0),b(K,null,X(o.lineList,l=>(E(),b("div",{title:l.title,style:I(o.getLineStyle(l)),key:l.id,class:xe(`vue-ruler-ref-line-${l.type}`),onMousedown:h=>o.handleDragLine(l)},null,46,De))),128))]),_:1},512),[[me,s.rulerToggle]]),g("div",{ref:"content",class:"vue-ruler-content",style:I(o.contentStyle)},[fe(t.$slots,"default")],4),pe(g("div",be,null,512),[[me,s.isDrag]])],4)}]]);var ie,ne={exports:{}};ie=ne,function(t){var e,i={},n={16:!1,18:!1,17:!1,91:!1},s="all",o={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},r={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(a){return r[a]||a.toUpperCase().charCodeAt(0)},h=[];for(e=1;e<20;e++)r["f"+e]=111+e;function p(a,c){for(var d=a.length;d--;)if(a[d]===c)return d;return-1}function m(a,c){if(a.length!=c.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!==c[d])return!1;return!0}var N={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function q(a){for(e in n)n[e]=a[N[e]]}function _(a,c,d){var u,v;u=P(a),d===void 0&&(d=c,c="all");for(var y=0;y<u.length;y++)v=[],(a=u[y].split("+")).length>1&&(v=B(a),a=[a[a.length-1]]),a=a[0],(a=l(a))in i||(i[a]=[]),i[a].push({shortcut:u[y],scope:c,method:d,key:u[y],mods:v})}for(e in o)_[e]=!1;function S(){return s||"all"}function P(a){var c;return(c=(a=a.replace(/\s/g,"")).split(","))[c.length-1]==""&&(c[c.length-2]+=","),c}function B(a){for(var c=a.slice(0,a.length-1),d=0;d<c.length;d++)c[d]=o[c[d]];return c}function f(a,c,d){a.addEventListener?a.addEventListener(c,d,!1):a.attachEvent&&a.attachEvent("on"+c,function(){d(window.event)})}f(document,"keydown",function(a){(function(c){var d,u,v,y,V,M;if(d=c.keyCode,p(h,d)==-1&&h.push(d),d!=93&&d!=224||(d=91),d in n)for(v in n[d]=!0,o)o[v]==d&&(_[v]=!0);else if(q(c),_.filter.call(this,c)&&d in i){for(M=S(),y=0;y<i[d].length;y++)if((u=i[d][y]).scope==M||u.scope=="all"){for(v in V=u.mods.length>0,n)(!n[v]&&p(u.mods,+v)>-1||n[v]&&p(u.mods,+v)==-1)&&(V=!1);(u.mods.length!=0||n[16]||n[18]||n[17]||n[91])&&!V||u.method(c,u)===!1&&(c.preventDefault?c.preventDefault():c.returnValue=!1,c.stopPropagation&&c.stopPropagation(),c.cancelBubble&&(c.cancelBubble=!0))}}})(a)}),f(document,"keyup",function(a){var c,d=a.keyCode,u=p(h,d);if(u>=0&&h.splice(u,1),d!=93&&d!=224||(d=91),d in n)for(c in n[d]=!1,o)o[c]==d&&(_[c]=!1)}),f(window,"focus",function(){for(e in n)n[e]=!1;for(e in o)_[e]=!1});var Pe=t.key;t.key=_,t.key.setScope=function(a){s=a||"all"},t.key.getScope=S,t.key.deleteScope=function(a){var c,d,u;for(c in i)for(d=i[c],u=0;u<d.length;)d[u].scope===a?d.splice(u,1):u++},t.key.filter=function(a){var c=(a.target||a.srcElement).tagName;return!(c=="INPUT"||c=="SELECT"||c=="TEXTAREA")},t.key.isPressed=function(a){return typeof a=="string"&&(a=l(a)),p(h,a)!=-1},t.key.getPressedKeyCodes=function(){return h.slice(0)},t.key.noConflict=function(){var a=t.key;return t.key=Pe,a},t.key.unbind=function(a,c){var d,u,v,y,V,M=[];for(d=P(a),y=0;y<d.length;y++){if((u=d[y].split("+")).length>1&&(M=B(u),a=u[u.length-1]),a=l(a),c===void 0&&(c=S()),!i[a])return;for(v=0;v<i[a].length;v++)(V=i[a][v]).scope===c&&m(V.mods,M)&&(i[a][v]={})}},ie.exports=_}(Le);let oe,se,re,ae,le,de;Y=he(ne.exports),oe={name:"vcc",props:{initCodeEntity:{type:Object,default:()=>({})},asyncComponents:{type:Array,default:()=>[]}},emits:["updateCodeEntity","onLoadFinish"],components:{rawComponents:A(()=>z(()=>import("./rawComponents-DBG46KVT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),toolsBar:A(()=>z(()=>import("./toolsBar-CefeT0j_.js"),__vite__mapDeps([10,1,2,11]))),attributeInput:A(()=>z(()=>import("./attributeInput-5e8gXKP6.js"),__vite__mapDeps([12,3,4,1,2,5,6,7,8,13]))),"lc-code":A(()=>z(()=>import("./code-CTO80s9E.js"),__vite__mapDeps([14,1,2,5,15,16,8,17]))),vueRuleTool:ke,vueCodeEditor:Be},data:()=>({modelOpen:!1,modelValue:"",newDropObj:{},eventNode:{},customData:[],currentEditRawInfo:null,code:"",codeDialogVisible:!1,jsDialogVisible:!1,vueDialogVisible:!1,editMode:!0,codeRawVueInfo:null,JSCode:"",customCss:"",isShowAttribute:!1}),watch:{currentEditRawInfo(t){this.isShowAttribute=!!t},initCodeEntity(t){t.JSCode&&this.mainPanelProvider.saveJSCodeOnly(this.convertLogicCode(t.JSCode)),t.codeStructure&&this.mainPanelProvider.render(t.codeStructure),t.css&&this.mainPanelProvider.saveCssCodeOnly(this.convertCssLogicCode(t.css))}},computed:{},beforeCreate(){},provide(){return{vccApp:this}},created(){this.mainPanelProvider=new Z({dropIninFunction:this.dropIninFunction})},beforeMount(){},mounted(){this.onPreviewModeChange(this.initCodeEntity.mode!=1),Promise.all([z(()=>import("./load-DwytJNh1.js"),[])]).then(t=>{this.$emit("onLoadFinish"),this.eventNode=this.initCodeEntity.eventNode,this.init()}),this.initShortcut()},beforeUpdate(){},updated(){},destroyed(){},methods:{dropIninFunction(t,e){const i=Object.keys(t);if(["mic-modal","mic-drawer"].includes(i[0]))return this.modelValue="",this.newDropObj=t,void(this.modelOpen=!0);e.initDropCode(t),e.updateCodeStructure(t)},setDropObj(){if(!this.modelValue)return void $e.error("\u8BF7\u9009\u62E9\u7ED1\u5B9A\u7684\u53D8\u91CF");const t=this.newDropObj;t[Object.keys(t)[0]]["v-model:open"]=this.modelValue,this.mainPanelProvider.initDropCode(t),this.mainPanelProvider.updateCodeStructure(t),this.modelOpen=!1},convertLogicCode(t){try{let e=t;this.JSCode=t;const i=()=>{this.$refs.vueEditor?this.$refs.vueEditor.updateJsCode(t):setTimeout(()=>{i()},20)};return i(),e}catch(e){}},setCurrentEditRawInfo(t){this.currentEditRawInfo=t,this.isShowAttribute=!0},convertCssLogicCode(t){return this.$refs.vueEditor.updateCssCode(t),this.customCss=t,t},convertDataLogic(t,e=!1){let i={};return this.customData=t||[],t.forEach(n=>{["string","array","object"].includes(n.key)||n.key==="string"?i[n.key]=n.value:n.key==="number"?i[n.key]=Number(n.value):n.key==="boolean"?i[n.key]=n.value==="true"||n.value===!0:i[n.key]=n.value}),e&&(this.mainPanelProvider.saveJsData(i),this.renderCode()),i},initShortcut(){Y("\u2318+z, ctrl+z",()=>(this.undo(),!1)),Y("esc",()=>(this.editMode=!0,this.mainPanelProvider.setEditMode(!0),!1))},init(){this.mainPanelProvider.onRootElementMounted(t=>{document.getElementsByTagName("body")[0].addEventListener("click",e=>{this.mainPanelProvider.clearElementSelect()}),we(t.firstChild,this.currentPointer),document.querySelector(".x").style="display:none;"}).onMerged(()=>{this.currentPointer(null)}).onCodeCreated(t=>{this.code=t}).onCodeStructureUpdated(t=>{this.$refs.rawComponents&&this.$refs.rawComponents.updateCode(t),this.$refs.vueRuleTool&&this.$refs.vueRuleTool.regenerateScale(),this.codeRawVueInfo=t,this.notifyParent()}).onNodeDeleted(()=>{this.currentEditRawInfo=null}).onSelectElement(t=>{this.currentEditRawInfo=t}).saveCssCodeOnly(this.convertCssLogicCode(this.initCodeEntity.css?this.initCodeEntity.css:"")).saveJSCodeOnly(this.convertLogicCode(this.initCodeEntity.JSCode?this.initCodeEntity.JSCode:"")).saveEventNode(this.initCodeEntity.eventNode).saveJsData(this.convertDataLogic(this.initCodeEntity.customData||[])).render(this.initCodeEntity.codeStructure?this.initCodeEntity.codeStructure:this.getFakeData()),this.eventNode=this.initCodeEntity.eventNode||{}},notifyParent(){this.$emit("updateCodeEntity",{codeRawVueInfo:this.codeRawVueInfo,JSCode:this.JSCode,css:this.customCss,eventNode:this.eventNode,customData:this.customData})},currentPointer(t,e){this.mainPanelProvider.setDropInfo({target:t,index:e})},getFakeData:()=>({template:{lc_id:"root",__children:[{div:{class:"container",lc_id:"container",style:"min-height: 100%;"}}]}}),onPreviewModeChange(t){const e=document.querySelector("#render-control-panel");e.style=t?"width:375px;":"width:100%;"},onEditModeChange(t){this.editMode=t,this.$nextTick(()=>{this.mainPanelProvider.setEditMode(t,document.querySelector("#mountedEle"))})},renderCode(){this.mainPanelProvider.reRender()},clear(){this.mainPanelProvider.render(this.getFakeData())},onSaveAttr({resultList:t,lc_id:e,vueRawTag:i}){this.mainPanelProvider.saveAttribute(t,e,i)},onRemove({lc_id:t}){this.mainPanelProvider.remove(t)},redo(){this.mainPanelProvider.redo()},undo(){this.mainPanelProvider.undo()},saveJSCode({JSCodeInfo:t,JSCode:e}){this.mainPanelProvider.saveJSCode(t),this.JSCode=e,this.notifyParent()},saveCssCode(t){this.mainPanelProvider.saveCssCode(t),this.customCss=t,this.notifyParent()},saveEventLogicCode(t){t&&(this.eventNode=t,this.mainPanelProvider.saveEventNode(t),this.mainPanelProvider.reRender(),this.notifyParent())},codeParseSucess(t,e,i){e&&(this.mainPanelProvider.saveJSCode(e,!1),this.JSCode=e),i&&(this.mainPanelProvider.saveCssCode(i,!1),this.customCss=i),t&&this.mainPanelProvider.render(t),this.notifyParent()},render(t){this.mainPanelProvider.render(t)},showVueDialogVisible(){this.$refs.vueEditor.updateCode(this.code),this.vueDialogVisible=!0},showCodeDialogVisible(){this.codeDialogVisible=!0},save(){this.$emit("save",{code:this.code,codeRawVueInfo:this.codeRawVueInfo,JSCode:this.JSCode,css:this.customCss,eventNode:this.eventNode,customData:this.customData})}},fillter:{}},se={class:"vcc-box"},re={class:"main-main"},ae={class:"base-component-container"},le={class:"vcc-main-container"},de={key:0,id:"fullScreen"};let ce;ce=ue(oe,[["render",function(t,e,i,n,s,o){const r=w("raw-components"),l=w("tools-bar"),h=w("vueRuleTool"),p=w("attribute-input"),m=w("lc-code"),N=w("vueCodeEditor"),q=w("a-select-option"),_=w("a-select"),S=w("a-form-item"),P=w("a-form"),B=w("a-modal");return E(),b("div",se,[g("div",re,[g("nav",ae,[D(r,{ref:"rawComponents",customData:s.customData,asyncComponents:i.asyncComponents,onReRender:o.render,onSetCurrentEditRawInfo:o.setCurrentEditRawInfo,onSaveData:e[0]||(e[0]=f=>{o.convertDataLogic(f,!0)}),initStructure:s.codeRawVueInfo},null,8,["customData","asyncComponents","onReRender","onSetCurrentEditRawInfo","initStructure"])]),g("div",le,[D(l,{onOnPreviewModeChange:o.onPreviewModeChange,onOnEditModeChange:o.onEditModeChange,onRedo:o.redo,onUndo:o.undo,onClear:o.clear,onShowVueDialogVisible:o.showVueDialogVisible,onShowCodeDialogVisible:o.showCodeDialogVisible,onSave:o.save},{default:R(()=>[fe(t.$slots,"toole",{},void 0,!0)]),_:3},8,["onOnPreviewModeChange","onOnEditModeChange","onRedo","onUndo","onClear","onShowVueDialogVisible","onShowCodeDialogVisible","onSave"]),D(h,{"is-scale-revise":!0,parent:!0,width:"100%",height:"100%",isScaleRevise:!0,ref:"vueRuleTool"},{default:R(()=>e[5]||(e[5]=[g("div",{class:"preview-container"},[g("div",{id:"render-control-panel"})],-1)])),_:1},512)]),D(p,{isShowAttribute:s.isShowAttribute,eventNode:s.eventNode,customData:s.customData,enableRemoveButton:!0,class:"attribute",onSave:o.onSaveAttr,onRemove:o.onRemove,onSaveEventLogicCode:o.saveEventLogicCode,ref:"attributeInput",shortcutInitMode:"hand",__rawVueInfo__:s.currentEditRawInfo},null,8,["isShowAttribute","eventNode","customData","onSave","onRemove","onSaveEventLogicCode","__rawVueInfo__"])]),g("div",null,[D(m,{rawCode:s.code,codeDialogVisible:s.codeDialogVisible,"onUpdate:codeDialogVisible":e[1]||(e[1]=f=>s.codeDialogVisible=f)},null,8,["rawCode","codeDialogVisible"]),D(N,{ref:"vueEditor",onCodeParseSucess:o.codeParseSucess,vueDialogVisible:s.vueDialogVisible,"onUpdate:vueDialogVisible":e[2]||(e[2]=f=>s.vueDialogVisible=f)},null,8,["onCodeParseSucess","vueDialogVisible"])]),e[7]||(e[7]=g("div",{class:"cross-flag"},[g("div",{class:"x"})],-1)),s.editMode?Ne("",!0):(E(),b("div",de,e[6]||(e[6]=[g("div",{style:{margin:"20px","font-weight":"bold"}},"\u6309\u4E0BESC\u9000\u51FA\u9884\u89C8\u6A21\u5F0F",-1),g("div",{id:"mountedEle"},null,-1)]))),D(B,{title:"\u8BF7\u7ED1\u5B9A\u53D8\u91CF",open:s.modelOpen,"onUpdate:open":e[4]||(e[4]=f=>s.modelOpen=f),onOk:o.setDropObj},{default:R(()=>[D(P,null,{default:R(()=>[D(S,{label:"\u53D8\u91CF"},{default:R(()=>[D(_,{value:s.modelValue,"onUpdate:value":e[3]||(e[3]=f=>s.modelValue=f)},{default:R(()=>[(E(!0),b(K,null,X(s.customData,f=>(E(),Ie(q,{key:f.key,value:f.key},{default:R(()=>[Oe(ee(f.keyDesc),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["open","onOk"])])}],["__scopeId","data-v-a44caf11"]]),Se=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}))}));export{Ge as __tla,Ce as d,Y as k,Se as v};
