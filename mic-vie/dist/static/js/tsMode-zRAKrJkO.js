var ae=Object.defineProperty,oe=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var X=(S,_,y)=>_ in S?ae(S,_,{enumerable:!0,configurable:!0,writable:!0,value:y}):S[_]=y,Y=(S,_)=>{for(var y in _||(_={}))ce.call(_,y)&&X(S,y,_[y]);if(q)for(var y of q(_))de.call(_,y)&&X(S,y,_[y]);return S},Z=(S,_)=>oe(S,le(_));var f=(S,_,y)=>new Promise((L,r)=>{var s=b=>{try{D(y.next(b))}catch(C){r(C)}},k=b=>{try{D(y.throw(b))}catch(C){r(C)}},D=b=>b.done?L(b.value):Promise.resolve(b.value).then(s,k);D((y=y.apply(S,_)).next())});import{t as ue,m as ge,__tla as pe}from"./vueCodeEditorDialog-BWExc4-y.js";let x,N,M,K,R,E,v,H,V,p,j,W,B,U,$,z,G,J,F,ee,te,se,ie,me=Promise.all([(()=>{try{return pe}catch(S){}})()]).then(()=>f(void 0,null,function*(){var g;var S=Object.defineProperty,_=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,L=Object.prototype.hasOwnProperty,r={};((e,t,n,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of y(t))L.call(e,i)||i===n||S(e,i,{get:()=>t[i],enumerable:!(l=_(t,i))||l.enumerable})})(r,ge,"default");let s;J=class{constructor(e,t){this._modeId=e,this._defaults=t,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker()),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange(()=>this._updateExtraLibs())}dispose(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}_updateExtraLibs(){return f(this,null,function*(){if(!this._worker)return;const e=++this._updateExtraLibsToken,t=yield this._worker.getProxy();this._updateExtraLibsToken===e&&t.updateExtraLibs(this._defaults.getExtraLibs())})}_getClient(){return this._client||(this._client=f(this,null,function*(){return this._worker=r.editor.createWebWorker({moduleId:"vs/language/typescript/tsWorker",label:this._modeId,keepIdleModels:!0,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs(),customWorkerPath:this._defaults.workerOptions.customWorkerPath,inlayHintsOptions:this._defaults.inlayHintsOptions}}),this._defaults.getEagerModelSync()?yield this._worker.withSyncedResources(r.editor.getModels().filter(e=>e.getLanguageId()===this._modeId).map(e=>e.uri)):yield this._worker.getProxy()})),this._client}getLanguageServiceWorker(...e){return f(this,null,function*(){const t=yield this._getClient();return this._worker&&(yield this._worker.withSyncedResources(e)),t})}},s={},F=function(e,t,n=0){if(typeof e=="string")return e;if(e===void 0)return"";let l="";if(n){l+=t;for(let i=0;i<n;i++)l+="  "}if(l+=e.messageText,n++,e.next)for(const i of e.next)l+=F(i,t,n);return l};function k(e){return e?e.map(t=>t.text).join(""):""}s["lib.d.ts"]=!0,s["lib.decorators.d.ts"]=!0,s["lib.decorators.legacy.d.ts"]=!0,s["lib.dom.asynciterable.d.ts"]=!0,s["lib.dom.d.ts"]=!0,s["lib.dom.iterable.d.ts"]=!0,s["lib.es2015.collection.d.ts"]=!0,s["lib.es2015.core.d.ts"]=!0,s["lib.es2015.d.ts"]=!0,s["lib.es2015.generator.d.ts"]=!0,s["lib.es2015.iterable.d.ts"]=!0,s["lib.es2015.promise.d.ts"]=!0,s["lib.es2015.proxy.d.ts"]=!0,s["lib.es2015.reflect.d.ts"]=!0,s["lib.es2015.symbol.d.ts"]=!0,s["lib.es2015.symbol.wellknown.d.ts"]=!0,s["lib.es2016.array.include.d.ts"]=!0,s["lib.es2016.d.ts"]=!0,s["lib.es2016.full.d.ts"]=!0,s["lib.es2016.intl.d.ts"]=!0,s["lib.es2017.d.ts"]=!0,s["lib.es2017.date.d.ts"]=!0,s["lib.es2017.full.d.ts"]=!0,s["lib.es2017.intl.d.ts"]=!0,s["lib.es2017.object.d.ts"]=!0,s["lib.es2017.sharedmemory.d.ts"]=!0,s["lib.es2017.string.d.ts"]=!0,s["lib.es2017.typedarrays.d.ts"]=!0,s["lib.es2018.asyncgenerator.d.ts"]=!0,s["lib.es2018.asynciterable.d.ts"]=!0,s["lib.es2018.d.ts"]=!0,s["lib.es2018.full.d.ts"]=!0,s["lib.es2018.intl.d.ts"]=!0,s["lib.es2018.promise.d.ts"]=!0,s["lib.es2018.regexp.d.ts"]=!0,s["lib.es2019.array.d.ts"]=!0,s["lib.es2019.d.ts"]=!0,s["lib.es2019.full.d.ts"]=!0,s["lib.es2019.intl.d.ts"]=!0,s["lib.es2019.object.d.ts"]=!0,s["lib.es2019.string.d.ts"]=!0,s["lib.es2019.symbol.d.ts"]=!0,s["lib.es2020.bigint.d.ts"]=!0,s["lib.es2020.d.ts"]=!0,s["lib.es2020.date.d.ts"]=!0,s["lib.es2020.full.d.ts"]=!0,s["lib.es2020.intl.d.ts"]=!0,s["lib.es2020.number.d.ts"]=!0,s["lib.es2020.promise.d.ts"]=!0,s["lib.es2020.sharedmemory.d.ts"]=!0,s["lib.es2020.string.d.ts"]=!0,s["lib.es2020.symbol.wellknown.d.ts"]=!0,s["lib.es2021.d.ts"]=!0,s["lib.es2021.full.d.ts"]=!0,s["lib.es2021.intl.d.ts"]=!0,s["lib.es2021.promise.d.ts"]=!0,s["lib.es2021.string.d.ts"]=!0,s["lib.es2021.weakref.d.ts"]=!0,s["lib.es2022.array.d.ts"]=!0,s["lib.es2022.d.ts"]=!0,s["lib.es2022.error.d.ts"]=!0,s["lib.es2022.full.d.ts"]=!0,s["lib.es2022.intl.d.ts"]=!0,s["lib.es2022.object.d.ts"]=!0,s["lib.es2022.regexp.d.ts"]=!0,s["lib.es2022.sharedmemory.d.ts"]=!0,s["lib.es2022.string.d.ts"]=!0,s["lib.es2023.array.d.ts"]=!0,s["lib.es2023.collection.d.ts"]=!0,s["lib.es2023.d.ts"]=!0,s["lib.es2023.full.d.ts"]=!0,s["lib.es5.d.ts"]=!0,s["lib.es6.d.ts"]=!0,s["lib.esnext.collection.d.ts"]=!0,s["lib.esnext.d.ts"]=!0,s["lib.esnext.decorators.d.ts"]=!0,s["lib.esnext.disposable.d.ts"]=!0,s["lib.esnext.full.d.ts"]=!0,s["lib.esnext.intl.d.ts"]=!0,s["lib.esnext.object.d.ts"]=!0,s["lib.esnext.promise.d.ts"]=!0,s["lib.scripthost.d.ts"]=!0,s["lib.webworker.asynciterable.d.ts"]=!0,s["lib.webworker.d.ts"]=!0,s["lib.webworker.importscripts.d.ts"]=!0,s["lib.webworker.iterable.d.ts"]=!0,x=class{constructor(e){this._worker=e}_textSpanToRange(e,t){let n=e.getPositionAt(t.start),l=e.getPositionAt(t.start+t.length),{lineNumber:i,column:d}=n,{lineNumber:a,column:o}=l;return{startLineNumber:i,startColumn:d,endLineNumber:a,endColumn:o}}},j=class{constructor(e){this._worker=e,this._libFiles={},this._hasFetchedLibFiles=!1,this._fetchLibFilesPromise=null}isLibFile(e){return!!e&&e.path.indexOf("/lib.")===0&&!!s[e.path.slice(1)]}getOrCreateModel(e){const t=r.Uri.parse(e),n=r.editor.getModel(t);if(n)return n;if(this.isLibFile(t)&&this._hasFetchedLibFiles)return r.editor.createModel(this._libFiles[t.path.slice(1)],"typescript",t);const l=ue.getExtraLibs()[e];return l?r.editor.createModel(l.content,"typescript",t):null}_containsLibFile(e){for(let t of e)if(this.isLibFile(t))return!0;return!1}fetchLibFilesIfNecessary(e){return f(this,null,function*(){this._containsLibFile(e)&&(yield this._fetchLibFiles())})}_fetchLibFiles(){return this._fetchLibFilesPromise||(this._fetchLibFilesPromise=this._worker().then(e=>e.getLibFiles()).then(e=>{this._hasFetchedLibFiles=!0,this._libFiles=e})),this._fetchLibFilesPromise}},K=class extends x{constructor(e,t,n,l){super(l),this._libFiles=e,this._defaults=t,this._selector=n,this._disposables=[],this._listener=Object.create(null);const i=o=>{if(o.getLanguageId()!==n)return;const c=()=>{const{onlyVisible:w}=this._defaults.getDiagnosticsOptions();w?o.isAttachedToEditor()&&this._doValidate(o):this._doValidate(o)};let u;const h=o.onDidChangeContent(()=>{clearTimeout(u),u=window.setTimeout(c,500)}),m=o.onDidChangeAttached(()=>{const{onlyVisible:w}=this._defaults.getDiagnosticsOptions();w&&(o.isAttachedToEditor()?c():r.editor.setModelMarkers(o,this._selector,[]))});this._listener[o.uri.toString()]={dispose(){h.dispose(),m.dispose(),clearTimeout(u)}},c()},d=o=>{r.editor.setModelMarkers(o,this._selector,[]);const c=o.uri.toString();this._listener[c]&&(this._listener[c].dispose(),delete this._listener[c])};this._disposables.push(r.editor.onDidCreateModel(o=>i(o))),this._disposables.push(r.editor.onWillDisposeModel(d)),this._disposables.push(r.editor.onDidChangeModelLanguage(o=>{d(o.model),i(o.model)})),this._disposables.push({dispose(){for(const o of r.editor.getModels())d(o)}});const a=()=>{for(const o of r.editor.getModels())d(o),i(o)};this._disposables.push(this._defaults.onDidChange(a)),this._disposables.push(this._defaults.onDidExtraLibsChange(a)),r.editor.getModels().forEach(o=>i(o))}dispose(){this._disposables.forEach(e=>e&&e.dispose()),this._disposables=[]}_doValidate(e){return f(this,null,function*(){const t=yield this._worker(e.uri);if(e.isDisposed())return;const n=[],{noSyntaxValidation:l,noSemanticValidation:i,noSuggestionDiagnostics:d}=this._defaults.getDiagnosticsOptions();l||n.push(t.getSyntacticDiagnostics(e.uri.toString())),i||n.push(t.getSemanticDiagnostics(e.uri.toString())),d||n.push(t.getSuggestionDiagnostics(e.uri.toString()));const a=yield Promise.all(n);if(!a||e.isDisposed())return;const o=a.reduce((u,h)=>h.concat(u),[]).filter(u=>(this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(u.code)===-1),c=o.map(u=>u.relatedInformation||[]).reduce((u,h)=>h.concat(u),[]).map(u=>u.file?r.Uri.parse(u.file.fileName):null);yield this._libFiles.fetchLibFilesIfNecessary(c),e.isDisposed()||r.editor.setModelMarkers(e,this._selector,o.map(u=>this._convertDiagnostics(e,u)))})}_convertDiagnostics(e,t){const n=t.start||0,l=t.length||1,{lineNumber:i,column:d}=e.getPositionAt(n),{lineNumber:a,column:o}=e.getPositionAt(n+l),c=[];return t.reportsUnnecessary&&c.push(r.MarkerTag.Unnecessary),t.reportsDeprecated&&c.push(r.MarkerTag.Deprecated),{severity:this._tsDiagnosticCategoryToMarkerSeverity(t.category),startLineNumber:i,startColumn:d,endLineNumber:a,endColumn:o,message:F(t.messageText,`
`),code:t.code.toString(),tags:c,relatedInformation:this._convertRelatedInformation(e,t.relatedInformation)}}_convertRelatedInformation(e,t){if(!t)return[];const n=[];return t.forEach(l=>{let i=e;if(l.file&&(i=this._libFiles.getOrCreateModel(l.file.fileName)),!i)return;const d=l.start||0,a=l.length||1,{lineNumber:o,column:c}=i.getPositionAt(d),{lineNumber:u,column:h}=i.getPositionAt(d+a);n.push({resource:i.uri,startLineNumber:o,startColumn:c,endLineNumber:u,endColumn:h,message:F(l.messageText,`
`)})}),n}_tsDiagnosticCategoryToMarkerSeverity(e){switch(e){case 1:return r.MarkerSeverity.Error;case 3:return r.MarkerSeverity.Info;case 0:return r.MarkerSeverity.Warning;case 2:return r.MarkerSeverity.Hint}return r.MarkerSeverity.Info}},G=class P extends x{get triggerCharacters(){return["."]}provideCompletionItems(t,n,l,i){return f(this,null,function*(){const d=t.getWordUntilPosition(n),a=new r.Range(n.lineNumber,d.startColumn,n.lineNumber,d.endColumn),o=t.uri,c=t.getOffsetAt(n),u=yield this._worker(o);if(t.isDisposed())return;const h=yield u.getCompletionsAtPosition(o.toString(),c);if(!(!h||t.isDisposed()))return{suggestions:h.entries.map(m=>{let w=a;if(m.replacementSpan){const T=t.getPositionAt(m.replacementSpan.start),A=t.getPositionAt(m.replacementSpan.start+m.replacementSpan.length);w=new r.Range(T.lineNumber,T.column,A.lineNumber,A.column)}const I=[];return m.kindModifiers!==void 0&&m.kindModifiers.indexOf("deprecated")!==-1&&I.push(r.languages.CompletionItemTag.Deprecated),{uri:o,position:n,offset:c,range:w,label:m.name,insertText:m.name,sortText:m.sortText,kind:P.convertKind(m.kind),tags:I}})}})}resolveCompletionItem(t,n){return f(this,null,function*(){const l=t,i=l.uri,d=l.position,a=l.offset,o=yield this._worker(i),c=yield o.getCompletionEntryDetails(i.toString(),a,l.label);return c?{uri:i,position:d,label:c.name,kind:P.convertKind(c.kind),detail:k(c.displayParts),documentation:{value:P.createDocumentationString(c)}}:l})}static convertKind(t){switch(t){case p.primitiveType:case p.keyword:return r.languages.CompletionItemKind.Keyword;case p.variable:case p.localVariable:return r.languages.CompletionItemKind.Variable;case p.memberVariable:case p.memberGetAccessor:case p.memberSetAccessor:return r.languages.CompletionItemKind.Field;case p.function:case p.memberFunction:case p.constructSignature:case p.callSignature:case p.indexSignature:return r.languages.CompletionItemKind.Function;case p.enum:return r.languages.CompletionItemKind.Enum;case p.module:return r.languages.CompletionItemKind.Module;case p.class:return r.languages.CompletionItemKind.Class;case p.interface:return r.languages.CompletionItemKind.Interface;case p.warning:return r.languages.CompletionItemKind.File}return r.languages.CompletionItemKind.Property}static createDocumentationString(t){let n=k(t.documentation);if(t.tags)for(const l of t.tags)n+=`

${D(l)}`;return n}};function D(e){let t=`*@${e.name}*`;if(e.name==="param"&&e.text){const[n,...l]=e.text;t+=`\`${n.text}\``,l.length>0&&(t+=` \u2014 ${l.map(i=>i.text).join(" ")}`)}else Array.isArray(e.text)?t+=` \u2014 ${e.text.map(n=>n.text).join(" ")}`:e.text&&(t+=` \u2014 ${e.text}`);return t}let b;z=class re extends x{constructor(){super(...arguments),this.signatureHelpTriggerCharacters=["(",","]}static _toSignatureHelpTriggerReason(t){switch(t.triggerKind){case r.languages.SignatureHelpTriggerKind.TriggerCharacter:return t.triggerCharacter?t.isRetrigger?{kind:"retrigger",triggerCharacter:t.triggerCharacter}:{kind:"characterTyped",triggerCharacter:t.triggerCharacter}:{kind:"invoked"};case r.languages.SignatureHelpTriggerKind.ContentChange:return t.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case r.languages.SignatureHelpTriggerKind.Invoke:default:return{kind:"invoked"}}}provideSignatureHelp(t,n,l,i){return f(this,null,function*(){const d=t.uri,a=t.getOffsetAt(n),o=yield this._worker(d);if(t.isDisposed())return;const c=yield o.getSignatureHelpItems(d.toString(),a,{triggerReason:re._toSignatureHelpTriggerReason(i)});if(!c||t.isDisposed())return;const u={activeSignature:c.selectedItemIndex,activeParameter:c.argumentIndex,signatures:[]};return c.items.forEach(h=>{const m={label:"",parameters:[]};m.documentation={value:k(h.documentation)},m.label+=k(h.prefixDisplayParts),h.parameters.forEach((w,I,T)=>{const A=k(w.displayParts),ne={label:A,documentation:{value:k(w.documentation)}};m.label+=A,m.parameters.push(ne),I<T.length-1&&(m.label+=k(h.separatorDisplayParts))}),m.label+=k(h.suffixDisplayParts),u.signatures.push(m)}),{value:u,dispose(){}}})}},B=class extends x{provideHover(e,t,n){return f(this,null,function*(){const l=e.uri,i=e.getOffsetAt(t),d=yield this._worker(l);if(e.isDisposed())return;const a=yield d.getQuickInfoAtPosition(l.toString(),i);if(!a||e.isDisposed())return;const o=k(a.documentation),c=a.tags?a.tags.map(h=>D(h)).join(`  

`):"",u=k(a.displayParts);return{range:this._textSpanToRange(e,a.textSpan),contents:[{value:"```typescript\n"+u+"\n```\n"},{value:o+(c?`

`+c:"")}]}})}},R=class extends x{provideDocumentHighlights(e,t,n){return f(this,null,function*(){const l=e.uri,i=e.getOffsetAt(t),d=yield this._worker(l);if(e.isDisposed())return;const a=yield d.getDocumentHighlights(l.toString(),i,[l.toString()]);return a&&!e.isDisposed()?a.flatMap(o=>o.highlightSpans.map(c=>({range:this._textSpanToRange(e,c.textSpan),kind:c.kind==="writtenReference"?r.languages.DocumentHighlightKind.Write:r.languages.DocumentHighlightKind.Text}))):void 0})}},M=class extends x{constructor(e,t){super(t),this._libFiles=e}provideDefinition(e,t,n){return f(this,null,function*(){const l=e.uri,i=e.getOffsetAt(t),d=yield this._worker(l);if(e.isDisposed())return;const a=yield d.getDefinitionAtPosition(l.toString(),i);if(!a||e.isDisposed()||(yield this._libFiles.fetchLibFilesIfNecessary(a.map(c=>r.Uri.parse(c.fileName))),e.isDisposed()))return;const o=[];for(let c of a){const u=this._libFiles.getOrCreateModel(c.fileName);u&&o.push({uri:u.uri,range:this._textSpanToRange(u,c.textSpan)})}return o})}},U=class extends x{constructor(e,t){super(t),this._libFiles=e}provideReferences(e,t,n,l){return f(this,null,function*(){const i=e.uri,d=e.getOffsetAt(t),a=yield this._worker(i);if(e.isDisposed())return;const o=yield a.getReferencesAtPosition(i.toString(),d);if(!o||e.isDisposed()||(yield this._libFiles.fetchLibFilesIfNecessary(o.map(u=>r.Uri.parse(u.fileName))),e.isDisposed()))return;const c=[];for(let u of o){const h=this._libFiles.getOrCreateModel(u.fileName);h&&c.push({uri:h.uri,range:this._textSpanToRange(h,u.textSpan)})}return c})}},W=class extends x{provideDocumentSymbols(e,t){return f(this,null,function*(){const n=e.uri,l=yield this._worker(n);if(e.isDisposed())return;const i=yield l.getNavigationTree(n.toString());if(!i||e.isDisposed())return;const d=(a,o)=>{var c;return{name:a.text,detail:"",kind:b[a.kind]||r.languages.SymbolKind.Variable,range:this._textSpanToRange(e,a.spans[0]),selectionRange:this._textSpanToRange(e,a.spans[0]),tags:[],children:(c=a.childItems)==null?void 0:c.map(u=>d(u,a.text)),containerName:o}};return i.childItems?i.childItems.map(a=>d(a)):[]})}},p=(g=class{},g.unknown="",g.keyword="keyword",g.script="script",g.module="module",g.class="class",g.interface="interface",g.type="type",g.enum="enum",g.variable="var",g.localVariable="local var",g.function="function",g.localFunction="local function",g.memberFunction="method",g.memberGetAccessor="getter",g.memberSetAccessor="setter",g.memberVariable="property",g.constructorImplementation="constructor",g.callSignature="call",g.indexSignature="index",g.constructSignature="construct",g.parameter="parameter",g.typeParameter="type parameter",g.primitiveType="primitive type",g.label="label",g.alias="alias",g.const="const",g.let="let",g.warning="warning",g),b=Object.create(null),b[p.module]=r.languages.SymbolKind.Module,b[p.class]=r.languages.SymbolKind.Class,b[p.enum]=r.languages.SymbolKind.Enum,b[p.interface]=r.languages.SymbolKind.Interface,b[p.memberFunction]=r.languages.SymbolKind.Method,b[p.memberVariable]=r.languages.SymbolKind.Property,b[p.memberGetAccessor]=r.languages.SymbolKind.Property,b[p.memberSetAccessor]=r.languages.SymbolKind.Property,b[p.variable]=r.languages.SymbolKind.Variable,b[p.const]=r.languages.SymbolKind.Variable,b[p.localVariable]=r.languages.SymbolKind.Variable,b[p.variable]=r.languages.SymbolKind.Variable,b[p.function]=r.languages.SymbolKind.Function,b[p.localFunction]=r.languages.SymbolKind.Function;let C,O;v=class extends x{static _convertOptions(e){return{ConvertTabsToSpaces:e.insertSpaces,TabSize:e.tabSize,IndentSize:e.tabSize,IndentStyle:2,NewLineCharacter:`
`,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}}_convertTextChanges(e,t){return{text:t.newText,range:this._textSpanToRange(e,t.span)}}},E=class extends v{constructor(){super(...arguments),this.canFormatMultipleRanges=!1}provideDocumentRangeFormattingEdits(e,t,n,l){return f(this,null,function*(){const i=e.uri,d=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),a=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),o=yield this._worker(i);if(e.isDisposed())return;const c=yield o.getFormattingEditsForRange(i.toString(),d,a,v._convertOptions(n));return c&&!e.isDisposed()?c.map(u=>this._convertTextChanges(e,u)):void 0})}},H=class extends v{get autoFormatTriggerCharacters(){return[";","}",`
`]}provideOnTypeFormattingEdits(e,t,n,l,i){return f(this,null,function*(){const d=e.uri,a=e.getOffsetAt(t),o=yield this._worker(d);if(e.isDisposed())return;const c=yield o.getFormattingEditsAfterKeystroke(d.toString(),a,n,v._convertOptions(l));return c&&!e.isDisposed()?c.map(u=>this._convertTextChanges(e,u)):void 0})}},N=class extends v{provideCodeActions(e,t,n,l){return f(this,null,function*(){const i=e.uri,d=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),a=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),o=v._convertOptions(e.getOptions()),c=n.markers.filter(m=>m.code).map(m=>m.code).map(Number),u=yield this._worker(i);if(e.isDisposed())return;const h=yield u.getCodeFixesAtPosition(i.toString(),d,a,c,o);return!h||e.isDisposed()?{actions:[],dispose:()=>{}}:{actions:h.filter(m=>m.changes.filter(w=>w.isNewFile).length===0).map(m=>this._tsCodeFixActionToMonacoCodeAction(e,n,m)),dispose:()=>{}}})}_tsCodeFixActionToMonacoCodeAction(e,t,n){const l=[];for(const i of n.changes)for(const d of i.textChanges)l.push({resource:e.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(e,d.span),text:d.newText}});return{title:n.description,edit:{edits:l},diagnostics:t.markers,kind:"quickfix"}}},$=class extends x{constructor(e,t){super(t),this._libFiles=e}provideRenameEdits(e,t,n,l){return f(this,null,function*(){const i=e.uri,d=i.toString(),a=e.getOffsetAt(t),o=yield this._worker(i);if(e.isDisposed())return;const c=yield o.getRenameInfo(d,a,{allowRenameOfImportPath:!1});if(c.canRename===!1)return{edits:[],rejectReason:c.localizedErrorMessage};if(c.fileToRename!==void 0)throw new Error("Renaming files is not supported.");const u=yield o.findRenameLocations(d,a,!1,!1,!1);if(!u||e.isDisposed())return;const h=[];for(const m of u){const w=this._libFiles.getOrCreateModel(m.fileName);if(!w)throw new Error(`Unknown file ${m.fileName}.`);h.push({resource:w.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(w,m.textSpan),text:n}})}return{edits:h}})}},V=class extends x{provideInlayHints(e,t,n){return f(this,null,function*(){const l=e.uri,i=l.toString(),d=e.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn}),a=e.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn}),o=yield this._worker(l);return e.isDisposed()?null:{hints:(yield o.provideInlayHints(i,d,a)).map(c=>Z(Y({},c),{label:c.text,position:e.getPositionAt(c.position),kind:this._convertHintKind(c.kind)})),dispose:()=>{}}})}_convertHintKind(e){return e==="Parameter"?r.languages.InlayHintKind.Parameter:r.languages.InlayHintKind.Type}},ie=function(e){O=Q(e,"typescript")},se=function(e){C=Q(e,"javascript")},ee=function(){return new Promise((e,t)=>{if(!C)return t("JavaScript not registered!");e(C)})},te=function(){return new Promise((e,t)=>{if(!O)return t("TypeScript not registered!");e(O)})};function Q(e,t){const n=[],l=new J(t,e),i=(...a)=>l.getLanguageServiceWorker(...a),d=new j(i);return function(){const{modeConfiguration:a}=e;(function(o){for(;o.length;)o.pop().dispose()})(n),a.completionItems&&n.push(r.languages.registerCompletionItemProvider(t,new G(i))),a.signatureHelp&&n.push(r.languages.registerSignatureHelpProvider(t,new z(i))),a.hovers&&n.push(r.languages.registerHoverProvider(t,new B(i))),a.documentHighlights&&n.push(r.languages.registerDocumentHighlightProvider(t,new R(i))),a.definitions&&n.push(r.languages.registerDefinitionProvider(t,new M(d,i))),a.references&&n.push(r.languages.registerReferenceProvider(t,new U(d,i))),a.documentSymbols&&n.push(r.languages.registerDocumentSymbolProvider(t,new W(i))),a.rename&&n.push(r.languages.registerRenameProvider(t,new $(d,i))),a.documentRangeFormattingEdits&&n.push(r.languages.registerDocumentRangeFormattingEditProvider(t,new E(i))),a.onTypeFormattingEdits&&n.push(r.languages.registerOnTypeFormattingEditProvider(t,new H(i))),a.codeActions&&n.push(r.languages.registerCodeActionProvider(t,new N(i))),a.inlayHints&&n.push(r.languages.registerInlayHintsProvider(t,new V(i))),a.diagnostics&&n.push(new K(d,e,t,i))}(),i}}));export{x as Adapter,N as CodeActionAdaptor,M as DefinitionAdapter,K as DiagnosticsAdapter,R as DocumentHighlightAdapter,E as FormatAdapter,v as FormatHelper,H as FormatOnTypeAdapter,V as InlayHintsAdapter,p as Kind,j as LibFiles,W as OutlineAdapter,B as QuickInfoAdapter,U as ReferenceAdapter,$ as RenameAdapter,z as SignatureHelpAdapter,G as SuggestAdapter,J as WorkerManager,me as __tla,F as flattenDiagnosticMessageText,ee as getJavaScriptWorker,te as getTypeScriptWorker,se as setupJavaScript,ie as setupTypeScript};
