var mn=(O,ae,A)=>new Promise((se,u)=>{var W=k=>{try{C(A.next(k))}catch(E){u(E)}},D=k=>{try{C(A.throw(k))}catch(E){u(E)}},C=k=>k.done?se(k.value):Promise.resolve(k.value).then(W,D);C((A=A.apply(O,ae)).next())});import{m as Sn,__tla as An}from"./vueCodeEditorDialog-BWExc4-y.js";let Se,hn,pn,vn,Q,G,J,Y,Z,ee,te,bn,ne,re,ie,I,oe,_n,kn,b,S,Cn=Promise.all([(()=>{try{return An}catch(O){}})()]).then(()=>mn(void 0,null,function*(){var O=Object.defineProperty,ae=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyNames,se=Object.prototype.hasOwnProperty,u={};((t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of A(e))se.call(t,o)||o===n||O(t,o,{get:()=>e[o],enumerable:!(r=ae(e,o))||r.enumerable})})(u,Sn,"default");let W,D,C,k,E,F,w,Ae,m,Ce,H,Re,Le,Te,ue,Me,Pe,De,Fe,je,j,ce,Ne,Ue,de,Ve,R,K,Oe,We,He,X,Ke,L,Xe,T,z,le,ze,M,$e,$,ge,Be,fe,qe,me,Qe,he,Ge,pe,Je,Ye,Ze,et,ve,tt,nt,rt,be,N,U,h,g,_e,it,ot,at,st,ut,ct,dt,lt,gt,B,ft,mt,ht,pt,V,ke,vt,p,l,bt,_t,kt,wt,yt,xt,x,q,It,Et,St,At,Ct,Rt,Lt,Tt,Mt,Pt,Dt,Ft,we,jt,f,Nt,y,Ut,Vt,Ot,Wt,Ht,Kt,Xt,zt,$t,ye,xe,Ie,Bt,qt,Qt,Gt,Jt,Yt,Zt,en,tn,nn,rn,on;ie=class{constructor(t){this._defaults=t,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),3e4),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){this._worker&&Date.now()-this._lastUsedTime>12e4&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=u.editor.createWebWorker({moduleId:"vs/language/html/htmlWorker",createData:{languageSettings:this._defaults.options,languageId:this._defaults.languageId},label:this._defaults.languageId}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...t){let e;return this._getClient().then(n=>{e=n}).then(n=>{if(this._worker)return this._worker.withSyncedResources(t)}).then(n=>e)}},(W||(W={})).is=function(t){return typeof t=="string"},(D||(D={})).is=function(t){return typeof t=="string"},(k=C||(C={})).MIN_VALUE=-2147483648,k.MAX_VALUE=2147483647,k.is=function(t){return typeof t=="number"&&k.MIN_VALUE<=t&&t<=k.MAX_VALUE},(F=E||(E={})).MIN_VALUE=0,F.MAX_VALUE=2147483647,F.is=function(t){return typeof t=="number"&&F.MIN_VALUE<=t&&t<=F.MAX_VALUE},(Ae=w||(w={})).create=function(t,e){return t===Number.MAX_VALUE&&(t=E.MAX_VALUE),e===Number.MAX_VALUE&&(e=E.MAX_VALUE),{line:t,character:e}},Ae.is=function(t){let e=t;return i.objectLiteral(e)&&i.uinteger(e.line)&&i.uinteger(e.character)},(Ce=m||(m={})).create=function(t,e,n,r){if(i.uinteger(t)&&i.uinteger(e)&&i.uinteger(n)&&i.uinteger(r))return{start:w.create(t,e),end:w.create(n,r)};if(w.is(t)&&w.is(e))return{start:t,end:e};throw new Error(`Range#create called with invalid arguments[${t}, ${e}, ${n}, ${r}]`)},Ce.is=function(t){let e=t;return i.objectLiteral(e)&&w.is(e.start)&&w.is(e.end)},(Re=H||(H={})).create=function(t,e){return{uri:t,range:e}},Re.is=function(t){let e=t;return i.objectLiteral(e)&&m.is(e.range)&&(i.string(e.uri)||i.undefined(e.uri))},(Te=Le||(Le={})).create=function(t,e,n,r){return{targetUri:t,targetRange:e,targetSelectionRange:n,originSelectionRange:r}},Te.is=function(t){let e=t;return i.objectLiteral(e)&&m.is(e.targetRange)&&i.string(e.targetUri)&&m.is(e.targetSelectionRange)&&(m.is(e.originSelectionRange)||i.undefined(e.originSelectionRange))},(Me=ue||(ue={})).create=function(t,e,n,r){return{red:t,green:e,blue:n,alpha:r}},Me.is=function(t){const e=t;return i.objectLiteral(e)&&i.numberRange(e.red,0,1)&&i.numberRange(e.green,0,1)&&i.numberRange(e.blue,0,1)&&i.numberRange(e.alpha,0,1)},(De=Pe||(Pe={})).create=function(t,e){return{range:t,color:e}},De.is=function(t){const e=t;return i.objectLiteral(e)&&m.is(e.range)&&ue.is(e.color)},(je=Fe||(Fe={})).create=function(t,e,n){return{label:t,textEdit:e,additionalTextEdits:n}},je.is=function(t){const e=t;return i.objectLiteral(e)&&i.string(e.label)&&(i.undefined(e.textEdit)||T.is(e))&&(i.undefined(e.additionalTextEdits)||i.typedArray(e.additionalTextEdits,T.is))},(ce=j||(j={})).Comment="comment",ce.Imports="imports",ce.Region="region",(Ue=Ne||(Ne={})).create=function(t,e,n,r,o,a){const s={startLine:t,endLine:e};return i.defined(n)&&(s.startCharacter=n),i.defined(r)&&(s.endCharacter=r),i.defined(o)&&(s.kind=o),i.defined(a)&&(s.collapsedText=a),s},Ue.is=function(t){const e=t;return i.objectLiteral(e)&&i.uinteger(e.startLine)&&i.uinteger(e.startLine)&&(i.undefined(e.startCharacter)||i.uinteger(e.startCharacter))&&(i.undefined(e.endCharacter)||i.uinteger(e.endCharacter))&&(i.undefined(e.kind)||i.string(e.kind))},(Ve=de||(de={})).create=function(t,e){return{location:t,message:e}},Ve.is=function(t){let e=t;return i.defined(e)&&H.is(e.location)&&i.string(e.message)},(K=R||(R={})).Error=1,K.Warning=2,K.Information=3,K.Hint=4,(We=Oe||(Oe={})).Unnecessary=1,We.Deprecated=2,(He||(He={})).is=function(t){const e=t;return i.objectLiteral(e)&&i.string(e.href)},(Ke=X||(X={})).create=function(t,e,n,r,o,a){let s={range:t,message:e};return i.defined(n)&&(s.severity=n),i.defined(r)&&(s.code=r),i.defined(o)&&(s.source=o),i.defined(a)&&(s.relatedInformation=a),s},Ke.is=function(t){var e;let n=t;return i.defined(n)&&m.is(n.range)&&i.string(n.message)&&(i.number(n.severity)||i.undefined(n.severity))&&(i.integer(n.code)||i.string(n.code)||i.undefined(n.code))&&(i.undefined(n.codeDescription)||i.string((e=n.codeDescription)===null||e===void 0?void 0:e.href))&&(i.string(n.source)||i.undefined(n.source))&&(i.undefined(n.relatedInformation)||i.typedArray(n.relatedInformation,de.is))},(Xe=L||(L={})).create=function(t,e,...n){let r={title:t,command:e};return i.defined(n)&&n.length>0&&(r.arguments=n),r},Xe.is=function(t){let e=t;return i.defined(e)&&i.string(e.title)&&i.string(e.command)},(z=T||(T={})).replace=function(t,e){return{range:t,newText:e}},z.insert=function(t,e){return{range:{start:t,end:t},newText:e}},z.del=function(t){return{range:t,newText:""}},z.is=function(t){const e=t;return i.objectLiteral(e)&&i.string(e.newText)&&m.is(e.range)},(ze=le||(le={})).create=function(t,e,n){const r={label:t};return e!==void 0&&(r.needsConfirmation=e),n!==void 0&&(r.description=n),r},ze.is=function(t){const e=t;return i.objectLiteral(e)&&i.string(e.label)&&(i.boolean(e.needsConfirmation)||e.needsConfirmation===void 0)&&(i.string(e.description)||e.description===void 0)},(M||(M={})).is=function(t){const e=t;return i.string(e)},($=$e||($e={})).replace=function(t,e,n){return{range:t,newText:e,annotationId:n}},$.insert=function(t,e,n){return{range:{start:t,end:t},newText:e,annotationId:n}},$.del=function(t,e){return{range:t,newText:"",annotationId:e}},$.is=function(t){const e=t;return T.is(e)&&(le.is(e.annotationId)||M.is(e.annotationId))},(Be=ge||(ge={})).create=function(t,e){return{textDocument:t,edits:e}},Be.is=function(t){let e=t;return i.defined(e)&&ve.is(e.textDocument)&&Array.isArray(e.edits)},(qe=fe||(fe={})).create=function(t,e,n){let r={kind:"create",uri:t};return e===void 0||e.overwrite===void 0&&e.ignoreIfExists===void 0||(r.options=e),n!==void 0&&(r.annotationId=n),r},qe.is=function(t){let e=t;return e&&e.kind==="create"&&i.string(e.uri)&&(e.options===void 0||(e.options.overwrite===void 0||i.boolean(e.options.overwrite))&&(e.options.ignoreIfExists===void 0||i.boolean(e.options.ignoreIfExists)))&&(e.annotationId===void 0||M.is(e.annotationId))},(Qe=me||(me={})).create=function(t,e,n,r){let o={kind:"rename",oldUri:t,newUri:e};return n===void 0||n.overwrite===void 0&&n.ignoreIfExists===void 0||(o.options=n),r!==void 0&&(o.annotationId=r),o},Qe.is=function(t){let e=t;return e&&e.kind==="rename"&&i.string(e.oldUri)&&i.string(e.newUri)&&(e.options===void 0||(e.options.overwrite===void 0||i.boolean(e.options.overwrite))&&(e.options.ignoreIfExists===void 0||i.boolean(e.options.ignoreIfExists)))&&(e.annotationId===void 0||M.is(e.annotationId))},(Ge=he||(he={})).create=function(t,e,n){let r={kind:"delete",uri:t};return e===void 0||e.recursive===void 0&&e.ignoreIfNotExists===void 0||(r.options=e),n!==void 0&&(r.annotationId=n),r},Ge.is=function(t){let e=t;return e&&e.kind==="delete"&&i.string(e.uri)&&(e.options===void 0||(e.options.recursive===void 0||i.boolean(e.options.recursive))&&(e.options.ignoreIfNotExists===void 0||i.boolean(e.options.ignoreIfNotExists)))&&(e.annotationId===void 0||M.is(e.annotationId))},(pe||(pe={})).is=function(t){let e=t;return e&&(e.changes!==void 0||e.documentChanges!==void 0)&&(e.documentChanges===void 0||e.documentChanges.every(n=>i.string(n.kind)?fe.is(n)||me.is(n)||he.is(n):ge.is(n)))},(Ye=Je||(Je={})).create=function(t){return{uri:t}},Ye.is=function(t){let e=t;return i.defined(e)&&i.string(e.uri)},(et=Ze||(Ze={})).create=function(t,e){return{uri:t,version:e}},et.is=function(t){let e=t;return i.defined(e)&&i.string(e.uri)&&i.integer(e.version)},(tt=ve||(ve={})).create=function(t,e){return{uri:t,version:e}},tt.is=function(t){let e=t;return i.defined(e)&&i.string(e.uri)&&(e.version===null||i.integer(e.version))},(rt=nt||(nt={})).create=function(t,e,n,r){return{uri:t,languageId:e,version:n,text:r}},rt.is=function(t){let e=t;return i.defined(e)&&i.string(e.uri)&&i.string(e.languageId)&&i.integer(e.version)&&i.string(e.text)},(N=be||(be={})).PlainText="plaintext",N.Markdown="markdown",N.is=function(t){const e=t;return e===N.PlainText||e===N.Markdown},(U||(U={})).is=function(t){const e=t;return i.objectLiteral(t)&&be.is(e.kind)&&i.string(e.value)},(g=h||(h={})).Text=1,g.Method=2,g.Function=3,g.Constructor=4,g.Field=5,g.Variable=6,g.Class=7,g.Interface=8,g.Module=9,g.Property=10,g.Unit=11,g.Value=12,g.Enum=13,g.Keyword=14,g.Snippet=15,g.Color=16,g.File=17,g.Reference=18,g.Folder=19,g.EnumMember=20,g.Constant=21,g.Struct=22,g.Event=23,g.Operator=24,g.TypeParameter=25,(it=_e||(_e={})).PlainText=1,it.Snippet=2,(ot||(ot={})).Deprecated=1,(st=at||(at={})).create=function(t,e,n){return{newText:t,insert:e,replace:n}},st.is=function(t){const e=t;return e&&i.string(e.newText)&&m.is(e.insert)&&m.is(e.replace)},(ct=ut||(ut={})).asIs=1,ct.adjustIndentation=2,(dt||(dt={})).is=function(t){const e=t;return e&&(i.string(e.detail)||e.detail===void 0)&&(i.string(e.description)||e.description===void 0)},(lt||(lt={})).create=function(t){return{label:t}},(gt||(gt={})).create=function(t,e){return{items:t||[],isIncomplete:!!e}},(ft=B||(B={})).fromPlainText=function(t){return t.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},ft.is=function(t){const e=t;return i.string(e)||i.objectLiteral(e)&&i.string(e.language)&&i.string(e.value)},(mt||(mt={})).is=function(t){let e=t;return!!e&&i.objectLiteral(e)&&(U.is(e.contents)||B.is(e.contents)||i.typedArray(e.contents,B.is))&&(t.range===void 0||m.is(t.range))},(ht||(ht={})).create=function(t,e){return e?{label:t,documentation:e}:{label:t}},(pt||(pt={})).create=function(t,e,...n){let r={label:t};return i.defined(e)&&(r.documentation=e),i.defined(n)?r.parameters=n:r.parameters=[],r},(ke=V||(V={})).Text=1,ke.Read=2,ke.Write=3,(vt||(vt={})).create=function(t,e){let n={range:t};return i.number(e)&&(n.kind=e),n},(l=p||(p={})).File=1,l.Module=2,l.Namespace=3,l.Package=4,l.Class=5,l.Method=6,l.Property=7,l.Field=8,l.Constructor=9,l.Enum=10,l.Interface=11,l.Function=12,l.Variable=13,l.Constant=14,l.String=15,l.Number=16,l.Boolean=17,l.Array=18,l.Object=19,l.Key=20,l.Null=21,l.EnumMember=22,l.Struct=23,l.Event=24,l.Operator=25,l.TypeParameter=26,(bt||(bt={})).Deprecated=1,(_t||(_t={})).create=function(t,e,n,r,o){let a={name:t,kind:e,location:{uri:r,range:n}};return o&&(a.containerName=o),a},(kt||(kt={})).create=function(t,e,n,r){return r!==void 0?{name:t,kind:e,location:{uri:n,range:r}}:{name:t,kind:e,location:{uri:n}}},(yt=wt||(wt={})).create=function(t,e,n,r,o,a){let s={name:t,detail:e,kind:n,range:r,selectionRange:o};return a!==void 0&&(s.children=a),s},yt.is=function(t){let e=t;return e&&i.string(e.name)&&i.number(e.kind)&&m.is(e.range)&&m.is(e.selectionRange)&&(e.detail===void 0||i.string(e.detail))&&(e.deprecated===void 0||i.boolean(e.deprecated))&&(e.children===void 0||Array.isArray(e.children))&&(e.tags===void 0||Array.isArray(e.tags))},(x=xt||(xt={})).Empty="",x.QuickFix="quickfix",x.Refactor="refactor",x.RefactorExtract="refactor.extract",x.RefactorInline="refactor.inline",x.RefactorRewrite="refactor.rewrite",x.Source="source",x.SourceOrganizeImports="source.organizeImports",x.SourceFixAll="source.fixAll",(It=q||(q={})).Invoked=1,It.Automatic=2,(St=Et||(Et={})).create=function(t,e,n){let r={diagnostics:t};return e!=null&&(r.only=e),n!=null&&(r.triggerKind=n),r},St.is=function(t){let e=t;return i.defined(e)&&i.typedArray(e.diagnostics,X.is)&&(e.only===void 0||i.typedArray(e.only,i.string))&&(e.triggerKind===void 0||e.triggerKind===q.Invoked||e.triggerKind===q.Automatic)},(Ct=At||(At={})).create=function(t,e,n){let r={title:t},o=!0;return typeof e=="string"?(o=!1,r.kind=e):L.is(e)?r.command=e:r.edit=e,o&&n!==void 0&&(r.kind=n),r},Ct.is=function(t){let e=t;return e&&i.string(e.title)&&(e.diagnostics===void 0||i.typedArray(e.diagnostics,X.is))&&(e.kind===void 0||i.string(e.kind))&&(e.edit!==void 0||e.command!==void 0)&&(e.command===void 0||L.is(e.command))&&(e.isPreferred===void 0||i.boolean(e.isPreferred))&&(e.edit===void 0||pe.is(e.edit))},(Lt=Rt||(Rt={})).create=function(t,e){let n={range:t};return i.defined(e)&&(n.data=e),n},Lt.is=function(t){let e=t;return i.defined(e)&&m.is(e.range)&&(i.undefined(e.command)||L.is(e.command))},(Mt=Tt||(Tt={})).create=function(t,e){return{tabSize:t,insertSpaces:e}},Mt.is=function(t){let e=t;return i.defined(e)&&i.uinteger(e.tabSize)&&i.boolean(e.insertSpaces)},(Dt=Pt||(Pt={})).create=function(t,e,n){return{range:t,target:e,data:n}},Dt.is=function(t){let e=t;return i.defined(e)&&m.is(e.range)&&(i.undefined(e.target)||i.string(e.target))},(we=Ft||(Ft={})).create=function(t,e){return{range:t,parent:e}},we.is=function(t){let e=t;return i.objectLiteral(e)&&m.is(e.range)&&(e.parent===void 0||we.is(e.parent))},(f=jt||(jt={})).namespace="namespace",f.type="type",f.class="class",f.enum="enum",f.interface="interface",f.struct="struct",f.typeParameter="typeParameter",f.parameter="parameter",f.variable="variable",f.property="property",f.enumMember="enumMember",f.event="event",f.function="function",f.method="method",f.macro="macro",f.keyword="keyword",f.modifier="modifier",f.comment="comment",f.string="string",f.number="number",f.regexp="regexp",f.operator="operator",f.decorator="decorator",(y=Nt||(Nt={})).declaration="declaration",y.definition="definition",y.readonly="readonly",y.static="static",y.deprecated="deprecated",y.abstract="abstract",y.async="async",y.modification="modification",y.documentation="documentation",y.defaultLibrary="defaultLibrary",(Ut||(Ut={})).is=function(t){const e=t;return i.objectLiteral(e)&&(e.resultId===void 0||typeof e.resultId=="string")&&Array.isArray(e.data)&&(e.data.length===0||typeof e.data[0]=="number")},(Ot=Vt||(Vt={})).create=function(t,e){return{range:t,text:e}},Ot.is=function(t){const e=t;return e!=null&&m.is(e.range)&&i.string(e.text)},(Ht=Wt||(Wt={})).create=function(t,e,n){return{range:t,variableName:e,caseSensitiveLookup:n}},Ht.is=function(t){const e=t;return e!=null&&m.is(e.range)&&i.boolean(e.caseSensitiveLookup)&&(i.string(e.variableName)||e.variableName===void 0)},(Xt=Kt||(Kt={})).create=function(t,e){return{range:t,expression:e}},Xt.is=function(t){const e=t;return e!=null&&m.is(e.range)&&(i.string(e.expression)||e.expression===void 0)},($t=zt||(zt={})).create=function(t,e){return{frameId:t,stoppedLocation:e}},$t.is=function(t){const e=t;return i.defined(e)&&m.is(t.stoppedLocation)},(xe=ye||(ye={})).Type=1,xe.Parameter=2,xe.is=function(t){return t===1||t===2},(Bt=Ie||(Ie={})).create=function(t){return{value:t}},Bt.is=function(t){const e=t;return i.objectLiteral(e)&&(e.tooltip===void 0||i.string(e.tooltip)||U.is(e.tooltip))&&(e.location===void 0||H.is(e.location))&&(e.command===void 0||L.is(e.command))},(Qt=qt||(qt={})).create=function(t,e,n){const r={position:t,label:e};return n!==void 0&&(r.kind=n),r},Qt.is=function(t){const e=t;return i.objectLiteral(e)&&w.is(e.position)&&(i.string(e.label)||i.typedArray(e.label,Ie.is))&&(e.kind===void 0||ye.is(e.kind))&&e.textEdits===void 0||i.typedArray(e.textEdits,T.is)&&(e.tooltip===void 0||i.string(e.tooltip)||U.is(e.tooltip))&&(e.paddingLeft===void 0||i.boolean(e.paddingLeft))&&(e.paddingRight===void 0||i.boolean(e.paddingRight))},(Gt||(Gt={})).createSnippet=function(t){return{kind:"snippet",value:t}},(Jt||(Jt={})).create=function(t,e,n,r){return{insertText:t,filterText:e,range:n,command:r}},(Yt||(Yt={})).create=function(t){return{items:t}},(en=Zt||(Zt={})).Invoked=0,en.Automatic=1,(tn||(tn={})).create=function(t,e){return{range:t,text:e}},(nn||(nn={})).create=function(t,e){return{triggerKind:t,selectedCompletionInfo:e}},(rn||(rn={})).is=function(t){const e=t;return i.objectLiteral(e)&&D.is(e.uri)&&i.string(e.name)},function(t){function e(n,r){if(n.length<=1)return n;const o=n.length/2|0,a=n.slice(0,o),s=n.slice(o);e(a,r),e(s,r);let c=0,v=0,d=0;for(;c<a.length&&v<s.length;){let _=r(a[c],s[v]);n[d++]=_<=0?a[c++]:s[v++]}for(;c<a.length;)n[d++]=a[c++];for(;v<s.length;)n[d++]=s[v++];return n}t.create=function(n,r,o,a){return new wn(n,r,o,a)},t.is=function(n){let r=n;return!!(i.defined(r)&&i.string(r.uri)&&(i.undefined(r.languageId)||i.string(r.languageId))&&i.uinteger(r.lineCount)&&i.func(r.getText)&&i.func(r.positionAt)&&i.func(r.offsetAt))},t.applyEdits=function(n,r){let o=n.getText(),a=e(r,(c,v)=>{let d=c.range.start.line-v.range.start.line;return d===0?c.range.start.character-v.range.start.character:d}),s=o.length;for(let c=a.length-1;c>=0;c--){let v=a[c],d=n.offsetAt(v.range.start),_=n.offsetAt(v.range.end);if(!(_<=s))throw new Error("Overlapping edit");o=o.substring(0,d)+v.newText+o.substring(_,o.length),s=d}return o}}(on||(on={}));var i,wn=class{constructor(t,e,n,r){this._uri=t,this._languageId=e,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let e=this.offsetAt(t.start),n=this.offsetAt(t.end);return this._content.substring(e,n)}return this._content}update(t,e){this._content=t.text,this._version=e,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let t=[],e=this._content,n=!0;for(let r=0;r<e.length;r++){n&&(t.push(r),n=!1);let o=e.charAt(r);n=o==="\r"||o===`
`,o==="\r"&&r+1<e.length&&e.charAt(r+1)===`
`&&r++}n&&e.length>0&&t.push(e.length),this._lineOffsets=t}return this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let e=this.getLineOffsets(),n=0,r=e.length;if(r===0)return w.create(0,t);for(;n<r;){let a=Math.floor((n+r)/2);e[a]>t?r=a:n=a+1}let o=n-1;return w.create(o,t-e[o])}offsetAt(t){let e=this.getLineOffsets();if(t.line>=e.length)return this._content.length;if(t.line<0)return 0;let n=e[t.line],r=t.line+1<e.length?e[t.line+1]:this._content.length;return Math.max(Math.min(n+t.character,r),n)}get lineCount(){return this.getLineOffsets().length}};(function(t){const e=Object.prototype.toString;t.defined=function(n){return n!==void 0},t.undefined=function(n){return n===void 0},t.boolean=function(n){return n===!0||n===!1},t.string=function(n){return e.call(n)==="[object String]"},t.number=function(n){return e.call(n)==="[object Number]"},t.numberRange=function(n,r,o){return e.call(n)==="[object Number]"&&r<=n&&n<=o},t.integer=function(n){return e.call(n)==="[object Number]"&&-2147483648<=n&&n<=2147483647},t.uinteger=function(n){return e.call(n)==="[object Number]"&&0<=n&&n<=2147483647},t.func=function(n){return e.call(n)==="[object Function]"},t.objectLiteral=function(n){return n!==null&&typeof n=="object"},t.typedArray=function(n,r){return Array.isArray(n)&&n.every(r)}})(i||(i={})),pn=class{constructor(t,e,n){this._languageId=t,this._worker=e,this._disposables=[],this._listener=Object.create(null);const r=a=>{let s,c=a.getLanguageId();c===this._languageId&&(this._listener[a.uri.toString()]=a.onDidChangeContent(()=>{window.clearTimeout(s),s=window.setTimeout(()=>this._doValidate(a.uri,c),500)}),this._doValidate(a.uri,c))},o=a=>{u.editor.setModelMarkers(a,this._languageId,[]);let s=a.uri.toString(),c=this._listener[s];c&&(c.dispose(),delete this._listener[s])};this._disposables.push(u.editor.onDidCreateModel(r)),this._disposables.push(u.editor.onWillDisposeModel(o)),this._disposables.push(u.editor.onDidChangeModelLanguage(a=>{o(a.model),r(a.model)})),this._disposables.push(n(a=>{u.editor.getModels().forEach(s=>{s.getLanguageId()===this._languageId&&(o(s),r(s))})})),this._disposables.push({dispose:()=>{u.editor.getModels().forEach(o);for(let a in this._listener)this._listener[a].dispose()}}),u.editor.getModels().forEach(r)}dispose(){this._disposables.forEach(t=>t&&t.dispose()),this._disposables.length=0}_doValidate(t,e){this._worker(t).then(n=>n.doValidation(t.toString())).then(n=>{const r=n.map(a=>function(s,c){let v=typeof c.code=="number"?String(c.code):c.code;return{severity:yn(c.severity),startLineNumber:c.range.start.line+1,startColumn:c.range.start.character+1,endLineNumber:c.range.end.line+1,endColumn:c.range.end.character+1,message:c.message,code:v,source:c.source}}(0,a));let o=u.editor.getModel(t);o&&o.getLanguageId()===e&&u.editor.setModelMarkers(o,e,r)}).then(void 0,n=>{})}};function yn(t){switch(t){case R.Error:return u.MarkerSeverity.Error;case R.Warning:return u.MarkerSeverity.Warning;case R.Information:return u.MarkerSeverity.Info;case R.Hint:return u.MarkerSeverity.Hint;default:return u.MarkerSeverity.Info}}Se=class{constructor(t,e){this._worker=t,this._triggerCharacters=e}get triggerCharacters(){return this._triggerCharacters}provideCompletionItems(t,e,n,r){const o=t.uri;return this._worker(o).then(a=>a.doComplete(o.toString(),I(e))).then(a=>{if(!a)return;const s=t.getWordUntilPosition(e),c=new u.Range(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn),v=a.items.map(d=>{const _={label:d.label,insertText:d.insertText||d.label,sortText:d.sortText,filterText:d.filterText,documentation:d.documentation,detail:d.detail,command:(P=d.command,P&&P.command==="editor.action.triggerSuggest"?{id:P.command,title:P.title,arguments:P.arguments}:void 0),range:c,kind:xn(d.kind)};var P,fn;return d.textEdit&&((fn=d.textEdit).insert!==void 0&&fn.replace!==void 0?_.range={insert:b(d.textEdit.insert),replace:b(d.textEdit.replace)}:_.range=b(d.textEdit.range),_.insertText=d.textEdit.newText),d.additionalTextEdits&&(_.additionalTextEdits=d.additionalTextEdits.map(S)),d.insertTextFormat===_e.Snippet&&(_.insertTextRules=u.languages.CompletionItemInsertTextRule.InsertAsSnippet),_});return{isIncomplete:a.isIncomplete,suggestions:v}})}},I=function(t){if(t)return{character:t.column-1,line:t.lineNumber-1}},oe=function(t){if(t)return{start:{line:t.startLineNumber-1,character:t.startColumn-1},end:{line:t.endLineNumber-1,character:t.endColumn-1}}},b=function(t){if(t)return new u.Range(t.start.line+1,t.start.character+1,t.end.line+1,t.end.character+1)};function xn(t){const e=u.languages.CompletionItemKind;switch(t){case h.Text:return e.Text;case h.Method:return e.Method;case h.Function:return e.Function;case h.Constructor:return e.Constructor;case h.Field:return e.Field;case h.Variable:return e.Variable;case h.Class:return e.Class;case h.Interface:return e.Interface;case h.Module:return e.Module;case h.Property:return e.Property;case h.Unit:return e.Unit;case h.Value:return e.Value;case h.Enum:return e.Enum;case h.Keyword:return e.Keyword;case h.Snippet:return e.Snippet;case h.Color:return e.Color;case h.File:return e.File;case h.Reference:return e.Reference}return e.Property}S=function(t){if(t)return{range:b(t.range),text:t.newText}},te=class{constructor(t){this._worker=t}provideHover(t,e,n){let r=t.uri;return this._worker(r).then(o=>o.doHover(r.toString(),I(e))).then(o=>{if(o)return{range:b(o.range),contents:In(o.contents)}})}};function an(t){return typeof t=="string"?{value:t}:(e=t)&&typeof e=="object"&&typeof e.kind=="string"?t.kind==="plaintext"?{value:t.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}:{value:t.value}:{value:"```"+t.language+`
`+t.value+"\n```\n"};var e}function In(t){if(t)return Array.isArray(t)?t.map(an):[an(t)]}G=class{constructor(t){this._worker=t}provideDocumentHighlights(t,e,n){const r=t.uri;return this._worker(r).then(o=>o.findDocumentHighlights(r.toString(),I(e))).then(o=>{if(o)return o.map(a=>({range:b(a.range),kind:En(a.kind)}))})}};function En(t){switch(t){case V.Read:return u.languages.DocumentHighlightKind.Read;case V.Write:return u.languages.DocumentHighlightKind.Write;case V.Text:return u.languages.DocumentHighlightKind.Text}return u.languages.DocumentHighlightKind.Text}hn=class{constructor(t){this._worker=t}provideDefinition(t,e,n){const r=t.uri;return this._worker(r).then(o=>o.findDefinition(r.toString(),I(e))).then(o=>{if(o)return[sn(o)]})}};function sn(t){return{uri:u.Uri.parse(t.uri),range:b(t.range)}}bn=class{constructor(t){this._worker=t}provideReferences(t,e,n,r){const o=t.uri;return this._worker(o).then(a=>a.findReferences(o.toString(),I(e))).then(a=>{if(a)return a.map(sn)})}},ne=class{constructor(t){this._worker=t}provideRenameEdits(t,e,n,r){const o=t.uri;return this._worker(o).then(a=>a.doRename(o.toString(),I(e),n)).then(a=>function(s){if(!s||!s.changes)return;let c=[];for(let v in s.changes){const d=u.Uri.parse(v);for(let _ of s.changes[v])c.push({resource:d,versionId:void 0,textEdit:{range:b(_.range),text:_.newText}})}return{edits:c}}(a))}},Z=class{constructor(t){this._worker=t}provideDocumentSymbols(t,e){const n=t.uri;return this._worker(n).then(r=>r.findDocumentSymbols(n.toString())).then(r=>{if(r)return r.map(o=>"children"in o?un(o):{name:o.name,detail:"",containerName:o.containerName,kind:cn(o.kind),range:b(o.location.range),selectionRange:b(o.location.range),tags:[]})})}};function un(t){var e,n,r;return{name:t.name,detail:(e=t.detail)!=null?e:"",kind:cn(t.kind),range:b(t.range),selectionRange:b(t.selectionRange),tags:(n=t.tags)!=null?n:[],children:((r=t.children)!=null?r:[]).map(o=>un(o))}}function cn(t){let e=u.languages.SymbolKind;switch(t){case p.File:return e.File;case p.Module:return e.Module;case p.Namespace:return e.Namespace;case p.Package:return e.Package;case p.Class:return e.Class;case p.Method:return e.Method;case p.Property:return e.Property;case p.Field:return e.Field;case p.Constructor:return e.Constructor;case p.Enum:return e.Enum;case p.Interface:return e.Interface;case p.Function:return e.Function;case p.Variable:return e.Variable;case p.Constant:return e.Constant;case p.String:return e.String;case p.Number:return e.Number;case p.Boolean:return e.Boolean;case p.Array:return e.Array}return e.Function}J=class{constructor(t){this._worker=t}provideLinks(t,e){const n=t.uri;return this._worker(n).then(r=>r.findDocumentLinks(n.toString())).then(r=>{if(r)return{links:r.map(o=>({range:b(o.range),url:o.target}))}})}},Q=class{constructor(t){this._worker=t}provideDocumentFormattingEdits(t,e,n){const r=t.uri;return this._worker(r).then(o=>o.format(r.toString(),null,dn(e)).then(a=>{if(a&&a.length!==0)return a.map(S)}))}},Y=class{constructor(t){this._worker=t,this.canFormatMultipleRanges=!1}provideDocumentRangeFormattingEdits(t,e,n,r){const o=t.uri;return this._worker(o).then(a=>a.format(o.toString(),oe(e),dn(n)).then(s=>{if(s&&s.length!==0)return s.map(S)}))}};function dn(t){return{tabSize:t.tabSize,insertSpaces:t.insertSpaces}}vn=class{constructor(t){this._worker=t}provideDocumentColors(t,e){const n=t.uri;return this._worker(n).then(r=>r.findDocumentColors(n.toString())).then(r=>{if(r)return r.map(o=>({color:o.color,range:b(o.range)}))})}provideColorPresentations(t,e,n){const r=t.uri;return this._worker(r).then(o=>o.getColorPresentations(r.toString(),e.color,oe(e.range))).then(o=>{if(o)return o.map(a=>{let s={label:a.label};return a.textEdit&&(s.textEdit=S(a.textEdit)),a.additionalTextEdits&&(s.additionalTextEdits=a.additionalTextEdits.map(S)),s})})}},ee=class{constructor(t){this._worker=t}provideFoldingRanges(t,e,n){const r=t.uri;return this._worker(r).then(o=>o.getFoldingRanges(r.toString(),e)).then(o=>{if(o)return o.map(a=>{const s={start:a.startLine+1,end:a.endLine+1};return a.kind!==void 0&&(s.kind=function(c){switch(c){case j.Comment:return u.languages.FoldingRangeKind.Comment;case j.Imports:return u.languages.FoldingRangeKind.Imports;case j.Region:return u.languages.FoldingRangeKind.Region}}(a.kind)),s})})}};let Ee;re=class{constructor(t){this._worker=t}provideSelectionRanges(t,e,n){const r=t.uri;return this._worker(r).then(o=>o.getSelectionRanges(r.toString(),e.map(I))).then(o=>{if(o)return o.map(a=>{const s=[];for(;a;)s.push({range:b(a.range)}),a=a.parent;return s})})}},Ee=class extends Se{constructor(t){super(t,[".",":","<",'"',"=","/"])}},kn=function(t){const e=new ie(t),n=(...o)=>e.getLanguageServiceWorker(...o);let r=t.languageId;u.languages.registerCompletionItemProvider(r,new Ee(n)),u.languages.registerHoverProvider(r,new te(n)),u.languages.registerDocumentHighlightProvider(r,new G(n)),u.languages.registerLinkProvider(r,new J(n)),u.languages.registerFoldingRangeProvider(r,new ee(n)),u.languages.registerDocumentSymbolProvider(r,new Z(n)),u.languages.registerSelectionRangeProvider(r,new re(n)),u.languages.registerRenameProvider(r,new ne(n)),r==="html"&&(u.languages.registerDocumentFormattingEditProvider(r,new Q(n)),u.languages.registerDocumentRangeFormattingEditProvider(r,new Y(n)))},_n=function(t){const e=[],n=[],r=new ie(t);e.push(r);const o=(...a)=>r.getLanguageServiceWorker(...a);return function(){const{languageId:a,modeConfiguration:s}=t;gn(n),s.completionItems&&n.push(u.languages.registerCompletionItemProvider(a,new Ee(o))),s.hovers&&n.push(u.languages.registerHoverProvider(a,new te(o))),s.documentHighlights&&n.push(u.languages.registerDocumentHighlightProvider(a,new G(o))),s.links&&n.push(u.languages.registerLinkProvider(a,new J(o))),s.documentSymbols&&n.push(u.languages.registerDocumentSymbolProvider(a,new Z(o))),s.rename&&n.push(u.languages.registerRenameProvider(a,new ne(o))),s.foldingRanges&&n.push(u.languages.registerFoldingRangeProvider(a,new ee(o))),s.selectionRanges&&n.push(u.languages.registerSelectionRangeProvider(a,new re(o))),s.documentFormattingEdits&&n.push(u.languages.registerDocumentFormattingEditProvider(a,new Q(o))),s.documentRangeFormattingEdits&&n.push(u.languages.registerDocumentRangeFormattingEditProvider(a,new Y(o)))}(),e.push(ln(n)),ln(e)};function ln(t){return{dispose:()=>gn(t)}}function gn(t){for(;t.length;)t.pop().dispose()}}));export{Se as CompletionAdapter,hn as DefinitionAdapter,pn as DiagnosticsAdapter,vn as DocumentColorAdapter,Q as DocumentFormattingEditProvider,G as DocumentHighlightAdapter,J as DocumentLinkAdapter,Y as DocumentRangeFormattingEditProvider,Z as DocumentSymbolAdapter,ee as FoldingRangeAdapter,te as HoverAdapter,bn as ReferenceAdapter,ne as RenameAdapter,re as SelectionRangeAdapter,ie as WorkerManager,Cn as __tla,I as fromPosition,oe as fromRange,_n as setupMode,kn as setupMode1,b as toRange,S as toTextEdit};
