import{request as e,_export_sfc as s,useGeneralStore as a,Form as r,useRouter as o,reactive as t,resolveComponent as l,openBlock as n,createElementBlock as i,createBaseVNode as u,createVNode as d,withCtx as m,api as p,setToken as c,createTextVNode as f}from"./index-CR_1l9OE.js";const g=a(),v={class:"login-container"},h={class:"login-card"},_={class:"content"};const w=s({setup(s){const a=r.useForm,l=o(),n=t({username:"admin",password:"12345678"}),i=t({username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"},{}]}),{validate:u,validateInfos:d}=a(n,i);return{formRef:n,rulesRef:i,validateInfos:d,validate:u,onFinish:()=>{var s;(s=n,e({url:"/adm/login",method:"post",data:s})).then((e=>{e.success?(c(e.model.token||""),setTimeout((()=>{g.getValidProject()})),p.success("登录成功"),setTimeout((()=>{l.push("/")}),3e3)):p.error(e.errorMessage)}))}}}},[["render",function(e,s,a,r,o,t){const p=l("UserOutlined"),c=l("a-input"),g=l("a-form-item"),w=l("LockOutlined"),R=l("a-input-password"),b=l("a-button"),y=l("a-form");return n(),i("div",v,[u("div",h,[s[3]||(s[3]=u("div",{class:"title"},[u("img",{src:"/static/png/logo-BSgXqyPE.png"})],-1)),u("div",_,[d(y,{id:"formLogin",name:"basic",class:"user-layout-login","label-col":{span:4},onFinish:r.onFinish,model:r.formRef},{default:m((()=>[d(g,{rules:[{required:!0,message:"Please input your username!"}],name:"username"},{default:m((()=>[d(c,{size:"large",type:"text",placeholder:"请输入用户名",value:r.formRef.username,"onUpdate:value":s[0]||(s[0]=e=>r.formRef.username=e)},{prefix:m((()=>[d(p)])),_:1},8,["value"])])),_:1}),d(g,{rules:[{required:!0,message:"Please input your password!"}],name:"password"},{default:m((()=>[d(R,{size:"large",placeholder:"请输入密码",value:r.formRef.password,"onUpdate:value":s[1]||(s[1]=e=>r.formRef.password=e),autocomplete:""},{prefix:m((()=>[d(w)])),_:1},8,["value"])])),_:1}),d(g,null,{default:m((()=>[d(b,{block:"","html-type":"submit",size:"large"},{default:m((()=>s[2]||(s[2]=[f("登 录")]))),_:1})])),_:1})])),_:1},8,["onFinish","model"])])])])}],["__scopeId","data-v-05adab9e"]]);export{w as default};
