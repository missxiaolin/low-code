const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/rawComponents-cQ1U8Lmq.js","static/js/index-CaN1-knc.js","static/css/index-t8MkTDgm.css","static/js/vueCodeEditorDialog-Cy6JKLIe.js","static/js/index-ClGSD9vW.js","static/js/index.browser-CnptF3mM.js","static/js/store-COJ5nXg5.js","static/js/code-generator-factory-DTxROKyR.js","static/css/code-generator-factory-BWu0zQ8U.css","static/css/rawComponents-DkAtwtnl.css","static/js/toolsBar-D99O6mjD.js","static/css/toolsBar-Dm68tZtC.css","static/js/attributeInput-BqLy6g0_.js","static/css/attributeInput-DoGqeo1H.css","static/js/code-C0WDGdTL.js","static/js/xml-fold-DnPKLEiT.js","static/css/xml-fold-D05cK1KH.css","static/css/code-YDR9qvVV.css"])))=>i.map(i=>d[i]);
var F=(V,I,D)=>new Promise((A,j)=>{var K=g=>{try{w(D.next(g))}catch(R){j(R)}},z=g=>{try{w(D.throw(g))}catch(R){j(R)}},w=g=>g.done?A(g.value):Promise.resolve(g.value).then(K,z);w((D=D.apply(V,I)).next())});import{$ as me,at as re,ai as x,a0 as ve,d as J,_ as pe,a as M,a8 as fe,r as E,o as G,f as W,e as S,b,w as N,s as _e,G as Ce,H as ge,I as ye,c as Ee,W as Se,F as be,__tla as we}from"./index-CaN1-knc.js";import{p as Pe,E as De,e as ke,a as Re,g as Le,c as Ne,v as Ie}from"./code-generator-factory-DTxROKyR.js";import{f as se,a as ae,g as de,i as T,c as Oe,b as Ve,d as $e,e as xe,h as Je,j as k,v as Me}from"./vueCodeEditorDialog-Cy6JKLIe.js";let le,B,ce,Te=Promise.all([(()=>{try{return we}catch(V){}})()]).then(()=>F(void 0,null,function*(){function V(t){window.tree||(window.tree={}),function(e){function o(n){for(const i in n)if(n.hasOwnProperty(i)){const r=n[i];if(n.hasOwnProperty("__key__")&&n.__key__==="__children"&&T(r)&&delete n.__key__,i==="lc_id"&&n.hasOwnProperty("__key__")){const s=n.__key__,c={[s]:n};c.__proto__=n.__proto__,delete n.__key__,window.tree[r]=c}else i==="__children"?n.__children.forEach(s=>{s.__key__=i,o(s)}):T(r)&&(r.__key__=i,o(r))}}o(e)}(t)}function I(t){const e=se(t);return ae(e)}function D(t){return se(t)}le=function(t,e=()=>{}){(function o(n){if(n.attributes["lc-mark"]&&(e(),A(n)),n.children.length>0){const i=n.children.length;for(let r=0;r<i;r++)o(n.children.item(r))}})(t)};function A(t){t.draggable=!0,t.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="copy";const o=((n=t).querySelector(".title")&&(n=n.querySelector(".title")),n.attributes.lc_id?ae(n):{[n.localName]:{__text__:n.innerText,class:n.className}});var n;let i=t.innerText;t.querySelector(".title")&&(i=t.querySelector(".title").innerText);let r="";t.querySelector(".title")&&(r=t.querySelector(".title").getAttribute("component_url")||"");let s="";t.querySelector(".title")&&(s=t.querySelector(".title").getAttribute("component_name")||"");const c=`${t.localName}@#$!${t.innerText}@#$!0@#$!${t.style.cssText}@#$!${JSON.stringify(o)}@#$!${i}@#$!${r}@#$!${s}`;e.dataTransfer.setData("text/plain",c),e.stopPropagation()}),t.addEventListener("mouseenter",e=>{const o=t.parentElement.classList;o&&o.contains("mark-element-unit")&&(o.remove("mark-element-unit"),t.isRemoveParentStyle=!0),t.classList.add("mark-element-unit"),e.stopPropagation()}),t.addEventListener("mouseleave",e=>{t.classList.remove("mark-element-unit"),t.isRemoveParentStyle&&t.parentElement.classList.add("mark-element-unit"),e.stopPropagation()})}var j={exports:{}};const K=re(j.exports=function(){function t(o,n){/^[0-9]/.test(n)&&(n="_"+n);var i="____",r=e(o,n="."+i+n+i);return(r.match(new RegExp("(?<=@media.*\\(.*\\) \\{)(([^\\{\\}]*\\{[^\\{\\}]+\\}[^\\{\\}]*)+)(?<=\\})","g"))||[]).forEach(function(s){r=r.replace(s," "+e(s,n))}),r.replace(new RegExp(i,"gm"),"")}function e(o,n){var i=o.replace(/\/\*(.*)\*\//g,"").replace(/\s+/g," ").replace(/\s*{/g," {").replace(/\s*}/g," }").replace(/}(\s[^}])/g,`}
$1`).replace(/^\s+/gm,"").replace(/^([^@}])/gm,n+" $1").replace(/,/g,","+n);return(i.match(/{(([^{}]*{[^{}]+}[^{}]*)*)}|{[^{}]*}/g)||[]).forEach(function(r){i=i.replace(r,r.replace(new RegExp(n,"g"),""))}),i}return t}());class z{constructor(e){window.$mt="",this.isCloneNode=!1,this.editMode=!0,this.eventEmitter=new De,this.currentPointPositionAfterIndex=-1,this.renderStack=[],this.redoStack=[],this.externalJS={},this.customCss="",this.eventNode={},this.customData={},this.componentOptions={},this.dropIninFunction=e.dropIninFunction||""}getComponentOptions(){return this.componentOptions}_render(e){return F(this,null,function*(){this._rawDataStructure=e;const o=x(e);this.eventEmitter.emit("codeStructureUpdated",o),this.initCodeGenerator();let n=yield this.codeGenerator.outputVueCodeWithJsonObj(e);n=n.replace(/:\s*\(([\w\s,]*)\)\s*=>/g,"($1)");let i=n.replace(/\s{1}lc_id=".+?"/g,"");if(i=i.replace(/\s{1}vccName=".+?"/g,""),i=i.replace(/\s{1}component_name=".+?"/g,""),i=i.replace(/\s{1}lc-mark/g,""),i=i.replace(/\s{1}div-lc-mark/g,""),this.eventEmitter.emit("codeCreated",i),this.editMode){const r=this.createMountedElement();this.appLoad(n,r),this.enableEditMode(),this.flatDataStructure(e)}else this.appLoad(n,this.mountedEle);return this})}appLoad(e,o){const n=ke(e,this._rawDataStructure),i={"/mt.vue":Re(),"/main.vue":n,"/events.json":`${JSON.stringify(this.eventNode)}`},r=Le(i),s=ve(J(()=>window["vue3-sfc-loader"].loadModule("/main.vue",r)));window.loadApp(s),s.mount(o)}render(e){return this._render(e),this}setEditMode(e,o){this.editMode=e,this.mountedEle=o,this.reRender()}loadStyle(e){if(e.length>0){const o=e[0];this.styleNodeName=`cssScoped${Date.now()}`;const n=K(o.content.replace(/::v-deep/g,""),this.styleNodeName),i=document.createElement("style");i.innerText=n,document.head.appendChild(i)}}initCodeGenerator(){this.codeGenerator=Ne(),this.codeGenerator.setExternalJS(this.externalJS),this.codeGenerator.setExternalCss(this.customCss),this.codeGenerator.setEventNode(this.eventNode),this.codeGenerator.setCustomData(this.customData)}getControlPanelRoot(){return document.getElementById("render-control-panel")}saveJsData(e){return this.customData=e,this}saveJSCode(e,o=!0){this.saveJSCodeOnly(e),this.codeGenerator&&this.codeGenerator.setExternalJS(e),o&&this.reRender()}saveJSCodeOnly(e){return this.externalJS=e||"",this}saveEventNode(e){return this.eventNode=e,this}saveCssCode(e,o=!0){this.saveCssCodeOnly(e),this.codeGenerator&&this.codeGenerator.setExternalCss(e),o&&this.reRender()}saveCssCodeOnly(e){return this.customCss=e||"",this}createMountedElement(){const e=this.getControlPanelRoot();return this.styleNodeName&&e.setAttribute("class",this.styleNodeName),e}initComonentsEvent(){this.getControlPanelRoot().querySelectorAll("[lc_id]").forEach(e=>{e.addEventListener("click",o=>{o.stopPropagation(),this.markElement(e)}),A(e)}),this.initDropEvent()}markElement(e){if(this.currentEditElement&&this.currentEditElement.classList.remove("mark-element"),this.getControlPanelRoot().querySelectorAll("[lc_id]").forEach(o=>{o.classList.remove("mark-element")}),e){this.currentEditElement=e;const o=this.markElementInner(e),n=x(o);this.eventEmitter.emit("selected",n)}else this.eventEmitter.emit("selected",null)}markElementInner(e){e.classList.add("mark-element");const o=I(e);let n=de(o);return o[Object.keys(o)[0]].vccName&&(n=o[Object.keys(o)[0]].vccName),e.setAttribute("lc-component-name",n),o}clearElementSelect(){this.markElement(null)}setDropInfo(e){this.currentPointDropInfo=e}initDropEvent(){const e=this.getControlPanelRoot();e.addEventListener("dragenter",o=>{o.preventDefault()}),e.addEventListener("dragleave",o=>{o.preventDefault()}),e.addEventListener("dragover",o=>{o.preventDefault()}),e.addEventListener("drop",o=>{if(!this.currentPointDropInfo.target)return;let n=o.dataTransfer.getData("text/plain").split("@#$!");const i=n[4],r=n[5];let s=JSON.parse(i);if(s&&Object.keys(s).forEach(c=>{c==="__key__"||s[c].vccName||(s[c].vccName=r),c!=="__key__"&&n[6]&&!s[c].componentUrl&&(s[c].componentUrl=n[6]),c!=="__key__"&&n[7]&&!s[c].component_name&&(s[c].component_name=n[7])}),$e(s)){if(this.dropIninFunction)return void this.dropIninFunction(s,this);this.initDropCode(s)}else xe(s)&&Je(s);this.updateCodeStructure(s)})}initDropCode(e){(function(o){const n=de(o),i=o[n],r=Pe[n];if(r){for(const s in r)if(r.hasOwnProperty(s)){const c=r[s];i[s]=c}}})(e),function(o,n){let i=n;(function r(s){if(T(s)){for(const c in s)if(s.hasOwnProperty(c)){const u=s[c];if(c=="lc_id"){const m=s[c],v=Oe();i=i.replace(m,v),s[c]=v}else T(u)?r(u):Ve(u)&&u.forEach(m=>r(m))}}})(o)}(e,""),V(e)}updateCodeStructure(e){const o=D(this.currentPointDropInfo.target);if(o){let n=I(o);this.backup(),function(i,r,s=-1,c=()=>{}){i&&r&&(i.__children||(i.__children=[]),s>-1?i.__children.splice(s,0,r):i.__children.push(r),c(),r.__proto__={parentCodeNode:i})}(k(n),e,this.currentPointDropInfo.index,()=>{this.eventEmitter.emit("onMerged")}),this.render(this._rawDataStructure)}}enableEditMode(){let e="";const o=this.getControlPanelRoot();this.enableDelayTask&&clearTimeout(this.enableDelayTask),this.enableDelayTask=setTimeout(()=>{this.isCloneNode&&(e=o.cloneNode(!0),o.parentNode.replaceChild(e,o)),this.eventEmitter.emit("mounted",e||o),this.initComonentsEvent()},500)}flatDataStructure(e){V(e)}onSelectElement(e){return this.subscribeEventListener("selected",e),this}onRootElementMounted(e){return this.subscribeEventListener("mounted",e),this}onCodeCreated(e){return this.subscribeEventListener("codeCreated",e),this}onCodeStructureUpdated(e){return this.subscribeEventListener("codeStructureUpdated",e),this}onMerged(e){return this.subscribeEventListener("onMerged",e),this}onNodeDeleted(e){return this.subscribeEventListener("onNodeDeleted",e),this}reRender(){return this._render(this._rawDataStructure),this}asyncReRender(){return F(this,null,function*(){return yield this._render(this._rawDataStructure),this})}saveAttribute(e,o,n){const i=e,r=k(window.tree[o]);this.backup();for(const s in r)r.hasOwnProperty(s)&&s!="__children"&&s!="lc-mark"&&s!="lc_id"&&s!="vccName"&&s!="div-lc-mark"&&!T(r[s])&&delete r[s];return i.forEach(s=>{r[s.key]=s.value}),this.render(this._rawDataStructure),r.lc_id&&setTimeout(()=>{this.selectElement(r.lc_id,r.vccName||n)},10),this}selectElement(e,o){const n=this.getControlPanelRoot().querySelector(`[lc_id="${e}"]`);n&&(n.classList.add("mark-element"),n.setAttribute("lc-component-name",o))}onLevelChange(e,o){this.backup();const n=this.remove(e,!1);o.splice(0,1);let i=this._rawDataStructure,r=-1;for(let s=0;s<o.length-1;s++)i=k(i).__children[o[s]],r=o[s+1];i&&n.length>0&&k(i).__children.splice(r,0,n[0]),this.render(this._rawDataStructure)}remove(e,o=!0){let n=null;const i=document.querySelector(`[lc_id="${e}"]`);if(i){const r=D(i.parentElement);if(r){const s=I(r),c=k(s);if(c){const u=c.__children,m=u.findIndex(v=>k(v).lc_id==e);o&&this.backup(),n=u.splice(m,1),this.eventEmitter.emit("onNodeDeleted"),this.render(this._rawDataStructure)}}}return n}subscribeEventListener(e,o){this.eventEmitter.on(e,o)}backup(){this.renderStack.push(x(this._rawDataStructure)),this.redoStack=[]}undo(){if(this.renderStack.length>0){this.redoStack.push(x(this._rawDataStructure));const e=this.renderStack.pop();this._render(e)}}redo(){if(this.redoStack.length>0){this.renderStack.push(x(this._rawDataStructure));const e=this.redoStack.pop();this._render(e)}}}let w=null,g=null,R=null;function ue(t,e=()=>{}){const o=document.querySelector(".x"),n=(...s)=>{e(...s)};function i(s){const c=D(s.parentElement),u=s.getAttribute("lc_id");if(c){const m=I(c);if(m){const v=k(m);if(v)return v.__children.findIndex(L=>k(L).lc_id==u)}}return-1}function r(){R&&R.classList.remove("in-element")}t.addEventListener("dragover",s=>{s.preventDefault(),function(c){const u=c.target,m=function(L,q,C){const y=X(L),P=Math.round((y.bottom-y.top)/3);return{top:C<y.top+P,middle:C>=y.top+P&&C<=y.top+2*P,bottom:C>y.top+2*P}}(u,c.clientX,c.clientY),v=X(u);if(m.top&&t!==u){if(w===1&&g===u)return;w=1,g=u,r(),o.style=`top:${v.top}px;width:${v.width}px;left:${v.left}px;display:block;`,n(u.parentElement,i(u))}else if(m.bottom&&t!==u){if(w===3&&g===u)return;w=3,g=u,r(),o.style=`top:${v.bottom}px;width:${v.width}px;left:${v.left}px;display:block;`,n(u.parentElement,i(u)+1)}else w=2,g=u,u.classList.add("in-element"),R=u,o.style="display:none;",n(u,-1)}(s)}),t.addEventListener("dragleave",s=>{s.target===t?(t.classList.remove("in-element"),o.style="display: none;"):r()})}function X(t){return t.getBoundingClientRect()}var H,Y={exports:{}};H=Y,function(t){var e,o={},n={16:!1,18:!1,17:!1,91:!1},i="all",r={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},c=function(a){return s[a]||a.toUpperCase().charCodeAt(0)},u=[];for(e=1;e<20;e++)s["f"+e]=111+e;function m(a,l){for(var d=a.length;d--;)if(a[d]===l)return d;return-1}function v(a,l){if(a.length!=l.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!==l[d])return!1;return!0}var L={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function q(a){for(e in n)n[e]=a[L[e]]}function C(a,l,d){var h,p;h=P(a),d===void 0&&(d=l,l="all");for(var _=0;_<h.length;_++)p=[],(a=h[_].split("+")).length>1&&(p=U(a),a=[a[a.length-1]]),a=a[0],(a=c(a))in o||(o[a]=[]),o[a].push({shortcut:h[_],scope:l,method:d,key:h[_],mods:p})}for(e in r)C[e]=!1;function y(){return i||"all"}function P(a){var l;return(l=(a=a.replace(/\s/g,"")).split(","))[l.length-1]==""&&(l[l.length-2]+=","),l}function U(a){for(var l=a.slice(0,a.length-1),d=0;d<l.length;d++)l[d]=r[l[d]];return l}function f(a,l,d){a.addEventListener?a.addEventListener(l,d,!1):a.attachEvent&&a.attachEvent("on"+l,function(){d(window.event)})}f(document,"keydown",function(a){(function(l){var d,h,p,_,O,$;if(d=l.keyCode,m(u,d)==-1&&u.push(d),d!=93&&d!=224||(d=91),d in n)for(p in n[d]=!0,r)r[p]==d&&(C[p]=!0);else if(q(l),C.filter.call(this,l)&&d in o){for($=y(),_=0;_<o[d].length;_++)if((h=o[d][_]).scope==$||h.scope=="all"){for(p in O=h.mods.length>0,n)(!n[p]&&m(h.mods,+p)>-1||n[p]&&m(h.mods,+p)==-1)&&(O=!1);(h.mods.length!=0||n[16]||n[18]||n[17]||n[91])&&!O||h.method(l,h)===!1&&(l.preventDefault?l.preventDefault():l.returnValue=!1,l.stopPropagation&&l.stopPropagation(),l.cancelBubble&&(l.cancelBubble=!0))}}})(a)}),f(document,"keyup",function(a){var l,d=a.keyCode,h=m(u,d);if(h>=0&&u.splice(h,1),d!=93&&d!=224||(d=91),d in n)for(l in n[d]=!1,r)r[l]==d&&(C[l]=!1)}),f(window,"focus",function(){for(e in n)n[e]=!1;for(e in r)C[e]=!1});var he=t.key;t.key=C,t.key.setScope=function(a){i=a||"all"},t.key.getScope=y,t.key.deleteScope=function(a){var l,d,h;for(l in o)for(d=o[l],h=0;h<d.length;)d[h].scope===a?d.splice(h,1):h++},t.key.filter=function(a){var l=(a.target||a.srcElement).tagName;return!(l=="INPUT"||l=="SELECT"||l=="TEXTAREA")},t.key.isPressed=function(a){return typeof a=="string"&&(a=c(a)),m(u,a)!=-1},t.key.getPressedKeyCodes=function(){return u.slice(0)},t.key.noConflict=function(){var a=t.key;return t.key=he,a},t.key.unbind=function(a,l){var d,h,p,_,O,$=[];for(d=P(a),_=0;_<d.length;_++){if((h=d[_].split("+")).length>1&&($=U(h),a=h[h.length-1]),a=c(a),l===void 0&&(l=y()),!o[a])return;for(p=0;p<o[a].length;p++)(O=o[a][p]).scope===l&&v(O.mods,$)&&(o[a][p]={})}},H.exports=C}(me);let Q,Z,ee,te,ne,oe;B=re(Y.exports),Q={name:"vcc",props:{initCodeEntity:{type:Object,default:()=>({})},asyncComponents:{type:Array,default:()=>[]}},emits:["updateCodeEntity","onLoadFinish"],components:{rawComponents:J(()=>M(()=>import("./rawComponents-cQ1U8Lmq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),toolsBar:J(()=>M(()=>import("./toolsBar-D99O6mjD.js"),__vite__mapDeps([10,1,2,11]))),attributeInput:J(()=>M(()=>import("./attributeInput-BqLy6g0_.js"),__vite__mapDeps([12,3,4,1,2,5,6,7,8,13]))),"lc-code":J(()=>M(()=>import("./code-C0WDGdTL.js"),__vite__mapDeps([14,1,2,5,15,16,7,8,17]))),vueRuleTool:Ie,vueCodeEditor:Me},data:()=>({modelOpen:!1,modelValue:"",newDropObj:{},eventNode:{},customData:[],currentEditRawInfo:null,code:"",codeDialogVisible:!1,jsDialogVisible:!1,vueDialogVisible:!1,editMode:!0,codeRawVueInfo:null,JSCode:"",customCss:"",isShowAttribute:!1}),watch:{currentEditRawInfo(t){this.isShowAttribute=!!t},initCodeEntity(t){t.JSCode&&this.mainPanelProvider.saveJSCodeOnly(this.convertLogicCode(t.JSCode)),t.codeStructure&&this.mainPanelProvider.render(t.codeStructure),t.css&&this.mainPanelProvider.saveCssCodeOnly(this.convertCssLogicCode(t.css))}},computed:{},beforeCreate(){},provide(){return{vccApp:this}},created(){this.mainPanelProvider=new z({dropIninFunction:this.dropIninFunction})},beforeMount(){},mounted(){this.onPreviewModeChange(this.initCodeEntity.mode!=1),Promise.all([M(()=>import("./load-DwytJNh1.js"),[])]).then(t=>{this.$emit("onLoadFinish"),this.eventNode=this.initCodeEntity.eventNode,this.init()}),this.initShortcut()},beforeUpdate(){},updated(){},destroyed(){},methods:{dropIninFunction(t,e){const o=Object.keys(t);if(["mic-modal","mic-drawer"].includes(o[0]))return this.modelValue="",this.newDropObj=t,void(this.modelOpen=!0);e.initDropCode(t),e.updateCodeStructure(t)},setDropObj(){if(!this.modelValue)return void fe.error("\u8BF7\u9009\u62E9\u7ED1\u5B9A\u7684\u53D8\u91CF");const t=this.newDropObj;t[Object.keys(t)[0]]["v-model:open"]=this.modelValue,this.mainPanelProvider.initDropCode(t),this.mainPanelProvider.updateCodeStructure(t),this.modelOpen=!1},convertLogicCode(t){try{let e=t;this.JSCode=t;const o=()=>{this.$refs.vueEditor?this.$refs.vueEditor.updateJsCode(t):setTimeout(()=>{o()},20)};return o(),e}catch(e){}},setCurrentEditRawInfo(t){this.currentEditRawInfo=t,this.isShowAttribute=!0},convertCssLogicCode(t){return this.$refs.vueEditor.updateCssCode(t),this.customCss=t,t},convertDataLogic(t,e=!1){let o={};return this.customData=t||[],t.forEach(n=>{["string","array","object"].includes(n.key)||n.key==="string"?o[n.key]=n.value:n.key==="number"?o[n.key]=Number(n.value):n.key==="boolean"?o[n.key]=n.value==="true"||n.value===!0:o[n.key]=n.value}),e&&(this.mainPanelProvider.saveJsData(o),this.renderCode()),o},initShortcut(){B("\u2318+z, ctrl+z",()=>(this.undo(),!1)),B("esc",()=>(this.editMode=!0,this.mainPanelProvider.setEditMode(!0),!1))},init(){this.mainPanelProvider.onRootElementMounted(t=>{document.getElementsByTagName("body")[0].addEventListener("click",e=>{this.mainPanelProvider.clearElementSelect()}),ue(t.firstChild,this.currentPointer),document.querySelector(".x").style="display:none;"}).onMerged(()=>{this.currentPointer(null)}).onCodeCreated(t=>{this.code=t}).onCodeStructureUpdated(t=>{this.$refs.rawComponents&&this.$refs.rawComponents.updateCode(t),this.$refs.vueRuleTool&&this.$refs.vueRuleTool.regenerateScale(),this.codeRawVueInfo=t,this.notifyParent()}).onNodeDeleted(()=>{this.currentEditRawInfo=null}).onSelectElement(t=>{this.currentEditRawInfo=t}).saveCssCodeOnly(this.convertCssLogicCode(this.initCodeEntity.css?this.initCodeEntity.css:"")).saveJSCodeOnly(this.convertLogicCode(this.initCodeEntity.JSCode?this.initCodeEntity.JSCode:"")).saveEventNode(this.initCodeEntity.eventNode).saveJsData(this.convertDataLogic(this.initCodeEntity.customData||[])).render(this.initCodeEntity.codeStructure?this.initCodeEntity.codeStructure:this.getFakeData()),this.eventNode=this.initCodeEntity.eventNode||{}},notifyParent(){this.$emit("updateCodeEntity",{codeRawVueInfo:this.codeRawVueInfo,JSCode:this.JSCode,css:this.customCss,eventNode:this.eventNode,customData:this.customData})},currentPointer(t,e){this.mainPanelProvider.setDropInfo({target:t,index:e})},getFakeData:()=>({template:{lc_id:"root",__children:[{div:{class:"container",lc_id:"container",style:"min-height: 100%;"}}]}}),onPreviewModeChange(t){const e=document.querySelector("#render-control-panel");e.style=t?"width:375px;":"width:100%;"},onEditModeChange(t){this.editMode=t,this.$nextTick(()=>{this.mainPanelProvider.setEditMode(t,document.querySelector("#mountedEle"))})},renderCode(){this.mainPanelProvider.reRender()},clear(){this.mainPanelProvider.render(this.getFakeData())},onSaveAttr({resultList:t,lc_id:e,vueRawTag:o}){this.mainPanelProvider.saveAttribute(t,e,o)},onRemove({lc_id:t}){this.mainPanelProvider.remove(t)},redo(){this.mainPanelProvider.redo()},undo(){this.mainPanelProvider.undo()},saveJSCode({JSCodeInfo:t,JSCode:e}){this.mainPanelProvider.saveJSCode(t),this.JSCode=e,this.notifyParent()},saveCssCode(t){this.mainPanelProvider.saveCssCode(t),this.customCss=t,this.notifyParent()},saveEventLogicCode(t){t&&(this.eventNode=t,this.mainPanelProvider.saveEventNode(t),this.mainPanelProvider.reRender(),this.notifyParent())},codeParseSucess(t,e,o){e&&(this.mainPanelProvider.saveJSCode(e,!1),this.JSCode=e),o&&(this.mainPanelProvider.saveCssCode(o,!1),this.customCss=o),t&&this.mainPanelProvider.render(t),this.notifyParent()},render(t){this.mainPanelProvider.render(t)},showVueDialogVisible(){this.$refs.vueEditor.updateCode(this.code),this.vueDialogVisible=!0},showCodeDialogVisible(){this.codeDialogVisible=!0},save(){this.$emit("save",{code:this.code,codeRawVueInfo:this.codeRawVueInfo,JSCode:this.JSCode,css:this.customCss,eventNode:this.eventNode,customData:this.customData})}},fillter:{}},Z={class:"vcc-box"},ee={class:"main-main"},te={class:"base-component-container"},ne={class:"vcc-main-container"},oe={key:0,id:"fullScreen"};let ie;ie=pe(Q,[["render",function(t,e,o,n,i,r){const s=E("raw-components"),c=E("tools-bar"),u=E("vueRuleTool"),m=E("attribute-input"),v=E("lc-code"),L=E("vueCodeEditor"),q=E("a-select-option"),C=E("a-select"),y=E("a-form-item"),P=E("a-form"),U=E("a-modal");return G(),W("div",Z,[S("div",ee,[S("nav",te,[b(s,{ref:"rawComponents",customData:i.customData,asyncComponents:o.asyncComponents,onReRender:r.render,onSetCurrentEditRawInfo:r.setCurrentEditRawInfo,onSaveData:e[0]||(e[0]=f=>{r.convertDataLogic(f,!0)}),initStructure:i.codeRawVueInfo},null,8,["customData","asyncComponents","onReRender","onSetCurrentEditRawInfo","initStructure"])]),S("div",ne,[b(c,{onOnPreviewModeChange:r.onPreviewModeChange,onOnEditModeChange:r.onEditModeChange,onRedo:r.redo,onUndo:r.undo,onClear:r.clear,onShowVueDialogVisible:r.showVueDialogVisible,onShowCodeDialogVisible:r.showCodeDialogVisible,onSave:r.save},{default:N(()=>[_e(t.$slots,"toole",{},void 0,!0)]),_:3},8,["onOnPreviewModeChange","onOnEditModeChange","onRedo","onUndo","onClear","onShowVueDialogVisible","onShowCodeDialogVisible","onSave"]),b(u,{"is-scale-revise":!0,parent:!0,width:"100%",height:"100%",isScaleRevise:!0,ref:"vueRuleTool"},{default:N(()=>e[5]||(e[5]=[S("div",{class:"preview-container"},[S("div",{id:"render-control-panel"})],-1)])),_:1},512)]),b(m,{isShowAttribute:i.isShowAttribute,eventNode:i.eventNode,customData:i.customData,enableRemoveButton:!0,class:"attribute",onSave:r.onSaveAttr,onRemove:r.onRemove,onSaveEventLogicCode:r.saveEventLogicCode,ref:"attributeInput",shortcutInitMode:"hand",__rawVueInfo__:i.currentEditRawInfo},null,8,["isShowAttribute","eventNode","customData","onSave","onRemove","onSaveEventLogicCode","__rawVueInfo__"])]),S("div",null,[b(v,{rawCode:i.code,codeDialogVisible:i.codeDialogVisible,"onUpdate:codeDialogVisible":e[1]||(e[1]=f=>i.codeDialogVisible=f)},null,8,["rawCode","codeDialogVisible"]),b(L,{ref:"vueEditor",onCodeParseSucess:r.codeParseSucess,vueDialogVisible:i.vueDialogVisible,"onUpdate:vueDialogVisible":e[2]||(e[2]=f=>i.vueDialogVisible=f)},null,8,["onCodeParseSucess","vueDialogVisible"])]),e[7]||(e[7]=S("div",{class:"cross-flag"},[S("div",{class:"x"})],-1)),i.editMode?Ce("",!0):(G(),W("div",oe,e[6]||(e[6]=[S("div",{style:{margin:"20px","font-weight":"bold"}},"\u6309\u4E0BESC\u9000\u51FA\u9884\u89C8\u6A21\u5F0F",-1),S("div",{id:"mountedEle"},null,-1)]))),b(U,{title:"\u8BF7\u7ED1\u5B9A\u53D8\u91CF",open:i.modelOpen,"onUpdate:open":e[4]||(e[4]=f=>i.modelOpen=f),onOk:r.setDropObj},{default:N(()=>[b(P,null,{default:N(()=>[b(y,{label:"\u53D8\u91CF"},{default:N(()=>[b(C,{value:i.modelValue,"onUpdate:value":e[3]||(e[3]=f=>i.modelValue=f)},{default:N(()=>[(G(!0),W(ge,null,ye(i.customData,f=>(G(),Ee(q,{key:f.key,value:f.key},{default:N(()=>[Se(be(f.keyDesc),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["open","onOk"])])}],["__scopeId","data-v-a44caf11"]]),ce=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}))}));export{Te as __tla,le as d,B as k,ce as v};
